<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>StackSets 概念 - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="stacksets-concepts" /><meta name="default_state" content="stacksets-concepts" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" /><meta name="description" content="描述 StackSets 基本概念以及它们之间的关系。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="用户指南" /><meta name="abstract" content="根据此用户指南，使用 AWS CloudFormation 以可预见方式反复创建和管理 AWS 基础设施部署。" /><meta name="guide-locale" content="zh_cn" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="用户指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="用户指南" /><meta id="panorama-serviceConsolePage" value="StackSets 概念" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>StackSets 概念 - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,资源预置,资源配置,基础设施管理,CloudFormer,CloudFormation 堆栈,CloudFormation 堆栈集,CloudFormation 模板,更改集" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "用户指南",
        "item" : "https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "使用 AWS CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "StackSets 概念",
        "item" : "https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文档</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">用户指南</a></div><div id="page-toc-src"><a href="#stacksets-concepts-accts">管理员账户和目标账户</a><a href="#stacksets-concepts-stackset">AWS CloudFormation 堆栈集</a><a href="#stacksets-concepts-stackset-permission-models">堆栈集的权限模型</a><a href="#stacksets-concepts-stackinstances">堆栈实例</a><a href="#stacksets-concepts-ops">堆栈集操作</a><a href="#stackset-ops-options">堆栈集操作选项</a><a href="#stackset-concepts-tags">标签</a><a href="#stackset-status-codes">StackSets 状态代码</a><a href="#stack-instance-status-codes">堆栈实例状态代码</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="stacksets-concepts">StackSets 概念</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>当您使用 StackSets 时，使用<em>堆栈集</em>、<em>堆栈实例</em>和<em>堆栈</em>。</p><div class="highlights" id="inline-topiclist"><h6>主题</h6><ul><li><a href="#stacksets-concepts-accts">管理员账户和目标账户</a></li><li><a href="#stacksets-concepts-stackset">AWS CloudFormation 堆栈集</a></li><li><a href="#stacksets-concepts-stackset-permission-models">堆栈集的权限模型</a></li><li><a href="#stacksets-concepts-stackinstances">堆栈实例</a></li><li><a href="#stacksets-concepts-ops">堆栈集操作</a></li><li><a href="#stackset-ops-options">堆栈集操作选项</a></li><li><a href="#stackset-concepts-tags">标签</a></li><li><a href="#stackset-status-codes">StackSets 状态代码</a></li><li><a href="#stack-instance-status-codes">堆栈实例状态代码</a></li></ul></div>
            <h2 id="stacksets-concepts-accts">管理员账户和目标账户</h2>

            <p><em>管理员账户</em>是您用来创建堆栈集的 AWS 账户。对于具有服务托管权限的堆栈集，管理员账户是组织的 管理账户 或委托管理员账户。您可以通过登录到创建堆栈集的 AWS 管理员账户来管理堆栈集。</p>
            <p><em>目标账户</em> 是您用来创建、更新或删除堆栈集中的一个或多个堆栈的账户。先在管理员账户与目标账户之间设置信任关系，然后才能使用堆栈集在目标账户中创建堆栈。</p>

         
            <h2 id="stacksets-concepts-stackset">AWS CloudFormation 堆栈集</h2>

            <p>利用<em>堆栈集</em>，您可使用一个 CloudFormation 模板在 AWS 账户 中跨区域创建堆栈。堆栈集的 CloudFormation 模板定义每个堆栈中的所有资源。在创建堆栈集时，指定要使用的模板以及模板所需的任何参数和功能。</p>
            <p>在定义堆栈集后，您可以在指定的目标账户和 AWS 区域 中创建、更新或删除堆栈。创建、更新或删除堆栈时，您还可以指定操作首选项。例如，包括要执行操作的区域顺序、堆栈操作停止前的容错阈值以及并发执行堆栈操作的账户数。</p>
            <p>堆栈集是一种区域性资源。如果在一个 AWS 区域 中创建堆栈集，则只能在查看该区域时查看或更改它。</p>
         
            <h2 id="stacksets-concepts-stackset-permission-models">堆栈集的权限模型</h2>
            <p>您可以使用<em>自行管理</em> 权限或<em>服务托管</em> 权限创建堆栈集。</p>
            <p>使用<em>自行管理</em>权限时，您将创建 StackSets 需要的 IAM 角色来跨账户和区域进行部署。对于在您管理堆栈集所用的账户与您将堆栈部署到的账户之间建立信任关系，这些角色是必需的。使用此权限模型，StackSets 可以部署到您有权创建 IAM 角色的任何 AWS 账户中。</p>
            <p>使用<em>服务托管</em> 权限时，您可以将堆栈实例部署到 AWS Organizations 管理的账户。使用此权限模型，您不必创建必要的 IAM 角色；StackSets 会代表您创建 IAM 角色。使用此模型，您还可以为将来添加到组织的账户开启自动部署。</p>
            <p>AWS Organizations 与 CloudFormation 集成，可帮助您在扩展和增长 AWS 资源时集中管理和治理您的环境。</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>管理账户 - 您用于创建组织的账户。有关更多信息，请参阅 <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_getting-started_concepts.html#account">AWS Organizations 术语和概念</a>。</p>
                </li><li class="listitem">
                    <p>委托管理员 - 兼容的 AWS 服务可以将组织中的 AWS 成员账户注册为该服务中组织账户的管理员。有关更多信息，请参阅<a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_integrate_services_list.html">可与 AWS Organizations 一起使用的 AWS 服务</a>。</p>
                </li></ul></div>
            <p>有关创建和管理具有服务托管权限的堆栈集的更多信息，请参阅以下主题：</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./stacksets-orgs-activate-trusted-access.html">激活 AWS Organizations 的可信访问权限</a></p>
                </li><li class="listitem">
                    <p><a href="./stacksets-orgs-delegated-admin.html">注册委托管理员</a></p>
                </li><li class="listitem">
                    <p><a href="./stacksets-getting-started-create.html#stacksets-orgs-associate-stackset-with-org">创建具有服务托管权限的堆栈集</a></p>
                </li></ul></div>
         
            <h2 id="stacksets-concepts-stackinstances">堆栈实例</h2>

            <p><em>堆栈实例</em> 是对区域内的目标账户中的堆栈的引用。堆栈实例可在没有堆栈的情况下存在。例如，如果出于某个原因无法创建堆栈，则堆栈实例将显示堆栈创建失败的原因。一个堆栈实例仅与一个堆栈集关联。</p>
            <p>下图显示堆栈集、堆栈操作和堆栈之间的逻辑关系。当您更新堆栈集时，将在所有账户和区域中更新<em>所有</em> 关联的堆栈实例。</p>
            <div class="mediaobject">
                 
                    <img src="images/stack_sets_operations_stacks_sv.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                    一个堆栈集可用作跨多个账户和区域创建、更新或删除堆栈实例和堆栈的基础。&#xA;                " style="max-width:100%" />
                 
                 
            </div>
         
            <h2 id="stacksets-concepts-ops">堆栈集操作</h2>

            <p>您可以在堆栈集上执行以下操作。</p>
            <div class="variablelist">
                 
                 
                 
                 
            <dl>
                    <dt><span class="term">创建堆栈集</span></dt>
                    <dd>
                        <p>创建新堆栈集包含指定要用于创建堆栈的 CloudFormation 模板、指定要在其中创建堆栈的目标账户以及标识要在其中将堆栈部署到您的目标账户的 AWS 区域。堆栈集可确保将具有相同设置的相同堆栈资源，一致地部署到所选区域内的所有指定目标账户。</p>
                    </dd>
                 
                    <dt><span class="term">更新堆栈集</span></dt>
                    <dd>
                        <p>在更新堆栈集时，将更改推送到堆栈集中的堆栈。您可以通过下列方法之一更新堆栈集。您的模板更新始终会影响所有堆栈；您不能选择更新堆栈集中某些堆栈的模板，但可以选择更新其他堆栈的模板。</p>
                        <div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>更改模板中的现有设置或添加新资源，例如，更新特定服务的参数设置或添加新的 Amazon EC2 实例。</p>
                            </li><li class="listitem">
                                <p>将该模板替换为其他模板。</p>
                            </li><li class="listitem">
                                <p>跨现有或其他区域在现有或其他目标账户中添加堆栈。</p>
                            </li></ul></div>
                    </dd>
                 
                    <dt><span class="term">删除堆栈</span></dt>
                    <dd>
                        <p>在删除堆栈时，您将从指定的区域的指定目标账户中，删除堆栈及其所有关联资源。您可以通过以下方法删除堆栈。</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>从某些目标账户中删除堆栈，同时使其他目标账户中的其他堆栈保持运行。</p>
                            </li><li class="listitem">
                                <p>从某些区域中删除堆栈，同时使其他区域中的堆栈保持运行。</p>
                            </li><li class="listitem">
                                <p>从堆栈集中删除堆栈，但保存它们，以便通过选择 <b>Retain Stacks</b> 选项来使其独立于堆栈集继续运行。然后，您可以管理 AWS CloudFormation 中堆栈集之外的保留堆栈。</p>
                            </li><li class="listitem">
                                <p>在准备删除您的整个堆栈集时删除堆栈集中的所有堆栈。</p>
                            </li></ul></div>
                    </dd>
                 
                    <dt><span class="term">删除堆栈集</span></dt>
                    <dd>
                        <p>您只能在您的堆栈集中没有堆栈实例时删除它。</p>
                    </dd>
                </dl></div>
         
            <h2 id="stackset-ops-options">堆栈集操作选项</h2>

            <p>此部分中描述的选项有助于控制时间和允许的失败次数，以便成功执行堆栈集操作并防止您丢失堆栈资源。</p>
            <div class="variablelist">
                 
                 
                 
                 
                 
            <dl>
                    <dt><span class="term">最大并发账户数</span></dt>
                    <dd>
                        <p>利用此设置（适用于创建、更新和删除工作流），您可以指定在其中一次执行一项操作的目标账户的最大数量或百分比。较小的数量或百分比意味着一次在较少的目标账户中执行一项操作。按照 <b>Deployment order</b>（部署顺序）框中指定的顺序一次在一个区域中执行操作。例如，如果您将堆栈部署到两个区域内的 10 个目标账户，将 <b>Maximum concurrent accounts</b>（最大并发账户数）设置为 <b>50</b> 和 <b>By percentage</b>（按百分比），则会在移到下一个区域并开始部署到前 5 个目标账户之前，将堆栈部署到第一个区域中的 5 个账户，然后部署到第一个区域内的另外 5 个账户。</p>
                        <p>当选择<b>按百分比</b>时，如果指定的百分比不表示您指定的账户的整数数量，则 CloudFormation 会向下舍入。例如，如果您将堆栈部署到 10 个目标账户，并将<b>最大并发账户数</b>设置为 <b>25</b> 和<b>按百分比</b>，则 CloudFormation 会从同时部署 2.5 个堆栈（这是不可能的）向下舍入到同时部署 2 个堆栈。</p>
                        <p>请注意，此设置可让您指定操作数的<em>最大值</em>。对于大型部署，在某些情况下，并行运行的实际账户的数量可能由于服务限制而减少。最大部署速度为每个堆栈集 100 个并发堆栈实例。</p>
                    </dd>
                 
                    <dt><span class="term">并发模式</span></dt>
                    <dd>
                        <p>此设置可在创建、更新和删除工作流时使用，让您能够选择并发级别在堆栈集操作期间的行为。有关更多信息，请参阅<a href="./concurrency-mode.html">并发模式参数</a>。</p>
                    </dd>
                 
                    <dt><span class="term">容错</span></dt>
                    <dd>
                        <p>利用此设置（适用于创建、更新和删除工作流时），您可以指定每个区域中可发生的堆栈操作失败的最大数量或百分比，一旦超出此值，CloudFormation 就会自动停止操作。较小的数量或百分比意味着在较少的堆栈上执行该操作，但您能够更快地开始对失败的操作进行故障排除。例如，如果您将在 3 个区域内的 10 个目标账户中更新 10 个堆栈，则将 <b>Failure tolerance (容错)</b> 设置为 <b>20</b> 和 <b>By percentage (按百分比)</b> 意味着一个区域中最多 2 个堆栈更新可以失败，此操作继续。如果同一区域中的第三个堆栈失败，则 CloudFormation 将停止此操作。如果堆栈在第一个区域中无法进行更新，则更新操作将在该区域中继续进行，然后移到下一个区域。如果两个堆栈无法在第二个区域中进行更新，则容错能力达到 20%；如果该区域中的第三个堆栈失败，则 CloudFormation 停止更新操作，并且不会转入后续区域。</p>
                        <p>当选择<b>按百分比</b>时，如果指定的百分比不表示每个区域内的堆栈的整数数量，则 CloudFormation 会向下舍入。例如，如果您将堆栈部署到 3 个区域中的 10 个目标账户，并且将<b>容错</b>设置为 <b>25</b> 和<b>按百分比</b>，则 CloudFormation 会从每个区域的 2.5 个堆栈的容错能力（这是不可能的）向下舍入到每个区域的 2 个堆栈的容错能力。</p>
                    </dd>
                 
                    <dt><span class="term">保留堆栈</span></dt>
                    <dd>
                        <p>利用此设置（适用于删除堆栈工作流），您可以使堆栈及其资源继续运行，甚至在从堆栈集中删除堆栈后也是如此。保留堆栈时，AWS CloudFormation 会将堆栈按原样保留在各自的账户和区域中。将取消堆栈与堆栈集的关联，但将保存堆栈及其资源。删除堆栈操作完成后，您可在创建堆栈的目标账户（而不是管理员账户）中管理 CloudFormation 中的保留堆栈。</p>
                    </dd>
                 
                    <dt><span class="term">区域并发</span></dt>
                    <dd>
                        <p>此设置可在创建、更新和删除工作流时使用，用于选择如何将 StackSets 部署到区域中。</p>
                        <p><em>顺序</em> - 只要区域的部署失败次数不超过指定的容错能力，就按照区域 <b>Deployment order</b>（部署顺序）框中指定的顺序，一次将 StackSets 操作部署到一个区域。顺序部署是默认选项。</p>
                        <p><em>并行</em> – 只要区域的部署失败次数不超过指定的容错值，就将 StackSets 操作同时部署到所有指定区域。</p>
                    </dd>


                </dl></div>
         
            <h2 id="stackset-concepts-tags">标签</h2>

            <p>您可以通过指定键/值对在堆栈集创建和更新操作期间添加标签。标签对于针对账单和成本分配来分类和筛选堆栈集资源非常有用。有关如何在 AWS 中使用标签的更多信息，请参阅《AWS Billing and Cost Management 用户指南》中的<a href="https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/cost-alloc-tags.html">使用成本分配标签</a>。在指定键值对后，选择 <b>+</b> 以保存标签。您可以通过选择标签右侧的红色 <b>X</b> 来删除不再使用的标签。</p>
            <p>您应用于堆栈集的标签将应用于所有堆栈以及由您的堆栈创建的资源。您还可以在 CloudFormation 中的仅堆栈级别添加标签；但这些标签可能不会显示在 StackSets 中。</p>
            <p>尽管 StackSets 目前未添加任何系统定义的标签，但您不应使用字符串 <code class="code">aws:</code> 作为任何标签的键名称的开头。</p>
         
            <h2 id="stackset-status-codes">StackSets 状态代码</h2>

            <p>AWS CloudFormation StackSets 为堆栈集操作生成状态代码。</p>
            <p>下表描述了堆栈集操作的状态代码。</p>
            <div class="table-container"><div class="table-contents"><table id="w1348aac21c15c23b7"><thead>
                        <tr>
                            <th>堆栈集操作状态</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">RUNNING</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>操作目前正在进行中。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">SUCCEEDED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>操作已完成，未超出操作的容错能力。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">FAILED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>无法完成操作的堆栈的数量超出了用户定义的容错能力。您为操作设置的容错能力值将在堆栈创建和更新操作期间应用于每个区域。如果区域内的失败堆栈数超出了容错能力，则该区域中的操作的状态将更改为 <code class="code">FAILED</code>。整个操作的状态也将设置为 <code class="code">FAILED</code>，并且 CloudFormation 会在任何剩余区域中取消该操作。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">QUEUED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>[<code class="code">Service-managed permissions</code>] 对于需要一系列操作的自动部署，操作将排队等待执行。例如：</p>
                                <div class="itemizedlist">
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p>将账户从一个组织部门 (OU) <code class="code">OU1</code> 移动到另一个组织部门 <code class="code">OU2</code> 会触发自动部署。StackSets 运行删除操作，从目标区域中的目标 <code class="code">OU1</code> 账户删除堆栈实例，并排队一个创建操作，用于将堆栈实例添加到目标区域中的目标 <code class="code">OU2</code> 账户。</p>
                                    </li><li class="listitem">
                                        <p>将账户 <code class="code">AccountA</code> 添加到 OU 会触发自动部署。StackSets 运行创建操作，将堆栈实例添加到目标区域中的 <code class="code">AccountA</code>。如果在此创建操作运行时，您将另一个账户 <code class="code">AccountB</code> 添加到 OU 中，StackSets 将排队第二个创建操作。第一个创建操作完成后，StackSets 运行第二个创建操作，将堆栈实例添加到目标区域中的 <code class="code">AccountB</code>。</p>
                                    </li></ul></div>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">STOPPING</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>根据用户请求，正在停止该操作。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">STOPPED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>根据用户请求，已停止该操作。</p>
                            </td>
                        </tr>
                    </table></div></div>
         
            <h2 id="stack-instance-status-codes">堆栈实例状态代码</h2>
            <p>AWS CloudFormation StackSets 为堆栈实例生成状态代码。</p>
            <p>下表描述了 StackSets 内堆栈实例的状态代码。</p>
            <div class="table-container"><div class="table-contents disable-scroll"><table id="w1348aac21c15c25b7"><thead>
                        <tr>
                            <th>堆栈实例状态</th>
                            <th>描述</th>
                        </tr>
                    </thead>

                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">CURRENT</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>堆栈与堆栈集保持最新。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">OUTDATED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>出于下列原因之一，堆栈未与堆栈集的最新状态保持一致。</p>
                                <div class="itemizedlist">
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p>关联堆栈上的 <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html">CreateStackSet</a></code> 或 <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html">UpdateStackSet</a></code> 操作失败。</p>
                                    </li><li class="listitem">
                                        <p>堆栈是失败的 <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html">CreateStackSet</a></code> 或 <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html">UpdateStackSet</a></code> 操作的一部分，或在创建或更新堆栈前已停止。</p>
                                    </li></ul></div>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">INOPERABLE</code></p>
                            </td>
                            <td tabindex="-1">
                                <p><code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DeleteStackInstances.html">DeleteStackInstances</a></code> 操作已失败，并且堆栈处于不稳定状态。将从进一步的 <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html">UpdateStackSet</a></code> 操作中排除处于此状态的堆栈。您可能需要执行 <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DeleteStackInstances.html">DeleteStackInstances</a></code> 操作，同时将 <code class="code">RetainStacks</code> 设置为 <code class="code">true</code>，以删除堆栈实例，然后手动删除堆栈。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">CANCELLED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定账户和区域中的操作已被取消。发生此情况可能是因为用户已停止堆栈集操作，或者因为已超出堆栈集操作的容差能力。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">FAILED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定账户和区域中的操作失败。如果堆栈集操作在一个区域内足够的账户中失败，则可能会超出整个堆栈集操作的故障容差。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">PENDING</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定账户和区域中的操作尚未开始。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">RUNNING</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定账户和区域中的操作当前正在进行中。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">SKIPPED_SUSPENDED_ACCOUNT</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定账户和区域中的操作已被跳过，因为操作时该账户已被暂停。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">SUCCEEDED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定账户和区域中的操作已成功完成。</p>
                            </td>
                        </tr>
                    </table></div></div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>Javascript 在您的浏览器中被禁用或不可用。</strong></p><p>要使用 Amazon Web Services 文档，必须启用 Javascript。请参阅浏览器的帮助页面以了解相关说明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文档惯例</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./what-is-cfnstacksets.html">使用 StackSets</div><div id="next" class="next-link" accesskey="n" href="./stacksets-prereqs.html">堆栈集操作的先决条件</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此页面对您有帮助吗？- 是</div><div class="content"><p>感谢您对我们工作的肯定！</p><p>如果不耽误您的时间，请告诉我们做得好的地方，让我们做得更好。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此页面对您有帮助吗？- 否</div><div class="content"><p>感谢您告诉我们本页内容还需要完善。很抱歉让您失望了。</p><p>如果不耽误您的时间，请告诉我们如何改进文档。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>