<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::OpsWorks::Layer - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-opsworks-layer" /><meta name="default_state" content="aws-resource-opsworks-layer" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" /><meta name="description" content="Use the AWS CloudFormation AWS::OpsWorks::Layer resource for OpsWorks." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_OpsWorks.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" hreflang="x-default" /><meta name="feedback-folder" content="cbef6abb-9e9c-41cf-8067-a8d8eac7d14f" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::OpsWorks::Layer" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::OpsWorks::Layer - AWS CloudFormation</title><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?feedback_destination_id=cbef6abb-9e9c-41cf-8067-a8d8eac7d14f&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS OpsWorks resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_OpsWorks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::OpsWorks::Layer",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_OpsWorks.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_OpsWorks.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-opsworks-layer-syntax">Syntax</a><a href="#aws-resource-opsworks-layer-properties">Properties</a><a href="#aws-resource-opsworks-layer-return-values">Return values</a><a href="#aws-resource-opsworks-layer--examples">Examples</a><a href="#aws-resource-opsworks-layer--seealso">See also</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-opsworks-layer">AWS::OpsWorks::Layer</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><h2 id="aws-resource-opsworks-layer-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-opsworks-layer-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::OpsWorks::Layer",
  "Properties" : <span>{</span>
      "<a href="#cfn-opsworks-layer-attributes">Attributes</a>" : <code class="replaceable"><span>{</span><code class="replaceable">Key</code>: <code class="replaceable">Value</code>, ...}</code>,
      "<a href="#cfn-opsworks-layer-autoassignelasticips">AutoAssignElasticIps</a>" : <code class="replaceable">Boolean</code>,
      "<a href="#cfn-opsworks-layer-autoassignpublicips">AutoAssignPublicIps</a>" : <code class="replaceable">Boolean</code>,
      "<a href="#cfn-opsworks-layer-custominstanceprofilearn">CustomInstanceProfileArn</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-opsworks-layer-customjson">CustomJson</a>" : <code class="replaceable">Json</code>,
      "<a href="#cfn-opsworks-layer-customrecipes">CustomRecipes</a>" : <code class="replaceable"><a href="./aws-properties-opsworks-layer-recipes.html">Recipes</a></code>,
      "<a href="#cfn-opsworks-layer-customsecuritygroupids">CustomSecurityGroupIds</a>" : <code class="replaceable">[ String, ... ]</code>,
      "<a href="#cfn-opsworks-layer-enableautohealing">EnableAutoHealing</a>" : <code class="replaceable">Boolean</code>,
      "<a href="#cfn-opsworks-layer-installupdatesonboot">InstallUpdatesOnBoot</a>" : <code class="replaceable">Boolean</code>,
      "<a href="#cfn-opsworks-layer-lifecycleeventconfiguration">LifecycleEventConfiguration</a>" : <code class="replaceable"><a href="./aws-properties-opsworks-layer-lifecycleeventconfiguration.html">LifecycleEventConfiguration</a></code>,
      "<a href="#cfn-opsworks-layer-loadbasedautoscaling">LoadBasedAutoScaling</a>" : <code class="replaceable"><a href="./aws-properties-opsworks-layer-loadbasedautoscaling.html">LoadBasedAutoScaling</a></code>,
      "<a href="#cfn-opsworks-layer-name">Name</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-opsworks-layer-packages">Packages</a>" : <code class="replaceable">[ String, ... ]</code>,
      "<a href="#cfn-opsworks-layer-shortname">Shortname</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-opsworks-layer-stackid">StackId</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-opsworks-layer-tags">Tags</a>" : <code class="replaceable">[ <a href="./aws-properties-opsworks-layer-tag.html">Tag</a>, ... ]</code>,
      "<a href="#cfn-opsworks-layer-type">Type</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-opsworks-layer-useebsoptimizedinstances">UseEbsOptimizedInstances</a>" : <code class="replaceable">Boolean</code>,
      "<a href="#cfn-opsworks-layer-volumeconfigurations">VolumeConfigurations</a>" : <code class="replaceable">[ <a href="./aws-properties-opsworks-layer-volumeconfiguration.html">VolumeConfiguration</a>, ... ]</code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-opsworks-layer-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::OpsWorks::Layer
Properties:
  <a href="#cfn-opsworks-layer-attributes">Attributes</a>: <code class="replaceable">
    <code class="replaceable">Key</code>: <code class="replaceable">Value</code></code>
  <a href="#cfn-opsworks-layer-autoassignelasticips">AutoAssignElasticIps</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-opsworks-layer-autoassignpublicips">AutoAssignPublicIps</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-opsworks-layer-custominstanceprofilearn">CustomInstanceProfileArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-opsworks-layer-customjson">CustomJson</a>: <code class="replaceable">
    Json</code>
  <a href="#cfn-opsworks-layer-customrecipes">CustomRecipes</a>: <code class="replaceable">
    <a href="./aws-properties-opsworks-layer-recipes.html">Recipes</a></code>
  <a href="#cfn-opsworks-layer-customsecuritygroupids">CustomSecurityGroupIds</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-opsworks-layer-enableautohealing">EnableAutoHealing</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-opsworks-layer-installupdatesonboot">InstallUpdatesOnBoot</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-opsworks-layer-lifecycleeventconfiguration">LifecycleEventConfiguration</a>: <code class="replaceable">
    <a href="./aws-properties-opsworks-layer-lifecycleeventconfiguration.html">LifecycleEventConfiguration</a></code>
  <a href="#cfn-opsworks-layer-loadbasedautoscaling">LoadBasedAutoScaling</a>: <code class="replaceable">
    <a href="./aws-properties-opsworks-layer-loadbasedautoscaling.html">LoadBasedAutoScaling</a></code>
  <a href="#cfn-opsworks-layer-name">Name</a>: <code class="replaceable">String</code>
  <a href="#cfn-opsworks-layer-packages">Packages</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-opsworks-layer-shortname">Shortname</a>: <code class="replaceable">String</code>
  <a href="#cfn-opsworks-layer-stackid">StackId</a>: <code class="replaceable">String</code>
  <a href="#cfn-opsworks-layer-tags">Tags</a>: <code class="replaceable">
    - <a href="./aws-properties-opsworks-layer-tag.html">Tag</a></code>
  <a href="#cfn-opsworks-layer-type">Type</a>: <code class="replaceable">String</code>
  <a href="#cfn-opsworks-layer-useebsoptimizedinstances">UseEbsOptimizedInstances</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-opsworks-layer-volumeconfigurations">VolumeConfigurations</a>: <code class="replaceable">
    - <a href="./aws-properties-opsworks-layer-volumeconfiguration.html">VolumeConfiguration</a></code>
</code></pre></div><h2 id="aws-resource-opsworks-layer-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-opsworks-layer-attributes"><span class="term"><code class="code">Attributes</code></span></dt><dd>
         <p>One or more user-defined key-value pairs to be added to the stack attributes.</p>
         <p>To create a cluster layer, set the <code class="code">EcsClusterArn</code> attribute to the cluster's ARN.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Object of String</p><p><em>Pattern</em>: <code class="code">[a-zA-Z0-9]+</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-autoassignelasticips"><span class="term"><code class="code">AutoAssignElasticIps</code></span></dt><dd>
         <p>Whether to automatically assign an <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html">Elastic IP
        address</a> to the layer's instances. For more information, see <a href="https://docs.aws.amazon.com/opsworks/latest/userguide/workinglayers-basics-edit.html">How to Edit
        a Layer</a>.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: Boolean</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-autoassignpublicips"><span class="term"><code class="code">AutoAssignPublicIps</code></span></dt><dd>
         <p>For stacks that are running in a VPC, whether to automatically assign a public IP address to
      the layer's instances. For more information, see <a href="https://docs.aws.amazon.com/opsworks/latest/userguide/workinglayers-basics-edit.html">How to Edit
        a Layer</a>.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: Boolean</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-custominstanceprofilearn"><span class="term"><code class="code">CustomInstanceProfileArn</code></span></dt><dd>
         <p>The ARN of an IAM profile to be used for the layer's EC2 instances. For more information
          about IAM ARNs, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/Using_Identifiers.html">Using Identifiers</a>.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-customjson"><span class="term"><code class="code">CustomJson</code></span></dt><dd>
         <p>A JSON-formatted string containing custom stack configuration and deployment attributes
     to be installed on the layer's instances. For more information, see
      <a href="https://docs.aws.amazon.com/opsworks/latest/userguide/workingcookbook-json-override.html">
          Using Custom JSON</a>. This feature is supported as of version 1.7.42 of the AWS CLI. 
    </p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Json</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-customrecipes"><span class="term"><code class="code">CustomRecipes</code></span></dt><dd>
         <p>A <code class="code">LayerCustomRecipes</code> object that specifies the layer custom recipes.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opsworks-layer-recipes.html">Recipes</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-customsecuritygroupids"><span class="term"><code class="code">CustomSecurityGroupIds</code></span></dt><dd>
         <p>An array containing the layer custom security group IDs.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-enableautohealing"><span class="term"><code class="code">EnableAutoHealing</code></span></dt><dd>
         <p>Whether to disable auto healing for the layer.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: Boolean</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-installupdatesonboot"><span class="term"><code class="code">InstallUpdatesOnBoot</code></span></dt><dd>
         <p>Whether to install operating system and package updates when the instance boots. The default
      value is <code class="code">true</code>. To control when updates are installed, set this value to
        <code class="code">false</code>. You must then update your instances manually by using
        CreateDeployment to run the <code class="code">update_dependencies</code> stack command or
      by manually running <code class="code">yum</code> (Amazon Linux) or <code class="code">apt-get</code> (Ubuntu) on the
      instances. </p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>To ensure that your
        instances have the latest security updates, we strongly recommend using the default value of <code class="code">true</code>.</p></div></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: Boolean</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-lifecycleeventconfiguration"><span class="term"><code class="code">LifecycleEventConfiguration</code></span></dt><dd>
         <p>A <code class="code">LifeCycleEventConfiguration</code> object that you can use to configure the Shutdown event to
      specify an execution timeout and enable or disable Elastic Load Balancer connection
      draining.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opsworks-layer-lifecycleeventconfiguration.html">LifecycleEventConfiguration</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-loadbasedautoscaling"><span class="term"><code class="code">LoadBasedAutoScaling</code></span></dt><dd>
      <p>The load-based scaling configuration for the AWS OpsWorks layer.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opsworks-layer-loadbasedautoscaling.html">LoadBasedAutoScaling</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-name"><span class="term"><code class="code">Name</code></span></dt><dd>
         <p>The layer name, which is used by the console. Layer names can be a maximum of 32 characters.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-packages"><span class="term"><code class="code">Packages</code></span></dt><dd>
         <p>An array of <code class="code">Package</code> objects that describes the layer packages.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-shortname"><span class="term"><code class="code">Shortname</code></span></dt><dd>
         <p>For custom layers only, use this parameter to specify the layer's short name, which is used internally by 
          AWS OpsWorks Stacks and by Chef recipes. The short name is also used as the name for the directory where your 
          app files are installed. It can have a maximum of 32 characters, which are limited to the alphanumeric 
          characters, '-', '_', and '.'.</p>
         <p>Built-in layer short names are defined by AWS OpsWorks Stacks. For more information, see the 
          <a href="https://docs.aws.amazon.com/opsworks/latest/userguide/layers.html">Layer Reference</a>.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-stackid"><span class="term"><code class="code">StackId</code></span></dt><dd>
         <p>The layer stack ID.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-opsworks-layer-tags"><span class="term"><code class="code">Tags</code></span></dt><dd>
      <p>Specifies one or more sets of tags (key–value pairs) to associate with this AWS OpsWorks layer. 
         Use tags to manage your resources.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-opsworks-layer-tag.html">Tag</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-type"><span class="term"><code class="code">Type</code></span></dt><dd>
         <p>The layer type. A stack cannot have more than one built-in layer of the same type. It can have any number of custom layers. 
          Built-in layers are not available in Chef 12 stacks.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">aws-flow-ruby | ecs-cluster | java-app | lb | web | php-app | rails-app | nodejs-app | memcached | db-master | monitoring-master | custom</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-opsworks-layer-useebsoptimizedinstances"><span class="term"><code class="code">UseEbsOptimizedInstances</code></span></dt><dd>
         <p>Whether to use Amazon EBS-optimized instances.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Boolean</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opsworks-layer-volumeconfigurations"><span class="term"><code class="code">VolumeConfigurations</code></span></dt><dd>
         <p>A <code class="code">VolumeConfigurations</code> object that describes the layer's Amazon EBS volumes.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-opsworks-layer-volumeconfiguration.html">VolumeConfiguration</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd></dl></div><h2 id="aws-resource-opsworks-layer-return-values">Return values</h2><h3 id="aws-resource-opsworks-layer-return-values-ref">Ref</h3><p>
         When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the resource name. For example:</p><p>
         <code class="code"><span>{</span> "Ref": "<em>myLayer</em>" }</code>
      </p><p>For the AWS OpsWorks layer <em>myLayer</em>, <code class="code">Ref</code> returns the AWS OpsWorks layer ID.</p><p>For more information about using the <code class="code">Ref</code> function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html"><code class="code">Ref</code></a>.</p><h3 id="aws-resource-opsworks-layer-return-values-fn--getatt">Fn::GetAtt</h3><h2 id="aws-resource-opsworks-layer--examples">Examples</h2><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-opsworks-layer--examples--OpsWorks_PHP_Layer">OpsWorks PHP Layer</a></li><li><a href="#aws-resource-opsworks-layer--examples--Load-based_Auto_Scaling_Layer">Load-based Auto Scaling Layer</a></li><li><a href="#aws-resource-opsworks-layer--examples--Specify_tags_for_layers_and_stacks">Specify tags for layers and stacks</a></li></ul></div><h3 id="aws-resource-opsworks-layer--examples--OpsWorks_PHP_Layer">OpsWorks PHP Layer</h3><p>The following snippet creates an AWS OpsWorks PHP layer that is associated with
               the <code class="code">myStack</code> AWS OpsWorks stack. The layer is dependent on the
               <code class="code">myApp</code> AWS OpsWorks application.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-opsworks-layer--examples--OpsWorks_PHP_Layer--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myLayer": <span>{</span>
  "Type": "AWS::OpsWorks::Layer",
  "DependsOn": "myApp",
  "Properties": <span>{</span>
    "StackId": <span>{</span>"Ref": "myStack"},
    "Type": "php-app",
    "Shortname" : "php-app",
    "EnableAutoHealing" : "true",
    "AutoAssignElasticIps" : "false",
    "AutoAssignPublicIps" : "true",
    "Name": "MyPHPApp"
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-opsworks-layer--examples--OpsWorks_PHP_Layer--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myLayer: 
  Type: "AWS::OpsWorks::Layer"
  DependsOn: "myApp"
  Properties: 
    StackId: 
      Ref: "myStack"
    Type: "php-app"
    Shortname: "php-app"
    EnableAutoHealing: "true"
    AutoAssignElasticIps: "false"
    AutoAssignPublicIps: "true"
    Name: "MyPHPApp"</code></pre></div><h3 id="aws-resource-opsworks-layer--examples--Load-based_Auto_Scaling_Layer">Load-based Auto Scaling Layer</h3><p>The following snippet creates a load-based automatic scaling AWS OpsWorks PHP
               layer that is associated with the <code class="code">myStack</code> AWS OpsWorks stack.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-opsworks-layer--examples--Load-based_Auto_Scaling_Layer--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myLayer": <span>{</span>
  "Type": "AWS::OpsWorks::Layer",
  "DependsOn": "myApp",
  "Properties": <span>{</span>
    "StackId": <span>{</span>"Ref": "myStack"},
    "Type": "php-app",
    "Shortname" : "php-app",
    "EnableAutoHealing" : "true",
    "AutoAssignElasticIps" : "false",
    "AutoAssignPublicIps" : "true",
    "Name": "MyPHPApp",
    "LoadBasedAutoScaling" : <span>{</span>
      "Enable" : "true",
      "UpScaling" : <span>{</span>
        "InstanceCount" : 1,
        "ThresholdsWaitTime" : 1,
        "IgnoreMetricsTime" : 1,
        "CpuThreshold" : 70.0,
        "MemoryThreshold" : 30.0,
        "LoadThreshold" : 0.7
      },
      "DownScaling" : <span>{</span>
        "InstanceCount" : 1,
        "ThresholdsWaitTime" : 1,
        "IgnoreMetricsTime" : 1,
        "CpuThreshold" : 30.0,
        "MemoryThreshold" : 70.0,
        "LoadThreshold" : 0.3
      }
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-opsworks-layer--examples--Load-based_Auto_Scaling_Layer--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myLayer: 
  Type: "AWS::OpsWorks::Layer"
  DependsOn: "myApp"
  Properties: 
    StackId: 
      Ref: "myStack"
    Type: "php-app"
    Shortname: "php-app"
    EnableAutoHealing: "true"
    AutoAssignElasticIps: "false"
    AutoAssignPublicIps: "true"
    Name: "MyPHPApp"
    LoadBasedAutoScaling: 
      Enable: "true"
      UpScaling: 
        InstanceCount: 1
        ThresholdsWaitTime: 1
        IgnoreMetricsTime: 1
        CpuThreshold: 70
        MemoryThreshold: 30
        LoadThreshold: 0.7
      DownScaling: 
        InstanceCount: 1
        ThresholdsWaitTime: 1
        IgnoreMetricsTime: 1
        CpuThreshold: 30
        MemoryThreshold: 70
        LoadThreshold: 0.3</code></pre></div><h3 id="aws-resource-opsworks-layer--examples--Specify_tags_for_layers_and_stacks">Specify tags for layers and stacks</h3><p>The following complete template example specifies tags for an AWS OpsWorks layer
               and stack that reference parameter values.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-opsworks-layer--examples--Specify_tags_for_layers_and_stacks--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "ServiceRole": <span>{</span>
            "Type": "AWS::IAM::Role",
            "Properties": <span>{</span>
                "AssumeRolePolicyDocument": <span>{</span>
                    "Statement": [
                        <span>{</span>
                            "Effect": "Allow",
                            "Principal": <span>{</span>
                                "Service": [
                                    <span>{</span>
                                        "Ref": "OpsServicePrincipal"
                                    }
                                ]
                            },
                            "Action": [
                                "sts:AssumeRole"
                            ]
                        }
                    ]
                },
                "Path": "/",
                "Policies": [
                    <span>{</span>
                        "PolicyName": "opsworks-service",
                        "PolicyDocument": <span>{</span>
                            "Statement": [
                                <span>{</span>
                                    "Effect": "Allow",
                                    "Action": [
                                        "ec2:*",
                                        "iam:PassRole",
                                        "cloudwatch:GetMetricStatistics",
                                        "elasticloadbalancing:*"
                                    ],
                                    "Resource": "*"
                                }
                            ]
                        }
                    }
                ]
            }
        },
        "OpsWorksEC2Role": <span>{</span>
            "Type": "AWS::IAM::Role",
            "Properties": <span>{</span>
                "AssumeRolePolicyDocument": <span>{</span>
                    "Statement": [
                        <span>{</span>
                            "Effect": "Allow",
                            "Principal": <span>{</span>
                                "Service": [
                                    <span>{</span>
                                        "Ref": "Ec2ServicePrincipal"
                                    }
                                ]
                            },
                            "Action": [
                                "sts:AssumeRole"
                            ]
                        }
                    ]
                },
                "Path": "/"
            }
        },
        "InstanceRole": <span>{</span>
            "Type": "AWS::IAM::InstanceProfile",
            "Properties": <span>{</span>
                "Path": "/",
                "Roles": [
                    <span>{</span>
                        "Ref": "OpsWorksEC2Role"
                    }
                ]
            }
        },
        "myStack": <span>{</span>
            "Type": "AWS::OpsWorks::Stack",
            "Properties": <span>{</span>
                "Name": "TestStack",
                "ServiceRoleArn": <span>{</span>
                    "Fn::GetAtt": [
                        "ServiceRole",
                        "Arn"
                    ]
                },
                "DefaultInstanceProfileArn": <span>{</span>
                    "Fn::GetAtt": [
                        "InstanceRole",
                        "Arn"
                    ]
                },
                "Tags": [
                    <span>{</span>
                        "Key": <span>{</span>
                            "Ref": "StackKey"
                        },
                        "Value": <span>{</span>
                            "Ref": "StackValue"
                        }
                    }
                ]
            }
        },
        "myLayer": <span>{</span>
            "Type": "AWS::OpsWorks::Layer",
            "Properties": <span>{</span>
                "EnableAutoHealing": "true",
                "AutoAssignElasticIps": "false",
                "AutoAssignPublicIps": "true",
                "StackId": <span>{</span>
                    "Ref": "myStack"
                },
                "Type": "custom",
                "Shortname": "shortname",
                "Name": "name",
                "Tags": [
                    <span>{</span>
                        "Key": <span>{</span>
                            "Ref": "LayerKey"
                        },
                        "Value": <span>{</span>
                            "Ref": "LayerValue"
                        }
                    }
                ]
            }
        }
    },
    "Parameters": <span>{</span>
        "StackKey": <span>{</span>
            "Type": "String"
        },
        "LayerKey": <span>{</span>
            "Type": "String"
        },
        "StackValue": <span>{</span>
            "Type": "String"
        },
        "LayerValue": <span>{</span>
            "Type": "String"
        },
        "OpsServicePrincipal": <span>{</span>
            "Type": "String"
        },
        "Ec2ServicePrincipal": <span>{</span>
            "Type": "String"
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-opsworks-layer--examples--Specify_tags_for_layers_and_stacks--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  ServiceRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - !Ref OpsServicePrincipal
            Action:
              - 'sts:AssumeRole'
      Path: /
      Policies:
        - PolicyName: opsworks-service
          PolicyDocument:
            Statement:
              - Effect: Allow
                Action:
                  - 'ec2:*'
                  - 'iam:PassRole'
                  - 'cloudwatch:GetMetricStatistics'
                  - 'elasticloadbalancing:*'
                Resource: '*'
  OpsWorksEC2Role:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - !Ref Ec2ServicePrincipal
            Action:
              - 'sts:AssumeRole'
      Path: /
  InstanceRole:
    Type: AWS::IAM::InstanceProfile
    Properties:
      Path: /
      Roles:
        - !Ref OpsWorksEC2Role
  myStack:
    Type: AWS::OpsWorks::Stack
    Properties:
      Name: TestStack
      ServiceRoleArn: !GetAtt 
        - ServiceRole
        - Arn
      DefaultInstanceProfileArn: !GetAtt 
        - InstanceRole
        - Arn
      Tags:
        - Key: !Ref StackKey
          Value: !Ref StackValue
  myLayer:
    Type: AWS::OpsWorks::Layer
    Properties:
      EnableAutoHealing: 'true'
      AutoAssignElasticIps: 'false'
      AutoAssignPublicIps: 'true'
      StackId: !Ref myStack
      Type: custom
      Shortname: shortname
      Name: name
      Tags:
        - Key: !Ref LayerKey
          Value: !Ref LayerValue
Parameters:
  StackKey:
    Type: String
  LayerKey:
    Type: String
  StackValue:
    Type: String
  LayerValue:
    Type: String
  OpsServicePrincipal:
    Type: String
  Ec2ServicePrincipal:
    Type: String</code></pre></div><h2 id="aws-resource-opsworks-layer--seealso">See also</h2><div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>
                  <a href="https://docs.aws.amazon.com/opsworks/latest/APIReference/API_CreateLayer.html">CreateLayer</a> in the <em>AWS OpsWorks API Reference</em>.</p>
            </li><li class="listitem">
               <p>
                  <a href="https://docs.aws.amazon.com/opsworks/latest/userguide/workinglayers-basics-create.html">Creating an AWS OpsWorks Layer</a> in the <em>AWS OpsWorks User Guide</em>.</p>
            </li></ul></div><p></p><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-properties-opsworks-instance-timebasedautoscaling.html">TimeBasedAutoScaling</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-opsworks-layer-autoscalingthresholds.html">AutoScalingThresholds</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?feedback_destination_id=cbef6abb-9e9c-41cf-8067-a8d8eac7d14f&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?feedback_destination_id=cbef6abb-9e9c-41cf-8067-a8d8eac7d14f&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-layer.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>