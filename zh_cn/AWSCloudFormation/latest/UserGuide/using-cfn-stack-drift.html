<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>检测堆栈和资源的非托管配置更改 - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-cfn-stack-drift" /><meta name="default_state" content="using-cfn-stack-drift" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" /><meta name="description" content="通过偏离检测，您可以检测堆栈的实际配置是否与其预期配置不同或已经偏离。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="用户指南" /><meta name="abstract" content="根据此用户指南，使用 AWS CloudFormation 以可预见方式反复创建和管理 AWS 基础设施部署。" /><meta name="guide-locale" content="zh_cn" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="用户指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="用户指南" /><meta id="panorama-serviceConsolePage" value="检测堆栈和资源的非托管配置更改" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>检测堆栈和资源的非托管配置更改 - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,资源预置,资源配置,基础设施管理,CloudFormer,CloudFormation 堆栈,CloudFormation 堆栈集,CloudFormation 模板,更改集" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "用户指南",
        "item" : "https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "使用 堆栈",
        "item" : "https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "检测堆栈和资源的非托管配置更改",
        "item" : "https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacks.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文档</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">用户指南</a></div><div id="page-toc-src"><a href="#what-is-drift">什么是偏差？</a><a href="#drift-status-codes">偏差检测状态代码</a><a href="#drift-considerations">检测偏差时的注意事项</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-cfn-stack-drift">检测堆栈和资源的非托管配置更改</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>即使您通过 CloudFormation 管理您的资源，用户也可以在 CloudFormation<em>之外</em>更改这些资源。用户可以使用创建资源的底层服务直接编辑资源。例如，您可以使用 Amazon EC2 控制台来更新作为 CloudFormation 堆栈的一部分创建的服务器实例。有些更改可能是偶然的，而有些更改可能会故意响应对时间敏感的操作事件。无论如何，在 CloudFormation 之外进行的更改会导致堆栈更新或删除操作变得复杂。您可以使用偏差检测来识别在 CloudFormation 管理之外进行配置更改的堆栈资源。然后，您可以采取纠正措施，使堆栈资源再次与其在堆栈模板中的定义同步，例如直接更新偏离的资源，以便它们与其模板定义一致。解决偏差有助于确保配置一致性和成功的堆栈操作。</p><div class="highlights"><h6>主题</h6><ul><li><a href="#what-is-drift">什么是偏差？</a></li><li><a href="#drift-status-codes">偏差检测状态代码</a></li><li><a href="#drift-considerations">检测偏差时的注意事项</a></li><li><a href="./detect-drift-stack.html">在整个 CloudFormation 堆栈上检测偏差</a></li><li><a href="./detect-drift-resource.html">在单个堆栈资源上检测偏差</a></li><li><a href="./resource-import-resolve-drift.html">通过导入操作消除偏差</a></li></ul></div>
        <h2 id="what-is-drift">什么是偏差？</h2>
        <p>通过偏离检测，您可以检测堆栈的实际配置是否与其预期配置不同或已经<em>偏离</em>。使用 CloudFormation 可在整个堆栈上或在堆栈内的单个资源上检测偏差。如果某个资源的任何实际属性值与预期的属性值不同，则认为该资源已偏离。这包括是否已删除属性或资源。如果堆栈的一个或多个资源已偏离，则认为堆栈已偏离。</p>
        <p>为了确定资源是否已偏离，CloudFormation 确定预期的资源属性值（如堆栈模板中所定义）以及任何指定为模板参数的值。然后 CloudFormation 将这些预期值与堆栈中当前存在的资源属性的实际值进行比较。如果资源的一个或多个属性已被删除或其值已更改，则认为该资源已偏离。</p>
        <p>CloudFormation 生成有关已偏离的堆栈中每个资源的详细信息。</p>
        <p>CloudFormation 在那些支持偏差检测的 AWS 资源上检测偏差。不支持偏差检测的资源会被分配 NOT_CHECKED 的偏差状态。有关支持偏差检测的 AWS 资源的列表，请参阅 <a href="./resource-import-supported-resources.html">资源类型支持</a>。</p>
        <p>此外，CloudFormation 还支持对<em>可预置</em>的私有资源类型（即其预置类型为 <code class="code">FULLY_MUTABLE</code> 或 <code class="code">IMMUTABLE</code>）进行偏差检测。要对私有资源类型的资源执行偏差检测，<em>您在账户中注册的</em>资源类型的默认版本必须可预置。有关资源预调配类型的更多信息，请参阅《AWS CloudFormation API 参考》中 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeType.html"><code class="code">DescribeType</code></a> 操作的 <code class="code">ProvisioningType</code> 参数和《AWS CLI 命令参考》中 <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/describe-type.html"><code class="code">DescribeType</code></a> 命令的参数。有关私有资源的更多信息，请参阅 <a href="./registry.html">使用 AWS CloudFormation 注册表</a>。</p>
        <p>您可以在具有以下状态的堆栈上执行偏差检测：<code class="code">CREATE_COMPLETE</code>、<code class="code">UPDATE_COMPLETE</code>、<code class="code">UPDATE_ROLLBACK_COMPLETE</code> 和 <code class="code">UPDATE_ROLLBACK_FAILED</code>。</p>
        <p>当在堆栈上检测偏差时，CloudFormation 不在任何属于该堆栈的嵌套堆栈上检测偏差。有关更多信息，请参阅<a href="./using-cfn-nested-stacks.html">使用嵌套堆栈</a>。相反，您可以直接在嵌套堆栈上启动偏差检测操作。</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>CloudFormation 仅通过堆栈模板或通过指定模板参数来确定显式设置的属性值的偏差。这不包括资源属性的默认值。要使 CloudFormation 跟踪资源属性以确定偏差，请显式设置属性值，即使您将其设置为默认值也是如此。</p></div></div>
     
        <h2 id="drift-status-codes">偏差检测状态代码</h2>
        <p>本节中的表描述了偏差检测使用的各种状态类型：</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>偏差检测操作状态</b>描述偏差操作的当前状态。</p>
            </li><li class="listitem">
                <p><b>偏差状态</b> </p>
                <p>对于<em>堆栈集</em>，它根据属于堆栈集的堆栈实例的偏差状态以描述堆栈集的总体偏差状态。</p>
                <p>对于<em>堆栈实例</em>，它根据堆栈实例的关联堆栈的偏差状态以描述堆栈实例的偏差状态。</p>
                <p>对于<em>堆栈</em>，它根据堆栈资源的偏差状态以描述堆栈的总体偏差状态。</p>
            </li><li class="listitem">
                <p><b>资源偏差状态</b>描述单个资源的偏差状态。</p>
            </li></ul></div>
        <p>下表列出了 CloudFormation 分配给堆栈偏差检测操作的状态代码。</p>
        <div class="table-container"><div class="table-contents"><table id="w1348aac19c21c11b9"><thead>
                    <tr>
                        <th>偏差检测操作状态</th>
                        <th>描述</th>
                    </tr>
                </thead>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">DETECTION_COMPLETE</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>已经对支持偏差检测的堆栈中的所有资源成功完成了堆栈偏差检测操作。</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">DETECTION_FAILED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>堆栈偏差检测操作对于堆栈中的至少一个资源失败。结果将可用于 CloudFormation 在其上成功完成偏差检测的资源。</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">DETECTION_IN_PROGRESS</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>堆栈偏差检测操作目前正在进行中。</p>
                        </td>
                    </tr>
                </table></div></div>
        <p>下表列出了 CloudFormation 分配给堆栈的偏差状态代码。</p>
        <div class="table-container"><div class="table-contents"><table id="w1348aac19c21c11c13"><thead>
                    <tr>
                        <th>偏差状态</th>
                        <th>描述</th>
                    </tr>
                </thead>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">DRIFTED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>对于堆栈：堆栈与其预期模板配置不同或<em>已偏离</em>。如果堆栈的一个或多个资源已偏离，则认为堆栈已偏离。</p>
                            <p>对于堆栈实例：如果与堆栈实例关联的堆栈已偏离，则认为该实例已偏离。</p>
                            <p>对于堆栈集：如果一个或多个堆栈实例已偏离，则认为堆栈集已偏离。</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">NOT_CHECKED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>CloudFormation 尚未检查堆栈、堆栈集或堆栈实例是否与其预期模板配置不同。</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">IN_SYNC</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>每个受支持资源的当前配置与其预期的模板配置相匹配。没有支持偏差检测的资源的堆栈、堆栈集或堆栈实例也具有 IN_SYNC 状态。</p>
                        </td>
                    </tr>
                </table></div></div>
        <p>下表列出了 CloudFormation 分配给堆栈资源的偏差代码。</p>
        <div class="table-container"><div class="table-contents"><table id="w1348aac19c21c11c17"><thead>
                    <tr>
                        <th>资源偏差状态</th>
                        <th>描述</th>
                    </tr>
                </thead>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">DELETED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>资源与预期的模板配置不同，因为资源已被删除。</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">MODIFIED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>资源与预期的模板配置不同。</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">NOT_CHECKED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>CloudFormation 没有检查资源是否与预期的模板配置不同。</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">IN_SYNC</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>资源的当前配置与其预期的模板配置相匹配。</p>
                        </td>
                    </tr>
                </table></div></div>
        <p>下表列出了 CloudFormation 分配给与预期模板配置不同的资源属性的差异类型状态代码。</p>
        <div class="table-container"><div class="table-contents"><table id="w1348aac19c21c11c21"><thead>
                    <tr>
                        <th>属性差异类型</th>
                        <th>描述</th>
                    </tr>
                </thead>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">ADD</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>已将值添加到数据类型为数组或列表的资源属性。</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">REMOVE</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>属性已从当前资源配置中删除。</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">NOT_EQUAL</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>当前属性值与堆栈模板中定义的预期值不同。</p>
                        </td>
                    </tr>
                </table></div></div>
     
        <h2 id="drift-considerations">检测偏差时的注意事项</h2>
        <p>为了在堆栈上成功执行偏差检测，用户必须具有以下权限：</p>
        <div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>支持在堆栈中包含的偏差检测的每个资源的读取权限。例如，如果堆栈包含 <code class="code">AWS::EC2::Instance</code> 资源，则您必须具有 <code class="code">ec2:DescribeInstances</code> 权限才能在堆栈上执行偏差检测。</p>
            </li><li class="listitem">
                <p><code class="code">cloudformation:DetectStackDrift</code></p>
            </li><li class="listitem">
                <p><code class="code">cloudformation:DetectStackResourceDrift</code></p>
            </li><li class="listitem">
                <p><code class="code">cloudformation:BatchDescribeTypeConfigurations</code></p>
            </li></ul></div>
        <p>有关在 CloudFormation 中设置权限的更多信息，请参阅 <a href="./using-iam-template.html">使用 AWS Identity and Access Management 控制访问权限</a>。</p>

        <p>在某些边缘情况下，CloudFormation 可能无法始终返回准确的偏差结果。您应该了解这些边缘情况，以便正确解释您的偏差检测结果。</p>
        <div class="itemizedlist">
             

             

             

             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>在某些情况下，属性数组中包含的对象将报告为偏差，而实际上它们是从负责该资源的底层服务提供给属性的默认值。</p>
            </li><li class="listitem">
                <p>某些资源与相关资源具有<em>附件关系</em>，使得资源可以实际附加或删除在相同或另一模板中定义的另一资源的属性值。例如，如果 <code class="code">AWS::EC2::SecurityGroupIngress</code> 和 <code class="code">AWS::EC2::SecurityGroupEgress</code> 资源也可用于连接和删除 <code class="code">AWS::EC2::SecurityGroup</code> 资源中的值。在这些情况下，CloudFormation 在执行偏差比较之前分析附件的堆栈模板。但是，CloudFormation 无法跨堆栈执行此分析，因此可能不会返回准确的偏差结果，其中附加的资源驻留在不同的堆栈中。</p>
                <p>支持偏差检测并允许或要求其他资源中的附件的资源包括：</p>
                <div class="table-container"><div class="table-contents"><table id="w1348aac19c21c13c11b3b5"><thead>
                            <tr>
                                <th>资源类型</th>
                                <th>附件资源类型</th>
                            </tr>
                        </thead>
                            <tr>
                                <td tabindex="-1">
         <p><code class="code">AWS::SNS::Topic</code></p>
        </td>
                                <td tabindex="-1">
         <p><code class="code">AWS::SNS::Subscription</code></p>
        </td>
                            </tr>
                            <tr>
                                <td tabindex="-1">
         <p><code class="code">AWS::IAM::User</code></p>
        </td>
                                <td tabindex="-1">
         <p><code class="code">AWS::IAM::UserToGroupAddition</code></p>
        </td>
                            </tr>
                            <tr>
                                <td tabindex="-1">
         <p><code class="code">AWS::IAM::Group</code></p>
         <p><code class="code">AWS::IAM::Role</code></p>
         <p><code class="code">AWS::IAM::User</code></p>
        </td>
                                <td tabindex="-1"><p><code class="code">AWS::IAM::Policy</code></p><p><code class="code">AWS::IAM::ManagedPolicy</code></p></td>
                            </tr>
                            <tr>
                                <td tabindex="-1">
         <p><code class="code">AWS::ElasticLoadBalancingV2::Listener</code></p>
        </td>
                                <td tabindex="-1">
         <p><code class="code">AWS::ElasticLoadBalancingV2::ListenerCertificate</code></p>
        </td>
                            </tr>
                            <tr>
                                <td tabindex="-1">
         <p><code class="code">AWS::EC2::SecurityGroup</code></p>
        </td>
                                <td tabindex="-1"><p><code class="code">AWS::EC2::SecurityGroupEgress</code></p><p><code class="code">AWS::EC2::SecurityGroupIngress</code></p></td>
                            </tr>
                        </table></div></div>
            </li><li class="listitem">
                <p>CloudFormation 不对任何资源的 <code class="code">KMSKeyId</code> 属性执行偏差检测。由于 AWS KMS 密钥可以由多个别名引用，因此 CloudFormation 无法保证此属性有一致准确的偏差结果。</p>
            </li><li class="listitem">
                <p>您可以在堆栈模板中指定某些资源属性，就其本质而言，CloudFormation 无法将其与生成的堆栈资源中的属性进行比较。因此，这些属性不能包括在偏差检测结果中。这些属性可分为两大类：</p>
                <div class="itemizedlist">
                     
                     
                     

                <ul class="itemizedlist"><li class="listitem">
                        <p>CloudFormation 无法在堆栈模板中映射回初始资源属性值的属性值。</p>
                        <p>例如，CloudFormation 无法将 Lambda 函数的源代码映射回 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html"><code class="code">AWS::Lambda::Function</code></a> 资源的 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-lambda-function-code.html"><code class="code">Code</code></a> 属性类型，因此 CloudFormation 无法将其包括在偏差检测结果中。</p>
                    </li><li class="listitem">
                        <p>负责资源的服务不返回的属性值。</p>
                        <p>某些属性值被有意设计成永远不会由资源所属的服务返回。这些属性值往往包含机密信息，例如密码或其他不应泄露的敏感数据。例如，IAM 服务永远不会返回 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user-loginprofile.html">IAM User LoginProfile</a> 属性类型的 <code class="code">Password</code> 属性值，因此 CloudFormation 不能将其包含在偏差检测结果中。</p>
                    </li><li class="listitem">
                        <p>数组中的对象实际上可能是服务默认值，而不是在手动添加的偏差。</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p>如果您遇到任何误报，请使用 CloudFormation 控制台中的反馈链接将您的评论发送给我们，或通过 <a href="https://forums.aws.amazon.com/" rel="noopener noreferrer" target="_blank"><span>AWS re:Post</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 与我们联系。</p>
            </li><li class="listitem">
                <p>某些属性可能有相等但不完全相同的输入值。为避免误报，应确保预期配置与实际配置相匹配。</p>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>例如，资源属性的预期配置可能为 1024MB，而同一资源属性的实际配置可能为 1GB。1024MB 和 1GB 相等但不完全相同。</p>
                        <p>当在此资源属性上运行偏差检测时，它将发出偏差结果信号。</p>
                        <p>为避免误报，请将资源属性的预期配置更改为 1024MB，然后运行偏差检测。</p>
                    </li></ul></div>

            </li></ul></div>




    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>Javascript 在您的浏览器中被禁用或不可用。</strong></p><p>要使用 Amazon Web Services 文档，必须启用 Javascript。请参阅浏览器的帮助页面以了解相关说明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文档惯例</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./using-cfn-updating-stacks-continueupdaterollback.html">继续回滚更新</div><div id="next" class="next-link" accesskey="n" href="./detect-drift-stack.html">在整个 CloudFormation 堆栈上检测偏差</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此页面对您有帮助吗？- 是</div><div class="content"><p>感谢您对我们工作的肯定！</p><p>如果不耽误您的时间，请告诉我们做得好的地方，让我们做得更好。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此页面对您有帮助吗？- 否</div><div class="content"><p>感谢您告诉我们本页内容还需要完善。很抱歉让您失望了。</p><p>如果不耽误您的时间，请告诉我们如何改进文档。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>