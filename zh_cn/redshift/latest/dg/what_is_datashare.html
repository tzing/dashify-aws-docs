<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>什么是数据共享？ - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="what_is_datashare" /><meta name="default_state" content="what_is_datashare" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/what_is_datashare.html" /><meta name="description" content="数据共享 是在 Amazon Redshift 中共享数据的单位。使用数据共享可在同一个 AWS 账户或不同 AWS 账户中共享数据。还可以在不同 Amazon Redshift 集群间共享数据，以进行读取。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="数据库开发人员指南" /><meta name="abstract" content="使用 Amazon Redshift – 一种完全托管的企业 PB 级数据仓库服务 – 创建和管理数据仓库。" /><meta name="guide-locale" content="zh_cn" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/what_is_datashare.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/what_is_datashare.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/what_is_datashare.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/what_is_datashare.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/what_is_datashare.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/what_is_datashare.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/what_is_datashare.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/what_is_datashare.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/what_is_datashare.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/what_is_datashare.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/what_is_datashare.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/what_is_datashare.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/what_is_datashare.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/what_is_datashare.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/what_is_datashare.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/what_is_datashare.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/what_is_datashare.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/what_is_datashare.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/what_is_datashare.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/what_is_datashare.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="数据库开发人员指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="数据库开发人员指南" /><meta id="panorama-serviceConsolePage" value="什么是数据共享？" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>什么是数据共享？ - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#what_is_datashare" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/what_is_datashare.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/what_is_datashare.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/what_is_datashare.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,集群,数据仓库,开发人员,示例数据,数据库,数据库开发人员,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "数据库开发人员指南",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "在 Amazon Redshift 中跨集群共享数据",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/datashare-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "什么是数据共享？",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/datashare-overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#what_is_datashare" target="_blank" rel="noopener noreferrer" title="打开 PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文档</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">数据库开发人员指南</a></div><div id="page-toc-src"><a href="#standard_datashare">标准数据共享</a><a href="#adx_datashare_overview">AWS Data Exchange 数据共享</a><a href="#lf_datashare_overview">AWS Lake Formation 托管式数据共享</a><a href="#datashare_producer_consumer">数据共享生产者和使用者</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="what_is_datashare">什么是数据共享？</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p><em>数据共享</em>是在 Amazon Redshift 中共享数据的单位。使用数据共享可在同一个 AWS 账户或不同 AWS 账户中共享数据。还可以在不同 Amazon Redshift 集群间共享数据，以进行读取。</p><p>每个数据共享都与 Amazon Redshift 集群上的特定数据库相关联。</p><p>生产者集群管理员可以创建数据共享并添加数据共享对象，以与其他集群共享数据（称为<em>出站</em>共享）。使用者集群管理员可以从其他集群接收数据共享，称为<em>入站</em>共享。有关生产者和使用者的详细信息，请参阅<a href="#datashare_producer_consumer">数据共享生产者和使用者</a>。</p><p>数据共享对象是来自集群上特定数据库的对象，生产者集群管理员可以将其添加到要与数据使用者共享的数据共享中。对于数据使用者来说，数据共享对象是只读的。数据共享对象的示例包括表、视图和用户定义的函数。您可以随时在创建数据共享或编辑数据共享时将数据共享对象添加到数据共享。</p><p>当调整集群大小或暂停生产者集群时，数据共享将继续工作。</p><p>数据共享有不同的类型。</p><div class="highlights" id="inline-topiclist"><h6>主题</h6><ul><li><a href="#standard_datashare">标准数据共享</a></li><li><a href="#adx_datashare_overview">AWS Data Exchange 数据共享</a></li><li><a href="#lf_datashare_overview">AWS Lake Formation 托管式数据共享</a></li><li><a href="#datashare_producer_consumer">数据共享生产者和使用者</a></li></ul></div>
            <h2 id="standard_datashare">标准数据共享</h2>
            <p>通过标准数据共享，您可以在预调配集群、无服务器工作组、可用区、AWS 账户和 AWS 区域之间共享数据。您可以在集群类型之间共享，也可以在预调配集群和 Amazon Redshift Serverless 之间共享。</p>
            <p>要共享数据，请注意以下预调配集群、无服务器命名空间和 AWS 账户标识符：</p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p>预调配集群命名空间是标识 Amazon Redshift 预调配集群的标识符。命名空间全局唯一标识符 (GUID) 会在创建预调配集群期间自动创建并附加到集群。命名空间 Amazon 资源名称 (ARN) 的格式为 arn:<span>{</span>partition}:redshift:<span>{</span>region}:<span>{</span>account-id}:namespace:<span>{</span>namespace-guid}。您可以在 Amazon Redshift 控制台的集群详细信息页面上查看预调配集群的命名空间。</p>
                  <p>在数据共享工作流中，命名空间 GUID 值和集群命名空间 ARN 用于与 AWS 账户中的集群共享数据。您还可以通过使用 <code class="code">current_namespace</code> 函数为当前集群查找命名空间。</p></li><li class="listitem"><p>无服务器命名空间 是标识 Amazon Redshift Serverless 的标识符。命名空间全局唯一标识符 (GUID) 会在创建 Amazon Redshift Serverless 期间自动创建并附加到实例。无服务器命名空间 ARN 的格式为 arn:<span>{</span>partition}:redshift-serverless:<span>{</span>region}:<span>{</span>account-id}:namespace/<span>{</span>namespace-guid}。</p></li><li class="listitem"><p>AWS 账户可以是数据共享的使用者，每一个都用 12 位数的 AWS 账户 ID 表示。</p></li></ul></div>
            <p>对于<em>标准数据共享</em>，请考虑以下事项：</p>
            <div class="itemizedlist">
                
                 
            <ul class="itemizedlist"><li class="listitem"><p>删除创建器集群时，Amazon Redshift 会删除由创建者集群创建的数据共享。备份和还原创建器集群时，创建的数据共享仍然保留在已恢复的集群上。但是，授予其他集群的数据共享权限在还原的集群上不再有效。将数据共享的使用权限重新授予所需的使用者集群。使用者集群上的使用者数据库指向拍摄快照所在的原始集群中的数据共享。要从还原的集群中查询共享数据，使用者集群管理员可创建一个不同的数据库。或者，管理员可以删除并重新创建现有的使用者数据库，以使用新还原的集群中的数据共享。</p></li><li class="listitem"><p>当从快照中删除并还原使用者集群时，以前共享到此集群的访问权限将不再有效且可见。如果还原的使用者集群上仍然需要访问数据共享，则创建者集群管理员必须再次授予已恢复的使用者集群使用数据共享的权限。使用者集群管理员必须删除从非活动数据共享创建的任何过时的使用者数据库。然后，在创建者重新授予权限后，管理员必须从数据共享中重新创建使用者数据库。由于恢复的集群上的集群命名空间 GUID 与原始集群不同，因此在从备份还原使用者或生产者集群时重新授予数据共享权限。</p></li></ul></div>
          
            <h2 id="adx_datashare_overview">AWS Data Exchange 数据共享</h2>
            <p>AWS Data Exchange 数据共享是通过 AWS Data Exchange 共享您的数据的授权单位。AWS 管理与 AWS Data Exchange 订阅以及 Amazon Redshift 数据共享使用情况相关的所有计费和付款。经批准的数据提供商可以添加 AWS Data Exchange 数据共享到 AWS Data Exchange 产品。当客户订阅带 AWS Data Exchange 数据共享的产品时，他们可以访问该产品中的数据共享。</p>
            
            <p><em>AWS Data Exchange for Amazon Redshift</em> 使您可以通过 AWS Data Exchange 轻松获得 Amazon Redshift 数据的访问许可。当客户订阅具备 AWS Data Exchange 数据共享的产品时，AWS Data Exchange 自动在该产品中包含的所有 AWS Data Exchange 数据共享中将该客户添加为数据使用者。自动生成发票，并通过 AWS Marketplace Entitlement Service 集中收取付款并自动支付。</p>
            <p>提供商可以在 Amazon Redshift 中以精细级别许可数据，例如架构、表、视图和用户定义的函数。您可以使用跨多个 AWS Data Exchange 产品的相同 AWS Data Exchange 数据共享。使用者可以使用添加到 AWS Data Exchange 数据共享的任何对象。创建者可以查看由 AWS Data Exchange 使用 Amazon Redshift API 操作、SQL 命令和 Amazon Redshift 控制台代表其管理的所有 AWS Data Exchange 数据共享。订阅产品 AWS Data Exchange 数据共享的客户对数据共享中的对象具有只读访问权限。</p>
            <p>想要使用第三方创建者数据的客户可以浏览 AWS Data Exchange 目录，以浏览和订阅 Amazon Redshift 中的数据集。在客户的 AWS Data Exchange 订阅处于活跃状态后，他们可以从集群中的数据共享创建数据库并在 Amazon Redshift 中查询数据。</p>
            
             
               <h3 id="adx-how-it-works">AWS Data Exchange 数据共享的工作原理</h3>
                
                  <h4 id="provider-how-it-works">以创建者管理员的身份管理 AWS Data Exchange 数据共享。</h4>
                  
                  <p> 如果您是数据创建者（也称为 AWS Data Exchange 上的提供商），您可以创建连接到 Amazon Redshift 数据库的 AWS Data Exchange 数据共享。要在 AWS Data Exchange 添加对产品的 AWS Data Exchange 数据共享，您必须是注册的 AWS Data Exchange 提供商。</p>
                  <p>有关如何开始使用 AWS Data Exchange 数据共享的更多信息，请参阅<a href="./adx-getting-started.html">在 AWS Data Exchange 上共享许可的 Amazon Redshift 数据</a>。</p>
                
               
                
                  <h4 id="subscriber-how-it-works">以活跃 AWS Data Exchange 订阅的使用者身份使用 AWS Data Exchange 数据共享。</h4>
                  
                  <p>如果您是活动 AWS Data Exchange 订阅的使用者（也称为 AWS Data Exchange 上的订阅者），您可以浏览 AWS Data Exchange 控制台上的 AWS Data Exchange 目录，以发现包含 AWS Data Exchange 数据共享的产品。</p>
                  <p>订阅包含 AWS Data Exchange 数据共享的产品后，从集群数据共享中创建数据库。然后，您可以直接在 Amazon Redshift 中查询数据，无需提取、转换和加载数据。</p>
                  <p>有关如何开始使用 AWS Data Exchange 数据共享的更多信息，请参阅<a href="./adx-getting-started.html">在 AWS Data Exchange 上共享许可的 Amazon Redshift 数据</a>。</p>
                
             
            <p>对于 <em>AWS Data Exchange 数据共享</em>，请考虑以下事项：</p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p>删除生产者集群时，Amazon Redshift 会删除由生产者集群创建的数据共享。备份和还原创建器集群时，创建的数据共享仍然保留在已恢复的集群上。为了使数据订阅者能够继续访问数据，请再次创建 AWS Data Exchange 数据共享并将其发布到产品的数据集中。使用者集群上的使用者数据库指向拍摄快照所在的原始集群中的数据共享。要从还原的集群中查询共享数据，使用者集群管理员会创建一个不同的数据库，或删除并重新创建现有的使用者数据库，以使用新还原的集群中的 AWS Data Exchange 数据共享。</p></li><li class="listitem"><p>当从快照中删除并还原使用者集群时，以前共享到此集群的访问权限将不再有效且可见。使用者集群管理员必须删除从非活动数据共享创建的任何过时的使用者数据库，并在生产者重新授予权限后，从数据共享中重新创建使用者数据库。由于还原的集群上的集群命名空间 GUID 与原始集群不同，因此，在从备份还原生产者集群时重新授予数据共享权限。</p></li><li class="listitem"><p>如果您有任何 AWS Data Exchange 数据共享，我们建议您不要删除集群。执行这种类型的更改可能会违反 AWS Data Exchange 中的数据产品条款。</p></li></ul></div>
            
             
               <h3 id="adx-usage-notes">使用 Amazon Redshift AWS Data Exchange 时的注意事项</h3>
               <p>使用 Amazon Redshift AWS Data Exchange 时，请考虑以下事项：</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
                   
                   
                   
                   
                  
               <ul class="itemizedlist"><li class="listitem"><p>创建者和使用者都必须使用 RA3 实例类型才能使用 Amazon Redshift 数据共享。创建者必须将 RA3 实例类型与最新的 Amazon Redshift 集群版本一起使用。</p></li><li class="listitem"><p>必须对创建者和使用者集群进行加密。</p></li><li class="listitem"><p>您必须注册为 AWS Data Exchange 提供商才可在 AWS Data Exchange 上发布产品，包括包含 AWS Data Exchange 数据共享的产品。有关更多信息，请参阅<a href="https://docs.aws.amazon.com/data-exchange/latest/userguide/provider-getting-started.html">以提供商身份开始使用</a>。</p></li><li class="listitem"><p>您无需成为注册 AWS Data Exchange 提供商即可通过 AWS Data Exchange 查找、订阅和查询 Amazon Redshift 数据。</p></li><li class="listitem"><p>要控制对数据的访问，请创建可公开访问设置已开启的 AWS Data Exchange 数据共享。要更改 AWS Data Exchange 数据共享，以关闭可公开访问的设置，请将会话变量设置为允许 ALTER DATASHARE SET PUBLICACCESSIBLE FALSE。有关更多信息，请参阅<a href="./r_ALTER_DATASHARE.html#r_ALTER_DATASHARE_usage">ALTER DATASHARE 使用说明</a>。</p></li><li class="listitem"><p>创建者无法从 AWS Data Exchange 数据共享手动添加或删除使用者，因为对数据共享的访问是基于对包含 AWS Data Exchange 数据共享的 AWS Data Exchange 产品的活跃订阅。</p></li><li class="listitem"><p>创建者无法查看使用者运行的 SQL 查询。他们只能通过只有创建者才能访问的 Amazon Redshift 表查看元数据，例如查询数量或使用者查询的对象。有关更多信息，请参阅<a href="./auditing.html">监控和审计 Amazon Redshift 中的数据共享</a>。</p></li><li class="listitem"><p>我们建议您将数据共享设置为可公开访问。如果您不这样设置，在 AWS Data Exchange 上具备可公开访问的使用者集群的订阅者将无法使用您的数据共享。</p></li><li class="listitem"><p>我们建议您不要使用 DROP DATASHARE 语句删除共享给其它 AWS 账户 的 AWS Data Exchange 数据共享。如果您这样做，有权访问数据共享的 AWS 账户 将失去访问权限。此操作不可逆。执行这种类型的更改可能会违反 AWS Data Exchange 中的数据产品条款。如果您要删除 AWS Data Exchange 数据共享，请参阅<a href="./r_DROP_DATASHARE.html#r_DROP_DATASHARE_usage">DROP DATASHARE 使用说明</a>。</p></li><li class="listitem"><p>对于跨区域数据共享，您可以创建 AWS Data Exchange 数据共享，以共享许可数据。</p></li><li class="listitem"><p>当使用来自其他区域的数据时，使用者需要支付从生产者区域到使用者区域的跨区域数据传输费。</p></li></ul></div>    
             
          
            <h2 id="lf_datashare_overview">AWS Lake Formation 托管式数据共享</h2>
            
            
            <p> 使用 AWS Lake Formation，您可以集中定义和强制执行 Amazon Redshift 数据共享的数据库、表、列和行级访问权限，并限制用户对数据共享内对象的访问。通过 Lake Formation 共享数据，您可以在 Lake Formation 中定义权限，并将这些权限应用于任何数据共享及其对象。例如，如果您有一个包含员工信息的表，则可以使用 Lake Formation 的列级筛选条件，防止非人力资源部门的员工查看社会保险号等个人身份信息（PII）。有关数据筛选条件的更多信息，请参阅《AWS Lake Formation 开发人员指南》<em></em>中的 <a href="https://docs.aws.amazon.com/lake-formation/latest/dg/data-filtering.html">Lake Formation 中的数据筛选和单元格级安全性</a>。</p>
            <p>您还可以在 Lake Formation 中使用标签来配置 Lake Formation 上资源的权限。有关更多信息，请参阅 <a href="https://docs.aws.amazon.com/lake-formation/latest/dg/tag-based-access-control.html">Lake Formation 基于标签的访问控制</a>。</p>
            <p> Amazon Redshift 目前支持在同一账户内或不同账户间共享时通过 Lake Formation 共享数据。目前不支持跨区域共享。</p>
            <p>以下是有关如何使用 Lake Formation 控制数据共享权限的简要概述：</p>
            <div class="procedure"><ol><li><p>在 Amazon Redshift 中，创建者集群或工作组管理员在创建者集群或工作组上创建数据共享，并向 Lake Formation 账户授予使用权限。</p></li><li><p>创建者集群或工作组管理员授权 Lake Formation 账户访问数据共享。</p></li><li><p>Lake Formation 管理员发现并注册数据共享。他们还必须发现他们有权访问的 AWS Glue ARN，并将数据共享与 AWS Glue Data Catalog ARN 关联起来。如果您使用 AWS CLI，则可以通过 Redshift CLI 操作 <code class="code">describe-data-shares</code> 和 <code class="code">associate-data-share-consumer</code> 发现和接受数据共享。要注册数据共享，请使用 Lake Formation CLI 操作 <code class="code">register-resource</code>。</p></li><li><p>Lake Formation 管理员在 AWS Glue Data Catalog 中创建联合数据库，并配置 Lake Formation 权限以控制用户对数据共享中对象的访问。有关 AWS Glue 中的联合数据库的更多信息，请参阅<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/data-sharing-redshift.html">管理 Amazon Redshift 数据共享中数据的权限</a>。</p></li><li><p>Lake Formation 管理员发现他们有权访问的 AWS Glue 数据库，并将数据共享与 AWS Glue Data Catalog ARN 关联起来。</p></li><li><p>Redshift 管理员发现他们有权访问的 AWS Glue 数据库 ARN，使用 AWS Glue 数据库 ARN 在 Amazon Redshift 使用者集群中创建外部数据库，并将使用权限授予<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/options-for-providing-iam-credentials.html">使用 IAM 凭证进行身份验证的数据库用户</a>，以便开始查询 Amazon Redshift 数据库。</p></li><li><p>数据库用户可以使用视图 SVV_EXTERNAL_TABLES 和 SVV_EXTERNAL_COLUMNS 来查找 AWS Glue 数据库中他们有权访问的所有表或列，然后他们可以查询 AWS Glue 数据库的表。</p></li><li><p>当生产者集群或工作组管理员决定不再与使用者集群共享数据时，生产者集群管理员可以撤销使用权限、取消授权或者从 Redshift 中删除数据共享。系统不会自动删除 Lake Formation 中的关联权限和对象。</p></li></ol></div>
            
            <p>有关以生产者集群或工作组管理员身份与 AWS Lake Formation 共享数据共享的更多信息，请参阅<a href="./lake-formation-getting-started-producer.html">以创建者身份使用 Lake Formation 托管的数据共享</a>。要使用生产者集群或工作组中的共享数据，请参阅<a href="./lake-formation-getting-started-consumer.html">以使用者身份使用 Lake Formation 托管的数据共享</a>。</p>
            
             
               <h3 id="lake-formation-datashare-considerations">将 AWS Lake Formation 与 Amazon Redshift 一起使用时的注意事项和限制</h3>
               <p>以下是通过 Lake Formation 共享 Amazon Redshift 数据时的注意事项和限制。有关数据共享注意事项和限制的信息，请参阅<a href="https://docs.aws.amazon.com/redshift/latest/dg/considerations.html">在 Amazon Redshift 中使用数据共享时的注意事项</a>。有关 Lake Formation 限制的信息，请参阅<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/notes-rs-datashare.html">关于在 Lake Formation 中使用 Amazon Redshift 数据共享的说明</a>。</p>
               <div class="itemizedlist">
                   
                  
                   
                   
                   
                   
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>目前不支持跨区域与 Lake Formation 共享数据共享。</p>
                  </li><li class="listitem">
                     <p>如果为共享关系上的用户定义了列级别筛选条件，则执行 <code class="code">SELECT *</code> 操作将仅返回用户有权访问的列。</p>
                  </li><li class="listitem">
                     <p>不支持 Lake Formation 中单元级别的筛选条件。</p>
                  </li><li class="listitem">
                     <p>如果您创建了视图及其表并与 Lake Formation 共享，则可以配置筛选条件来管理表的访问权限，在使用者集群用户访问共享对象时，Amazon Redshift 会强制执行 Lake Formation 定义的策略。当用户访问与 Lake Formation 共享的视图时，Redshift 仅强制执行在视图上定义的 Lake Formation 策略，而不是视图中包含的表上定义的策略。但是，当用户直接访问表时，Redshift 会在表上强制执行已定义的 Lake Formation 策略。</p>
                  </li><li class="listitem">
                     <p>如果某个共享表配置了 Lake Formation 筛选条件，则无法基于该表对使用者创建实体化视图。</p>
                  </li><li class="listitem">
                     <p>Lake Formation 管理员必须具有<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/getting-started-setup.html#create-data-lake-admin">数据湖管理员</a>权限和<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/redshift-ds-prereqs.html">接受数据共享所需的权限</a>。</p>
                  </li><li class="listitem">
                     <p>生产者使用者集群必须为使用最新 Amazon Redshift 集群版本或无服务器工作组的 RA3 集群，才能通过 Lake Formation 共享数据共享。</p>
                  </li><li class="listitem">
                     <p>必须对创建者和使用者集群进行加密。</p>
                  </li><li class="listitem">
                     <p>将数据共享共享给 Lake Formation 时，忽略生产者集群或工作组中实现的 Redshift 行级和列级访问控制策略。Lake Formation 管理员必须在 Lake Formation 中配置这些策略。生产者集群或工作组管理员可以使用 <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_ALTER_TABLE.html">ALTER TABLE</a> 命令关闭表的 RLS。</p>
                  </li><li class="listitem">
                     <p>只有同时有权访问 Redshift 和 Lake Formation 的用户才能通过 Lake Formation 共享数据共享。</p>
                  </li></ul></div>
               
             
          
         <h2 id="datashare_producer_consumer">数据共享生产者和使用者</h2>
         <p><em>数据创建器</em>（也称为数据共享创建器或数据共享生成器）是您想要从中共享数据的集群。创建者集群管理员和数据库拥有者可以使用 CREATE DATASHARE 命令创建数据共享。您可以从该数据库中添加架构、表、视图和 SQL 用户定义的函数（UDF）等对象，而您希望创建者集群与使用者集群共享这些对象以进行读取。</p>
         <p>AWS Data Exchange 数据共享的数据提供商（也称为 AWS Data Exchange 上的提供商）可通过 AWS Data Exchange 许可数据。经批准的提供商可以将 AWS Data Exchange 数据共享添加到 AWS Data Exchange 产品。</p>
         <p>当客户订阅带 AWS Data Exchange 数据共享的产品时，AWS Data Exchange 自动将该客户添加为该产品包含的所有 AWS Data Exchange 数据共享上的数据使用者。当客户的订阅结束时，AWS Data Exchange 还将从 AWS Data Exchange 数据共享中删除所有客户。AWS Data Exchange 还自动管理使用 AWS Data Exchange 数据共享的付费产品的计费、发票、付款收集和付款分配事宜。有关更多信息，请参阅<a href="#adx_datashare_overview">AWS Data Exchange 数据共享</a>。如需注册为 AWS Data Exchange 数据提供商，请参阅<a href="https://docs.aws.amazon.com/data-exchange/latest/userguide/provider-getting-started.html">以提供商身份开始使用</a>。</p>
         
         <p><em>数据使用者</em>（也称为数据共享使用者或数据共享使用者）是从创建器集群接收数据共享的集群。</p>
         <p>共享数据的 Amazon Redshift 集群可以位于相同或不同的 AWS 账户或不同的 AWS 区域中，因此，您可以跨组织共享数据并与其他各方协作。使用者集群管理员将收到其被授权使用的数据共享，并查看每个数据共享的内容。要使用共享的数据，使用者集群管理员可从数据共享中创建 Amazon Redshift 数据库。然后，管理员将数据库的权限分配给使用者集群中的用户和角色。授予权限后，用户和角色可以将共享对象列为标准元数据查询的一部分，以及使用者集群上的本地数据。他们可以立即开始查询。</p>
         <p>如果您是<em>活动 AWS Data Exchange 订阅的使用者</em>（也称为 AWS Data Exchange 上的订阅者），您可以在 Amazon Redshift 中查找、订阅和查询最新的精细数据，无需提取、转换和加载数据。有关更多信息，请参阅<a href="#adx_datashare_overview">AWS Data Exchange 数据共享</a>。</p>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>Javascript 在您的浏览器中被禁用或不可用。</strong></p><p>要使用 Amazon Web Services 文档，必须启用 Javascript。请参阅浏览器的帮助页面以了解相关说明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文档惯例</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./data_sharing_regions.html">可进行数据共享的区域</div><div id="next" class="next-link" accesskey="n" href="./how_it_works.html">数据共享的工作原理</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此页面对您有帮助吗？- 是</div><div class="content"><p>感谢您对我们工作的肯定！</p><p>如果不耽误您的时间，请告诉我们做得好的地方，让我们做得更好。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/what_is_datashare.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此页面对您有帮助吗？- 否</div><div class="content"><p>感谢您告诉我们本页内容还需要完善。很抱歉让您失望了。</p><p>如果不耽误您的时间，请告诉我们如何改进文档。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/what_is_datashare.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>