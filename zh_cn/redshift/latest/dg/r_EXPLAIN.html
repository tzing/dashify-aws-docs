<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>EXPLAIN - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_EXPLAIN" /><meta name="default_state" content="r_EXPLAIN" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_EXPLAIN.html" /><meta name="description" content="显示查询语句的执行计划，而不运行查询。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="数据库开发人员指南" /><meta name="abstract" content="使用 Amazon Redshift – 一种完全托管的企业 PB 级数据仓库服务 – 创建和管理数据仓库。" /><meta name="guide-locale" content="zh_cn" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_EXPLAIN.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_EXPLAIN.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_EXPLAIN.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_EXPLAIN.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_EXPLAIN.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_EXPLAIN.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_EXPLAIN.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_EXPLAIN.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_EXPLAIN.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_EXPLAIN.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_EXPLAIN.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_EXPLAIN.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_EXPLAIN.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_EXPLAIN.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_EXPLAIN.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_EXPLAIN.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_EXPLAIN.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_EXPLAIN.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_EXPLAIN.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_EXPLAIN.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_EXPLAIN.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_EXPLAIN.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="数据库开发人员指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="数据库开发人员指南" /><meta id="panorama-serviceConsolePage" value="EXPLAIN" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>EXPLAIN - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_EXPLAIN" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_EXPLAIN.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_EXPLAIN.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_EXPLAIN.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,集群,数据仓库,开发人员,示例数据,数据库,数据库开发人员,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "数据库开发人员指南",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL 参考",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL 命令",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "EXPLAIN",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_EXPLAIN" target="_blank" rel="noopener noreferrer" title="打开 PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文档</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">数据库开发人员指南</a></div><div id="page-toc-src"><a href="#r_EXPLAIN-synopsis">语法</a><a href="#r_EXPLAIN-parameters">参数</a><a href="#r_EXPLAIN-usage-notes">使用说明</a><a href="#r_EXPLAIN-query-planning-and-execution-steps">查询计划和执行步骤</a><a href="#r_EXPLAIN-RLS">将 EXPLAIN 用于 RLS </a><a href="#r_EXPLAIN-examples">示例</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_EXPLAIN">EXPLAIN</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>显示查询语句的执行计划，而不运行查询。有关查询分析工作流程的信息，请参阅<a href="./c-query-analysis-process.html">查询分析工作流程</a>。</p>
         <h2 id="r_EXPLAIN-synopsis">语法</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">EXPLAIN [ VERBOSE ] <em>query</em>
                  </code></pre>
       
         <h2 id="r_EXPLAIN-parameters">参数</h2>
         <div class="variablelist">
             
             
         <dl>
               <dt><span class="term">VERBOSE </span></dt>
               <dd>
                  <p>显示完整的查询计划，而不只是摘要。</p>
               </dd>
             
               <dt><span class="term"> <em>query</em> </span></dt>
               <dd>
                  <p>要解释的查询语句。查询可以是 SELECT、INSERT、CREATE TABLE AS、UPDATE 或 DELETE 语句。</p>
               </dd>
            </dl></div>
       
         <h2 id="r_EXPLAIN-usage-notes">使用说明</h2>
         <p>在创建临时表时需要花费一定的时间，因此 EXPLAIN 性能有时会受到影响。例如，使用公共子表达式优化的查询需要创建和分析临时表，以返回 EXPLAIN 输出。查询计划依赖于临时表的 schema 和统计数据。因此，此类查询的 EXPLAIN 命令的运行时间可能会超过预期。</p>
         <p>您只能对以下命令使用 EXPLAIN：</p>
         <div class="itemizedlist">
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>SELECT</p>
            </li><li class="listitem">
               <p>SELECT INTO</p>
            </li><li class="listitem">
               <p>CREATE TABLE AS</p>
            </li><li class="listitem">
               <p>INSERT</p>
            </li><li class="listitem">
               <p>UPDATE</p>
            </li><li class="listitem">
               <p>DELETE</p>
            </li></ul></div>
         <p>如果您对其他 SQL 命令（例如数据定义语言 (DDL) 或数据库操作）使用 EXPLAIN 命令，则该命令将失败。</p>
         
         <p>Amazon Redshift 使用 EXPLAIN 输出相对单位成本来选择查询计划。Amazon Redshift 会比较各种资源估算值的大小来确定计划。</p>
       
         <h2 id="r_EXPLAIN-query-planning-and-execution-steps">查询计划和执行步骤</h2>
         <p>特定 Amazon Redshift 查询语句的执行计划会将查询的执行和计算细分为一系列单独的步骤和表操作，它们最后为该查询生成一个最终结果集。有关查询计划的信息，请参阅<a href="./c-query-processing.html">查询处理</a>。</p>
            <p>下表提供了步骤的汇总，Amazon Redshift 可以针对用户提交供执行的任何查询，使用这些步骤来制定执行计划。</p>
         <div class="table-container"><div class="table-contents"><table id="w319aac47b9d163c11b7"><thead>
                  <tr>
                     <th>EXPLAIN 运算符 </th>
                     <th>查询执行步骤 </th>
                     <th>描述 </th>
                  </tr>
               </thead>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>SCAN：</b></td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1"> 顺序扫描 </td>
                     <td style="vertical-align: top;" tabindex="-1">scan </td>
                     <td tabindex="-1">Amazon Redshift 关系扫描或表扫描运算符或步骤。从头开始按顺序扫描整个表直至结尾；另外，如果在 WHERE 子句中指定它，则还会评估每一行的查询约束（筛选条件）。它还用于运行 INSERT、UPDATE 和 DELETE 语句。</td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>JOINS：</b>Amazon Redshift 根据要联接的表的物理设计、联接所需的数据位置以及查询本身的特定属性，来使用不同的联接运算符。子查询扫描 – 使用子查询扫描和附加来运行 UNION 查询。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">嵌套循环 </td>
                     <td style="vertical-align: top;" tabindex="-1">nloop </td>
                     <td tabindex="-1">优化程度最差的联接；主要用于交叉联接（笛卡尔积；没有联接条件）和一些不等式联接。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">哈希联接 </td>
                     <td style="vertical-align: top;" tabindex="-1">hjoin </td>
                     <td tabindex="-1">还用于内部联接以及左和右外部联接，速度通常比嵌套循环联接要快。哈希联接读取外部表，对联接列进行哈希处理，然后在内部哈希表查找匹配项。步骤会溢到磁盘。（hjoin 的内部输入是可基于磁盘的哈希步骤。） </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">合并联接 </td>
                     <td style="vertical-align: top;" tabindex="-1">mjoin </td>
                     <td style="vertical-align: top;" tabindex="-1">还用于内部联接和外部联接（用于在联接列上进行分配和排序的联接表）。在不考虑其他成本的情况下，通常这是最快的 Amazon Redshift 联接算法。</td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>AGGREGATION：</b>用于涉及聚合函数以及 GROUP BY 操作的查询的运算符和步骤。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">聚合 </td>
                     <td style="vertical-align: top;" tabindex="-1">aggr </td>
                     <td tabindex="-1">标量聚合函数的运算符/步骤。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">HashAggregate </td>
                     <td style="vertical-align: top;" tabindex="-1">aggr </td>
                     <td tabindex="-1">分组聚合函数的运算符/步骤。可利用哈希表溢到磁盘的优势来从磁盘运行。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">GroupAggregate </td>
                     <td style="vertical-align: top;" tabindex="-1">aggr </td>
                     <td tabindex="-1">有时，force_hash_grouping 设置的 Amazon Redshift 配置设置为 off，此时为分组聚合查询选择该运算符。</td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>SORT：</b>在查询必须对结果集进行排序或合并时使用的运算符和步骤。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">排序 </td>
                     <td style="vertical-align: top;" tabindex="-1">sort </td>
                     <td tabindex="-1">排序操作执行 ORDER BY 子句指定的排序，此外还执行其他一些操作，例如 UNION 和联接。可从磁盘运行。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">合并 </td>
                     <td style="vertical-align: top;" tabindex="-1">merge </td>
                     <td tabindex="-1">根据从并行执行的操作得到的临时排序结果，来生成某个查询的最终排序结果。</td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>EXCEPT、INTERSECT 和 UNION 操作：</b></td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">SetOp Except [Distinct] </td>
                     <td style="vertical-align: top;" tabindex="-1">hjoin </td>
                     <td tabindex="-1">用于 EXCEPT 查询。可利用输入哈希可基于磁盘的优势来从磁盘运行。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Hash Intersect [Distinct] </td>
                     <td style="vertical-align: top;" tabindex="-1">hjoin </td>
                     <td tabindex="-1">用于 INTERSECT 查询。可利用输入哈希可基于磁盘的优势来从磁盘运行。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Append [All |Distinct] </td>
                     <td style="vertical-align: top;" tabindex="-1">save </td>
                     <td tabindex="-1">附加操作与子查询扫描结合使用，来实施 UNION 和 UNION ALL 查询。可利用“save”操作的优势来从磁盘运行。</td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>杂项/其他：</b></td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">哈希 </td>
                     <td style="vertical-align: top;" tabindex="-1">hash </td>
                     <td tabindex="-1">用于内部联接以及左和右外部联接（为哈希联接提供输入）。Hash 运算符为联接运算的内部表创建哈希表。（内部表是用来检查匹配项的表；在联接两个表时，通常是其中较小的那个表。） </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">限制 </td>
                     <td style="vertical-align: top;" tabindex="-1">limit </td>
                     <td tabindex="-1">评估 LIMIT 子句。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">具体化 </td>
                     <td style="vertical-align: top;" tabindex="-1">save </td>
                     <td tabindex="-1">具体化嵌套循环联接和某些合并联接的输入中的行。可从磁盘运行。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">-- </td>
                     <td style="vertical-align: top;" tabindex="-1">parse </td>
                     <td tabindex="-1">用于在加载期间解析文字输入数据。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">-- </td>
                     <td style="vertical-align: top;" tabindex="-1">project </td>
                     <td tabindex="-1">用于重新整理列和计算表达式，即项目数据。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">结果 </td>
                     <td style="vertical-align: top;" tabindex="-1">-- </td>
                     <td tabindex="-1">运行不涉及任何表访问的标量函数。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">-- </td>
                     <td style="vertical-align: top;" tabindex="-1">return </td>
                     <td tabindex="-1">将行返回到领导节点或客户端。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">子计划 </td>
                     <td style="vertical-align: top;" tabindex="-1">-- </td>
                     <td tabindex="-1">用于特定的子查询。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">唯一 </td>
                     <td style="vertical-align: top;" tabindex="-1">unique </td>
                     <td tabindex="-1">消除 SELECT DISTINCT 和 UNION 查询中的重复项。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">窗口 </td>
                     <td style="vertical-align: top;" tabindex="-1">window </td>
                     <td tabindex="-1">计算汇总并对窗口函数进行排名。可从磁盘运行。</td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>网络操作：</b></td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">网络（广播） </td>
                     <td style="vertical-align: top;" tabindex="-1">bcast </td>
                     <td tabindex="-1">广播也是 Join Explain 运算符和步骤的一个属性。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">网络（分布） </td>
                     <td style="vertical-align: top;" tabindex="-1">dist </td>
                     <td tabindex="-1">将行分布到计算节点，以便由数据仓库集群执行并行处理。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">网络（发送到领导节点） </td>
                     <td style="vertical-align: top;" tabindex="-1">return </td>
                     <td tabindex="-1">将结果发送回领导节点，以待进一步处理。</td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>DML 操作（用于修改数据的运算符）：</b></td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">插入（使用结果） </td>
                     <td style="vertical-align: top;" tabindex="-1">insert </td>
                     <td tabindex="-1">插入数据。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">删除（扫描 + 筛选） </td>
                     <td style="vertical-align: top;" tabindex="-1">delete </td>
                     <td tabindex="-1">删除数据。可从磁盘运行。</td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">更新（扫描 + 筛选） </td>
                     <td style="vertical-align: top;" tabindex="-1">delete、insert </td>
                     <td tabindex="-1">以删除和插入的方式实施。</td>
                  </tr>
               </table></div></div>
       
         <h2 id="r_EXPLAIN-RLS">将 EXPLAIN 用于 RLS </h2>
        
         <p>如果查询包含受行级别安全性 (RLS) 策略约束的表，则 EXPLAIN 将显示一个特殊的 RLS SecureScan 节点。Amazon Redshift 还会将相同的节点类型记录到 STL_EXPLAIN 系统表中。EXPLAIN 不会显示应用于 dim_tbl 的 RLS 谓词。RLS SecureScan 节点类型用作执行计划包含当前用户不可见的其他操作的指示器。</p>
         <p>以下示例说明了 RLS SecureScan 节点。</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">EXPLAIN
SELECT D.cint
FROM fact_tbl F INNER JOIN dim_tbl D ON F.k_dim = D.k
WHERE F.k_dim / 10 &gt; 0;
                               QUERY PLAN
------------------------------------------------------------------------
 XN Hash Join DS_DIST_ALL_NONE  (cost=0.08..0.25 rows=1 width=4)
   Hash Cond: ("outer".k_dim = "inner"."k")
   -&gt;  *XN* *RLS SecureScan f  (cost=0.00..0.14 rows=2 width=4)*
         Filter: ((k_dim / 10) &gt; 0)
   -&gt;  XN Hash  (cost=0.07..0.07 rows=2 width=8)
         -&gt;  XN Seq Scan on dim_tbl d  (cost=0.00..0.07 rows=2 width=8)
               Filter: (("k" / 10) &gt; 0)</code></pre>

         <p>为了能够对受 RLS 约束的查询计划进行全面调查，Amazon Redshift 提供了 EXPLAIN RLS 系统权限。被授予此权限的用户可以检查还包含 RLS 谓词的完整查询计划。</p>
         <p>以下示例说明了 RLS SecureScan 节点下方的额外顺序扫描，该顺序扫描还包括 RLS 策略谓词 (k_dim &gt; 1)。</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">EXPLAIN SELECT D.cint
FROM fact_tbl F INNER JOIN dim_tbl D ON F.k_dim = D.k
WHERE F.k_dim / 10 &gt; 0;
                                   QUERY PLAN
---------------------------------------------------------------------------------
 XN Hash Join DS_DIST_ALL_NONE  (cost=0.08..0.25 rows=1 width=4)
   Hash Cond: ("outer".k_dim = "inner"."k")
   *-&gt;  XN RLS SecureScan f  (cost=0.00..0.14 rows=2 width=4)
         Filter: ((k_dim / 10) &gt; 0)*
         -&gt;  *XN* *Seq Scan on fact_tbl rls_table  (cost=0.00..0.06 rows=5 width=8)
               Filter: (k_dim &gt; 1)*
   -&gt;  XN Hash  (cost=0.07..0.07 rows=2 width=8)
         -&gt;  XN Seq Scan on dim_tbl d  (cost=0.00..0.07 rows=2 width=8)
               Filter: (("k" / 10) &gt; 0)</code></pre>
         <p>在向用户授予 EXPLAIN RLS 权限的同时，Amazon Redshift 会在 STL_EXPLAIN 系统表中记录包括 RLS 谓词在内的完整查询计划。在未授予此权限时运行的查询将在没有 RLS 内部构件的情况下被记录。授予或删除 EXPLAIN RLS 权限不会改变 Amazon Redshift 为之前的查询记录到 STL_EXPLAIN 的内容。</p>

          
            <h3 id="r_EXPLAIN_RLS-LF">受 AWS Lake Formation-RLS 保护的 Redshift 关系</h3>
            <p>以下示例说明了 LF SecureScan 节点，您可以使用它来查看 Lake Formation-RLS 关系。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">EXPLAIN
SELECT *
FROM lf_db.public.t_share
WHERE a &gt; 1;
QUERY PLAN
---------------------------------------------------------------
XN LF SecureScan t_share  (cost=0.00..0.02 rows=2 width=11)
(2 rows)</code></pre>
          
       
         <h2 id="r_EXPLAIN-examples">示例</h2>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>对于这些示例，输出样本可能有所不同，具体取决于 Amazon Redshift 配置。</p></div></div>
         <p>以下示例为从 EVENT 和 VENUE 表中选择 EVENTID、EVENTNAME、VENUEID 和 VENUENAME 的查询返回查询计划：</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain
select eventid, eventname, event.venueid, venuename
from event, venue
where event.venueid = venue.venueid;</code></pre>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">                                QUERY PLAN
--------------------------------------------------------------------------
XN Hash Join DS_DIST_OUTER  (cost=2.52..58653620.93 rows=8712 width=43)
Hash Cond: ("outer".venueid = "inner".venueid)
-&gt;  XN Seq Scan on event  (cost=0.00..87.98 rows=8798 width=23)
-&gt;  XN Hash  (cost=2.02..2.02 rows=202 width=22)
-&gt;  XN Seq Scan on venue  (cost=0.00..2.02 rows=202 width=22)
(5 rows)</code></pre>
         <p>以下示例使用详细输出为同一查询返回查询计划：</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain verbose
select eventid, eventname, event.venueid, venuename
from event, venue
where event.venueid = venue.venueid;</code></pre>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">                                QUERY PLAN
--------------------------------------------------------------------------
<span>{</span>HASHJOIN
:startup_cost 2.52
:total_cost 58653620.93
:plan_rows 8712
:plan_width 43
:best_pathkeys &lt;&gt;
:dist_info DS_DIST_OUTER
:dist_info.dist_keys (
TARGETENTRY
<span>{</span>
VAR
:varno 2
:varattno 1
...

XN Hash Join DS_DIST_OUTER  (cost=2.52..58653620.93 rows=8712 width=43)
Hash Cond: ("outer".venueid = "inner".venueid)
-&gt;  XN Seq Scan on event  (cost=0.00..87.98 rows=8798 width=23)
-&gt;  XN Hash  (cost=2.02..2.02 rows=202 width=22)
-&gt;  XN Seq Scan on venue  (cost=0.00..2.02 rows=202 width=22)
(519 rows)</code></pre>
         <p>以下示例返回 CREATE TABLE AS (CTAS) 语句的查询计划：</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain create table venue_nonulls as
select * from venue
where venueseats is not null;

QUERY PLAN
-----------------------------------------------------------
XN Seq Scan on venue  (cost=0.00..2.02 rows=187 width=45)
Filter: (venueseats IS NOT NULL)
(2 rows)</code></pre>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>Javascript 在您的浏览器中被禁用或不可用。</strong></p><p>要使用 Amazon Web Services 文档，必须启用 Javascript。请参阅浏览器的帮助页面以了解相关说明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文档惯例</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_EXECUTE.html">EXECUTE</div><div id="next" class="next-link" accesskey="n" href="./fetch.html">FETCH</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此页面对您有帮助吗？- 是</div><div class="content"><p>感谢您对我们工作的肯定！</p><p>如果不耽误您的时间，请告诉我们做得好的地方，让我们做得更好。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_EXPLAIN.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此页面对您有帮助吗？- 否</div><div class="content"><p>感谢您告诉我们本页内容还需要完善。很抱歉让您失望了。</p><p>如果不耽误您的时间，请告诉我们如何改进文档。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_EXPLAIN.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>