<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>迁移到 SYS 监控视图 - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="sys_view_migration" /><meta name="default_state" content="sys_view_migration" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/sys_view_migration.html" /><meta name="description" content="SYS 视图整合并简化了多个非 SYS 系统视图的内容，可为您提供监控 Amazon Redshift 所需的信息。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="数据库开发人员指南" /><meta name="abstract" content="使用 Amazon Redshift – 一种完全托管的企业 PB 级数据仓库服务 – 创建和管理数据仓库。" /><meta name="guide-locale" content="zh_cn" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/sys_view_migration.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/sys_view_migration.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/sys_view_migration.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/sys_view_migration.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/sys_view_migration.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/sys_view_migration.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/sys_view_migration.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/sys_view_migration.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/sys_view_migration.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/sys_view_migration.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/sys_view_migration.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/sys_view_migration.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/sys_view_migration.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/sys_view_migration.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/sys_view_migration.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/sys_view_migration.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/sys_view_migration.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/sys_view_migration.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/sys_view_migration.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/sys_view_migration.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/sys_view_migration.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/sys_view_migration.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="数据库开发人员指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="数据库开发人员指南" /><meta id="panorama-serviceConsolePage" value="迁移到 SYS 监控视图" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>迁移到 SYS 监控视图 - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#sys_view_migration" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/sys_view_migration.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/sys_view_migration.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/sys_view_migration.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,集群,数据仓库,开发人员,示例数据,数据库,数据库开发人员,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "数据库开发人员指南",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "系统表和视图参考",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/cm_chap_system-tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "迁移到 SYS 监控视图",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/cm_chap_system-tables.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#sys_view_migration" target="_blank" rel="noopener noreferrer" title="打开 PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文档</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">数据库开发人员指南</a></div><div id="page-toc-src"><a href="#sys_view_migration-use_cases">迁移到 SYS 监控视图的用例</a><a href="#sys_view_migration-query-id">使用 SYS 监控视图改进查询标识符跟踪</a><a href="#sys_view_migration-SYS_QUERY_HISTORY">SYS_QUERY_HISTORY</a><a href="#sys_view_migration-SYS_QUERY_DETAIL">SYS_QUERY_DETAIL</a><a href="#sys_view_migration-SYS_TRANSACTION_HISTORY">SYS_TRANSACTION_HISTORY</a><a href="#sys_view_migration-SYS_QUERY_TEXT">SYS_QUERY_TEXT</a><a href="#sys_view_migration-SYS_CONNECTION_LOG">SYS_CONNECTION_LOG</a><a href="#sys_view_migration-SYS_SESSION_HISTORY">SYS_SESSION_HISTORY</a><a href="#sys_view_migration-SYS_LOAD_DETAIL">SYS_LOAD_DETAIL</a><a href="#sys_view_migration-SYS_LOAD_HISTORY">SYS_LOAD_HISTORY</a><a href="#sys_view_migration-SYS_LOAD_ERROR_DETAIL">SYS_LOAD_ERROR_DETAIL</a><a href="#sys_view_migration-SYS_UNLOAD_HISTORY">SYS_UNLOAD_HISTORY</a><a href="#sys_view_migration-SYS_UNLOAD_DETAIL">SYS_UNLOAD_DETAIL</a><a href="#sys_view_migration-SYS_COPY_REPLACEMENTS">SYS_COPY_REPLACEMENTS</a><a href="#sys_view_migration-SYS_DATASHARE_USAGE_CONSUMER">SYS_DATASHARE_USAGE_CONSUMER</a><a href="#sys_view_migration-SYS_DATASHARE_USAGE_PRODUCER">SYS_DATASHARE_USAGE_PRODUCER</a><a href="#sys_view_migration-SYS_DATASHARE_CROSS_REGION_USAGE">SYS_DATASHARE_CROSS_REGION_USAGE</a><a href="#sys_view_migration-SYS_DATASHARE_CHANGE_LOG">SYS_DATASHARE_CHANGE_LOG</a><a href="#sys_view_migration-SYS_EXTERNAL_QUERY_DETAIL">SYS_EXTERNAL_QUERY_DETAIL</a><a href="#sys_view_migration-SYS_EXTERNAL_QUERY_ERROR">SYS_EXTERNAL_QUERY_ERROR</a><a href="#sys_view_migration-SYS_VACUUM_HISTORY">SYS_VACUUM_HISTORY</a><a href="#sys_view_migration-SYS_ANALYZE_HISTORY">SYS_ANALYZE_HISTORY</a><a href="#sys_view_migration-SYS_ANALYZE_COMPRESSION_HISTORY">SYS_ANALYZE_COMPRESSION_HISTORY</a><a href="#sys_view_migration-SYS_MV_REFRESH_HISTORY">SYS_MV_REFRESH_HISTORY</a><a href="#sys_view_migration-SYS_MV_STATE">SYS_MV_STATE</a><a href="#sys_view_migration-SYS_PROCEDURE_CALL">SYS_PROCEDURE_CALL</a><a href="#sys_view_migration-SYS_PROCEDURE_MESSAGES">SYS_PROCEDURE_MESSAGES</a><a href="#sys_view_migration-SYS_UDF_LOG">SYS_UDF_LOG</a><a href="#sys_view_migration-SYS_USERLOG">SYS_USERLOG</a><a href="#sys_view_migration-SYS_SCHEMA_QUOTA_VIOLATIONS">SYS_SCHEMA_QUOTA_VIOLATIONS</a><a href="#sys_view_migration-SYS_SPATIAL_SIMPLIFY">SYS_SPATIAL_SIMPLIFY</a><a href="#sys_view_migration-examples">示例</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="sys_view_migration">迁移到 SYS 监控视图</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p> 当您将 Amazon Redshift 预调配集群迁移到 Amazon Redshift Serverless 时，您的监控或诊断查询可能会引用仅在预调配集群上可用的系统视图。您可以更新查询以使用 SYS 监控视图。本页提供了预调配到 SYS 视图的映射，供您在更新查询时参考。</p><div class="highlights" id="inline-topiclist"><h6>主题</h6><ul><li><a href="#sys_view_migration-use_cases">迁移到 SYS 监控视图的用例</a></li><li><a href="#sys_view_migration-query-id">使用 SYS 监控视图改进查询标识符跟踪</a></li><li><a href="#sys_view_migration-SYS_QUERY_HISTORY">SYS_QUERY_HISTORY</a></li><li><a href="#sys_view_migration-SYS_QUERY_DETAIL">SYS_QUERY_DETAIL</a></li><li><a href="#sys_view_migration-SYS_TRANSACTION_HISTORY">SYS_TRANSACTION_HISTORY</a></li><li><a href="#sys_view_migration-SYS_QUERY_TEXT">SYS_QUERY_TEXT</a></li><li><a href="#sys_view_migration-SYS_CONNECTION_LOG">SYS_CONNECTION_LOG</a></li><li><a href="#sys_view_migration-SYS_SESSION_HISTORY">SYS_SESSION_HISTORY</a></li><li><a href="#sys_view_migration-SYS_LOAD_DETAIL">SYS_LOAD_DETAIL</a></li><li><a href="#sys_view_migration-SYS_LOAD_HISTORY">SYS_LOAD_HISTORY</a></li><li><a href="#sys_view_migration-SYS_LOAD_ERROR_DETAIL">SYS_LOAD_ERROR_DETAIL</a></li><li><a href="#sys_view_migration-SYS_UNLOAD_HISTORY">SYS_UNLOAD_HISTORY</a></li><li><a href="#sys_view_migration-SYS_UNLOAD_DETAIL">SYS_UNLOAD_DETAIL</a></li><li><a href="#sys_view_migration-SYS_COPY_REPLACEMENTS">SYS_COPY_REPLACEMENTS</a></li><li><a href="#sys_view_migration-SYS_DATASHARE_USAGE_CONSUMER">SYS_DATASHARE_USAGE_CONSUMER</a></li><li><a href="#sys_view_migration-SYS_DATASHARE_USAGE_PRODUCER">SYS_DATASHARE_USAGE_PRODUCER</a></li><li><a href="#sys_view_migration-SYS_DATASHARE_CROSS_REGION_USAGE">SYS_DATASHARE_CROSS_REGION_USAGE</a></li><li><a href="#sys_view_migration-SYS_DATASHARE_CHANGE_LOG">SYS_DATASHARE_CHANGE_LOG</a></li><li><a href="#sys_view_migration-SYS_EXTERNAL_QUERY_DETAIL">SYS_EXTERNAL_QUERY_DETAIL</a></li><li><a href="#sys_view_migration-SYS_EXTERNAL_QUERY_ERROR">SYS_EXTERNAL_QUERY_ERROR</a></li><li><a href="#sys_view_migration-SYS_VACUUM_HISTORY">SYS_VACUUM_HISTORY</a></li><li><a href="#sys_view_migration-SYS_ANALYZE_HISTORY">SYS_ANALYZE_HISTORY</a></li><li><a href="#sys_view_migration-SYS_ANALYZE_COMPRESSION_HISTORY">SYS_ANALYZE_COMPRESSION_HISTORY</a></li><li><a href="#sys_view_migration-SYS_MV_REFRESH_HISTORY">SYS_MV_REFRESH_HISTORY</a></li><li><a href="#sys_view_migration-SYS_MV_STATE">SYS_MV_STATE</a></li><li><a href="#sys_view_migration-SYS_PROCEDURE_CALL">SYS_PROCEDURE_CALL</a></li><li><a href="#sys_view_migration-SYS_PROCEDURE_MESSAGES">SYS_PROCEDURE_MESSAGES</a></li><li><a href="#sys_view_migration-SYS_UDF_LOG">SYS_UDF_LOG</a></li><li><a href="#sys_view_migration-SYS_USERLOG">SYS_USERLOG</a></li><li><a href="#sys_view_migration-SYS_SCHEMA_QUOTA_VIOLATIONS">SYS_SCHEMA_QUOTA_VIOLATIONS</a></li><li><a href="#sys_view_migration-SYS_SPATIAL_SIMPLIFY">SYS_SPATIAL_SIMPLIFY</a></li><li><a href="#sys_view_migration-examples">示例</a></li></ul></div>        
        <h2 id="sys_view_migration-use_cases">迁移到 SYS 监控视图的用例</h2>
         
            <h3 id="w268aac69c15b7b3">从预调配集群迁移到 Amazon Redshift Serverless</h3>
            <p>如果您要将预调配集群迁移到 Amazon Redshift Serverless，则您可能具有使用以下系统视图的查询，而这些视图仅在预调配集群上可用。</p>
    <div class="itemizedlist">
         
         
         
         
         
    <ul class="itemizedlist"><li class="listitem"><p> 所有 STL 视图 </p></li><li class="listitem"><p> 所有 STV 视图 </p></li><li class="listitem"><p> 所有 SVCS 视图 </p></li><li class="listitem"><p> 所有 SVL 视图 </p></li><li class="listitem"><p> 部分 SVV 视图 </p><div class="itemizedlist">
             
        <ul class="itemizedlist"><li class="listitem"><p>有关 Amazon Redshift Serverless 中不支持的 SVV 视图的列表，请参阅《Amazon Redshift 管理指南》<em></em>中的<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-monitoring.html">使用 Amazon Redshift Serverless 监控查询和工作负载</a>底部的列表。</p></li></ul></div></li></ul></div>
    <p> 要继续使用查询，请将它们重新调整为使用在 SYS 监控视图中定义的列，这些列与仅预调配视图中的列相对应。</p>
         
                     
            <h3 id="w268aac69c15b7b5">停留在预调配集群上时更新查询</h3>
            <p>如果您不迁移到 Amazon Redshift Serverless，则可能仍需要更新现有查询。SYS 监控视图专为易于使用和降低复杂性而设计，并提供了一系列完整的指标来进行有效的监控和故障排除。使用 SYS 视图（如 <a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a> 和 <a href="./SYS_QUERY_DETAIL.html">SYS_QUERY_DETAIL</a>），其中整合了多个仅预调配视图的信息，可以简化查询。</p>
         
             
        <h2 id="sys_view_migration-query-id">使用 SYS 监控视图改进查询标识符跟踪</h2>
                <p> 诸如 <a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a> 和 <a href="./SYS_QUERY_DETAIL.html">SYS_QUERY_DETAIL</a> 之类的 SYS 监控视图包含 query_id 列，该列包含用户的查询标识符。同样，诸如 <a href="./r_STL_QUERY.html">STL_QUERY</a> 和 <a href="./r_SVL_QLOG.html">SVL_QLOG</a> 之类的仅预置视图包含查询列，该列还包含查询标识符。但是，SYS 系统视图中记录的查询标识符与仅预置视图中记录的查询标识符不同。</p>
        <p>SYS 视图的 query_id 列值与仅预置视图的查询列值之间的区别如下：</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem"><p> 在 SYS 视图中，query_id 列以原始形式记录用户提交的查询。为了提高性能，Amazon Redshift 优化器可能会将它们分解为子查询，但您运行的单个查询在 <a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a> 中仍然只有一行。如果您想查看各个子查询，可以在 <a href="./SYS_QUERY_DETAIL.html">SYS_QUERY_DETAIL</a> 中找到它们。</p></li><li class="listitem"><p> 在仅预置视图中，查询列记录子查询级别的查询。如果 Amazon Redshift 优化器将您的原始查询重写为多个子查询，则对于您运行的单个查询，<a href="./r_STL_QUERY.html">STL_QUERY</a> 中将有多行具有不同的查询标识符值。</p></li></ul></div>
        <p>将监控和诊断查询从仅预置视图迁移到 SYS 视图时，请考虑这种差异并相应地编辑查询。有关 Amazon Redshift 如何处理查询的更多信息，请参阅<a href="./c-query-planning.html">查询计划和执行工作流程</a>。</p>
        
           
            <h2 id="sys_view_migration-SYS_QUERY_HISTORY">SYS_QUERY_HISTORY</h2>
            <p>以下各表中的部分或全部列也在 <a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a> 中定义。</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_DDLTEXT.html">STL_DDLTEXT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_ERROR.html">STL_ERROR</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_QUERY.html">STL_QUERY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_UTILITYTEXT.html">STL_UTILITYTEXT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_WLM_QUERY.html">STL_WLM_QUERY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_INFLIGHT.html">STV_INFLIGHT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_RECENTS.html">STV_RECENTS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_WLM_QUERY_STATE.html">STV_WLM_QUERY_STATE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_COMPILE.html">SVL_COMPILE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_MULTI_STATEMENT_VIOLATIONS.html">SVL_MULTI_STATEMENT_VIOLATIONS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QLOG.html">SVL_QLOG</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QUERY_QUEUE_INFO.html">SVL_QUERY_QUEUE_INFO</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_STATEMENTTEXT.html">SVL_STATEMENTTEXT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_TERMINATE.html">SVL_TERMINATE</a></p>
                </li></ul></div>
               
        <h2 id="sys_view_migration-SYS_QUERY_DETAIL">SYS_QUERY_DETAIL</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_QUERY_DETAIL.html">SYS_QUERY_DETAIL</a> 中定义。</p>
        <div class="itemizedlist">
         
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_AGGR.html">STL_AGGR</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_ALERT_EVENT_LOG.html">STL_ALERT_EVENT_LOG</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_BCAST.html">STL_BCAST</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_DELETE.html">STL_DELETE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_DIST.html">STL_DIST</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_EXPLAIN.html">STL_EXPLAIN</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_HASH.html">STL_HASH</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_HASHJOIN.html">STL_HASHJOIN</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_INSERT.html">STL_INSERT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_LIMIT.html">STL_LIMIT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_MERGE.html">STL_MERGE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_MERGEJOIN.html">STL_MERGEJOIN</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_NESTLOOP.html">STL_NESTLOOP</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_PARSE.html">STL_PARSE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_PLAN_INFO.html">STL_PLAN_INFO</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_PROJECT.html">STL_PROJECT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_QUERY_METRICS.html">STL_QUERY_METRICS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_RETURN.html">STL_RETURN</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_SAVE.html">STL_SAVE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_SCAN.html">STL_SCAN</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_SORT.html">STL_SORT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_STREAM_SEGS.html">STL_STREAM_SEGS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_UNIQUE.html">STL_UNIQUE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_WINDOW.html">STL_WINDOW</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_EXEC_STATE.html">STV_EXEC_STATE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_QUERY_METRICS.html">STV_QUERY_METRICS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVCS_QUERY_SUMMARY.html">SVCS_QUERY_SUMMARY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QUERY_METRICS.html">SVL_QUERY_METRICS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QUERY_METRICS_SUMMARY.html">SVL_QUERY_METRICS_SUMMARY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QUERY_REPORT.html">SVL_QUERY_REPORT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QUERY_SUMMARY.html">SVL_QUERY_SUMMARY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVV_QUERY_STATE.html">SVV_QUERY_STATE</a></p>
                </li></ul></div>
               
            <h2 id="sys_view_migration-SYS_TRANSACTION_HISTORY">SYS_TRANSACTION_HISTORY</h2>
            <p>以下各表中的部分或全部列也在 <a href="./SYS_TRANSACTION_HISTORY.html">SYS_TRANSACTION_HISTORY</a> 中定义。</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_COMMIT_STATS.html">STL_COMMIT_STATS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_TR_CONFLICT.html">STL_TR_CONFLICT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_UNDONE.html">STL_UNDONE</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_QUERY_TEXT">SYS_QUERY_TEXT</h2>
        <p>下表中的部分或全部列也在 <a href="./SYS_QUERY_TEXT.html">SYS_QUERY_TEXT</a> 中定义。</p>
            
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_QUERYTEXT.html">STL_QUERYTEXT</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_CONNECTION_LOG">SYS_CONNECTION_LOG</h2>
        <p>下表中的部分或全部列也在 <a href="./SYS_CONNECTION_LOG.html">SYS_CONNECTION_LOG</a> 中定义。</p>
            
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_CONNECTION_LOG.html">STL_CONNECTION_LOG</a></p>
                </li></ul></div>
            
            <h2 id="sys_view_migration-SYS_SESSION_HISTORY">SYS_SESSION_HISTORY</h2>
            <p>以下各表中的部分或全部列也在 <a href="./SYS_SESSION_HISTORY.html">SYS_SESSION_HISTORY</a> 中定义。</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_SESSIONS.html">STL_SESSIONS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_RESTARTED_SESSIONS.html">STL_RESTARTED_SESSIONS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_SESSIONS.html">STV_SESSIONS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_LOAD_DETAIL">SYS_LOAD_DETAIL</h2>
        <p>下表中的部分或全部列也在 <a href="./SYS_LOAD_DETAIL.html">SYS_LOAD_DETAIL</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_LOAD_COMMITS.html">STL_LOAD_COMMITS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_LOAD_HISTORY">SYS_LOAD_HISTORY</h2>
        <p>下表中的部分或全部列也在 <a href="./SYS_LOAD_HISTORY.html">SYS_LOAD_HISTORY</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_LOAD_COMMITS.html">STL_LOAD_COMMITS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_LOAD_ERROR_DETAIL">SYS_LOAD_ERROR_DETAIL</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_LOAD_ERROR_DETAIL.html">SYS_LOAD_ERROR_DETAIL</a> 中定义。</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_LOADERROR_DETAIL.html">STL_LOADERROR_DETAIL</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_LOAD_ERRORS.html">STL_LOAD_ERRORS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_UNLOAD_HISTORY">SYS_UNLOAD_HISTORY</h2>
        <p>下表中的部分或全部列也在 <a href="./SYS_UNLOAD_HISTORY.html">SYS_UNLOAD_HISTORY</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_UNLOAD_LOG.html">STL_UNLOAD_LOG</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_UNLOAD_DETAIL">SYS_UNLOAD_DETAIL</h2>
        <p>下表中的部分或全部列也在 <a href="./SYS_UNLOAD_DETAIL.html">SYS_UNLOAD_DETAIL</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_UNLOAD_LOG.html">STL_UNLOAD_LOG</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_COPY_REPLACEMENTS">SYS_COPY_REPLACEMENTS</h2>
        <p>下表中的部分或全部列也在 <a href="./SYS_COPY_REPLACEMENTS.html">SYS_COPY_REPLACEMENTS</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_REPLACEMENTS.html">STL_REPLACEMENTS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_DATASHARE_USAGE_CONSUMER">SYS_DATASHARE_USAGE_CONSUMER</h2>
        <p>下表中的部分或全部列也在 <a href="./SYS_DATASHARE_USAGE_CONSUMER.html">SYS_DATASHARE_USAGE_CONSUMER</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_DATASHARE_USAGE_CONSUMER.html">SVL_DATASHARE_USAGE_CONSUMER</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_DATASHARE_USAGE_PRODUCER">SYS_DATASHARE_USAGE_PRODUCER</h2>
        <p>下表中的部分或全部列也在 <a href="./SYS_DATASHARE_USAGE_PRODUCER.html">SYS_DATASHARE_USAGE_PRODUCER</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_DATASHARE_USAGE_PRODUCER.html">SVL_DATASHARE_USAGE_PRODUCER</a></p>
                </li></ul></div>
            
            <h2 id="sys_view_migration-SYS_DATASHARE_CROSS_REGION_USAGE">SYS_DATASHARE_CROSS_REGION_USAGE</h2>
            <p>下表中的部分或全部列也在 <a href="./r_SYS_DATASHARE_CROSS_REGION_USAGE.html">SYS_DATASHARE_CROSS_REGION_USAGE</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_DATASHARE_CROSS_REGION_USAGE.html">SVL_DATASHARE_CROSS_REGION_USAGE</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_DATASHARE_CHANGE_LOG">SYS_DATASHARE_CHANGE_LOG</h2>
        <p>下表中的部分或全部列也在 <a href="./SYS_DATASHARE_CHANGE_LOG.html">SYS_DATASHARE_CHANGE_LOG</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_DATASHARE_CHANGE_LOG.html">SVL_DATASHARE_CHANGE_LOG</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_EXTERNAL_QUERY_DETAIL">SYS_EXTERNAL_QUERY_DETAIL</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_EXTERNAL_QUERY_DETAIL.html">SYS_EXTERNAL_QUERY_DETAIL</a> 中定义。</p>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_FEDERATED_QUERY.html">SVL_FEDERATED_QUERY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_S3LIST.html">SVL_S3LIST</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_S3QUERY.html">SVL_S3QUERY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_S3QUERY_SUMMARY.html">SVL_S3QUERY_SUMMARY</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_EXTERNAL_QUERY_ERROR">SYS_EXTERNAL_QUERY_ERROR</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_EXTERNAL_QUERY_ERROR.html">SYS_EXTERNAL_QUERY_ERROR</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_SPECTRUM_SCAN_ERROR.html">SVL_SPECTRUM_SCAN_ERROR</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_VACUUM_HISTORY">SYS_VACUUM_HISTORY</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_VACUUM_HISTORY.html">SYS_VACUUM_HISTORY</a> 中定义。</p>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_VACUUM.html">STL_VACUUM</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_VACUUM_PERCENTAGE.html">SVL_VACUUM_PERCENTAGE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVV_VACUUM_PROGRESS.html">SVV_VACUUM_PROGRESS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVV_VACUUM_SUMMARY.html">SVV_VACUUM_SUMMARY</a></p>
                </li></ul></div>
            
            <h2 id="sys_view_migration-SYS_ANALYZE_HISTORY">SYS_ANALYZE_HISTORY</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_ANALYZE_HISTORY.html">SYS_ANALYZE_HISTORY</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_ANALYZE.html">STL_ANALYZE</a></p>
                </li></ul></div>
            
            <h2 id="sys_view_migration-SYS_ANALYZE_COMPRESSION_HISTORY">SYS_ANALYZE_COMPRESSION_HISTORY</h2>
            <p>以下各表中的部分或全部列也在 <a href="./r_SYS_ANALYZE_COMPRESSION_HISTORY.html">SYS_ANALYZE_COMPRESSION_HISTORY</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_ANALYZE_COMPRESSION.html">STL_ANALYZE_COMPRESSION</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_MV_REFRESH_HISTORY">SYS_MV_REFRESH_HISTORY</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_MV_REFRESH_HISTORY.html">SYS_MV_REFRESH_HISTORY</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_MV_REFRESH_STATUS.html">SVL_MV_REFRESH_STATUS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_MV_STATE">SYS_MV_STATE</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_MV_STATE.html">SYS_MV_STATE</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_MV_STATE.html">STL_MV_STATE</a></p>
                </li></ul></div>
            
            <h2 id="sys_view_migration-SYS_PROCEDURE_CALL">SYS_PROCEDURE_CALL</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_PROCEDURE_CALL.html">SYS_PROCEDURE_CALL</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_STORED_PROC_CALL.html">SVL_STORED_PROC_CALL</a></p>
                </li></ul></div>
         
            <h2 id="sys_view_migration-SYS_PROCEDURE_MESSAGES">SYS_PROCEDURE_MESSAGES</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_PROCEDURE_MESSAGES.html">SYS_PROCEDURE_MESSAGES</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_STORED_PROC_MESSAGES.html">SVL_STORED_PROC_MESSAGES</a></p>
                </li></ul></div>
         
            <h2 id="sys_view_migration-SYS_UDF_LOG">SYS_UDF_LOG</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_UDF_LOG.html">SYS_UDF_LOG</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_UDF_LOG.html">SVL_UDF_LOG</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_USERLOG">SYS_USERLOG</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_USERLOG.html">SYS_USERLOG</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_USERLOG.html">STL_USERLOG</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_SCHEMA_QUOTA_VIOLATIONS">SYS_SCHEMA_QUOTA_VIOLATIONS</h2>
        <p>以下各表中的部分或全部列也在 <a href="./r_SYS_SCHEMA_QUOTA_VIOLATIONS.html">SYS_SCHEMA_QUOTA_VIOLATIONS</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_SCHEMA_QUOTA_VIOLATIONS.html">STL_SCHEMA_QUOTA_VIOLATIONS</a></p>
                </li></ul></div>
         
        <h2 id="sys_view_migration-SYS_SPATIAL_SIMPLIFY">SYS_SPATIAL_SIMPLIFY</h2>
        <p>以下各表中的部分或全部列也在 <a href="./SYS_SPATIAL_SIMPLIFY.html">SYS_SPATIAL_SIMPLIFY</a> 中定义。</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_SPATIAL_SIMPLIFY.html">SVL_SPATIAL_SIMPLIFY</a></p>
                </li></ul></div>
         
            <h2 id="sys_view_migration-examples">示例</h2>
            
             
                <h3 id="sys_view_migration-examples-query-id">显示 Amazon Redshift 在仅预置视图和 SYS 监控视图中如何以不同的方式记录查询</h3>
                <p>请参阅以下示例查询。这是按照在 Amazon Redshift 中运行的方式编写的查询。</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT  
  s_name
  , COUNT(*) AS numwait
FROM    
  supplier,
  lineitem l1,
  orders,
  nation
WHERE    s_suppkey = l1.l_suppkey
         AND o_orderkey = l1.l_orderkey
         AND o_orderstatus = 'F'
         AND l1.l_receiptdate &gt; l1.l_commitdate
         AND EXISTS (SELECT
                       *
                     FROM  
                       lineitem l2
                     WHERE  l2.l_orderkey = l1.l_orderkey
                            AND l2.l_suppkey &lt;&gt; l1.l_suppkey )
         AND NOT EXISTS (SELECT
                           *
                         FROM  
                           lineitem l3
                         WHERE  l3.l_orderkey = l1.l_orderkey
                                AND l3.l_suppkey &lt;&gt; l1.l_suppkey
                                AND l3.l_receiptdate &gt; l3.l_commitdate )
         AND s_nationkey = n_nationkey
         AND n_name = 'UNITED STATES'
GROUP BY
  s_name
ORDER BY
  numwait DESC
  , s_name LIMIT 100;</code></pre>
                <p>在后台，Amazon Redshift 查询优化器将上述用户提交的查询重写为 5 个子查询。</p>
                <p>第一个子查询创建一个临时表来实现一个子查询。</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE TEMP TABLE volt_tt_606590308b512(l_orderkey 
                                        , l_suppkey
                                        , s_name   ) AS SELECT
                                                         l1.l_orderkey
                                                         , l1.l_suppkey
                                                         , public.supplier.s_name
                                                       FROM  
                                                         public.lineitem AS l1,
                                                         public.nation,
                                                         public.orders,
                                                         public.supplier
                                                       WHERE  l1.l_commitdate &lt; l1.l_receiptdate
                                                              AND l1.l_orderkey = public.orders.o_orderkey
                                                              AND l1.l_suppkey = public.supplier.s_suppkey
                                                              AND public.nation.n_name = 'UNITED STATES'::CHAR(8)
                                                              AND public.nation.n_nationkey = public.supplier.s_nationkey
                                                              AND public.orders.o_orderstatus = 'F'::CHAR(1);</code></pre>
                <p>第二个子查询从临时表中收集统计数据。</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">padb_fetch_sample: select count(*) from volt_tt_606590308b512;</code></pre>
                <p>第三个子查询创建另一个临时表来实现另一个子查询，引用上面创建的临时表。</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE TEMP TABLE volt_tt_606590308c2ef(l_orderkey 
                                        , l_suppkey) AS (SELECT
                                                          volt_tt_606590308b512.l_orderkey
                                                          , volt_tt_606590308b512.l_suppkey
                                                        FROM  
                                                          public.lineitem AS l2,
                                                          volt_tt_606590308b512
                                                        WHERE  l2.l_suppkey &lt;&gt; volt_tt_606590308b512.l_suppkey
                                                               AND l2.l_orderkey = volt_tt_606590308b512.l_orderkey) 
                                                               EXCEPT distinct (SELECT volt_tt_606590308b512.l_orderkey, volt_tt_606590308b512.l_suppkey
                                                               FROM public.lineitem AS l3, volt_tt_606590308b512 
                                                               WHERE l3.l_commitdate &lt; l3.l_receiptdate 
                                                                 AND l3.l_suppkey &lt;&gt; volt_tt_606590308b512.l_suppkey 
                                                                 AND l3.l_orderkey = volt_tt_606590308b512.l_orderkey);</code></pre>
             
            <p>第四个子查询再次收集临时表的统计数据。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">padb_fetch_sample: select count(*) from volt_tt_606590308c2ef</code></pre>
            <p>最后一个子查询使用上面创建的临时表生成输出。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT  
  volt_tt_606590308b512.s_name AS s_name
  , COUNT(*) AS numwait
FROM    
  volt_tt_606590308b512,
  volt_tt_606590308c2ef
WHERE    volt_tt_606590308b512.l_orderkey = volt_tt_606590308c2ef.l_orderkey
         AND volt_tt_606590308b512.l_suppkey = volt_tt_606590308c2ef.l_suppkey
GROUP BY
  1
ORDER BY
  2 DESC
  , 1 ASC LIMIT 100;</code></pre>
            <p>在仅预置系统视图 STL_QUERY 中，Amazon Redshift 在子查询级别记录了五行，如下所示：</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT userid, xid, pid, query, querytxt::varchar(100); 
FROM stl_query 
WHERE xid = 48237350 
ORDER BY xid, starttime;

<code class="code" copy="false"> userid |   xid    |    pid     |  query   |                                               querytxt
--------+----------+------------+----------+------------------------------------------------------------------------------------------------------
    101 | 48237350 | 1073840810 | 12058151 | CREATE TEMP TABLE volt_tt_606590308b512(l_orderkey, l_suppkey, s_name) AS SELECT l1.l_orderkey, l1.l
    101 | 48237350 | 1073840810 | 12058152 | padb_fetch_sample: select count(*) from volt_tt_606590308b512
    101 | 48237350 | 1073840810 | 12058156 | CREATE TEMP TABLE volt_tt_606590308c2ef(l_orderkey, l_suppkey) AS (SELECT volt_tt_606590308b512.l_or
    101 | 48237350 | 1073840810 | 12058168 | padb_fetch_sample: select count(*) from volt_tt_606590308c2ef
    101 | 48237350 | 1073840810 | 12058170 | SELECT s_name , COUNT(*) AS numwait FROM supplier, lineitem l1, orders, nation WHERE s_suppkey = l1.
(5 rows)</code></code></pre>
            <p>在 SYS 监控视图 SYS_QUERY_HISTORY 中，Amazon Redshift 按如下方式记录查询：</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT user_id, transaction_id, session_id, query_id, query_text::varchar(100) 
FROM sys_query_history 
WHERE transaction_id = 48237350 
ORDER BY start_time;

<code class="code" copy="false"> user_id | transaction_id | session_id | query_id |                                              query_text
---------+----------------+------------+----------+------------------------------------------------------------------------------------------------------
     101 |       48237350 | 1073840810 | 12058149 | SELECT s_name , COUNT(*) AS numwait FROM supplier, lineitem l1, orders, nation WHERE s_suppkey = l1.</code></code></pre>
        <p>在 SYS_QUERY_DETAIL 中，可以使用来自 SYS_QUERY_HISTORY 的 query_id 值查找子查询级详细信息。child_query_sequence 列显示子查询的执行顺序。有关 SYS_QUERY_DETAIL 中各列的更多信息，请参阅 <a href="./SYS_QUERY_DETAIL.html">SYS_QUERY_DETAIL</a>。</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">select user_id,
       query_id,
       child_query_sequence,
       stream_id,
       segment_id,
       step_id,
       start_time,
       end_time,
       duration,
       blocks_read,
       blocks_write,
       local_read_io,
       remote_read_io,
       data_skewness,
       time_skewness,
       is_active,
       spilled_block_local_disk,
       spilled_block_remote_disk
from sys_query_detail
where query_id = 12058149
      and step_id = -1
order by query_id,
         child_query_sequence,
         stream_id,
         segment_id,
         step_id;

<code class="code" copy="false"> user_id | query_id | child_query_sequence | stream_id | segment_id | step_id |         start_time         |          end_time          | duration | blocks_read | blocks_write | local_read_io | remote_read_io | data_skewness | time_skewness | is_active | spilled_block_local_disk | spilled_block_remote_disk
---------+----------+----------------------+-----------+------------+---------+----------------------------+----------------------------+----------+-------------+--------------+---------------+----------------+---------------+---------------+-----------+--------------------------+---------------------------
     101 | 12058149 |                    1 |         0 |          0 |      -1 | 2023-09-27 15:40:38.512415 | 2023-09-27 15:40:38.533333 |    20918 |           0 |            0 |             0 |              0 |             0 |            44 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         1 |          1 |      -1 | 2023-09-27 15:40:39.931437 | 2023-09-27 15:40:39.972826 |    41389 |          12 |            0 |            12 |              0 |             0 |            77 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         2 |          2 |      -1 | 2023-09-27 15:40:40.584412 | 2023-09-27 15:40:40.613982 |    29570 |          32 |            0 |            32 |              0 |             0 |            25 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         2 |          3 |      -1 | 2023-09-27 15:40:40.582038 | 2023-09-27 15:40:40.615758 |    33720 |           0 |            0 |             0 |              0 |             0 |             1 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         3 |          4 |      -1 | 2023-09-27 15:40:46.668766 | 2023-09-27 15:40:46.705456 |    36690 |          24 |            0 |            15 |              0 |             0 |            17 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         4 |          5 |      -1 | 2023-09-27 15:40:46.707209 | 2023-09-27 15:40:46.709176 |     1967 |           0 |            0 |             0 |              0 |             0 |            18 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         4 |          6 |      -1 | 2023-09-27 15:40:46.70656  | 2023-09-27 15:40:46.71289  |     6330 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         5 |          7 |      -1 | 2023-09-27 15:40:46.71405  | 2023-09-27 15:40:46.714343 |      293 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    2 |         0 |          0 |      -1 | 2023-09-27 15:40:52.083907 | 2023-09-27 15:40:52.087854 |     3947 |           0 |            0 |             0 |              0 |             0 |            35 | f         |                        0 |                         0
     101 | 12058149 |                    2 |         1 |          1 |      -1 | 2023-09-27 15:40:52.089632 | 2023-09-27 15:40:52.091129 |     1497 |           0 |            0 |             0 |              0 |             0 |            11 | f         |                        0 |                         0
     101 | 12058149 |                    2 |         1 |          2 |      -1 | 2023-09-27 15:40:52.089008 | 2023-09-27 15:40:52.091306 |     2298 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         0 |          0 |      -1 | 2023-09-27 15:40:56.882013 | 2023-09-27 15:40:56.897282 |    15269 |           0 |            0 |             0 |              0 |             0 |            29 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         1 |          1 |      -1 | 2023-09-27 15:40:59.718554 | 2023-09-27 15:40:59.722789 |     4235 |           0 |            0 |             0 |              0 |             0 |            13 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         2 |          2 |      -1 | 2023-09-27 15:40:59.800382 | 2023-09-27 15:40:59.807388 |     7006 |           0 |            0 |             0 |              0 |             0 |            58 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         3 |          3 |      -1 | 2023-09-27 15:41:06.488685 | 2023-09-27 15:41:06.493825 |     5140 |           0 |            0 |             0 |              0 |             0 |            56 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         3 |          4 |      -1 | 2023-09-27 15:41:06.486206 | 2023-09-27 15:41:06.497756 |    11550 |           0 |            0 |             0 |              0 |             0 |             2 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         4 |          5 |      -1 | 2023-09-27 15:41:06.499201 | 2023-09-27 15:41:06.500851 |     1650 |           0 |            0 |             0 |              0 |             0 |            15 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         4 |          6 |      -1 | 2023-09-27 15:41:06.498609 | 2023-09-27 15:41:06.500949 |     2340 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         5 |          7 |      -1 | 2023-09-27 15:41:06.502945 | 2023-09-27 15:41:06.503282 |      337 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    4 |         0 |          0 |      -1 | 2023-09-27 15:41:06.62899  | 2023-09-27 15:41:06.631452 |     2462 |           0 |            0 |             0 |              0 |             0 |            22 | f         |                        0 |                         0
     101 | 12058149 |                    4 |         1 |          1 |      -1 | 2023-09-27 15:41:06.632313 | 2023-09-27 15:41:06.63391  |     1597 |           0 |            0 |             0 |              0 |             0 |            20 | f         |                        0 |                         0
     101 | 12058149 |                    4 |         1 |          2 |      -1 | 2023-09-27 15:41:06.631726 | 2023-09-27 15:41:06.633813 |     2087 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         0 |          0 |      -1 | 2023-09-27 15:41:12.571974 | 2023-09-27 15:41:12.584234 |    12260 |           0 |            0 |             0 |              0 |             0 |            39 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         0 |          1 |      -1 | 2023-09-27 15:41:12.569815 | 2023-09-27 15:41:12.585391 |    15576 |           0 |            0 |             0 |              0 |             0 |             4 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         1 |          2 |      -1 | 2023-09-27 15:41:13.758513 | 2023-09-27 15:41:13.76401  |     5497 |           0 |            0 |             0 |              0 |             0 |            39 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         1 |          3 |      -1 | 2023-09-27 15:41:13.749    | 2023-09-27 15:41:13.772987 |    23987 |           0 |            0 |             0 |              0 |             0 |            32 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         2 |          4 |      -1 | 2023-09-27 15:41:13.799526 | 2023-09-27 15:41:13.813506 |    13980 |           0 |            0 |             0 |              0 |             0 |            62 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         2 |          5 |      -1 | 2023-09-27 15:41:13.798823 | 2023-09-27 15:41:13.813651 |    14828 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
(28 rows)</code></code></pre><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>Javascript 在您的浏览器中被禁用或不可用。</strong></p><p>要使用 Amazon Web Services 文档，必须启用 Javascript。请参阅浏览器的帮助页面以了解相关说明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文档惯例</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./SYS_VACUUM_HISTORY.html">SYS_VACUUM_HISTORY</div><div id="next" class="next-link" accesskey="n" href="./c_intro_system_views.html">系统监控（仅已预置）</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此页面对您有帮助吗？- 是</div><div class="content"><p>感谢您对我们工作的肯定！</p><p>如果不耽误您的时间，请告诉我们做得好的地方，让我们做得更好。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/sys_view_migration.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此页面对您有帮助吗？- 否</div><div class="content"><p>感谢您告诉我们本页内容还需要完善。很抱歉让您失望了。</p><p>如果不耽误您的时间，请告诉我们如何改进文档。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/sys_view_migration.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>