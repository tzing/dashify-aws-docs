<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>为 Amazon Redshift Spectrum 创建外部 schema - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-spectrum-external-schemas" /><meta name="default_state" content="c-spectrum-external-schemas" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="description" content="所有外部表都必须在您使用 语句创建的外部 schema 中创建。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="数据库开发人员指南" /><meta name="abstract" content="使用 Amazon Redshift – 一种完全托管的企业 PB 级数据仓库服务 – 创建和管理数据仓库。" /><meta name="guide-locale" content="zh_cn" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-schemas.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="数据库开发人员指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="数据库开发人员指南" /><meta id="panorama-serviceConsolePage" value="为 Amazon Redshift Spectrum 创建外部 schema" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>为 Amazon Redshift Spectrum 创建外部 schema - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c-spectrum-external-schemas" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,集群,数据仓库,开发人员,示例数据,数据库,数据库开发人员,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "数据库开发人员指南",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "使用 Amazon Redshift Spectrum 查询外部数据",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "为 Amazon Redshift Spectrum 创建外部 schema",
        "item" : "https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c-spectrum-external-schemas" target="_blank" rel="noopener noreferrer" title="打开 PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文档</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">数据库开发人员指南</a></div><div id="page-toc-src"><a href="#c-spectrum-external-catalogs">使用外部目录</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c-spectrum-external-schemas">为 Amazon Redshift Spectrum 创建外部 schema</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>所有外部表都必须在您使用 <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a> 语句创建的外部 schema 中创建。</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>某些应用程序将术语<em>数据库</em> 和<em> schema </em> 互换使用。在 Amazon Redshift 中，我们使用术语 <em>schema</em>。</p></div></div><p>Amazon Redshift 外部 schema 引用了外部数据目录中的外部数据库。您可在 Amazon Redshift、<a href="https://docs.aws.amazon.com/athena/latest/ug/catalog.html">Amazon Athena</a>、<a href="https://docs.aws.amazon.com/glue/latest/dg/components-overview.html#data-catalog-intro">AWS Glue Data Catalog</a> 或在 Apache Hive 元存储（如 <a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-what-is-emr.html">Amazon EMR</a>）中创建外部数据库。如果您在 Amazon Redshift 中创建了外部数据库，该数据库将驻留在 Athena Data Catalog 中。要在 Hive 元存储中创建数据库，您需要在您的 Hive 应用程序中创建数据库。</p><p>Amazon Redshift 需要授权才能代表您访问 Athena 中的 Data Catalog 和 Amazon S3 中的数据文件。要提供授权，您首先应创建 AWS Identity and Access Management (IAM) 角色。然后，您应将该角色附加到您的集群并在 Amazon Redshift <code class="code">CREATE EXTERNAL SCHEMA</code> 语句中为该角色提供 Amazon 资源名称 (ARN)。有关  授权的更多信息，请参阅<a href="./c-spectrum-iam-policies.html">适用于 Amazon Redshift Spectrum 的 IAM 策略</a>。</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>如果您当前在 Athena Data Catalog 中有 Redshift Spectrum 外部表，则可以将您的 Athena Data Catalog 迁移到 AWS Glue Data Catalog。要将 AWS Glue 数据目录用于 Redshift Spectrum，您可能需要更改您的 IAM 策略。有关更多信息，请参阅《Amazon Athena 用户指南》<em></em>中的<a href="https://docs.aws.amazon.com/athena/latest/ug/glue-athena.html#glue-upgrade">升级到 AWS Glue Data Catalog</a>。</p></div></div><p>要在创建外部 schema 的同时创建外部数据库，请指定 <code class="code">FROM DATA CATALOG</code> 并在您的 <code class="code">CREATE EXTERNAL DATABASE</code> 语句中包含 <code class="code">CREATE EXTERNAL SCHEMA</code> 子句。</p><p>以下示例使用外部数据库 <code class="code">spectrum_schema</code> 创建名为 <code class="code">spectrum_db</code> 的外部 schema。</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema from data catalog 
database 'spectrum_db' 
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole'
create external database if not exists;</code></pre><p>如果您使用 Athena 管理您的数据目录，请指定 Athena 数据库名称和 Athena Data Catalog 所在的 AWS 区域。</p><p>以下示例使用 Athena Data Catalog 中的默认 <code class="code">sampledb</code> 数据库创建外部 schema。</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema athena_schema from data catalog 
database 'sampledb' 
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole' 
region 'us-east-2';</code></pre><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p><code class="code">region</code> 参数将引用 Athena Data Catalog 所在的 AWS 区域而不是数据文件在 Amazon S3 中的位置。</p></div></div><p>如果使用 Hive 元存储（例如 Amazon EMR）来管理数据目录，则必须将安全组配置为允许集群之间的流量。</p><p>在 CREATE EXTERNAL SCHEMA 语句中，指定 <code class="code">FROM HIVE METASTORE</code> 并包含元存储的 URI 和端口号。以下示例创建一个使用名为 <code class="code">hive_db</code> 的 Hive 元存储数据库的外部 schema。</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema hive_schema
from hive metastore
database 'hive_db'
uri '172.10.10.10' port 99
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole'</code></pre><p>要查看集群的外部 schema，请查询 PG_EXTERNAL_SCHEMA 目录表或 SVV_EXTERNAL_SCHEMAS 视图。下面的示例查询联接 PG_EXTERNAL_SCHEMA 和 PG_NAMESPACE 的 SVV_EXTERNAL_SCHEMAS。</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from svv_external_schemas</code></pre><p>有关完整的命令语法和示例，请参阅 <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a>。</p>
         <h2 id="c-spectrum-external-catalogs">在 Amazon Redshift Spectrum 中使用外部目录</h2>


         <p>Amazon Redshift Spectrum 外部数据库和外部表的元数据存储在外部数据目录中。预设情况下，Redshift Spectrum 元数据存储在 Athena Data Catalog 中。您可在 Athena 控制台中查看和管理 Redshift Spectrum 数据库和表。</p>
         <p>您还可使用 Hive 数据定义语言 (DDL) 通过 Athena 或 Hive 元存储（如 Amazon EMR）创建和管理外部数据库和外部表。</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>我们建议使用 Amazon Redshift 在 Redshift Spectrum 中创建和管理外部数据库和外部表。</p></div></div>
          
            <h3 id="c-spectrum-athena-external-catalogs">在 Athena 和 AWS Glue 中查看 Redshift Spectrum 数据库</h3>

            <p>您可以通过将 CREATE EXTERNAL DATABASE IF NOT EXISTS 子句作为 CREATE EXTERNAL SCHEMA 语句的一部分来创建外部数据库。在此情况下，外部数据库元数据将存储在您的数据目录中。您创建的由外部 schema 限定的外部表的元数据也存储在您的  Data Catalog 中。</p>
            
            <p>Athena 和 AWS Glue 将为每个受支持的 AWS 区域保留一个数据目录。要查看表元数据，请登录 Athena 或 AWS Glue 控制台。在 Athena 中，依次选择<b>数据源</b>和您的 AWS Glue，然后查看数据库的详细信息。在 AWS Glue 中，依次选择<b>数据库</b>和您的外部数据库，然后查看数据库的详细信息。</p>
               
            <p>如果您使用 Athena 创建和管理您的外部表，请使用 CREATE EXTERNAL SCHEMA 注册数据库。例如，以下命令将注册名为 <code class="code">sampledb</code> 的 Athena 数据库。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema athena_sample
from data catalog
database 'sampledb'
iam_role 'arn:aws:iam::123456789012:role/mySpectrumRole'
region 'us-east-1';</code></pre>
            <p>当您查询 SVV_EXTERNAL_TABLES 系统视图时，您将看到 Athena <code class="code">sampledb</code> 数据库中的表以及您在 Amazon Redshift 中创建的表。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from svv_external_tables;</code></pre>

            <pre class="screen">schemaname    | tablename        | location                                               
--------------+------------------+--------------------------------------------------------
athena_sample | elb_logs         | s3://athena-examples/elb/plaintext           
athena_sample | lineitem_1t_csv  | s3://myspectrum/tpch/1000/lineitem_csv                
athena_sample | lineitem_1t_part | s3://myspectrum/tpch/1000/lineitem_partition          
spectrum      | sales            | s3://redshift-downloads/tickit/spectrum/sales          
spectrum      | sales_part       | s3://redshift-downloads/tickit/spectrum/sales_part
</pre>
          
          
            <h3 id="c-spectrum-hive-metastore">注册 Apache Hive 元存储数据库</h3>


            <p>如果您在 Apache Hive 元存储中创建外部表，则可使用 CREATE EXTERNAL SCHEMA 在 Redshift Spectrum 中注册这些表。</p>
            <p>在 CREATE EXTERNAL SCHEMA 语句中，指定 FROM HIVE METASTORE 子句并提供 Hive 元存储 URI 和端口号。IAM 角色必须包含对 Amazon S3 的访问权限，但无需任何 Athena 权限。以下示例注册 Hive 元存储。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema if not exists hive_schema
from hive metastore
database 'hive_database'
uri 'ip-10-0-111-111.us-west-2.compute.internal' port 9083 
iam_role 'arn:aws:iam::123456789012:role/mySpectrumRole';</code></pre>
          
          
            <h3 id="c-spectrum-enabling-emr-access">使您的 Amazon Redshift 集群能够访问您的 Amazon EMR 集群</h3>


            <p>如果 Hive 元存储位于 Amazon EMR 中，则您必须为您的 Amazon Redshift 集群授予访问 Amazon EMR 集群的权限。为此，请创建一个 Amazon EC2 安全组。之后，应允许从您的 Amazon Redshift 集群的安全组和您的 Amazon EMR 集群的安全组到 EC2 安全组的所有入站流量。然后，您应将 EC2 安全组添加到您的 Amazon Redshift 集群和您的 Amazon EMR 集群。</p>
            
            <div class="procedure"><h6>查看您的 Amazon Redshift 集群的安全组名称</h6><p>要显示安全组，请执行以下操作：</p><ol><li> <p>登录到 AWS Management Console并打开 Amazon Redshift 控制台，网址：<a href="https://console.aws.amazon.com/redshift/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/redshift/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。</p> 
               </li><li>
                     <p>在导航菜单上，选择<b>集群</b>，然后从列表中选择该集群以打开其详细信息。</p>
                  </li><li>
                  <p>选择<b>属性</b>并查看<b>网络和安全设置</b>部分。</p>
               </li><li>
                     <p>在 <b>VPC 安全组</b>中找到您的安全组并记下它。</p>
                  </li></ol></div>
                                            
                       
         
 
                  <p><b></b></p>
                  
                  

                        
                                                                                                
            <div class="procedure"><h6>查看 Amazon EMR 主节点安全组名称</h6><ol><li><p>打开您的 Amazon EMR 集群。有关更多信息，请参阅《Amazon EMR 管理指南》<em></em>中的<a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-security-configurations.html">使用安全配置设置集群安全性</a>。</p></li><li><p>在<b>安全与访问</b>下，记下 Amazon EMR 主节点安全组名称。</p>
                  <div class="mediaobject">
                      
                        <img src="images/spectrum-emr-security-groups.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="在 Amazon EMR 控制台中突出显示 Amazon EMR 主节点安全组名称的屏幕截图。" />
                      
                      
                  </div>
               </li></ol></div>
            
            <div class="procedure"><h6>创建或修改 Amazon EC2 安全组以允许 Amazon Redshift 和 Amazon EMR 之间的连接：</h6><ol><li><p>在 Amazon EC2 控制面板中，选择<b>安全组</b>。有关更多信息，请参阅适用于《Linux 实例的 Amazon EC2 用户指南》<em></em>中的<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-rules.html">安全组规则</a>。</p>
               </li><li><p>选择<b>创建安全组</b>。</p>
               </li><li><p>如果使用的是 VPC，选择 Amazon Redshift 和 Amazon EMR 集群所在的 VPC。</p>
               </li><li><p>添加一条入站规则。</p>
               <div class="orderedlist">
                   
                   
                   
               <ol><li><p>对于<b>类型</b>，选择<b>自定义 TCP</b>。</p>
                  </li><li><p>对于 <b>Source</b>，选择 <b>Custom</b>。</p>
                  </li><li><p>输入您的 Amazon Redshift 安全组的名称。</p></li></ol></div></li><li><p>再添加一条入站规则。</p>
               <div class="orderedlist">
                   
                   
                                                      
               <ol><li><p>对于 <b>Type</b>，选择 <b>TCP</b>。</p>
                  </li><li><p>对于<b>端口范围</b>，输入 <b>9083</b>。</p>
                     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>EMR HMS 的默认端口是 9083。如果 HMS 使用了其他的端口，请在入站规则和外部模式定义中指定该端口。</p></div></div>
                  </li><li><p>对于 <b>Source</b>，选择 <b>Custom</b>。</p>
                  </li></ol></div>
               </li><li><p>输入安全组名称和描述。</p></li><li><p>选择<b>创建安全组</b>。</p>                  
               </li></ol></div>
            
            <div class="procedure"><h6>将您在上一步中创建的 Amazon EC2 安全组添加到您的 Amazon Redshift 集群：</h6><ol><li><p>在 Amazon Redshift 中，选择您的集群。</p></li><li><p>选择<b>属性</b>。</p></li><li><p>查看<b>网络和安全设置</b>，然后选择<b>编辑</b>。</p></li><li><p>在 <b>VPC 安全组</b>中，选择新的安全组名称。</p></li><li><p>选择<b>保存更改</b>。</p></li></ol></div>
            
            <div class="procedure"><h6>将 Amazon EC2 安全组添加到您的 Amazon EMR 集群：</h6><ol><li><p>在 Amazon EMR 中，选择您的集群。有关更多信息，请参阅《Amazon EMR 管理指南》<em></em>中的<a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-security-configurations.html">使用安全配置设置集群安全性</a>。</p></li><li><p>在 <b>Hardware</b> 下，选择主节点的链接。</p></li><li><p>选择 <b>EC2 实例 ID</b>列中的链接。</p>
                  <div class="mediaobject">
                      
                        <img src="images/spectrum-emr-add-security-group.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                        在 Amazon EMR 控制台中突出显示 Amazon EC2 实例 ID 值的屏幕截图。&#xA;                     " />
                      
                      
                  </div></li><li><p>依次选择<b>操作</b>、<b>安全</b>和<b>更改安全组</b>。</p></li><li><p>在<b>关联的安全组</b>中，选择新安全组，然后选择<b>添加安全组</b>。</p></li><li><p>选择 <b>Save</b>（保存）。</p>
                  </li></ol></div>
          
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>Javascript 在您的浏览器中被禁用或不可用。</strong></p><p>要使用 Amazon Web Services 文档，必须启用 Javascript。请参阅浏览器的帮助页面以了解相关说明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文档惯例</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-spectrum-data-files.html">为 Amazon Redshift Spectrum 中的查询创建数据文件</div><div id="next" class="next-link" accesskey="n" href="./c-spectrum-external-tables.html">创建外部表</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此页面对您有帮助吗？- 是</div><div class="content"><p>感谢您对我们工作的肯定！</p><p>如果不耽误您的时间，请告诉我们做得好的地方，让我们做得更好。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-schemas.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此页面对您有帮助吗？- 否</div><div class="content"><p>感谢您告诉我们本页内容还需要完善。很抱歉让您失望了。</p><p>如果不耽误您的时间，请告诉我们如何改进文档。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-schemas.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>