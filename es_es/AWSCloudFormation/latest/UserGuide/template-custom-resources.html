<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Recursos personalizados - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="template-custom-resources" /><meta name="default_state" content="template-custom-resources" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" /><meta name="description" content="Especifica los recursos personalizados para poder incluir los recursos que no son de AWS en una pila de AWS CloudFormation mediante el recurso AWS::CloudFormation::CustomResource." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Recursos personalizados" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Recursos personalizados - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabajo con plantillas de AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Recursos personalizados",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-guide.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#how-custom-resources-work">Cómo funcionan los recursos personalizados</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="template-custom-resources">Recursos personalizados</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><div class="itemizedlist">
            <p>El registro de CloudFormation ofrece varias ventajas sobre los recursos personalizados, incluidas las siguientes:</p>
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Compatibilidad con el modelado, el aprovisionamiento y la administración de recursos de aplicaciones de terceros</p>
            </li><li class="listitem">
                <p>Compatibilidad con las operaciones <code class="code">Create</code>, <code class="code">Read</code>, <code class="code">Update</code>, <code class="code">Delete</code> y <code class="code">List</code> (<code class="code">CRUDL</code>)</p>
            </li><li class="listitem">
                <p>Compatibilidad con la detección de desviaciones en tipos de recursos privados y de terceros</p>
            </li></ul></div><p>A diferencia de los recursos personalizados, los recursos basados en registros no necesitarán asociar un tema de Amazon SNS o una función de Lambda para realizar operaciones <code class="code">CRUDL</code>. Para obtener más información sobre el registro de CloudFormation, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/registry.html">Uso del registro de AWS CloudFormation</a>.</p></div></div><p>Los recursos personalizados le permiten escribir la lógica de aprovisionamiento personalizada en plantillas que AWS CloudFormation ejecuta cada vez que cree, actualice (si ha cambiado el recurso personalizado) o elimine pilas. Por ejemplo, es posible que desee incluir recursos que no están disponibles como <a href="./aws-template-resource-type-ref.html">tipos de recursos</a> de AWS CloudFormation. Puede incluir esos recursos usando recursos personalizados. De esta forma, puede seguir administrando todos los recursos relacionados en una sola pila.</p><p>Utilice el tipo de recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-customresource.html"><code class="code">AWS::CloudFormation::CustomResource</code></a> o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-customresource.html#aws-resource-cloudformation-customresource--remarks"><code class="code">Custom::<code class="replaceable">MyCustomResourceTypeName</code></code></a> para definir los recursos personalizados de las plantillas. Los recursos personalizados requieren una propiedad: el token de servicio, que especifica a dónde envía AWS CloudFormation las solicitudes, como un tema de Amazon SNS.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si utiliza la característica de <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-endpoints.html">punto de enlace de la VPC</a>, los recursos personalizados en la VPC deben tener acceso a buckets de S3 específicos de AWS CloudFormation. Los recursos personalizados deben enviar las respuestas a una URL de Amazon S3 prefirmada. Si no puede enviar las respuestas a Amazon S3, AWS CloudFormation no recibirá una respuesta y la operación de pila producirá un error. Para obtener más información, consulte <a href="./cfn-vpce-bucketnames.html">Configuración de puntos de enlace de la VPC para AWS CloudFormation</a>.</p></div></div>
        <h2 id="how-custom-resources-work">Cómo funcionan los recursos personalizados</h2>
        <p>Cualquier acción realizada por un recurso personalizado implica tres partes.</p>
        <div class="variablelist">
             
             
             
        <dl>
                <dt><span class="term">template developer</span></dt>
                <dd>
                    <p>Crea una plantilla que incluya un tipo de recurso personalizado. El token template developer especifica el token del servicio y los datos de entrada en la plantilla.</p>
                </dd>
             
                <dt><span class="term">custom resource provider</span></dt>
                <dd>
                    <p>Posee el recurso personalizado y determina cómo administrar y responder a las solicitudes de AWS CloudFormation. custom resource provider debe proporcionar un token de servicio que usa template developer.</p>
                </dd>
             
                <dt><span class="term">AWS CloudFormation</span></dt>
                <dd>
                    <p>Durante una operación de pila, envía una solicitud a un token de servicio que se especifica en la plantilla y, a continuación, espera una respuesta antes de continuar con la operación de la pila.</p>
                </dd>
            </dl></div>
        <p>El template developer y el custom resource provider pueden ser la misma persona o entidad, pero el proceso es el mismo. Los siguientes pasos describen el proceso general:</p>
        <div class="orderedlist">
             
             
             
             
        <ol><li>
                <p>template developer define un recurso personalizado en su plantilla, que incluye un token de servicio y los parámetros de datos de entrada. En función del recurso personalizado, los datos de entrada pueden ser obligatorios; sin embargo, el token de servicio siempre es necesario.</p>
                <p>El token de servicio especifica a dónde envía AWS CloudFormation las solicitudes, como un ARN de tema de Amazon SNS o un ARN de función de AWS Lambda. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-customresource.html"><code class="code">AWS::CloudFormation::CustomResource</code></a>. El token de servicio y la estructura de los datos de entrada los define custom resource provider.</p>
            </li><li>
                <p>Cada vez que alguien usa la plantilla para crear, actualizar o eliminar un recurso personalizado, AWS CloudFormation envía una solicitud al token del servicio especificado. El token de servicio debe estar la misma región en la que está creando la pila.</p>
                <p>En la solicitud, AWS CloudFormation incluye información como el tipo de solicitud y una dirección URL de Amazon Simple Storage Service prefirmada, a las que el recurso personalizado envía respuestas. Para obtener más información acerca de lo que se incluye en la solicitud, consulte <a href="./crpg-ref-requests.html">Objetos de solicitudes de recursos personalizados</a>.</p>
                <p>Los siguientes datos de ejemplo muestran lo que incluye AWS CloudFormation en una solicitud:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "RequestType" : "Create",
   "ResponseURL" : "http://pre-signed-S3-url-for-response",
   "StackId" : "arn:aws:cloudformation:us-west-2:123456789012:stack/stack-name/guid",
   "RequestId" : "unique id for this create request",
   "ResourceType" : "Custom::TestResource",
   "LogicalResourceId" : "MyTestResource",
   "ResourceProperties" : <span>{</span>
      "Name" : "Value",
      "List" : [ "1", "2", "3" ]
   }
}</code></pre>
                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>En este ejemplo, <code class="code">ResourceProperties</code> permite a AWS CloudFormation crear una carga personalizada que se enviará a la función de Lambda.</p></div></div>
            </li><li>
                <p>El proveedor de recursos personalizado procesa la solicitud de AWS CloudFormation y devuelve una respuesta de <code class="code">SUCCESS</code> o <code class="code">FAILED</code> a la URL prefirmada. custom resource provider proporciona la respuesta en un archivo con formato JSON y la carga a la URL de S3 prefirmada. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/PresignedUrlUploadObject.html">Uploading objects using pre-signed URLs</a> (Carga de objetos con URL prefirmadas) en la <em>Guía para usuarios de Amazon Simple Storage Service</em>.</p>
                <p>En la respuesta, el custom resource provider también puede incluir pares de nombre-valor a los que el template developer puede obtener acceso. Por ejemplo, la respuesta puede incluir datos de salida si la solicitud ha funcionado o un mensaje de error si ha fallado. Para obtener más información acerca de las respuestas, consulte <a href="./crpg-ref-responses.html">Objetos de respuesta de recursos personalizados</a>.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Si los pares nombre-valor contienen información confidencial, debe usar el campo <code class="code">NoEcho</code> para enmascarar la salida del recurso personalizado. De lo contrario, los valores son visibles a través de las API que muestran valores de propiedades (como <code class="code">DescribeStackEvents</code>).</p><p>Para obtener más información sobre cómo usar <code class="code">NoEcho</code> para enmascarar información confidencial, consulte la práctica recomendada <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html#creds">No incluya credenciales en sus plantillas</a>.</p></div></div>
                <p>custom resource provider es responsable de escuchar y responder a la solicitud. Por ejemplo, en el caso de las notificaciones de Amazon SNS, el proveedor de recursos personalizados debe escuchar y responder a las notificaciones que se envían al ARN de un tema específico. AWS CloudFormation espera y escucha una respuesta en la ubicación de la URL prefirmada.</p>
                <p>Los siguientes datos de ejemplo muestran lo que un recurso personalizado podría incluir en una respuesta:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Status" : "SUCCESS",
   "PhysicalResourceId" : "TestResource1",
   "StackId" : "arn:aws:cloudformation:us-west-2:123456789012:stack/stack-name/guid",
   "RequestId" : "unique id for this create request",
   "LogicalResourceId" : "MyTestResource",
   "Data" : <span>{</span>
      "OutputName1" : "Value1",
      "OutputName2" : "Value2",
   }
}</code></pre>
            </li><li>
                <p>Después de obtener una respuesta de <code class="code">SUCCESS</code>, AWS CloudFormation avanza con la operación de la pila. Si se recibe una respuesta <code class="code">FAILED</code> o ninguna respuesta, la operación genera un error. Todo dato de salida del recurso personalizado se almacena en la ubicación de la URL prefirmada. El template developer puede recuperar los datos usando la función <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.</p>
            </li></ol></div>
        
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./generate-IaC-apigateway-restapi.html">Recursos de AWS::ApiGateway::RestApi</div><div id="next" class="next-link" accesskey="n" href="./template-custom-resources-sns.html">Recursos personalizados y respaldados por Amazon Simple Notification Service</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>