<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Fragmentos de plantillas de AWS Identity and Access Management - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="quickref-iam" /><meta name="default_state" content="quickref-iam" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html" /><meta name="description" content="Utilice estos fragmentos de código de la plantilla de ejemplo con sus recursos de AWS Identity and Access Management en AWS CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Fragmentos de plantillas de AWS Identity and Access Management" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Fragmentos de plantillas de AWS Identity and Access Management - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabajo con plantillas de AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Fragmentos de plantillas",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/CHAP_TemplateQuickRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Fragmentos de plantillas de AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/CHAP_TemplateQuickRef.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#scenario-iam-user">Declaración de recurso de un usuario de IAM</a><a href="#scenario-iam-accesskey">Declaración de recurso de una clave de acceso IAM</a><a href="#scenario-iam-group">Declaración de recurso de un grupo de IAM</a><a href="#scenario-iam-addusertogroup">Añadir usuarios a un grupo</a><a href="#scenario-iam-policy">Declaración de una política de IAM</a><a href="#scenario-bucket-policy">Declaración de una política de bucket de Amazon S3</a><a href="#scenario-sns-policy">Declaración de una política de tema de Amazon SNS</a><a href="#scenario-sqs-policy">Declaración de una política de Amazon SQS</a><a href="#scenarios-iamroles">Ejemplos de plantillas de rol de IAM</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="quickref-iam">Fragmentos de plantillas de AWS Identity and Access Management</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Esta sección contiene fragmentos de la plantilla AWS Identity and Access Management.</p><div class="highlights" id="inline-topiclist"><h6>Temas</h6><ul><li><a href="#scenario-iam-user">Declaración de recurso de un usuario de IAM</a></li><li><a href="#scenario-iam-accesskey">Declaración de recurso de una clave de acceso IAM</a></li><li><a href="#scenario-iam-group">Declaración de recurso de un grupo de IAM</a></li><li><a href="#scenario-iam-addusertogroup">Añadir usuarios a un grupo</a></li><li><a href="#scenario-iam-policy">Declaración de una política de IAM</a></li><li><a href="#scenario-bucket-policy">Declaración de una política de bucket de Amazon S3</a></li><li><a href="#scenario-sns-policy">Declaración de una política de tema de Amazon SNS</a></li><li><a href="#scenario-sqs-policy">Declaración de una política de Amazon SQS</a></li><li><a href="#scenarios-iamroles">Ejemplos de plantillas de rol de IAM</a></li></ul></div><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Al crear o actualizar una pila utilizando una plantilla que contenga recursos de IAM, debe reconocer el uso de las capacidades de IAM. Para obtener más información sobre recursos de IAM en plantillas, consulte <a href="./using-iam-template.html">Control del acceso con AWS Identity and Access Management</a>.</p></div></div>
      <h2 id="scenario-iam-user">Declaración de recurso de un usuario de IAM</h2>

      <p>Este fragmento muestra cómo declarar un recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html">AWS::IAM::User</a></code> para crear un usuario de IAM. El usuario está declarado con la ruta (<code class="code">"/"</code>) y un perfil de inicio de sesión con la contraseña (<code class="code">myP@ssW0rd</code>).</p>

      <p>El documento de políticas denominado <code class="code">giveaccesstoqueueonly</code> ofrece al usuario permiso para realizar todas las acciones de Amazon SQS en el recurso de cola de Amazon SQS <code class="code">myqueue</code> y deniega el acceso a todos los demás recursos de la cola de Amazon SQS. La función <code class="code"><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code> obtiene el atributo Arn del recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html">AWS::SQS::Queue</a></code> <code class="code">myqueue</code>.</p>

      <p>El documento de políticas denominado <code class="code">giveaccesstotopiconly</code> se añade al usuario para darle permiso para realizar todas las acciones de Amazon SNS en el recurso de tema de Amazon SNS <code class="code">mytopic</code> y para denegar el acceso a todos los demás recursos de cola de Amazon SNS. La función <a href="./intrinsic-function-reference-ref.html">Ref</a> obtiene el ARN del recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html">AWS::SNS::Topic</a></code> <code class="code">mytopic</code>.</p>
      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-1.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myuser" : <span>{</span>
   "Type" : "AWS::IAM::User",
   "Properties" : <span>{</span>
      "Path" : "/",
      "LoginProfile" : <span>{</span>
         "Password" : "myP@ssW0rd"
      },
      "Policies" : [ <span>{</span>
         "PolicyName" : "giveaccesstoqueueonly",
         "PolicyDocument" : <span>{</span>
            "Version": "2012-10-17",
            "Statement" : [ <span>{</span>
               "Effect" : "Allow",
               "Action" : [ "sqs:*" ],
               "Resource" : [ <span>{</span>
                  "Fn::GetAtt" : [ "myqueue", "Arn" ]
               } ]
            }, <span>{</span>
               "Effect" : "Deny",
               "Action" : [ "sqs:*" ],
               "NotResource" : [ <span>{</span>
                  "Fn::GetAtt" : [ "myqueue", "Arn" ]
               } ]
            }
         ] }
      }, <span>{</span>
         "PolicyName" : "giveaccesstotopiconly",
         "PolicyDocument" : <span>{</span>
            "Version": "2012-10-17",
            "Statement" : [ <span>{</span>
               "Effect" : "Allow",
               "Action" : [ "sns:*" ],
               "Resource" : [ <span>{</span> "Ref" : "mytopic" } ]
            }, <span>{</span>
               "Effect" : "Deny",
               "Action" : [ "sns:*" ],
               "NotResource" : [ <span>{</span> "Ref" : "mytopic" } ]
            } ]
         }
      } ]
   }
} </code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-1.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myuser:
  Type: AWS::IAM::User
  Properties:
    Path: "/"
    LoginProfile:
      Password: myP@ssW0rd
    Policies:
    - PolicyName: giveaccesstoqueueonly
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Action:
          - sqs:*
          Resource:
          - !GetAtt myqueue.Arn
        - Effect: Deny
          Action:
          - sqs:*
          NotResource:
          - !GetAtt myqueue.Arn
    - PolicyName: giveaccesstotopiconly
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Action:
          - sns:*
          Resource:
          - !Ref mytopic
        - Effect: Deny
          Action:
          - sns:*
          NotResource:
          - !Ref mytopic</code></pre>
      </div>
    
      <h2 id="scenario-iam-accesskey">Declaración de recurso de una clave de acceso IAM</h2>
       
         <h3 id="quickref-iam-access-key"></h3>
         <p>Este fragmento muestra un recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-accesskey.html">AWS::IAM::AccessKey</a></code>. El recurso <code class="code">myaccesskey</code> crea una clave de acceso y la asigna a un usuario de IAM que se declare como un recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html">AWS::IAM::User</a></code> en la plantilla.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="quickref-iam-example-2.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myaccesskey" : <span>{</span>
   "Type" : "AWS::IAM::AccessKey",
   "Properties" : <span>{</span>
      "UserName" : <span>{</span> "Ref" : "myuser" }
   }
} </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="quickref-iam-example-2.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myaccesskey:
  Type: AWS::IAM::AccessKey
  Properties:
    UserName:
      !Ref myuser</code></pre>
         </div>
       
       
         <h3 id="quickref-iam-access-key-2"></h3>
         <p>Puede obtener la clave secreta de un recurso <code class="code">AWS::IAM::AccessKey</code> utilizando la función <code class="code"><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code>. Una forma de recuperar la clave secreta es ponerla en un valor <code class="code">Output</code>. Puede obtener la clave de acceso utilizando la función <code class="code">Ref</code>. Las siguientes declaraciones de valor <code class="code">Output</code> obtiene la clave de acceso y la clave secreta de <code class="code">myaccesskey</code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="quickref-iam-example-3.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"AccessKeyformyaccesskey" : <span>{</span>
   "Value" : <span>{</span> "Ref" : "myaccesskey" }
},
"SecretKeyformyaccesskey" : <span>{</span>
   "Value" : <span>{</span>
      "Fn::GetAtt" : [ "myaccesskey", "SecretAccessKey" ]
   }
} </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="quickref-iam-example-3.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AccessKeyformyaccesskey:
  Value:
    !Ref myaccesskey
SecretKeyformyaccesskey:
  Value: !GetAtt myaccesskey.SecretAccessKey</code></pre>
         </div>
       
       
         <h3 id="quickref-iam-access-key-3"></h3>
         <p>También puede pasar la clave de acceso y la clave secreta de AWS a una instancia de Amazon EC2 o un grupo de escalado automático definidos en la plantilla. La siguiente declaración <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a></code> utiliza la propiedad <code class="code">UserData</code> para pasar la clave de acceso y su clave secreta para el recurso <code class="code">myaccesskey</code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="quickref-iam-example-4.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myinstance" : <span>{</span>
   "Type" : "AWS::EC2::Instance",
   "Properties" : <span>{</span>
      "AvailabilityZone" : "<span>us-east-1a</span>",
      "ImageId" : "ami-0ff8a91507f77f867",
      "UserData" : <span>{</span>
         "Fn::Base64" : <span>{</span>
            "Fn::Join" : [
               "", [
                  "ACCESS_KEY=", <span>{</span>
                     "Ref" : "myaccesskey"
                  },
                  "&amp;",
                  "SECRET_KEY=",
                  <span>{</span>
                     "Fn::GetAtt" : [
                        "myaccesskey",
                        "SecretAccessKey"
                     ]
                  }
               ]
            ]
         }
      }
   }
} </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="quickref-iam-example-4.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myinstance:
  Type: AWS::EC2::Instance
  Properties:
    AvailabilityZone: "<span>us-east-1a</span>"
    ImageId: ami-0ff8a91507f77f867
    UserData:
      Fn::Base64: !Sub "ACCESS_KEY=$<span>{</span>myaccesskey}&amp;SECRET_KEY=$<span>{</span>myaccesskey.SecretAccessKey}"</code></pre>
         </div>
       
    
      <h2 id="scenario-iam-group">Declaración de recurso de un grupo de IAM</h2>

      <p>Este fragmento muestra un recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-group.html">AWS::IAM::Group</a></code>. El grupo tiene una ruta (<code class="code">"/myapplication/"</code>). El documento de políticas denominado <code class="code">myapppolicy</code> se añade al grupo para permitir a los usuarios del grupo realizar todas las acciones de Amazon SQS en el recurso de cola de Amazon SQS y para denegar el acceso a todos los demás recursos de Amazon SQS excepto <code class="code">myqueue</code>.</p>
      <p>Para asignar una política a un recurso, IAM requiere el nombre de recurso de Amazon (ARN) para el recurso. En el fragmento, la función <code class="code"><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code> obtiene el ARN de la cola del recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html">AWS::SQS::Queue</a></code>.</p>
      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-5.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"mygroup" : <span>{</span>
   "Type" : "AWS::IAM::Group",
   "Properties" : <span>{</span>
      "Path" : "/myapplication/",
      "Policies" : [ <span>{</span>
         "PolicyName" : "myapppolicy",
         "PolicyDocument" : <span>{</span>
            "Version": "2012-10-17",
            "Statement" : [ <span>{</span>
               "Effect" : "Allow",
               "Action" : [ "sqs:*" ],
               "Resource" : [ <span>{</span>
                  "Fn::GetAtt" : [ "myqueue", "Arn" ]
               } ]
            },
            <span>{</span>
               "Effect" : "Deny",
               "Action" : [ "sqs:*" ],
               "NotResource" : [ <span>{</span> "Fn::GetAtt" : [ "myqueue", "Arn" ] } ]
            }
         ] }
      } ]
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-5.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">mygroup:
  Type: AWS::IAM::Group
  Properties:
    Path: "/myapplication/"
    Policies:
    - PolicyName: myapppolicy
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Action:
          - sqs:*
          Resource: !GetAtt myqueue.Arn
        - Effect: Deny
          Action:
          - sqs:*
          NotResource: !GetAtt myqueue.Arn</code></pre>
      </div>
    
      <h2 id="scenario-iam-addusertogroup">Añadir usuarios a un grupo</h2>

      <p>El recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-addusertogroup.html">AWS::IAM::UserToGroupAddition</a></code> añade usuarios un grupo. En el siguiente fragmento, el recurso <code class="code">addUserToGroup</code> añade los siguientes usuarios a un grupo existente denominado <code class="code">myexistinggroup2</code>: el usuario existente <code class="code">existinguser1</code> y el usuario <code class="code">myuser</code> que se declara como recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html">AWS::IAM::User</a></code> en la plantilla.</p>
      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-6.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"addUserToGroup" : <span>{</span>
   "Type" : "AWS::IAM::UserToGroupAddition",
   "Properties" : <span>{</span>
      "GroupName" : "myexistinggroup2",
      "Users" : [ "existinguser1", <span>{</span> "Ref" : "myuser" } ]
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-6.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">addUserToGroup:
  Type: AWS::IAM::UserToGroupAddition
  Properties:
    GroupName: myexistinggroup2
    Users:
    - existinguser1
    - !Ref myuser</code></pre>
      </div>
    
      <h2 id="scenario-iam-policy">Declaración de una política de IAM</h2>

      <p>Este fragmento muestra cómo crear una política y aplicarla a varios grupos con un recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-policy.html">AWS::IAM::Policy</a></code> denominado <code class="code">mypolicy</code>. El recurso <code class="code">mypolicy</code> contiene una propiedad <code class="code">PolicyDocument</code> que permite acciones <code class="code">GetObject</code>, <code class="code">PutObject</code> y <code class="code">PutObjectAcl</code> en los objetos del bucket de S3 representadas por el ARN <code class="code">arn:aws:s3:::myAWSBucket</code>. El recurso <code class="code">mypolicy</code> aplica la política a un grupo existente denominado <code class="code">myexistinggroup1</code> y un grupo <code class="code">mygroup</code> declarado en la plantilla como recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-group.html">AWS::IAM::Group</a></code>. Este ejemplo muestra cómo aplicar una política a un grupo con la propiedad <code class="code">Groups</code>; sin embargo, también puede usar la propiedad <code class="code">Users</code> para añadir un documento de políticas a una lista de usuarios.</p>
      <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Las acciones de políticas de Amazon SNS que se declaran en el recurso AWS::IAM::Policy difieren de las acciones de políticas de temas de Amazon SNS que <a href="#scenario-sns-policy">se declaran en el recurso AWS::SNS::TopicPolicy</a>. Por ejemplo, las acciones de política <code class="code">sns:Unsubscribe</code> y <code class="code">sns:SetSubscriptionAttributes</code> son válidas para <code class="code">AWS::IAM::Policy</code>, pero no son válidas para el recurso <code class="code">AWS::SNS::TopicPolicy</code>. Para obtener más información acerca de las acciones de las políticas de Amazon SNS válidas que puede usar con el recurso <code class="code">AWS::IAM::Policy</code>, consulte <a href="https://docs.aws.amazon.com/sns/latest/dg/AccessPolicyLanguage_SpecialInfo.html">Special information for Amazon SNS policies</a> (Información especial para políticas de Amazon SNS) en la <em>Guía para desarrolladores de Amazon Simple Notification Service</em>.</p></div></div> <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-7.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"mypolicy" : <span>{</span>
   "Type" : "AWS::IAM::Policy",
   "Properties" : <span>{</span>
      "PolicyName" : "mygrouppolicy",
      "PolicyDocument" : <span>{</span>
         "Version": "2012-10-17",
         "Statement" : [ <span>{</span>
            "Effect" : "Allow",
            "Action" : [
               "s3:GetObject" , "s3:PutObject" , "s3:PutObjectAcl" ],
            "Resource" : "arn:aws:s3:::myAWSBucket/*"
         } ]
      },
      "Groups" : [ "myexistinggroup1", <span>{</span> "Ref" : "mygroup" } ]
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-7.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">mypolicy:
  Type: AWS::IAM::Policy
  Properties:
    PolicyName: mygrouppolicy
    PolicyDocument:
      Version: '2012-10-17'
      Statement:
      - Effect: Allow
        Action:
        - s3:GetObject
        - s3:PutObject
        - s3:PutObjectAcl
        Resource: arn:aws:s3:::myAWSBucket/*
    Groups:
    - myexistinggroup1
    - !Ref mygroup</code></pre>
      </div>
    
      <h2 id="scenario-bucket-policy">Declaración de una política de bucket de Amazon S3</h2>

      <p>Este fragmento de código muestra cómo crear una política y aplicarla a un bucket de Amazon S3 usando el recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::BucketPolicy</a></code>. El recurso <code class="code">mybucketpolicy</code> declara un documento de políticas que permite al usuario <code class="code">user1</code> de IAM realizar la acción <code class="code">GetObject</code> en todos los objetos del bucket de S3 para que se aplique esta política. En el fragmento, la función <code class="code"><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code> obtiene el ARN del recurso <code class="code">user1</code>. El recurso <code class="code">mybucketpolicy</code> aplica la política al recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::BucketPolicy</a></code> mybucket. La función <code class="code"><a href="./intrinsic-function-reference-ref.html">Ref</a></code> obtiene el nombre del bucket del recurso <code class="code">mybucket</code>.</p>
      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-8.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"mybucketpolicy" : <span>{</span>
   "Type" : "AWS::S3::BucketPolicy",
   "Properties" : <span>{</span>
      "PolicyDocument" : <span>{</span>
         "Id" : "MyPolicy",
         "Version": "2012-10-17",
         "Statement" : [ <span>{</span>
            "Sid" : "ReadAccess",
            "Action" : [ "s3:GetObject" ],
            "Effect" : "Allow",
            "Resource" : <span>{</span> "Fn::Join" : [
                  "", [ "arn:aws:s3:::", <span>{</span> "Ref" : "mybucket" } , "/*" ]
               ] },
            "Principal" : <span>{</span>
               "AWS" : <span>{</span> "Fn::GetAtt" : [ "user1", "Arn" ] }
            }
         } ]
      },
      "Bucket" : <span>{</span> "Ref" : "mybucket" }
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-8.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">mybucketpolicy:
  Type: AWS::S3::BucketPolicy
  Properties:
    PolicyDocument:
      Id: MyPolicy
      Version: '2012-10-17'
      Statement:
      - Sid: ReadAccess
        Action:
        - s3:GetObject
        Effect: Allow
        Resource: !Sub "arn:aws:s3:::$<span>{</span>mybucket}/*"
        Principal:
          AWS: !GetAtt user1.Arn
    Bucket: !Ref mybucket</code></pre>
      </div>
    
      <h2 id="scenario-sns-policy">Declaración de una política de tema de Amazon SNS</h2>

      <p>Este fragmento de código muestra cómo crear una política y aplicarla a un tema de Amazon SNS usando el recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-policy.html">AWS::SNS::TopicPolicy</a></code>. El recurso <code class="code">mysnspolicy</code> contiene una propiedad <code class="code">PolicyDocument</code> que permite al recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html">AWS::IAM::User</a></code> <code class="code">myuser</code> realizar la acción <code class="code">Publish</code> sobre un recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html">AWS::SNS::Topic</a></code> <code class="code">mytopic</code>. En el fragmento, la función <code class="code"><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code> obtiene el ARN del recurso <code class="code">myuser</code> y la función <code class="code"><a href="./intrinsic-function-reference-ref.html">Ref</a></code> obtiene el ARN para el recurso <code class="code">mytopic</code>.</p> <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Las acciones de políticas de Amazon SNS que <a href="#scenario-iam-policy">se declaran en el recurso AWS::IAM::Policy</a> difieren de las acciones de políticas de temas de Amazon SNS que se declaran en el recurso AWS::SNS::TopicPolicy. Por ejemplo, las acciones de política <code class="code">sns:Unsubscribe</code> y <code class="code">sns:SetSubscriptionAttributes</code> son válidas para <code class="code">AWS::IAM::Policy</code>, pero no son válidas para el recurso <code class="code">AWS::SNS::TopicPolicy</code>. Para obtener más información acerca de las acciones de las políticas de Amazon SNS válidas que puede usar con el recurso <code class="code">AWS::IAM::Policy</code>, consulte <a href="https://docs.aws.amazon.com/sns/latest/dg/AccessPolicyLanguage_SpecialInfo.html">Special information for Amazon SNS policies</a> (Información especial para políticas de Amazon SNS) en la <em>Guía para desarrolladores de Amazon Simple Notification Service</em>.</p></div></div> <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-9.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"mysnspolicy" : <span>{</span>
   "Type" : "AWS::SNS::TopicPolicy",
   "Properties" : <span>{</span>
      "PolicyDocument" :  <span>{</span>
         "Id" : "MyTopicPolicy",
         "Version" : "2012-10-17",
         "Statement" : [ <span>{</span>
            "Sid" : "My-statement-id",
            "Effect" : "Allow",
            "Principal" : <span>{</span>
               "AWS" : <span>{</span> "Fn::GetAtt" : [ "myuser", "Arn" ] }
            },
            "Action" : "sns:Publish",
            "Resource" : "*"
         } ]
      },
      "Topics" : [ <span>{</span> "Ref" : "mytopic" } ]
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-9.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">mysnspolicy:
  Type: AWS::SNS::TopicPolicy
  Properties:
    PolicyDocument:
      Id: MyTopicPolicy
      Version: '2012-10-17'
      Statement:
      - Sid: My-statement-id
        Effect: Allow
        Principal:
          AWS: !GetAtt myuser.Arn
        Action: sns:Publish
        Resource: "*"
    Topics:
    - !Ref mytopic</code></pre>
      </div>
    
      <h2 id="scenario-sqs-policy">Declaración de una política de Amazon SQS</h2>

      <p>Este fragmento de código muestra cómo crear una política y aplicarla a una cola de Amazon SQS usando el recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-policy.html">AWS::SQS::QueuePolicy</a></code>. La propiedad <code class="code">PolicyDocument</code> permite al usuario existente <code class="code">myapp</code> (especificado por su ARN) realizar la acción <code class="code">SendMessage</code> en una cola existente, que especifican su URL y un recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html">AWS::SQS::Queue</a></code> myqueue. La función <a href="./intrinsic-function-reference-ref.html">Ref</a> obtiene el ARN del recurso <code class="code">myqueue</code>.</p>
      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-10.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"mysqspolicy" : <span>{</span>
   "Type" : "AWS::SQS::QueuePolicy",
   "Properties" : <span>{</span>
      "PolicyDocument" : <span>{</span>
         "Id" : "MyQueuePolicy",
         "Version" : "2012-10-17",
         "Statement" : [ <span>{</span>
            "Sid" : "Allow-User-SendMessage",
            "Effect" : "Allow",
            "Principal" : <span>{</span>
               "AWS" : "arn:aws:iam::123456789012:user/myapp"
            },
            "Action" : [ "sqs:SendMessage" ],
            "Resource" : "*"
         } ]
      },
      "Queues" : [
         "https://sqs.us-east-2<span>us-east-2</span>.amazonaws.com/123456789012/myexistingqueue",
         <span>{</span> "Ref" : "myqueue" }
      ]
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-10.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">mysqspolicy:
  Type: AWS::SQS::QueuePolicy
  Properties:
    PolicyDocument:
      Id: MyQueuePolicy
      Version: '2012-10-17'
      Statement:
      - Sid: Allow-User-SendMessage
        Effect: Allow
        Principal:
          AWS: arn:aws:iam::123456789012:user/myapp
        Action:
        - sqs:SendMessage
        Resource: "*"
    Queues:
    - https://sqs.<span>us-east-2</span>.amazonaws.com/123456789012/myexistingqueue
    - !Ref myqueue</code></pre>
      </div>
    
      <h2 id="scenarios-iamroles">Ejemplos de plantillas de rol de IAM</h2>


      <p>Esta sección proporciona ejemplos de plantillas de CloudFormation para los roles de IAM de instancias de EC2.</p>

      <p>Para obtener más información acerca de los roles de IAM, consulte <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/WorkingWithRoles.html">Working with roles</a> (Trabajar con roles) en la <em>Guía del usuario de AWS Identity and Access Management</em>.</p>

      
       
         <h3 id="scenario-iamrole-ec2">Rol de IAM con EC2</h3>

         <p>En este ejemplo, la propiedad <code class="code">IamInstanceProfile</code> de la instancia de EC2 hace referencia al perfil de instancia. Tanto la política de instancias como la política de roles hacen referencia a <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html">AWS::IAM::Role</a></code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="quickref-iam-example-11.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "AWSTemplateFormatVersion": "2010-09-09",
   "Resources": <span>{</span>
      "myEC2Instance": <span>{</span>
         "Type": "AWS::EC2::Instance",
         "Version": "2009-05-15",
         "Properties": <span>{</span>
            "ImageId": "ami-0ff8a91507f77f867",
            "InstanceType": "m1.small",
            "Monitoring": "true",
            "DisableApiTermination": "false",
            "IamInstanceProfile": <span>{</span>
               "Ref": "RootInstanceProfile"
            }
         }
      },
      "RootRole": <span>{</span>
         "Type": "AWS::IAM::Role",
         "Properties": <span>{</span>
            "AssumeRolePolicyDocument": <span>{</span>
               "Version" : "2012-10-17",
               "Statement": [ <span>{</span>
                  "Effect": "Allow",
                  "Principal": <span>{</span>
                     "Service": [ "ec2.amazonaws.com" ]
                  },
                  "Action": [ "sts:AssumeRole" ]
               } ]
            },
            "Path": "/"
         }
      },
      "RolePolicies": <span>{</span>
         "Type": "AWS::IAM::Policy",
         "Properties": <span>{</span>
            "PolicyName": "root",
            "PolicyDocument": <span>{</span>
               "Version" : "2012-10-17",
               "Statement": [ <span>{</span>
                  "Effect": "Allow",
                  "Action": "*",
                  "Resource": "*"
               } ]
            },
            "Roles": [ <span>{</span> "Ref": "RootRole" } ]
         }
      },
      "RootInstanceProfile": <span>{</span>
         "Type": "AWS::IAM::InstanceProfile",
         "Properties": <span>{</span>
            "Path": "/",
            "Roles": [ <span>{</span> "Ref": "RootRole" } ]
         }
      }
   }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="quickref-iam-example-11.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Resources:
  myEC2Instance:
    Type: AWS::EC2::Instance
    Version: '2009-05-15'
    Properties:
      ImageId: ami-0ff8a91507f77f867
      InstanceType: m1.small
      Monitoring: 'true'
      DisableApiTermination: 'false'
      IamInstanceProfile:
        !Ref RootInstanceProfile
  RootRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Principal:
            Service:
            - ec2.amazonaws.com
          Action:
          - sts:AssumeRole
      Path: "/"
  RolePolicies:
    Type: AWS::IAM::Policy
    Properties:
      PolicyName: root
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Action: "*"
          Resource: "*"
      Roles:
      - !Ref RootRole
  RootInstanceProfile:
    Type: AWS::IAM::InstanceProfile
    Properties:
      Path: "/"
      Roles:
      - !Ref RootRole</code></pre>
         </div>
       

      
       
         <h3 id="scenario-iamrole-asg">Rol de IAM con grupo de AutoScaling</h3>

         <p>En este ejemplo, la propiedad <code class="code">IamInstanceProfile</code> de la configuración de lanzamiento de un grupo de escalado automático hace referencia al perfil de instancia.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="quickref-iam-example-12.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "AWSTemplateFormatVersion": "2010-09-09",
   "Resources": <span>{</span>
      "myLCOne": <span>{</span>
         "Type": "AWS::AutoScaling::LaunchConfiguration",
         "Version": "2009-05-15",
         "Properties": <span>{</span>
            "ImageId": "ami-0ff8a91507f77f867",
            "InstanceType": "m1.small",
            "InstanceMonitoring": "true",
            "IamInstanceProfile": <span>{</span> "Ref": "RootInstanceProfile" }
         }
      },
      "myASGrpOne": <span>{</span>
         "Type": "AWS::AutoScaling::AutoScalingGroup",
         "Version": "2009-05-15",
         "Properties": <span>{</span>
            "AvailabilityZones": [ "<span>us-east-1a</span>" ],
            "LaunchConfigurationName": <span>{</span> "Ref": "myLCOne" },
            "MinSize": "0",
            "MaxSize": "0",
            "HealthCheckType": "EC2",
            "HealthCheckGracePeriod": "120"
         }
      },
      "RootRole": <span>{</span>
         "Type": "AWS::IAM::Role",
         "Properties": <span>{</span>
            "AssumeRolePolicyDocument": <span>{</span>
               "Version" : "2012-10-17",
               "Statement": [ <span>{</span>
                  "Effect": "Allow",
                  "Principal": <span>{</span>
                     "Service": [ "ec2.amazonaws.com" ]
                  },
                  "Action": [ "sts:AssumeRole" ]
               } ]
            },
            "Path": "/"
         }
      },
      "RolePolicies": <span>{</span>
         "Type": "AWS::IAM::Policy",
         "Properties": <span>{</span>
            "PolicyName": "root",
            "PolicyDocument": <span>{</span>
               "Version" : "2012-10-17",
               "Statement": [ <span>{</span>
                  "Effect": "Allow",
                  "Action": "*",
                  "Resource": "*"
               } ]
            },
            "Roles": [ <span>{</span> "Ref": "RootRole" } ]
         }
      },
      "RootInstanceProfile": <span>{</span>
         "Type": "AWS::IAM::InstanceProfile",
         "Properties": <span>{</span>
            "Path": "/",
            "Roles": [ <span>{</span> "Ref": "RootRole" } ]
         }
      }
   }
}  </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="quickref-iam-example-12.yaml">YAML</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Resources:
  myLCOne:
    Type: AWS::AutoScaling::LaunchConfiguration
    Version: '2009-05-15'
    Properties:
      ImageId: ami-0ff8a91507f77f867
      InstanceType: m1.small
      InstanceMonitoring: 'true'
      IamInstanceProfile:
        !Ref RootInstanceProfile
  myASGrpOne:
    Type: AWS::AutoScaling::AutoScalingGroup
    Version: '2009-05-15'
    Properties:
      AvailabilityZones:
      - "<span>us-east-1a</span>"
      LaunchConfigurationName:
        !Ref myLCOne
      MinSize: '0'
      MaxSize: '0'
      HealthCheckType: EC2
      HealthCheckGracePeriod: '120'
  RootRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Principal:
            Service:
            - ec2.amazonaws.com
          Action:
          - sts:AssumeRole
      Path: "/"
  RolePolicies:
    Type: AWS::IAM::Policy
    Properties:
      PolicyName: root
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Action: "*"
          Resource: "*"
      Roles:
      - !Ref RootRole
  RootInstanceProfile:
    Type: AWS::IAM::InstanceProfile
    Properties:
      Path: "/"
      Roles:
      - !Ref RootRole</code></pre>
         </div>
       
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./quickref-elb.html">Elastic Load Balancing</div><div id="next" class="next-link" accesskey="n" href="./quickref-lambda.html">AWS Lambda</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>