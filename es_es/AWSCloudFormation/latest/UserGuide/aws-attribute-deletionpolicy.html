<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Atributo DeletionPolicy - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-attribute-deletionpolicy" /><meta name="default_state" content="aws-attribute-deletionpolicy" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" /><meta name="description" content="Especifique cómo gestionar la eliminación de recursos en AWS CloudFormation con el atributo DeletionPolicy." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Atributo DeletionPolicy" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Atributo DeletionPolicy - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referencia de la plantilla",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Referencia de atributos personalizados",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-product-attribute-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Atributo DeletionPolicy",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-product-attribute-reference.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#aws-attribute-deletionpolicy-example.json">JSON</a><a href="#aws-attribute-deletionpolicy-example.yaml">YAML</a><a href="#aws-attribute-deletionpolicy-options">Opciones de DeletionPolicy</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-attribute-deletionpolicy">Atributo <code class="code">DeletionPolicy</code></h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Con el atributo <code class="code">DeletionPolicy</code> puede conservar y, en algunos casos, realizar una copia de seguridad de un recurso cuando se elimina su pila. Puede especificar un atributo <code class="code">DeletionPolicy</code> para cada recurso que quiera controlar. Si un recurso no tiene ningún atributo <code class="code">DeletionPolicy</code>, AWS CloudFormation eliminará el recurso de manera predeterminada.</p><p>Esta capacidad también se aplica a las operaciones de actualización de pilas que hacen que se eliminen recursos de las pilas. Por ejemplo, si elimina el recurso de la plantilla de pila y, a continuación, actualiza la pila con la plantilla. Esta capacidad no se aplica a los recursos cuya instancia física se sustituye durante las operaciones de actualización de la pila. Por ejemplo, si edita las propiedades de un recurso de tal forma que CloudFormation sustituya dicho recurso durante la actualización de una pila.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p><b>Excepción</b>: la política predeterminada es <code class="code">Snapshot</code> para los recursos de <code class="code">AWS::RDS::DBCluster</code> y para los recursos de <code class="code">AWS::RDS::DBInstance</code> que no especifican la propiedad <code class="code">DBClusterIdentifier</code>.</p></div></div><p>Para mantener un recurso cuando se elimina su pila, especifique <code class="code">Retain</code> para ese recurso. Puede utilizar <code class="code">Retain</code> para cualquier recurso. Por ejemplo, puede conservar una pila anidada, el bucket de Amazon S3 o la instancia de EC2 para poder seguir utilizando o modificando esos recursos después de eliminar sus pilas.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si desea modificar recursos fuera de CloudFormation, utilice una política de eliminación <code class="code">Retain</code> y, a continuación, elimine la pila. De lo contrario, sus recursos podrían desactualizarse con la plantilla de CloudFormation y producir errores de pila.</p></div></div><p>Para los recursos que admiten instantáneas, como por ejemplo <code class="code">AWS::EC2::Volume</code>, puede especificar <code class="code">Snapshot</code> para que CloudFormation cree una instantánea antes de eliminar el recurso.</p><p>El siguiente fragmento de código contiene un recurso de bucket de Amazon S3 con una política de eliminación <code class="code">Retain</code>. Cuando se elimina esta pila, CloudFormation deja el bucket sin eliminarlo.</p><div id="JSON" name="JSON" class="section langfilter">
      <h2 id="aws-attribute-deletionpolicy-example.json">JSON</h2>

      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Resources" : <span>{</span>
    "myS3Bucket" : <span>{</span>
      "Type" : "AWS::S3::Bucket",
      "DeletionPolicy" : "Retain"
    }
  }
}</code></pre>
   </div><div id="YAML" name="YAML" class="section langfilter">
      <h2 id="aws-attribute-deletionpolicy-example.yaml">YAML</h2>

      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Resources:
  myS3Bucket:
    Type: AWS::S3::Bucket
    DeletionPolicy: Retain</code></pre>
   </div>
      <h2 id="aws-attribute-deletionpolicy-options">Opciones de <code class="code">DeletionPolicy</code></h2>

      <div class="variablelist">
          
          
          
          
      <dl>
            <dt><span class="term">Eliminación</span></dt>
            <dd>
               <p>CloudFormation elimina el recurso y todo su contenido si procede durante la eliminación de la pila. Puede añadir esta política de eliminación a cualquier tipo de recurso. De manera predeterminada, si no especifica un <code class="code">DeletionPolicy</code>, CloudFormation eliminará los recursos. Sin embargo, debe tener en cuenta las siguientes consideraciones:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>En el caso de recursos <code class="code">AWS::RDS::DBCluster</code>, la política predeterminada es <code class="code">Snapshot</code>.</p>
                  </li><li class="listitem">
                     <p>Para los recursos <code class="code">AWS::RDS::DBInstance</code> que no especifican la propiedad <code class="code">DBClusterIdentifier</code>, la política predeterminada es <code class="code">Snapshot</code>.</p>
                  </li><li class="listitem">
                     <p>Para buckets de Amazon S3, debe eliminar todos los objetos en el bucket para una correcta eliminación.</p>
                  </li></ul></div>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>El comportamiento predeterminado de CloudFormation es eliminar el secreto con el indicador ForceDeleteWithoutRecovery.</p></div></div>
            </dd>
          
            <dt><span class="term">Retener</span></dt>
            <dd>
               <p>CloudFormation mantiene el recurso sin eliminar el recurso o su contenido cuando se elimina su pila. Puede añadir esta política de eliminación a cualquier tipo de recurso. Cuando CloudFormation completa la eliminación de la pila, la pila tendrá el estado <code class="code">Delete_Complete</code>; sin embargo, los recursos que se conservan siguen existiendo y siguen devengando cargos aplicables hasta que elimina esos recursos.</p>
               
               <p>Para actualizar operaciones, las siguientes consideraciones son aplicables:</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>Si se elimina un recurso, la <code class="code">DeletionPolicy</code> retiene el recurso físico, pero garantiza que se elimine del ámbito de CloudFormation.</p>
                  </li><li class="listitem">
                     <p>Si un recurso se actualiza de forma que se crea un nuevo recurso físico para sustituir el recurso anterior, el recurso anterior se elimina por completo, incluido el ámbito de CloudFormation.</p>
                  </li></ul></div>
            </dd>
          
            <dt><span class="term">RetainExceptOnCreate</span></dt>
            <dd>
               <p><code class="code">RetainExceptOnCreate</code> se comporta como <code class="code">Retain</code> para las operaciones de pila, excepto para la operación de pila que creó inicialmente el recurso. Si la operación de pila que creó el recurso se revierte, CloudFormation elimina el recurso. Para todas las demás operaciones de pila, como la eliminación de pila, CloudFormation retiene el recurso y su contenido. El resultado es que los recursos nuevos, vacíos y no usados se eliminan, mientras que los recursos en uso y sus datos se retienen. Consulte la documentación de la API <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html"><code class="code">UpdateStack</code></a> para usar esta política de eliminación como parámetro de la API sin actualizar su plantilla.</p>
            </dd>
          
            <dt><span class="term">Instantánea</span></dt>
            <dd>
               <p>Para los recursos que admiten instantáneas, CloudFormation crea una instantánea para el recurso antes de eliminarlo. Cuando CloudFormation completa la eliminación de la pila, la pila tendrá el estado <code class="code">Delete_Complete</code>; sin embargo, las instantáneas que se crean con esta política siguen existiendo y siguen devengando cargos hasta que elimina esas instantáneas.</p>
               <p>Entre los recursos que admiten instantáneas se incluyen:</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-docdb-dbcluster.html"><code class="code">AWS::DocDB::DBCluster</code></a></p>
                  </li><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-volume.html"><code class="code">AWS::EC2::Volume</code></a></p>
                  </li><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticache-cachecluster.html"><code class="code">AWS::ElastiCache::CacheCluster</code></a></p>
                  </li><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticache-replicationgroup.html"><code class="code">AWS::ElastiCache::ReplicationGroup</code></a></p>
                  </li><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-neptune-dbcluster.html"><code class="code">AWS::Neptune::DBCluster</code></a></p>
                  </li><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-rds-dbcluster.html"><code class="code">AWS::RDS::DBCluster</code></a></p>
                  </li><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-rds-dbinstance.html"><code class="code">AWS::RDS::DBInstance</code></a></p>
                  </li><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-redshift-cluster.html"><code class="code">AWS::Redshift::Cluster</code></a></p>
                  </li></ul></div>
            </dd>
         </dl></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-attribute-creationpolicy.html">CreationPolicy</div><div id="next" class="next-link" accesskey="n" href="./aws-attribute-dependson.html">DependsOn</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>