<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Creación de un conjunto de pilas - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="stacksets-getting-started-create" /><meta name="default_state" content="stacksets-getting-started-create" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" /><meta name="description" content="Puede crear un conjunto de pilas mediante la AWS Management Console o los comandos AWS CloudFormation de la AWS CLI. Puede crear un conjunto de pilas con cualquiera permiso self-managed o service-managed ." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Creación de un conjunto de pilas" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Creación de un conjunto de pilas - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabajo con AWS CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Introducción a AWS CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Creación de un conjunto de pilas",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#stacksets-getting-started-create-self-managed">Creación de un conjunto de pilas con permisos autoadministrados</a><a href="#stacksets-orgs-associate-stackset-with-org">Creación de un conjunto de pilas con permisos administrados por servicios</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="stacksets-getting-started-create">Creación de un conjunto de pilas</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Puede crear un conjunto de pilas mediante la AWS Management Console o los comandos AWS CloudFormation de la AWS CLI. Puede crear un conjunto de pilas con cualquiera permiso <code class="code">self-managed</code> o <code class="code">service-managed</code>.</p><p>Con los permisos <code class="code">self-managed</code>, puede implementar instancias de pila en Cuentas de AWS específicas de regiones determinadas. Para ello, primero debe crear los roles de IAM necesarios para establecer una relación de confianza entre la cuenta desde la que está administrando el conjunto de pilas y la cuenta en la que está implementando instancias de pila.</p><p>Con los permisos <code class="code">service-managed</code>, puede implementar instancias de pila en cuentas administradas por AWS Organizations en regiones específicas. Con este modelo, no es necesario crear los roles de IAM necesarios; StackSets crea los roles de IAM en su nombre. También puede habilitar implementaciones automáticas en cuentas que se añaden a una organización o unidad organizativa (OU) de destino en el futuro. Con las implementaciones automáticas habilitadas, StackSets elimina automáticamente instancias de pila de una cuenta si se quita de una organización u unidad organizativa de destino.</p><div class="highlights" id="inline-topiclist"><h6>Temas</h6><ul><li><a href="#stacksets-getting-started-create-self-managed">Creación de un conjunto de pilas con permisos autoadministrados</a></li><li><a href="#stacksets-orgs-associate-stackset-with-org">Creación de un conjunto de pilas con permisos administrados por servicios</a></li></ul></div>
            <h2 id="stacksets-getting-started-create-self-managed">Creación de un conjunto de pilas con permisos autoadministrados</h2>

            <div class="highlights" id="inline-topiclist"><h6>Temas</h6><ul><li><a href="#stacksets-getting-started-create-self-managed-console">Creación de un conjunto de pilas con permisos autoadministrados mediante la AWS Management Console</a></li><li><a href="#stacksets-getting-started-self-managed-cli">Creación de un conjunto de pilas con permisos autoadministrados mediante la AWS CLI</a></li></ul></div>

             
                <h3 id="stacksets-getting-started-create-self-managed-console">Creación de un conjunto de pilas con permisos autoadministrados mediante la AWS Management Console</h3>

                <div class="procedure"><ol><li><p>Abra la consola de AWS CloudFormation en <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
                        <p>En el panel de navegación, seleccione <b>StackSets (Conjuntos de pilas)</b>.</p>
                    </li><li>
                        <p>En la parte superior de la página <b>StackSets (Conjuntos de pilas)</b>, seleccione <b>Create StackSet (Crear conjunto de pilas)</b>.</p>
                    </li><li>
                        <p>En <b>Prerequisite - Prepare template (Requisito previo: preparar plantilla)</b>, elija <b>Use a sample template (Usar una plantilla de ejemplo)</b>.</p>
                    </li><li>
                        <p>En la opción <b>Seleccionar una plantilla de muestra</b> del menú desplegable, seleccione la plantilla <b>Habilitar AWS Config</b>. Seleccione <b>Siguiente</b>.</p>
                        <div class="mediaobject">
                             
                                <img src="images/console-create-stackset-choose-template.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                Plantilla de ejemplo para habilitar AWS Config de StackSets&#xA;                            " style="max-width:100%" />
                             
                             
                        </div>
                    </li><li>
                        <p>En la página <b>Specify StackSet details (Especificar detalles del conjunto de pilas)</b>, indique la siguiente información.</p>
                        <ol><li>
                                <p>Proporcione un nombre para el conjunto de pilas. Los nombres de conjuntos de pilas deben comenzar por un carácter alfabético, y solo pueden contener letras, números y guiones. En este tutorial, usamos el nombre <code class="userinput">my-awsconfig-stackset</code>.</p>
                            </li><li>
                                <p>Se le pedirá que especifique los valores de los parámetros que se utilizan en AWS Config. Para obtener más información acerca de estos parámetros, consulte <a href="https://docs.aws.amazon.com/config/latest/developerguide/gs-console.html">Configuración de AWS Config con la consola</a> en la <em>Guía para desarrolladores de AWS Config</em>. En este tutorial, vamos a dejar la configuración predeterminada para todos los parámetros de AWS Config.</p>
                            </li><li>
                                <p>Puede configurar las actualizaciones de Amazon Simple Notification Service (SNS) por correo electrónico, en función del contenido del registro, utilizando los parámetros <b>TopicARN</b> y <b>NotificationEmail</b>. A efectos de este tutorial, no configuramos las actualizaciones de Amazon SNS.</p>
                            </li><li>
                                <p>Puede configurar el canal de entrega para actualizaciones y notificaciones con los parámetros <b>DeliveryChannelName</b> y <b>Frequency</b>. Para obtener más información sobre el canal de entrega en AWS Config, consulte <a href="https://docs.aws.amazon.com/config/latest/developerguide/manage-delivery-channel.html">Administrar el canal de entrega</a> en la <em>Guía para desarrolladores de AWS Config</em>. A efectos de este tutorial, dejamos la configuración predeterminada en esta área.</p>
                            </li></ol>
                    </li><li>
                        <p>Cuando haya terminado de especificar lo parámetros de AWS Config, seleccione <b>Next (Siguiente)</b>.</p>
                    </li><li>
                        <p>En la página <b>Configure StackSet options (Configurar opciones del conjunto de pilas)</b>, añada una etiqueta especificando un par de clave y valor. En este tutorial, creamos una etiqueta denominada <b>Stage (Fase)</b>, con un valor de <b>Test (Prueba)</b>. Las etiquetas que se aplican a los conjuntos de pila se aplican a todos los recursos creados por las pilas. Para obtener más información acerca del uso de etiquetas en AWS, consulte <a href="https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/cost-alloc-tags.html">Uso de etiquetas de asignación de costos</a> en la <em>Guía del usuario de AWS Billing and Cost Management</em>.</p>
                        <p>Deje <b>Permissions</b> (Permisos) sin especificar.</p>
                    </li><li>
                        <p>Para <b>Execution configuration</b> (Configuración de ejecución), elija <b>Active</b> (Activo) para que StackSets lleve a cabo operaciones sin conflictos simultáneamente y ponga en cola las operaciones en conflicto. Una vez finalizadas las operaciones en conflicto, StackSets inicia las operaciones en cola por orden de solicitud.</p>
                        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si ya hay operaciones en ejecución o en cola, StackSets pone en cola todas las operaciones entrantes aunque no entren en conflicto.</p><p>No puede modificar la configuración de ejecución de su conjunto de pilas mientras haya operaciones en ejecución o en cola para ese conjunto de pilas.</p></div></div>
                    </li><li>
                        <p>Elija <b>Siguiente</b>.</p>
                    </li><li>
                        <p>En la página <b>Set deployment options (Establecer opciones de implementación)</b>, proporcione las cuentas y regiones en las que desea pilas implantadas en el conjunto de pilas.</p>
                        <p>AWS CloudFormation implementará pilas en las cuentas especificadas en la primera región, a continuación pasará a la siguiente y así sucesivamente, mientras los fallos de implementación de una región no superen la tolerancia de fallos especificada.</p>
                        <ol><li>
                                <p>Para <b>Accounts (Cuentas)</b>, seleccione <b>Deploy stacks in accounts (Implementar pilas en cuentas)</b>. Pegue sus números de cuenta de destino en el cuadro de texto, separando los distintos números con comas..</p>
                            </li><li>
                                <p>Para <b>Specify regions (Especificar regiones)</b>, elija Región EE.UU. Este (Norte de Virginia). Repita el proceso para Región EE.UU. Oeste (Oregón). Seleccione la flecha hacia arriba que aparece junto a Región EE.UU. Oeste (Oregón) para moverla a la primera posición de la lista. El orden de las regiones en <b>Especificar regiones</b> determina su orden de implementación.</p>
                            </li><li>
                                <p>Para <b>Deployment options (Opciones de implementación)</b>:</p>
                                <div class="itemizedlist">
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p>En <b>Maximum concurrent accounts</b> (Máximo de cuentas simultáneas), mantenga los valores predeterminados de <b>Number</b> (Número) y <b>1</b>.</p>
                                        <p>Esto significa que AWS CloudFormation implementa la pila en tan solo una cuenta a la vez.</p>
                                    </li><li class="listitem">
                                        <p>Para <b>Tolerancia a errores</b>, mantenga los valores predeterminados de <b>Número</b> y <b>0</b>.</p>
                                        <p>Esto significa que puede fallar un máximo de una implementación de pila en una de las regiones especificadas antes de que AWS CloudFormation detenga la implementación en la región actual y cancele la implementación en las regiones restantes.</p>
                                    </li></ul></div>
                            </li><li>
                                <div class="itemizedlist">
                                    <p>En <b>Region concurrency (Simultaneidad de región)</b>:</p>
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p>Seleccione <b>Sequential</b> (Secuencial) o <b>Parallel</b> (Paralela) a fin de determinar el orden de implementación de StackSets para las regiones especificadas. El orden <b>Sequential (Secuencial)</b> está seleccionado de forma predeterminada.</p>

                                    </li></ul></div>
                                <p>Seleccione <b>Siguiente</b>.</p>
                            </li></ol>
                        <div class="mediaobject">
                             
                                <img src="images/console-create-stackset-set-deploy-options.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                Página de opciones de implementación del conjunto&#xA;                            " style="max-width:100%" />
                             
                             
                        </div>
                    </li><li>
                        <p>En la página <b>Review</b>, revise sus opciones y las propiedades del conjunto de pilas. Para realizar cambios, seleccione <b>Edit (Editar)</b> en el área en la que desea cambiar las propiedades. Antes de crear el conjunto de pilas, debe rellenar la casilla de verificación en el área <b>Capabilities (Capacidades)</b> para reconocer que algunos de los recursos que está creando con el conjunto de pilas podrían necesitar nuevos recursos y permisos de IAM. Para obtener más información acerca de los permisos que puedan ser obligatorios, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-iam-template.html#using-iam-capabilities">Reconocimiento de recursos de IAM en plantillas de AWS CloudFormation</a> en esta guía. Cuando lo tenga todo listo para crear su conjunto de pilas, elija <b>Submit</b> (Enviar).</p>
                        <div class="mediaobject">
                             
                                <img src="images/console-create-stackset-review-capabilities.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                Reconocimiento de las capacidades necesarias&#xA;                            " style="max-width:100%" />
                             
                             
                        </div>
                    </li><li>
                        <p>AWS CloudFormation inicia la creación del conjunto de pilas. Vea el progreso y el estado de la creación de las pilas en la página de detalles del conjunto de pilas que se abre al elegir <b>Submit (Enviar)</b>.</p>
                        <div class="mediaobject">
                             
                                <img src="images/console-stackset-detail-operations.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                Pestaña Operations (Operaciones) de la página de detalles de los conjuntos de pilas&#xA;                            " style="max-width:100%" />
                             
                             
                        </div>
                    </li></ol></div>
             
             
                <h3 id="stacksets-getting-started-self-managed-cli">Creación de un conjunto de pilas con permisos autoadministrados mediante la AWS CLI</h3>
                <div class="procedure"><p>Al crear conjuntos de pilas utilizando los comandos de AWS CLI, ejecute dos comandos separados: <code class="code">create-stack-set</code> para cargar su plantilla y crear el contenedor del conjunto de pilas y <code class="code">create-stack-instances</code> para crear las pilas dentro de un conjunto de pilas. Comience ejecutando un comando de AWS CLI, <code class="code">create-stack-set</code>, para cargar la plantilla de AWS CloudFormation de muestra que activa AWS Config y, a continuación, comience a crear el conjunto de pilas.</p><ol><li>
                        <p>Abra la AWS CLI.</p>
                    </li><li>
                        <p>Ejecute el siguiente comando.</p>
                        <p>Para el parámetro <code class="code">--template-url</code>, proporcione la dirección URL del bucket de Amazon S3 en el que está almacenando la plantilla. En esta guía, usamos <code class="code">my-awsconfig-stackset</code> como el valor del parámetro <code class="code">--stack-set-name</code>. También activamos <code class="code">--managed-execution</code> para que StackSets lleve a cabo operaciones sin conflictos simultáneamente y ponga en cola las operaciones en conflicto. Una vez finalizadas las operaciones en conflicto, StackSets inicia las operaciones en cola por orden de solicitud.</p>
                        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si ya hay operaciones en ejecución o en cola, StackSets pone en cola todas las operaciones entrantes aunque no entren en conflicto.</p><p>No puede modificar la configuración de ejecución de su conjunto de pilas mientras haya operaciones en ejecución o en cola para ese conjunto de pilas.</p></div></div>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation create-stack-set \
  --stack-set-name my-awsconfig-stackset \
  --template-url https://s3.amazonaws.com/cloudformation-stackset-sample-templates-us-east-1/EnableAWSConfig.yml</code></pre>
                    </li><li>
                        <p>Una vez finalizado el comando <code class="code">create-stack-set</code>, ejecute el comando <code class="code">list-stack-sets</code> para ver el conjunto de pilas que se ha creado. Debería ver el nuevo conjunto de pilas en los resultados.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation list-stack-sets</code></pre>
                    </li><li>
                        <p>Ejecute el comando de AWS CLI <code class="code">create-stack-instances</code> para añadir instancias de pila al conjunto de pilas. En este tutorial, usamos <code class="code">us-west-2</code> y <code class="code">us-east-1</code> como los valores del parámetro <code class="code">--regions</code>.</p>
                        <p>Defina la tolerancia a fallos y el número máximo de cuentas simultáneas estableciendo <code class="code">FailureToleranceCount</code> en <code class="code">0</code> y <code class="code">MaxConcurrentCount</code> en <code class="code">1</code> en el parámetro <code class="code">--operation-preferences</code>, tal y como se muestra en el siguiente ejemplo. Para aplicar porcentajes en su lugar, utilice <code class="code">FailureTolerancePercentage</code> o <code class="code">MaxConcurrentPercentage</code>. A efectos de este tutorial, utilizamos el número, no el porcentaje.</p>
                        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>El valor <code class="code">MaxConcurrentCount</code> depende del valor de <code class="code">FailureToleranceCount</code>. <code class="code">MaxConcurrentCount</code> será como máximo, uno más que <code class="code">FailureToleranceCount</code>.</p></div></div>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation create-stack-instances \
  --stack-set-name my-awsconfig-stackset \
  --accounts '["<code class="replaceable">account_ID_1</code>","<code class="replaceable">account_ID_2</code>"]' \
  --regions '["<code class="replaceable">region_1</code>","<code class="replaceable">region_2</code>"]' \
  --operation-preferences FailureToleranceCount=0,MaxConcurrentCount=1</code></pre>
                        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>La simultaneidad de las implementaciones de instancias de StackSet en la operación depende del valor de <code class="code">FailureToleranceCount-MaxConcurrentCount</code> y es, como máximo, uno más que <code class="code">FailureToleranceCount</code>.</p></div></div>
                        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Espere hasta que se complete una operación antes de iniciar otra. Puede ejecutar una sola operación a la vez.</p></div></div>
                    </li><li>
                        <p>Compruebe que las instancias de pila se hayan creado correctamente. Ejecute <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeStackSetOperation.html">DescribeStackSetOperation</a></code> con el <code class="code">operation-id</code> que se devuelve como parte de la salida del paso 4.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation describe-stack-set-operation \
  --stack-set-name my-awsconfig-stackset \
  --operation-id <code class="replaceable">operation_ID</code></code></pre>
                    </li></ol></div>
             
         
            <h2 id="stacksets-orgs-associate-stackset-with-org">Creación de un conjunto de pilas con permisos administrados por servicios</h2>

            <div class="highlights" id="inline-topiclist"><h6>Temas</h6><ul><li><a href="#stacksets-orgs-considerations">Consideraciones al crear un conjunto de pilas con permisos administrados por servicios</a></li><li><a href="#stacksets-orgs-associate-stackset-with-org-console">Creación de un conjunto de pilas con permisos administrados por servicios mediante la consola de AWS CloudFormation</a></li><li><a href="#stacksets-orgs-associate-stackset-with-org-cli">Creación de un conjunto de pilas con permisos administrados por servicios mediante la AWS CLI</a></li></ul></div>

             
                <h3 id="stacksets-orgs-considerations">Consideraciones al crear un conjunto de pilas con permisos administrados por servicios</h3>

                <p>Antes de crear un conjunto de pilas con permisos administrados por servicios, tenga en cuenta lo siguiente:</p>

                <div class="itemizedlist">
                     
                     
                     
                     
                     
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Los conjuntos de pila con permisos administrados por servicios se crean en la cuenta de gestión, incluidos los conjuntos de pila creados por administradores delegados.</p>
                    </li><li class="listitem">
                        <p>El conjunto de pilas puede dirigirse a toda la organización o a las unidades organizativas (OU) especificadas. Si el conjunto de pilas se dirige a su organización, también se dirige a todas las cuentas de todas las unidades organizativas de la organización. Si el conjunto de pilas se dirige a unidades organizativas especificadas, también se dirige a todas las cuentas en esas unidades organizativas.</p>
                    </li><li class="listitem">
                        <p>Si el conjunto de pilas se dirige a una unidad organizativa principal, el conjunto de pilas también se dirige a cualquier unidad organizativa secundaria.</p>
                    </li><li class="listitem">
                        <p>Varios conjuntos de pila pueden dirigirse a la misma organización o unidad organizativa.</p>
                    </li><li class="listitem">
                        <p>El conjunto de pilas no puede dirigirse a cuentas fuera de la organización.</p>
                    </li><li class="listitem">
                        <p>El conjunto de pilas no puede implementar pilas anidadas.</p>
                    </li><li class="listitem">
                        <p>StackSets no implementa instancias de pila en la cuenta de administración de la organización, incluso si la cuenta de administración está en su organización o en una unidad organizativa de su organización.</p>
                    </li><li class="listitem">
                        <p>La implementación automática se establece en el nivel de conjunto de pilas. No puede ajustar las implementaciones automáticas selectivamente para unidades organizativas, cuentas o regiones.</p>
                    </li><li class="listitem">
                        <p>Los permisos de la entidad principal de IAM (usuario, rol o grupo) que utiliza para iniciar sesión en la cuenta de administración determinan si está autorizado para la implementación con StackSets. Para ver un ejemplo de una política de IAM que concede permiso de implementación en una organización, consulte <a href="./using-iam-template.html#resource-level-permissions-service-managed-stack-set">Política de ejemplo que concede permisos de conjuntos de pilas administrados por servicio</a>.</p>
                    </li><li class="listitem">
                        <p>Los administradores delegados tienen permisos completos para implementar en cuentas de la organización. La cuenta de administración no puede limitar los permisos del administrador delegado para la implementación en unidades de organización específicas o para la realización de operaciones específicas de conjuntos de pilas.</p>
                    </li></ul></div>
             

             
                <h3 id="stacksets-orgs-associate-stackset-with-org-console">Creación de un conjunto de pilas con permisos administrados por servicios mediante la consola de AWS CloudFormation</h3>

                <div class="procedure"><ol><li>
                        <p>Abra la consola de AWS CloudFormation en <a href="https://console.aws.amazon.com/cloudformation" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                    </li><li>
                        <p>En el panel de navegación, seleccione <b>StackSets (Conjuntos de pilas)</b>.</p>
                    </li><li>
                        <p>En la parte superior de la página <b>StackSets (Conjuntos de pilas)</b>, seleccione <b>Create StackSet (Crear conjunto de pilas)</b>.</p>
                    </li><li>
                        <p>En <b>Prepare template (Preparar plantilla)</b>, elija <b>Template is ready (La plantilla está lista)</b>.</p>
                    </li><li>
                        <p>En <b>Especificar plantilla</b>, elija especificar la dirección URL del bucket de S3 que contiene la plantilla de pila o cargar un archivo de plantilla de pila. Elija <b>Siguiente</b>.</p>
                    </li><li>
                        <p>En la página <b>Especificar detalles de StackSet</b> proporcione un nombre para el conjunto de pilas, especifique los parámetros y, a continuación, elija <b>Siguiente</b>.</p>
                    </li><li>
                        <p>En la página <b>Configurar opciones de StackSet</b>, en <b>Etiquetas</b>, especifique las etiquetas que se aplicarán a los recursos de la pila.</p>
                    </li><li>
                        <p>En <b>Permisos</b>, elija <b>Permisos administrados por servicios</b>.</p>
                        <p>Si el acceso de confianza con AWS Organizations está deshabilitado, aparecerá un banner. Se requiere acceso de confianza para crear o actualizar un conjunto de pilas con permisos administrados por servicios. Solo el administrador de la cuenta de administración de la organización tiene permisos para <a href="./stacksets-orgs-activate-trusted-access.html">Activar el acceso de confianza con AWS Organizations</a>.</p>
                        <div class="mediaobject">
                             
                                <img src="images/console-stackset-service-managed-permissions.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                Activar banner de acceso de confianza.&#xA;                            " style="max-width:100%" />
                             
                             
                        </div>
                    </li><li>
                        <p>Para <b>Execution configuration</b> (Configuración de ejecución), elija <b>Active</b> (Activo) para que StackSets lleve a cabo operaciones sin conflictos simultáneamente y ponga en cola las operaciones en conflicto. Una vez finalizadas las operaciones en conflicto, StackSets inicia las operaciones en cola por orden de solicitud.</p>
                        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si ya hay operaciones en ejecución o en cola, StackSets pone en cola todas las operaciones entrantes aunque no entren en conflicto.</p><p>No puede modificar la configuración de ejecución de su conjunto de pilas mientras haya operaciones en ejecución o en cola para ese conjunto de pilas.</p></div></div>
                    </li><li>
                        <p>Seleccione <b>Siguiente</b> para continuar y activar el acceso de confianza si aún no está activado.</p>

                    </li><li>
                        <p>En la página <b>Establecer opciones de implementación</b> en <b>Destinos de implementación</b>, seleccione las cuentas de la organización en las que desee realizar la implementación.</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Elija <b>Implementar en la organización</b> para realizar la implementación en todas las cuentas de la organización.</p>
                                <div class="mediaobject">
                                     
                                        <img src="images/console-stackset-deploy-to-org.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                        Implemente instancias de pila en todas las cuentas de su organización.&#xA;                                    " style="max-width:100%" />
                                     
                                     
                                </div>
                            </li><li class="listitem">
                                <p>Elija <b>Implementar en unidades organizativas (OU)</b> para implementarlas en todas las cuentas de unidades organizativas específicas. Elija <b>Añadir una unidad organizativa</b>, y, a continuación, pegue el ID de unidad organizativa de destino en el cuadro de texto. Repita para cada nueva unidad organizativa de destino.</p>
                                <div class="mediaobject">
                                     
                                        <img src="images/console-stackset-deploy-to-organizational-units.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                        Implemente instancias de pila en todas las cuentas de unidades organizativas seleccionadas de su organización.&#xA;                                    " style="max-width:100%" />
                                     
                                     
                                </div>
                            </li></ul></div>
                    </li><li>
                        <p>En <b>Implementación automática</b>, elija si StackSets se implementará automáticamente en cuentas que se añadirán a la organización u unidades organizativas de destino en el futuro.</p>
                        <div class="mediaobject">
                             
                                <img src="images/console-stackset-auto-deploy.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                Configuración de implementación automática para conjuntos de pilas con permisos administrados por servicios.&#xA;                            " style="max-width:100%" />
                             
                             
                        </div>
                    </li><li>
                        <p>Si ha habilitado la implementación automática, en <b>Comportamiento de eliminación de cuentas</b>, elija si los recursos de pila se conservan o eliminan cuando se quita una cuenta de una organización u unidad organizativa de destino.</p>
                        <div class="mediaobject">
                             
                                <img src="images/console-stackset-account-removal-retain.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                Configuración de comportamiento de eliminación de cuentas para conjuntos de pilas con permisos administrados por servicios.&#xA;                            " style="max-width:100%" />
                             
                             
                        </div>
                        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Con la opción <b>Conservar pilas</b> seleccionadas, las instancias de pila se eliminan del conjunto de pilas, pero las pilas y sus recursos asociados se conservan. Los recursos permanecen en su estado actual, pero ya no formarán parte del conjunto de pilas.</p></div></div>
                    </li><li>
                        <p>En <b>Regiones de implementación</b>, seleccione las regiones en las que desee implementar instancias de pila. Elija <b>Siguiente</b>.</p>
                    </li><li>
                        <p>En la página <b>Review</b> (Revisar), compruebe que StackSet se implemente en las cuentas correctas en las regiones adecuadas y, a continuación, elija <b>Create StackSet</b> (Crear StackSet).</p>
                    </li></ol></div>

                <p>Se abrirá la página <b>Detalles de StackSet details</b>. Puede ver el progreso y el estado de la creación de las pilas en su conjunto de pilas.</p>

             
             
                <h3 id="stacksets-orgs-associate-stackset-with-org-cli">Creación de un conjunto de pilas con permisos administrados por servicios mediante la AWS CLI</h3>

                <p>Cuando se crean conjuntos de pilas mediante AWS CLI, se ejecutan dos comandos independientes. Durante <code class="code">create-stack-set</code>, se carga la plantilla, se crea el contenedor del conjunto de pilas y se administran implementaciones automáticas. Durante <code class="code">create-stack-instances</code>, se crean instancias de pila en cuentas de destino específicas.</p>

                <p>Al actuar como administrador delegado, debe establecer el parámetro <code class="code">--call-as</code> en <code class="code">DELEGATED_ADMIN</code> cada vez que ejecute un comando StackSets.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">--call-as <code class="replaceable">DELEGATED_ADMIN</code></code></pre>
                <p>Los conjuntos de pila creados por un administrador delegado se crean en la cuenta de gestión de la organización.</p>

                <div class="procedure"><ol><li>
                        <p>Abra la AWS CLI.</p>
                    </li><li>
                        <p>Ejecute el comando <code class="code">create-stack-set</code>.</p>
                        <p>En el siguiente ejemplo, habilitamos las implementaciones automáticas para permitir a StackSets llevar a cabo la implementación automática en cuentas que se agregan a la organización u unidades organizativas de destino en el futuro. También retenemos recursos de pila cuando se elimina una cuenta de una organización o unidad organizativa de destino. También activamos <code class="code">--managed-execution</code> para que StackSets lleve a cabo operaciones sin conflictos simultáneamente y ponga en cola las operaciones en conflicto. Una vez finalizadas las operaciones en conflicto, StackSets inicia las operaciones en cola por orden de solicitud.</p>
                        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si ya hay operaciones en ejecución o en cola, StackSets pone en cola todas las operaciones entrantes aunque no entren en conflicto.</p><p>No puede modificar la configuración de ejecución de su conjunto de pilas mientras haya operaciones en ejecución o en cola para ese conjunto de pilas.</p></div></div>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation create-stack-set \
  --stack-set-name <code class="replaceable">StackSet_myApp</code> \
  --template-url <code class="replaceable">https://s3.us-west-2.amazonaws.com/cloudformation-templates-us-west-2/MyApp.template</code> \
  <b>--permission-model <code class="replaceable">SERVICE_MANAGED</code> \
  --auto-deployment Enabled=<code class="replaceable">true</code>,RetainStacksOnAccountRemoval=<code class="replaceable">true</code></b></code></pre>
                    </li><li>
                        <p>Una vez finalizado el comando <code class="code">create-stack-set</code>, ejecute el comando <code class="code">list-stack-sets</code> para confirmar el conjunto de pilas que se ha creado. El nuevo conjunto de pilas aparece en los resultados.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation list-stack-sets</code></pre>
                        <div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Si establece el <code class="code">--call-as</code> parámetro <code class="code">DELEGATED_ADMIN</code> mientras ha iniciado sesión en su cuenta de miembro, <code class="code">list-stack-sets</code> devuelve todos los conjuntos de pilas con permisos administrados por servicios en la organización cuenta de administración.</p>
                            </li><li class="listitem">
                                <p>Si establece el parámetro <code class="code">--call-as</code> en <code class="code">SELF</code> mientras mantiene una sesión iniciada en una cuenta de AWS, <code class="code">list-stack-sets</code> devuelve todos los conjuntos de pilas autoadministrados de su cuenta de AWS.</p>
                            </li><li class="listitem">
                                <p>Si establece el <code class="code">--call-as</code> parámetro <code class="code">SELF</code> mientras ha iniciado sesión en la organización cuenta de administración, <code class="code">list-stack-sets</code> devuelve todos los conjuntos de pilas de la organización cuenta de administración.</p>
                            </li></ul></div>
                    </li><li>
                        <p>Ejecute el comando de <code class="code">create-stack-instances</code> para añadir instancias de pila al conjunto de pilas. Para el parámetro <code class="code">--deployment-targets</code>, especifique el ID raíz de la organización que se va a implementar en todas las cuentas de la organización o especifique el ID de unidad organizativa para implementar en todas las cuentas de esas unidades organizativas. En este ejemplo, especificamos unidades organizativas con ID <code class="code">ou-rcuk-1x5j1lwo</code> y <code class="code">ou-rcuk-slr5lh0a</code>.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation create-stack-instances --stack-set-name <code class="replaceable">StackSet_myApp</code> <b>--deployment-targets OrganizationalUnitIds='["<code class="replaceable">ou-rcuk-1x5j1lwo</code>", "<code class="replaceable">ou-rcuk-slr5lh0a</code>"]'</b> --regions '["<code class="replaceable">eu-west-1</code>"]'</code></pre>
                        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Espere hasta que se complete una operación antes de iniciar otra. Puede ejecutar una sola operación a la vez.</p></div></div>
                    </li><li>
                        <p>Mediante el elemento <code class="code">operation-id</code> que se ha devuelto como parte de la salida <code class="code">create-stack-instances</code> en el paso 4, ejecute <code class="code">describe-stack-set-operation</code> para comprobar que las instancias de la pila se han creado correctamente.</p>
                    </li></ol></div>

             
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./stacksets-getting-started.html">Introducción</div><div id="next" class="next-link" accesskey="n" href="./stacksets-update.html">Actualizar el conjunto de pilas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>