<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Creación de condiciones de espera en una plantilla - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-cfn-waitcondition" /><meta name="default_state" content="using-cfn-waitcondition" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="description" content="Cree una condición de espera en una plantilla para coordinar la creación de los recursos de la pila o realizar un seguimiento del progreso de un proceso de configuración." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Creación de condiciones de espera en una plantilla" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Creación de condiciones de espera en una plantilla - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabajo con plantillas de AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Explicaciones",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/CHAP_Using.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Creación de condiciones de espera en una plantilla",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/CHAP_Using.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#using-cfn-waitconditionhandle">Uso de un identificador de condición de espera</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-cfn-waitcondition">Creación de condiciones de espera en una plantilla</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Con los recursos de Amazon EC2 y Auto Scaling recomendamos que use un atributo CreationPolicy en lugar de condiciones de espera. Agregue un atributo CreationPolicy a esos recursos y use el script de ayuda cfn-signal para señalar que el proceso de creación de instancias ha finalizado satisfactoriamente.</p><p>Para obtener más información, consulte <a href="./aws-attribute-creationpolicy.html">Atributo CreationPolicy</a> o <a href="./deploying.applications.html">Implementación de aplicaciones en Amazon EC2 con AWS CloudFormation</a>.</p></div></div><p>Con el recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-waitconditionhandle.html"><code class="code">AWS::CloudFormation::WaitConditionHandle</code></a> y con el atributo <a href="./aws-attribute-creationpolicy.html">Atributo CreationPolicy</a>, puede hacer lo siguiente:</p><div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Coordinar la creación de recursos de la pila con otras acciones de configuración que son externas a la creación de la pila</p>
         </li><li class="listitem">
            <p>Realizar un seguimiento del estado de un proceso de configuración</p>
         </li></ul></div><p>Por ejemplo, puede comenzar la creación de otro recurso después de que la configuración de la aplicación esté parcialmente completa o puede enviar señales durante un proceso de instalación y configuración para realizar un seguimiento de su progreso.</p><h2 id="using-cfn-waitconditionhandle">Uso de un identificador de condición de espera</h2>
            
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si utiliza la característica <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-endpoints.html">punto de conexión de VPC</a>, los recursos en la VPC que responden a condiciones de espera tienen que tener acceso a buckets Amazon Simple Storage Service (Amazon S3) específicos de AWS CloudFormation. Los recursos deben enviar respuestas de condición de espera a una URL de Amazon S3 prefirmada. Si no puede enviar las respuestas a Amazon S3, AWS CloudFormation no recibirá una respuesta y la operación de pila producirá un error. Para obtener más información, consulte <a href="./cfn-vpce-bucketnames.html">Configuración de puntos de enlace de la VPC para AWS CloudFormation</a> y <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies-vpc-endpoint.html">Ejemplo de políticas de bucket para puntos de enlace de la VPC de Amazon S3</a>.</p></div></div>
            <p>Puede utilizar la condición de espera y el identificador de condición de espera para hacer que AWS CloudFormation detenga la creación de una pila y espere a recibir una señal antes de que siga creando la pila. Por ejemplo, es posible que le interese descargar y configurar aplicaciones en una instancia Amazon EC2 antes de considerar la creación la instancia Amazon EC2 completa.</p>
            <p>La siguiente lista ofrece un resumen de cómo funciona una condición de espera con un identificador de condición de espera:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>AWS CloudFormation crea una condición de espera igual que cualquier otro recurso. Cuando AWS CloudFormation crea una condición de espera, informa el estado de la condición de espera como CREATE_IN_PROGRESS y espera hasta que recibe el número necesario de señales de éxito o hasta que ha vencido el periodo de tiempo de espera de la condición de espera. Si AWS CloudFormation recibe el número necesario de señales de éxito antes de que venza el periodo del tiempo de espera, sigue creando la pila. De lo contrario, establece el estado de la condición de espera en <code class="code">CREATE_FAILED</code> y restaura la pila al estado anterior.</p>
                </li><li class="listitem">
                    <p>La propiedad <code class="code">Timeout</code> determina cuánto tiempo AWS CloudFormation espera el número necesario de señales de éxito. <code class="code">Timeout</code> es una propiedad con un límite mínimo, lo que quiere decir que el tiempo de espera comienza a partir del momento en que se especifique, no antes, aunque también puede producirse poco después. El tiempo máximo que puede especificar es de 43200 segundos (12 horas).</p>
                </li><li class="listitem">
                    <p>Normalmente, desea que una condición de espera comience inmediatamente después de la creación de un recurso específico, como, por ejemplo, una instancia de Amazon EC2, instancia de base de datos de RDS o grupo de Auto Scaling. Para ello, agregue el <a href="./aws-attribute-dependson.html">atributo DependsOn</a> a una condición de espera. Cuando agrega un atributo <code class="code">DependsOn</code> a una condición de espera, especifica que la condición se cree únicamente después de se haya completado la creación de un recurso determinado. Cuando se crea la condición de espera, AWS CloudFormation comienza el periodo de tiempo de espera y espera las señales de éxito.</p>
                </li><li class="listitem">
                    <p>También puede utilizar el atributo <code class="code">DependsOn</code> en otros recursos. Por ejemplo, es posible que desee que se cree una instancia de base de datos de Amazon RDS y se configure una base de datos en esa instancia de base de datos antes de crear las instancias de EC2 que utilizan esa base de datos. En este caso, tiene que crear una condición de espera que tiene un atributo <code class="code">DependsOn</code> que especifica la instancia de la base de datos, así como también crear recursos de instancias de EC2 que tienen atributos <code class="code">DependsOn</code> que especifican la condición de espera. Esto garantizaría que las instancias de EC2 solo se creen directamente una vez que la instancia de base de datos y la condición de espera se han completado.</p>
                </li><li class="listitem">
                    <p>AWS CloudFormation debe recibir un número especificado de señales de éxito para una condición de espera antes de configurar el estado de esa condición de espera en <code class="code">CREATE_COMPLETE</code> tras la creación de la pila. La propiedad <code class="code">Count</code> de la condición de espera especifica el número de señales de éxito. Si no se establece ninguna, el valor predeterminado es 1.</p>
                </li><li class="listitem">
                    <p>Una condición de espera requiere que un indicador de condición de espera configure una URL prefirmada que se utiliza con el mecanismo de señalización. La URL prefirmada le permite enviar una señal sin tener que proporcionar sus credenciales de AWS. Usted utiliza dicha URL prefirmada para señalar el éxito o el error, que se encapsula en una instrucción JSON. Para el formato de dicha instrucción JSON, consulte <a href="#using-cfn-waitcondition-signaljson">Formato JSON de señal de condición de espera</a>.</p>
                </li><li class="listitem">
                    <p>Si una condición de espera recibe el número necesario de señales de éxito (definido en la propiedad Count [Recuento]) antes de que venza el periodo del tiempo de espera, AWS CloudFormation señala la condición de espera como <code class="code">CREATE_COMPLETE</code> y sigue creando la pila. De lo contrario, AWS CloudFormation falla la condición de espera y restaura la pila al estado anterior (por ejemplo, si el periodo de tiempo de espera vence sin las señales de éxito necesarias o si se ha recibido una señal de error).</p>
                </li></ul></div>
            <div class="procedure"><h6>Para utilizar una condición de espera en una pila:</h6><ol><li>
                    <p>Declare un recurso <code class="code">AWS::CloudFormation::WaitConditionHandle</code> en la plantilla de la pila. Un identificador de condición de espera no tiene propiedades; sin embargo, una referencia a un recurso <code class="code">WaitConditionHandle</code> se resuelve en una URL prefirmada que puede utilizar para señalar el éxito o el error de <code class="code">WaitCondition</code>. Por ejemplo:</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myWaitHandle" : <span>{</span>
     "Type" : "AWS::CloudFormation::WaitConditionHandle",
     "Properties" : <span>{</span>
     }
}</code></pre>
                </li><li>
                    <p>Declare un recurso <code class="code">AWS::CloudFormation::WaitCondition</code> en la plantilla de la pila. Un recurso <code class="code">WaitCondition</code> tiene dos propiedades obligatorias: <code class="code">Handle</code> es una referencia a un <code class="code">WaitConditionHandle</code> declarado en la plantilla y <code class="code">Timeout</code> es el número de segundos que AWS CloudFormation debe esperar. Si lo desea, puede configurar la propiedad <code class="code">Count</code>, que determina el número de señales de éxito que la condición de espera debe recibir antes de que AWS CloudFormation pueda reanudar la creación de la pila.</p>
                    <p>Para controlar cuándo se activa la condición de espera, se establece un atributo <code class="code">DependsOn</code> en la condición de espera. Una cláusula <code class="code">DependsOn</code> asocia un recurso con la condición de espera. Después de que AWS CloudFormation cree el recurso <code class="code">DependsOn</code>, bloquea cualquier creación de recursos de pila hasta que se produzca cualquiera de los siguientes eventos: a) vence el periodo de tiempo de espera, b) se recibe el número necesario de señales de éxito o c) se recibe una señal de error.</p>
                    <p>A continuación se muestra un ejemplo de una condición de espera que comienza después de la creación del recurso <code class="code">Ec2Instance</code>, utiliza el recurso <code class="code">myWaitHandle</code> como el <code class="code">WaitConditionHandle</code>, tiene un tiempo de espera de 4500 segundos y cuya propiedad <code class="code">Count</code> predeterminada es 1 (dado que no se especifica ninguna propiedad <code class="code">Count</code>):</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myWaitCondition" : <span>{</span>
    "Type" : "AWS::CloudFormation::WaitCondition",
    "DependsOn" : "Ec2Instance",
    "Properties" : <span>{</span>
        "Handle" : <span>{</span> "Ref" : "myWaitHandle" },
        "Timeout" : "4500"
    }
}</code></pre>
                </li><li>
                    <p>Obtenga la URL prefirmada para utilizarla para señalización.</p>
                    <p>En la plantilla, la URL prefirmada puede recuperarse pasando el nombre lógico del recurso <code class="code">AWS::CloudFormation::WaitConditionHandle</code> a la función intrínseca Ref. Por ejemplo, puede utilizar la propiedad <code class="code">UserData</code> en los recursos <code class="code">AWS::EC2::Instance</code> para pasar la URL prefirmada a las instancias de Amazon EC2 para que los scripts o aplicaciones que se ejecutan en estas instancias puedan señalar el éxito o el error a AWS CloudFormation:</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"UserData" : <span>{</span>
   "Fn::Base64" : <span>{</span>
       "Fn::Join" : [ "", ["SignalURL=", <span>{</span> "Ref" : "myWaitHandle" } ] ]
   }
}</code></pre>
                    <p>Nota: En la AWS Management Console o las herramientas de línea de comandos de AWS CloudFormation, la URL prefirmada se muestra con el ID físico de la condición de espera del recurso del administrador de condición de espera.</p>
                </li><li>
                    <p>Seleccione un método para detectar cuándo pasa la pila a la condición de espera.</p>
                    <p>Si crea la pila con las notificaciones habilitadas, AWS CloudFormation publica una notificación para cada evento de pila al tema especificado. Si usted o su aplicación se suscriben a ese tema, puede monitorizar las notificaciones para el evento de creación del identificador de la condición de espera y recuperar la URL prefirmada del mensaje de notificación.</p>
                    <p>También puede supervisar los eventos de la pila mediante la AWS Management Console, las herramientas de línea de comandos de AWS CloudFormation o la API de AWS CloudFormation.</p>
                </li><li>
                    <p>Utilice la URL prefirmada para señalar el éxito o el error.</p>
                    <p>Para enviar una señal, envía un mensaje de solicitud HTTP usando la URL prefirmada. El método de solicitudes debe ser <code class="code">PUT</code> y el encabezado <code class="code">Content-Type</code> debe ser una cadena vacía u omitirse. El mensaje de solicitud debe ser una estructura JSON con la forma especificada en <a href="#using-cfn-waitcondition-signaljson">Formato JSON de señal de condición de espera</a>.</p>
                    <p>Debe enviar el número de señales de éxito que se especifica en la propiedad <code class="code">Count</code> para que AWS CloudFormation continúe con la creación de la pila. Si la propiedad <code class="code">Count</code> es superior a 1, el valor <code class="code">UniqueId</code> para cada señal debe ser único entre todas las señales enviadas a una condición de espera en particular. El <code class="code">UniqueId</code> es una cadena alfanumérica arbitraria.</p>
                    <p>Un comando <code class="code">curl</code> es una forma de enviar una señal. El siguiente ejemplo muestra una línea de comandos <code class="code">curl</code> que señala el éxito a una condición de espera.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">curl -T /tmp/a \
  "https://cloudformation-waitcondition-test.s3.amazonaws.com/arn%3Aaws%3Acloudformation%3A<span>us-east-2</span>%3A034017226601%3Astack%2Fstack-gosar-20110427004224-test-stack-with-WaitCondition--VEYW%2Fe498ce60-70a1-11e0-81a7-5081d0136786%2FmyWaitConditionHandle?Expires=1303976584&amp;AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&amp;Signature=ik1twT6hpS4cgNAw7wyOoRejVoo%3D"</code></code></pre>
                    <p>donde el archivo /tmp/a contiene la siguiente estructura JSON:</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">
<span>{</span>
   "Status" : "SUCCESS",
   "Reason" : "Configuration Complete",
   "UniqueId" : "ID1234",
   "Data" : "Application has completed configuration."
}</code></pre>
                    <p>En este ejemplo se muestra una línea de comandos <code class="code">curl</code> que envía la misma señal de éxito, salvo que envía la estructura JSON como parámetro en la línea de comandos.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">curl -X PUT \
  -H 'Content-Type:' --data-binary '<span>{</span>"Status" : "SUCCESS","Reason" : "Configuration Complete","UniqueId" : "ID1234","Data" : "Application has completed configuration."}' \
  "https://cloudformation-waitcondition-test.s3.amazonaws.com/arn%3Aaws%3Acloudformation%3A<span>us-east-2</span>%3A034017226601%3Astack%2Fstack-gosar-20110427004224-test-stack-with-WaitCondition--VEYW%2Fe498ce60-70a1-11e0-81a7-5081d0136786%2FmyWaitConditionHandle?Expires=1303976584&amp;AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&amp;Signature=ik1twT6hpS4cgNAw7wyOoRejVoo%3D"</code></code></pre>
                </li></ol></div>
            <h3 id="using-cfn-waitcondition-signaljson">Formato JSON de señal de condición de espera</h3>
                
                <p>Cuando señala una condición de espera, tiene que utilizar el siguiente formato JSON:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Status" : "StatusValue",
  "UniqueId" : "Some UniqueId",
  "Data" : "Some Data",
  "Reason" : "Some Reason"
}</code></pre>
                <p>Donde:</p>
                <p><em>StatusValue</em> tiene que ser uno de los siguientes valores:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><em>SUCCESS</em> indica una señal de éxito.</p>
                    </li><li class="listitem">
                        <p><em>FAILURE</em> indica una señal de error y desencadena una condición de espera con error y una restauración de pila.</p>
                    </li></ul></div>
                <p><em><code class="code">UniqueId</code></em> identifica la señal para AWS CloudFormation. Si la propiedad <code class="code">Count</code> de la condición de espera es superior a 1, el valor <code class="code">UniqueId</code> debe ser único en todas las señales enviadas para una determinada condición de espera; de lo contrario, AWS CloudFormation considerará la señal una retransmisión de la señal enviada con anterioridad con el mismo <code class="code">UniqueId</code> y pasará por alto la señal.</p>
                <p><em><code class="code">Data</code></em> es cualquier información que desea devolver con la señal. Es posible obtener acceso al valor <code class="code">Data</code> llamando a la <a href="./intrinsic-function-reference-getatt.html">función Fn::GetAtt</a> dentro de la plantilla. Por ejemplo, si crea el siguiente valor de salida para la condición de espera <code class="code">mywaitcondition</code>, puede utilizar el comando <code class="code">aws cloudformation describe-stacks</code>, la operación <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeStacks.html"><code class="code">DescribeStacks</code></a> de la API o la pestaña <b>Salidas</b> de la consola de AWS CloudFormation para ver los <code class="code">Data</code> enviados mediante señales válidas enviadas a AWS CloudFormation: </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">
"WaitConditionData" : <span>{</span>
  "Value" : <span>{</span> "Fn::GetAtt" : [ "mywaitcondition", "Data" ]},
  "Description" : "The data passed back as part of signalling the WaitCondition"
},
            </code></pre>
                <p>La <a href="./intrinsic-function-reference-getatt.html">función Fn::GetAtt</a> devuelve los valores <code class="code">UniqueId</code> y <code class="code">Data</code> como un par nombre-valor dentro de una estructura JSON. A continuación se muestra un ejemplo del atributo <code class="code">Data</code> devuelto por el valor de salida <code class="code">WaitConditionData</code> definido anteriormente:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>"Signal1":"Application has completed configuration."}</code></pre>
                <p><em>Reason</em> es una cadena sin ninguna restricción en su contenido salvo la conformidad de JSON.</p>
             
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./deploying.applications.html">Implementar aplicaciones </div><div id="next" class="next-link" accesskey="n" href="./CHAP_TemplateQuickRef.html">Fragmentos de plantillas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>