<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Administración de grupos de seguridad con AWS CloudFormation - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="quickref-ec2-sg" /><meta name="default_state" content="quickref-ec2-sg" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" /><meta name="description" content="Utilice estos fragmentos de plantilla de ejemplo para gestionar grupos de seguridad e instancias de Amazon EC2 con AWS CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Administración de grupos de seguridad con AWS CloudFormation" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Administración de grupos de seguridad con AWS CloudFormation - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabajo con plantillas de AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Fragmentos de plantillas",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/CHAP_TemplateQuickRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Fragmentos de plantillas de Amazon EC2 CloudFormation",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Administración de grupos de seguridad con AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#quickref-ec2-instances-associate-security-group">Asociación de una instancia de Amazon EC2 con un grupo de seguridad</a><a href="#quickref-ec2-instances-ingress">Creación de grupos de seguridad con reglas de entrada</a><a href="#scenario-ec2-security-group-elbingress">Creación de un equilibrador de carga elástica con una regla de ingreso de grupos de seguridad</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter><filter label="" id=""></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="quickref-ec2-sg">Administración de grupos de seguridad con AWS CloudFormation</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Los siguientes fragmentos muestran cómo usar AWS CloudFormation para administrar los grupos de seguridad y las instancias de EC2 para controlar el acceso a sus recursos de AWS.</p><div class="highlights" id="inline-topiclist"><h6>Categorías de fragmentos</h6><ul><li><a href="#quickref-ec2-instances-associate-security-group">Asociación de una instancia de Amazon EC2 con un grupo de seguridad</a></li><li><a href="#quickref-ec2-instances-ingress">Creación de grupos de seguridad con reglas de entrada</a></li><li><a href="#scenario-ec2-security-group-elbingress">Creación de un equilibrador de carga elástica con una regla de ingreso de grupos de seguridad</a></li></ul></div>
            <h2 id="quickref-ec2-instances-associate-security-group">Asociación de una instancia de Amazon EC2 con un grupo de seguridad</h2>
            <p>Los siguientes fragmentos de ejemplo muestran cómo asociar una instancia de Amazon EC2 a un grupo de seguridad de Amazon VPC predeterminado mediante AWS CloudFormation.</p>
            <div class="highlights" id="inline-topiclist"><h6>Fragmentos de código de ejemplo</h6><ul><li><a href="#using-cfn-getatt-default-values">Asociación de una instancia de Amazon EC2 con un grupo de seguridad de VPN predeterminado</a></li><li><a href="#scenario-ec2-volumeattachment">Creación de una instancia de Amazon EC2 con un volumen y un grupo de seguridad adjuntos</a></li></ul></div>
             
                <h3 id="using-cfn-getatt-default-values">Asociación de una instancia de Amazon EC2 con un grupo de seguridad de VPN predeterminado</h3>
                <p>El siguiente fragmento crea una VPC de Amazon, una subred dentro de la VPC y una instancia de Amazon EC2. La VPC se crea con un recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-vpc.html">AWS::EC2::VPC</a>. El rango de direcciones IP de la VPC se define en la plantilla más grande y el parámetro <code class="code">MyVPCCIDRRange</code> hace referencia a él.</p>
                <p>Se crea una subred dentro de la VPC con un recurso de subred <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-subnet.html">AWS::EC2::Subnet</a>. La subred está asociada a la VPC, a la que se hace referencia como <code class="code">MyVPC</code>.</p>
                <p>Se lanza una instancia de EC2 dentro de la VPC y la subred mediante un recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-instance.html">AWS::EC2::Instance</a>. Este recurso especifica la imagen de máquina de Amazon (AMI) que se utilizará para lanzar la instancia, la subred en la que se ejecutará la instancia y el grupo de seguridad que se asociará a la instancia. La función <code class="code">Fn::FindInMap</code> se utiliza para recuperar valores de la asignación de <code class="code">AWSRegionToAMI</code> definida en la plantilla a fin de determinar el <code class="code">ImageId</code> para el recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-instance.html">AWS::EC2::Instance</a>. </p>
                <p>El ID del grupo de seguridad se obtiene mediante la función <code class="code">Fn::GetAtt</code>, que recupera el grupo de seguridad predeterminado del recurso <code class="code">MyVPC</code>. </p>
                <p>La instancia se coloca dentro del recurso <code class="code">MySubnet</code> definido en el fragmento. </p>

                <p>Al crear una VPC con AWS CloudFormation, AWS crea automáticamente recursos predeterminados dentro de la VPC, incluido un grupo de seguridad predeterminado. Sin embargo, al definir una VPC dentro de una plantilla de AWS CloudFormation, es posible que no tenga acceso a los ID de estos recursos predeterminados al crear la plantilla. Para acceder a los recursos predeterminados especificados en la plantilla y utilizarlos, puede utilizar funciones intrínsecas, como <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a>. Esta función le permite trabajar con los recursos predeterminados que AWS CloudFormation crea automáticamente.</p>
                <div id="JSON" name="JSON" class="section langfilter">
                    <h4 id="quickref-ec2-example-15.json">JSON</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"MyVPC": <span>{</span>
    "Type": "AWS::EC2::VPC",
    "Properties": <span>{</span>
        "CidrBlock": <span>{</span>
            "Ref": "MyVPCCIDRRange"
        },
        "EnableDnsSupport": false,
        "EnableDnsHostnames": false,
        "InstanceTenancy": "default"
    }
},
"MySubnet": <span>{</span>
    "Type": "AWS::EC2::Subnet",
    "Properties": <span>{</span>
        "CidrBlock": <span>{</span>
            "Ref": "MyVPCCIDRRange"
        },
        "VpcId": <span>{</span>
            "Ref": "MyVPC"
        }
    }
},
"MyInstance": <span>{</span>
    "Type": "AWS::EC2::Instance",
    "Properties": <span>{</span>
        "ImageId": <span>{</span>
            "Fn::FindInMap": [
                "AWSRegionToAMI",
                <span>{</span>
                    "Ref": "AWS::Region"
                },
                "64"
            ]
        },
        "SecurityGroupIds": [
            <span>{</span>
                "Fn::GetAtt": [
                    "MyVPC",
                    "DefaultSecurityGroup"
                ]
            }
        ],
        "SubnetId": <span>{</span>
            "Ref": "MySubnet"
        }
    }
}</code></pre>
                </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h4 id="quickref-ec2-example-15.yaml">YAML</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyVPC:
  Type: AWS::EC2::VPC
  Properties:
    CidrBlock:
      Ref: MyVPCCIDRRange
    EnableDnsSupport: false
    EnableDnsHostnames: false
    InstanceTenancy: default
MySubnet:
  Type: AWS::EC2::Subnet
  Properties:
    CidrBlock:
      Ref: MyVPCCIDRRange
    VpcId:
      Ref: MyVPC
MyInstance:
  Type: AWS::EC2::Instance
  Properties:
    ImageId:
      Fn::FindInMap:
        - AWSRegionToAMI
        - Ref: AWS::Region
        - "64"
    SecurityGroupIds:
      - Fn::GetAtt:
          - MyVPC
          - DefaultSecurityGroup
    SubnetId:
      Ref: MySubnet</code></pre>
                </div>
             
             
                <h3 id="scenario-ec2-volumeattachment">Creación de una instancia de Amazon EC2 con un volumen y un grupo de seguridad adjuntos</h3>
                <p>El siguiente fragmento de código crea una instancia de Amazon EC2 con un recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>, que se inicia desde una AMI designada. La instancia está asociada a un grupo de seguridad que permite el tráfico SSH entrante en el puerto 22 desde una dirección IP específica, mediante un recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a>. Crea un volumen de Amazon EBS de 100 GB mediante un recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-volume.html">AWS::EC2::Volume</a>. El volumen se crea en la misma zona de disponibilidad que la instancia, según lo especifique la función <code class="code">GetAtt</code>, y se monta en la instancia del dispositivo <code class="code">/dev/sdh</code>.</p>
                <p>Para más información sobre la creación de una instantánea en EBS, consulte <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-creating-volume.html">Creación de un volumen de Amazon EBS</a>.</p>
                <div id="JSON" name="JSON" class="section langfilter">
                    <h4 id="quickref-ec2-example-14.json">JSON</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Ec2Instance": <span>{</span>
    "Type": "AWS::EC2::Instance",
    "Properties": <span>{</span>
        "SecurityGroups": [
            <span>{</span>
                "Ref": "InstanceSecurityGroup"
            }
        ],
        "ImageId": "<code class="replaceable">ami-1234567890abcdef0</code>"
    }
},
"InstanceSecurityGroup": <span>{</span>
    "Type": "AWS::EC2::SecurityGroup",
    "Properties": <span>{</span>
        "GroupDescription": "Enable SSH access via port 22",
        "SecurityGroupIngress": [
            <span>{</span>
                "IpProtocol": "tcp",
                "FromPort": "22",
                "ToPort": "22",
                "CidrIp": "<code class="replaceable">192.0.2.0/24</code>"
            }
        ]
    }
},
"NewVolume": <span>{</span>
    "Type": "AWS::EC2::Volume",
    "Properties": <span>{</span>
        "Size": "100",
        "AvailabilityZone": <span>{</span>
            "Fn::GetAtt": [
                "Ec2Instance",
                "AvailabilityZone"
            ]
        }
    }
},
"MountPoint": <span>{</span>
    "Type": "AWS::EC2::VolumeAttachment",
    "Properties": <span>{</span>
        "InstanceId": <span>{</span>
            "Ref": "Ec2Instance"
        },
        "VolumeId": <span>{</span>
            "Ref": "NewVolume"
        },
        "Device": "/dev/sdh"
    }
}</code></pre>
                </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h4 id="quickref-ec2-example-14.yaml">YAML</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Ec2Instance:
  Type: AWS::EC2::Instance
  Properties:
    SecurityGroups:
      - !Ref InstanceSecurityGroup
    ImageId: <code class="replaceable">ami-1234567890abcdef0</code>
InstanceSecurityGroup:
  Type: AWS::EC2::SecurityGroup
  Properties:
    GroupDescription: Enable SSH access via port 22
    SecurityGroupIngress:
      - IpProtocol: tcp
        FromPort: 22
        ToPort: 22
        CidrIp: <code class="replaceable">192.0.2.0/24</code>
NewVolume:
  Type: AWS::EC2::Volume
  Properties:
    Size: 100
    AvailabilityZone: !GetAtt [Ec2Instance, AvailabilityZone]
MountPoint:
  Type: AWS::EC2::VolumeAttachment
  Properties:
    InstanceId: !Ref Ec2Instance
    VolumeId: !Ref NewVolume
    Device: /dev/sdh</code></pre>
                </div>
             


         
            <h2 id="quickref-ec2-instances-ingress">Creación de grupos de seguridad con reglas de entrada</h2>
            <p>En los siguientes fragmentos de ejemplo, se muestra cómo configurar grupos de seguridad con reglas de entrada específicas mediante AWS CloudFormation.</p>
            <div class="highlights" id="inline-topiclist"><h6>Fragmentos</h6><ul><li><a href="#scenario-ec2-security-group-rule">Creación de un grupo de seguridad con reglas de entrada para el acceso SSH y HTTP</a></li><li><a href="#scenario-ec2-security-group-two-ports">Creación de un grupo de seguridad con reglas de entrada para el acceso SSH y HTTP a partir de rangos CIDR especificados</a></li><li><a href="#scenario-ec2-security-group-ingress">Creación de grupos de seguridad de referencia cruzada con reglas de entrada</a></li></ul></div>
             
                <h3 id="scenario-ec2-security-group-rule">Creación de un grupo de seguridad con reglas de entrada para el acceso SSH y HTTP</h3>

                <p>Este fragmento de código muestra un recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a> que describe dos reglas de entrada del grupo de seguridad. La primera regla de entrada permite el acceso SSH (puerto 22) desde un grupo de seguridad existente denominado <code class="code">MyAdminSecurityGroup</code>, que es propiedad de la cuenta de AWS con el número de cuenta <code class="code">1111-2222-3333</code>. La segunda regla de entrada permite el acceso HTTP (puerto 80) desde un grupo de seguridad diferente denominado <code class="code">MySecurityGroupCreatedInCFN</code>, que se crea en la misma plantilla. La función <code class="code">Ref</code> se utiliza para hacer referencia al nombre lógico del grupo de seguridad creado en la misma plantilla. </p>
                <p>En la primera regla de entrada, debe agregar un valor para las propiedades <code class="code">SourceSecurityGroupName</code> y <code class="code">SourceSecurityGroupOwnerId</code>. En la segunda regla de entrada, <code class="code">MySecurityGroupCreatedInCFNTemplate</code> hace referencia a un grupo de seguridad diferente, que se crea en la misma plantilla. Compruebe que el nombre lógico <code class="code">MySecurityGroupCreatedInCFNTemplate</code> coincide con el nombre lógico real del recurso del grupo de seguridad que especificó en la plantilla más grande. </p>
                <p>Para obtener más información sobre los grupos de seguridad, consulte <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-security-groups.html">Grupos de seguridad de Amazon EC2 para instancias de Linux)</a> o <a href="https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/ec2-security-groups.html">Grupos de seguridad de Amazon EC2 para instancias de Windows</a>.</p>
                <div id="JSON" name="JSON" class="section langfilter">
                    <h4 id="quickref-ec2-example-10.json">JSON</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"SecurityGroup": <span>{</span>
    "Type": "AWS::EC2::SecurityGroup",
    "Properties": <span>{</span>
        "GroupDescription": "Allow connections from specified source security group",
        "SecurityGroupIngress": [
            <span>{</span>
                "IpProtocol": "tcp",
                "FromPort": "22",
                "ToPort": "22",
                "SourceSecurityGroupName": "MyAdminSecurityGroup",
                "SourceSecurityGroupOwnerId": "<code class="replaceable">1111-2222-3333</code>"
            },
            <span>{</span>
                "IpProtocol": "tcp",
                "FromPort": "80",
                "ToPort": "80",
                "SourceSecurityGroupName": <span>{</span>
                    "Ref": "MySecurityGroupCreatedInCFNTemplate"
                }
            }
        ]
    }
}</code></pre>
                </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h4 id="quickref-ec2-example-10.yaml">YAML</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">SecurityGroup:
  Type: 'AWS::EC2::SecurityGroup'
  Properties:
    GroupDescription: Allow connections from specified source security group
    SecurityGroupIngress:
      - IpProtocol: tcp
        FromPort: '22'
        ToPort: '22'
        SourceSecurityGroupName: MyAdminSecurityGroup
        SourceSecurityGroupOwnerId: '<code class="replaceable">1111-2222-3333</code>'
      - IpProtocol: tcp
        FromPort: '80'
        ToPort: '80'
        SourceSecurityGroupName:
          Ref: MySecurityGroupCreatedInCFNTemplate</code></pre>
                </div>
             
             
                <h3 id="scenario-ec2-security-group-two-ports">Creación de un grupo de seguridad con reglas de entrada para el acceso SSH y HTTP a partir de rangos CIDR especificados</h3>

                <p>El siguiente fragmento crea un grupo de seguridad para una instancia de Amazon EC2 con dos reglas de entrada. Las reglas de entrada permiten el tráfico TCP entrante en los puertos especificados desde los rangos de CIDR designados. Se utiliza un recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a> para especificar las reglas. Debe especificar un protocolo para cada regla. En el caso de TCP, también debe especificar un puerto o intervalo de puertos. Si no especifica un grupo de seguridad de origen o un rango de CIDR, la pila se iniciará correctamente, pero la regla no se aplicará al grupo de seguridad. </p>
                <p>Para obtener más información sobre los grupos de seguridad, consulte <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-security-groups.html">Grupos de seguridad de Amazon EC2 para instancias de Linux)</a> o <a href="https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/ec2-security-groups.html">Grupos de seguridad de Amazon EC2 para instancias de Windows</a>.</p>
                <div id="" name="" class="section langfilter">
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"ServerSecurityGroup": <span>{</span>
  "Type": "AWS::EC2::SecurityGroup",
  "Properties": <span>{</span>
    "GroupDescription": "Allow connections from specified CIDR ranges",
    "SecurityGroupIngress": [
      <span>{</span>
        "IpProtocol": "tcp",
        "FromPort": "80",
        "ToPort": "80",
        "CidrIp": "<code class="replaceable">192.0.2.0/24</code>"
      },
      <span>{</span>
        "IpProtocol": "tcp",
        "FromPort": "22",
        "ToPort": "22",
        "CidrIp": "<code class="replaceable">192.0.2.0/24</code>"
      }
    ]
  }
}</code></pre>
                </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h4 id="quickref-ec2-example-9.yaml">YAML</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">ServerSecurityGroup:
  Type: AWS::EC2::SecurityGroup
  Properties:
    GroupDescription: Allow connections from specified CIDR ranges
    SecurityGroupIngress:
      - IpProtocol: tcp
        FromPort: 80
        ToPort: 80
        CidrIp: <code class="replaceable">192.0.2.0/24</code>
      - IpProtocol: tcp
        FromPort: 22
        ToPort: 22
        CidrIp: <code class="replaceable">192.0.2.0/24</code></code></pre>
                </div>
             
             
                <h3 id="scenario-ec2-security-group-ingress">Creación de grupos de seguridad de referencia cruzada con reglas de entrada</h3>

                <p>El siguiente fragmento de código utiliza el recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a> para crear dos grupos de seguridad de Amazon EC2, <code class="code">SGroup1</code> y <code class="code">SGroup2</code>. Las reglas de ingreso que permiten la comunicación entre los dos grupos de seguridad se crean mediante el recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group-ingress.html">AWS::EC2::SecurityGroupIngress</a>. <code class="code">SGroup1Ingress</code> establece una regla de entrada para <code class="code">SGroup1</code> que permite el tráfico TCP entrante en el puerto 80 desde el grupo de seguridad de origen, <code class="code">SGroup2</code>. <code class="code">SGroup2Ingress</code> establece una regla de entrada para <code class="code">SGroup2</code> que permite el tráfico TCP entrante en el puerto 80 desde el grupo de seguridad de origen, <code class="code">SGroup1</code>. </p>
                <div id="JSON" name="JSON" class="section langfilter">
                    <h4 id="quickref-ec2-example-12.json">JSON</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"SGroup1": <span>{</span>
    "Type": "AWS::EC2::SecurityGroup",
    "Properties": <span>{</span>
        "GroupDescription": "EC2 instance access"
    }
},
"SGroup2": <span>{</span>
    "Type": "AWS::EC2::SecurityGroup",
    "Properties": <span>{</span>
        "GroupDescription": "EC2 instance access"
    }
},
"SGroup1Ingress": <span>{</span>
    "Type": "AWS::EC2::SecurityGroupIngress",
    "Properties": <span>{</span>
        "GroupName": <span>{</span>
            "Ref": "SGroup1"
        },
        "IpProtocol": "tcp",
        "ToPort": "80",
        "FromPort": "80",
        "SourceSecurityGroupName": <span>{</span>
            "Ref": "SGroup2"
        }
    }
},
"SGroup2Ingress": <span>{</span>
    "Type": "AWS::EC2::SecurityGroupIngress",
    "Properties": <span>{</span>
        "GroupName": <span>{</span>
            "Ref": "SGroup2"
        },
        "IpProtocol": "tcp",
        "ToPort": "80",
        "FromPort": "80",
        "SourceSecurityGroupName": <span>{</span>
            "Ref": "SGroup1"
        }
    }
}</code></pre>
                </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h4 id="quickref-ec2-example-12.yaml">YAML</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">SGroup1:
  Type: AWS::EC2::SecurityGroup
  Properties:
    GroupDescription: EC2 Instance access
SGroup2:
  Type: AWS::EC2::SecurityGroup
  Properties:
    GroupDescription: EC2 Instance access
SGroup1Ingress:
  Type: AWS::EC2::SecurityGroupIngress
  Properties:
    GroupName: !Ref SGroup1
    IpProtocol: tcp
    ToPort: 80
    FromPort: 80
    SourceSecurityGroupName: !Ref SGroup2
SGroup2Ingress:
  Type: AWS::EC2::SecurityGroupIngress
  Properties:
    GroupName: !Ref SGroup2
    IpProtocol: tcp
    ToPort: 80
    FromPort: 80
    SourceSecurityGroupName: !Ref SGroup1</code></pre>
                </div>
             
         
            <h2 id="scenario-ec2-security-group-elbingress">Creación de un equilibrador de carga elástica con una regla de ingreso de grupos de seguridad</h2>

            <p>La siguiente plantilla crea un recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-elb.html">AWS::ElasticLoadBalancing::LoadBalancer</a> en la zona de disponibilidad especificada. El recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-elb.html">AWS::ElasticLoadBalancing::LoadBalancer</a> está configurado para escuchar el tráfico HTTP en el puerto 80 y dirigir las solicitudes a las instancias también en el puerto 80. El equilibrador de carga elástico es responsable de equilibrar la carga del tráfico HTTP entrante entre las instancias.</p>
            <p> Además, esta plantilla genera un recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a> asociado al equilibrador de carga. Este grupo de seguridad se crea con una única regla de entrada, descrita como <code class="code">ELB
                    ingress group</code>, que permite el tráfico TCP entrante en el puerto 80. El origen de esta regla de entrada se define mediante la función <code class="code">Fn::GetAtt</code> para recuperar los atributos del recurso del equilibrador de carga. <code class="code">SourceSecurityGroupOwnerId</code> utiliza <code class="code">Fn::GetAtt</code> para obtener el grupo de seguridad <code class="code">OwnerAlias</code> del equilibrador de carga. <code class="code">SourceSecurityGroupName</code> utiliza <code class="code">Fn::Getatt</code> para obtener el <code class="code">GroupName</code> del grupo de seguridad de origen del ELB. </p>
            <p>Esta configuración garantiza una comunicación segura entre el ELB y las instancias. </p>
            <p>Para obtener más información sobre balanceadores de carga, consulte la <em><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/what-is-load-balancing.html">Guía del usuario de Elastic Load Balancing</a></em>.</p>

            <div id="JSON" name="JSON" class="section langfilter">
                <h3 id="quickref-ec2-example-11.json">JSON</h3>

                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Resources": <span>{</span>
        "MyELB": <span>{</span>
            "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
            "Properties": <span>{</span>
                "AvailabilityZones": [
                    "<code class="replaceable">aa-example-1a</code>"
                ],
                "Listeners": [
                    <span>{</span>
                        "LoadBalancerPort": "80",
                        "InstancePort": "80",
                        "Protocol": "HTTP"
                    }
                ]
            }
        },
        "MyELBIngressGroup": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "GroupDescription": "ELB ingress group",
                "SecurityGroupIngress": [
                    <span>{</span>
                        "IpProtocol": "tcp",
                        "FromPort": 80,
                        "ToPort": 80,
                        "SourceSecurityGroupOwnerId": <span>{</span>
                            "Fn::GetAtt": [
                                "MyELB",
                                "SourceSecurityGroup.OwnerAlias"
                            ]
                        },
                        "SourceSecurityGroupName": <span>{</span>
                            "Fn::GetAtt": [
                                "MyELB",
                                "SourceSecurityGroup.GroupName"
                            ]
                        }
                    }
                ]
            }
        }
    }
}</code></pre>
            </div>


            <div id="YAML" name="YAML" class="section langfilter">
                <h3 id="quickref-ec2-example-11.yaml">YAML</h3>

                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Resources:
  MyELB:
    Type: 'AWS::ElasticLoadBalancing::LoadBalancer'
    Properties:
      AvailabilityZones:
        - <code class="replaceable">aa-example-1a</code>
      Listeners:
        - LoadBalancerPort: '80'
          InstancePort: '80'
          Protocol: HTTP
  MyELBIngressGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: ELB ingress group
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: '80'
          ToPort: '80'
          SourceSecurityGroupOwnerId:
            Fn::GetAtt:
              - MyELB
              - SourceSecurityGroup.OwnerAlias
          SourceSecurityGroupName:
            Fn::GetAtt:
              - MyELB
              - SourceSecurityGroup.GroupName</code></pre>
            </div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./quickref-ec2-launch-templates.html">Creación de plantillas de lanzamiento</div><div id="next" class="next-link" accesskey="n" href="./quickref-ec2-elastic-ip.html">Asignación de direcciones IP elásticas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>