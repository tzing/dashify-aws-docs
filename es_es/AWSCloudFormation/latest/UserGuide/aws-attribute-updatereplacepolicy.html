<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Atributo UpdateReplacePolicy - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-attribute-updatereplacepolicy" /><meta name="default_state" content="aws-attribute-updatereplacepolicy" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" /><meta name="description" content="Para especificar cómo se gestiona la sustitución de recursos durante las operaciones de actualización de la pila en AWS CloudFormation, utilice el atributo UpdateReplacePolicy." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Atributo UpdateReplacePolicy" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Atributo UpdateReplacePolicy - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referencia de la plantilla",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Referencia de atributos personalizados",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-product-attribute-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Atributo UpdateReplacePolicy",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-product-attribute-reference.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#aws-attribute-updatereplacepolicy-example.json">JSON</a><a href="#aws-attribute-updatereplacepolicy-example.yaml">YAML</a><a href="#aws-attribute-updatereplacepolicy-options">Opciones de UpdateReplacePolicy</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-attribute-updatereplacepolicy">Atributo <code class="code">UpdateReplacePolicy</code></h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Utilice el atributo <code class="code">UpdateReplacePolicy</code> para conservar o, en ciertos casos, hacer una copia de seguridad de la instancia física existente de un recurso cuando se sustituye durante una operación de actualización de la pila.</p><p>Cuando inicie la actualización de una pila, AWS CloudFormation actualiza los recursos en función de las diferencias entre lo que envía y la plantilla y los parámetros actuales de la pila. Si actualiza una propiedad de recurso que requiere la <a href="./using-cfn-updating-stacks-update-behaviors.html#update-replacement">sustitución</a> del recurso, CloudFormation recrea el recurso durante la actualización. La recreación del recurso genera un nuevo ID físico. CloudFormation crea primero el recurso de sustitución y, a continuación, cambia las referencias de otros recursos dependientes para que apunten al recurso de sustitución. De forma predeterminada, CloudFormation elimina seguidamente el recurso antiguo. Mediante el uso de <code class="code">UpdateReplacePolicy</code>, puede especificar que CloudFormation conserve o, en ciertos casos, cree una instantánea del recurso antiguo.</p><p>Para los recursos que admiten instantáneas, como por ejemplo <code class="code">AWS::EC2::Volume</code>, puede especificar <code class="code">Snapshot</code> para que CloudFormation cree una instancia del recurso antiguo.</p><p>Puede aplicar el atributo <code class="code">UpdateReplacePolicy</code> a cualquier recurso. <code class="code">UpdateReplacePolicy</code> solo se ejecuta si actualiza una propiedad de recurso cuyo comportamiento de actualización está especificado como <a href="./using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a>, lo que provoca que CloudFormation sustituya el recurso anterior por uno nuevo con un ID físico nuevo. Por ejemplo, si actualiza la propiedad <code class="code">Engine</code> de un tipo de recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-rds-database-instance.html">AWS::RDS::DBInstance</a>, CloudFormation crea un recurso nuevo y sustituye el recurso de la instancia de base de datos actual por uno nuevo. A continuación, el atributo <code class="code">UpdateReplacePolicy</code> debería dictaminar si CloudFormation ha eliminado, retenido o creado una instantánea de la instancia de base de datos antigua. El comportamiento de actualización de cada propiedad de un recurso se especifica en el tema de referencia de dicho recurso en la <a href="./aws-template-resource-type-ref.html">Referencia de tipos de recursos y propiedades de AWS</a>. Para obtener más información acerca del comportamiento de actualización de un recurso, consulte <a href="./using-cfn-updating-stacks-update-behaviors.html">Comportamientos de actualización de los recursos de la pila</a>.</p><p>El atributo <code class="code">UpdateReplacePolicy</code> se aplica a las <a href="./using-cfn-updating-stacks-direct.html">actualizaciones de pila realizadas directamente</a>, además de las actualizaciones de pila realizadas mediante <a href="./using-cfn-updating-stacks-changesets.html">conjuntos de cambios</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Los recursos que se conservan siguen existiendo y continúan incurriendo en cargos aplicables hasta que se eliminan. Las instantáneas creadas con esta política siguen existiendo y siguen incurriendo en cargos aplicables hasta que elimine esas instantáneas. <code class="code">UpdateReplacePolicy</code> retiene el recurso físico antiguo o la instantánea, pero lo elimina del alcance de CloudFormation.</p></div></div><p><code class="code">UpdateReplacePolicy</code> difiere del atributo <a href="./aws-attribute-deletionpolicy.html">DeletionPolicy</a> en que solo se aplica a los recursos sustituidos durante las actualizaciones de la pila. Utilice DeletionPolicy para los recursos eliminados cuando se elimina una pila o cuando la propia definición de un recurso se elimina de la plantilla como parte de una actualización de la pila.</p><p>El siguiente fragmento de código contiene un recurso de instancia de base de datos de Amazon RDS con una política <code class="code">Retain</code> de sustitución. Cuando este recurso se sustituye por un nuevo recurso con un ID físico nuevo, CloudFormation no elimina la instancia de base de datos antigua.</p><div id="JSON" name="JSON" class="section langfilter">
        <h2 id="aws-attribute-updatereplacepolicy-example.json">JSON</h2>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Resources" : <span>{</span>
    "myDB" : <span>{</span>
      "Type" : "AWS::RDS::DBInstance",
      "DeletionPolicy" : "Retain",
      "UpdateReplacePolicy" : "Retain",
      "Properties" : <span>{</span>}
    }
  }
}</code></pre>
    </div><div id="YAML" name="YAML" class="section langfilter">
        <h2 id="aws-attribute-updatereplacepolicy-example.yaml">YAML</h2>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Resources:
  myDB:
    Type: 'AWS::RDS::DBInstance'
    DeletionPolicy: Retain
    UpdateReplacePolicy: Retain
    Properties: <span>{</span>} </code></pre>
    </div>
        <h2 id="aws-attribute-updatereplacepolicy-options">Opciones de <code class="code">UpdateReplacePolicy</code></h2>

        <div class="variablelist">
             
             
             
        <dl>
                <dt><span class="term">Eliminar</span></dt>
                <dd>
                    <p>CloudFormation elimina el recurso y todo su contenido, si procede, durante la sustitución del recurso. Puede añadir esta política a cualquier tipo de recurso. De forma predeterminada, si no especifica un <code class="code">UpdateReplacePolicy</code>, CloudFormation elimina los recursos. Sin embargo, debe tener en cuenta la siguiente consideración:</p>
                    <p>Para buckets de Amazon S3, debe eliminar todos los objetos en el bucket para una correcta eliminación.</p>
                </dd>
             
                <dt><span class="term">Retener</span></dt>
                <dd>
                    <p>Cuando el recurso se sustituye, CloudFormation mantiene el recurso sin eliminar el recurso ni su contenido. Puede añadir esta política a cualquier tipo de recurso. Los recursos que se conservan siguen existiendo y continúan incurriendo en cargos aplicables hasta que se eliminan.</p>
                    <p>Si un recurso se sustituye, <code class="code">UpdateReplacePolicy</code> conserva el recurso físico antiguo, pero lo elimina del alcance de CloudFormation.</p>
                </dd>
             
                <dt><span class="term">Instantánea</span></dt>
                <dd>
                    <p>Para los recursos que admiten instantáneas, CloudFormation crea una instantánea para el recurso antes de eliminarlo. Las instantáneas que se crean con esta política siguen existiendo y continúan incurriendo en cargos aplicables hasta que se eliminan.</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si especifica la opción <code class="code">Snapshot</code> en el <code class="code">UpdateReplacePolicy</code> para un recurso que no admite instantáneas, CloudFormation revertirá a la opción predeterminada, que es <code class="code">Delete</code>.</p></div></div>
                    <p>Entre los recursos que admiten instantáneas se incluyen:</p>
                    <div class="itemizedlist">
                         
                         
                         
                         
                         
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p><code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ebs-volume.html">AWS::EC2::Volume</a></code></p>
                        </li><li class="listitem">
                            <p><code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-elasticache-cache-cluster.html">AWS::ElastiCache::CacheCluster</a></code></p>
                        </li><li class="listitem">
                            <p><code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticache-replicationgroup.html">AWS::ElastiCache::ReplicationGroup</a></code></p>
                        </li><li class="listitem">
                            <p><code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-neptune-dbcluster.html">AWS::Neptune::DBCluster</a></code></p>
                        </li><li class="listitem">
                            <p><code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-rds-dbcluster.html">AWS::RDS::DBCluster</a></code></p>
                        </li><li class="listitem">
                            <p><code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-rds-database-instance.html">AWS::RDS::DBInstance</a></code></p>
                        </li><li class="listitem">
                            <p><code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-redshift-cluster.html">AWS::Redshift::Cluster</a></code></p>
                        </li></ul></div>
                </dd>
            </dl></div>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-attribute-updatepolicy.html">UpdatePolicy</div><div id="next" class="next-link" accesskey="n" href="./intrinsic-function-reference.html">Funciones intrínsecas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>