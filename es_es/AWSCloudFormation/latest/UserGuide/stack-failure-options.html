<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Opciones de error de pila - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="stack-failure-options" /><meta name="default_state" content="stack-failure-options" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" /><meta name="description" content="Desarrolle de forma iterativa sus aplicaciones cuando se produzcan errores de aprovisionamiento comenzando desde el punto de error sin deshacer los recursos aprovisionados correctamente." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Opciones de error de pila" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Opciones de error de pila - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabajo con pilas de",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Opciones de error de pila",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacks.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#stack-failure-options-overview">Descripción general de las opciones de errores de pila</a><a href="#stack-failure-options-conditions">Condiciones para detener la restauración de la pila</a><a href="#stack-failure-options-console">Conservar los recursos aprovisionados correctamente (consola)</a><a href="#stack-failure-options-cli">Conservar los recursos aprovisionados correctamente (AWS CLI)</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="stack-failure-options">Opciones de error de pila</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Puede desarrollar sus aplicaciones de forma iterativa cuando se producen errores de aprovisionamiento comenzando desde el punto en que se produjo el error sin deshacer los recursos que se aprovisionaron correctamente. Al especificar las opciones de error de pila, puede solucionar los problemas de los recursos con el estado <code class="code">CREATE_FAILED</code> o <code class="code">UPDATE_FAILED</code>. Puede aprovisionar opciones de error para todas las implementaciones de pilas y operaciones de conjuntos de cambios.</p><div class="itemizedlist">
   
   
  
 <ul class="itemizedlist"><li class="listitem">
   <p>Crear operaciones establecidas en <b>Preserve successfully provisioned resources</b> (Conservar los recursos aprovisionados correctamente) conserva el estado de los recursos correctos, mientras que los recursos con errores permanecerán en un estado con error hasta que se lleve a cabo la siguiente operación de actualización.</p>
  </li><li class="listitem">
   <p>Actualizar y cambiar las operaciones de conjunto establecidas en <b>Preserve successfully provisioned resources</b> (Conservar los recursos aprovisionados correctamente) preserva el estado de los recursos exitosos y, al mismo tiempo, reduce los recursos con errores al último estado estable conocido. El estado de los recursos con error será <code class="code">UPDATE_FAILED</code>. Los recursos sin un último estado estable conocido se eliminarán en la siguiente operación de pila.</p>
  </li></ul></div><p>Consulte las siguientes secciones para obtener más detalles sobre cómo pausar la restauración de los recursos con errores:</p><div class="itemizedlist">
   
   
   
   
 <ul class="itemizedlist"><li class="listitem">
   <p><a href="#stack-failure-options-overview">Descripción general de las opciones de errores de pila</a></p>
  </li><li class="listitem">
   <p><a href="#stack-failure-options-conditions">Condiciones para detener la restauración de la pila</a></p>
  </li><li class="listitem">
   <p><a href="#stack-failure-options-console">Conservar los recursos aprovisionados correctamente (consola)</a></p>
  </li><li class="listitem">
   <p><a href="#stack-failure-options-cli">Conservar los recursos aprovisionados correctamente (AWS CLI)</a></p>
  </li></ul></div>
  <h2 id="stack-failure-options-overview">Descripción general de las opciones de errores de pila</h2>
  <p>Antes de emitir una operación desde la consola de AWS CloudFormation, la API o la AWS Command Line Interface (AWS CLI), especifique el comportamiento de los errores de recursos aprovisionados. A continuación, continúe con el proceso de implementación de sus recursos sin ninguna otra modificación. En caso de que se produzca un error operativo, CloudFormation se detiene en el primer error de cada ruta de aprovisionamiento independiente. CloudFormation identifica las dependencias entre los recursos para paralelizar acciones de aprovisionamiento independientes. A continuación, procede a aprovisionar recursos en cada ruta de aprovisionamiento independiente hasta que se produce un error. Un error en una ruta no afecta a otras rutas de aprovisionamiento. CloudFormation continuará aprovisionando los recursos hasta que se completen o se detengan en un error diferente.</p>
  <p>Solucione cualquier problema para continuar con el proceso de implementación. CloudFormation lleva a cabo las actualizaciones necesarias antes de volver a intentar las acciones de aprovisionamiento en los recursos que no se pudieron aprovisionar correctamente antes. Para solucionar los problemas, envíe una operación <b>Retry</b> (Reintentar), <b>Update</b> (Actualizar) o <b>Roll back</b> (Restaurar). Por ejemplo, si va a aprovisionar una instancia de Amazon EC2 y se produce un error en la instancia de EC2 durante una operación de creación, es posible que desee investigar el error, en lugar de deshacer el recurso fallido de inmediato. Puede revisar las verificaciones de estado del sistema y las verificaciones de estado de las instancias y, a continuación, seleccionar la operación <b>Retry</b> (Reintentar) una vez que se resuelvan los problemas.</p>
  
  
  <p>Cuando se produce un error en una operación de pila y se ha especificado <b>Preserve successfully provisioned resources</b> (Conservar los recursos aprovisionados correctamente) en el menú <b>Stack failure options</b> (Opciones de error de pila), puede seleccionar las siguientes opciones.</p>
  <div class="itemizedlist">
    
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p><b>Retry</b> (Reintentar): reintenta la operación de aprovisionamiento en los recursos con errores y continúa aprovisionando la plantilla hasta que se complete correctamente la operación de pila o se produzca el siguiente error. Seleccione esta opción si el recurso no se ha podido aprovisionar debido a un problema que no requiere modificaciones en la plantilla, como un permiso de AWS Identity and Access Management (IAM).</p>
   </li><li class="listitem">
    <p><b>Update</b> (Actualizar): los recursos que se han aprovisionado se actualizan en las actualizaciones de la plantilla. Los recursos que no se hayan podido crear o actualizar se volverán a intentar. Seleccione esta opción si el recurso no se ha podido aprovisionar debido a errores de plantilla y ha modificado la plantilla. Cuando actualiza una pila cuyo estado es <code class="code">FAILED</code>, debe seleccionar <b>Preserve successfully provisioned resources</b> (Conservar los recursos aprovisionados correctamente) en <b>Stack failure options</b> (Opciones de error de pila) para seguir actualizando la pila.</p>
   </li><li class="listitem">
    <p><b>Roll back</b> (Restaurar): CloudFormation restaura la pila al último estado estable conocido.</p>
   </li></ul></div>

 
  
  <h2 id="stack-failure-options-conditions">Condiciones para detener la restauración de la pila</h2>
  <p>Para pausar la restauración de los recursos con errores de la pila, deben cumplirse las siguientes condiciones.</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>Debe especificar el parámetro <b>Preserve successfully provisioned resources</b> (Conservar los recursos aprovisionados correctamente) durante una operación de apilamiento. Para obtener más información sobre el comportamiento de restauración, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-add-tags.html#rollback">Configuración de las opciones de pila de AWS CloudFormation</a>.</p>
   </li><li class="listitem">
    <p>Una operación de pila debe tener un estado de pila de <code class="code">CREATE_FAILED</code> o <code class="code">UPDATE_FAILED</code>. Para obtener información sobre los estados de la pila, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-describing-stacks.html#w2ab1c23c15c17c11">Códigos de estado de pilas</a>.</p>
   </li></ul></div>
  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>No se admiten los tipos de actualización inmutables.</p></div></div>
  
  <h2 id="stack-failure-options-console">Conservar los recursos aprovisionados correctamente (consola)</h2>
  <awsdocs-tabs><dl style="display: none">
   <dt>Create stack</dt><dd tab-id="create-stack">
     <div class="procedure"><h6>Para conservar los recursos aprovisionados correctamente durante una operación de creación de pila</h6><ol><li><p>Inicie sesión en la AWS Management Console y abra la consola de AWS CloudFormation en <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
       <p>Seleccione <b>Create stack</b> (Crear pila) y seleccione <b>With new resources (standard)</b> (Con recursos nuevos [estándar]).</p>
      </li><li>
       <p>En la página <b>Specify Template (Especificar plantilla)</b>, elija una plantilla de pila utilizando una de las siguientes opciones:</p>
       <div class="itemizedlist">
         
         
         
       <ul class="itemizedlist"><li class="listitem">
         <p><b>Template is ready (La plantilla está lista)</b></p>
        </li><li class="listitem">
         <p><b>Use a sample template (Usar una plantilla de muestra)</b></p>
        </li><li class="listitem">
         <p><b>Create template in Designer (Crear plantilla en Designer)</b></p>
        </li></ul></div>
       <p>Acepte la configuración y seleccione <b>Next</b> (Siguiente).</p>
      </li><li>
       <p>En la página <b>Specify stack details</b> (Especificar los detalles de la pila), ingrese un nombre de pila en el cuadro <b>Stack name</b> (Nombre de la pila).</p>
      </li><li>
       <p>En la sección <b>Parameters</b> (Parámetros), especifique los parámetros que se definen en su plantilla de la pila.</p>
       <p>Puede utilizar o cambiar cualquier parámetro con valores predeterminados.</p>
      </li><li>
       <p>Cuando esté satisfecho con los valores de los parámetros, elija <b>Next</b> (Siguiente).</p>
      </li><li>
       <p>En la página <b>Configure stack options</b> (Configurar opciones de pila), puede configurar opciones adicionales para su pila.</p>
      </li><li>
       <p>En <b>Stack failure options</b> (Opciones de error de pila), seleccione <b>Preserve successfully provisioned resources</b> (Conservar los recursos aprovisionados correctamente).</p>
      </li><li>
       <p>Cuando esté satisfecho con las opciones de pila, elija <b>Next</b> (Siguiente).</p>
      </li><li>
       <p>Revise su pila en la página <b>Review</b> (Revisar) y seleccione <b>Create stack</b> (Crear pila).</p>
      </li></ol></div>
     <p><em>Resultados</em>: los recursos que no se pudieron crear hacen la transición del estado de la pila a <code class="code">CREATE_FAILED</code> para evitar que la pila se restaure cuando se produce un error en la operación de pila. El estado de los recursos que se aprovisionan correctamente es <code class="code">CREATE_COMPLETE</code>. Puede supervisar la pila en la pestaña <b>Stack events</b> (Eventos de la pila).</p>
    </dd>
   <dt>Update stack</dt><dd tab-id="update-stack">
     <div class="procedure"><h6>Para conservar los recursos aprovisionados correctamente durante una operación de pila de actualizaciones</h6><ol><li><p>Inicie sesión en la AWS Management Console y abra la consola de AWS CloudFormation en <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
       <p>Seleccione la pila que desea actualizar y, a continuación, <b>Update</b> (Actualizar).</p>
      </li><li>
       <p>En la página <b>Update stack</b> (Actualizar pila), elija una plantilla de pila utilizando una de las siguientes opciones:</p>
       <div class="itemizedlist">
         
         
         
       <ul class="itemizedlist"><li class="listitem">
         <p><b>Use current template</b> (Utilizar la plantilla actual)</p>
        </li><li class="listitem">
         <p><b>Replace current template</b> (Reemplazar la plantilla actual)</p>
        </li><li class="listitem">
         <p><b>Edit template in designer</b> (Editar plantilla en Designer)</p>
        </li></ul></div>
       <p>Acepte la configuración y seleccione <b>Next</b> (Siguiente).</p>
      </li><li>
       <p>En la página <b>Specify stack details</b> (Especificar los detalles de la pila), especifique los parámetros que se definen en la plantilla de pila.</p>
       <p>Puede utilizar o cambiar cualquier parámetro con valores predeterminados.</p>
      </li><li>
       <p>Cuando esté satisfecho con los valores de los parámetros, elija <b>Next</b> (Siguiente).</p>
      </li><li>
       <p>En la página <b>Configure stack options</b> (Configurar opciones de pila), puede configurar opciones adicionales para su pila.</p>
      </li><li>
       <p>Para el registro <b>Behavior on provisioning failure</b> (Comportamiento en caso de error de aprovisionamiento), seleccione <b>Preserve successfully provisioned resources</b> (Conservar los recursos aprovisionados correctamente).</p>
      </li><li>
       <p>Cuando esté satisfecho con las opciones de pila, elija <b>Next</b> (Siguiente).</p>
      </li><li>
       <p>Revise su pila en la página <b>Review</b> (Revisar) y seleccione <b>Update stack</b> (Actualizar pila).</p>
      </li></ol></div>
     <p><em>Resultados</em>: los recursos que no se pudieron actualizar hacen la transición del estado de la pila a <code class="code">UPDATE_FAILED</code> y se restauran al último estado estable conocido. CloudFormation eliminará los recursos sin un último estado estable conocido en la siguiente operación de pila. El estado de los recursos que se aprovisionan correctamente es <code class="code">CREATE_COMPLETE</code> o <code class="code">UPDATE_COMPLETE</code>. Puede supervisar la pila en la pestaña <b>Stack events</b> (Eventos de la pila).</p>
    </dd>
   <dt>Change set</dt><dd tab-id="change-set">
     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Puede iniciar un conjunto de cambios para una pila con un estado de <code class="code">CREATE_FAILED</code> o <code class="code">UPDATE_FAILED</code>, pero no con un estado de <code class="code">UPDATE_ROLLBACK_FAILED</code>.</p></div></div>
     <div class="procedure"><h6>Para conservar los recursos aprovisionados correctamente durante una operación de conjunto de cambios</h6><ol><li><p>Inicie sesión en la AWS Management Console y abra la consola de AWS CloudFormation en <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
       <p>Seleccione la pila que contenga el conjunto de cambios que desea iniciar y, a continuación, elija la pestaña <b>Change sets</b> (Conjuntos de cambios).</p>
      </li><li>
       <p>Seleccione el conjunto de cambios y, a continuación, elija <b>Execute</b> (Ejecutar).</p>
      </li><li>
       <p>Para <b>Execute change set</b> (Ejecutar conjunto de cambios), seleccione la opción <b>Preserve successfully provisioned resources</b> (Conservar los recursos aprovisionados correctamente).</p>
      </li><li>
       <p>Seleccione <b>Execute change set</b> (Ejecutar conjunto de cambios).</p>
      </li></ol></div>
     <p><em>Resultados</em>: los recursos que no se pudieron actualizar hacen la transición del estado de la pila a <code class="code">UPDATE_FAILED</code> y se restauran al último estado estable conocido. CloudFormation eliminará los recursos sin un último estado estable conocido en la siguiente operación de pila. El estado de los recursos que se aprovisionan correctamente es <code class="code">CREATE_COMPLETE</code> o <code class="code">UPDATE_COMPLETE</code>. Puede supervisar la pila en la pestaña <b>Stack events</b> (Eventos de la pila).</p>
    </dd>
  </dl></awsdocs-tabs>
  
  <h2 id="stack-failure-options-cli">Conservar los recursos aprovisionados correctamente (AWS CLI)</h2>
  <awsdocs-tabs><dl style="display: none">
   <dt>Create stack</dt><dd tab-id="create-stack">
     <div class="procedure"><h6>Para conservar los recursos aprovisionados correctamente durante una operación de creación de pila</h6><p>Especifique la opción <code class="code">disable-rollback</code> o enumeración <code class="code">on-failure DO_NOTHING</code> durante una operación <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/create-stack.html">create-stack</a>.</p><ol><li>
       <p>Proporcione un nombre de pila y una plantilla al comando <code class="code">create-stack</code> con la opción <code class="code">disable-rollback</code>.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation create-stack --stack-name <code class="code" copy="true">myteststack</code> --template-body <code class="replaceable">file://DOC-EXAMPLE-BUCKET.json</code> --disable-rollback</code></pre>
       <p>El comando devuelve el siguiente resultado:</p>
       <pre class="screen"><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}</pre>
      </li><li>
       <p>Describa el estado de la pila mediante la opción <code class="code">describe-stacks</code>.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation describe-stacks --stack-name <code class="replaceable">myteststack</code></code></pre>
       <p>El comando devuelve el siguiente resultado:</p>
       <pre class="screen"><span>{</span>
    "Stacks":  [
        <span>{</span>
            "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896",
            "Description": "AWS CloudFormation Sample Template",
            "Tags": [],
            "Outputs": [],
            "StackStatusReason": “The following resource(s) failed to create: [MyBucket]”,
            "CreationTime": "2013-08-23T01:02:15.422Z",
            "Capabilities": [],
            "StackName": "myteststack",
            "StackStatus": "CREATE_FAILED",
            "DisableRollback": true
        }
    ]
}</pre>
      </li></ol></div>
    </dd>
   <dt>Update stack</dt><dd tab-id="update-stack">
     <div class="procedure"><h6>Para conservar los recursos aprovisionados correctamente durante una operación de actualización de la pila.</h6><ol><li>
       <p>Proporcione un nombre de pila y una plantilla existentes al comando <code class="code">update-stack</code> con la opción <code class="code">disable-rollback</code>.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation update-stack --stack-name <code class="replaceable">myteststack</code> --template-url <code class="replaceable">DOC-EXAMPLE-BUCKET.template</code> --disable-rollback</code></pre>
       <p>El comando devuelve el siguiente resultado:</p>
       <pre class="screen"><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}</pre>
      </li><li>
       <p>Describa el estado de la pila mediante la opción <code class="code">describe-stacks</code> o <code class="code">describe-stack-events</code>.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation describe-stacks --stack-name <code class="replaceable">myteststack</code></code></pre>
       <p>El comando devuelve el siguiente resultado:</p>
       <pre class="screen"><span>{</span>
    "Stacks":  [
        <span>{</span>
            "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896",
            "Description": "AWS CloudFormation Sample Template",
            "Tags": [],
            "Outputs": [],
            "CreationTime": "2013-08-23T01:02:15.422Z",
            "Capabilities": [],
            "StackName": "myteststack",
            "StackStatus": "UPDATE_COMPLETE",
            "DisableRollback": true
        }
    ]
}</pre>
      </li></ol></div>
    </dd>
   <dt>Change set</dt><dd tab-id="change-set">
     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Puede iniciar un conjunto de cambios para una pila con un estado de <code class="code">CREATE_FAILED</code> o <code class="code">UPDATE_FAILED</code>, pero no para un estado de <code class="code">UPDATE_ROLLBACK_FAILED</code>.</p></div></div>
     <div class="procedure"><h6>Para conservar los recursos aprovisionados correctamente durante una operación de conjunto de cambios</h6><p>Especifique la opción <code class="code">disable-rollback</code> durante una operación <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/execute-change-set.html">execute-change-set</a>.</p><ol><li>
       <p>Proporcione un nombre de pila y una plantilla al comando <code class="code">execute-change-set</code> con la opción <code class="code">disable-rollback</code>.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation execute-change-set --stack-name <code class="replaceable">myteststack</code> --change-set-name <code class="replaceable">my-change-set</code> --template-body file://template.yaml</code></pre>
       <p>El comando devuelve el siguiente resultado:</p>
       <pre class="screen"><span>{</span>
 "Id": "arn:aws:cloudformation:us-east-1:123456789012:changeSet/my-change-set/bc9555ba-a949-xmpl-bfb8-f41d04ec5784",
 "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}</pre>
      </li><li>
       <p>Inicie el conjunto de cambios con la opción <code class="code">disable-rollback</code>.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation execute-change-set --stack-name <code class="replaceable">myteststack</code> --change-set-name <code class="replaceable">my-change-set</code> -–disable-rollback</code></pre>
      </li><li>
       <p>Determine el estado de la pila mediante las opciones <code class="code">describe-stacks</code> o <code class="code">describe-stack-events</code>.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "StackEvents": [
     <span>{</span>
        "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896",
        "EventId": "49c966a0-7b74-11ea-8071-024244bb0672",
        "StackName": "myteststack",
        "LogicalResourceId": " MyBucket",
        "PhysicalResourceId": "MyBucket",
        "ResourceType": "AWS::S3::Bucket",
        "Timestamp": "2020-04-10T21:43:17.015Z",
        "ResourceStatus": "UPDATE_FAILED"
        "ResourceStatusReason": "User XYZ is not allowed to perform S3::UpdateBucket on MyBucket"
     }
}</code></pre>
      </li><li>
       <p>Corrija los errores de los permisos y vuelva a ejecutar la operación.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation update-stack --stack-name <code class="replaceable">myteststack</code> --use-previous-template --disable-rollback</code></pre>
       <p>El comando devuelve el siguiente resultado:</p>
       <pre class="screen"><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}</pre>
      </li><li>
       <p>Describa el estado de la pila mediante la opción <code class="code">describe-stacks</code> o <code class="code">describe-stack-events</code>.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation describe-stacks --stack-name <code class="replaceable">myteststack</code></code></pre>
       <p>El comando devuelve el siguiente resultado:</p>
       <pre class="screen"><span>{</span>
    "Stacks":  [
        <span>{</span>
            "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896",
            "Description": "AWS CloudFormation Sample Template",
            "Tags": [],
            "Outputs": [],
            "CreationTime": "2013-08-23T01:02:15.422Z",
            "Capabilities": [],
            "StackName": "myteststack",
            "StackStatus": "UPDATE_COMPLETE",
            "DisableRollback": true
        }
    ]
}</pre>
      </li></ol></div>
    </dd>
  </dl></awsdocs-tabs>
  
   
   <h3 id="roll-back-stack-cli">Restauración de una pila</h3>
   
   <div class="procedure"><h6>Para restaurar una pila del estado de pila CREATE_FAILED o UPDATE_FAILED</h6><p>Especifique la operación <code class="code">rollback-stack</code> para restaurar una pila a su último estado estable.</p><ul><li>
     <p>Inicie un retroceso con la operación <code class="code">rollback-stack</code> y especifique el nombre de la pila.</p>
     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation rollback-stack --stack-name <code class="replaceable">myteststack</code></code></pre>
     <p>El comando devuelve el siguiente resultado:</p>
     <pre class="screen"><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}</pre>
    </li></ul></div>
   <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>La operación <code class="code">rollback-stack</code> borrará una pila si no contiene un último estado estable conocido.</p></div></div>
   
  
 <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./stack-resource-configuration-complete.html">Pilas de implementación</div><div id="next" class="next-link" accesskey="n" href="./refactor-stacks.html">Mover recursos entre pilas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>