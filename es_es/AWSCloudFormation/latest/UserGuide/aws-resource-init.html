<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::CloudFormation::Init - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-init" /><meta name="default_state" content="aws-resource-init" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" /><meta name="description" content="Incluya metadatos en una instancia de Amazon EC2 para el script de ayuda cfn-init utilizando el tipo de recurso AWS::CloudFormation::Init." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="AWS::CloudFormation::Init" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::CloudFormation::Init - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabajo con plantillas de AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Anatomía de la plantilla",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-anatomy.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Metadatos",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/metadata-section-structure.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "AWS::CloudFormation::Init",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/metadata-section-structure.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#aws-resource-cloudformation-init-syntax">Sintaxis</a><a href="#aws-resource-init-configsets">Configsets</a><a href="#aws-resource-init-commands">Comandos</a><a href="#aws-resource-init-files">Archivos</a><a href="#aws-resource-init-groups">Grupos</a><a href="#aws-resource-init-packages">Paquetes</a><a href="#aws-resource-init-services">Servicios</a><a href="#aws-resource-init-sources">Orígenes</a><a href="#aws-resource-init-users">Usuarios</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-init"><code class="code">AWS::CloudFormation::Init</code></h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Utilice el tipo <code class="code">AWS::CloudFormation::Init</code> para incluir metadatos en una instancia de Amazon EC2 para el script de ayuda cfn-init. Si la plantilla llama al script cfn-init, el script buscará los metadatos de los recursos enraizados en la clave de metadatos de <code class="code">AWS::CloudFormation::Init</code>. Para obtener más información acerca de cfn-init, consulte <a href="./cfn-init.html">cfn-init</a>.</p><p>cfn-init admite todos los tipos de metadatos para sistemas Linux. Admite los tipos de metadatos para Windows con las condiciones que se describen en las secciones que aparecen a continuación.</p><p>Para obtener un ejemplo de uso de <code class="code">AWS::CloudFormation::Init</code> y el script de ayuda cfn-init, consulte <a href="./deploying.applications.html">Implementación de aplicaciones en Amazon EC2 con AWS CloudFormation</a>.</p><p>Para ver un ejemplo que muestra cómo utilizar cfn-init para crear una pila de Windows, consulte <a href="./cfn-windows-stacks-bootstrapping.html">Arranque de pilas de Windows de AWS CloudFormation</a>.</p>
      <h2 id="aws-resource-cloudformation-init-syntax">Sintaxis</h2>

      <p>La configuración se divide en secciones. El siguiente fragmento de código de plantilla muestra cómo se pueden adjuntar metadatos de cfn-init a un recurso de instancia de EC2 dentro de la plantilla.</p>
      <p>Los metadatos se organizan en claves de configuración, que puede agrupar en configsets. Puede especificar un configset cuando llama a cfn-init en la plantilla. Si no especifica un configset, cfn-init buscará una clave de configuración única denominada <em>config</em>.</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>El script auxiliar cfn-init procesa estas secciones de configuración en el siguiente orden: paquetes, grupos, usuarios, fuentes, archivos, comandos y, a continuación, servicios. Si necesita un orden diferente, separe las secciones en diferentes claves de configuración y, a continuación, utilice un configset que especifica el orden en el que deben procesarse las claves de configuración.</p></div></div>

      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="aws-resource-cloudformation-init-syntax.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Resources": <span>{</span>
  "MyInstance": <span>{</span>
    "Type": "AWS::EC2::Instance",
    "Metadata" : <span>{</span>
      "AWS::CloudFormation::Init" : <span>{</span>
        "config" : <span>{</span>
          "packages" : <span>{</span>
            :
          },
          "groups" : <span>{</span>
            :
          },
          "users" : <span>{</span>
            :
          },
          "sources" : <span>{</span>
            :
          },
          "files" : <span>{</span>
            :
          },
          "commands" : <span>{</span>
            :
          },
          "services" : <span>{</span>
            :
          }
        }
      }
    },
    "Properties": <span>{</span>
      :
    }
  }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="aws-resource-cloudformation-init-syntax.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources: 
  MyInstance: 
    Type: AWS::EC2::Instance
    Metadata: 
      AWS::CloudFormation::Init: 
        config: 
          packages: 
            :
          groups: 
            :
          users: 
            :
          sources: 
            :
          files: 
            :
          commands: 
            :
          services: 
            :
    Properties: 
      :</code></pre>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Para especificar la propiedad <code class="code">AWS::CloudFormation::Init</code> de una instancia Amazon EC2, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-init.html#cfn-init-Examples">Ejemplo de Amazon Linux</a>.</p></div></div>
      </div>
    
      <h2 id="aws-resource-init-configsets">Configsets</h2>

      <p>Si desea crear más de una clave de configuración y que cfn-init las procese en un orden específico, crear un configset que contenga las claves de configuración en el orden deseado.</p>
       
         <h3 id="w9aac23c15c15c23c13b5">Configset individual</h3>

         <p>El siguiente fragmento de código de plantilla crea configsets denominados <code class="code">ascending</code> y <code class="code">descending</code> que contienen cada uno dos claves de configuración.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-cloudformation-init-configset-example1.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"AWS::CloudFormation::Init" : <span>{</span>
    "configSets" : <span>{</span>
        "ascending" : [ "config1" , "config2" ],
        "descending" : [ "config2" , "config1" ]
    },
    "config1" : <span>{</span>
        "commands" : <span>{</span>
            "test" : <span>{</span>
                "command" : "echo \"$CFNTEST\" &gt; test.txt",
                "env" : <span>{</span> "CFNTEST" : "I come from config1." },
                "cwd" : "~"
            }
        }
    },
    "config2" : <span>{</span>
        "commands" : <span>{</span>
            "test" : <span>{</span>
                "command" : "echo \"$CFNTEST\" &gt; test.txt",
                "env" : <span>{</span> "CFNTEST" : "I come from config2" },
                "cwd" : "~"
            }
        }
    }
}     </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-cloudformation-init-configset-example1.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWS::CloudFormation::Init: 
  configSets: 
    ascending: 
      - "config1"
      - "config2"
    descending: 
      - "config2"
      - "config1"
  config1: 
    commands: 
      test: 
        command: "echo \"$CFNTEST\" &gt; test.txt"
        env: 
          CFNTEST: "I come from config1."
        cwd: "~"
  config2: 
    commands: 
      test: 
        command: "echo \"$CFNTEST\" &gt; test.txt"
        env: 
          CFNTEST: "I come from config2"
        cwd: "~"</code></pre>
         </div>
          
            <h4 id="w9aac23c15c15c23c13b5b9">Llamadas a cfn-init relacionadas</h4>

            <p>Las siguientes llamadas a cfn-init de ejemplo se refieren a los configsets de ejemplo anteriores. Las llamadas de ejemplo se abrevian para facilitar la lectura, consulte <a href="./cfn-init.html">cfn-init</a> para ver la sintaxis completa.</p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Si una llamada a cfn-init especifica el configset <code class="code">ascending</code>:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">cfn-init -c ascending</code></code></pre>
                  <p>El script procesa <code class="code">config1</code> y, a continuación, procesa <code class="code">config2</code> y el archivo test.txt contendrá el texto <code class="code">I
                        come from config2</code>.</p>
               </li><li class="listitem">
                  <p>Si una llamada a cfn-init especifica el configset <code class="code">descending</code>:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">cfn-init -c descending</code></code></pre>
                  <p>El script procesa <code class="code">config2</code> y, a continuación, procesa <code class="code">config1</code> y el archivo test.txt contendrá el texto <code class="code">I
                        come from config1</code>.</p>
               </li></ul></div>
          
       
       
         <h3 id="w9aac23c15c15c23c13b7">Varios configsets</h3>

         <p>Puede crear varios configsets y llamar a una serie de ellos con su script cfn-init. Cada configset puede contener una lista de claves de configuración o referencias a otros configsets. Por ejemplo, el siguiente fragmento de código de plantilla crea tres configsets. El primer configset, <code class="code">test1</code>, contiene una clave de configuración denominada <code class="code">1</code>. El segundo configset, <code class="code">test2</code>, contiene una referencia al configset <code class="code">test1</code> y una clave de configuración denominada <code class="code">2</code>. El tercer configset, de forma predeterminada, contiene una referencia al configset <code class="code">test2</code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-cloudformation-init-configset-example2.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"AWS::CloudFormation::Init" : <span>{</span>
    "configSets" : <span>{</span>
        "test1" : [ "1" ],
        "test2" : [ <span>{</span> "ConfigSet" : "test1" }, "2" ],
        "default" : [ <span>{</span> "ConfigSet" : "test2" } ]
    },
    "1" : <span>{</span>
        "commands" : <span>{</span>
            "test" : <span>{</span>
                "command" : "echo \"$MAGIC\" &gt; test.txt",
                "env" : <span>{</span> "MAGIC" : "I come from the environment!" },
                "cwd" : "~"
            }
        }
    },
    "2" : <span>{</span>
        "commands" : <span>{</span>
            "test" : <span>{</span>
                "command" : "echo \"$MAGIC\" &gt;&gt; test.txt",
                "env" : <span>{</span> "MAGIC" : "I am test 2!" },
                "cwd" : "~"
            }
        }
    }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-cloudformation-init-configset-example2.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWS::CloudFormation::Init:
  1:
    commands:
      test:
        command: "echo \"$MAGIC\" &gt; test.txt"
        env:
          MAGIC: "I come from the environment!"
        cwd: "~"
  2:
    commands:
      test:
        command: "echo \"$MAGIC\" &gt;&gt; test.txt"
        env:
          MAGIC: "I am test 2!"
        cwd: "~"
  configSets: 
    test1:
      - "1"
    test2:
      -
        ConfigSet: "test1"
      - "2"
    default:
      -
        ConfigSet: "test2"</code></pre>
         </div>
          
            <h4 id="w9aac23c15c15c23c13b7b9">Llamadas a cfn-init relacionadas</h4>

            <p>Las siguientes llamadas a cfn-init hacen referencia a los configSets declarados en el anterior fragmento de código de plantilla. Las llamadas de ejemplo se abrevian para facilitar la lectura, consulte <a href="./cfn-init.html">cfn-init</a> para ver la sintaxis completa.</p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Si especifica <code class="code">test1</code> solamente:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">cfn-init -c test1</code></code></pre>
                  <p>cfn-init procesa la clave de configuración <code class="code">1</code> solamente.</p>
               </li><li class="listitem">
                  <p>Si especifica <code class="code">test2</code> solamente:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">cfn-init -c test2</code></code></pre>
                  <p>cfn-init procesa la clave de configuración <code class="code">1</code> y, a continuación, procesa la clave de configuración <code class="code">2</code>.</p>
               </li><li class="listitem">
                  <p>Si especifica el configset <code class="code">default</code> (o ningún configset en absoluto):</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">cfn-init -c default</code></code></pre>
                  <p>Obtendrá el mismo comportamiento que si especifica el configset <code class="code">test2</code>.</p>
               </li></ul></div>
          
       
    
      <h2 id="aws-resource-init-commands">Comandos</h2>

      <p>Puede utilizar la clave de comandos para ejecutar comandos en la instancia de EC2. Los comandos se procesan en orden alfabético por nombre.</p>
      <div class="table-container"><div class="table-contents"><table id="w1348aac17c17c17c19c17b5"><thead>
               <tr>
                  <th>Clave</th>
                  <th>Obligatoria</th>
                  <th>Descripción</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">
                     <p>comando</p>
                  </td>
                  <td tabindex="-1">Obligatoria</td>
                  <td tabindex="-1">
                     <p>Una matriz o bien una cadena que especifica el comando que se va a ejecutar. Si utiliza una matriz, no es preciso que utilizar el carácter de escape para los caracteres de espacio ni incluir los parámetros de comandos entre comillas. No utilice la matriz para especificar varios comandos.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>env</p>
                  </td>
                  <td tabindex="-1">Opcional</td>
                  <td tabindex="-1">
                     <p>Establece las variables de entorno para el comando. Esta propiedad sobrescribe, en lugar de anexar, el entorno existente.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>cwd</p>
                  </td>
                  <td tabindex="-1">Opcional</td>
                  <td tabindex="-1">
                     <p>El directorio de trabajo.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>prueba</p>
                  </td>
                  <td tabindex="-1">Opcional</td>
                  <td tabindex="-1">
                     <p>Un comando de prueba que determina si cfn-init ejecuta comandos que se especifican en la clave del comando. Si se supera la prueba, cfn-init ejecuta los comandos. El script cfn-init script ejecuta la prueba en un intérprete de comandos, como Bash o <code>cmd.exe</code>. Que la prueba se supere depende del código de salida que el intérprete devuelve.</p>
                     <p>En el caso de Linux, el comando de prueba debe devolver un código de salida de <code class="code">0</code> para superar la prueba. En el caso de Windows, el comando de prueba debe devolver un %ERRORLEVEL% de <code class="code">0</code>.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>ignoreErrors</p>
                  </td>
                  <td tabindex="-1">Opcional</td>
                  <td tabindex="-1">
                     <p>Un valor booleano que determina si cfn-init continúa poniéndose en marcha si el comando contenido en la clave de comando falla (devuelve un valor distinto de cero). Establezca en <code class="code">true</code> si desea que cfn-init continúe ejecutándose incluso si el comando falla. Establezca en <code class="code">false</code> si desea que cfn-init deje de ejecutarse si el comando falla. El valor predeterminado es <code class="code">false</code>.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>waitAfterCompletion</p>
                  </td>
                  <td tabindex="-1">Opcional</td>
                  <td tabindex="-1">
                     <p>Para sistemas Windows solamente. Especifica el tiempo durante el que esperar (en segundos) después de que un comando ha terminado en caso de que el comando provoque un reinicio. El valor predeterminado es de 60 segundos y un valor de “forever” indica a cfn-init que salga y reanude la actividad solo después de que se haya completado el reinicio. Establezca este valor en <code class="code">0</code> si no desea esperar cada comando.</p>
                  </td>
               </tr>
            </table></div></div>
       
         <h3 id="w9aac23c15c15c23c15b7">Ejemplo</h3>

         <p>El siguiente fragmento de código de ejemplo llama al comando echo si el archivo <code class="code">~/test.txt</code> no existe.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-commands-example.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"commands" : <span>{</span>
    "test" : <span>{</span>
        "command" : "echo \"$MAGIC\" &gt; test.txt",
        "env" : <span>{</span> "MAGIC" : "I come from the environment!" },
        "cwd" : "~",
        "test" : "test ! -e ~/test.txt",
        "ignoreErrors" : "false"
    },
    "test2" : <span>{</span>
        "command" : "echo \"$MAGIC2\" &gt; test2.txt",
        "env" : <span>{</span> "MAGIC2" : "I come from the environment!" },
        "cwd" : "~",
        "test" : "test ! -e ~/test2.txt",
        "ignoreErrors" : "false"
    }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-commands-example.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">commands:
  test:
    command: "echo \"$MAGIC\" &gt; test.txt"
    env:
      MAGIC: "I come from the environment!"
    cwd: "~"
    test: "test ! -e ~/test.txt"
    ignoreErrors: "false"
  test2:
    command: "echo \"$MAGIC2\" &gt; test2.txt"
    env:
      MAGIC2: "I come from the environment!"
    cwd: "~"
    test: "test ! -e ~/test2.txt"
    ignoreErrors: "false"</code></pre>
         </div>
       
    
      <h2 id="aws-resource-init-files">Archivos</h2>

      <p>Puede utilizar la clave <code class="code">files</code> para crear archivos en la instancia de EC2. El contenido puede ser en línea en la plantilla o el contenido puede extraerse de una URL. Los archivos se escriben en el disco en orden lexicográfico. En la tabla siguiente se muestran las claves admitidas.</p>
      <div class="table-container"><div class="table-contents"><table id="w1348aac17c17c17c19c19b5"><thead>
               <tr>
                  <th>Clave</th>
                  <th>Descripción</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">
                     <p>content</p>
                  </td>
                  <td tabindex="-1">
                     <p>Una cadena o un objeto JSON con formato correcto. Si utiliza un objeto JSON como su contenido, el objeto JSON se escribirá en un archivo en el disco. Cualquier función intrínseca como <code class="code">Fn::GetAtt</code> o <code class="code">Ref</code> se evalúa antes de que el objeto JSON se escriba en el disco. Al crear un symlink, especifique el destino de symlink como el contenido.</p>
                     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si crea un symlink, el script auxiliar modifica los permisos del archivo de destino. Actualmente, no puede crear un symlink sin modificar los permisos del archivo de destino.</p></div></div>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>source</p>
                  </td>
                  <td tabindex="-1">
                     <p>Una URL desde la que cargar el archivo. Esta opción no se puede especificar con la clave de contenido.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>encoding</p>
                  </td>
                  <td tabindex="-1">
                     <p>El formato de la codificación. Solo se utiliza si el contenido es una cadena. La codificación no se aplica si utiliza una fuente.</p>
                     <p>Valores válidos: <code class="code">plain</code> | <code class="code">base64</code></p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>grupo</p>
                  </td>
                  <td tabindex="-1">
                     <p>El nombre del grupo propietario de este archivo. No es compatible con sistemas Windows.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>owner</p>
                  </td>
                  <td tabindex="-1">
                     <p>El nombre del usuario propietario de este archivo. No es compatible con sistemas Windows.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>mode</p>
                  </td>
                  <td tabindex="-1">
                     <p>Un valor octal de seis dígitos que representa el modo para este archivo. No es compatible con sistemas Windows. Utilice los tres primeros dígitos para symlinks y los últimos tres dígitos para la configuración de permisos. Para crear un symlink, especifique <code class="userinput">120<code class="replaceable">xxx</code></code>, donde <code class="code">xxx</code> define los permisos del archivo de destino. Para especificar los permisos de un archivo, utilice los tres últimos dígitos, como <code class="userinput">000644</code>.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>autenticación</p>
                  </td>
                  <td tabindex="-1">
                     <p>El nombre de un método de autenticación que se debe utilizar. Esto anula cualquier autenticación predeterminada. Puede utilizar esta propiedad para seleccionar un método de autenticación definido con el recurso <a href="./aws-resource-authentication.html">AWS::CloudFormation::Authentication</a>.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>context</p>
                  </td>
                  <td tabindex="-1">
                     <p>Especifica un contexto para los archivos que se procesan como <a href="http://mustache.github.io/mustache.5.html" rel="noopener noreferrer" target="_blank"><span>plantillas Mustache</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Para utilizar esta clave, debe tener instalado <code class="code">aws-cfn-bootstrap</code> 1.3 a 11 o posterior, además de <a href="https://github.com/defunkt/pystache" rel="noopener noreferrer" target="_blank"><span>pystache</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                  </td>
               </tr>
            </table></div></div>
       
         <h3 id="w9aac23c15c15c23c17b7">Ejemplos</h3>

         <p>El siguiente fragmento de código de ejemplo crea un archivo denominado setup.mysql como parte de una instalación de mayor tamaño.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-setup-mysql.json">JSON</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"files" : <span>{</span>
  "/tmp/setup.mysql" : <span>{</span>
    "content" : <span>{</span> "Fn::Join" : ["", [
      "CREATE DATABASE ", <span>{</span> "Ref" : "DBName" }, ";\n",
      "CREATE USER '", <span>{</span> "Ref" : "DBUsername" }, "'@'localhost' IDENTIFIED BY '",
                       <span>{</span> "Ref" : "DBPassword" }, "';\n",
      "GRANT ALL ON ", <span>{</span> "Ref" : "DBName" }, ".* TO '", <span>{</span> "Ref" : "DBUsername" },
                       "'@'localhost';\n",
      "FLUSH PRIVILEGES;\n"
      ]]},
    "mode"  : "000644",
    "owner" : "root",
    "group" : "root"
  }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-setup-mysql.yaml">YAML</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">files: 
  /tmp/setup.mysql: 
    content: !Sub |
      CREATE DATABASE $<span>{</span>DBName};
      CREATE USER '$<span>{</span>DBUsername}'@'localhost' IDENTIFIED BY '$<span>{</span>DBPassword}';
      GRANT ALL ON $<span>{</span>DBName}.* TO '$<span>{</span>DBUsername}'@'localhost';
      FLUSH PRIVILEGES;
    mode: "000644"
    owner: "root"
    group: "root"</code></pre>
         </div>
         <p>La plantilla completa está disponible en: <a href="https://s3.amazonaws.com/cloudformation-templates-us-east-1/Drupal_Single_Instance.template" rel="noopener noreferrer" target="_blank"><span>https://s3.amazonaws.com/cloudformation-templates-us-east-1/Drupal_Single_Instance.template</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
         <p>El siguiente fragmento de código de ejemplo crea un symlink <code class="code">/tmp/myfile2.txt</code> que apunta a un archivo <code class="code">/tmp/myfile1.txt</code> existente. Los permisos del archivo de destino <code class="code">/tmp/myfile1.txt</code> se definen por el valor de modo <code class="code">644</code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-symlink.json">JSON</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"files" : <span>{</span>
  "/tmp/myfile2.txt" : <span>{</span>
    "content" : "/tmp/myfile1.txt",
    "mode" : "120644"
  }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-symlink.yaml">YAML</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">files:
  /tmp/myfile2.txt:
    content: "/tmp/myfile1.txt"
    mode: "120644"</code></pre>
         </div>
         <p>Las plantillas Mustache se utilizan principalmente para crear archivos de configuración. Por ejemplo, puede almacenar un archivo de configuración en un bucket de S3 e interpolar Refs y GetAtts de la plantilla, en lugar de usar <a href="./intrinsic-function-reference-join.html">Fn::Join</a>. El siguiente fragmento de código de ejemplo muestra “Content for test9” para <code>/tmp/test9.txt</code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-test9.json">JSON</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">
"files" : <span>{</span>
    "/tmp/test9.txt" : <span>{</span>
        "content" : "Content for <span>{</span><span>{</span>name}}",
        "context" : <span>{</span> "name" : "test9" }
    }
} </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-test9.yaml">YAML</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">files:
  /tmp/test9.txt:
    content: "Content for <span>{</span><span>{</span>name}}"
    context:
      name: "test9"</code></pre>
         </div>
         <p>Cuando trabaje con plantillas Mustache, tenga en cuenta lo siguiente:</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Para que se procesen los archivos, la clave del contexto tiene que estar presente.</p>
            </li><li class="listitem">
               <p>La clave del contexto debe ser un mapa clave-valor, pero se puede anidar.</p>
            </li><li class="listitem">
               <p>Puede procesar archivos con contenido en línea mediante la clave de contenido y archivos remoto mediante la clave de origen.</p>
            </li><li class="listitem">
               <p>La compatibilidad de Mustache depende de la versión de pystache. La versión 0.5.2 es compatible con la <a href="https://github.com/mustache/spec/tree/v1.1.2" rel="noopener noreferrer" target="_blank"><span>especificación Mustache 1.1.2</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
            </li></ul></div>
       
    
      <h2 id="aws-resource-init-groups">Grupos</h2>

      <p>Puede utilizar la clave de grupos para crear grupos de Linux/UNIX y asignar ID de grupo. La clave de grupos no es compatible con sistemas Windows.</p>
      <p>Para crear un grupo, añada un nuevo par clave-valor que asigne un nuevo nombre de grupo a un ID de grupo opcional. La clave “groups” puede contener uno o varios nombres de grupo. En la tabla siguiente, se muestran las claves disponibles.</p>
      <div class="table-container"><div class="table-contents"><table id="w1348aac17c17c17c19c21b7"><thead>
               <tr>
                  <th>Clave</th>
                  <th>Descripción</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">
                     <p>
                        <code class="code">gid</code></p>
                  </td>
                  <td tabindex="-1">
                     <p>Número de ID de grupo.</p>
                     <p>Si se especifica un ID de grupo y el nombre del grupo ya existe, se producirá un error al crear el grupo. Si otro grupo tiene el ID de grupo especificado, el sistema operativo podría rechazar la creación del grupo.</p>
                     <p>Ejemplo: <code class="code"><span>{</span> "gid" : "23" }</code></p>
                  </td>
               </tr>
            </table></div></div>
      
       
         <h3 id="aws-resource-init-groups-snippet">Fragmento de código de ejemplo</h3>

         <p>El siguiente fragmento de código especifica un grupo denominado <code class="code">groupOne</code> sin asignar un ID de grupo y un grupo denominado <code class="code">groupTwo</code> que especifica un valor de ID de grupo de <code class="code">45</code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-groups-snippet.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"groups" : <span>{</span>
    "groupOne" : <span>{</span>},
    "groupTwo" : <span>{</span> "gid" : "45" }
}</code></pre>
         </div>
         
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-groups-snippet.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">groups:
  groupOne: <span>{</span>}
  groupTwo:
    gid: "45"</code></pre>
         </div>
       
    
      <h2 id="aws-resource-init-packages">Paquetes</h2>

      <p>Puede utilizar la clave de paquetes para descargar e instalar aplicaciones y componentes previamente empaquetados. En los sistemas Windows, la clave de paquetes solo admite el instalador MSI.</p>
       
         <h3 id="aws-resource-init-packages-formats">Formatos de paquetes admitidos</h3>

         <p>El script cfn-init admite actualmente los siguientes formatos de paquete: apt, msi, python, rpm, rubygems, yum y Zypper. Los paquetes se procesan en el orden siguiente: rpm, yum/apt/zypper y, a continuación, rubygems y python. No existe ningún orden establecido entre rubygems y python, y los paquetes dentro de cada administrador de paquetes no tienen garantizada la instalación en ningún orden.</p>
       
       
         <h3 id="aws-resource-init-packages-versions">Especificación de versiones</h3>

         <p>Dentro de cada administrador de paquetes, cada paquete se especifica con un nombre de paquete y una lista de versiones. La versión puede ser una cadena, una lista de versiones o una cadena o lista vacía. Una cadena o lista vacía indica que se debe usar la versión más reciente. Para el administrador de rpm, la versión se especifica como una ruta a un archivo en el disco o una URL.</p>
         <p>Si especifica una versión de un paquete, cfn-init intentará instalar esa versión incluso si ya hay una versión más reciente del paquete instalada en la instancia. Algunos administradores de paquetes admiten varias versiones, pero puede haber otros que no. Verifique la documentación del administrador de paquetes para obtener más información. Si no especifica una versión y ya hay una versión del paquete instalada, el script cfn-init no instalará una nueva versión, — presupondrá que desea mantener y utilizar la versión existente.</p>
       
       
         <h3 id="aws-resource-init-packages-snippet">Fragmentos de código de ejemplo</h3>

          
            <h4 id="w9aac23c15c15c23c21b9b3">RPM, yum, Rubygems y Zypper</h4>

            <p>El siguiente fragmento de código especifica una URL de versión para rpm, solicita las últimas versiones de yum y Zypper, y la versión 0.10.2 de chef de rubygems:</p>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-packages-example1.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"rpm" : <span>{</span>
  "epel" : "http://download.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm"
},
"yum" : <span>{</span>
  "httpd" : [],
  "php" : [],
  "wordpress" : []
},
"rubygems" : <span>{</span>
  "chef" : [ "0.10.2" ]
},
"zypper" : <span>{</span>
  "git" : []
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-packages-example1.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">rpm:
  epel: "http://download.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm"
yum:
  httpd: []
  php: []
  wordpress: []
rubygems:
  chef:
    - "0.10.2"
zypper:
  git: []</code></pre>
            </div>
          
          
            <h4 id="w9aac23c15c15c23c21b9b5">Paquete MSI</h4>

            <p>El siguiente fragmento de código especifica una URL para un paquete MSI:</p>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-packages-example2.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"msi" : <span>{</span>
  "awscli" : "https://s3.amazonaws.com/aws-cli/AWSCLI64.msi"
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-packages-example2.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">msi:
  awscli: "https://s3.amazonaws.com/aws-cli/AWSCLI64.msi"</code></pre>
            </div>
          
       
    
      <h2 id="aws-resource-init-services">Servicios</h2>

      <p>Puede utilizar la clave de servicios para definir qué servicios deben habilitarse o deshabilitarse cuando se lanza la instancia. En sistemas Linux, esta clave es compatible con sysvinit o systemd. En sistemas Windows, es compatible con el administrador de servicio de Windows.</p>
      <p>La clave de servicios también le permite especificar dependencias en orígenes, paquetes y archivos, de manera que, si es necesario realizar un reinicio debido a los archivos que se están instalado, cfn-init se encargará de reiniciar el servicio. Por ejemplo, si descarga el paquete del servidor HTTP Apache, la instalación del paquete comenzará automáticamente el servidor HTTP Apache durante el proceso de creación de la pila. Sin embargo, si la configuración del servidor HTTP Apache se actualiza más adelante en el proceso de creación de la pila, la actualización no surtirá efecto hasta que se reinicie el servidor Apache. Puede utilizar la clave de servicios para asegurarse de que se reinicia el servicio HTTP Apache.</p>
      <p>En la tabla siguiente se muestran las claves admitidas.</p>
      <div class="table-container"><div class="table-contents"><table id="w1348aac17c17c17c19c25b9"><thead>
               <tr>
                  <th>Clave</th>
                  <th>Descripción</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">
                     <p>ensureRunning</p>
                  </td>
                  <td tabindex="-1">
                     <p>Establezca en true para garantizar que el servicio se ejecuta una vez que cfn-init termine.</p>
                     <p>Establezca en false para garantizar que el servicio no se ejecuta una vez que cfn-init termine.</p>
                     <p>Omita esta clave para no realizar ningún cambio en el estado del servicio.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>enabled</p>
                  </td>
                  <td tabindex="-1">
                     <p>Establezca en true para garantizar que el servicio comenzará automáticamente al arrancar.</p>
                     <p>Establezca en false para garantizar que el servicio no comenzará automáticamente al arrancar.</p>
                     <p>Omita esta clave para no realizar ningún cambio a esta propiedad.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>files</p>
                  </td>
                  <td tabindex="-1">
                     <p>Una lista de archivos. Si cfn-init cambia uno directamente a través del bloque de archivos, este servicio se reiniciará.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>sources</p>
                  </td>
                  <td tabindex="-1">
                     <p>Una lista de directorios. Si cfn-init amplía un archivo hacia uno de estos directorios, este servicio se reinicia.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>packages</p>
                  </td>
                  <td tabindex="-1">
                     <p>Una asignación del administrador de paquetes con la lista de nombres de paquetes. Si cfn-init instala o actualiza uno de estos paquetes, este servicio se reinicia.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>comandos</p>
                  </td>
                  <td tabindex="-1">
                     <p>Una lista de nombres de comandos. Si cfn-init ejecuta el comando especificado, este servicio se reinicia.</p>
                  </td>
               </tr>
            </table></div></div>
       
         <h3 id="w9aac23c15c15c23c23c11">Ejemplos</h3>

          
            <h4 id="w9aac23c15c15c23c23c11b3">Linux</h4>

            <p>El siguiente fragmento de código de Linux configura los servicios de la siguiente manera:</p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>El servicio nginx se reiniciará si <code class="code">/etc/nginx/nginx.conf</code> o <code class="code">/var/www/html</code> es modificado por cfn-init.</p>
               </li><li class="listitem">
                  <p>El servicio php-fastcgi se reiniciará si cfn-init instala o actualiza php o spawn-fcgi mediante yum.</p>
               </li><li class="listitem">
                  <p>El servicio sendmail se interrumpirá y deshabilitará mediante systemd.</p>
               </li></ul></div>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-services-example1.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"services" : <span>{</span>
  "sysvinit" : <span>{</span>
    "nginx" : <span>{</span>
      "enabled" : "true",
      "ensureRunning" : "true",
      "files" : ["/etc/nginx/nginx.conf"],
      "sources" : ["/var/www/html"]
    },
    "php-fastcgi" : <span>{</span>
      "enabled" : "true",
      "ensureRunning" : "true",
      "packages" : <span>{</span> "yum" : ["php", "spawn-fcgi"] }
    }
  },
  "systemd": <span>{</span>
    "sendmail" : <span>{</span>
      "enabled" : "false",
      "ensureRunning" : "false"
    }
  }
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-services-example1.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">services:
  sysvinit:
    nginx:
      enabled: "true"
      ensureRunning: "true"
      files:
        - "/etc/nginx/nginx.conf"
      sources:
        - "/var/www/html"
    php-fastcgi:
      enabled: "true"
      ensureRunning: "true"
      packages:
        yum:
          - "php"
          - "spawn-fcgi"
  systemd:
    sendmail:
      enabled: "false"
      ensureRunning: "false"</code></pre>
               <p>Para usar systemd con un servicio, este debe tener configurado un archivo de unidad systemd. El siguiente archivo de unidad permite que systemd inicie y detenga el daemon <a href="./cfn-hup.html">cfn-hup</a> en el destino del servicio multiusuario:</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="conf ">[Unit]
Description=cfn-hup daemon
[Service]
ExecStart=/usr/bin/cfn-hup -v
PIDFile=/var/run/cfn-hup.pid
[Install]
WantedBy=multi-user.target</code></pre>
               <p>Esta configuración supone que cfn-hup está instalado en el directorio <em>/usr/bin</em>. Sin embargo, la ubicación real donde se instala cfn-hup puede variar en diferentes plataformas. Puede anular esta configuración al crear un archivo de anulación en <em>/etc/systemd/system/cfn-hup.service.d/override.conf</em> de la siguiente manera:</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="conf "># In this example, cfn-hup executable is available under /usr/local/bin
[Service]
ExecStart=
ExecStart=/usr/local/bin/cfn-hup -v</code></pre>
            </div>
          
          
            <h4 id="aws-resource-init-windows-example">Windows</h4>

            <p>El siguiente fragmento de código de Windows inicia el servicio <a href="./cfn-hup.html">cfn-hup</a>, lo establece en automático y reinicia el servicio si <code class="code">cfn-init</code> modifica los archivos de configuración especificados:</p>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-services-example2.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"services" : <span>{</span>
  "windows" : <span>{</span>
    "cfn-hup" : <span>{</span>
      "enabled" : "true",
      "ensureRunning" : "true",
      "files" : ["c:\\cfn\\cfn-hup.conf", "c:\\cfn\\hooks.d\\cfn-auto-reloader.conf"]
    }
  }
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-services-example2.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">services:
  windows:
    cfn-hup:
      enabled: "true"
      ensureRunning: "true"
      files:
        - "c:\\cfn\\cfn-hup.conf"
        - "c:\\cfn\\hooks.d\\cfn-auto-reloader.conf"</code></pre>
            </div>
          
       
    
      <h2 id="aws-resource-init-sources">Orígenes</h2>

      <p>Puede utilizar la clave de origen para descargar un archivo de almacenamiento y extraerlo en un directorio de destino en la instancia de EC2. Esta clave es totalmente compatible con los sistemas Linux y Windows.</p>
       
         <h6>Formatos admitidos</h6>
         <p>Los formatos admitidos son:</p>
       
      <div class="itemizedlist">
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><code class="code">tar</code></p>
         </li><li class="listitem">
            <p><code class="code">tar+gzip</code></p>
         </li><li class="listitem">
            <p><code class="code">tar+bz2</code></p>
         </li><li class="listitem">
            <p><code class="code">zip</code></p>
         </li></ul></div>
     
         <h3 id="aws-resource-init-sources-examples">Ejemplos</h3>
      
            <h4 id="aws-resource-init-sources-examples-github">GitHub</h4>
            <p>Si utiliza GitHub como un sistema de control de origen, puede utilizar cfn-init y el mecanismo del paquete de origen para extraer una versión específica de su aplicación. GitHub le permite crear un zip o un tar a partir de una versión específica a través de una URL de la siguiente manera:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">https://github.com/&lt;your directory&gt;/(zipball|tarball)/&lt;version&gt;</code></pre>
            <p>Por ejemplo, el siguiente fragmento de código extrae la versión <em>principal</em> como un archivo <code>.tar</code>.</p>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-sources-example1.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"sources" : <span>{</span>
  "/etc/puppet" : "https://github.com/user1/cfn-demo/tarball/main"
  }</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-sources-example1.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">sources:
  /etc/puppet: "https://github.com/user1/cfn-demo/tarball/main"</code></pre>
            </div>
          
      
            <h4 id="aws-resource-init-sources-examples-s3">Bucket de S3</h4>
            <p>En el siguiente ejemplo, se descarga un tarball de un bucket de S3 y se desempaqueta en <code class="code">/etc/myapp</code>:</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Puede utilizar las credenciales de autenticación para un origen. Sin embargo, no puede incluir una clave de autenticación en el bloque de fuentes. En su lugar, incluya una clave de cubos en su bloque de <code class="code">S3AccessCreds</code>. Para obtener más información sobre las credenciales de autenticación de Amazon S3, consulte <a href="./aws-resource-authentication.html">AWS::CloudFormation::Authentication</a>.</p><p><span>Para ver un ejemplo, consulte la <a href="https://s3.amazonaws.com/cloudformation-templates-us-east-1/S3Bucket_SourceAuth.template" rel="noopener noreferrer" target="_blank"><span>plantilla de ejemplo</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</span></p></div></div>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-sources-example2.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"sources" : <span>{</span>
  "/etc/myapp" : "https://s3.amazonaws.com/mybucket/myapp.tar.gz"
  }</code></pre>
               
               
               

            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-sources-example2.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">sources:
  /etc/myapp: "https://s3.amazonaws.com/mybucket/myapp.tar.gz"</code></pre>
               
               
               


            </div>
          
       
    
      <h2 id="aws-resource-init-users">Usuarios</h2>

      <p>Puede utilizar la clave de usuarios para crear usuarios de Linux/UNIX en la instancia de EC2. La clave de usuarios no es compatible con sistemas Windows.</p>
      <p>En la tabla siguiente se muestran las claves admitidas.</p>
      <div class="table-container"><div class="table-contents"><table id="w1348aac17c17c17c19c29b7"><thead>
               <tr>
                  <th>Clave</th>
                  <th>Descripción</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">
                     <p>uid</p>
                  </td>
                  <td tabindex="-1">
                     <p>ID de usuario. El proceso de creación falla si existe un nombre de usuario con otro ID. Si el ID de usuario ya se ha asignado a un usuario existente, el sistema operativo podría rechazar la solicitud de creación.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>groups</p>
                  </td>
                  <td tabindex="-1">
                     <p>Lista de nombres de grupos. Se añadirá al usuario a cada grupo en la lista.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>homeDir</p>
                  </td>
                  <td tabindex="-1">
                     <p>Directorio de inicio del usuario.</p>
                  </td>
               </tr>
            </table></div></div>
       
         <h3 id="aws-resource-init-users-example">Ejemplo</h3>

         <p>Los usuarios se crean como usuarios de un sistema no interactivo con un shell de <code class="code">/sbin/nologin</code>. Esto es así por diseño y no se puede modificar.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-users-example.json">JSON</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"users" : <span>{</span>
    "myUser" : <span>{</span>
        "groups" : ["groupOne", "groupTwo"],
        "uid" : "50",
        "homeDir" : "/tmp"
    }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-users-example.yaml">YAML</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">users:
  myUser:
    groups:
      - "groupOne"
      - "groupTwo"
    uid: "50"
    homeDir: "/tmp"</code></pre>
         </div>
       
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-resource-authentication.html">AWS::CloudFormation::Authentication</div><div id="next" class="next-link" accesskey="n" href="./aws-resource-cloudformation-interface.html">AWS::CloudFormation::Interface</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>