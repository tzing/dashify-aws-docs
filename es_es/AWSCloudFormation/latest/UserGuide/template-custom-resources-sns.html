<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Recursos personalizados y respaldados por Amazon Simple Notification Service - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="template-custom-resources-sns" /><meta name="default_state" content="template-custom-resources-sns" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" /><meta name="description" content="Más información sobre recursos personalizados y respaldados por Amazon SNS en AWS CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Recursos personalizados y respaldados por Amazon Simple Notification Service" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Recursos personalizados y respaldados por Amazon Simple Notification Service - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabajo con plantillas de AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Recursos personalizados",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Recursos personalizados y respaldados por Amazon Simple Notification Service",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#walkthrough-custom-resources-sns-adding-nonaws-resource">Tutorial: Uso de Amazon Simple Notification Service para crear recursos personalizados</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="template-custom-resources-sns">Recursos personalizados y respaldados por Amazon Simple Notification Service</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Cuando se asocia un tema de Amazon SNS con un recurso personalizado, se usan notificaciones para invocar una lógica de aprovisionamiento personalizado de Amazon SNS. Con los recursos personalizados y Amazon SNS, puede habilitar escenarios como añadir nuevos recursos a una pila e inyectar datos dinámicos a una pila. Por ejemplo, al crear una pila, AWS CloudFormation puede enviar una solicitud <code class="code">create</code> a un tema supervisado por una aplicación que se ejecute en una instancia de Amazon Elastic Compute Cloud. La notificación de Amazon SNS activa la aplicación para llevar a cabo tareas de aprovisionamiento adicionales, como recuperar un grupo de IP elásticas de direcciones IP. Después de este proceso, la aplicación envía una respuesta (y los datos de salida) que le notifica a AWS CloudFormation que puede seguir con la operación de la pila.</p><h2 id="walkthrough-custom-resources-sns-adding-nonaws-resource">Tutorial: Uso de Amazon Simple Notification Service para crear recursos personalizados</h2>
      
      
      <p>Este tutorial le guiará paso a paso a través del proceso de recursos personalizados, explicando la secuencia de eventos y mensajes enviados y recibidos como resultado de la creación de pilas de recursos personalizados, actualizaciones y eliminación.</p>
      <h3 id="crpg-walkthrough-stack-creation">Paso 1: Creación de una pila</h3>
         
         <div class="orderedlist">
             
             
             
             
         <ol style="list-style-type:arabic ! important;"><li>
               <p>El desarrollador de plantillas crea una pila de AWS CloudFormation que contiene un recurso personalizado; en el siguiente ejemplo de plantilla, usamos el nombre de tipo de recurso personalizado <code class="code">Custom::SeleniumTester</code> para el recurso personalizado <code class="code">MySeleniumTest</code>.</p>
               <p>El tipo de recurso personalizado se declara con un <em>token de servicio</em>, <em>propiedades específicas de proveedores</em> opcionales y atributos <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a> opcionales que custom resource provider define. Se pueden usar estas propiedades y atributos para pasar a la información del template developer a custom resource provider y viceversa. Los nombres del tipo de recurso personalizado deben ser alfanuméricos y pueden tener una longitud máxima de 60 caracteres.</p>
               <p>El siguiente ejemplo muestra una plantilla que tiene propiedades personalizadas y atributos de devolución:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "AWSTemplateFormatVersion" : "2010-09-09",
   "Resources" : <span>{</span>
      "MySeleniumTest" : <span>{</span>
         "Type": "Custom::SeleniumTester",
         "Version" : "1.0",
         "Properties" : <span>{</span>
            "ServiceToken": "arn:aws:sns:us-west-2:123456789012:CRTest",
            "seleniumTester" : "SeleniumTest()",
            "endpoints" : [ "http://mysite.com", "http://myecommercesite.com/", "http://search.mysite.com" ],
            "frequencyOfTestsPerHour" : [ "3", "2", "4" ]
         }
      }
   },
   "Outputs" : <span>{</span>
      "topItem" : <span>{</span>
         "Value" : <span>{</span> "Fn::GetAtt" : ["MySeleniumTest", "resultsPage"] }
      },
      "numRespondents" : <span>{</span>
         "Value" : <span>{</span> "Fn::GetAtt" : ["MySeleniumTest", "lastUpdate"] }
      }
   }
}</code></pre>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>El proveedor de recursos personalizados devuelve os nombres y los valores de los datos a los que se accede con <code class="code"><code class="code">Fn::GetAtt</code></code> durante la respuesta del proveedor a AWS CloudFormation. Si custom resource provider es de terceros, template developer debe obtener los nombres de estos valores de devolución desde custom resource provider.</p></div></div>
            </li><li>
               <p>AWS CloudFormation envía una notificación de Amazon SNS al proveedor de recursos con un <code class="code">"RequestType" : "Create"</code> que contiene información sobre la pila, las propiedades de recursos personalizados de la plantilla de pila y una URL de S3 para la respuesta.</p>
               <p>El tema de SNS que se usa para enviar la notificación está incrustado en la plantilla en la propiedad <code class="code">ServiceToken</code>. Para evitar el uso de un valor codificado, un desarrollador de plantillas puede usar un parámetro de plantilla para que el valor se ingrese en el momento en que se lanza la pila.</p>
               <p>El siguiente ejemplo muestra una solicitud de recurso <code class="code">Create</code> personalizado que incluye un nombre de tipo de recurso personalizado, <code class="code">Custom::SeleniumTester</code>, creado con un <code class="code">LogicalResourceId</code> de <code class="code">MySeleniumTester</code>:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "RequestType" : "Create",
   "ResponseURL" : "http://pre-signed-S3-url-for-response",
   "StackId" : "arn:aws:cloudformation:us-west-2:123456789012:stack/stack-name/guid",
   "RequestId" : "unique id for this create request",
   "ResourceType" : "Custom::SeleniumTester",
   "LogicalResourceId" : "MySeleniumTester",
   "ResourceProperties" : <span>{</span>
      "seleniumTester" : "SeleniumTest()",
      "endpoints" : [ "http://mysite.com", "http://myecommercesite.com/", "http://search.mysite.com" ],
      "frequencyOfTestsPerHour" : [ "3", "2", "4" ]
   }
}</code></pre>
            </li><li>
               <p>El custom resource provider procesa los datos enviados por el template developer y determina si la solicitud <code class="code">Create</code> se realizó correctamente. El proveedor de recursos usa luego la URL de S3 que AWS CloudFormation ha enviado para remitir una respuesta <code class="code">SUCCESS</code> o <code class="code">FAILED</code>.</p>
               <p>En función del tipo de respuesta, AWS CloudFormation esperará diferentes campos de respuesta. Consulte la sección Responses (Respuestas) del tema de referencia para el RequestType que se está procesando.</p>
               <p>En respuesta a una solicitud de creación o actualización, custom resource provider puede devolver los elementos de datos en el campo de la respuesta <a href="./crpg-ref-responses.html#crpg-ref-responses-data">Datos</a>. Estos son pares de nombre/valor y los <em>nombres</em> corresponden a los atributos <code class="code"><code class="code">Fn::GetAtt</code></code> que se utilizan con el recurso personalizado de la plantilla de pila. Los <em>valores</em> son los datos que se devuelven cuando el desarrollador de la plantilla llama a <code class="code"><code class="code">Fn::GetAtt</code></code> por el recurso con el nombre de atributo.</p>
               <p>El siguiente es un ejemplo de respuesta de recursos personalizados:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Status" : "SUCCESS",
   "PhysicalResourceId" : "Tester1",
   "StackId" : "arn:aws:cloudformation:us-west-2:123456789012:stack/stack-name/guid",
   "RequestId" : "unique id for this create request",
   "LogicalResourceId" : "MySeleniumTester",
   "Data" : <span>{</span>
      "resultsPage" : "http://www.myexampledomain/test-results/guid",
      "lastUpdate" : "2012-11-14T03:30Z",
   }
}           </code></pre>
               <p>Los campos <code class="code">StackId</code>, <code class="code">RequestId</code> y <code class="code">LogicalResourceId</code> deben copiarse textualmente de la solicitud.</p>
            </li><li>
               <p> AWS CloudFormation declara el estado de pila como <code class="code">CREATE_COMPLETE</code> o <code class="code">CREATE_FAILED</code>. Si la pila se ha creado correctamente, template developer puede utilizar los valores de salida del recurso personalizado que se ha creado, accediendo a ellos con <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.</p>
               <p>Por ejemplo, la plantilla de recursos personalizados empleados para ilustrar usó <code class="code"><code class="code">Fn::GetAtt</code></code> para copiar salidas de recursos en las salidas de pila:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Outputs" : <span>{</span>
   "topItem" : <span>{</span>
      "Value" : <span>{</span> "Fn::GetAtt" : ["MySeleniumTest", "resultsPage"] }
   },
   "numRespondents" : <span>{</span>
      "Value" : <span>{</span> "Fn::GetAtt" : ["MySeleniumTest", "lastUpdate"] }
   }
}           </code></pre>
            </li></ol></div>
         <p>Para obtener información detallada acerca de los objetos de solicitud y respuesta implicados en las solicitudes de <code class="code">Create</code>, consulte <a href="./crpg-ref-requesttypes-create.html">Crear</a> en la <a href="./crpg-ref.html">Referencia de recursos personalizados</a>.</p>
       
      <h3 id="crpg-walkthrough-stack-updates">Paso 2: Actualizaciones de pila</h3>
         
         <p>Para actualizar una pila existente, debe enviar una plantilla que especifique las actualizaciones de las propiedades de recursos de la pila, tal y como se muestra en el ejemplo siguiente. AWS CloudFormation actualiza solo los recursos que tienen cambios especificados en la plantilla. Para obtener más información sobre la actualización de pilas, consulte <a href="./using-cfn-updating-stacks.html">Actualizaciones de pila de AWS CloudFormation</a>.</p>
         <p>Puede actualizar los recursos personalizados que requieren una sustitución del recurso físico subyacente. Al actualizar un recurso personalizado en una plantilla de AWS CloudFormation, AWS CloudFormation envía una solicitud de actualización a dicho recurso personalizado. Si un recurso personalizado requiere una sustitución, el nuevo recurso personalizado debe enviar una respuesta con el nuevo ID físico. Cuando AWS CloudFormation recibe la respuesta, compara el <code class="code">PhysicalResourceId</code> entre los recursos personalizados antiguos y nuevos. Si son diferentes, AWS CloudFormation reconoce la actualización como reemplazo y envía una solicitud de eliminación al antiguo recurso, tal y como se muestra en <a href="#crpg-walkthrough-stack-deletion">Paso 3: Eliminación de pila</a>.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si no realiza cambios en el recurso personalizado, AWS CloudFormation no le enviará solicitudes durante la actualización de una pila.</p></div></div>
         <div class="orderedlist">
             
             
             
             
         <ol style="list-style-type:arabic ! important;"><li>
               <p>template developer inicia una actualización de la pila que contiene un recurso personalizado. Durante una actualización, template developer puede especificar nuevas propiedades en la plantilla de pila.</p>
               <p>El siguiente es un ejemplo de <code class="code">Update</code> para la plantilla de pila que usa un tipo de recurso personalizado:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "AWSTemplateFormatVersion" : "2010-09-09",
   "Resources" : <span>{</span>
      "MySeleniumTest" : <span>{</span>
         "Type": "Custom::SeleniumTester",
         "Version" : "1.0",
         "Properties" : <span>{</span>
            "ServiceToken": "arn:aws:sns:us-west-2:123456789012:CRTest",
            "seleniumTester" : "SeleniumTest()",
            "endpoints" : [ "http://mysite.com", "http://myecommercesite.com/", "http://search.mysite.com",
               "http://mynewsite.com" ],
            "frequencyOfTestsPerHour" : [ "3", "2", "4", "3" ]
         }
      }
   },
   "Outputs" : <span>{</span>
      "topItem" : <span>{</span>
         "Value" : <span>{</span> "Fn::GetAtt" : ["MySeleniumTest", "resultsPage"] }
      },
      "numRespondents" : <span>{</span>
         "Value" : <span>{</span> "Fn::GetAtt" : ["MySeleniumTest", "lastUpdate"] }
      }
   }
}           </code></pre>
            </li><li>
               <p>AWS CloudFormation envía una notificación de Amazon SNS al proveedor de recursos con un <code class="code">"RequestType" : "Update"</code> que contiene información similar a la llamada <code class="code">Create</code>, salvo que el campo <code class="code">OldResourceProperties</code> contiene las propiedades del antiguo recurso y ResourceProperties contiene las del recurso actualizado (si existe).</p>
               <p>El siguiente es un ejemplo de una solicitud de <code class="code">Update</code>:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "RequestType" : "Update",
   "ResponseURL" : "http://pre-signed-S3-url-for-response",
   "StackId" : "arn:aws:cloudformation:us-west-2:123456789012:stack/stack-name/guid",
   "RequestId" : "uniqueid for this update request",
   "LogicalResourceId" : "MySeleniumTester",
   "ResourceType" : "Custom::SeleniumTester",  
   "PhysicalResourceId" : "Tester1",
   "ResourceProperties" : <span>{</span>
      "seleniumTester" : "SeleniumTest()",
      "endpoints" : [ "http://mysite.com", "http://myecommercesite.com/", "http://search.mysite.com",
         "http://mynewsite.com" ],
      "frequencyOfTestsPerHour" : [ "3", "2", "4", "3" ]
   },
   "OldResourceProperties" : <span>{</span>
      "seleniumTester" : "SeleniumTest()",
      "endpoints" : [ "http://mysite.com", "http://myecommercesite.com/", "http://search.mysite.com" ],
      "frequencyOfTestsPerHour" : [ "3", "2", "4" ]
   }
}          </code></pre>
            </li><li>
               <p>El proveedor de recursos personalizado procesa los datos enviados por AWS CloudFormation. El recurso personalizado realiza la actualización y envía una respuesta <code class="code">SUCCESS</code> o <code class="code">FAILED</code> a la URL de S3. Entonces AWS CloudFormation compara los <code class="code">PhysicalResourceIDs</code> de los recursos personalizados antiguos y nuevos. Si son diferentes, AWS CloudFormation reconoce que actualización requiere una sustitución y envía una solicitud de eliminación al antiguo recurso. El siguiente ejemplo demuestra la respuesta de custom resource provider a una solicitud de <code class="code">Update</code>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Status" : "SUCCESS",
   "StackId" : "arn:aws:cloudformation:us-west-2:123456789012:stack/stack-name/guid",
   "RequestId" : "uniqueid for this update request",
   "LogicalResourceId" : "MySeleniumTester",
   "PhysicalResourceId" : "Tester2"
}           </code></pre>
               <p>Los campos <code class="code">StackId</code>, <code class="code">RequestId</code> y <code class="code">LogicalResourceId</code> deben copiarse textualmente de la solicitud.</p>
            </li><li>
               <p>AWS CloudFormation declara el estado de pila como <code class="code">UPDATE_COMPLETE</code> o <code class="code">UPDATE_FAILED</code>. Si falla la actualización, la pila vuelve a su estado anterior. Si la pila se ha actualizado correctamente, template developer puede obtener acceso a cualquier nuevo valor de salida del recurso personalizado creado con <code class="code"><code class="code">Fn::GetAtt</code></code>.</p>
            </li></ol></div>
         <p>Para obtener información detallada acerca de los objetos de solicitud y respuesta implicados en las solicitudes de <code class="code">Update</code>, consulte <a href="./crpg-ref-requesttypes-update.html">Actualizar</a> en la <a href="./crpg-ref.html">Referencia de recursos personalizados</a>.</p>
       
      <h3 id="crpg-walkthrough-stack-deletion">Paso 3: Eliminación de pila</h3>
         
         <div class="orderedlist">
             
             
             
             
         <ol style="list-style-type:arabic ! important;"><li>
               <p>El desarrollador de plantillas elimina una pila que contiene un recurso personalizado. AWS CloudFormation obtiene las propiedades actuales especificadas en la plantilla de pila junto con el tema de SNS y se prepara para llevar a cabo una solicitud al proveedor de recursos personalizados.</p>
            </li><li>
               <p>AWS CloudFormation envía una notificación de Amazon SNS al proveedor de recursos con un <code class="code">"RequestType" : "Delete"</code> que contiene información actual sobre la pila, las propiedades de recursos personalizados de la plantilla de pila y una URL de S3 para la respuesta.</p>
               <p>Cuando se elimina una pila o se hace una actualización que elimina o sustituye el recurso personalizado, AWS CloudFormation compara el <code class="code">PhysicalResourceId</code> de los recursos personalizados antiguos con los nuevos. Si son diferentes, AWS CloudFormation reconoce la actualización como reemplazo y envía una solicitud de eliminación para el recurso anterior (<code class="code">OldPhysicalResource</code>), tal y como se muestra en el siguiente ejemplo de una solicitud de <code class="code">Delete</code>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "RequestType" : "Delete",
   "ResponseURL" : "http://pre-signed-S3-url-for-response",
   "StackId" : "arn:aws:cloudformation:us-west-2:123456789012:stack/stack-name/guid",
   "RequestId" : "unique id for this delete request",
   "ResourceType" : "Custom::SeleniumTester",
   "LogicalResourceId" : "MySeleniumTester",
   "PhysicalResourceId" : "Tester1",
   "ResourceProperties" : <span>{</span>
      "seleniumTester" : "SeleniumTest()",
      "endpoints" : [ "http://mysite.com", "http://myecommercesite.com/", "http://search.mysite.com",
         "http://mynewsite.com" ],
      "frequencyOfTestsPerHour" : [ "3", "2", "4", "3" ]
   }
}    
            </code></pre>
               <p><code class="code">DescribeStackResource</code>, <code class="code">DescribeStackResources</code> y <code class="code">ListStackResources</code> muestran el nombre definido por el usuario en caso de que se haya especificado.</p>
            </li><li>
               <p>El proveedor de recursos personalizado procesa los datos enviados por AWS CloudFormation y determina si la solicitud de <code class="code">Delete</code> se llevó a cabo correctamente. El proveedor de recursos usa luego la URL de S3 que AWS CloudFormation ha enviado para remitir una respuesta <code class="code">SUCCESS</code> o <code class="code">FAILED</code>. Para poder eliminar correctamente una pila con un recurso personalizado, el custom resource provider debe responder correctamente a una solicitud de eliminación.</p>
               <p>A continuación se muestra un ejemplo de respuesta de custom resource provider a una solicitud de <code class="code">Delete</code>:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Status" : "SUCCESS",
   "StackId" : "arn:aws:cloudformation:us-west-2:123456789012:stack/stack-name/guid",
   "RequestId" : "unique id for this delete request",
   "LogicalResourceId" : "MySeleniumTester",
   "PhysicalResourceId" : "Tester1"
}         </code></pre>
               <p>Los campos <code class="code">StackId</code>, <code class="code">RequestId</code> y <code class="code">LogicalResourceId</code> deben copiarse textualmente de la solicitud.</p>
            </li><li>
               <p>AWS CloudFormation declara el estado de pila como <code class="code">DELETE_COMPLETE</code> o <code class="code">DELETE_FAILED</code>.</p>
            </li></ol></div>
         <p>Para obtener información detallada acerca de los objetos de solicitud y respuesta implicados en solicitudes de <code class="code">Delete</code>, consulte <a href="./crpg-ref-requesttypes-delete.html">Eliminar</a> en la <a href="./crpg-ref.html">Referencia de recursos personalizados</a>.</p>
       
      <h3 id="w9aac23c26c14b5c12">Véase también</h3>
         
         <div class="itemizedlist">
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p><a href="./crpg-ref.html">AWS CloudFormation Referencia de recursos personalizados</a></p>
            </li><li class="listitem">
               <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-customresource.html"><code class="code">AWS::CloudFormation::CustomResource</code></a></p>
            </li><li class="listitem">
               <p><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></p>
            </li></ul></div>
       
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./template-custom-resources.html">Recursos personalizados</div><div id="next" class="next-link" accesskey="n" href="./template-custom-resources-lambda.html">Recursos personalizados y respaldados por AWS Lambda</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>