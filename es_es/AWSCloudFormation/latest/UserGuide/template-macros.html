<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Uso de macros de AWS CloudFormation para realizar un procesamiento personalizado en plantillas - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="template-macros" /><meta name="default_state" content="template-macros" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="description" content="Utilice macros para realizar un procesamiento personalizado de plantillas, desde acciones sencillas como operaciones de búsqueda y reemplazo, hasta amplias transformaciones de plantillas completas." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Uso de macros de AWS CloudFormation para realizar un procesamiento personalizado en plantillas" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Uso de macros de AWS CloudFormation para realizar un procesamiento personalizado en plantillas - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabajo con plantillas de AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Uso de macros de AWS CloudFormation para realizar un procesamiento personalizado en plantillas",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-guide.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#template-macros-overview">Cómo funcionan las macros de AWS CloudFormation</a><a href="#template-macros-author">Creación de una definición de macro de AWS CloudFormation</a><a href="#template-macros-use">Uso de macros de AWS CloudFormation en sus plantillas</a><a href="#template-macros-examples-list">Ejemplos de macros</a><a href="#template-macros-seealso">Véase también</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="template-macros">Uso de macros de AWS CloudFormation para realizar un procesamiento personalizado en plantillas</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Las macros le permiten realizar un procesamiento personalizado de plantillas, desde acciones sencillas como operaciones de búsqueda y reemplazo, hasta amplias transformaciones de plantillas completas.</p><p>Para que se haga una idea de la gran variedad de posibilidades, piense en las transformaciones <code class="code">AWS::Include</code> y <code class="code">AWS::Serverless</code>, que son macros alojadas por AWS CloudFormation:</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p><code class="code"><a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Transformación AWS::Include</a></code> le permite insertar fragmentos de código reutilizable en las plantillas.</p>
        </li><li class="listitem">
            <p><code class="code"><a href="./transform-aws-serverless.html">Transformación AWS::Serverless</a></code> toma una plantilla completa escrita en la sintaxis de AWS Serverless Application Model (AWS SAM) y la transforma y amplía en una plantilla de AWS CloudFormation conforme. (Para obtener más información acerca de las aplicaciones sin servidor y AWS SAM, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/deploying-lambda-apps.html">Implementación de aplicaciones basadas en Lambda</a> en la <em>Guía para desarrolladores de AWS Lambda</em>.)</p>
        </li></ul></div><h2 id="template-macros-overview">Cómo funcionan las macros de AWS CloudFormation</h2><p>El procesamiento de plantillas con macros consta de dos fases principales: <em>crear</em> la macro en sí y luego <em>usar</em> la macro para procesar las plantillas.</p><p>Para crear una definición de macro, tiene que crear lo siguiente:</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>Una función de AWS Lambda para realizar el procesamiento de la plantilla. Esta función de Lambda acepta un fragmento de código o bien la totalidad de la plantilla, así como los parámetros adicionales que se definan. Devuelve el fragmento de código de plantilla procesados o toda la plantilla como respuesta.</p>
        </li><li class="listitem">
            <p>Un recurso del tipo <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></code>, para que los usuarios puedan llamar a la función de Lambda desde plantillas de AWS CloudFormation. Este recurso especifica el ARN de la función de Lambda para invocar esta macro y propiedades opcionales adicionales para ayudar con la depuración. Para crear este recurso dentro de una cuenta, cree una plantilla de pila que incluya un recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></code> y, a continuación, cree otra pila a partir de la plantilla. AWS Actualmente, CloudFormation StackSets no es compatible con la creación o la actualización de conjuntos de pilas con permisos administrados por servicios a partir de plantillas que hacen referencia a macros.</p>
        </li></ul></div><p>Para utilizar una macro, consulte la macro en su plantilla:</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>Para procesar una sección o un <em>fragmento</em> de una plantilla, consulte la macro en una función <code class="code"><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></code> que se encuentre ubicada en relación con el contenido de la plantilla que desea transformar. Cuando utilice <code class="code">Fn::Transform</code>, también puede transferir todos los parámetros especificados que requiera.</p>
        </li><li class="listitem">
            <p>Para procesar una plantilla completa, consulte la macro en la sección <a href="./transform-section-structure.html">Transform</a> de la plantilla.</p>
        </li></ul></div><p>A continuación, se suele crear un conjunto de cambios y, a continuación, ejecutarlo. (El procesamiento de macros puede agregar varios recursos de los que quizás no esté al tanto. Para asegurarse de que está al tanto de todos los cambios hechos por las macros, le recomendamos usar conjuntos de cambios). AWS CloudFormation pasa el contenido de la plantilla especificada, junto con cualquier parámetro especificado adicional, a la función de Lambda especificada en el recurso de macro. La función de Lambda devuelve el contenido de la plantilla procesada, ya sea como fragmento o como una plantilla completa.</p><p>Después de que se hayan llamado a todas las macros de la plantilla, AWS CloudFormation genera un conjunto de cambios que incluye el contenido de la plantilla procesada. Después de revisar el conjunto de cambios, ejecútelo para aplicar los cambios.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Si la plantilla del conjunto de pilas hace referencia a una o más macros, debe crear el conjunto de pilas directamente desde la plantilla procesada, sin revisar primero los cambios resultantes en un conjunto de cambios. Para crear o actualizar el conjunto de pilas directamente, debe utilizar las acciones <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> y especificar la capacidad de <code class="code">CAPABILITY_AUTO_EXPAND</code>. Antes de crear o actualizar un conjunto de pilas a partir de una plantilla que haga referencia directamente a macros, asegúrese de saber qué procesamiento realiza cada macro.</p></div></div><div class="mediaobject">
         
            
            <img src="images/template-macro-use.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;            Use la función Fn::Transform intrínseca o la sección Transform de la plantilla, para pasar el contenido de la plantilla y sus parámetros asociados a la función de Lambda subyacente de la macro, que devuelve el contenido de la plantilla procesada.&#xA;        " style="max-width:100%" />
         
         
    </div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si se siente cómodo creando o actualizando una pila directamente desde una plantilla procesada, sin antes haber revisado los cambios propuestos en un conjunto de cambios, puede hacerlo especificando la capacidad <code class="code">CAPABILITY_AUTO_EXPAND</code> durante una solicitud <code class="code">UpdateStack</code> o <code class="code">CreateStack</code>. Solo debe crear pilas directamente desde una plantilla de pila que haga referencia a macros si sabe qué procesamiento realiza cada macro.</p><p>Para obtener más información, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html">CreateStack</a> o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html">UpdateStack</a> en la <em>Referencia de la API de AWS CloudFormation</em>.</p></div></div><h2 id="template-macros-author">Creación de una definición de macro de AWS CloudFormation</h2>
        <p>Al crear una definición de macro, la definición de macro hace que la función de Lambda subyacente esté disponible en la cuenta especificada, de modo que AWS CloudFormation pueda llamarla para procesar las plantillas.</p>
        
        <h3 id="template-macros-lambda-interface">Interfaz de la función de macro de AWS CloudFormation</h3>
            <p>Para macros, AWS CloudFormation invoca las funciones de Lambda subyacentes con la siguiente asignación de eventos. AWS CloudFormation envía su solicitud en formato JSON y espera que la respuesta de la función también esté en formato JSON.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "region" : "<code class="replaceable">us-east-1</code>",
    "accountId" : "<code class="replaceable">$ACCOUNT_ID</code>",
    "fragment" : <span>{</span> <code class="replaceable">...</code> },
    "transformId" : "<code class="replaceable">$TRANSFORM_ID</code>",
    "params" : <span>{</span> <code class="replaceable">...</code> },
    "requestId" : "<code class="replaceable">$REQUEST_ID</code>",
    "templateParameterValues" : <span>{</span> <code class="replaceable">...</code> }
}</code></pre>

            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><b>region</b></p>
                    <p>La región en la que la reside la macro.</p>
                </li><li class="listitem"><p><b>accountId</b></p>
                    <p>El ID de la cuenta desde la que la macro invoca la función de Lambda.</p>
                </li><li class="listitem"><p><b>fragment</b></p>
                    <p>El contenido de la plantilla disponible para el procesamiento personalizado, en formato JSON.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem"><p>Para las macros incluidas en la sección de plantilla <code class="code">Transform</code>, esto es toda la plantilla, a excepción de la sección <code class="code">Transform</code>.</p></li><li class="listitem"><p>Para macros incluidas en una llamada de función intrínseca <code class="code">Fn::Transform</code>, esto incluye todos los nodos secundarios (y sus hijos) en función de la ubicación de la función intrínseca dentro de la plantilla, excepto para la función <code class="code">Fn::Transform</code>. Para obtener más información, consulte <a href="#template-macros-scope">Ámbito de las macros de AWS CloudFormation</a>.</p></li></ul></div>
                </li><li class="listitem"><p><b>transformId</b></p>
                    <p>El nombre de la macro que invoca esta función.</p>
                </li><li class="listitem"><p><b>params</b></p>
                    <p>Para las llamadas de función <code class="code">Fn::Transform</code>, todos los parámetros especificados para la función. AWS CloudFormation no evalúa estos parámetros antes de transferirlos a la función.</p>
                    <p>Para macros incluidas en la sección de plantilla <code class="code">Transform</code>, esta sección está vacía.</p>
                </li><li class="listitem"><p><b>requestId</b></p>
                    <p>El ID de la solicitud que invoca esta función.</p>
                </li><li class="listitem"><p><b>templateParameterValues</b></p>
                    <p>Todos los parámetros especificados en la sección <a href="./parameters-section-structure.html">Parámetros</a> de la plantilla. AWS CloudFormation evalúa estos parámetros antes de transferirlos a la función.</p>
                </li></ul></div>
            <p>AWS CloudFormation espera que la función subyacente devuelva una respuesta con formato JSON siguiente:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "requestId" : "<code class="replaceable">$REQUEST_ID</code>",
    "status" : "<code class="replaceable">$STATUS</code>",
    "fragment" : <span>{</span> <code class="replaceable">...</code> }
    "errorMessage": "optional error message for failures"
}</code></pre>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><b>requestId</b></p>
                    <p>El ID de la solicitud que invoca esta función. Debe coincidir con el ID de la solicitud que proporciona AWS CloudFormation al invocar la función.</p>
                </li><li class="listitem"><p><b>estado</b></p>
                    <p>El estado de la solicitud (no distingue entre mayúsculas y minúsculas). Debe establecerse en <code class="code">success</code>. AWS CloudFormation trata todas las demás respuestas como error.</p>
                </li><li class="listitem"><p><b>fragment</b></p>
                    <p>El contenido de la plantilla procesada en AWS CloudFormation para incluir en la plantilla procesada, incluidos los hermanos. AWS CloudFormation sustituye el contenido de la plantilla que se transfiere a la función de Lambda con el fragmento de código de plantilla que recibe en la respuesta de Lambda.</p>
                    <p>El contenido de la plantilla procesada tiene que ser un formato JSON válido, y su inclusión en la plantilla procesada debe generar una plantilla válida.</p>
                    <p>Si la función no cambia realmente el contenido de la plantilla que AWS CloudFormation le pasa, pero el usuario sigue necesitando incluir ese contenido en la plantilla procesada, la función debe devolver dicho contenido de plantilla a AWS CloudFormation en su respuesta.</p>
                </li><li class="listitem">
                    <p><b>errorMessage</b></p>
                    <p>El mensaje de error que explica por qué falló la transformación. CloudFormation muestra este mensaje de error en el panel <b>Events</b> (Eventos) de la página <b>Stack details</b> (Detalles de la pila) para la pila.</p>
                    <p>Por ejemplo, “(Error al crear un conjunto de cambios. Se produjo un error en la transformación del <code class="replaceable">Cuenta de AWS número de cuenta</code>::<code class="replaceable">nombre de macro</code>: <code class="replaceable">cadena de mensaje de error</code>)”.</p>
                </li></ul></div>
            <p>Para obtener más información sobre consideraciones adicionales al crear macros, consulte <a href="#template-macros-considerations">Consideraciones sobre la creación de definiciones de macros de AWS CloudFormation</a>.</p>
         
        
        <h3 id="template-macros-permissions">Ámbito y permisos de la cuenta de macro de AWS CloudFormation</h3>
            <p>Puede utilizar macros solo en la cuenta en la que se han creado como un recurso. El nombre de la macro tiene que ser único en una cuenta determinada. Sin embargo, puede hacer que la misma funcionalidad esté disponible en varias cuentas habilitando el acceso entre cuentas en la función de Lambda subyacente y, a continuación, creando definiciones de macro que haga referencia a dicha función en varias cuentas. En el ejemplo siguiente, tres cuentas macro contienen definiciones y cada una de ellas apunta a la misma función de Lambda.</p>
            <div class="mediaobject">
                 
                    <img src="images/template-macro-accounts.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                    Al permitir el acceso entre cuentas en la función de Lambda, AWS le permite crear macros en varias cuentas que hacen referencia a esa función.&#xA;                " style="max-width:100%" />
                 
                 
            </div>
            <p>Para obtener más información, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-overview.html">Información general de la administración de permisos de acceso a sus recursos de AWS Lambda</a>) en la <em>Guía para desarrolladores de AWS Lambda</em>.</p>
            <p>Para crear una definición de macro, el usuario debe tener permisos para crear una pila o un conjunto de pilas dentro de la cuenta especificada.</p>
            <p>Para que AWS CloudFormation ejecute correctamente una macro incluida en una plantilla, el usuario debe tener permisos de <code class="code">Invoke</code> para la función de Lambda subyacente. Para evitar posibles transmisiones de permisos, AWS CloudFormation representa al usuario al ejecutar la macro. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/intro-permission-model.html">Modelo de permisos de Lambda</a> en la <em>Guía para desarrolladores de AWS Lambda</em> y <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/list_lambda.html">Claves de contexto de condición y acciones para AWS Lambda</a> en la <em>Guía del usuario de IAM</em>.</p>
            <p>Las transformaciones <a href="./transform-aws-serverless.html">Transformación AWS::Serverless</a> y <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Transformación AWS::Include</a> son macros alojadas por AWS CloudFormation. No se necesitan permisos especiales para utilizarlas y están disponibles desde cualquier cuenta en AWS CloudFormation.</p>
          
        <h3 id="template-macros-debug">Depuración de macros de AWS CloudFormation</h3>
            <p>Para ayudar en la depuración, también puede especificar las propiedades <code class="code">LogGroupName</code> y <code class="code">LogRoleArn</code> al crear el tipo de recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a> para su macro. Estas propiedades le permiten especificar el grupo de registro de CloudWatch al que AWS CloudFormation envía la información de registro de errores al invocar la función de AWS Lambda subyacente de la macro y el rol que AWS CloudFormation debe asumir al enviar entradas de registro a dichos registros.</p>
          
        <h3 id="template-macros-billing">Facturación</h3>
            <p>Cuando se ejecuta una macro, se factura al propietario de la función de Lambda todos los gastos relacionados con la ejecución de esa función.</p>
            <p>Las transformaciones <a href="./transform-aws-serverless.html">Transformación AWS::Serverless</a> y <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Transformación AWS::Include</a> son macros alojadas por AWS CloudFormation. No se cobra por usarlas.</p>
         
        <h3 id="template-macros-considerations">Consideraciones sobre la creación de definiciones de macros de AWS CloudFormation</h3>
            <p>Al crear definiciones de macros, tenga en cuenta lo siguiente:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                
                 
                 
                 
                
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p>Las macros se admiten únicamente en Regiones de AWS donde AWS Lambda está disponible. Para ver una lista de las regiones en las que Lambda está disponible, consulte <a href="https://docs.aws.amazon.com/general/latest/gr/lambda-service.html">Puntos de conexión y cuotas de AWS Lambda</a>.</p></li><li class="listitem"><p>Todos los fragmentos de código de plantilla procesados tienen que ser un JSON válido.</p></li><li class="listitem"><p>Cualquier fragmento de plantilla procesado debe pasar las comprobaciones de validación para una operación de creación de pila, actualización de pila, creación de conjunto de pilas o actualización de conjunto de pilas.</p></li><li class="listitem"><p>AWS CloudFormation resuelve en primer lugar las macros y, a continuación, procesa la plantilla. La plantilla obtenida tiene que ser un JSON válido y no debe superar el límite de tamaño de la plantilla.</p></li><li class="listitem"><p>Debido al orden en que CloudFormation procesa los elementos de una plantilla, una macro no puede incluir módulos en el contenido de la plantilla procesada que devuelve a CloudFormation. Para obtener más información sobre módulos, consulte <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/modules.html">Developing modules</a> (Desarrollo de módulos) en la <em>Guía del usuario de la CLI de CloudFormation</em>.</p></li><li class="listitem"><p>Cuando se utiliza la característica de restauración de actualizaciones, AWS CloudFormation utiliza una copia de la plantilla original. Se restaura en la plantilla original incluso si el fragmento de código incluido se ha cambiado.</p></li><li class="listitem"><p>La inclusión de macros en macros no funciona ya que las macros no se procesan de manera iterativa.</p></li><li class="listitem"><p>La función intrínseca <code class="code">Fn::ImportValue</code> no es compatible actualmente en las macros.</p></li><li class="listitem"><p>Las funciones intrínsecas incluidas en la plantilla se evalúan después de cualquier macro. Por lo tanto, el contenido de plantilla procesado que su macro devuelve puede incluir llamadas a funciones intrínsecas y se evalúan como de costumbre.</p></li><li class="listitem"><p>StackSets actualmente no es compatible con la creación o la actualización de conjuntos de pilas con permisos administrados por servicios a partir de plantillas que hacen referencia a macros de AWS CloudFormation.</p></li><li class="listitem"><p>Si la plantilla del conjunto de pilas hace referencia a una o más macros, debe crear o actualizar el conjunto de pilas directamente desde la plantilla procesada, sin revisar primero los cambios resultantes en un conjunto de cambios. Para crear o actualizar el conjunto de pilas directamente, debe utilizar las acciones <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> y especificar la capacidad de <code class="code">CAPABILITY_AUTO_EXPAND</code>. El procesamiento de macros puede añadir numerosos recursos que usted podría desconocer. Antes de crear o actualizar un conjunto de pilas a partir de una plantilla que haga referencia directamente a macros, asegúrese de saber qué procesamiento realiza cada macro.</p></li><li class="listitem">
                    
                    <p>Actualmente, los conjuntos de cambios no admiten pilas anidadas. Si desea crear o actualizar una pila mediante una plantilla de pilas que haga referencia a macros <em>y</em> contenga pilas anidadas, deberá crear o actualizar la pila directamente. Para hacerlo, use la acción <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html"><code class="code">CreateStack</code></a> o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html"><code class="code">UpdateStack</code></a> y especifique la capacidad de <code class="code">CAPABILITY_AUTO_EXPAND</code>.</p>
                </li></ul></div>
         
        <div class="procedure"><h6>Para crear una definición de macro de AWS CloudFormation:</h6><ol><li>
                <p><a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-app.html"> Desarrolle una función AWS Lambda</a> que procese plantillas de AWS CloudFormation.</p>
                <p>La función de Lambda que crea realiza el procesamiento del contenido de la plantilla. Su función puede procesar cualquier parte de una plantilla, incluida la plantilla entera. Para obtener más información acerca del mapeo de eventos que la función debe cumplir, consulte <a href="#template-macros-lambda-interface">Interfaz de la función de macro de AWS CloudFormation</a>. Para obtener más información sobre consideraciones adicionales al crear macros, consulte <a href="#template-macros-considerations">Consideraciones sobre la creación de definiciones de macros de AWS CloudFormation</a>.</p>
            </li><li>
                <p><a href="./template-guide.html">Cree una plantilla</a> que contenga un tipo de recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a>.</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem"><p>Tiene que especificar las propiedades <code class="code">Name</code> y <code class="code">FunctionName</code>. La propiedad <code class="code">FunctionName</code> especifica el ARN de la función de Lambda para invocar cuándo AWS CloudFormation ejecuta la macro.</p></li><li class="listitem"><p>Para ayudar en la depuración, también puede especificar las propiedades <code class="code">LogGroupName</code> y <code class="code">LogRoleArn</code>.</p></li></ul></div>
            </li><li>
                <p><a href="./cfn-console-create-stack.html">Cree una pila</a> a partir de la plantilla que contiene la macro en la cuenta deseada, o <a href="./stacksets-getting-started-create.html#stacksets-getting-started-create-self-managed">cree un conjunto de pilas con permisos autoadministrados</a> a partir la plantilla que hace referencia a la macro en la cuenta de administrador y, a continuación, cree instancias de pilas en las cuentas de destino deseadas.</p>
                <p>Una vez que AWS CloudFormation haya creado correctamente las pilas que contienen la definición de la macro, esta estará disponible para su uso en dichas cuentas.</p>
            </li></ol></div>


    <h2 id="template-macros-use">Uso de macros de AWS CloudFormation en sus plantillas</h2>
        <p>Una vez que AWS CloudFormation haya creado correctamente las pilas que contienen la definición de la macro, esta estará disponible para su uso en dichas cuentas. Una macro se utiliza haciendo referencia a ella en una plantilla, en la ubicación adecuada relevante para el contenido de la plantilla que desea procesar.</p>
        <h3 id="template-macros-order">Orden de evaluación de macros de AWS CloudFormation</h3>
            <p>Puede consultar varias macros de una determinada plantilla, incluidas transformaciones alojadas por AWS CloudFormation, como <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Transformación AWS::Include</a> y <a href="./transform-aws-serverless.html">Transformación AWS::Serverless</a>.</p>
            <p>Las macros se evalúan en orden, en función de su ubicación en la plantilla, desde la que esté más profundamente anidada hasta la más general. Las macros que están en la misma ubicación de la plantilla se evalúan en serie en función del orden en que aparecen en la lista.</p>
            <p>Las transformaciones como, por ejemplo, <code class="code">AWS::Include</code> y <code class="code">AWS::Transform</code>, se tratan de la misma manera que cualquier otra macro en términos de orden y ámbito de acción.</p>
            <p>Por ejemplo, en la siguiente plantilla de ejemplo, AWS CloudFormation evalúa primero la macro <code class="code">PolicyAdder</code>, ya que es la macro que está anidada más profundamente en la plantilla. Luego, AWS CloudFormation evalúa <code class="code">MyMacro</code>, antes de evaluar <code class="code">AWS::Serverless</code>, ya que está en la lista antes que <code class="code">AWS::Serverless</code> en la sección <code class="code">Transform</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
 Transform: [MyMacro, AWS::Serverless]
 Resources:
    WaitCondition:
      Type: AWS::CloudFormation::WaitCondition
    MyBucket:
      Type: 'AWS::S3::Bucket'
      Properties:
        BucketName: MyBucket
        Tags: [<span>{</span>"key":"value"}]
        'Fn::Transform':
          - Name: PolicyAdder
        CorsConfiguration:[]
    MyEc2Instance:
      Type: 'AWS::EC2::Instance'
      Properties:
        ImageID: "ami-123"</code></pre>
          
        
        <h3 id="template-macros-scope">Ámbito de las macros de AWS CloudFormation</h3>
            <p>Las macros a las que se hace referencia en la sección <code class="code">Transform</code> de una plantilla pueden procesar todo el contenido de dicha plantilla.</p>
            <p>Las macros a las que se hace referencia en una función <code class="code">Fn::Transform</code> pueden procesar el contenido de cualquiera de los elementos del mismo nivel (incluidos los elementos secundarios) de dicha función <code class="code">Fn::Transform</code> en la plantilla.</p>
            <p>Por ejemplo, en la siguiente plantilla de ejemplo, <code class="code">AWS::Include</code> puede procesar todas las propiedades <code class="code">MyBucket</code>, en función de la ubicación de la función <code class="code">Fn::Transform</code> que lo contiene. <code class="code">MyMacro</code> puede procesar el contenido de toda la plantilla debido a su inclusión en la sección <code class="code">Transform</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">
// Start of processable content for MyMacro
AWSTemplateFormatVersion: 2010-09-09 
 Transform: [MyMacro]
 Resources:
    WaitCondition:
      Type: AWS::CloudFormation::WaitCondition
    MyBucket:
      Type: 'AWS::S3::Bucket'  //Start of processable content for AWS::Include
      Properties:
        BucketName: MyBucket 
        Tags: [<span>{</span>"key":"value"}] 
        'Fn::Transform':
          - Name: 'AWS::Include'
              Parameters:
                Location: s3://<code class="replaceable">DOC-EXAMPLE-BUCKET</code>/MyFileName.yaml
        CorsConfiguration:[]   //End of processable content for AWS::Include
    MyEc2Instance:
      Type: 'AWS::EC2::Instance' 
      Properties:
        ImageID: "ami-123"
// End of processable content for MyMacro         </code></pre>
          
        
         
         <h3 id="template-macros-change-sets">Conjuntos de cambios y macros de AWS CloudFormation</h3>
            <p>Para crear o actualizar una pila utilizando una plantilla que hace referencia a macros, normalmente debe crear un conjunto de cambios y ejecutarlo. Un conjunto de cambios describe las acciones que CloudFormation realizará en función de la plantilla procesada. El procesamiento de macros puede añadir numerosos recursos que usted podría desconocer. Para asegurarse de estar al tanto de todos los cambios hechos por las macros, sugerimos usar conjuntos de cambios. Después de revisar el conjunto de cambios, puede ejecutarlo para aplicar realmente los cambios.</p>
            <p>Una macro puede añadir recursos de IAM a su plantilla. Para estos recursos, AWS CloudFormation necesita que <a href="./using-iam-template.html#using-iam-capabilities">reconozca sus capacidades</a>. Dado que AWS CloudFormation no puede saber qué recursos se agregan antes de procesar su plantilla, es posible que tenga que reconocer las capacidades de IAM al crear el conjunto de cambios, en función de si las macros a las que se hace referencia contienen recursos de IAM. De este modo, al ejecutar el conjunto de cambios, AWS CloudFormation tiene las capacidades necesarias para crear recursos de IAM.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Si la plantilla del conjunto de pilas hace referencia a una o más macros, debe crear el conjunto de pilas directamente desde la plantilla procesada, sin revisar primero los cambios resultantes en un conjunto de cambios. Para crear o actualizar el conjunto de pilas directamente, debe utilizar las acciones <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> y especificar la capacidad de <code class="code">CAPABILITY_AUTO_EXPAND</code>. Antes de crear o actualizar un conjunto de pilas a partir de una plantilla que haga referencia directamente a macros, asegúrese de saber qué procesamiento realiza cada macro.</p></div></div>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si se siente cómodo creando o actualizando una pila directamente desde una plantilla procesada, sin antes haber revisado los cambios propuestos en un conjunto de cambios, puede hacerlo especificando la capacidad <code class="code">CAPABILITY_AUTO_EXPAND</code> durante una solicitud <code class="code">UpdateStack</code> o <code class="code">CreateStack</code>. Solo debe crear pilas directamente desde una plantilla de pila que contiene macros si sabe qué procesamiento realiza la macro. No puede utilizar conjuntos de cambios con macros de conjuntos de pilas y debe actualizar el conjunto de pilas directamente.</p><p>Para obtener más información consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html"><code class="code">CreateStack</code></a> o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html"><code class="code">UpdateStack</code></a> en la <em>Referencia de la API de AWS CloudFormation</em>.</p></div></div>
            <p>Si utiliza la AWS CLI, puede utilizar los comandos <code class="code">package</code> y <code class="code">deploy</code> para reducir el número de pasos para lanzar pilas desde plantillas que hacen referencia a macros. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/deploying-lambda-apps.html">Implementación de aplicaciones basadas en Lambda</a> en la <em>Guía para desarrolladores de AWS Lambda</em>.</p>
         
   
        <h3 id="template-macros-template-stage">Fase de plantilla y macros de CloudFormation</h3>
            <p>La <em>fase</em> de una plantilla indica si se trata de la plantilla enviada por el usuario original o una plantilla en la que AWS CloudFormation ha procesado las macros.</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><code class="code">Original</code>: la plantilla que el usuario envió originalmente para crear o actualizar la pila o el conjunto de pilas.</p></li><li class="listitem"><p><code class="code">Processed</code>: la plantilla que AWS CloudFormation utilizó para crear o actualizar la pila o el conjunto de pilas después de procesar todas las macros de referencia. La plantilla procesada se formatea como JSON, incluso si la plantilla original tenía el formato YAML.</p></li></ul></div>
            <p>Utilice la plantilla procesada para la resolución de problemas de la pila. Si una plantilla no hace referencia a macros, las plantillas original y procesada son idénticas.</p>
            <p>Puede usar la <a href="./cfn-console-view-stack-data-resources.html">consola</a> de AWS CloudFormation o <a href="./using-cfn-get-template.html">AWS CLI</a> para ver la fase de la plantilla de una pila.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>El tamaño máximo de una plantilla de pila procesada es de 51 200 bytes cuando se pasa directamente a una solicitud <code class="code">CreateStack</code>, <code class="code">UpdateStack</code> o <code class="code">ValidateTemplate</code>, o 1 MB cuando se pasa como un objeto S3 utilizando una URL de plantilla de Amazon S3. Sin embargo, durante el procesamiento, CloudFormation actualiza el estado temporal de la plantilla, ya que procesa en serie las macros contenidas en la plantilla. Por este motivo, el tamaño de la plantilla <em>durante el procesamiento</em> puede superar temporalmente el tamaño máximo permitido de una plantilla totalmente procesada. CloudFormation permite cierta cantidad de búfer para estas plantillas en proceso. Sin embargo, debería diseñar las plantillas y macros teniendo en cuenta el tamaño máximo permitido para una plantilla de pila procesada.</p><p>Si CloudFormation devuelve un error <code class="code">Transformation data limit exceeded</code> al procesar su plantilla, significa que la plantilla ha superado el tamaño máximo de plantilla que CloudFormation permite durante el procesamiento.</p><p>Para resolver este problema, realice lo siguiente:</p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem"><p>Reestructure la plantilla en varias plantillas para evitar superar el tamaño máximo de las plantillas en proceso. Por ejemplo:</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem"><p>Utilice plantillas de pila anidadas para encapsular las partes de la plantilla. Para obtener más información, consulte <a href="./using-cfn-nested-stacks.html">Uso de pilas anidadas</a>.</p></li><li class="listitem"><p>Cree varias pilas y utilice referencias de pila cruzadas para intercambiar información entre ellas. Para obtener más información, consulte <a href="./walkthrough-crossstackref.html">Tutorial: Consulte las salidas de recursos en otra pila de AWS CloudFormation</a>.</p></li></ul></div>
                    </li><li class="listitem"><p>Reduzca el tamaño de fragmento de plantilla devuelto por una determinado macro. CloudFormation no modifica el contenido de los fragmentos devuelto por macros.</p></li></ul></div></div></div>
         
        
        <div class="procedure"><h6>Para utilizar una macro de AWS CloudFormation en la plantilla</h6><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Para que AWS CloudFormation ejecute correctamente una macro a la que se hace referencia en una plantilla, el usuario debe tener permisos de <code class="code">Invoke</code> para la función de Lambda subyacente. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-overview.html">Información general de la administración de permisos de acceso a sus recursos de AWS Lambda</a>) en la <em>Guía para desarrolladores de AWS Lambda</em>.</p></div></div><ol><li>
                <p>Incluya una referencia a la macro en la plantilla.</p>
                <div class="itemizedlist">
                     
                      
                <ul class="itemizedlist"><li class="listitem">
                        <p>Para procesar un fragmento de código de una plantilla, haga referencia a la macro en una función <code class="code"><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></code> que se encuentre ubicada en relación con el contenido de la plantilla que desea procesar.</p>
                    </li><li class="listitem">
                        <p>Para procesar la plantilla completa, consulte la macro en la sección <a href="./transform-section-structure.html">Transform</a> de la plantilla.</p>
                    </li></ul></div>
            </li><li>
                <p><a href="./using-cfn-updating-stacks-changesets-create.html">Cree un conjunto de cambios</a> con la plantilla.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Si la plantilla del conjunto de pilas hace referencia a una o más macros, debe crear el conjunto de pilas directamente desde la plantilla procesada, sin revisar primero los cambios resultantes en un conjunto de cambios. Para crear o actualizar el conjunto de pilas directamente, debe utilizar las acciones <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> y especificar la capacidad de <code class="code">CAPABILITY_AUTO_EXPAND</code>. Antes de crear o actualizar un conjunto de pilas a partir de una plantilla que haga referencia directamente a macros, asegúrese de saber qué procesamiento realiza cada macro.</p></div></div>
            </li><li>
                <p>Revise y <a href="./using-cfn-updating-stacks-changesets-execute.html">ejecute el conjunto de cambios</a>.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Si la plantilla del conjunto de pilas hace referencia a una o más macros, debe crear el conjunto de pilas directamente desde la plantilla procesada, sin revisar primero los cambios resultantes en un conjunto de cambios. Para crear o actualizar el conjunto de pilas directamente, debe utilizar las acciones <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> y especificar la capacidad de <code class="code">CAPABILITY_AUTO_EXPAND</code>. Antes de crear o actualizar un conjunto de pilas a partir de una plantilla que haga referencia directamente a macros, asegúrese de saber qué procesamiento realiza cada macro.</p></div></div>
            </li></ol></div>

     
        <h2 id="template-macros-examples-list">Ejemplos de macros</h2>
        <p>Además del <a href="./macros-example.html">Ejemplo de macro: creación y uso de una macro</a> tutorial de esta guía, encontrará ejemplos de macros, incluido el código fuente y plantillas, en la sección <a href="https://github.com/awslabs/aws-cloudformation-templates/tree/master/aws/services/CloudFormation/MacrosExamples/" rel="noopener noreferrer" target="_blank"><span>Ejemplos de macros</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> del repositorio <a href="https://github.com/awslabs" rel="noopener noreferrer" target="_blank"><span>Amazon Web Services - Labs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> en GitHub. Estos ejemplos se proporcionan “tal cual” para fines pedagógicos.</p>
    <h2 id="template-macros-seealso">Véase también</h2>
        <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></p>

        <p><a href="./transform-section-structure.html">Transform</a></p>
        <p><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></p>
        
        <p><a href="./transform-aws-serverless.html">Transformación AWS::Serverless</a></p>
        <p><a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Transformación AWS::Include</a></p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./crpg-ref-requesttypes-update.html">Actualización</div><div id="next" class="next-link" accesskey="n" href="./macros-example.html">Ejemplo de macro: creación y uso de una macro</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>