<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Continuación de la restauración de una actualización - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-cfn-updating-stacks-continueupdaterollback" /><meta name="default_state" content="using-cfn-updating-stacks-continueupdaterollback" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="description" content="Para una pila en el estado UPDATE_ROLLBACK_FAILED, solucione el error que ha provocado el error y continúe restaurando la actualización para devolver la pila a un estado de funcionamiento (UPDATE_ROLLBACK_COMPLETE)." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guía del usuario" /><meta name="abstract" content="Cree y administre implementaciones de infraestructura de AWS de forma predecible y repetida mediante AWS CloudFormation con esta Guía del usuario." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guía del usuario" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guía del usuario" /><meta id="panorama-serviceConsolePage" value="Continuación de la restauración de una actualización" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Continuación de la restauración de una actualización - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,aprovisionamiento de recursos,configuración de recursos,administración de la infraestructura,CloudFormer,Pila de CloudFormation,Conjunto de pilas de CloudFormation,Plantilla de CloudFormation,conjunto de cambios" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía del usuario",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabajo con pilas de",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Actualizaciones de pila de AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Continuación de la restauración de una actualización",
        "item" : "https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guía del usuario</a></div><div id="page-toc-src"><a href="#nested-stacks">Use ResourcesToSkip para recuperar una jerarquía de pilas anidadas</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-cfn-updating-stacks-continueupdaterollback">Continuación de la restauración de una actualización</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Una pila pasa al estado <code class="code">UPDATE_ROLLBACK_FAILED</code> cuando AWS CloudFormation no puede restaurar todos los cambios realizados durante una actualización. Por ejemplo, puede tener una pila que comience a restaurar una antigua instancia de base de datos que se eliminó fuera de CloudFormation. Dado que CloudFormation no sabe que la base de datos se ha eliminado, asume que la instancia de base de datos aún existe e intenta restaurarla, lo que provoca que la restauración de la actualización falle.</p><p>Cuando una pila está en el estado <code class="code">UPDATE_ROLLBACK_FAILED</code>, puede seguir restaurándola al estado de funcionamiento (<code class="code">UPDATE_ROLLBACK_COMPLETE</code>). No se puede actualizar una pila que se encuentra en el estado <code class="code">UPDATE_ROLLBACK_FAILED</code>. Sin embargo, si puede seguir restaurándola, puede recuperar la configuración original de la pila y, a continuación, intentar actualizarla de nuevo.</p><p>En la mayoría de los casos, debe solucionar el error que hace que la restauración de la actualización genere un error antes de continuar la restauración de la pila. Para obtener más información, consulte . En otros casos, puede continuar la restauración de la actualización sin ningún cambio, por ejemplo cuando se agota el tiempo de espera de una operación de pila.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si utiliza pilas anidadas, al restaurar la pila principal se intentará restaurar también todas las pilas secundarias.</p></div></div><div class="procedure"><h6>Para continuar la restauración de una actualización (consola)</h6><ol><li><p>Abra la consola de AWS CloudFormation en <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
      <p>Seleccione la pila que desea actualizar, elija <b>Stack actions (Acciones de pila)</b> y, a continuación, elija <b>Continue update rollback (Continuar la restauración de la actualización)</b>.</p>

      <p>Si no funciona ninguna de las soluciones de <a href="./troubleshooting.html#troubleshooting-errors">Solución de errores</a>, puede utilizar la opción avanzada para omitir los recursos que CloudFormation no puede restaurar correctamente. Debe <a href="./cfn-console-view-stack-data-resources.html">buscar</a> y escribir los ID lógicos de los recursos que desea omitir. Especifique únicamente los recursos que han pasado al estado <code class="code">UPDATE_FAILED</code> durante la operación <code class="code">UpdateRollback</code> y no durante la actualización de reenvío.</p>
      <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>aviso</h6></div><div class="awsdocs-note-text"><p>CloudFormation establece el estado de los recursos especificados como <code class="code">UPDATE_COMPLETE</code> y continúa restaurando la pila. Después de que la restauración se haya completado, el estado de los recursos omitidos será incompatible con el estado de los recursos de la plantilla de pila. Antes de realizar otra actualización de pila, debe actualizar la pila o los recursos para que sean coherentes entre sí. De lo contrario, las actualizaciones de pilas posteriores podrían fallar y la pila será irrecuperable.</p></div></div>
      <p>Especifique el número mínimo de recursos necesarios para restaurar correctamente la pila. Por ejemplo, una actualización de recursos incorrecta podría provocar que los recursos dependientes fallaran. En este caso, no sería necesario omitir los recursos dependientes.</p>
      <p>Para omitir los recursos que forman parte de pilas anidadas, utilice el siguiente formato: <code class="code"><code class="replaceable">NestedStackName</code>.<code class="replaceable">ResourceLogicalID</code></code>. Si desea especificar el ID lógico de un recurso de pila (<code class="code">Type: AWS::CloudFormation::Stack</code>) en la lista <code class="code">ResourcesToSkip</code>, su pila integrada correspondiente debe estar en uno de los siguientes estados: <code class="code">DELETE_IN_PROGRESS</code>, <code class="code">DELETE_COMPLETE</code> o <code class="code">DELETE_FAILED</code>.</p>
    </li></ol></div><div class="procedure"><h6>Para continuar con la restauración de una actualización (AWS CLI)</h6><ul><li>
   <p>Utilice el comando <code class="code"><a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/continue-update-rollback.html">aws cloudformation continue-update-rollback</a></code> con la opción <code class="code">stack-name</code> para especificar el ID del pila que desea seguir restaurando.</p></li></ul></div><h2 id="nested-stacks">Use <code class="code">ResourcesToSkip</code> para recuperar una jerarquía de pilas anidadas</h2>
    
    <p>En el siguiente diagrama, se muestra una jerarquía de pilas anidadas que se encuentran en el estado <code class="code">UPDATE_ROLLBACK_FAILED</code>. En este ejemplo, la pila raíz <code class="code">WebInfra</code> tiene dos pilas anidadas: <code class="code">WebInfra-Compute</code> y <code class="code">WebInfra-Storage</code>, que a su vez tienen una o varias pilas anidadas.</p>
    <div class="mediaobject">
       
        <img src="images/cfn-update-stack-continue-update-rollback_nested-stacks.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Un diagrama muestra una jerarquía de tres niveles de pilas anidadas.&#xA;      " style="max-width:100%" />
       
       
    </div>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Los nombres de pilas de este ejemplo se han cortado para simplificar. CloudFormation suele generar nombres de pila secundarios, que contienen cadenas aleatorias únicas, por lo que es posible que los nombres reales no sean intuitivos.</p></div></div>      
    <p>Para poder poner correctamente la pila raíz en un estado de funcionamiento utilizando <code class="code">continue-update-rollback</code>, debe utilizar el parámetro <code class="code">resources-to-skip</code> para omitir recursos que no se pudieron restaurar. En este ejemplo, <code class="code">resources-to-skip</code> podría incluir los siguientes elementos:</p>
    <div class="orderedlist">
       
       
       
       
    <ol><li><p>myCustom</p></li><li><p>WebInfra-Compute-Asg.myAsg</p></li><li><p>WebInfra-Compute-LB.myLoadBalancer</p></li><li><p>WebInfra-Storage.DB</p></li></ol></div>
    <p>En el siguiente ejemplo se utiliza el comando de la AWS CLI completo:</p>
    <pre class="programlisting"><div class="code-btn-container"></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation continue-update-rollback --stack-name WebInfra \
    --resources-to-skip myCustom WebInfra-Compute-Asg.myAsg WebInfra-Compute-LB.myLoadBalancer WebInfra-Storage.DB</code></code></pre>
    <p>Hemos especificado los recursos de las pilas anidadas mediante el formato <code class="code"><code class="replaceable">NestedStackName</code>.<code class="replaceable">ResourceLogicalID</code></code>, pero para los recursos de la pila raíz, como <em>myCustom</em>, solo hemos especificado el ID lógico.</p>
    <p><b>Encontrar el nombre de pila de una pila anidada</b></p>
    <p>Puede encontrar el nombre de una pila secundaria en su ID de pila o nombre de recurso de Amazon (ARN). En el siguiente ejemplo, el nombre de la pila es <em>WebInfra-Storage-Z2VKC706XKXT</em>:</p>
    <p><code class="code">arn:aws:cloudformation:us-east-1:123456789012:stack/WebInfra-Storage-Z2VKC706XKXT/ea9e7f90-54f7-11e6-a032-028f3d2330bd</code></p>  
    <p><b>Encontrar el ID lógico de una pila anidada</b></p>
    <p>Puede encontrar el ID lógico de una pila secundaria en la definición de plantilla de su principal. En el diagrama, el <code class="code">LogicalId</code> de la pila secundaria <code class="code">WebInfra-Storage-DB</code> es <em>DB</em> en su <code class="code">WebInfra-Storage</code> principal.</p>
    <p>En la consola de CloudFormation, también puede encontrar el ID lógico en la columna <b>Logical ID (ID lógico)</b> del recurso de pila en la pestaña <b>Resources (Recursos)</b> o la pestaña <b>Events (Eventos)</b>.</p>
<awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./protect-stack-resources.html">Impida actualizaciones en los recursos de la pila</div><div id="next" class="next-link" accesskey="n" href="./using-cfn-stack-drift.html">Detección de cambios de configuración no administrados en pilas y recursos</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>