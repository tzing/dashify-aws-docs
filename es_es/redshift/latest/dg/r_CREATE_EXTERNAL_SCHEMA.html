<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE EXTERNAL SCHEMA - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_EXTERNAL_SCHEMA" /><meta name="default_state" content="r_CREATE_EXTERNAL_SCHEMA" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="description" content="Crea un nuevo esquema externo." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guía para desarrolladores de bases de datos" /><meta name="abstract" content="Cree y administre un almacenamiento de datos con Amazon Redshift, un servicio de almacenamiento de datos completamente administrado a escala de petabytes de nivel empresarial." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guía para desarrolladores de bases de datos" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de bases de datos" /><meta id="panorama-serviceConsolePage" value="CREATE EXTERNAL SCHEMA" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE EXTERNAL SCHEMA - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_CREATE_EXTERNAL_SCHEMA" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Clúster,almacenamiento de datos,desarrollador,datos de ejemplo,base de datos,desarrollador de base de datos,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de bases de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referencia de SQL",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Comandos SQL",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE EXTERNAL SCHEMA",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_CREATE_EXTERNAL_SCHEMA" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guía para desarrolladores de bases de datos</a></div><div id="page-toc-src"><a href="#r_CREATE_EXTERNAL_SCHEMA-synopsis">Sintaxis</a><a href="#r_CREATE_EXTERNAL_SCHEMA-parameters">Parámetros</a><a href="#r_CREATE_EXTERNAL_SCHEMA_usage">Notas de uso</a><a href="#r_CREATE_EXTERNAL_SCHEMA_examples">Ejemplos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_CREATE_EXTERNAL_SCHEMA">CREATE EXTERNAL SCHEMA</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Crea un nuevo esquema externo en la base de datos actual. Puede utilizar este esquema externo para conectarse a las bases de datos de Amazon RDS for PostgreSQL o la Edición compatible con PostgreSQL de Amazon Aurora. También puede crear un esquema externo que referencie una base de datos en un catálogo de datos externo, como AWS Glue, Athena o una base de datos en un metastore de Apache Hive, como Amazon EMR.</p><p>El propietario de este esquema es el emisor del comando CREATE EXTERNAL SCHEMA. Para transferir la propiedad de un esquema externo, use <a href="./r_ALTER_SCHEMA.html">ALTER SCHEMA</a> para cambiar el propietario. Para conceder acceso al esquema a otros usuarios o grupos utilice el comando <a href="./r_GRANT.html">GRANT</a>. </p><p>No puede usar los comandos GRANT o REVOKE para los permisos en una tabla externa. En lugar de ello, conceda o revoque los permisos en el esquema externo. </p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Si actualmente tiene tablas externas de Redshift Spectrum en el catálogo de datos de Amazon Athena, puede migrar el catálogo de datos de Athena a un AWS Glue Data Catalog. Para utilizar el catálogo de datos de AWS Glue con Redshift Spectrum, es posible que tenga que cambiar las políticas de AWS Identity and Access Management (IAM). Para obtener más información, consulte <a href="https://docs.aws.amazon.com/athena/latest/ug/glue-athena.html#glue-upgrade">Actualización al catálogo de datos de AWS Glue</a> en la <em>Guía del usuario de Athena</em>.</p></div></div><p>Para ver detalles de los esquemas externos, consulte la vista del sistema <a href="./r_SVV_EXTERNAL_SCHEMAS.html">SVV_EXTERNAL_SCHEMAS</a>. </p>
         <h2 id="r_CREATE_EXTERNAL_SCHEMA-synopsis">Sintaxis</h2>
         <p>La sintaxis siguiente describe el comando CREATE EXTERNAL SCHEMA utilizado para hacer referencia a datos mediante un catálogo de datos externo. Para obtener más información, consulte <a href="./c-using-spectrum.html">Consulta de datos externos mediante Amazon Redshift Spectrum</a>.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>local_schema_name</em>
FROM <span>{</span> [ DATA CATALOG ] | HIVE METASTORE | POSTGRES | MYSQL | KINESIS | MSK | REDSHIFT }
[ DATABASE '<em>database_name</em>' ]
[ SCHEMA '<em>schema_name</em>' ]
[ REGION '<em>aws-region</em>' ]
[ URI '<em>hive_metastore_uri</em>' [ PORT <em>port_number</em> ] ]
IAM_ROLE <span>{</span> default | 'SESSION' | 'arn:aws:iam::<code class="replaceable">&lt;Cuenta de AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
[ SECRET_ARN '<em>ssm-secret-arn</em>' ]
[ AUTHENTICATION <span>{</span> none | iam } ]
[ CLUSTER_ARN 'arn:aws:kafka:<code class="replaceable">&lt;region&gt;</code>:<code class="replaceable">&lt;Cuenta de AWS-id&gt;</code>:cluster/msk/<code class="replaceable">&lt;cluster uuid&gt;</code>' ]
[ CATALOG_ROLE <span>{</span> 'SESSION' | <em>'catalog-role-arn-string'</em> } ]
[ CREATE EXTERNAL DATABASE IF NOT EXISTS ]
[ CATALOG_ID '<em>Amazon Web Services account ID containing Glue or Lake Formation database</em>' ]</pre>

         <p>La siguiente sintaxis describe el comando CREATE EXTERNAL SCHEMA que se utiliza para referenciar datos mediante una consulta federada a RDS POSTGRES o Aurora PostgreSQL. También se puede crear un esquema externo que haga referencia a orígenes de streaming, como Kinesis Data Streams. Para obtener más información, consulte <a href="./federated-overview.html">Consulta de datos con consultas federadas en Amazon Redshift</a>.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>local_schema_name</em>
FROM POSTGRES
DATABASE '<em>federated_database_name</em>' [SCHEMA '<em>schema_name</em>']
URI '<em>hostname</em>' [ PORT <em>port_number</em> ]
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;Cuenta de AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
SECRET_ARN '<em>ssm-secret-arn</em>'
</pre>

         
         
         
         <p>La siguiente sintaxis describe el comando CREATE EXTERNAL SCHEMA que se utiliza para referenciar datos mediante una consulta federada a RDS MySQL o Aurora MySQL. Para obtener más información, consulte <a href="./federated-overview.html">Consulta de datos con consultas federadas en Amazon Redshift</a>.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>local_schema_name</em>
FROM MYSQL
DATABASE '<em>federated_database_name</em>'
URI '<em>hostname</em>' [ PORT <em>port_number</em> ]
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;Cuenta de AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
SECRET_ARN '<em>ssm-secret-arn</em>'
</pre>

         
         <p>La siguiente sintaxis describe el comando CREATE EXTERNAL SCHEMA que se utiliza para hacer referencia a datos de un flujo de Kinesis. Para obtener más información, consulte <a href="./materialized-view-streaming-ingestion.html">Ingesta de streaming</a>.</p>

<pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>schema_name</em>
FROM KINESIS
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;Cuenta de AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
</pre>

         
         <p>La siguiente sintaxis describe el comando CREATE EXTERNAL SCHEMA utilizado para hacer referencia al clúster de Amazon Managed Streaming para Apache Kafka y los temas desde los cuales se incorpora. CLUSTER_ARN especifica el clúster de Amazon MSK del que está leyendo los datos. Para obtener más información, consulte <a href="./materialized-view-streaming-ingestion.html">Ingesta de streaming</a>.</p>

         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>schema_name</em>
FROM MSK
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;Cuenta de AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
AUTHENTICATION <span>{</span> none | iam }
CLUSTER_ARN 'msk-cluster-arn';
</pre>

         

         <p>La siguiente sintaxis describe el comando CREATE EXTERNAL SCHEMA que se utiliza para referenciar datos mediante una consulta entre distintas bases de datos.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA <em>local_schema_name</em>
FROM  REDSHIFT
DATABASE '<em>redshift_database_name</em>' SCHEMA '<em>redshift_schema_name</em>'</pre>

       
         <h2 id="r_CREATE_EXTERNAL_SCHEMA-parameters">Parámetros</h2>
         <div class="variablelist">
             
             
             

            

             

             

             
             

             
             
             
            
             
             
             
             

             
             

          
         <dl>
               <dt><span class="term">IF NOT EXISTS</span></dt>
               <dd>
                  <p>Una cláusula que indica que si el esquema especificado ya existe, el comando no debe realizar cambios y debe devolver un mensaje en el que se indique que el esquema existe, en lugar de terminar con un error. Esta cláusula es útil cuando se realiza scripting, para que el script no produzca un error si CREATE EXTERNAL SCHEMA intenta crear un esquema que ya existe. </p>
               </dd>
             
               <dt><span class="term">nombre_de_esquema_local</span></dt>
               <dd>
                  <p>El nombre del nuevo esquema externo. Para obtener más información acerca de los nombres válidos, consulte <a href="./r_names.html">Nombres e identificadores</a>.</p>
               </dd>
             
               <dt><span class="term">FROM [ DATA CATALOG ] | HIVE METASTORE | POSTGRES | MYSQL | KINESIS | MSK | REDSHIFT </span></dt>
               <dd>
                  <p>Una palabra clave que indica dónde está ubicada la base de datos externa. </p>
                  <p>DATA CATALOG indica que la base de datos externa se define en el catálogo de datos de Athena o en el AWS Glue Data Catalog. </p>
                  <p>Si la base de datos externa se define en un catálogo de datos externo en una región de AWS diferente, el parámetro REGION es obligatorio. DATA CATALOG es el valor predeterminado.</p>
                  <p>HIVE METASTORE indica que la base de datos externa está definida en un metaalmacén Apache Hive. Si se especifica HIVE METASTORE, se requiere el URI. </p>
                  <p>POSTGRES indica que la base de datos externa está definida en RDS PostgreSQL o Aurora PostgreSQL.</p>
                  <p>MYSQL indica que la base de datos externa está definida en RDS MySQL o Aurora MySQL.</p>
                  <p>KINESIS indica que el origen de datos es un flujo de Kinesis Data Streams.</p>
                  <p>MSK indica que el origen de datos es un tema de Amazon MSK.</p>
               </dd>
             

               <dt><span class="term">FROM REDSHIFT</span></dt>
               <dd>
                  <p>Se trata de una palabra clave que indica que la base de datos se encuentra en Amazon Redshift.</p>
               </dd>
             
               <dt><span class="term">DATABASE '<em>redshift_database_name</em>' SCHEMA '<em>redshift_schema_name</em>'</span></dt>
               <dd>
                  <p>Se trata del nombre de la base de datos de Amazon Redshift. </p>
                  <p>El parámetro <em>redshift_schema_name</em> indica el esquema en Amazon Redshift. El parámetro <em>redshift_schema_name</em> predeterminado es <code class="code">public</code>.</p>
               </dd>
             
               <dt><span class="term">DATABASE '<em>federated_database_name</em>'</span></dt>
               <dd>
                  <p>Se trata de una palabra clave que indica el nombre de la base de datos externa en un motor de base de datos de PostgreSQL o MySQL compatible. </p>
               </dd>
             
               <dt><span class="term">[SCHEMA '<em>schema_name</em>']</span></dt>
               <dd>
                  <p>El parámetro <em>schema_name</em> indica el esquema en un motor de base de datos de PostgreSQL compatible. El valor predeterminado de <em>schema_name</em> es <code class="code">public</code>.</p>
                  <p>No se puede especificar un SCHEMA cuando se configura una consulta federada a un motor de base de datos de MySQL compatible. </p>
               </dd>
             
               <dt><span class="term">REGION '<em>aws-region</em>'</span></dt>
               <dd>
                  <p>Si la base de datos externa se define en un catálogo de datos de Athena o en el AWS Glue Data Catalog, esta es la región de AWS en la que se encuentra la base de datos. Este parámetro es obligatorio si la base de datos se define en un catálogo de datos externo. </p>
               </dd>
             
               <dt><span class="term">URI '<em>hive_metastore_uri</em>' [ PORT port_number ]</span></dt>
               <dd>
                  <p>Se trata del URI del nombre del alojamiento y el port_number de un motor de base de datos de PostgreSQL o MySQL compatible. El <em>hostname</em> es el nodo principal del conjunto de réplicas. El punto de conexión debe ser accesible (enrutable) desde el clúster de Amazon Redshift. El port_number predeterminado de PostgreSQL es 5432. El port_number predeterminado para MySQL es 3306.</p>
                  <p>Si la base de datos está en un metaalmacén Hive, especifique el URI y, de manera opcional, el número de puerto para el metaalmacén. El número de puerto predeterminado es 9083. </p>
                  <p>Un URI no contiene una especificación de protocolo (“http://”). Un ejemplo de URI válido es <code class="code">uri '172.10.10.10'</code>. </p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>El motor de base de datos de PostgreSQL o MySQL compatible debe estar en la misma VPC que el clúster de Amazon Redshift. Cree un grupo de seguridad que vincule Amazon Redshift y RDS PostgreSQL o Aurora PostgreSQL. </p></div></div>
               </dd>
             
               <dt><span class="term">IAM_ROLE <span>{</span> default | 'SESSION' | 'arn:aws:iam::<code class="replaceable">&lt;Cuenta de AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }</span></dt>
               <dd>
                  <p>Utilice la palabra clave predeterminada para que Amazon Redshift utilice el rol de IAM configurado como predeterminado y asociado al clúster cuando se ejecuta el comando CREATE EXTERNAL SCHEMA.</p>
                  <p>Use <code class="code">'SESSION'</code> si se conecta al clúster de Amazon Redshift mediante una identidad federada y acceda a las tablas desde el esquema externo creado con este comando. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Uso de una identidad federada para administrar el acceso de Amazon Redshift a los recursos locales y a las tablas externas de Amazon Redshift Spectrum</a>, lo que explica cómo configurar la identidad federada. Tenga en cuenta que esta configuración, con <code class="code">'SESSION'</code> en lugar del ARN, solo se puede usar si el esquema se crea utilizando <code class="code">DATA CATALOG</code>. </p>
                  <p>Utilice el nombre de recurso de Amazon (ARN), de un rol de IAM que el clúster utiliza para la autenticación y la autorización. Como mínimo, el rol de IAM debe tener permiso para realizar una operación LIST en el bucket de Amazon S3 al que se accederá y una operación GET en los objetos de Amazon S3 que el bucket contiene.</p>
                  <p>A continuación se muestra la sintaxis de la cadena del parámetro IAM_ROLE para un único ARN.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">IAM_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>'</code></pre>
                  <p>Puede encadenar roles para que el clúster pueda asumir otro rol de IAM, que posiblemente pertenezca a otra cuenta. Puede encadenar hasta 10 roles. Para ver un ejemplo de encadenamiento de roles, consulte <a href="./c-spectrum-iam-policies.html#c-spectrum-chaining-roles">Encadenamiento de roles de IAM en Amazon Redshift Spectrum</a>. </p>
                 <p> Para este rol de IAM; asocie una política de permisos de IAM similar a la siguiente.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "AccessSecret",
            "Effect": "Allow",
            "Action": [
                "secretsmanager:GetResourcePolicy",
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
                "secretsmanager:ListSecretVersionIds"
            ],
            "Resource": "arn:aws:secretsmanager:<code class="replaceable">us-west-2</code>:<code class="replaceable">123456789012</code>:secret:my-rds-secret-VNenFy"
        },
        <span>{</span>
            "Sid": "VisualEditor1",
            "Effect": "Allow",
            "Action": [
                "secretsmanager:GetRandomPassword",
                "secretsmanager:ListSecrets"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
                  <p>Para obtener información sobre los pasos para crear un rol de IAM que se utilizará con la consulta federada, consulte <a href="./federated-create-secret-iam-role.html">Creación de un secreto y rol de IAM para utilizar consultas federadas</a>. </p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>No incluya espacios en la lista de roles encadenados.</p></div></div>
                  <p>A continuación se muestra la sintaxis para encadenar tres roles.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">IAM_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-1-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-2-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-3-name&gt;</code>'</code></pre>
               </dd>
             
               <dt><span class="term">SECRET_ARN '<em>ssm-secret-arn</em>'</span></dt>
               <dd>
                  <p>Se trata del nombre de recurso de Amazon (ARN) de un secreto de motor de base de datos de PostgreSQL o MySQL compatible creado mediante AWS Secrets Manager. Para obtener información sobre cómo crear y recuperar un ARN para un secreto, consulte <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/manage_create-basic-secret.html">Creación de un secreto básico</a> y <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/manage_retrieve-secret.html">Recuperación del secreto del valor secreto</a> en la <em>Guía del usuario de AWS Secrets Manager</em>. </p>
               </dd>
             
               <dt><span class="term">CATALOG_ROLE <span>{</span> 'SESSION' | <em>catalog-role-arn-string</em>}</span></dt>
               <dd>
                  <p>Use <code class="code">'SESSION'</code> para conectarse al clúster de Amazon Redshift mediante una identidad federada para la autenticación y la autorización del catálogo de datos. Para obtener más información acerca de completar los pasos para la identidad federada, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Uso de una identidad federada para administrar el acceso de Amazon Redshift a los recursos locales y a las tablas externas de Amazon Redshift Spectrum</a>. Tenga en cuenta que el rol <code class="code">'SESSION'</code> solo se puede usar si el esquema se crea en el CATÁLOGO DE DATOS.</p>
                  <p>Utilice el nombre de recurso de Amazon (ARN), para un rol de IAM que el clúster utiliza para la autenticación y la autorización del catálogo de datos. </p>
                  <p>Si no se especifica CATALOG_ROLE, Amazon Redshift utiliza el IAM_ROLE especificado. El rol del catálogo debe tener permiso para acceder al catálogo de datos en AWS Glue o Athena. Para obtener más información, consulte <a href="./c-spectrum-iam-policies.html">Políticas de IAM para Amazon Redshift Spectrum</a>. </p>
                  <p>A continuación se muestra la sintaxis de la cadena del parámetro CATALOG_ROLE para un único ARN.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CATALOG_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role&gt;</code>'</code></pre>
                  <p>Puede encadenar roles para que el clúster pueda asumir otro rol de IAM, que posiblemente pertenezca a otra cuenta. Puede encadenar hasta 10 roles. Para obtener más información, consulte <a href="./c-spectrum-iam-policies.html#c-spectrum-chaining-roles">Encadenamiento de roles de IAM en Amazon Redshift Spectrum</a>. </p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>La lista de roles encadenados no debe incluir espacios.</p></div></div>
                  <p>A continuación se muestra la sintaxis para encadenar tres roles.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CATALOG_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role-1-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role-2-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role-3-name&gt;</code>'</code></pre>

                  <p></p>
               </dd>
             
               <dt><span class="term">CREATE EXTERNAL DATABASE IF NOT EXISTS</span></dt>
               <dd>
                  <p>Una cláusula que crea una base de datos externa con el nombre especificado por el argumento DATABASE, si la base de datos externa especificada no existe. Si la base de datos externa especificada existe, el comando no realiza cambios. En este caso, el comando devuelve un mensaje en el que se indica que la base de datos externa existe, en lugar de terminar con un error.</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>No puede utilizar CREATE EXTERNAL DATABASE IF NOT EXISTS con HIVE METASTORE.</p><p>Para utilizar CREATE EXTERNAL DATABASE IF NOT EXISTS con un catálogo de datos habilitado para AWS Lake Formation, necesita tener el permiso <code class="code">CREATE_DATABASE</code> en el catálogo de datos. </p></div></div>
               </dd>
             
               <dt><span class="term">CATALOG_ID "<em>ID de la cuenta de Amazon Web Services que contiene la base de datos de Glue o Lake Formation</em>"</span></dt>
               <dd>
                  <p>El ID de la cuenta donde se almacena la base de datos del catálogo de datos.</p>
                     <p><code class="code">CATALOG_ID</code> solo se puede especificar si planea conectarse al clúster de Amazon Redshift o a Amazon Redshift sin servidor mediante una identidad federada para la autenticación y la autorización del catálogo de datos estableciendo una de las siguientes opciones: </p>
                     <div class="itemizedlist">
                         
                         
                     <ul class="itemizedlist"><li class="listitem"><p>De <code class="code">CATALOG_ROLE</code> a <code class="code">'SESSION'</code></p></li><li class="listitem"><p><code class="code">IAM_ROLE</code> a <code class="code">'SESSION'</code> y <code class="code">'CATALOG_ROLE'</code> configurado en su valor predeterminado </p></li></ul></div>
                     <p>Para obtener más información acerca de completar los pasos para la identidad federada, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Uso de una identidad federada para administrar el acceso de Amazon Redshift a los recursos locales y a las tablas externas de Amazon Redshift Spectrum</a>. </p>

               </dd>
             
               <dt><span class="term">AUTENTICACIÓN</span></dt>
               <dd>
                  <p>El tipo de autenticación que se ha definido para la ingesta de streaming. La ingesta de streaming con tipos de autenticación funciona con Amazon Managed Streaming para Apache Kafka. Los tipos de <code class="code">AUTHENTICATION</code> son los siguientes:</p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem"><p><b>ninguno</b>: especifica que no hay ningún paso de autenticación.</p></li><li class="listitem"><p><b>iam</b>: especifica la autenticación de IAM. Al elegir esta opción, asegúrese de que el rol de IAM tenga permisos para la autenticación de IAM. Para obtener más información acerca de la definición del esquema externo, consulte <a href="./materialized-view-streaming-ingestion-getting-started-MSK.html">Introducción a la ingesta de streaming de Amazon Managed Streaming para Apache Kafka</a>.</p></li></ul></div>
                  <p></p>

               </dd>
             
               <dt><span class="term">CLUSTER_ARN</span></dt>
               <dd>
                  <p>Para la ingesta de streaming, el identificador del clúster de Amazon Managed Streaming para Apache Kafka desde el que está transmitiendo. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion.html">Ingesta de streaming</a>.</p>
         

               </dd>
            </dl></div>
       
         <h2 id="r_CREATE_EXTERNAL_SCHEMA_usage">Notas de uso</h2>
         <p>Para conocer los límites de uso del catálogo de datos de Athena, consulte <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html#amazon-athena-limits">Límites de Athena</a> en la Referencia general de AWS.</p>
         <p>Para conocer los límites cuando se utiliza el AWS Glue Data Catalog, consulte <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html#limits_glue">Límites de AWS Glue</a> en la Referencia general de AWS.</p>
         <p>Estos límites no se aplican a un metaalmacén Hive.</p>
         
         <p>Hay un máximo de 9 900 esquemas por base de datos. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/amazon-redshift-limits.html">Cuotas y límites</a> en la <em>Guía de administración de Amazon Redshift</em>.</p>


   <p>Para anular el registro del esquema, utilice el comando <a href="./r_DROP_SCHEMA.html">DROP SCHEMA</a>. </p>

            <p>Para ver detalles de los esquemas externos, consulte las siguientes vistas del sistema: </p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p><a href="./r_SVV_EXTERNAL_SCHEMAS.html">SVV_EXTERNAL_SCHEMAS</a> </p></li><li class="listitem"><p><a href="./r_SVV_EXTERNAL_TABLES.html">SVV_EXTERNAL_TABLES</a> </p></li><li class="listitem"><p><a href="./r_SVV_EXTERNAL_COLUMNS.html">SVV_EXTERNAL_COLUMNS</a> </p></li></ul></div>

       
         <h2 id="r_CREATE_EXTERNAL_SCHEMA_examples">Ejemplos</h2>
         <p>El siguiente ejemplo crea un esquema externo utilizando una base de datos en un catálogo de datos denominado <code class="code">sampledb</code> en la región Oeste de EE. UU. (Oregón). Utilice este ejemplo con un catálogo de datos de Athena o AWS Glue.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema
from data catalog
database 'sampledb'
region 'us-west-2'
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole';</code></pre>
         <p>En el siguiente ejemplo, se crean un esquema externo y una nueva base de datos externa denominada <code class="code">spectrum_db</code>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema
from data catalog
database 'spectrum_db'
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole'
create external database if not exists;</code></pre>
         <p>En el siguiente ejemplo, se crea un esquema externo a través de una base de datos de metaalmacén Hive denominada <code class="code">hive_db</code>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema hive_schema
from hive metastore
database 'hive_db'
uri '172.10.10.10' port 99
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole';</code></pre>
         <p>En el siguiente ejemplo, se encadenan roles con el fin de utilizar el rol <code class="code">myS3Role</code> para acceder a Amazon S3 y se utiliza <code class="code">myAthenaRole</code> para acceder al catálogo de datos. Para obtener más información, consulte <a href="./c-spectrum-iam-policies.html#c-spectrum-chaining-roles">Encadenamiento de roles de IAM en Amazon Redshift Spectrum</a>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema
from data catalog
database 'spectrum_db'
iam_role 'arn:aws:iam::123456789012:role/myRedshiftRole,arn:aws:iam::123456789012:role/myS3Role'
catalog_role 'arn:aws:iam::123456789012:role/myAthenaRole'
create external database if not exists;</code></pre>
         <p>En el siguiente ejemplo, se crea un esquema externo que referencia una base de datos de Aurora PostgreSQL. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] myRedshiftSchema
FROM POSTGRES
DATABASE 'my_aurora_db' SCHEMA 'my_aurora_schema'
URI 'endpoint to aurora hostname' PORT 5432  
IAM_ROLE 'arn:aws:iam::123456789012:role/MyAuroraRole'
SECRET_ARN 'arn:aws:secretsmanager:us-east-2:123456789012:secret:development/MyTestDatabase-AbCdEf'
</code></pre>



         
         <p>En el siguiente ejemplo, se crea un esquema externo para referenciar la base de datos sales_db importada en el clúster consumidor.</p>
         
         
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA sales_schema FROM REDSHIFT DATABASE 'sales_db' SCHEMA 'public';</code></pre>



         <p>En el siguiente ejemplo, se crea un esquema externo que referencia una base de datos de Aurora MySQL. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] myRedshiftSchema
FROM MYSQL
DATABASE 'my_aurora_db'
URI 'endpoint to aurora hostname'
IAM_ROLE 'arn:aws:iam::123456789012:role/MyAuroraRole'
SECRET_ARN 'arn:aws:secretsmanager:us-east-2:123456789012:secret:development/MyTestDatabase-AbCdEf'
</code></pre>

      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_EXTERNAL_FUNCTION.html">CREATE EXTERNAL FUNCTION</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_EXTERNAL_TABLE.html">CREATE EXTERNAL TABLE</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>