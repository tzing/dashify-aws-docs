<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Evaluación del plan de consulta - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c_data_redistribution" /><meta name="default_state" content="c_data_redistribution" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_data_redistribution.html" /><meta name="description" content="Evalúe el plan de consulta para identificar posibles candidatos para optimizar los estilos de distribución para su base de datos." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guía para desarrolladores de bases de datos" /><meta name="abstract" content="Cree y administre un almacenamiento de datos con Amazon Redshift, un servicio de almacenamiento de datos completamente administrado a escala de petabytes de nivel empresarial." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_data_redistribution.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_data_redistribution.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_data_redistribution.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_data_redistribution.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_data_redistribution.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_data_redistribution.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_data_redistribution.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_data_redistribution.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_data_redistribution.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_data_redistribution.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_data_redistribution.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_data_redistribution.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_data_redistribution.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_data_redistribution.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_data_redistribution.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_data_redistribution.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_data_redistribution.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_data_redistribution.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_data_redistribution.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c_data_redistribution.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c_data_redistribution.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_data_redistribution.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guía para desarrolladores de bases de datos" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de bases de datos" /><meta id="panorama-serviceConsolePage" value="Evaluación del plan de consulta" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Evaluación del plan de consulta - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c_data_redistribution" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_data_redistribution.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_data_redistribution.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_data_redistribution.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Clúster,almacenamiento de datos,desarrollador,datos de ejemplo,base de datos,desarrollador de base de datos,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de bases de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Uso de la optimización automática de tablas",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/t_Creating_tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Uso de estilos de distribución de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/t_Distributing_data.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Evaluación del plan de consulta",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/t_Distributing_data.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c_data_redistribution" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guía para desarrolladores de bases de datos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c_data_redistribution">Evaluación del plan de consulta</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p> Puede utilizar planes de consulta para identificar candidatos para optimizar el estilo de distribución. </p><p>Después de tomar las primeras decisiones de diseño, cree sus tablas, cárguelas con datos y pruébelas. Utilice un conjunto de datos de prueba que sean lo más próximos posibles a los datos reales. Mida los tiempos de carga para utilizarlos como referencia para establecer comparaciones. </p><p> Evalúe las consultas que son representativas de las consultas más costosas que prevé ejecutar, específicamente aquellas que usan uniones y agregaciones. Compare los tiempos de ejecución de las diferentes opciones de diseño. Cuando compare los tiempos de ejecución, no tenga en cuenta la primera vez que se ejecuta la consulta, ya que el tiempo de la primera ejecución incluye el tiempo de compilación. </p><div class="variablelist">
                 
                 
                 
                 
                 
                 
                 
            <dl>
                    <dt><span class="term"><b>DS_DIST_NONE</b></span></dt>
                    <dd>
                        <p> No es necesario redistribuir porque los sectores correspondientes se ubican junto a los nodos de computación. Por lo general, solo tiene un paso DS_DIST_NONE, la unión entre la tabla de hechos y una tabla de dimensión. </p>
                    </dd>
                 
                    <dt><span class="term"><b>DS_DIST_ALL_NONE</b></span></dt>
                    <dd>
                        <p> No es necesario redistribuir, porque la tabla de combinación interna utilizó el atributo DISTSTYLE ALL. Se ubica la tabla entera en cada nodo. </p>
                    </dd>
                 
                    <dt><span class="term"><b>DS_DIST_INNER</b></span></dt>
                    <dd>
                        <p> Se redistribuye la tabla interna. </p>
                    </dd>
                 
                    <dt><span class="term"><b>DS_DIST_OUTER</b></span></dt>
                    <dd>
                        <p> Se redistribuye la tabla externa. </p>
                    </dd>
                 
                    <dt><span class="term"><b>DS_BCAST_INNER</b></span></dt>
                    <dd>
                        <p> Se difunde una copia de toda la tabla interna a todos los nodos de computación. </p>
                    </dd>
                 
                    <dt><span class="term"><b>DS_DIST_ALL_INNER</b></span></dt>
                    <dd>
                        <p>Se redistribuye toda la tabla interna a un único sector porque la tabla externa utiliza el atributo DISTSTYLE ALL.</p>
                    </dd>
                 
                    <dt><span class="term"><b>DS_DIST_BOTH</b></span></dt>
                    <dd>
                        <p> Ambas tablas se redistribuyen. </p>
                    </dd>
                </dl></div><p>DS_DIST_NONE y DS_DIST_ALL_NONE son buenos indicadores. Indican que no fue necesario redistribuir para ese paso porque todas las combinaciones están ubicadas juntas. </p><p>DS_DIST_INNER implica que el paso probablemente tiene un costo bastante alto debido a que se redistribuye la tabla interna a los nodos. DS_DIST_INNER indica que la tabla externa ya está distribuida correctamente en la clave de combinación. Configure la clave de distribución de la tabla interna con la clave de combinación para convertirla en DS_DIST_NONE. En algunos casos, no es posible distribuir la tabla interna en la clave de unión dado que la tabla externa no está distribuida en la clave de unión. En este caso, se debe evaluar la posibilidad de utilizar la distribución ALL para la tabla interna. Si la tabla no se actualiza con frecuencia ni de forma generalizada, y tiene el tamaño suficiente para asumir un costo elevado de redistribución, se debe cambiar el estilo de distribución por ALL y volver a realizar la prueba. La distribución ALL genera un aumento en los tiempos de carga, por lo que cuando vuelva a hacer la prueba debe incluir el tiempo de carga en los factores de evaluación. </p><p>DS_DIST_ALL_INNER no es un buen indicador. Significa que la tabla interna completa se redistribuyó a un único sector debido a que la tabla externa usa DISTSTYLE ALL, por lo que se coloca una copia de la tabla externa completa en cada nodo. Esto genera un tiempo de ejecución en serie ineficaz de la combinación en un único nodo, en lugar de sacar provecho del tiempo de ejecución en paralelo utilizando todos los nodos. DISTSTYLE ALL está diseñado para utilizarse solo para la tabla de combinación interna. En lugar de ese atributo, especifique una clave de distribución o utilice una distribución uniforme para la tabla externa.</p><p>DS_BCAST_INNER y DS_DIST_BOTH no son bueno indicadores. Por lo general, estas redistribuciones ocurren porque las tablas no están combinadas en sus claves de distribución. Si la tabla de hechos aún no tiene una clave de distribución, especifique la columna de combinación como la clave de distribución para ambas tablas. Si la tabla de hechos ya tiene una clave de distribución en otra columna, debe evaluar si cambiar la clave de distribución para ubicar esta unión mejorará el rendimiento general. Si cambiar la clave de distribución de la tabla externa no es la mejor opción, puede lograr que se ubique mediante la especificación DISTSTYLE ALL para la tabla interna. </p><p> En el siguiente ejemplo, se muestra una parte de un plan de consulta con etiquetas DS_BCAST_INNER y DS_DIST_NONE.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">-&gt;  XN Hash Join DS_BCAST_INNER  (cost=112.50..3272334142.59 rows=170771 width=84)
        Hash Cond: ("outer".venueid = "inner".venueid)
        -&gt;  XN Hash Join DS_BCAST_INNER  (cost=109.98..3167290276.71 rows=172456 width=47)
              Hash Cond: ("outer".eventid = "inner".eventid)
              -&gt;  XN Merge Join DS_DIST_NONE  (cost=0.00..6286.47 rows=172456 width=30)
                    Merge Cond: ("outer".listid = "inner".listid)
                    -&gt;  XN Seq Scan on listing  (cost=0.00..1924.97 rows=192497 width=14)
                    -&gt;  XN Seq Scan on sales  (cost=0.00..1724.56 rows=172456 width=24)</code></pre><p>Después de cambiar las tablas de dimensión para usar DISTSTYLE ALL, el plan de consulta para la misma consulta muestra DS_DIST_ALL_NONE en lugar de DS_BCAST_INNER. Además, hay un cambio drástico en el costo relativo de los pasos de combinación. El coste total es <code class="code">14142.59</code> en comparación con <code class="code">3272334142.59</code> de la consulta anterior.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">-&gt;  XN Hash Join DS_DIST_ALL_NONE  (cost=112.50..14142.59 rows=170771 width=84)
        Hash Cond: ("outer".venueid = "inner".venueid)
        -&gt;  XN Hash Join DS_DIST_ALL_NONE  (cost=109.98..10276.71 rows=172456 width=47)
              Hash Cond: ("outer".eventid = "inner".eventid)
              -&gt;  XN Merge Join DS_DIST_NONE  (cost=0.00..6286.47 rows=172456 width=30)
                    Merge Cond: ("outer".listid = "inner".listid)
                    -&gt;  XN Seq Scan on listing  (cost=0.00..1924.97 rows=192497 width=14)
                    -&gt;  XN Seq Scan on sales  (cost=0.00..1724.56 rows=172456 width=24)            </code></pre><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./t_designating_distribution_styles.html">Designación de estilos de distribución</div><div id="next" class="next-link" accesskey="n" href="./t_explain_plan_example.html">Ejemplo de plan de consulta</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_data_redistribution.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_data_redistribution.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>