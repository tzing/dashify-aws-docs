<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Uso compartido de datos de lectura y escritura dentro de una Cuenta de AWS o entre cuentas (versión preliminar) - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="multi-warehouse-writes-data-sharing" /><meta name="default_state" content="multi-warehouse-writes-data-sharing" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" /><meta name="description" content="Para obtener más información acerca de la configuración de la pista de versión preliminar, consulte una de las siguientes opciones:" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guía para desarrolladores de bases de datos" /><meta name="abstract" content="Cree y administre un almacenamiento de datos con Amazon Redshift, un servicio de almacenamiento de datos completamente administrado a escala de petabytes de nivel empresarial." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guía para desarrolladores de bases de datos" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de bases de datos" /><meta id="panorama-serviceConsolePage" value="Uso compartido de datos de lectura y escritura dentro de una Cuenta de AWS o entre cuentas (versión preliminar)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Uso compartido de datos de lectura y escritura dentro de una Cuenta de AWS o entre cuentas (versión preliminar) - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#multi-warehouse-writes-data-sharing" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Clúster,almacenamiento de datos,desarrollador,datos de ejemplo,base de datos,desarrollador de base de datos,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de bases de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Uso compartido de datos entre clústeres en Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/datashare-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Administración de las tareas de uso compartido de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/getting-started-datashare.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Uso compartido de datos de lectura y escritura dentro de una Cuenta de AWS o entre cuentas (versión preliminar)",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/getting-started-datashare.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#multi-warehouse-writes-data-sharing" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guía para desarrolladores de bases de datos</a></div><div id="page-toc-src"><a href="#within-account-writes-context">Uso compartido de datos de solo lectura o uso compartido de datos para lecturas y escrituras</a><a href="#within-account-writes-share-prereqs">Requisitos previos y notas de uso</a><a href="#within-account-writes-share-producer">Uso compartido de objetos de base de datos para el acceso de lectura y escritura en un recurso compartido de datos como administrador de la base de datos del productor</a><a href="#within-account-writes-share-grants-available">Permisos que puede conceder a los recursos compartidos de datos</a><a href="#within-account-writes-share-consumer-create-database">Permitir que los clústeres o grupos de trabajo sin servidor consulten el recurso compartido de datos</a><a href="#within-account-writes-share-consumer-transactions">Escritura en los objetos dentro de un recurso compartido de datos</a><a href="#across-account-read-write-req">Requisitos y limitaciones para el recurso compartido de datos en la versión preliminar</a><a href="#within-account-writes-share-sql-statements">Instrucciones SQL compatibles</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="multi-warehouse-writes-data-sharing">Uso compartido de datos de lectura y escritura dentro de una Cuenta de AWS o entre cuentas (versión preliminar)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="table-container"><div class="table-contents"><table id="w320aac35c19c13b3">
      <tr>
        <td tabindex="-1"><em><b>Esta es la versión preliminar de la documentación de la función de escritura de almacenamientos de múltiples datos mediante la característica de uso compartido de datos de Amazon Redshift, que está disponible en la versión preliminar pública de la pista PREVIEW_2023. Tanto la documentación como la característica quedan sujetas a cambios. Se recomienda utilizar esta característica solo con clústeres de prueba y no en entornos de producción. Para obtener una vista previa de los términos y las condiciones, consulte <em>Participación de la versión beta del servicio</em> en <a href="https://aws.amazon.com/service-terms/" rel="noopener noreferrer" target="_blank"><span>Términos del servicio de AWS</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </b></em> </td>
      </tr>
    </table></div></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>La escritura en varios almacenamientos mediante el uso compartido de datos no está disponible actualmente en los clústeres ra3.xlplus. Para utilizar esta característica, cree clústeres ra3.4xl, clústeres ra3.16xl o grupos de trabajo de Amazon Redshift sin servidor con la pista de versión preliminar.</p></div></div><p>Para obtener más información acerca de la configuración de la pista de versión preliminar, consulte una de las siguientes opciones:</p><div class="itemizedlist">
                          
                          
                      <ul class="itemizedlist"><li class="listitem"><p>Para la versión preliminar de Amazon Redshift sin servidor: <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-workgroup-preview.html">Crear un grupo de trabajo de vista previa</a></p></li><li class="listitem"><p>Para la versión preliminar de los clústeres aprovisionados de Amazon Redshift: <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-clusters-console.html#cluster-preview">Crear un clúster de versión preliminar</a></p></li></ul></div><p>Puede compartir objetos de base de datos para lecturas y escrituras entre distintos clústeres de Amazon Redshift o grupos de trabajo de Amazon Redshift sin servidor dentro de la misma Cuenta de AWS o de una Cuenta de AWS a otra. También puede escribir datos entre regiones. En este tema se explican los procedimientos para configurar el uso compartido de datos. Puede conceder permisos como SELECT, INSERT y UPDATE para distintas tablas y USAGE y CREATE para distintos esquemas. Los datos están activos y disponibles para todos los almacenes en cuanto se confirma una transacción de escritura. Al compartir datos entre cuentas, los administradores de cuentas de productores pueden elegir si estas cuentas tienen acceso de solo lectura a los datos o no. Además, los administradores de cuentas de productor pueden determinar si los espacios de nombres o regiones específicos tienen acceso a los datos de solo lectura, lectura y escritura o cualquier otro tipo de acceso. </p><p>En las secciones siguientes se muestra cómo configurar el uso compartido de datos. Los procedimientos suponen que está trabajando en una base de datos de un clúster aprovisionado o de un grupo de trabajo de Amazon Redshift sin servidor.</p>
               <h2 id="within-account-writes-context">Uso compartido de datos de solo lectura o uso compartido de datos para lecturas y escrituras</h2>   
               <p>Anteriormente, los objetos de los recursos compartidos de datos eran de solo lectura en todas las circunstancias. Escribir en un objeto de un recurso compartido de datos es una característica nueva. Los objetos de los recursos compartidos de datos solo están habilitados para escritura cuando un productor concede específicamente privilegios de escritura, como INSERT o CREATE, a los objetos del recurso compartido de datos. En las siguientes secciones de este tema se explican con mayor detalle.</p>
               <p>Si busca la documentación existente sobre los recursos compartidos de datos de solo lectura, está disponible en <a href="https://docs.aws.amazon.com/redshift/latest/dg/datashare-overview.html">Compartir datos entre clústeres en Amazon Redshift</a>.</p>
             
               <h2 id="within-account-writes-share-prereqs">Requisitos previos y notas de uso</h2> 
               <p><em>Configuración de aislamiento</em>: <b>la base de datos debe estar configurada para aislar instantáneas</b>. Las bases de datos creadas en la pista PREVIEW_2023 están aisladas de forma predeterminada para las instantáneas. La configuración de aislamiento se puede cambiar mediante la palabra clave ISOLATION en las instrucciones <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_DATABASE.html">CREATE DATABASE</a> o <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_ALTER_DATABASE.html">ALTER DATABASE</a>.</p>

            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>La escritura en varios almacenamientos mediante el uso compartido de datos no está disponible actualmente en los clústeres ra3.xlplus. Para utilizar esta característica, cree clústeres ra3.4xl, clústeres ra3.16xl o grupos de trabajo de Amazon Redshift sin servidor con la pista de versión preliminar.</p></div></div> 
             
               <h2 id="within-account-writes-share-producer">Uso compartido de objetos de base de datos para el acceso de lectura y escritura en un recurso compartido de datos como administrador de la base de datos del productor</h2> 
               <p>Para empezar a compartir datos, el administrador del productor crea un recurso compartido de datos y le añade objetos:</p>
               <div class="procedure"><ol><li><p>El propietario o <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_superusers.html">superusuario</a> de la base de datos del productor crea un recurso compartido de datos. Un recurso compartido de datos es un contenedor lógico de objetos, permisos y consumidores de la base de datos. (Los consumidores son clústeres o espacios de nombres de Amazon Redshift sin servidor en su cuenta y en otras cuentas). Cada recurso compartido de datos está asociado a la base de datos en la que se creó y solo se pueden agregar objetos de esa base de datos. El siguiente comando crea un recurso compartido de datos:</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATASHARE my_datashare [PUBLICACCESSIBLE = TRUE];</code></pre>
                     <p>Si se establece PUBLICACCESSIBLE como TRUE, los consumidores pueden consultar su recurso compartido de datos desde clústeres de acceso público y grupos de trabajo aprovisionados. Omita esta opción o defínala explícitamente como falsa si no quiere permitirla.</p>
                     <p>El propietario del recurso compartido de datos debe otorgar USAGE sobre los esquemas que quiera añadir al recurso compartido de datos. El comando GRANT es nuevo. Se utiliza para conceder varias acciones en el esquema, incluidas CREATE y USAGE. Los esquemas contienen objetos compartidos:</p>
                  
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE SCHEMA myshared_schema1;
CREATE SCHEMA myshared_schema2;
 
GRANT USAGE ON SCHEMA myshared_schema1 TO DATASHARE my_datashare;
GRANT CREATE, USAGE ON SCHEMA myshared_schema2 TO DATASHARE my_datashare;</code></pre> 
                     <p>Como alternativa, el administrador puede seguir ejecutando los comandos ALTER para añadir un esquema al recurso compartido de datos. Solo se conceden permisos de USAGE cuando se agrega un esquema de esta manera.</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE my_datashare ADD SCHEMA myshared_schema1;</code></pre>
                  </li><li>
                     <p>Una vez que el administrador ha agregado los esquemas, puede conceder permisos de recurso compartido de datos sobre los objetos del esquema. Pueden ser permisos de lectura y escritura. En el ejemplo GRANT ALL se muestra cómo conceder todos los permisos.</p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT SELECT, INSERT ON TABLE myshared_schema1.table1, myshared_schema1.table2, myshared_schema2.table1
TO DATASHARE my_datashare;
                     
GRANT ALL ON TABLE myshared_schema1.table4 TO DATASHARE my_datashare;</code></pre> 
                     <p>Puede seguir ejecutando comandos como ALTER DATASHARE para añadir tablas. Cuando lo haga, solo se concederán los permisos SELECT a los objetos añadidos.</p>
               
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE my_datashare ADD TABLE myshared_schema1.table1, myshared_schema1.table2, myshared_schema2.table1;</code></pre>
            
                  </li><li><p>El administrador concede el uso del recurso compartido de datos a un espacio de nombres específico de la cuenta. Encontrará el ID del espacio de nombres como parte del ARN en la página de detalles del clúster, en la página de detalles del espacio de nombres de Amazon Redshift sin servidor o al ejecutar el comando <code class="code">SELECT current_namespace;</code>. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_CURRENT_NAMESPACE.html">CURRENT_NAMESPACE</a>.</p>
             
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATASHARE my_datashare TO NAMESPACE '86b5169f-012a-234b-9fbb-e2e24359e9a8';</code></pre>
    
                  </li></ol></div>
                
                  <h3 id="within-account-writes-share-producer-cross">Autorización para compartir un recurso compartido de datos con otra cuenta</h3> 
                  <p>Tras crear un recurso compartido de datos en el productor y añadirle objetos, puede que desee compartirlo con otra cuenta de AWS. La autorización de un recurso compartido de datos para que lo utilice otra cuenta es un proceso de seguridad secundario que debe realizar un administrador de seguridad de datos para el productor. Se autoriza el consumo de un recurso compartido de datos por parte de la cuenta del consumidor. Puede autorizar un recurso compartido de datos a otra cuenta con fines de solo lectura o de lectura y escritura. Si se autoriza la escritura, la cuenta recibe los privilegios de escritura otorgados al recurso compartido de datos. De lo contrario, solo están disponibles los privilegios de lectura otorgados al recurso compartido de datos. Para obtener más información acerca de cómo hacerlo, consulte <a href="./within-account-writes-share-producer-authorize.html">Autorización de recursos compartidos de datos para escrituras como administrador de seguridad del productor (versión preliminar)</a>.</p>
                
               
                
                  <h3 id="within-account-writes-share-consumer-cross">Asociación de un recurso compartido de datos de otra cuenta como consumidor</h3> 
                  <p> Si el recurso compartido de datos proviene de otra cuenta, debe asociarlo a clústeres o espacios de nombres específicos de su cuenta para poder usarlo con esos clústeres o espacios de nombres. Puede asociarlo a todos los espacios de nombres de una cuenta, a todos los espacios de nombres de regiones específicas de la cuenta o a los espacios de nombres específicos de la cuenta. Puede elegir si permitir o no el acceso de solo lectura a un espacio de nombres o el acceso de lectura y escritura. Si está asociado para escrituras, los clústeres y los espacios de nombres sin servidor asociados reciben los privilegios de escritura otorgados al recurso compartido de datos. De lo contrario, solo están disponibles los privilegios de lectura otorgados al recurso compartido de datos. Para obtener más información sobre cómo hacerlo, consulte <a href="within-account-writes-share-consumer-associate.html" rel="noopener noreferrer" target="_blank">Asociación de los datos compartidos como administrador de seguridad de los datos del consumidor (versión preliminar)</a>.</p>
                
               
             
               <h2 id="within-account-writes-share-grants-available">Permisos que puede conceder a los recursos compartidos de datos</h2> 
               <p>Puede concederles distintos tipos de objetos y varios permisos en un contexto de uso compartido de datos.</p>
               <p>Esquemas:</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>USAGE</p></li><li class="listitem"><p>CREATE</p></li></ul></div>
               <p>Tablas:</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>SELECT</p></li><li class="listitem"><p>INSERT</p></li><li class="listitem"><p>UPDATE</p></li><li class="listitem"><p>DELETE</p></li><li class="listitem"><p>TRUNCATE</p></li><li class="listitem"><p>DROP</p></li><li class="listitem"><p>REFERENCES</p></li></ul></div>
               <p>Funciones:</p>
               <div class="itemizedlist">
                   
               <ul class="itemizedlist"><li class="listitem"><p>EXECUTE</p></li></ul></div>
               
            
             
               <h2 id="within-account-writes-share-consumer-create-database">Permitir que los clústeres o grupos de trabajo sin servidor consulten el recurso compartido de datos</h2> 
               <p>En este paso se supone que el recurso compartido de datos proviene de otro clúster o espacio de nombres de Amazon Redshift sin servidor de su cuenta, o bien proviene de otra cuenta y se ha asociado al espacio de nombres que está utilizando.</p>
               <div class="procedure"><ol><li><p>El administrador de la base de datos del consumidor puede crear una base de datos a partir del recurso compartido de datos.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE my_ds_db [WITH PERMISSIONS] FROM DATASHARE my_datashare OF NAMESPACE 'abc123def';</code></pre>
                     <p>Si crea una base de datos WITH PERMISSIONS, puede conceder permisos detallados sobre los objetos del recurso compartido de datos a diferentes usuarios y roles. Sin esto, a todos los usuarios y roles a los que se les conceda el permiso USAGE en la base de datos de recurso compartido de datos se les conceden todos los permisos en todos los objetos de la base de datos de recurso compartido de datos.</p>
                     
                  </li><li><p>A continuación, se muestra cómo conceder permisos a un usuario o rol de base de datos de Redshift. Debe estar conectado a una base de datos local para ejecutar estas instrucciones. No puede ejecutar estas instrucciones si ejecuta un comando USE en la base de datos de recurso compartido de datos antes de ejecutar las instrucciones de concesión.</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATABASE my_ds_db TO ROLE data_eng;
GRANT CREATE, USAGE ON SCHEMA my_ds_db.my_shared_schema TO ROLE data_eng;
GRANT ALL ON ALL TABLES IN SCHEMA my_ds_db.my_shared_schema TO ROLE data_eng;
 
GRANT USAGE ON DATABASE my_ds_db TO bi_user;
GRANT USAGE ON SCHEMA my_ds_db.my_shared_schema TO bi_user;
GRANT SELECT ON my_ds_db.my_shared_schema.table1 TO bi_user;</code></pre>
       </li></ol></div>
     
             
                  <h2 id="within-account-writes-share-consumer-transactions">Escritura en los objetos dentro de un recurso compartido de datos</h2> 
                  <p>Hay dos formas de escribir en los objetos dentro de un recurso compartido de datos</p>
                  <p><b>Conectarse a la base de datos local con el comando USE</b></p>
                  <p>Con este comando, puede consultar un objeto de recurso compartido de datos con una notación de dos partes y ejecutar transacciones de varias instrucciones. Solo puede ejecutar transacciones de varias instrucciones dentro de una única base de datos.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">USE database_name;</code></pre>
                  <p>Puede volver a utilizar la base de datos a la que está conectado ejecutando el comando RESET USE.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">RESET USE;</code></pre>
                  
                  <p>Cuando USE una base de datos, podrá BEGIN (iniciar) una transacción en esa base de datos. No puede escribir en varias bases de datos dentro de una sola transacción.</p>
                  
                  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p> Si ejecuta un comando USE sin confirmar o finalizar primero la transacción actual, el almacenamiento de datos se reiniciará. Asegúrese de finalizar o confirmar las transacciones abiertas antes de ejecutar una instrucción USE.</p></div></div>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">USE database_name;    --set the context to the datashare database
 
INSERT INTO datashare_schema.table1 VALUES (1);
 
BEGIN; --start a transaction
 
INSERT INTO datashare_schema.table2 VALUES (1);
INSERT INTO datashare_schema.table3 VALUES (1);
 
COMMIT;  --end transaction; you can also use the END command.</code></pre>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>No se pueden copiar datos de un parquet ni de archivos ORC a una tabla de recurso compartido de datos.</p></div></div>
                  
                  <p><b>Conectarse a la base de datos compartida de datos directamente mediante un controlador Redshift JDBC, ODBC o Python</b></p>
                  <p>Si se conecta directamente a una base de datos de recurso compartido de datos, puede consultar las tablas mediante una notación de dos partes y ejecutar transacciones con varias instrucciones en la base de datos de recurso compartido de datos de forma inmediata.</p>
                  
 
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">--connect to the datashare database via JDBC, ODBC, or the Python Driver
 
INSERT INTO datashare_schema.table1 VALUES (1);
 
BEGIN; --start a transaction
 
INSERT INTO datashare_schema.table2 VALUES (1);
INSERT INTO datashare_schema.table3 VALUES (1);
 
COMMIT;  -- end transaction; can also use the END command.</code></pre>
   
                  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>importante</h6></div><div class="awsdocs-note-text"><p>Se admite la ejecución de una instrucción INSERT INTO SELECT, pero para ello debe tener permisos INSERT en todas las tablas a las que se hace referencia en la consulta.</p></div></div>    
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Próximamente se podrá conectar a bases de datos de recurso compartido de datos a través de la API de datos.</p></div></div>      
                 
                
               <h2 id="across-account-read-write-req">Requisitos y limitaciones para el recurso compartido de datos en la versión preliminar</h2>
              <p></p>
               <div class="itemizedlist">
                   
                   
                   
                   
       
    
   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>Debe estar conectado directamente a una base de datos de recurso compartido de datos o ejecutar el comando USE para escribir en recursos compartidos de datos. Sin embargo, pronto habilitaremos esta opción con una notación de tres partes. </p></li><li class="listitem"><p>Debe utilizar grupos de trabajo sin servidor y clústeres ra3.4xl o ra3.16xl para utilizar esta característica. Está prevista la compatibilidad con los clústeres ra3.xlplus.</p></li><li class="listitem"><p><em>Descubrimiento de metadatos</em>: si es un consumidor conectado directamente a una base de datos de recurso compartido de datos mediante los controladores Redshift JDBC, ODBC o Python, puede ver los datos del catálogo de las siguientes maneras: </p>
                     <div class="itemizedlist">
                  
                         
                         
                         
                     <ul class="itemizedlist"><li class="listitem"><p>Los comandos <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_SHOW.html">SHOW</a> de SQL</p></li><li class="listitem"><p>Consulta de las tablas y vistas information_schema</p></li><li class="listitem"><p>Consulta de las <a href="https://docs.aws.amazon.com/redshift/latest/dg/svv_views.html">vistas de metadatos SVV</a></p></li></ul></div>
                  </li><li class="listitem"><p>No puede conectarse a bases de datos de recurso compartido de datos a través de la API de datos. Pronto serán compatibles.</p></li><li class="listitem"><p>Los consumidores no pueden ver los permisos otorgados a los recursos compartidos de datos. Esto cambiará pronto.</p></li><li class="listitem"><p>Para compartir datos entre cuentas, tanto el clúster productor como el consumidor deben estar cifrados.</p></li><li class="listitem"><p>El nivel de aislamiento de su base de datos debe ser de instantáneas para permitir que otros grupos de trabajo sin servidor y clústeres escriban en ella.</p></li><li class="listitem"><p>Los consumidores que escriban en objetos de recursos compartidos de datos no desencadenarán ninguna operación de análisis automático. Como resultado, el productor debe ejecutar el análisis manualmente después de insertar los datos en la tabla para actualizar las estadísticas de la tabla. Sin esto, los planes de consulta podrían no ser óptimos. </p></li></ul></div>
             
               <h2 id="within-account-writes-share-sql-statements">Instrucciones SQL compatibles</h2> 
               <p>Estas instrucciones son compatibles con la versión preliminar pública del intercambio de datos con las escrituras:</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
                   
                   
              
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>BEGIN | START TRANSACTION</p></li><li class="listitem"><p>END | COMMIT | ROLLBACK</p></li><li class="listitem"><p>COPY sin COMPUPDATE</p></li><li class="listitem"><p><span>{</span> CREATE | DROP } SCHEMA</p></li><li class="listitem"><p><span>{</span> CREATE | DROP | SHOW } TABLE</p></li><li class="listitem"><p>CREATE TABLE table_name AS</p></li><li class="listitem"><p>DELETE</p></li><li class="listitem"><p><span>{</span> GRANT | REVOKE } privilege_name ON OBJECT_TYPE object_name TO consumer_user </p></li><li class="listitem"><p>INSERT</p></li><li class="listitem"><p>SELECT</p></li><li class="listitem"><p>INSERT INTO SELECT</p></li><li class="listitem"><p>TRUNCATE</p></li><li class="listitem"><p>UPDATE</p></li><li class="listitem"><p>Columnas de tipos de superdatos</p></li></ul></div>
               
         
               <p><em>Tipos de instrucción no compatibles</em>. No se admite lo siguiente:</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
        
               <ul class="itemizedlist"><li class="listitem"><p>Consultas de varias instrucciones a los almacenes de los consumidores cuando se escribe a los productores.</p></li><li class="listitem"><p>Consultas de escalación simultáneas que se escriben de los consumidores a los productores.</p></li><li class="listitem"><p>Trabajos de copia automática que se escriben de los consumidores a los productores.</p></li><li class="listitem"><p>Trabajos de transmisión que se escriben de los consumidores a los productores.</p></li><li class="listitem"><p>Consumidores que crean tablas de integración sin ETL en clústeres de productores. Para obtener información sobre las integraciones sin ETL, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/zero-etl-using.html">Uso de integraciones sin ETL</a>.</p></li><li class="listitem"><p>Escribir en una tabla con una clave de clasificación intercalada.</p></li></ul></div>
               
            <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./data-sharing-within-account-CF.html">Administración del uso compartido de datos con CloudFormation</div><div id="next" class="next-link" accesskey="n" href="./within-account-writes-share-producer-authorize.html">Autorización de recursos compartidos de datos para escrituras como administrador de seguridad del productor (versión preliminar)</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>