<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE FUNCTION - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_FUNCTION" /><meta name="default_state" content="r_CREATE_FUNCTION" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guía para desarrolladores de bases de datos" /><meta name="abstract" content="Cree y administre un almacenamiento de datos con Amazon Redshift, un servicio de almacenamiento de datos completamente administrado a escala de petabytes de nivel empresarial." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guía para desarrolladores de bases de datos" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de bases de datos" /><meta id="panorama-serviceConsolePage" value="CREATE FUNCTION" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE FUNCTION - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_CREATE_FUNCTION" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Clúster,almacenamiento de datos,desarrollador,datos de ejemplo,base de datos,desarrollador de base de datos,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de bases de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referencia de SQL",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Comandos SQL",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE FUNCTION",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_CREATE_FUNCTION" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guía para desarrolladores de bases de datos</a></div><div id="page-toc-src"><a href="#r_CREATE_FUNCTION-privileges">Privilegios necesarios</a><a href="#r_CREATE_FUNCTION-synopsis">Sintaxis</a><a href="#r_CREATE_FUNCTION-parameters">Parámetros</a><a href="#r_CREATE_FUNCTION-usage-notes">Notas de uso</a><a href="#r_CREATE_FUNCTION-examples">Ejemplos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_CREATE_FUNCTION">CREATE FUNCTION</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p> </p><p>Crea un nueva función escalar definida por el usuario (UDF) mediante una cláusula SQL SELECT o un programa Python.</p><p>Para obtener más información y ejemplos, consulte <a href="./user-defined-functions.html">Creación de funciones definidas por el usuario</a>.</p>
         <h2 id="r_CREATE_FUNCTION-privileges">Privilegios necesarios</h2>
         <p>Los siguientes privilegios son necesarios para CREATE FUNCTION:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Para CREATE FUNCTION:</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>Un superusuario puede utilizar lenguajes de confianza y que no sean de confianza para crear funciones.</p></li><li class="listitem"><p>Los usuarios con el privilegio CREATE [ OR REPLACE ] FUNCTION pueden crear funciones con lenguajes de confianza.</p></li></ul></div>
            </li><li class="listitem"><p>Para REPLACE FUNCTION:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>Superusuario</p></li><li class="listitem"><p>Usuarios con el privilegio CREATE [ OR REPLACE ] FUNCTION</p></li><li class="listitem"><p>Propietario de la función</p></li></ul></div>
            </li></ul></div>
       
         <h2 id="r_CREATE_FUNCTION-synopsis">Sintaxis</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE [ OR REPLACE ] FUNCTION <em>f_function_name</em>
( <span>{</span> [<em>py_arg_name</em> <em> py_arg_data_type</em> |
<em>sql_arg_data_type</em> } [ , ... ] ] )
RETURNS <em>data_type</em>
<span>{</span> VOLATILE | STABLE | IMMUTABLE }
AS $$
  <span>{</span> <em>python_program</em> | <em>SELECT_clause</em> }
$$ LANGUAGE <span>{</span> plpythonu | sql }</code></pre>
       
         <h2 id="r_CREATE_FUNCTION-parameters">Parámetros</h2>
         <div class="variablelist">
             
             
             
             
             
             
             
             
             
         <dl>
               <dt><span class="term">OR REPLACE</span></dt>
               <dd>
                  <p>Especifica si ya existe una función con el mismo nombre y los mismos tipos de datos de argumento de entrada o <em>firma</em> que este, debe reemplazarse la función existente. Solo puede reemplazar una función con una nueva función que defina un conjunto idéntico de tipos de datos. Debe ser un superusuario para reemplazar una función.</p>
                  <p>Si define una función con el mismo nombre que una función existente, pero con una firma diferente, crea una nueva función. En otras palabras, se sobrecarga el nombre de la función. Para obtener más información, consulte <a href="./udf-naming-udfs.html#udf-naming-overloading-function-names">Sobrecarga de los nombres de función</a>.</p>
               </dd>
             
               <dt><span class="term"> <em>f_function_name</em> </span></dt>
               <dd>
                  <p>El nombre de la función. Si especifica un nombre de esquema (como <code class="code">myschema.myfunction</code>), la función se crea con el esquema especificado. De lo contrario, la función se crea en el esquema actual. Para obtener más información acerca de los nombres válidos, consulte <a href="./r_names.html">Nombres e identificadores</a>.</p>
                  <p>Recomendamos que utilice el prefijo <code class="code">f_</code> en los nombres de todas las UDF. Amazon Redshift reserva el prefijo <code class="code">f_</code> para los nombres de las UDF; por lo tanto, cuando utiliza el prefijo <code class="code">f_</code>, se asegura de que el nombre de la UDF no entre en conflicto con el nombre de una función SQL integrada en Amazon Redshift existente o futura. Para obtener más información, consulte <a href="./udf-naming-udfs.html">Dar nombre a las UDF</a>.</p>
                  <p>Puede definir más de una función con el mismo nombre de función si los tipos de datos de los argumentos de entrada son diferentes. En otras palabras, se sobrecarga el nombre de la función. Para obtener más información, consulte <a href="./udf-naming-udfs.html#udf-naming-overloading-function-names">Sobrecarga de los nombres de función</a>.</p>
               </dd>
             
               <dt><span class="term"> <em>py_arg_name py_arg_data_type | sql_arg_data type</em> </span></dt>
               <dd>
                  <p>Para una UDF de Python, una lista de nombres de argumento de entrada y tipos de datos. Para una UDF de SQL, una lista tipos de datos, sin nombres de argumento. En una UDF de Python, haga referencia a los argumentos usando los nombres de argumento. En una UDF de SQL, haga referencia a los argumentos usando $1, $2, etc., en función del orden de los argumentos en la lista de argumentos. </p>
                  <p>Para una UDF de SQL, los tipos de datos de entrada y salida pueden ser cualquier tipo de datos estándar de Amazon Redshift. Para una UDF Python, los tipos de datos de entrada y salida pueden ser SMALLINT, INTEGER, BIGINT, DECIMAL, REAL, DOUBLE PRECISION, BOOLEAN, CHAR, VARCHAR, DATE o TIMESTAMP. Además, las funciones definidas por el usuario (UDF) de Python admiten un tipo de datos de ANYELEMENT. Este tipo de datos se convierte automáticamente en un tipo de datos estándar basado en el tipo de datos correspondiente al argumento proporcionado en tiempo de ejecución. Si varios argumentos utilizan ANYELEMENT, todos se resuelven con el mismo tipo de datos durante el tiempo de ejecución, según el primer argumento ANYELEMENT de la lista. Para obtener más información, consulte <a href="./udf-data-types.html">Tipos de datos de UDF de Python</a> y <a href="./c_Supported_data_types.html">Tipos de datos</a>.</p>

                  <p>Puede especificar un máximo de 32 argumentos.</p>
               </dd>
             
               <dt><span class="term"> RETURNS <em>data_type</em> </span></dt>
               <dd>
                  <p>El tipo de datos del valor que la función devuelve. El tipo de datos RETURNS puede ser cualquier tipo de datos estándar de Amazon Redshift. Además, las UDF de Python pueden usar un tipo de datos de ANYELEMENT, que se convierte automáticamente en un tipo de datos estándar basado en el argumento proporcionado en tiempo de ejecución. Si especifica ANYELEMENT para el tipo de datos que se devuelve, al menos un argumento debe usar ANYELEMENT. El tipo de datos que se devuelve coincide con el tipo de datos proporcionado por el argumento ANYELEMENT cuando se convoca la función. Para obtener más información, consulte <a href="./udf-data-types.html">Tipos de datos de UDF de Python</a>.</p>
               </dd>
             
               <dt><span class="term"> VOLATILE | STABLE | IMMUTABLE </span></dt>
               <dd>
                  <p>Informa al optimizador de consultas acerca de la volatilidad de la función. </p>
                  <p>Obtendrá la mejor optimización si etiqueta la función con la categoría de volatilidad válida más estricta. No obstante, si la categoría es demasiado estricta, hay un riesgo de que el optimizador omita por error algunas ejecuciones, lo que resultaría en un conjunto de resultados incorrectos. Las categorías de volatilidad, de la menos estricta a la más estricta, son las siguientes:</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>VOLATILE</p>
                     </li><li class="listitem">
                        <p>STABLE</p>
                     </li><li class="listitem">
                        <p>IMMUTABLE</p>
                     </li></ul></div>
                  
                  <p>VOLATILE</p>
                  <p>Dados los mismos argumentos, la función puede devolver resultados diferentes en ejecuciones consecutivas, incluso para las filas de una única instrucción. El optimizador de consultas no puede realizar ninguna suposición acerca del comportamiento de una función volátil, por lo que una consulta que utiliza una función volátil debe reevaluar la función para cada fila de entrada.</p>
                  <p>STABLE</p>
                  <p>Dados los mismos argumentos, se garantiza que la función devuelve los mismos resultados para todas las filas procesadas dentro de una única instrucción. La función puede devolver resultados diferentes cuando se evoca en diferentes instrucciones. Esta categoría permite que el optimizador mejore diversas ejecuciones de la función dentro de una única instrucción a una única ejecución para la instrucción. </p>
                  <p>IMMUTABLE</p>
                  <p>Dados los mismos argumentos, la función siempre devuelve el mismo resultado. Cuando una consulta evoca una función <code class="code">IMMUTABLE</code> con argumentos constantes, el optimizador evalúa previamente la función.</p>
               </dd>
             
               <dt><span class="term">AS $$ <em>statement</em> $$</span></dt>
               <dd>
                  <p> Una construcción que contiene la instrucción que se ejecutará. Las palabras claves literales <code class="code">AS $$</code> y <code class="code">$$</code> son obligatorias. </p>
                  <p>En Amazon Redshift, la instrucción debe incluirse en la función con un formato llamado entrecomillado con símbolo de dólar. Cualquier elemento que se encuentre dentro de los signos se transmite exactamente como es. No necesita incluir en una secuencia de escape los caracteres especiales porque el contenido de la cadena se escribe literalmente. </p>
                  <p> Con el <em>entrecomillado de dólar, </em>se utilizan un par de signos de dólar ($$) para representar el inicio y el final de la instrucción que se va a ejecutar, tal y como se muestra en el siguiente ejemplo. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$$ <code class="replaceable">my statement</code> $$</code></pre>
                  <p> De manera opcional, entre los signos de dólar de cada par, puede especificar una cadena para ayudar a identificar la instrucción. La cadena que usa debe ser la misma en el inicio y en el final de los pares de signos. La cadena distingue entre mayúsculas y minúsculas, y sigue las mismas restricciones que un identificador sin comillas, excepto que no puede contener signos de dólar. En el siguiente ejemplo, se usa la cadena <code class="code">test</code>. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$test$ <code class="replaceable">my statement</code> $test$</code></pre>

                  <p>Para obtener más información acerca de los signos de dólar, consulte Dollar-quoted String Constants bajo <a href="https://www.postgresql.org/docs/9.4/static/sql-syntax-lexical.html" rel="noopener noreferrer" target="_blank"><span>Lexical Structure</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> en la documentación de PostgreSQL. </p>
               </dd>
             
               <dt><span class="term"><em>python_program</em> </span></dt>
               <dd>
                  <p>Un programa Python ejecutable válido que devuelve un valor. La instrucción que pase con la función debe ajustarse a los requisitos de sangría, tal y como se especifica en la <a href="https://www.python.org/dev/peps/pep-0008/#indentation" rel="noopener noreferrer" target="_blank"><span>guía de estilo para el código de Python</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> del sitio web de Python. Para obtener más información, consulte <a href="./udf-python-language-support.html">Compatibilidad del lenguaje Python con las UDF</a>.</p>
               </dd>
             
               <dt><span class="term"><em>SQL_clause</em> </span></dt>
               <dd>
                  <p>Una cláusula SQL SELECT.</p>
                  <p>La cláusula SELECT no puede incluir ninguno de los tipos de cláusulas siguientes:</p>
                  <div class="itemizedlist">
                      
                      
                      
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>FROM</p>
                     </li><li class="listitem">
                        <p>INTO</p>
                     </li><li class="listitem">
                        <p>WHERE</p>
                     </li><li class="listitem">
                        <p>GROUP BY</p>
                     </li><li class="listitem">
                        <p>ORDER BY</p>
                     </li><li class="listitem">
                        <p>LIMIT</p>
                     </li></ul></div>
               </dd>
             
               <dt><span class="term">LANGUAGE <span>{</span> plpythonu | sql } </span></dt>
               <dd>
                  <p>Para Python, especifique <code class="code">plpythonu</code>. Para SQL, especifique <code class="code">sql</code>. Debe tener permiso para usar el lenguaje de SQL o plpythonu. Para obtener más información, consulte <a href="./udf-security-and-privileges.html">Privilegios y seguridad de las UDF</a>.</p>
               </dd>
            </dl></div>
       
         <h2 id="r_CREATE_FUNCTION-usage-notes">Notas de uso</h2>
          
            <h3 id="r_CREATE_FUNCTION-usage-notes-nested-functions">Funciones anidadas</h3>
            <p>Puede llamar a otra función definida por el usuario (UDF) de SQL desde una UDF de SQL. La función anidada debe existir cuando se ejecuta el comando CREATE FUNCTION. Amazon Redshift no realiza un seguimiento de las dependencias de las UDF; por lo tanto, si se elimina la función anidada, Amazon Redshift no devuelve ningún error. No obstante, la UDF producirá un error si la función anidada no existe. Por ejemplo, la siguiente función llama a la función <code class="code">f_sql_greater
               </code> en la cláusula SELECT.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_sql_commission (float, float )
  returns float
stable
as $$
  select f_sql_greater ($1, $2)
$$ language sql;</code></pre>
          
          
            <h3 id="r_CREATE_FUNCTION-usage-notes-security-and-privileges">Privilegios y seguridad de las UDF</h3>
            <p>Para crear una UDF, debe tener permiso para usar el lenguaje de SQL o plpythonu (Python). De manera predeterminada, se concede el permiso USAGE ON LANGUAGE SQL a PUBLIC. No obstante, debe conceder explícitamente el permiso de USAGE ON LANGUAGE PLPYTHONU a usuarios o grupos específicos. </p>
            <p>Para revocar los permisos de uso de SQL, primero revoque el uso de PUBLIC. A continuación, conceda los permisos de uso de SQL a solo los usuarios o grupos que tienen permiso para crear UDF de SQL. En el siguiente ejemplo, se revocan los permisos de uso de SQL de PUBLIC y después se conceden permisos de uso al grupo de usuarios <code class="code">udf_devs</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">revoke usage on language sql from PUBLIC;
grant usage on language sql to group udf_devs;</code></pre>
            <p>Para ejecutar una UDF, debe tener permisos de ejecución para cada función. De manera predeterminada, el permiso de ejecución de nuevas UDF está establecido en PUBLIC. Para restringir el uso, revoque el permiso de ejecución PUBLIC para la función. A continuación, conceda el privilegio a usuarios o grupos específicos. </p>
            <p>En el siguiente ejemplo, se revocan los permisos de ejecución en la función <code class="code">f_py_greater</code> de PUBLIC y después se conceden permisos de uso al grupo de usuarios <code class="code">udf_devs</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">revoke execute on function f_py_greater(a float, b float) from PUBLIC;
grant execute on function f_py_greater(a float, b float) to group udf_devs;</code></pre>
            <p>De manera predeterminada, los superusuarios tienen todos los privilegios. </p>
            <p>Para obtener más información, consulte <a href="./r_GRANT.html">GRANT</a> y <a href="./r_REVOKE.html">REVOKE</a>.</p>
          
       
         <h2 id="r_CREATE_FUNCTION-examples">Ejemplos</h2>
          
            <h3 id="r_CREATE_FUNCTION-python-example">Ejemplo de una UDF escalar de Python</h3>
            <p>En el siguiente ejemplo, se crea una UDF de Python que compara dos enteros y devuelve el valor mayor.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_py_greater (a float, b float)
  returns float
stable
as $$
  if a &gt; b:
    return a
  return b
$$ language plpythonu;</code></pre>
            <p>En el siguiente ejemplo, se consulta la tabla SALES y se evoca la nueva función <code class="code">f_py_greater</code> para devolver COMMISSION o 20 por ciento de PRICEPAID, el que represente el mayor valor.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select f_py_greater (commission, pricepaid*0.20) from sales;</code></pre>
          
          
            <h3 id="r_CREATE_FUNCTION-sql-example">Ejemplo de una UDF escalar de SQL</h3>
            <p>En el siguiente ejemplo, se crea una función que compara dos números y devuelve el valor más grande. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_sql_greater (float, float)
  returns float
stable
as $$
  select case when $1 &gt; $2 then $1
    else $2
  end
$$ language sql;</code></pre>
            <p>La siguiente consulta llama a la nueva función <code class="code">f_sql_greater</code> para consultar la tabla SALES y devuelve COMMISSION o el 20 por ciento de PRICEPAID, lo que sea mayor.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select f_sql_greater (commission, pricepaid*0.20) from sales;</code></pre>
          
         
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_EXTERNAL_VIEW.html">CREATE EXTERNAL VIEW (versión preliminar)</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_GROUP.html">CREATE GROUP</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>