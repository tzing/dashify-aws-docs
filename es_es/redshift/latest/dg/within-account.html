<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Uso compartido de datos dentro de una Cuenta de AWS - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="within-account" /><meta name="default_state" content="within-account" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" /><meta name="description" content="Puede compartir datos con fines de lectura entre distintos clústeres de Amazon Redshift dentro de una Cuenta de AWS." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guía para desarrolladores de bases de datos" /><meta name="abstract" content="Cree y administre un almacenamiento de datos con Amazon Redshift, un servicio de almacenamiento de datos completamente administrado a escala de petabytes de nivel empresarial." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/within-account.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/within-account.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/within-account.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/within-account.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/within-account.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/within-account.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/within-account.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/within-account.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/within-account.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/within-account.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/within-account.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/within-account.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guía para desarrolladores de bases de datos" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de bases de datos" /><meta id="panorama-serviceConsolePage" value="Uso compartido de datos dentro de una Cuenta de AWS" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Uso compartido de datos dentro de una Cuenta de AWS - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#within-account" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Clúster,almacenamiento de datos,desarrollador,datos de ejemplo,base de datos,desarrollador de base de datos,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de bases de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Uso compartido de datos entre clústeres en Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/datashare-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Administración de las tareas de uso compartido de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/getting-started-datashare.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Administración del uso compartido de datos mediante la interfaz de SQL",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/getting-started-datashare-sql.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Uso compartido de datos dentro de una Cuenta de AWS",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/getting-started-datashare-sql.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#within-account" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guía para desarrolladores de bases de datos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="within-account">Uso compartido de datos dentro de una Cuenta de AWS</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Puede compartir datos con fines de lectura entre distintos clústeres de Amazon Redshift dentro de una Cuenta de AWS.</p><div class="procedure"><h6>Para compartir datos con fines de lectura como administrador del clúster productor o como propietario de la base de datos</h6><ol><li><p>Cree datashares en su clúster. Para obtener más información, consulte <a href="./r_CREATE_DATASHARE.html">CREATE DATASHARE</a>.</p>
            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATASHARE salesshare;</code></pre>
            <p>Los superusuarios de clústeres y los propietarios de bases de datos pueden crear datashares. Cada datashare se asocia a una base de datos durante la creación. Solo los objetos de esa base de datos se pueden compartir en ese datashare. Se pueden crear varios datashares en la misma base de datos con el mismo nivel de detalle de los objetos o uno diferente. No hay límite en cuanto a la cantidad de datashares que puede crear un clúster.</p>
            <p>También puede utilizar la consola de Amazon Redshift para crear datashares. Para obtener más información, consulte <a href="./datashare-creation.html#create-datashare-console">Creación de datashares</a>.</p>
      </li><li><p>Delegue permisos para operar en el datashare. Para obtener más información, consulte <a href="./r_GRANT.html">GRANT</a> o <a href="./r_REVOKE.html">REVOKE</a>.</p>

            <p>En el siguiente ejemplo, se otorgan permisos a <code class="code">dbuser</code> para <code class="code">salesshare</code>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT ALTER, SHARE ON DATASHARE salesshare TO dbuser;</code></pre>

            <p>Los superusuarios del clúster y los propietarios del recurso compartido de datos pueden otorgar o revocar permisos de modificación sobre este a usuarios adicionales.</p>
      </li><li><p>Agregue objetos a los datashares o quítelos. Para agregar objetos a un datashare, agregue el esquema antes de agregar los objetos. Cuando se agrega un esquema, Amazon Redshift no agrega todos los objetos que contiene. Asegúrese de agregarlos explícitamente. Para obtener más información, consulte <a href="./r_ALTER_DATASHARE.html">ALTER DATASHARE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare ADD SCHEMA PUBLIC;
ALTER DATASHARE salesshare ADD TABLE public.tickit_sales_redshift;
ALTER DATASHARE salesshare ADD ALL TABLES IN SCHEMA PUBLIC;</code></pre>
            
            <p>También se pueden agregar vistas a un datashare.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE VIEW public.sales_data_summary_view AS SELECT * FROM public.tickit_sales_redshift;
ALTER DATASHARE salesshare ADD TABLE public.sales_data_summary_view;</code></pre>

         
            <p>Utilice ALTER DATASHARE para compartir esquemas, tablas, vistas y funciones de un esquema determinado. Los superusuarios, los propietarios de recursos compartidos de datos o los usuarios que tienen permisos ALTER u ALL sobre el recurso compartido de datos pueden modificarlo para agregarle o quitarle objetos. Los usuarios deben tener los permisos para poder agregar objetos al recurso compartido de datos o quitarlos. Los usuarios también deben ser los propietarios de los objetos o disponer de permisos SELECT, USAGE u ALL sobre ellos.</p>  

            <p>Utilice la cláusula INCLUDENEW para agregar al datashare nuevas tablas, vistas o funciones definidas por el usuario (UDF) de SQL que se crearon en un esquema especificado. Solo los superusuarios pueden modificar esta propiedad para cada par de esquema y datashare.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare ADD SCHEMA PUBLIC;
ALTER DATASHARE salesshare SET INCLUDENEW = TRUE FOR SCHEMA PUBLIC;</code></pre>

            <p>También puede utilizar la consola de Amazon Redshift para agregar objetos a los datashares o quitarlos. Para más información, consulte <a href="./datashare-creation.html#add-datashare-object-console">Incorporación de objetos a los datashares</a>, <a href="./manage-datashare-existing-console.html#remove-datashare-object-console">Eliminación de objetos de los datashares</a> y <a href="./manage-datashare-existing-console.html#edit-datashare-console">Edición de datashares creados en su cuenta</a>.</p></li><li><p>Agregue consumidores a los datashares o quítelos. En el siguiente ejemplo, se agrega el espacio de nombres del clúster consumidor a <code class="code">salesshare</code>. El espacio de nombres es el identificador único de carácter general (GUID) del espacio de nombres del clúster consumidor de la cuenta. Para obtener más información, consulte <a href="./r_GRANT.html">GRANT</a> o <a href="./r_REVOKE.html">REVOKE</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATASHARE salesshare TO NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>Solo se pueden otorgar permisos a un consumidor de recurso compartido de datos en una instrucción GRANT.</p>
            
            <p>Los superusuarios de clústeres y los propietarios de objetos del recurso compartido de datos o los usuarios que tienen el permiso SHARE sobre el recurso compartido de datos pueden agregarle consumidores o quitárselos. Para ello, utilizan las instrucciones GRANT USAGE o REVOKE USAGE.</p>
            <p>Para encontrar el espacio de nombres del clúster que ve en este momento, puede utilizar el comando SELECT CURRENT_NAMESPACE. Para encontrar el espacio de nombres de un clúster diferente dentro de la misma Cuenta de AWS, vaya a la página de detalles del clúster en la consola de Amazon Redshift. En esa página, busque el campo de espacio de nombres que se acaba de agregar.</p>
            <p>También puede utilizar la consola de Amazon Redshift para agregar o quitar consumidores de datos en los recursos compartidos de datos. Para más información, consulte <a href="./datashare-creation.html#add-data-consumer-console">Incorporación de consumidores de datos a los datashares</a> y <a href="./manage-datashare-existing-console.html#remove-data-consumer-console">Eliminación de consumidores de datos de los datashares</a>.</p>
         </li><li><p>(Opcional) Agregue restricciones de seguridad al datashare. En el siguiente ejemplo, se muestra que el clúster consumidor que cuenta con acceso de IP pública tiene permitido leer el datashare. Para obtener más información, consulte <a href="./r_ALTER_DATASHARE.html">ALTER DATASHARE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare SET PUBLICACCESSIBLE = TRUE;</code></pre>

            <p>Puede modificar las propiedades referidas al tipo de consumidores después de la creación del datashare. Por ejemplo, puede definir que los clústeres que deseen consumir datos de un determinado datashare no puedan ser de acceso público. Las consultas de los clústeres consumidores que no cumplan las restricciones de seguridad especificadas en el recurso compartido de datos se rechazarán en el tiempo de ejecución de la consulta.</p>
            <p>También puede utilizar la consola de Amazon Redshift para modificar datashares. Para obtener más información, consulte <a href="./manage-datashare-existing-console.html#edit-datashare-console">Edición de datashares creados en su cuenta</a>.</p>
            
         </li><li><p>Enumere los datashares que se hayan creado en el clúster y examine su contenido.</p>

            <p>En el siguiente ejemplo, se muestra la información de un recurso compartido de datos denominado <code class="code">salesshare</code>. Para más información, consulte <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> y <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DESC DATASHARE salesshare;

               
 producer_account  |          producer_namespace          | share_type | share_name | object_type |           object_name          |   include_new
-------------------+--------------------------------------+------------+------------+-------------+--------------------------------+-------------------
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_users_redshift   |   
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_venue_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_category_redshift|
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_date_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_event_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_listing_redshift |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_sales_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | schema      | public                         |  t
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | view        | public.sales_data_summary_view |</code></pre>
            
            <p>En el siguiente ejemplo, se muestran los datashares salientes de un clúster productor.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SHOW DATASHARES LIKE 'sales%';</code></pre>
            <p>El resultado tiene un aspecto similar al siguiente.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">share_name | share_owner  | source_database | consumer_database | share_type |     createdate      | is_publicaccessible  | share_acl | producer_account |          producer_namespace 
-----------+--------------+-----------------+-------------------+------------+---------------------+----------------------+-----------+------------------+---------------------------------------
salesshare |    100       | dev             |                   |  OUTBOUND  | 2020-12-09 02:27:08 |          True        |           |   123456789012   | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d </code></pre>
            <p>Para más información, consulte <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> y <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>. </p>
            <p>También puede utilizar <a href="./r_SVV_DATASHARES.html">SVV_DATASHARES</a>, <a href="./r_SVV_DATASHARE_CONSUMERS.html">SVV_DATASHARE_CONSUMERS</a> y <a href="./r_SVV_DATASHARE_OBJECTS.html">SVV_DATASHARE_OBJECTS</a> para ver los datashares, los objetos dentro del datashare y sus consumidores.</p>
         </li><li><p>Elimine datashares. Para obtener más información, consulte <a href="./r_DROP_DATASHARE.html">DROP DATASHARE</a>.</p>
            <p>Puede eliminar los objetos del datashare en cualquier momento con <a href="./r_DROP_DATASHARE.html">DROP DATASHARE</a>. Los superusuarios del clúster y los propietarios de los datashares pueden eliminarlos.</p>

            <p>En el siguiente ejemplo, se elimina un recurso compartido de datos denominado <code class="code">salesshare</code>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DROP DATASHARE salesshare;</code></pre>

            <p>También puede utilizar la consola de Amazon Redshift para eliminar los datashares. Para obtener más información, consulte <a href="./manage-datashare-existing-console.html#delete-datashare-console">Eliminación de los recursos compartidos de datos de  creados en su cuenta</a>.</p>
         </li><li><p>Utilice ALTER DATASHARE para quitar objetos de los datashares en cualquier parte de este. Utilice REVOKE USAGE ON para revocar los permisos sobre el datashare otorgados a determinados consumidores. Revoca los permisos USAGE de los objetos que se encuentran dentro de un recurso compartido de datos y desactiva de forma instantánea el acceso para todos los clústeres consumidores. Las listas de los datashares y las consultas de metadatos, como las listas de bases de datos y tablas, no devuelven los objetos compartidos después de haber revocado el acceso.</p>

            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare REMOVE TABLE public.tickit_sales_redshift;</code></pre>

            <p>También puede utilizar la consola de Amazon Redshift para modificar datashares. Para obtener más información, consulte <a href="./manage-datashare-existing-console.html#edit-datashare-console">Edición de datashares creados en su cuenta</a>.</p>
         </li><li><p>Revoque el acceso a los datashares desde los espacios de nombres si ya no desea compartir los datos con los consumidores.</p>

            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">REVOKE USAGE ON DATASHARE salesshare FROM NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>También puede utilizar la consola de Amazon Redshift para modificar datashares. Para obtener más información, consulte <a href="./manage-datashare-existing-console.html#edit-datashare-console">Edición de datashares creados en su cuenta</a>.</p>
         </li></ol></div><div class="procedure"><h6>Para compartir datos con fines de lectura como administrador del clúster consumidor</h6><ol><li><p>Enumere los datashares que se ponen a su disposición y vea su contenido. Para más información, consulte <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> y <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>.</p>
            <p>En el siguiente ejemplo, se muestra la información de los datashares entrantes de un espacio de nombres productor específico. Cuando ejecuta DESC DATASHARE como el administrador de un clúster consumidor, debe especificar la opción NAMESPACE para ver los datashares entrantes. </p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DESC DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';


 producer_account  |          producer_namespace          | share_type | share_name | object_type |           object_name           |   include_new
-------------------+--------------------------------------+------------+------------+-------------+---------------------------------+------------------
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_users_redshift    |     
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_venue_redshift    |     
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_category_redshift |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_date_redshift     |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_event_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_listing_redshift  |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_sales_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | schema      | public                          |    
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | view        | public.sales_data_summary_view  |   </code></pre>
            <p>Solo los superusuarios del clúster pueden hacer esto. También puede utilizar SVV_DATASHARES para ver los datashares y SVV_DATASHARE_OBJECTS para ver los objetos que se encuentran dentro del datashare.</p>
            <p>En el siguiente ejemplo, se muestran los datashares entrantes de un clúster consumidor.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SHOW DATASHARES LIKE 'sales%';


 share_name | share_owner | source_database | consumer_database | share_type | createdate | is_publicaccessible | share_acl | producer_account |          producer_namespace
------------+-------------+-----------------+-------------------+------------+------------+---------------------+-----------+------------------+--------------------------------------
 salesshare |             |                 |                   | INBOUND    |            |         t           |           |   123456789012   | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d</code></pre>
         </li><li><p>Como superusuario de bases de datos, puede crear bases de datos locales que hacen referencia a los recursos compartidos de datos. Para obtener más información, consulte <a href="./r_CREATE_DATABASE.html">CREATE DATABASE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sales_db FROM DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>
            
            <p>Si desea tener un control más detallado del acceso a los objetos de la base de datos local, utilice la cláusula WITH PERMISSIONS al crear la base de datos. De este modo, podrá conceder permisos en el nivel de objeto para los objetos de la base de datos en el paso 4. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sales_db WITH PERMISSIONS FROM DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>Puede ver las bases de datos que creó a partir del datashare consultando la vista <a href="./r_SVV_REDSHIFT_DATABASES.html">SVV_REDSHIFT_DATABASES</a>. No puede conectarse a estas bases de datos creadas a partir de datashares, que son de solo lectura. No obstante, puede conectarse a una base de datos local del clúster consumidor y efectuar una consulta de distintas bases de datos para consultar los datos de las bases de datos creadas a partir de los datashares. No puede crear un datashare encima de los objetos de base de datos creados a partir de un datashare existente. No obstante, puede copiar los datos en una tabla diferente en el clúster consumidor, llevar a cabo el procesamiento que sea necesario y, a continuación, compartir los objetos nuevos que se hayan creado.</p>
            <p>También puede utilizar la consola de Amazon Redshift para crear bases de datos a partir de datashares. Para obtener más información, consulte <a href="./query-datashare-console.html#create-database-from-datashare-console">Creación de bases de datos a partir de datashares</a>.</p>

         </li><li><p>(Opcional) Cree esquemas externos para referenciar esquemas específicos de la base de datos consumidora importados en el clúster consumidor y para asignarles permisos pormenorizados. Para obtener más información, consulte <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA sales_schema FROM REDSHIFT DATABASE 'sales_db' SCHEMA 'public';</code></pre>

     

         </li><li><p>Conceda permisos en las bases de datos y las referencias de esquema creadas a partir de los recursos compartidos de datos a usuarios y roles del clúster del consumidor según sea necesario. Para obtener más información, consulte <a href="./r_GRANT.html">GRANT</a> o <a href="./r_REVOKE.html">REVOKE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATABASE sales_db TO Bob;</code></pre>
            
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON SCHEMA sales_schema TO ROLE Analyst_role;</code></pre>

            <p>Si ha creado su base de datos sin WITH PERMISSIONS, solo podrá asignar permisos a toda la base de datos creada a partir del recurso compartido de datos a los usuarios y los roles. En algunos casos, necesita controles pormenorizados sobre un subconjunto de los objetos de base de datos creados a partir del datashare. Si es así, puede crear una referencia de esquema externa que apunte a esquemas específicos del datashare (como se describe en el paso anterior) y proporcionar permisos pormenorizados en el nivel del esquema. </p>
                  <p>También puede crear vistas de enlace de tiempo de ejecución encima de los objetos compartidos y utilizarlas para asignar permisos pormenorizados. También puede considerar la posibilidad de indicar a los clústeres productores que creen datashares adicionales en su nombre con el nivel de detalle requerido. </p>
            <p>Si ha creado la base de datos con WITH PERMISSIONS en el paso 2, debe asignar permisos de nivel de objeto a los objetos de la base de datos compartida. Un usuario que solo tenga el permiso USAGE no podrá acceder a ningún objeto de una base de datos creada con WITH PERMISSIONS hasta que se le concedan permisos adicionales en el nivel de objeto.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT SELECT ON sales_db.public.tickit_sales_redshift to Bob;</code></pre>

         </li><li><p>Consulte los datos de los objetos compartidos que se encuentran en los datashares.</p>
            <p>Los usuarios y los roles que tengan permisos en las bases de datos del consumidor y los esquemas de los clústeres del consumidor pueden explorar y navegar por los metadatos de cualquier objeto compartido. También pueden navegar por los objetos locales de un clúster consumidor y explorarlos. Para ello, utilizan controladores JDBC u ODBC, o vistas SVV_ALL y SVV_REDSHIFT.</p>
                  <p>Los clústeres productores pueden tener muchos esquemas en la base de datos y muchas tablas y vistas dentro de cada esquema. Los usuarios del lado del consumidor solo pueden ver el subconjunto de objetos que se han puesto a disposición a través del datashare. Estos usuarios no pueden ver todos los metadatos del clúster productor. Este enfoque ayuda a proporcionar un control pormenorizado de la seguridad de los metadatos con el uso compartido de datos.</p>
            <p>Continúa conectándose a las bases de datos locales del clúster. No obstante, ahora, también es posible leer de las bases de datos y los esquemas que se crean a partir de los datashares utilizando la notación de tres partes database.schema.table. Puede realizar consultas que abarquen todas las bases de datos visibles para usted. Estas pueden ser bases de datos locales del clúster o bases de datos creadas a partir de los datashares. Los clústeres consumidores no pueden conectarse a las bases de datos que se hayan creado a partir de los datashares.</p>
            <p>Puede acceder a los datos mediante la cualificación completa. Para obtener más información, consulte <a href="./cross-database_example.html">Ejemplos de uso de una consulta entre bases de datos</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT * FROM sales_db.public.tickit_sales_redshift ORDER BY 1,2 LIMIT 5;

 salesid | listid | sellerid | buyerid | eventid | dateid | qtysold | pricepaid | commission |      saletime
---------+--------+----------+---------+---------+--------+---------+-----------+------------+---------------------
       1 |      1 |    36861 |   21191 |    7872 |   1875 |       4 |    728.00 |     109.20 | 2008-02-18 02:36:48
       2 |      4 |     8117 |   11498 |    4337 |   1983 |       2 |     76.00 |      11.40 | 2008-06-06 05:00:16
       3 |      5 |     1616 |   17433 |    8647 |   1983 |       2 |    350.00 |      52.50 | 2008-06-06 08:26:17
       4 |      5 |     1616 |   19715 |    8647 |   1986 |       1 |    175.00 |      26.25 | 2008-06-09 08:38:52
       5 |      6 |    47402 |   14115 |    8240 |   2069 |       2 |    154.00 |      23.10 | 2008-08-31 09:17:02</code></pre>
            <p>Solo se pueden utilizar las instrucciones SELECT en los objetos compartidos. No obstante, puede crear tablas en el clúster consumidor consultando los datos de los objetos compartidos de una base de datos local diferente.</p><p>Además de las consultas, los consumidores pueden crear vistas en los objetos compartidos. Solo se admiten las vistas de enlace de tiempo de ejecución o las vistas materializadas. Amazon Redshift no admite las vistas normales en los datos compartidos. Las vistas que crean los consumidores pueden abarcar varias bases de datos locales o bases de datos creadas a partir de datashares. Para obtener más información, consulte <a href="./r_CREATE_VIEW.html">CREATE VIEW</a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">// Connect to a local cluster database
               
// Create a view on shared objects and access it. 
CREATE VIEW sales_data 
AS SELECT * 
FROM sales_db.public.tickit_sales_redshift 
WITH NO SCHEMA BINDING;

SELECT * FROM sales_data;</code></pre>
         </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./getting-started-datashare-sql.html">Administración del uso compartido de datos mediante la interfaz de SQL</div><div id="next" class="next-link" accesskey="n" href="./across-account.html">Compartir datos entre Cuentas de AWS</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>