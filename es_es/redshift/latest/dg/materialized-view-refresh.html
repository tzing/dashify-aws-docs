<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Actualización de una vista materializada - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="materialized-view-refresh" /><meta name="default_state" content="materialized-view-refresh" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-refresh.html" /><meta name="description" content="Actualice los datos de una vista materializada con REFRESH." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guía para desarrolladores de bases de datos" /><meta name="abstract" content="Cree y administre un almacenamiento de datos con Amazon Redshift, un servicio de almacenamiento de datos completamente administrado a escala de petabytes de nivel empresarial." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-refresh.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-refresh.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-refresh.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-refresh.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-refresh.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-refresh.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-refresh.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-refresh.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-refresh.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-refresh.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-refresh.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-refresh.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-refresh.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-refresh.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-refresh.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-refresh.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-refresh.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-refresh.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-refresh.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/materialized-view-refresh.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/materialized-view-refresh.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-refresh.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guía para desarrolladores de bases de datos" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de bases de datos" /><meta id="panorama-serviceConsolePage" value="Actualización de una vista materializada" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Actualización de una vista materializada - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#materialized-view-refresh" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-refresh.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-refresh.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-refresh.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Clúster,almacenamiento de datos,desarrollador,datos de ejemplo,base de datos,desarrollador de base de datos,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de bases de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Creación de vistas materializadas en Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Actualización de una vista materializada",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#materialized-view-refresh" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guía para desarrolladores de bases de datos</a></div><div id="page-toc-src"><a href="#materialized-view-auto-refresh">Actualización automática de una vista materializada</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="materialized-view-refresh">Actualización de una vista materializada</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Cuando crea una vista materializada, su contenido refleja el estado de la tabla o tablas de bases de datos subyacentes en ese momento. Los datos en la vista materializada permanecen sin cambios, incluso cuando las aplicaciones realizan cambios en los datos de las tablas subyacentes. Para actualizar los datos de la vista materializada, puede utilizar la instrucción <code class="code">REFRESH MATERIALIZED VIEW</code> en cualquier momento para actualizar de forma manual las vistas materializadas. Cuando se usa esta instrucción, Amazon Redshift identifica los cambios en la tabla o las tablas base, y los aplica a la vista materializada.</p><p>Amazon Redshift tiene dos estrategias para actualizar una vista materializada: </p><div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>En muchos casos, Amazon Redshift puede realizar una actualización progresiva. En una <em>actualización progresiva</em>, Amazon Redshift identifica rápidamente los cambios realizados en los datos de las tablas base desde la última actualización y actualiza los datos en la vista materializada. La actualización progresiva se admite en las siguientes construcciones SQL utilizadas en la consulta a la hora de definir la vista materializada:</p>
                <div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>construcciones que contienen las cláusulas SELECT, FROM, [INNER] JOIN, WHERE, GROUP BY o HAVING</p>
                    </li><li class="listitem">
                        <p>construcciones que contienen agregaciones, como SUM, MIN, MAX, AVG y COUNT</p>
                    </li><li class="listitem">
                        <p>la mayoría de las funciones SQL integradas, específicamente las que son inmutables, dado que estas tienen los mismos argumentos de entrada y siempre producen la misma salida </p>
                    </li></ul></div>
                <p>La actualización incremental también es compatible con una vista materializada que se base en una tabla de recurso compartido de datos.</p>
            </li><li class="listitem">
                <p>Si no es posible realizar una actualización progresiva, entonces Amazon Redshift realiza una actualización completa. Una <em>actualización completa</em> vuelve a ejecutar la instrucción SQL subyacente, sustituyendo todos los datos en la vista materializada.</p>
            </li><li class="listitem">
                <p>Amazon Redshift elige automáticamente el método de actualización para una vista materializada en función de la consulta SELECT utilizada para definir la vista materializada. </p>
            </li></ul></div><p>Actualizar una vista materializada en una vista materializada no es un proceso en cascada. En otras palabras, supongamos que tiene una vista materializada A que depende de la vista materializada B. En este caso, cuando se invoca REFRESH MATERIALIZED VIEW A, se actualiza A utilizando la versión actual de B, incluso cuando B no está actualizada. Para que A se actualice completamente, antes de actualizar A, primero actualice B en una transacción independiente.</p><p>En el siguiente ejemplo, se muestra cómo crear un plan completo de actualización para una vista materializada mediante programación. Para actualizar la vista materializada v, primero actualice la vista materializada u. Para actualizar la vista materializada w, primero actualice la vista materializada u y, luego, la v.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE t(a INT);
CREATE MATERIALIZED VIEW u AS SELECT * FROM t;
CREATE MATERIALIZED VIEW v AS SELECT * FROM u;
CREATE MATERIALIZED VIEW w AS SELECT * FROM v;

WITH RECURSIVE recursive_deps (mv_tgt, lvl, mv_dep) AS
( SELECT trim(name) as mv_tgt, 0 as lvl, trim(ref_name) as mv_dep
  FROM stv_mv_deps
  UNION ALL
  SELECT R.mv_tgt, R.lvl+1 as lvl, trim(S.ref_name) as mv_dep
  FROM stv_mv_deps S, recursive_deps R
  WHERE R.mv_dep = S.name
)

SELECT mv_tgt, mv_dep from recursive_deps
ORDER BY mv_tgt, lvl DESC;

 mv_tgt | mv_dep
--------+--------
 v      | u
 w      | u
 w      | v
(3 rows)</code></pre><p>En el siguiente ejemplo, se muestra un mensaje informativo cuando se ejecuta REFRESH MATERIALIZED VIEW en una vista materializada que depende de una vista materializada que no está actualizada.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create table a(a int);</code></pre><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create materialized view b as select * from a;</code></pre><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create materialized view c as select * from b;</code></pre><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">insert into a values (1);</code></pre><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">refresh materialized view c;

INFO:  Materialized view c is already up to date.  However, it depends on another materialized view that is not up to date.</code></pre><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">REFRESH MATERIALIZED VIEW b;
INFO:  Materialized view b was incrementally updated successfully.</code></pre><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">REFRESH MATERIALIZED VIEW c;
INFO:  Materialized view c was incrementally updated successfully.</code></pre><p>En la actualidad, Amazon Redshift tiene las siguientes limitaciones para la actualización progresiva de vistas materializadas. </p><p>Amazon Redshift no admite la actualización progresiva de las vistas materializadas que se definen con una consulta mediante los siguientes elementos SQL:</p><div class="itemizedlist">
                 
                 
                 
                 
                
                 
                 

                 

                 
                
            <ul class="itemizedlist"><li class="listitem">
                    <p>OUTER JOIN (RIGHT, LEFT o FULL).</p></li><li class="listitem">
                    <p>las operaciones de configuración de UNION, INTERSECT, EXCEPT y MINUS</p></li><li class="listitem">
                    <p>Las funciones de agregación MEDIAN, PERCENTILE_CONT, LISTAGG, STDDEV_SAMP, STDDEV_POP, APPROXIMATE COUNT, APPROXIMATE PERCENTILE y las funciones de agregación de cada bit</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se admiten las funciones de agregación COUNT, SUM y AVG.</p></div></div>
                </li><li class="listitem">
                    <p>Funciones de agregación DISTINCT, como DISTINCT COUNT, DISTINCT SUM, etc.</p></li><li class="listitem"><p>Funciones de ventana.</p></li><li class="listitem"><p>Una consulta que utiliza tablas temporales para la optimización de consultas, como la optimización de subexpresiones comunes.</p></li><li class="listitem"><p>Subconsultas.</p></li><li class="listitem">
                    <p>Tablas externas que hacen referencia a los siguientes formatos de la consulta que definen la vista materializada. </p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p> Delta Lake </p>
                        </li><li class="listitem">
                            <p> Hudi </p>
                        </li></ul></div>
                    <p>La actualización incremental es compatible en la pista de versión preliminar de las vistas materializadas definidas con formatos distintos de los enumerados anteriormente. Para obtener más información sobre la configuración de clústeres de versión preliminar, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-clusters-console.html#cluster-preview">Crear un clúster de versión preliminar</a> en la <em>Guía de administración de Amazon Redshift</em>. Para obtener información sobre la configuración de grupos de trabajo de versión preliminar, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-workgroup-preview.html">Crear un grupo de trabajo de vista previa</a> en la <em>Guía de administración de Amazon Redshift</em>. </p>
                </li></ul></div>
            <h2 id="materialized-view-auto-refresh">Actualización automática de una vista materializada</h2>
        <p>Amazon Redshift puede actualizar automáticamente las vistas materializadas con datos actualizados de sus tablas base cuando se crean vistas materializadas con la opción de actualización automática o se modifican para activar dicha opción. Amazon Redshift actualiza automáticamente las vistas materializadas lo antes posible después de que se producen los cambios en las tablas base.</p>
            <p>Para completar la actualización de las vistas materializadas más importantes con un impacto mínimo en las cargas de trabajo activas del clúster, Amazon Redshift tiene en cuenta varios factores. Estos factores incluyen la carga del sistema actual, los recursos necesarios para la actualización, los recursos disponibles del clúster y la frecuencia con la que se utilizan las vistas materializadas. </p>
            <p>Amazon Redshift prioriza las cargas de trabajo antes que la actualización automática y es posible que detenga la actualización automática para preservar el rendimiento de la carga de trabajo del usuario. Este enfoque podría retrasar la actualización de algunas vistas materializadas. En algunos casos, es posible que necesite un comportamiento de actualización más determinística para las vistas materializadas. En tal caso, considere la posibilidad de utilizar la actualización manual, como se describe en <a href="./materialized-view-refresh-sql-command.html">REFRESH MATERIALIZED VIEW</a>, o la actualización programada con las operaciones de la API del programador de Amazon Redshift o la consola.</p>
        <p>Puede establecer la actualización automática para las vistas materializadas mediante CREATE MATERIALIZED VIEW. También puede utilizar la cláusula AUTO REFRESH para actualizar las vistas materializadas de forma automática. Para obtener más información acerca de la creación de vistas materializadas, consulte <a href="./materialized-view-create-sql-command.html">CREATE MATERIALIZED VIEW</a>. Puede activar la actualización automática de una vista materializada actual con <a href="./r_ALTER_MATERIALIZED_VIEW.html">ALTER MATERIALIZED VIEW</a>.</p>
      
            <p>Tenga en cuenta lo siguiente cuando actualice las vistas materializadas:</p>
            <div class="itemizedlist">
                 

             
             
                 
            <ul class="itemizedlist"><li class="listitem"><p>Todavía puede actualizar una vista materializada de forma explícita mediante el comando REFRESH MATERIALIZED VIEW, aunque no haya habilitado la actualización automática para la vista materializada.</p></li><li class="listitem"><p>Amazon Redshift no actualiza automáticamente las vistas materializadas que se definen en tablas externas.</p></li><li class="listitem"><p>Para el estado de actualización, puede verificar SVL_MV_REFRESH_STATUS, que registra las consultas iniciadas por el usuario o actualizadas automáticamente. </p></li><li class="listitem"><p>Para ejecutar REFRESH en vistas materializadas solo para volver a calcular, asegúrese de tener el permiso CREATE para los esquemas. Para obtener más información, consulte <a href="./r_GRANT.html">GRANT</a>.</p></li></ul></div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./materialized-view-auto-rewrite.html">Reescritura automática de consultas para utilizar vistas materializadas</div><div id="next" class="next-link" accesskey="n" href="./materialized-view-auto-mv.html">Vistas materializadas automatizadas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-refresh.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-refresh.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>