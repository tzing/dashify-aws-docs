<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Prácticas recomendadas de Amazon Redshift para el diseño de consultas - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c_designing-queries-best-practices" /><meta name="default_state" content="c_designing-queries-best-practices" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="description" content="Para maximizar el rendimiento de las consultas, siga estas recomendaciones en el momento de crear las consultas." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guía para desarrolladores de bases de datos" /><meta name="abstract" content="Cree y administre un almacenamiento de datos con Amazon Redshift, un servicio de almacenamiento de datos completamente administrado a escala de petabytes de nivel empresarial." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guía para desarrolladores de bases de datos" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de bases de datos" /><meta id="panorama-serviceConsolePage" value="Prácticas recomendadas de Amazon Redshift para el diseño de consultas" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Prácticas recomendadas de Amazon Redshift para el diseño de consultas - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c_designing-queries-best-practices" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Clúster,almacenamiento de datos,desarrollador,datos de ejemplo,base de datos,desarrollador de base de datos,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de bases de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Prácticas recomendadas de Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/best-practices.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Prácticas recomendadas de Amazon Redshift para el diseño de consultas",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/best-practices.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c_designing-queries-best-practices" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guía para desarrolladores de bases de datos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c_designing-queries-best-practices">Prácticas recomendadas de Amazon Redshift para el diseño de consultas</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Para maximizar el rendimiento de las consultas, siga estas recomendaciones en el momento de crear las consultas.</p><div class="itemizedlist">
          
          
          
          
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Diseñe las tablas según las prácticas recomendadas y, así, generará una base sólida para el rendimiento de las consultas. Para obtener más información, consulte <a href="./c_designing-tables-best-practices.html">Prácticas recomendadas de Amazon Redshift para el diseño de tablas</a>.</p>
         </li><li class="listitem">
            <p>Evite usar <code class="code">select *</code>. Incluya solamente las columnas que necesita.</p>
         </li><li class="listitem">
            <p>Utilice una expresión <a href="./r_CASE_function.html">Expresión condicional CASE</a> para realizar agregaciones complejas, en lugar de seleccionar de la misma tabla varias veces.</p>
         </li><li class="listitem">
            <p>No utilice combinaciones cruzadas a menos que sea absolutamente necesario. Estas combinaciones sin una condición de combinación dan lugar a un producto cartesiano de dos tablas. Por lo general, las combinaciones cruzadas se ejecutan como combinaciones de bucles anidados, que son los tipos de combinación más lentos. </p>
         </li><li class="listitem">
            <p>Utilice subconsultas en los casos donde una tabla en la consulta se utilice solamente para condiciones de predicado y la subconsulta devuelva una cantidad pequeña de filas (menos de 200). En el siguiente ejemplo, se utiliza una subconsulta para evitar combinar la tabla LISTING.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select sum(sales.qtysold)
from sales
where salesid in (select listid from listing where listtime &gt; '2008-12-26');</code></pre>
         </li><li class="listitem">
            <p>Utilice predicados para restringir el conjunto de datos tanto como sea posible.</p>
         </li><li class="listitem">
            <p>En el predicado, utilice los operadores menos costosos que pueda. Los operadores <a href="./r_comparison_condition.html">Condición de comparación</a> son preferibles a los operadores <a href="./r_patternmatching_condition_like.html">LIKE</a>. Se prefieren incluso los operadores LIKE a los <a href="./pattern-matching-conditions-similar-to.html">SIMILAR TO</a> o a los <a href="./pattern-matching-conditions-posix.html">Operadores POSIX</a>.</p>
         </li><li class="listitem">
            <p>Evite utilizar funciones en los predicados de consulta. Usarlos puede elevar el costo de la consulta al necesitar grandes cantidades de filas para resolver los pasos intermedios de la consulta.</p>
         </li><li class="listitem">
            <p>Si es posible, utilice una cláusula WHERE para restringir el conjunto de datos. El planificador de consultas puede utilizar el orden de las filas para determinar qué registros coinciden con los criterios y, así, evitar examinar grandes cantidades de bloques de disco. Sin esto, el motor de ejecución de la consulta debe examinar en su totalidad todas las columnas que participan.</p>
         </li><li class="listitem">
            <p>Agregue predicados para filtrar tablas que participen en combinaciones, aun cuando se apliquen los mismos filtros. La consulta devuelve el mismo conjunto de resultados, pero Amazon Redshift puede filtrar las tablas combinadas antes del paso de análisis y, a continuación, puede omitir de manera eficiente el análisis de bloques de esas tablas. No se necesitan filtros redundantes si usted filtra una columna que se usa en la condición de combinación. </p>
            <p>Por ejemplo, imagine que desea combinar <code class="code">SALES</code> y <code class="code">LISTING</code> para encontrar ventas de tickets después de diciembre, agrupadas por vendedor. Ambas tablas se ordenan por fecha. La siguiente consulta combina las tablas según su clave común y filtra por valores <code class="code">listing.listtime</code> mayores al 1. º de diciembre.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select listing.sellerid, sum(sales.qtysold)
from sales, listing
where sales.salesid = listing.listid
and listing.listtime &gt; '2008-12-01'
group by 1 order by 1;</code></pre>
            <p>La cláusula WHERE no incluye un predicado para <code class="code">sales.saletime</code>, por lo que el motor de ejecución debe examinar toda la tabla <code class="code">SALES</code>. Si sabe que el filtro generaría que menos filas participen de la combinación, agregue también el filtro. En el siguiente ejemplo, se reduce considerablemente el tiempo de ejecución.</p>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select listing.sellerid, sum(sales.qtysold)
from sales, listing
where sales.salesid = listing.listid
and listing.listtime &gt; '2008-12-01'
and sales.saletime &gt; '2008-12-01'
group by 1 order by 1;</code></pre>

         </li><li class="listitem">
            <p>Utilice las claves de ordenación en la cláusula GROUP BY para que el planificador de consultas pueda utilizar la agregación de manera más eficiente. Una consulta puede calificar para agregación en una fase cuando la lista GROUP BY tiene solamente columnas de clave de ordenación, una de las cuales es también la clave de distribución. Las columnas con clave de ordenación en la lista GROUP BY deben incluir la primera clave de ordenación y, luego, las demás claves de ordenación que desee usar en el orden de la clave de ordenación. Por ejemplo, es válido utilizar la primera clave de ordenación, la primera y la segunda claves de ordenación, la primera, la segunda y la tercera claves de ordenación y, así, sucesivamente. No es válido usar la primera y la tercera claves de ordenación.</p>
            <p>Puede confirmar el uso de agregación en una fase al ejecutar el comando <a href="./r_EXPLAIN.html">EXPLAIN</a> y buscar <code class="code">XN
                  GroupAggregate</code> en el paso de agregación de la consulta.</p>
         </li><li class="listitem">
            <p>Si utiliza las cláusulas GROUP BY y ORDER BY, asegúrese de poner las columnas en el mismo orden en ambas cláusulas. Es decir, utilice el siguiente enfoque.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">group by a, b, c
order by a, b, c</code></pre>
            <p>No utilice el siguiente enfoque.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">group by b, c, a
order by a, b, c</code></pre>
         </li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c_best-practices-avoid-maintenance.html">Programación de periodos de mantenimiento</div><div id="next" class="next-link" accesskey="n" href="./advisor.html">Uso de Advisor</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>