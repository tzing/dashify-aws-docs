<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SVL_STORED_PROC_MESSAGES - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_SVL_STORED_PROC_MESSAGES" /><meta name="default_state" content="r_SVL_STORED_PROC_MESSAGES" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" /><meta name="description" content="Obtenga información sobre los mensajes de procedimientos almacenados." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guía para desarrolladores de bases de datos" /><meta name="abstract" content="Cree y administre un almacenamiento de datos con Amazon Redshift, un servicio de almacenamiento de datos completamente administrado a escala de petabytes de nivel empresarial." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guía para desarrolladores de bases de datos" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de bases de datos" /><meta id="panorama-serviceConsolePage" value="SVL_STORED_PROC_MESSAGES" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>SVL_STORED_PROC_MESSAGES - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_SVL_STORED_PROC_MESSAGES" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Clúster,almacenamiento de datos,desarrollador,datos de ejemplo,base de datos,desarrollador de base de datos,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de bases de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referencia de las tablas y vistas de sistema",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/cm_chap_system-tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Monitoreo del sistema (solo aprovisionado)",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_intro_system_views.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Vistas de SVL para el clúster principal",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/svl_views.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "SVL_STORED_PROC_MESSAGES",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/svl_views.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_SVL_STORED_PROC_MESSAGES" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guía para desarrolladores de bases de datos</a></div><div id="page-toc-src"><a href="#r_SVL_STORED_PROC_MESSAGES-table-columns">Columnas de la tabla</a><a href="#r_SVL_STORED_PROC_MESSAGES-sample-query">Consulta de ejemplo</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_SVL_STORED_PROC_MESSAGES">SVL_STORED_PROC_MESSAGES</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Puede consultar la vista del sistema SVL_STORED_PROC_MESSAGES para obtener información sobre los mensajes de procedimientos almacenados. Los mensajes generados se registran incluso si se cancela la llamada al procedimiento almacenado. Cada llamada de procedimiento almacenado recibe un ID de consulta. Para obtener más información acerca de cómo establecer el nivel mínimo de mensajes registrados, consulte stored_proc_log_min_messages.</p><p>SVL_STORED_PROC_MESSAGES es visible para todos los usuarios. Los superusuarios pueden ver todas las filas; los usuarios normales solo pueden ver sus datos. Para obtener más información, consulte <a href="./cm_chap_system-tables.html#c_visibility-of-data">Visibilidad de datos en las tablas y vistas de sistema</a>.</p><p>Algunos o todos los datos de esta tabla también están en la vista de monitoreo SYS <a href="./SYS_PROCEDURE_MESSAGES.html">SYS_PROCEDURE_MESSAGES</a>. Los datos de la vista de monitoreo SYS están formateados para que sean más fáciles de usar y entender. Se recomienda utilizar la vista de monitoreo SYS para las consultas.</p>
            <h2 id="r_SVL_STORED_PROC_MESSAGES-table-columns">Columnas de la tabla</h2>
            
            
            <div class="table-container"><div class="table-contents"><table id="w319aac49c17c15c65b9b3"><thead>
                        <tr>
                            <th>Nombre de la columna </th>
                            <th>Tipo de datos </th>
                            <th>Descripción </th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">userid </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">El ID del usuario cuyos privilegios se utilizaron para ejecutar la instrucción. Si esta llamada se anidó dentro de un procedimiento almacenado de SECURITY DEFINER, entonces este es el id de usuario del propietario de ese procedimiento almacenado. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">session_userid </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">El ID del usuario que creó la sesión y el invocador de la llamada del procedimiento almacenado de nivel superior. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">pid</td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">El ID del proceso. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">xid</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">El ID de la transacción de la consulta de la llamada del procedimiento.</td>
                        </tr>

                        <tr>
                            <td tabindex="-1">consulta </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">El ID de la consulta de la llamada del procedimiento. </td>
                        </tr>   
                        <tr>
                            <td tabindex="-1">recordtime</td>
                            <td tabindex="-1">Marca de tiempo</td>
                            <td tabindex="-1">La hora en UTC a la que se generó el mensaje.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">loglevel</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">El valor numérico del nivel de registro del mensaje generado. Valores posibles: 20 para LOG, 30 para INFO, 40 para NOTICE, 50 para WARNING y 60 para EXCEPTION</td>
                        </tr>
                        
                        <tr>
                            <td tabindex="-1">loglevel_text</td>
                            <td tabindex="-1">character (10) </td>
                            <td tabindex="-1">Nivel de registro que se corresponde con el valor numérico de loglevel. Valores posibles: LOG, INFO, NOTICE, WARNING y EXCEPTION.</td>
                        </tr>                         
                        <tr>
                            <td tabindex="-1">message</td>
                            <td tabindex="-1">character(1024)</td>
                            <td tabindex="-1">El texto del mensaje generado.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">linenum</td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">El número de línea de la instrucción generada.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">querytext</td>
                            <td tabindex="-1">character(500) </td>
                            <td tabindex="-1">El texto real de la consulta de la llamada del procedimiento. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">etiqueta</td>
                            <td tabindex="-1">character(320) </td>
                            <td tabindex="-1">Ya sea el nombre del archivo utilizado para ejecutar la consulta o una etiqueta definida con un comando SET QUERY_GROUP. Si la consulta no se basa en archivos o si no se establece el parámetro QUERY_GROUP, el valor del campo es el predeterminado.</td>
                        </tr>                        
  
                        <tr>
                            <td tabindex="-1">aborted </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">Si el sistema detuvo un procedimiento almacenado o el usuario lo canceló, esta columna tendrá el valor 1. Si la consulta se ejecutó hasta su finalización, esta columna tendrá el valor 0. </td>
                        </tr>

                        <tr>
                            <td tabindex="-1">message_xid</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">El ID de la transacción del mensaje enviado.</td>
                        </tr>
                    </table></div></div>
         
            <h2 id="r_SVL_STORED_PROC_MESSAGES-sample-query">Consulta de ejemplo</h2>
            
            
            <p>Las siguientes instrucciones SQL muestran cómo utilizar SVL_STORED_PROC_MESSAGES para revisar los mensajes generados.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">-- Create and run a stored procedure
CREATE OR REPLACE PROCEDURE test_proc1(f1 int) AS
$$
BEGIN
    RAISE INFO 'Log Level: Input f1 is %',f1;
    RAISE NOTICE 'Notice Level: Input f1 is %',f1;
    EXECUTE 'select invalid';
    RAISE NOTICE 'Should not print this';

EXCEPTION WHEN OTHERS THEN
     raise exception 'EXCEPTION level: Exception Handling';
END;
$$ LANGUAGE plpgsql;

-- Call this stored procedure
CALL test_proc1(2);

-- Show raised messages with level higher than INFO
SELECT query, recordtime, loglevel, loglevel_text, trim(message) as message, aborted FROM svl_stored_proc_messages 
  WHERE loglevel &gt; 30 AND query = 193 ORDER BY recordtime;

 query |         recordtime         | loglevel | loglevel_text |               message               | aborted
-------+----------------------------+----------+---------------+-------------------------------------+---------
   193 | 2020-03-17 23:57:18.277196 |       40 | NOTICE        | Notice Level: Input f1 is 2         |       1
   193 | 2020-03-17 23:57:18.277987 |       60 | EXCEPTION     | EXCEPTION level: Exception Handling |       1
(2 rows)

-- Show raised messages at EXCEPTION level
SELECT query, recordtime, loglevel, loglevel_text, trim(message) as message, aborted FROM svl_stored_proc_messages 
  WHERE loglevel_text = 'EXCEPTION' AND query = 193 ORDER BY recordtime;
        
 query |         recordtime         | loglevel | loglevel_text |               message               | aborted
-------+----------------------------+----------+---------------+-------------------------------------+---------
   193 | 2020-03-17 23:57:18.277987 |       60 | EXCEPTION     | EXCEPTION level: Exception Handling |       1
</code></pre>
            
            
            
            <p>Las siguientes instrucciones SQL muestran cómo utilizar SVL_STORED_PROC_MESSAGES para revisar los mensajes generados con la opción SET cuando se crea un procedimiento almacenado. Como test_proc() tiene el nivel de registro mínimo de NOTICE, solo los mensajes de nivel NOTICE, WARNING y EXCEPTION se registran en SVL_STORED_PROC_MESSAGES.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">-- Create a stored procedure with minimum log level of NOTICE 
CREATE OR REPLACE PROCEDURE test_proc() AS
$$
BEGIN
    RAISE LOG 'Raise LOG messages';
    RAISE INFO 'Raise INFO messages';
    RAISE NOTICE 'Raise NOTICE messages';
    RAISE WARNING 'Raise WARNING messages';
    RAISE EXCEPTION 'Raise EXCEPTION messages';
    RAISE WARNING 'Raise WARNING messages again'; -- not reachable
END;
$$ LANGUAGE plpgsql SET stored_proc_log_min_messages = NOTICE; 

-- Call this stored procedure
CALL test_proc();

-- Show the raised messages
SELECT query, recordtime, loglevel_text, trim(message) as message, aborted FROM svl_stored_proc_messages 
  WHERE query = 149 ORDER BY recordtime;
  
 query |         recordtime         | loglevel_text |          message         | aborted
-------+----------------------------+---------------+--------------------------+---------
   149 | 2020-03-16 21:51:54.847627 | NOTICE        | Raise NOTICE messages    |       1
   149 | 2020-03-16 21:51:54.84766  | WARNING       | Raise WARNING messages   |       1
   149 | 2020-03-16 21:51:54.847668 | EXCEPTION     | Raise EXCEPTION messages |       1
(3 rows)
</code></pre>
            
            
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_SVL_STORED_PROC_CALL.html">SVL_STORED_PROC_CALL</div><div id="next" class="next-link" accesskey="n" href="./r_SVL_TERMINATE.html">SVL_TERMINATE</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SVL_STORED_PROC_MESSAGES.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>