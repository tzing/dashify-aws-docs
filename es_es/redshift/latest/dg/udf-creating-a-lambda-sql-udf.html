<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Creación de una UDF de Lambda escalar - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="udf-creating-a-lambda-sql-udf" /><meta name="default_state" content="udf-creating-a-lambda-sql-udf" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" /><meta name="description" content="Amazon Redshift puede utilizar funciones personalizadas definidas en AWS Lambda como parte de las consultas SQL. Puede escribir UDF de Lambda escalares en cualquier lenguaje de programación admitido por Lambda, como Java, Go, PowerShell, Node.js, C#, Python y Ruby. También puede utilizar un tiempo de ejecución personalizado." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guía para desarrolladores de bases de datos" /><meta name="abstract" content="Cree y administre un almacenamiento de datos con Amazon Redshift, un servicio de almacenamiento de datos completamente administrado a escala de petabytes de nivel empresarial." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guía para desarrolladores de bases de datos" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de bases de datos" /><meta id="panorama-serviceConsolePage" value="Creación de una UDF de Lambda escalar" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Creación de una UDF de Lambda escalar - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#udf-creating-a-lambda-sql-udf" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Clúster,almacenamiento de datos,desarrollador,datos de ejemplo,base de datos,desarrollador de base de datos,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de bases de datos",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Creación de funciones definidas por el usuario",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/user-defined-functions.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Creación de una UDF de Lambda escalar",
        "item" : "https://docs.aws.amazon.com/es_es/redshift/latest/dg/user-defined-functions.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#udf-creating-a-lambda-sql-udf" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guía para desarrolladores de bases de datos</a></div><div id="page-toc-src"><a href="#udf-lambda-register">Registro de una UDF de Lambda</a><a href="#udf-lambda-security">Administración de la seguridad y los privilegios de una UDF de Lambda</a><a href="#udf-lambda-authorization">Configuración del parámetro de autorización para las UDF de Lambda</a><a href="#udf-lambda-json">Uso de la interfaz JSON entre Amazon Redshift y Lambda</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="udf-creating-a-lambda-sql-udf">Creación de una UDF de Lambda escalar</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon Redshift puede utilizar funciones personalizadas definidas en AWS Lambda como parte de las consultas SQL. Puede escribir UDF de Lambda escalares en cualquier lenguaje de programación admitido por Lambda, como Java, Go, PowerShell, Node.js, C#, Python y Ruby. También puede utilizar un tiempo de ejecución personalizado.</p><p>Las UDF de Lambda se definen y administran en Lambda. Además, puede controlar los privilegios de acceso para invocar estas UDF en Amazon Redshift. Puede invocar varias funciones de Lambda en la misma consulta o invocar la misma función varias veces.</p><p>Utilice las UDF de Lambda en cualquier cláusula de las instrucciones SQL donde se admitan funciones escalares. También puede utilizar las UDF de Lambda en cualquier instrucción SQL, como SELECT, UPDATE, INSERT o DELETE. </p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>El uso de las UDF de Lambda puede generar cargos adicionales por el servicio Lambda. Si esto sucede o no depende de distintos factores, como el número de solicitudes de Lambda (invocaciones de UDF) y la duración total de la ejecución del programa Lambda. No obstante, no se generan cargos adicionales por el uso de las UDF de Lambda en Amazon Redshift. Para obtener información acerca de los precios de AWS Lambda, consulte <a href="https://aws.amazon.com/lambda/pricing" rel="noopener noreferrer" target="_blank"><span>Precios de AWS Lambda</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p><p>El número de solicitudes de Lambda varía según la cláusula de instrucción SQL específica en la que se utiliza la UDF de Lambda. Por ejemplo, supongamos que la función se utiliza en una cláusula WHERE como la siguiente. <code class="code"></code></p><p><code class="code">SELECT a, b FROM t1 WHERE lambda_multiply(a, b) = 64; SELECT a, b FROM t1 WHERE
               a*b = lambda_multiply(2, 32) </code></p><p>En este caso, Amazon Redshift llama a la primera instrucción SELECT para cada una y llama a la segunda instrucción SELECT solo una vez.</p><p>No obstante, es posible que el uso de una UDF en la parte de proyección de la consulta solo invoque la función de Lambda una vez por cada fila calificada o agrupada en el conjunto de resultados. </p></div></div>
         <h2 id="udf-lambda-register">Registro de una UDF de Lambda</h2>
      <p> El comando <a href="./r_CREATE_EXTERNAL_FUNCTION.html">CREATE EXTERNAL FUNCTION</a> crea los siguientes parámetros:</p>
      <div class="itemizedlist">
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>(Opcional) Una lista de argumentos con tipo de datos. </p>
         </li><li class="listitem">
            <p>Un tipo de datos de retorno.</p>
         </li><li class="listitem">
            <p>Un nombre de función de la función externa a la que llama Amazon Redshift. </p>
         </li><li class="listitem">
            <p>Un rol de IAM que el clúster de Amazon Redshift está autorizado a asumir y llamar a Lambda.</p>
         </li><li class="listitem">
            <p>Un nombre de función de Lambda que invoca la UDF de Lambda.</p>
         </li></ul></div>
         <p>Para obtener más información acerca de CREATE EXTERNAL FUNCTION, consulte <a href="./r_CREATE_EXTERNAL_FUNCTION.html">CREATE EXTERNAL FUNCTION</a>.</p>
      <p>Los tipos de datos de entrada y retorno para esta función pueden ser cualquier tipo de datos de Amazon Redshift estándar.</p>
      <p>Amazon Redshift se asegura de que la función externa pueda enviar y recibir argumentos y resultados en lotes. </p>
       
         <h2 id="udf-lambda-security">Administración de la seguridad y los privilegios de una UDF de Lambda</h2>
         <p>Para crear una UDF de Lambda, asegúrese de tener los permisos de uso en LANGUAGE EXFUNC. Debe conceder de forma explícita USAGE ON LANGUAGE EXFUNC o revocar USAGE ON LANGUAGE EXFUNC a usuarios, grupos o público específicos.</p>
            <p>En el siguiente ejemplo, se establece el uso de EXFUNC como PUBLIC.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">grant usage on language exfunc to PUBLIC; </code></pre>
         <p>En el siguiente ejemplo, se revoca el permiso de uso PUBLIC de exfunc y se concede el permiso de uso al grupo de usuarios lambda_udf_devs.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">revoke usage on language exfunc from PUBLIC;
grant usage on language exfunc to group lambda_udf_devs;</code></pre>
         <p>Para ejecutar una UDF de Lambda, asegúrese de tener permiso para cada función a la que se llama. De manera predeterminada, se establece como PUBLIC el permiso para ejecutar las UDF de Lambda nuevas. Para restringir el uso, revoque el permiso PUBLIC para la función. Luego, conceda el privilegio a usuarios o grupos específicos.</p>
           <p>En el siguiente ejemplo, se revoca la ejecución de la función exfunc_sum como PUBLIC. Luego, se concede el uso al grupo de usuarios lambda_udf_devs.</p>
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">revoke execute on function exfunc_sum(int, int) from PUBLIC;
grant execute on function exfunc_sum(int, int) to group lambda_udf_devs;</code></pre>
         <p>De manera predeterminada, los superusuarios tienen todos los privilegios.</p>
               <p>Para obtener más información sobre cómo conceder y revocar privilegios, consulte <a href="./r_GRANT.html">GRANT</a> y <a href="./r_REVOKE.html">REVOKE</a>.</p>
       
         <h2 id="udf-lambda-authorization">Configuración del parámetro de autorización para las UDF de Lambda</h2>
         
         <p>El comando CREATE EXTERNAL FUNCTION requiere autorización para invocar funciones de Lambda en AWS Lambda. Para comenzar la autorización, especifique un rol de AWS Identity and Access Management (IAM) cuando ejecute el comando CREATE EXTERNAL FUNCTION. Para obtener más información acerca de los roles de IAM, consulte <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html">Roles de IAM</a> en <em>Guía del usuario de IAM</em>.</p>
            <p>Si ya existe un rol de IAM con permisos para invocar funciones de Lambda adjuntas a su clúster, puede sustituir el nombre de recurso de Amazon (ARN) del rol en el parámetro IAM_ROLE con el comando. En las siguientes secciones, se describen los pasos para utilizar un rol de IAM en el comando CREATE EXTERNAL FUNCTION.</p>
         
          
            <h3 id="udf-lambda-create-iam">Creación de un rol de IAM para Lambda</h3>
            <p>El rol de IAM requiere permiso para invocar funciones de Lambda. Cuando cree el rol de IAM, proporcione el permiso a través de una de las siguientes maneras:</p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem"><p>Adjunte la política <code class="code">AWSLambdaRole</code> en la página <b>Attach permissions policy</b> (Adjuntar política de permisos) cuando cree un rol de IAM. La política <code class="code">AWSLambdaRole</code> concede permisos para invocar funciones de Lambda, que es el requisito mínimo. Para obtener más información y otras políticas, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-identity-based.html">Políticas de IAM basadas en identidad para AWS Lambda</a> en la <em>Guía para desarrolladores de AWS Lambda</em>.</p></li><li class="listitem"><p>Cree su propia política personalizada para adjuntarla a su rol de IAM con el permiso <code class="code">lambda:InvokeFunction</code> de todos los recursos o de una función de Lambda en particular con el ARN de esa función. Para obtener más información sobre cómo crear una política, consulte <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_create.html">Creación de políticas de IAM</a> en la <em>Guía del usuario de IAM</em>.</p>
                       <p>La siguiente política de ejemplo permite invocar a Lambda en una función de Lambda en particular.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "Invoke",
            "Effect": "Allow",
            "Action": [
                "lambda:InvokeFunction"
            ],
            "Resource": "arn:aws:lambda:us-west-2:123456789012:function:my-function"
        }
    ]
}</code></pre>
                        <p>Para obtener más información sobre los recursos para funciones de Lambda, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-api-permissions-ref.html">Recursos y condiciones para acciones de Lambda</a> en la <em>Referencia de la API de IAM</em>.</p>
                        <p>Después de crear una política personalizada con los permisos necesarios, puede adjuntar la política al rol de IAM en la página <b>Attach permissions policy</b> (Adjuntar política de permisos) cuando cree un rol de IAM.</p></li></ul></div>
            <p>Para conocer los pasos que se deben realizar para crear un rol de IAM, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html">Autorización de Amazon Redshift para acceder a otros servicios de AWS en su nombre</a> en la <em>Guía de administración de Amazon Redshift</em>.</p>
              <p>Si no desea crear un rol de IAM nuevo, puede agregar los permisos mencionados anteriormente a su rol de IAM existente.</p>
                
        
          
            <h3 id="udf-lambda-associate-iam">Asociación de un rol de IAM al clúster</h3>
              <p>Adjunte el rol de IAM a su clúster. Puede agregar un rol a un clúster o ver los roles asociados a un clúster mediante la consola de administración, la CLI o la API de Amazon Redshift. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/copy-unload-iam-role.html">Asociación de un rol de IAM a un clúster</a> en la <em>Guía de administración de Amazon Redshift</em>.</p>
          
            
             
               <h3 id="udf-lambda-include-iam">Inclusión del rol de IAM en el comando</h3>
               <p>Incluya el ARN del rol de IAM en el comando CREATE EXTERNAL FUNCTION. Al crear un rol de IAM, IAM devuelve el Amazon Resource Name (ARN, Nombre de recurso de Amazon) del rol. Para especificar un rol de IAM, proporcione el ARN del rol con el parámetro <code class="code">IAM_ROLE</code>. A continuación, se muestra la sintaxis del parámetro <code class="code">IAM_ROLE</code>.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">IAM_ROLE 'arn:aws:iam::aws-account-id:role/role-name'</code></pre>
               <p>Para invocar funciones de Lambda que se encuentran en otras cuentas dentro de la misma región, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html#authorizing-redshift-service-chaining-roles.html">Encadenamiento de roles de IAM en Amazon Redshift</a>.</p>
             
       
         <h2 id="udf-lambda-json">Uso de la interfaz JSON entre Amazon Redshift y AWS Lambda</h2>
         
         <p>Amazon Redshift utiliza una interfaz común para todas las funciones de Lambda con las que Amazon Redshift se comunica.</p>
         <p>La siguiente tabla muestra la lista de campos de entrada con las funciones designadas de Lambda que puede esperar con la carga de JSON.</p>
         
         
         <div class="table-container"><div class="table-contents"><table id="w319aac17c21c17b7"><thead>
                  <tr>
                     <th>Nombre del campo</th>
                     <th>
                        <p>Descripción</p>
                     </th>
                     <th>Rango de valor</th>
                  </tr>
               </thead>
                  <tr>
                     <td tabindex="-1">request_id</td>
                     <td tabindex="-1">Un identificador único universal (UUID) que identifica de manera inequívoca cada solicitud de invocación</td>
                     <td tabindex="-1">
                        <p>Un UUID válido</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p>clúster</p>
                     </td>
                     <td tabindex="-1">El nombre de recurso de Amazon (ARN) completo del clúster</td>
                     <td tabindex="-1">
                        <p>Un ARN de clúster válido</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p>user</p>
                     </td>
                     <td tabindex="-1">El nombre del usuario que realiza la llamada</td>
                     <td tabindex="-1">Un nombre de usuario válido</td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p>base de datos</p>
                     </td>
                     <td tabindex="-1">El nombre de la base de datos en la que se ejecuta la consulta</td>
                     <td tabindex="-1">Un nombre de base de datos válido</td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p>external_function</p>
                     </td>
                     <td tabindex="-1">El nombre válido y completo de la función externa que realiza la llamada</td>
                     <td tabindex="-1">Un nombre válido y completo de función</td>
                  </tr>
                 
                  
                  <tr>
                     <td tabindex="-1">
                        <p>query_id</p>
                     </td>
                     <td tabindex="-1">El ID de la consulta que realiza la llamada</td>
                     <td tabindex="-1">Un ID de consulta válido</td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p>num_records</p>
                     </td>
                     <td tabindex="-1">El número de argumentos de la carga</td>
                     <td tabindex="-1">Un valor de 1 - 2^64</td>
                  </tr>
                 
                  <tr>
                     <td tabindex="-1">
                        <p>arguments</p>
                     </td>
                     <td tabindex="-1">La carga de datos en el formato especificado</td>
                     <td tabindex="-1">Los datos en formato de matriz deben estar en una matriz JSON. Cada elemento es un registro que es una matriz si el número de argumentos es mayor que 1. Mediante el uso de una matriz, Amazon Redshift conserva el orden de los registros de la carga.</td>
                  </tr>
               </table></div></div>
         <p>El orden de la matriz JSON determina el orden del procesamiento por lotes. La función de Lambda debe procesar los argumentos de manera iterativa y producir el número exacto de registros. A continuación, se muestra un ejemplo de carga. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "request_id" : "23FF1F97-F28A-44AA-AB67-266ED976BF40",
  "cluster" : "arn:aws:redshift:xxxx",
  "user" : "adminuser",
  "database" : "db1",
  "external_function": "public.foo",
  "query_id" : 5678234,
  "num_records" : 4,
  "arguments" : [
     [ 1, 2 ],
     [ 3, null],
     null,
     [ 4, 6]
   ]
 }</code></pre>
         <p>La salida de la función de Lambda contiene los siguientes campos.</p>
         
         <div class="table-container"><div class="table-contents"><table id="w319aac17c21c17c15"><thead>
                  <tr>
                     <th>Nombre del campo</th>
                     <th>
                        <p>Descripción</p>
                     </th>
                     <th>Rango de valor</th>
                  </tr>
               </thead>
                  <tr>
                     <td tabindex="-1">success</td>
                     <td tabindex="-1">La indicación del éxito o del error de la función</td>
                     <td tabindex="-1">
                        <p>Un valor de <code class="code">"true"</code> o <code class="code">"false"</code></p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p>error_msg</p>
                     </td>

                     <td tabindex="-1">El mensaje de error si el valor de éxito se establece como <code class="code">"false"</code> (si la función presenta error); de lo contrario, este campo se ignora.</td>

                     <td tabindex="-1">
                        <p>Un mensaje válido</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p>num_records</p>
                     </td>
                     <td tabindex="-1">El número de registros de la carga</td>
                     <td tabindex="-1">Un valor de 1 - 2^64</td>
                  </tr>
                 
                  <tr>
                     <td tabindex="-1">
                        <p>results</p>
                     </td>
                     <td tabindex="-1">Los resultados de la llamada en el formato especificado</td>
                     <td tabindex="-1">N/A</td>
                  </tr>
               </table></div></div>
         <p>El siguiente es un ejemplo de la salida de la función de Lambda.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "success": true,   // true indicates the call succeeded
  "error_msg" : "my function isn't working",  // shall only exist when success != true
  "num_records": 4,      // number of records in this payload
  "results" : [
     1,
     4,
     null,
     7
   ]
}</code></pre>
         <p>Cuando llama a las funciones de Lambda desde consultas SQL, Amazon Redshift garantiza la seguridad de la conexión con las siguientes consideraciones:</p>
         <div class="itemizedlist">
             
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Permisos GRANT y REVOKE. Para obtener más información acerca de la seguridad y los privilegios de UDF, consulte <a href="./udf-security-and-privileges.html">Privilegios y seguridad de las UDF</a>.</p></li><li class="listitem"><p>Amazon Redshift solo envía el conjunto mínimo de datos a la función de Lambda designada.</p></li><li class="listitem"><p>Amazon Redshift solo llama a la función de Lambda designada con el rol de IAM designado.</p></li></ul></div>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./udf-logging-messages.html">Registro de errores y advertencias</div><div id="next" class="next-link" accesskey="n" href="./udf-example-uses.html">Ejemplos de usos de UDF</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/es_es/redshift/latest/dg/udf-creating-a-lambda-sql-udf.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>