<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Diagnoseabfragen zur Abfrageoptimierung - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="diagnostic-queries-for-query-tuning" /><meta name="default_state" content="diagnostic-queries-for-query-tuning" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" /><meta name="description" content="In diesem Thema werden Abfragen vorgestellt, mit denen Probleme bei Abfragen oder bei den zugrundeliegenden Tabellen identifiziert werden können, die zu einer Beeinträchtigung der Abfrageleistung führen können." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Datenbankentwicklerhandbuch" /><meta name="abstract" content="Erstellen und verwalten Sie ein Data Warehouse mit Amazon Redshift, einem vollständig verwalteten Petabyte-Data-Warehousing-Service auf Unternehmensniveau." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Datenbankentwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Datenbankentwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="Diagnoseabfragen zur Abfrageoptimierung" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Diagnoseabfragen zur Abfrageoptimierung - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#diagnostic-queries-for-query-tuning" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/diagnostic-queries-for-query-tuning.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Cluster,Data Warehouse,Developer,Musterdaten,Datenbank,Database Developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Datenbankentwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Optimieren der Abfrageleistung",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-optimizing-query-performance.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Analysieren und Verbessern von Abfragen",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-query-tuning.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Diagnoseabfragen zur Abfrageoptimierung",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-query-tuning.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#diagnostic-queries-for-query-tuning" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Datenbankentwicklerhandbuch</a></div><div id="page-toc-src"><a href="#identify-queries-that-are-top-candidates-for-tuning">Identifizieren der Top-Kandidaten zur Optimierung unter den Abfragen</a><a href="#identify-tables-with-data-skew-or-unsorted-rows">Identifizieren von Tabellen mit verzerrter Datenverteilung oder unsortierten Zeilen</a><a href="#identify-queries-with-nested-loops">Identifizieren von Abfragen mit verschachtelten Schleifen</a><a href="#review-queue-wait-times-for-queries">Überprüfen der Wartezeiten von Abfragen in Warteschlangen</a><a href="#review-query-alerts-by-table">Überprüfen von Abfragewarnungen nach Tabelle</a><a href="#identify-tables-with-missing-statistics">Identifizieren von Tabellen mit fehlender Tabellenstatistik</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="diagnostic-queries-for-query-tuning">Diagnoseabfragen zur Abfrageoptimierung</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Verwenden Sie die folgenden Abfragen, um Probleme bei Abfragen oder bei den zugrundeliegenden Tabellen zu identifizieren, die zu einer Beeinträchtigung der Abfrageleistung führen können. Wir empfehlen, diese Abfragen zusammen mit dem Abfrageoptimierungsprozess in <a href="./c-query-tuning.html">Analysieren und Verbessern von Abfragen</a> zu verwenden.</p><div class="highlights" id="inline-topiclist"><h6>Themen</h6><ul><li><a href="#identify-queries-that-are-top-candidates-for-tuning">Identifizieren der Top-Kandidaten zur Optimierung unter den Abfragen</a></li><li><a href="#identify-tables-with-data-skew-or-unsorted-rows">Identifizieren von Tabellen mit verzerrter Datenverteilung oder unsortierten Zeilen</a></li><li><a href="#identify-queries-with-nested-loops">Identifizieren von Abfragen mit verschachtelten Schleifen</a></li><li><a href="#review-queue-wait-times-for-queries">Überprüfen der Wartezeiten von Abfragen in Warteschlangen</a></li><li><a href="#review-query-alerts-by-table">Überprüfen von Abfragewarnungen nach Tabelle</a></li><li><a href="#identify-tables-with-missing-statistics">Identifizieren von Tabellen mit fehlender Tabellenstatistik</a></li></ul></div><h2 id="identify-queries-that-are-top-candidates-for-tuning">Identifizieren der Top-Kandidaten zur Optimierung unter den Abfragen</h2>
            
            <p>Die folgende Abfrage identifiziert die 50 zeitaufwändigsten Anweisungen, die in den letzten 7 Tagen ausgeführt wurden. Sie können die Ergebnisse verwenden, um Abfragen zu identifizieren, die ungewöhnlich lange dauern. Sie können auch Abfragen identifizieren, die häufig ausgeführt wurden (die mehrmals in der Ergebnismenge vorkommen). Diese Abfragen sind häufig gute Kandidaten für Abfragen, deren Optimierung die Systemleistung verbessern kann.</p>
            <p>Diese Abfrage zählt außerdem die Warnereignisse für die einzelnen identifizierten Abfragen. Diese Warnmeldungen können Detailinformationen enthalten, mit denen Sie die Abfrageleistung verbessern können. Weitere Informationen finden Sie unter <a href="./c-reviewing-query-alerts.html">Überprüfen von Abfragewarnungen</a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select trim(database) as db, count(query) as n_qry, 
max(substring (qrytext,1,80)) as qrytext, 
min(run_minutes) as "min" , 
max(run_minutes) as "max", 
avg(run_minutes) as "avg", sum(run_minutes) as total,  
max(query) as max_query_id, 
max(starttime)::date as last_run, 
sum(alerts) as alerts, aborted
from (select userid, label, stl_query.query, 
trim(database) as database, 
trim(querytxt) as qrytext, 
md5(trim(querytxt)) as qry_md5, 
starttime, endtime, 
(datediff(seconds, starttime,endtime)::numeric(12,2))/60 as run_minutes,     
alrt.num_events as alerts, aborted 
from stl_query 
left outer join 
(select query, 1 as num_events from stl_alert_event_log group by query ) as alrt 
on alrt.query = stl_query.query
where userid &lt;&gt; 1 and starttime &gt;=  dateadd(day, -7, current_date)) 
group by database, label, qry_md5, aborted
order by total desc limit 50;</code></pre>
         <h2 id="identify-tables-with-data-skew-or-unsorted-rows">Identifizieren von Tabellen mit verzerrter Datenverteilung oder unsortierten Zeilen</h2>
            
            <p>Mit der folgenden Abfrage können Sie Tabellen identifizieren, die eine ungleichmäßige („verzerrte“) Datenverteilung oder einen hohen Prozentsatz an unsortierten Zeilen aufweisen.</p>
            <p>Ein geringer <code class="code">skew</code>-Wert weist darauf hin, das die Tabellendaten ordnungsgemäß verteilt sind. Wenn eine Tabelle für <code class="code">skew</code> einen Wert von 4,00 oder höher hat, sollten Sie erwägen, den Datenverteilungsstil zu ändern. Weitere Informationen finden Sie unter <a href="./query-performance-improvement-opportunities.html#suboptimal-data-distribution">Suboptimale Datenverteilung</a>.</p>
            <p>Wenn eine Tabelle für <code class="code">pct_unsorted</code> einen Wert über 20 Prozent hat, sollten Sie ggf. den Befehl <a href="./r_VACUUM_command.html">VACUUM</a> ausführen. Weitere Informationen finden Sie unter <a href="./query-performance-improvement-opportunities.html#unsorted-or-mis-sorted-rows">Unsortierte oder falsch sortierte Zeilen</a>.</p>
            <p>Sie sollten auch die <code class="code">mbytes</code>- und <code class="code">pct_of_total</code>-Werte für jede Tabelle überprüfen. Diese Spalten geben die Größe einer Tabelle an, sowie den Prozentsatz des verfügbaren Bruttospeicherplatzes auf dem Datenträger, den die Tabelle verbraucht. Der Roh-Festplattenspeicherplatz schließt den Platz ein, der von Amazon Redshift für die interne Verwendung reserviert ist, ist also größer als die nominelle Festplattenkapazität, bei der es sich um den Festplattenspeicherplatz handelt, der dem Benutzer zur Verfügung steht. Verwenden Sie diese Informationen, um zu verifizieren, dass der verfügbare Speicherplatz auf dem Datenträger mindestens um den Faktor 2,5 größer ist als Ihre größte Tabelle. Dieser verfügbare Speicherplatz reicht dafür aus, dass das System bei der Verarbeitung von komplexen Abfragen Zwischenergebnisse auf den Datenträger schreiben kann. </p>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select trim(pgn.nspname) as schema, 
trim(a.name) as table, id as tableid, 
decode(pgc.reldiststyle,0, 'even',1,det.distkey ,8,'all') as distkey, dist_ratio.ratio::decimal(10,4) as skew, 
det.head_sort as "sortkey", 
det.n_sortkeys as "#sks", b.mbytes,  
decode(b.mbytes,0,0,((b.mbytes/part.total::decimal)*100)::decimal(5,2)) as pct_of_total, 
decode(det.max_enc,0,'n','y') as enc, a.rows, 
decode( det.n_sortkeys, 0, null, a.unsorted_rows ) as unsorted_rows , 
decode( det.n_sortkeys, 0, null, decode( a.rows,0,0, (a.unsorted_rows::decimal(32)/a.rows)*100) )::decimal(5,2) as pct_unsorted 
from (select db_id, id, name, sum(rows) as rows, 
sum(rows)-sum(sorted_rows) as unsorted_rows 
from stv_tbl_perm a 
group by db_id, id, name) as a 
join pg_class as pgc on pgc.oid = a.id
join pg_namespace as pgn on pgn.oid = pgc.relnamespace
left outer join (select tbl, count(*) as mbytes 
from stv_blocklist group by tbl) b on a.id=b.tbl
inner join (select attrelid, 
min(case attisdistkey when 't' then attname else null end) as "distkey",
min(case attsortkeyord when 1 then attname  else null end ) as head_sort , 
max(attsortkeyord) as n_sortkeys, 
max(attencodingtype) as max_enc 
from pg_attribute group by 1) as det 
on det.attrelid = a.id
inner join ( select tbl, max(mbytes)::decimal(32)/min(mbytes) as ratio 
from (select tbl, trim(name) as name, slice, count(*) as mbytes
from svv_diskusage group by tbl, name, slice ) 
group by tbl, name ) as dist_ratio on a.id = dist_ratio.tbl
join ( select sum(capacity) as  total
from stv_partitions where part_begin=0 ) as part on 1=1
where mbytes is not null 
order by  mbytes desc;</code></pre>
         <h2 id="identify-queries-with-nested-loops">Identifizieren von Abfragen mit verschachtelten Schleifen</h2>
            
            <p>Die folgende Abfrage identifiziert Abfragen, für die Warnereignisse zu verschachtelten Schleifen protokolliert wurden. Informationen zur Vorgehensweise, um Probleme bei verschachtelten Schleifen zu beheben, finden Sie unter <a href="./query-performance-improvement-opportunities.html#nested-loop">Verschachtelte Schleife</a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select query, trim(querytxt) as SQL, starttime 
from stl_query 
where query in (
select distinct query 
from stl_alert_event_log 
where event like 'Nested Loop Join in the query plan%') 
order by starttime desc;</code></pre>
         <h2 id="review-queue-wait-times-for-queries">Überprüfen der Wartezeiten von Abfragen in Warteschlangen</h2>
            
            <p>Die folgende Abfrage zeigt, wie lange kürzlich ausgeführte Abfragen auf einen freien Platz in einer Abfragewarteschlange gewartet haben, bis sie ausgeführt wurden. Wenn Sie eine Tendenz erkennen, dass die Wartezeiten eher lang sind, können Sie die Abfragewarteschlangen modifizieren, um den Durchsatz zu verbessern. Weitere Informationen finden Sie unter <a href="./cm-c-defining-query-queues.html">Implementieren von manuellem WLM</a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select trim(database) as DB , w.query, 
substring(q.querytxt, 1, 100) as querytxt,  w.queue_start_time, 
w.service_class as class, w.slot_count as slots, 
w.total_queue_time/1000000 as queue_seconds, 
w.total_exec_time/1000000 exec_seconds, (w.total_queue_time+w.total_Exec_time)/1000000 as total_seconds 
from stl_wlm_query w 
left join stl_query q on q.query = w.query and q.userid = w.userid 
where w.queue_start_Time &gt;= dateadd(day, -7, current_Date) 
and w.total_queue_Time &gt; 0  and w.userid &gt;1   
and q.starttime &gt;= dateadd(day, -7, current_Date) 
order by w.total_queue_time desc, w.queue_start_time desc limit 35;</code></pre>
         <h2 id="review-query-alerts-by-table">Überprüfen von Abfragewarnungen nach Tabelle</h2>
            
            <p>Die folgende Abfrage identifiziert Tabellen, für die Warnereignisse protokolliert wurden, und gibt an, welche Arten von Warnungen am häufigsten ausgelöst wurden.</p>
            <p>Wenn in einer aufgeführten Tabelle der <code class="code">minutes</code>-Wert für eine Zeile besonders hoch ist, überprüfen Sie, ob für die betreffende Tabelle routinemäßige Wartungsaufgaben durchgeführt werden können, beispielsweise durch Ausführen von <a href="./r_ANALYZE.html">ANALYZE</a> oder <a href="./r_VACUUM_command.html">VACUUM</a> für die betreffende Tabelle.</p>
            <p>Wenn der Wert <code class="code">count</code> für eine Zeile hoch ist, gleichzeitig der Wert <code class="code">table</code> aber Null, führen Sie für den zugehörigen <code class="code">event</code>-Wert eine Abfrage über STL_ALERT_EVENT_LOG durch, um herauszufinden, warum die Warnung so oft ausgelöst wird.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select trim(s.perm_table_name) as table, 
(sum(abs(datediff(seconds, s.starttime, s.endtime)))/60)::numeric(24,0) as minutes, trim(split_part(l.event,':',1)) as event,  trim(l.solution) as solution, 
max(l.query) as sample_query, count(*) 
from stl_alert_event_log as l 
left join stl_scan as s on s.query = l.query and s.slice = l.slice 
and s.segment = l.segment and s.step = l.step
where l.event_time &gt;=  dateadd(day, -7, current_Date) 
group by 1,3,4 
order by 2 desc,6 desc;</code></pre>
         <h2 id="identify-tables-with-missing-statistics">Identifizieren von Tabellen mit fehlender Tabellenstatistik</h2>
            
            <p>Die folgende Abfrage zählt die Abfragen, die über Tabellen mit fehlender Tabellenstatistik ausgeführt wurden. Wenn diese Abfrage Zeilen zurückgibt, achten Sie auf den Wert von <code class="code">plannode</code>, um die betreffende Tabelle zu ermitteln, und führen Sie dann über dieser Tabelle den Befehl <a href="./r_ANALYZE.html">ANALYZE</a> aus.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select substring(trim(plannode),1,100) as plannode, count(*) 
from stl_explain 
where plannode like '%missing statistics%' 
group by plannode 
order by 2 desc;</code></pre>
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./query-performance-improvement-opportunities.html">Verbessern der Abfrageleistung</div><div id="next" class="next-link" accesskey="n" href="./queries-troubleshooting.html">Fehlerbehebung bei Abfragen</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/diagnostic-queries-for-query-tuning.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/diagnostic-queries-for-query-tuning.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>