<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE MATERIALIZED VIEW - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="materialized-view-create-sql-command" /><meta name="default_state" content="materialized-view-create-sql-command" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html" /><meta name="description" content="Erstellt eine materialisierte Ansicht." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Datenbankentwicklerhandbuch" /><meta name="abstract" content="Erstellen und verwalten Sie ein Data Warehouse mit Amazon Redshift, einem vollständig verwalteten Petabyte-Data-Warehousing-Service auf Unternehmensniveau." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Datenbankentwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Datenbankentwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="CREATE MATERIALIZED VIEW" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE MATERIALIZED VIEW - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#materialized-view-create-sql-command" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Cluster,Data Warehouse,Developer,Musterdaten,Datenbank,Database Developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Datenbankentwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL-Referenz",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL-Befehle",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE MATERIALIZED VIEW",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#materialized-view-create-sql-command" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Datenbankentwicklerhandbuch</a></div><div id="page-toc-src"><a href="#mv_CREATE_MATERIALIZED_VIEW-synopsis">Syntax</a><a href="#mv_CREATE_MATERIALIZED_VIEW-parameters">Parameter</a><a href="#mv_CREATE_MARTERIALIZED_VIEW_usage">Nutzungshinweise</a><a href="#mv_CREATE_MARTERIALIZED_VIEW_datashare">Inkrementelle Aktualisierung für materialisierte Ansichten in einem Datashare</a><a href="#materialized-view-ddl">DDL-Aktualisierungen an materialisierten Ansichten oder Basistabellen</a><a href="#mv_CREATE_MATERIALIZED_VIEW-limitations">Einschränkungen</a><a href="#mv_CREATE_MARTERIALIZED_VIEW_examples">Beispiele</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="materialized-view-create-sql-command">CREATE MATERIALIZED VIEW</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Erstellt eine materialisierte Ansicht, die auf einer oder mehreren Amazon-Redshift-Tabellen basiert. Sie können materialisierte Ansichten auch auf externe Tabellen basieren, die mit Spectrum oder einer Verbundabfrage erstellt wurden. Weitere Informationen zu Spectrum finden Sie unter <a href="./c-using-spectrum.html">Abfrage externer Daten mit Amazon Redshift Spectrum</a>. Weitere Informationen zur Verbundabfrage finden Sie unter <a href="./federated-overview.html">Abfragen von Daten mit Verbundabfragen in Amazon Redshift</a>.</p>
         <h2 id="mv_CREATE_MATERIALIZED_VIEW-synopsis">Syntax</h2>
         <pre class="screen">CREATE MATERIALIZED VIEW mv_name
[ BACKUP <span>{</span> YES | NO } ]
[ table_attributes ]
[ AUTO REFRESH <span>{</span> YES | NO } ]
AS query </pre>
       
         <h2 id="mv_CREATE_MATERIALIZED_VIEW-parameters">Parameter</h2>
         <div class="variablelist">
             
             
             

            <dl>
               <dt><span class="term">BACKUP</span></dt>
               <dd>
                  <p>Eine Klausel, die angibt, ob die materialisierte Ansicht in automatisierten und manuellen Cluster-Snapshots enthalten ist, die in Amazon S3 gespeichert werden.</p>
                  <p>Der Standardwert für den <code class="code">BACKUP</code> beträgt <code class="code">YES</code>.</p>
                  <p>Sie können <code class="code">BACKUP NO</code> angeben, um Verarbeitungszeit bei der Erstellung von Snapshots und der Wiederherstellung aus Snapshots zu sparen und den Speicherbedarf in Amazon S3 zu reduzieren.</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Die Einstellung <code class="code">BACKUP NO</code> hat keinen Einfluss auf die automatische Replikation von Daten auf andere Knoten innerhalb des Clusters, sodass bei einem Knotenfehler Tabellen mit der Angabe <code class="code">BACKUP
                           NO</code> wiederhergestellt werden.</p></div></div>
               </dd>
             
               <dt><span class="term"> <em>table_attribute</em> </span></dt>
               <dd>
                  
                  <p>Eine Klausel, die angibt, wie die Daten in der materialisierten Ansicht verteilt werden, einschließlich der folgenden:</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p> Der Verteilungsstil für die materialisierte Ansicht im Format <code class="code">DISTSTYLE <span>{</span> EVEN | ALL | KEY }</code>. Wenn Sie diese Klausel weglassen, ist der Verteilungsstil <code class="code">EVEN</code>. Weitere Informationen finden Sie unter <a href="./c_choosing_dist_sort.html">Verteilungsstile</a>.</p>
                     </li><li class="listitem">
                        <p>Der Verteilungsschlüssel für die materialisierte Ansicht im Format <code class="code">DISTKEY ( <em>distkey_identifier</em> )</code>. Weitere Informationen finden Sie unter <a href="./t_designating_distribution_styles.html">Bezeichnen von Verteilungsstilen</a>.</p>
                     </li><li class="listitem">
                        <p>Der Sortierschlüssel für die materialisierte Ansicht im Format <code class="code">SORTKEY ( <em>column_name</em> [, ...] )</code>. Weitere Informationen finden Sie unter <a href="./t_Sorting_data.html">Arbeiten mit Sortierschlüsseln</a>.</p>

                     </li></ul></div>
               </dd>
             
               <dt><span class="term">AS <em>query</em></span></dt>
               <dd>
                  <p>Eine gültige <code class="code">SELECT</code>-Anweisung, die die materialisierte Ansicht und ihren Inhalt definiert. Die Ergebnismenge aus der Abfrage definiert die Spalten und Zeilen der materialisierten Ansicht. Hinweise zu Einschränkungen beim Erstellen materialisierter Ansichten finden Sie unter <a href="#mv_CREATE_MATERIALIZED_VIEW-limitations">Einschränkungen</a>.</p>
                  <p>Darüber hinaus bestimmen einige SQL-Sprachkonstrukte, die in der Abfrage verwendet werden, ob die materialisierte Ansicht inkrementell oder vollständig aktualisiert werden kann. Hinweise zur Refresh-Methode finden Sie unter <a href="./materialized-view-refresh-sql-command.html">REFRESH MATERIALIZED VIEW</a>. Hinweise zu den Einschränkungen für die inkrementelle Aktualisierung finden Sie unter <a href="./materialized-view-refresh-sql-command.html#mv_REFRESH_MARTERIALIZED_VIEW_limitations">Einschränkungen für die inkrementelle Aktualisierung</a>.</p>

                  <p>Wenn die Abfrage einen SQL-Befehl enthält, der keine inkrementelle Aktualisierung unterstützt, zeigt Amazon Redshift eine Meldung an, die angibt, dass die materialisierte Ansicht eine vollständige Aktualisierung verwendet. Je nach SQL-Clientanwendung kann die Meldung angezeigt werden oder nicht. Überprüfen Sie die <code class="code">state</code>-Spalte von <a href="./r_STV_MV_INFO.html">STV_MV_INFO</a>, um den Aktualisierungstyp anzuzeigen, der von einer materialisierten Ansicht verwendet wird.</p></dd>
               <dt><span class="term">AUTO REFRESH</span></dt>
               <dd>
                  <p>Eine Klausel, die definiert, ob die materialisierte Ansicht automatisch mit den neuesten Änderungen aus ihren Basistabellen aktualisiert werden soll. Der Standardwert ist <code class="code">NO</code>. Weitere Informationen finden Sie unter <a href="./materialized-view-refresh.html">Aktualisieren einer materialisierten Ansicht</a>.</p>

               </dd>
            </dl></div>
       
         <h2 id="mv_CREATE_MARTERIALIZED_VIEW_usage">Nutzungshinweise</h2>
         <p>Um eine materialisierte Ansicht zu erstellen, müssen Sie über die folgenden Berechtigungen verfügen:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>CREATE-Berechtigungen für ein Schema.</p>
            </li><li class="listitem">
     
               <p>SELECT-Berechtigung auf Tabellen- oder Spaltenebene für die Basistabellen zum Erstellen einer materialisierten Ansicht. Wenn Sie über Berechtigungen auf Spaltenebene für bestimmte Spalten verfügen, können Sie nur für diese Spalten eine materialisierte Ansicht erstellen.</p>
            </li></ul></div>
       
         <h2 id="mv_CREATE_MARTERIALIZED_VIEW_datashare">Inkrementelle Aktualisierung für materialisierte Ansichten in einem Datashare</h2>
         <p> Amazon Redshift unterstützt die automatische und inkrementelle Aktualisierung für materialisierte Ansichten in einem Konsumenten-Datashare, wenn die Basistabellen gemeinsam genutzt werden. Die inkrementelle Aktualisierung ist eine Operation, bei der Amazon Redshift Änderungen in der Basistabelle oder den Tabellen identifiziert, die nach der vorherigen Aktualisierung vorgenommen wurden, und nur die entsprechenden Datensätze in der materialisierten Ansicht aktualisiert. Dies läuft schneller als eine vollständige Aktualisierung und verbessert die Workload-Leistung. Sie müssen Ihre materialisierte Ansichtsdefinition nicht ändern, um die Vorteile der inkrementellen Aktualisierung zu nutzen. </p>
         <p>Es gibt einige Einschränkungen für die Nutzung der inkrementellen Aktualisierung mit einer materialisierten Ansicht: </p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Die materialisierte Ansicht darf nur auf eine Datenbank verweisen, entweder lokal oder remote. </p></li><li class="listitem"><p>Die inkrementelle Aktualisierung ist nur für neue materialisierte Ansichten verfügbar. Daher müssen Sie vorhandene materialisierte Ansichten löschen und neu erstellen, damit die inkrementelle Aktualisierung durchgeführt werden kann.</p></li></ul></div>
         <p>Weitere Informationen zum Erstellen materialisierter Ansichten in einem Datashare finden Sie unter <a href="https://docs.aws.amazon.com/redshift/latest/dg/share_datashare.html#datashare-views">Arbeiten mit Ansichten in der Amazon-Redshift-Datenfreigabe</a>, die mehrere Abfragebeispiele enthält.</p>
       
         <h2 id="materialized-view-ddl">DDL-Aktualisierungen an materialisierten Ansichten oder Basistabellen</h2>
         <p>Wenn Sie materialisierte Ansichten in Amazon Redshift verwenden, folgen Sie diesen Verwendungshinweisen für DDL-Aktualisierungen (Data Definition Language) von materialisierten Ansichten oder Basistabellen.</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Sie können Spalten zu einer Basistabelle hinzufügen, ohne dass sich dies auf materialisierte Ansichten auswirkt, die auf die Basistabelle verweisen.</p>
            </li><li class="listitem">
               <p>Andere Operationen können die materialisierte Ansicht in einem Status belassen, der überhaupt nicht aktualisiert werden kann. Beispiele sind Operationen wie das Umbenennen oder Löschen einer Spalte, das Ändern des Spaltentyps und das Ändern des Schemanamens. Solche materialisierten Ansichten können abgefragt, aber nicht aktualisiert werden. In diesem Fall müssen Sie einen Drop für die materialisierte Ansicht durchführen und diese neu anlegen. </p>
            </li><li class="listitem">
               <p>Im Allgemeinen können Sie die Definition einer materialisierten Ansicht (deren SQL-Anweisung) nicht ändern.</p>
            </li><li class="listitem">
               <p>Sie können eine materialisierte Ansicht nicht umbenennen. </p>
            </li></ul></div>
       
         <h2 id="mv_CREATE_MATERIALIZED_VIEW-limitations">Einschränkungen</h2>
         <p>Sie können keine materialisierte Ansicht definieren, die Folgendes referenziert oder einschließt:</p>
         <div class="itemizedlist">
             
             
             
             
             
            
           
             
             
             
         
         <ul class="itemizedlist"><li class="listitem">
               <p>Standardansichten oder Systemtabellen und Ansichten.</p>
            </li><li class="listitem">
               <p>Temporäre Tabellen.</p>
            </li><li class="listitem">
               <p>Benutzerdefinierte Funktionen.</p>
            </li><li class="listitem">
               <p>Die ORDER BY-, LIMIT- oder OFFSET-Klausel.</p>
            </li><li class="listitem">
               <p>Late-Binding-Referenzen auf Basistabellen. Mit anderen Worten, alle Basistabellen oder zugehörigen Spalten, die in der definierenden SQL-Abfrage der materialisierten Ansicht referenziert werden, müssen existieren und gültig sein. </p>
            </li><li class="listitem">
               <p>Auf den Führungsknoten beschränkte Funktionen: CURRENT_SCHEMA, CURRENT_SCHEMAS, HAS_DATABASE_PRIVILEGE, HAS_SCHEMA_PRIVILEGE, HAS_TABLE_PRIVILEGE.</p>
            </li><li class="listitem"><p>Sie können die Option AUTO REFRESH YES nicht verwenden, wenn die Definition der materialisierten Ansicht veränderbare Funktionen oder externe Schemata enthält. Sie können sie auch nicht verwenden, wenn Sie eine materialisierte Ansicht in einer anderen materialisierten Ansicht definieren.</p></li><li class="listitem"><p>Sie müssen <a href="./r_ANALYZE.html">ANALYZE</a> für materialisierte Ansichten nicht manuell ausführen. Dies geschieht derzeit nur über AUTO ANALYZE. Weitere Informationen finden Sie unter <a href="./t_Analyzing_tables.html">Analysieren von Tabellen</a>.</p></li></ul></div>
         
         
       
         <h2 id="mv_CREATE_MARTERIALIZED_VIEW_examples">Beispiele</h2>
         <p>Im folgenden Beispiel wird eine materialisierte Ansicht aus drei Basistabellen erstellt, die verbunden und aggregiert sind. Jede Zeile stellt eine Kategorie mit der Anzahl der verkauften Tickets dar. Wenn Sie die materialisierte Ansicht tickets_mv abfragen, greifen Sie direkt auf die vorberechneten Daten in der materialisierten Ansicht tickets_mv zu.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW tickets_mv AS
    select   catgroup,
    sum(qtysold) as sold
    from     category c, event e, sales s
    where    c.catid = e.catid
    and      e.eventid = s.eventid
    group by catgroup;</code></pre>
         <p>Im folgenden Beispiel wird eine materialisierte Ansicht ähnlich dem vorherigen Beispiel erstellt und die Aggregationsfunktion MAX() verwendet. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW tickets_mv_max AS
    select   catgroup,
    max(qtysold) as sold
    from     category c, event e, sales s
    where    c.catid = e.catid
    and      e.eventid = s.eventid
    group by catgroup;

SELECT name, state FROM STV_MV_INFO;</code></pre>

         <p>Im folgenden Beispiel wird eine UNION ALL-Klausel verwendet, um die <code class="code">public_sales</code>-Tabelle aus Amazon-Redshift und die <code class="code">spectrum.sales</code>-Tabelle aus Redshift Spectrum zu verbinden, um die Materialansicht <code class="code">mv_sales_vw</code> zu erstellen. Weitere Informationen zum Befehl CREATE EXTERNALE TABLE für Amazon Redshift Spectrum finden Sie unter <a href="./r_CREATE_EXTERNAL_TABLE.html">CREATE EXTERNAL TABLE</a>. Die externe Redshift-Spectrum-Tabelle verweist auf die Daten in Amazon S3.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW mv_sales_vw as
select salesid, qtysold, pricepaid, commission, saletime from public.sales
union all
select salesid, qtysold, pricepaid, commission, saletime from spectrum.sales
</code></pre>
         <p>Im folgenden Beispiel wird die materialisierte Ansicht <code class="code">mv_fq</code> erstellt, die auf einer externen Tabelle für eine Verbundabfrage basiert. Weitere Informationen zur Verbundabfrage finden Sie unter <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW mv_fq as select firstname, lastname from apg.mv_fq_example;

select firstname, lastname from mv_fq;
 firstname | lastname
-----------+----------
 John      | Day
 Jane      | Doe
(2 rows)</code></pre>
         <p>Das folgende Beispiel zeigt die Definition einer materialisierten Ansicht.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT pg_catalog.pg_get_viewdef('mv_sales_vw'::regclass::oid, true);

pg_get_viewdef
---------------------------------------------------
create materialized view mv_sales_vw as select a from t;</code></pre>
         <p> Das folgende Beispiel zeigt, wie AUTO REFRESH in der Definition der materialisierten Ansicht festgelegt wird, und gibt außerdem einen DISTSTYLE an. Erstellen Sie zunächst eine einfache Basistabelle. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE baseball_table (ball int, bat int);</code></pre>
         <p>Erstellen Sie dann eine materialisierte Ansicht.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW mv_baseball DISTSTYLE ALL AUTO REFRESH YES AS SELECT ball AS baseball FROM baseball_table;</code></pre>
         <p>Jetzt können Sie die materialisierte Ansicht mv_baseball abfragen. Informationen zum Überprüfen, ob AUTO REFRESH für eine materialisierte Ansicht aktiviert ist, finden Sie unter <a href="./r_STV_MV_INFO.html">STV_MV_INFO</a>.</p>

         <p>Im folgenden Beispiel wird eine materialisierte Ansicht erstellt, die auf eine Quelltabelle in einer anderen Datenbank verweist. Es wird davon ausgegangen, dass sich die Datenbank, die die Quelltabelle, database_A, enthält, in demselben Cluster oder derselben Arbeitsgruppe befindet wie Ihre materialisierte Ansicht, die Sie in database_B erstellen. (Sie können das Beispiel durch Ihre eigenen Datenbanken ersetzen.) Erstellen Sie zunächst in database_A eine Tabelle mit dem Namen <em>cities</em> mit einer Spalte <em>cityname</em>. Ändern Sie den Datentyp der Spalte in VARCHAR. Nachdem Sie die Quelltabelle erstellt haben, führen Sie den folgenden Befehl in database_B aus, um eine materialisierte Ansicht zu erstellen, deren Quelle Ihre Tabelle <em>cities</em> ist. Stellen Sie sicher, dass Sie die Datenbank und das Schema der Quelltabelle in der FROM-Klausel angeben:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW cities_mv AS
SELECT  cityname
FROM    database_A.public.cities;</code></pre>
         <p>Fragen Sie die materialisierte Ansicht ab, die Sie erstellt haben. Die Abfrage ruft Datensätze ab, deren ursprüngliche Quelle die Tabelle <em>cities</em> in database_A ist:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from cities_mv;</code></pre>
         <p>Wenn Sie die SELECT-Anweisung ausführen, gibt <em>cities_mv</em> die Datensätze zurück. Datensätze aus der Quelltabelle werden nur dann aktualisiert, wenn eine REFRESH-Anweisung ausgeführt wird. Beachten Sie außerdem, dass Sie Datensätze nicht direkt in der materialisierten Ansicht aktualisieren können. Hinweise zum Aktualisieren der Daten in einer materialisierten Ansicht finden Sie unter <a href="./materialized-view-refresh-sql-command.html">REFRESH MATERIALIZED VIEW</a>.</p>
         
      


         <p>Weitere Details zur Übersicht über materialisierte Ansichten und SQL-Befehle, die zum Aktualisieren und Löschen materialisierter Ansichten verwendet werden, finden Sie in den folgenden Themen:</p>

         <div class="itemizedlist">
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p><a href="./materialized-view-overview.html">Erstellen von materialisierten Ansichten in Amazon Redshift</a></p>
            </li><li class="listitem">
               <p><a href="./materialized-view-refresh-sql-command.html">REFRESH MATERIALIZED VIEW</a></p>
            </li><li class="listitem">
               <p><a href="./materialized-view-drop-sql-command.html">DROP MATERIALIZED VIEW</a></p>
            </li></ul></div>
         
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_MASKING_POLICY.html">ERSTELLEN EINER MASKIERUNGSRICHTLINIE</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_MODEL.html">CREATE MODEL</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>