<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Empfehlungen für Amazon Redshift Advisor - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="advisor-recommendations" /><meta name="default_state" content="advisor-recommendations" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" /><meta name="description" content="Amazon Redshift Advisor bietet Empfehlungen über die Optimierung Ihres Amazon-Redshift-Clusters zum Steigern der Leistung und Sparen von Betriebskosten. Sie finden Erläuterungen für jede Empfehlung in der Konsole, wie vorstehend beschrieben. Sie finden weitere Details zu diesen Empfehlungen in den folgenden Abschnitten." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Datenbankentwicklerhandbuch" /><meta name="abstract" content="Erstellen und verwalten Sie ein Data Warehouse mit Amazon Redshift, einem vollständig verwalteten Petabyte-Data-Warehousing-Service auf Unternehmensniveau." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/advisor-recommendations.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/advisor-recommendations.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/advisor-recommendations.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/advisor-recommendations.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/advisor-recommendations.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/advisor-recommendations.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/advisor-recommendations.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/advisor-recommendations.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/advisor-recommendations.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/advisor-recommendations.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/advisor-recommendations.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/advisor-recommendations.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/advisor-recommendations.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/advisor-recommendations.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/advisor-recommendations.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Datenbankentwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Datenbankentwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="Empfehlungen für Amazon Redshift Advisor" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Empfehlungen für Amazon Redshift Advisor - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#advisor-recommendations" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Cluster,Data Warehouse,Developer,Musterdaten,Datenbank,Database Developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Datenbankentwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Bewährte Methoden für Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/best-practices.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Arbeiten mit Empfehlungen von Amazon Redshift Advisor",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Empfehlungen für Amazon Redshift Advisor",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#advisor-recommendations" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Datenbankentwicklerhandbuch</a></div><div id="page-toc-src"><a href="#cluster-compress-s3-recommendation">Komprimieren von Amazon-S3-Objekten, die über COPY geladen wurden</a><a href="#isolate-active-dbs-recommendation">Isolierung mehrerer aktiver Datenbanken</a><a href="#reallocate-wlm-recommendation">Neuzuordnung des Workload-Management- (WLM) Arbeitsspeichers</a><a href="#skip-compression-analysis-recommendation">Überspringen der Komprimierungsanalyse während des COPY-Vorgangs</a><a href="#split-s3-objects-recommendation">Teilen Sie Amazon-S3-Objekte mit dem Befehl COPY auf</a><a href="#update-table-statistics-recommendation">Aktualisieren der Tabellenstatistik</a><a href="#enable-sqa-recommendation">Aktivieren von Short Query Acceleration</a><a href="#alter-diststyle-distkey-recommendation">Ändern der Verteilungsschlüssel in Tabellen</a><a href="#alter-sortkey-recommendation">Ändern der Sortierschlüssel für Tabellen</a><a href="#alter-compression-encoding-recommendation">Ändern der Komprimierungskodierungen für Spalten</a><a href="#data-type-recommendation">Datentyp-Empfehlungen</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="advisor-recommendations">Empfehlungen für Amazon Redshift Advisor</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon Redshift Advisor bietet Empfehlungen über die Optimierung Ihres Amazon-Redshift-Clusters zum Steigern der Leistung und Sparen von Betriebskosten. Sie finden Erläuterungen für jede Empfehlung in der Konsole, wie vorstehend beschrieben. Sie finden weitere Details zu diesen Empfehlungen in den folgenden Abschnitten. </p><div class="highlights" id="inline-topiclist"><h6>Themen</h6><ul><li><a href="#cluster-compress-s3-recommendation">Komprimieren von Amazon-S3-Objekten, die über COPY geladen wurden</a></li><li><a href="#isolate-active-dbs-recommendation">Isolierung mehrerer aktiver Datenbanken</a></li><li><a href="#reallocate-wlm-recommendation">Neuzuordnung des Workload-Management- (WLM) Arbeitsspeichers</a></li><li><a href="#skip-compression-analysis-recommendation">Überspringen der Komprimierungsanalyse während des COPY-Vorgangs</a></li><li><a href="#split-s3-objects-recommendation">Teilen Sie Amazon-S3-Objekte mit dem Befehl COPY auf</a></li><li><a href="#update-table-statistics-recommendation">Aktualisieren der Tabellenstatistik</a></li><li><a href="#enable-sqa-recommendation">Aktivieren von Short Query Acceleration</a></li><li><a href="#alter-diststyle-distkey-recommendation">Ändern der Verteilungsschlüssel in Tabellen</a></li><li><a href="#alter-sortkey-recommendation">Ändern der Sortierschlüssel für Tabellen</a></li><li><a href="#alter-compression-encoding-recommendation">Ändern der Komprimierungskodierungen für Spalten</a></li><li><a href="#data-type-recommendation">Datentyp-Empfehlungen</a></li></ul></div>
            <h2 id="cluster-compress-s3-recommendation">Komprimieren von Amazon-S3-Objekten, die über COPY geladen wurden</h2>
            <p>Der Befehl COPY nutzt die massive Parallelverarbeitungsarchitektur (Massively Parallel Processing, MPP) in Amazon Redshift, um Daten parallel zu lesen und zu laden. Der Befehl liest Dateien aus Amazon S3, DynamoDB-Tabellen und Textausgaben von einem oder mehreren Remotehosts. </p>
            <p>Beim Laden von großen Datenmengen empfehlen wir dringend die Verwendung des COPY-Befehls zum Laden komprimierter Datendateien aus S3. Wenn Sie große Datensätze komprimieren, können Sie die Dateien schneller in Amazon S3 hochladen. COPY kann auch den Ladeprozess durch Dekomprimierung der Dateien während des Lesens beschleunigen. </p>
            <p><b>Analyse</b></p>
            <p>Lange laufende COPY-Befehle, die große, nicht komprimierte Datasets laden, bieten häufig die Möglichkeit einer erheblichen Leistungsverbesserung. Die Advisor-Analyse erkennt COPY-Befehle, die große, nicht komprimierte Datasets laden. In einem solchen Fall generiert Advisor eine Empfehlung zur Implementierung einer Komprimierung in den Quelldateien in Amazon S3. </p>


            <p><b>Empfehlung</b></p>
            <p>Stellen Sie sicher, dass jeder COPY-Vorgang, der eine erhebliche Datenmenge lädt oder über einen längeren Zeitraum ausgeführt wird, komprimierte Datenobjekte aus Amazon S3 übernimmt. Sie können herausfinden, welche COPY-Befehle große, unkomprimierte Datensätze aus Amazon S3 laden, indem Sie den folgenden SQL-Befehl als Superuser ausführen.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT
    wq.userid, query, exec_start_time AS starttime, COUNT(*) num_files,
    ROUND(MAX(wq.total_exec_time/1000000.0),2) execution_secs,
    ROUND(SUM(transfer_size)/(1024.0*1024.0),2) total_mb,
    SUBSTRING(querytxt,1,60) copy_sql
FROM stl_s3client s
JOIN stl_query q USING (query)
JOIN stl_wlm_query wq USING (query)
WHERE s.userid&gt;1 AND http_method = 'GET'
    AND POSITION('COPY ANALYZE' IN querytxt) = 0
    AND aborted = 0 AND final_state='Completed'
GROUP BY 1, 2, 3, 7
HAVING SUM(transfer_size) = SUM(data_size) 
AND SUM(transfer_size)/(1024*1024) &gt;= 5
ORDER BY 6 DESC, 5 DESC;         
          </code></pre>
            <p>Falls die bereitgestellten Daten nach dem Laden in Amazon S3 verbleiben, was in Data-Lake-Architekturen üblich ist, können durch Speichern der Daten in komprimierter Form Ihre Speicherkosten gesenkt werden. </p>
            <p><b>Implementierungstipps</b></p>

            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Die ideale Objektgröße beträgt nach der Komprimierung 1 bis 128 MB.</p>
               </li><li class="listitem">
                  <p>Sie können Dateien mit dem Format gzip, lzop oder bzip2 komprimieren.</p>
               </li></ul></div>

          
            <h2 id="isolate-active-dbs-recommendation">Isolierung mehrerer aktiver Datenbanken</h2>
            <p>Als bewährte Methode empfehlen wir die Isolierung von Datenbanken in Amazon Redshift von einander. Abfragen werden in einer spezifischen Datenbank ausgeführt und können keine Daten von einer anderen Datenbank im Cluster aufrufen. Die Abfragen, die Sie in allen Datenbanken eines Clusters ausführen, verwenden jedoch denselben zugrunde liegenden Cluster-Speicherplatz und dieselben Datenverarbeitungsressourcen. Wenn ein einzelnes Cluster mehrere aktive Datenbanken enthält, sind ihre Workloads in der Regel nicht miteinander verbunden.</p>
            <p><b>Analyse</b></p>
            <p>Die Advisor-Analyse prüft alle Datenbanken im Cluster auf aktive Workloads, die gleichzeitig ausgeführt werden. Falls aktive Workloads gleichzeitig ausgeführt werden, generiert Advisor eine Empfehlung, über die Migration von Datenbanken in separate Amazon-Redshift-Cluster nachzudenken.</p>

            <p><b>Empfehlung</b></p>
            <p>Denken Sie über das Verschieben jeder aktiv abgefragten Datenbank in ein separates dediziertes Cluster nach. Die Verwendung eines separaten Clusters kann Ressourcenkonflikte reduzieren und die Abfrageleistung verbessern. Dies ist möglich, da Sie die Größe jedes Clusters entsprechend den Speicher-, Kosten- und Leistungsanforderungen des jeweiligen Workloads festlegen können. Zudem profitieren nicht verbundene Workloads häufig von verschiedenen Workload-Management-Konfigurationen.</p>
            <p>Sie können den folgenden SQL-Befehl als Superuser ausführen, um zu ermitteln, welche Datenbanken aktiv verwendet werden.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT database,
  COUNT(*) as num_queries,
  AVG(DATEDIFF(sec,starttime,endtime)) avg_duration,
  MIN(starttime) as oldest_ts,
  MAX(endtime) as latest_ts
FROM stl_query
WHERE userid &gt; 1
GROUP BY database;            
         </code></pre>
            <p><b>Implementierungstipps</b></p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Da ein Benutzer spezifisch eine Verbindung zur jeweiligen Datenbank herstellen muss und Abfragen nur eine einzelne Datenbank aufrufen können, hat das Verschieben von Datenbanken in separate Cluster geringfügige Auswirkungen für Benutzer.</p>
               </li><li class="listitem">
                  <p>Eine Option zum Verschieben einer Datenbank sind folgende Schritte: </p>
                  <div class="orderedlist">
                      
                      
                      
                  <ol><li>
                        <p>Vorübergehendes Wiederherstellen eines Snapshots des aktuellen Clusters in einem Cluster derselben Größe.</p>
                     </li><li>
                        <p>Löschen aller Datenbanken aus dem neuen Cluster außer der zu verschiebenden Zieldatenbank.</p>
                     </li><li>
                        <p>Ändern der Größe des Clusters in einen entsprechenden Knotentyp und eine entsprechende Knotenanzahl für den Workload der Datenbank.</p>
                     </li></ol></div>

               </li></ul></div>
          
            <h2 id="reallocate-wlm-recommendation">Neuzuordnung des Workload-Management- (WLM) Arbeitsspeichers</h2>
            <p>Amazon Redshift leitet Benutzerabfragen zur Verarbeitung an <a href="./cm-c-defining-query-queues.html">Implementieren von manuellem WLM</a> weiter. Workload Management (WLM) legt fest, wie diese Abfragen zu den Warteschlangen geleitet werden. Amazon Redshift weist jeder Warteschlange einen Teil des verfügbaren Speicherplatzes des Clusters zu. Der Speicher einer Warteschlange wird unter den Abfrageslots der Warteschlange aufgeteilt. </p>
            <p>Wenn eine Warteschlange mit mehr Slots konfiguriert ist, als der Workload benötigt, ist der Arbeitsspeicher, der diesen nicht verwendeten Slots zugewiesen ist, nicht ausgelastet. Durch Reduzieren der konfigurierten Slots und Anpassen an die Anforderungen der Spitzenworkloads wird jeglicher nicht ausgelasteter Arbeitsspeicher neu verteilt. Dies kann zu einer verbesserten Abfrageleistung führen. </p>
            <p><b>Analyse</b></p>
            <p>Die Advisor-Analyse prüft die Anforderungen an die Nebenläufigkeit des Workloads, um Abfragewarteschlangen mit ungenutzten Slots zu erkennen. Advisor generiert eine Empfehlung, um die Anzahl der Slots in einer Warteschlange zu reduzieren, wenn Folgendes gefunden wird:</p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Eine Warteschlange mit Slots, die während der gesamten Analyse vollständig inaktiv waren</p>
               </li><li class="listitem">
                  <p>Eine Warteschlange mit mehr als vier Slots, von denen mindestens zwei Slots während der gesamten Analyse inaktiv waren</p>
               </li></ul></div>

            <p><b>Empfehlung</b></p>
            <p>Durch die Reduzierung der konfigurierten Slots und Anpassung an die Anforderungen des Spitzenworkloads wird ungenutzter Arbeitsspeicher an aktive Slots neu verteilt. Denken Sie über eine Reduzierung der konfigurierten Slot-Anzahl für Warteschlangen nach, bei denen die Slots nie vollständig verwendet wurden. Um diese Warteschlangen zu ermitteln, können Sie die stündlichen Spitzenanforderungen an Slots für jede Warteschlange vergleichen, indem Sie den folgenden SQL-Befehl als Superuser ausführen.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
WITH
 generate_dt_series AS (select sysdate - (n * interval '5 second') as dt from (select row_number() over () as n from stl_scan limit 17280)),
 apex AS (
     SELECT iq.dt, iq.service_class, iq.num_query_tasks, count(iq.slot_count) as service_class_queries, sum(iq.slot_count) as service_class_slots
     FROM
         (select gds.dt, wq.service_class, wscc.num_query_tasks, wq.slot_count
         FROM stl_wlm_query wq
         JOIN stv_wlm_service_class_config wscc ON (wscc.service_class = wq.service_class AND wscc.service_class &gt; 5)
         JOIN generate_dt_series gds ON (wq.service_class_start_time &lt;= gds.dt AND wq.service_class_end_time &gt; gds.dt)
         WHERE wq.userid &gt; 1 AND wq.service_class &gt; 5) iq
     GROUP BY iq.dt, iq.service_class, iq.num_query_tasks),
     maxes as (SELECT apex.service_class, trunc(apex.dt) as d, date_part(h,apex.dt) as dt_h, max(service_class_slots) max_service_class_slots
                     from apex group by apex.service_class, apex.dt, date_part(h,apex.dt))
SELECT apex.service_class - 5 AS queue, apex.service_class, apex.num_query_tasks AS max_wlm_concurrency, maxes.d AS day, maxes.dt_h || ':00 - ' || maxes.dt_h || ':59' as hour, MAX(apex.service_class_slots) as max_service_class_slots
FROM apex
JOIN maxes ON (apex.service_class = maxes.service_class AND apex.service_class_slots = maxes.max_service_class_slots)
GROUP BY  apex.service_class, apex.num_query_tasks, maxes.d, maxes.dt_h
ORDER BY apex.service_class, maxes.d, maxes.dt_h;            
         </code></pre>
            <p>Die <code class="code">max_service_class_slots</code>-Spalte steht für die maximale Anzahl der WLM-Abfrageslots in der Abfragewarteschlange für diese Stunde. Falls nicht ausgelastete Warteschlangen vorhanden sind, implementieren Sie die Optimierung der Slot-Reduzierung durch <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-parameter-groups-console.html#parameter-group-modify">Ändern einer Parametergruppe</a> wie im <em>Amazon-Redshift-Verwaltungshandbuch</em> beschrieben.</p>
            <p><b>Implementierungstipps</b></p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Falls der Workload-Umfang stark variiert, stellen Sie sicher, dass die Analyse einen Zeitraum mit Spitzenauslastung erfasst hat. Falls dies nicht der Fall ist, führen Sie den vorstehenden SQL-Befehl wiederholt aus, um die Anforderungen an die Spitzengleichläufigkeit zu überwachen. </p>
               </li><li class="listitem">
                  <p>Weitere Details zur Interpretation der Abfrageergebnisse aus vorstehendem SQL-Code finden Sie im Skript <a href="https://github.com/awslabs/amazon-redshift-utils/blob/master/src/AdminScripts/wlm_apex_hourly.sql" rel="noopener noreferrer" target="_blank"><span>wlm_apex_hourly.sql</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> bei GitHub.</p>
               </li></ul></div>

          
            <h2 id="skip-compression-analysis-recommendation">Überspringen der Komprimierungsanalyse während des COPY-Vorgangs</h2>
            <p>Beim Laden von Daten in eine leere Tabelle mit Komprimierungskodierung, die mit dem Befehl COPY deklariert war, übernimmt Amazon Redshift die Speicherkomprimierung. Diese Optimierung stellt sicher, dass Daten in Ihrem Cluster sogar effizient gespeichert werden, wenn sie von Endbenutzern geladen werden. Die erforderliche Analyse zur Anwendung der Komprimierung kann sehr zeitraubend sein.</p>

            <p><b>Analyse</b></p>
            <p>Die Advisor-Analyse prüft COPY-Operationen, die verzögert wurden, anhand einer automatischen Komprimierungsanalyse. Die Analyse bestimmt die Komprimierungskodierungen durch Analysieren der Daten, während sie geladen werden. Diese Analyse ist ähnlich wie die, die mit dem Befehl <a href="./r_ANALYZE_COMPRESSION.html">ANALYZE COMPRESSION</a> ausgeführt wird. </p>
            <p>Wenn Sie Daten als Teil eines strukturierten Prozesses laden, wie etwa bei einem ETL-Batch (Extrahieren, Transformieren, Laden) über Nacht, können Sie die Komprimierung vorab definieren. Sie können Ihre Tabellendefinitionen so optimieren, dass diese Phase dauerhaft ohne negative Auswirkungen übersprungen wird.</p>
            <p><b>Empfehlung</b></p>
            <p>Um die Reaktionsfähigkeit des COPY-Vorgangs durch Überspringen der Komprimierungsanalyse zu verbessern, implementieren Sie eine der folgenden beiden Optionen:</p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Verwenden Sie den Spaltenparameter <code class="code">ENCODE</code> beim Erstellen von Tabellen, die Sie mithilfe des COPY-Befehls laden.</p>
               </li><li class="listitem">
                  <p>Schalten Sie die Komprimierung insgesamt durch Angeben des <code class="code">COMPUPDATE OFF</code>-Parameters im COPY-Befehl aus.</p>
               </li></ul></div>
            <p>Die beste Lösung allgemein ist die Verwendung der Spaltenkodierung während des Erstellens der Tabelle, da dieser Ansatz auch den Vorteil des Speicherns komprimierter Daten auf dem Datenträger beibehält. Sie können den Befehl ANALYZE COMPRESSION verwenden, um Komprimierungskodierungen vorzuschlagen, aber müssen die Tabelle neu erstellen, um diese Kodierungen zu übernehmen. Um diesen Prozess zu automatisieren, können Sie die AWS-<a href="https://github.com/awslabs/amazon-redshift-utils/tree/master/src/ColumnEncodingUtility" rel="noopener noreferrer" target="_blank"><span>ColumnEncodingUtility</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in GitHub verwenden. </p>
            <p>Um die aktuellen COPY-Operationen zu ermitteln, die die automatische Komprimierungsanalyse ausgelöst haben, führen Sie den folgenden SQL-Befehl aus.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
  WITH xids AS (
    SELECT xid FROM stl_query WHERE userid&gt;1 AND aborted=0 
    AND querytxt = 'analyze compression phase 1' GROUP BY xid
    INTERSECT SELECT xid FROM stl_commit_stats WHERE node=-1)
SELECT a.userid, a.query, a.xid, a.starttime, b.complyze_sec, 
    a.copy_sec, a.copy_sql
FROM (SELECT q.userid, q.query, q.xid, date_trunc('s',q.starttime) 
    starttime, substring(querytxt,1,100) as copy_sql, 
    ROUND(datediff(ms,starttime,endtime)::numeric / 1000.0, 2) copy_sec
    FROM stl_query q JOIN xids USING (xid)
    WHERE (querytxt ilike 'copy %from%' OR querytxt ilike '% copy %from%') 
    AND querytxt not like 'COPY ANALYZE %') a
LEFT JOIN (SELECT xid, 
    ROUND(sum(datediff(ms,starttime,endtime))::numeric / 1000.0,2) complyze_sec 
    FROM stl_query q JOIN xids USING (xid)
    WHERE (querytxt like 'COPY ANALYZE %' 
    OR querytxt like 'analyze compression phase %') 
    GROUP BY xid ) b ON a.xid = b.xid
WHERE b.complyze_sec IS NOT NULL ORDER BY a.copy_sql, a.starttime;
         </code></pre>
            <p><b>Implementierungstipps</b></p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Stellen Sie sicher, dass alle Tabellen von erheblicher Größe, die während Ihrer ETL-Prozesse erstellt wurden (Beispiel: Staging-Tabellen und temporäre Tabellen), eine Komprimierungskodierung für alle Spalten außer dem ersten Sortierschlüssel deklarieren.</p>
               </li><li class="listitem">
                  <p>Schätzen Sie die erwartete Lebenszeitgröße der Tabelle, die für jeden COPY-Befehl geladen wird, der vom vorstehenden SQL-Befehl erkannt wird. Falls Sie sicher sind, dass die Tabelle extrem klein bleibt, schalten Sie die Komprimierung zusammen mit dem <code class="code">COMPUPDATE OFF</code>-Parameter aus. Erstellen Sie die Tabelle anderenfalls mit einer expliziten Komprimierung, bevor Sie sie mit dem COPY-Befehl laden.</p>
               </li></ul></div>
          
            <h2 id="split-s3-objects-recommendation">Teilen Sie Amazon-S3-Objekte mit dem Befehl COPY auf</h2>
            <p>Der Befehl COPY nutzt die massive Parallelverarbeitungsarchitektur (Massively Parallel Processing, MPP) in Amazon Redshift, um Daten aus Dateien in Amazon S3 zu lesen und zu laden. Der COPY-Befehl lädt die Daten in paralleler Weise aus mehreren Dateien und teilt dabei den Workload über die Knoten in Ihrem Cluster auf. Um einen optimalen Durchsatz zu erzielen, wird nachdrücklich empfohlen, die Daten in mehrere Dateien aufzuteilen, um die Vorteile der Parallelverarbeitung nutzen zu können. </p>
            <p><b>Analyse</b></p>
            <p>Bei der Advisor-Analyse werden COPY-Befehle erkannt, die große Datensätze laden, die in einer kleinen Anzahl von Dateien enthalten sind, die in Amazon S3 bereitgestellt wurden. Lange laufende COPY-Befehle, die große Datasets aus wenigen Dateien laden, bieten häufig die Möglichkeit einer erheblichen Leistungsverbesserung. Wenn Advisor erkennt, dass diese COPY-Befehle eine erhebliche Menge Zeit in Anspruch nehmen, wird die Empfehlung erstellt, die parallele Ausführung durch Aufteilen der Daten in zusätzliche Dateien in Amazon S3 zu verstärken. </p>
            <p><b>Empfehlung</b></p>
            <p>In diesem Fall empfehlen wir die folgenden Aktionen, aufgelistet in Reihenfolge ihrer Priorität:</p>
            <div class="orderedlist">
                
                
                
            <ol><li>
                  <p>Optimieren der COPY-Befehle, die weniger Dateien als die Anzahl der Cluster-Knoten laden.</p>
               </li><li>
                  <p>Optimieren der COPY-Befehle, die weniger Dateien als die Anzahl der Cluster-Slices laden. </p>
               </li><li>
                  <p>Optimieren der COPY-Befehle, bei denen die Anzahl der Dateien kein Vielfaches der Anzahl der Cluster-Slices ist.</p>
               </li></ol></div>
            <p>Bestimmte COPY-Befehle laden eine erhebliche Datenmenge oder laufen sehr lang. Wir empfehlen, die Anzahl der aus Amazon S3 zu ladenden Datenobjekte so zu wählen, dass sie einem Vielfachen der Anzahl der Slices im Cluster entspricht. Um zu ermitteln, wie viele S3-Objekte der jeweilige COPY-Befehl geladen hat, führen Sie den folgenden SQL-Code als Superuser aus. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT
    query, COUNT(*) num_files,
    ROUND(MAX(wq.total_exec_time/1000000.0),2) execution_secs,
    ROUND(SUM(transfer_size)/(1024.0*1024.0),2) total_mb,
    SUBSTRING(querytxt,1,60) copy_sql
FROM stl_s3client s
JOIN stl_query q USING (query)
JOIN stl_wlm_query wq USING (query)
WHERE s.userid&gt;1 AND http_method = 'GET'
    AND POSITION('COPY ANALYZE' IN querytxt) = 0
    AND aborted = 0 AND final_state='Completed'
GROUP BY query, querytxt
HAVING (SUM(transfer_size)/(1024*1024))/COUNT(*) &gt;= 2
ORDER BY CASE
WHEN COUNT(*) &lt; (SELECT max(node)+1 FROM stv_slices) THEN 1
WHEN COUNT(*) &lt; (SELECT COUNT(*) FROM stv_slices WHERE node=0) THEN 2
ELSE 2+((COUNT(*) % (SELECT COUNT(*) FROM stv_slices))/(SELECT COUNT(*)::DECIMAL FROM stv_slices))
END, (SUM(transfer_size)/(1024.0*1024.0))/COUNT(*) DESC;   
            
         </code></pre>
            <p><b>Implementierungstipps</b></p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Die Anzahl der Slices in einem Knoten ist von der Knotengröße des Clusters abhängig. Weitere Informationen zur Anzahl der Slices für die einzelnen Knotengrößen finden Sie unter <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/working-with-clusters.html#rs-about-clusters-and-nodes">Clusters and Nodes in Amazon Redshift</a> (Cluster und Knoten in Amazon Redshift) im <em>Amazon-Redshift-Verwaltungshandbuch</em>. </p>
               </li><li class="listitem">
                  <p>Sie können mehrere Dateien durch die Angabe eines gemeinsamen Präfixes bzw. Präfixschlüssels für den Satz oder durch die explizite Auflistung der Dateien in einer Manifestdatei laden. Weitere Informationen zum Laden von Dateien finden Sie unter <a href="./t_splitting-data-files.html">Laden von Daten aus komprimierten und unkomprimierten Dateien</a>.</p>
               </li><li class="listitem">
                  <p>Amazon Redshift berücksichtigt die Dateigröße beim Aufteilen des Workloads nicht. Teilen Sie Ihre Ladedatendateien, so dass die Dateien etwa gleich groß sind, zwischen 1 MB und 1 GB nach der Kompression. </p>
               </li></ul></div>
          
            <h2 id="update-table-statistics-recommendation">Aktualisieren der Tabellenstatistik</h2>
            <p>Amazon Redshift verwendet eine kostenbasierte Abfrageoptimierung zur Auswahl eines optimalen Ausführungsplans für Abfragen. Die Kostenschätzungen basieren auf Tabellenstatistiken, die mit dem Befehl ANALYZE erfasst wurden. Wenn die Statistiken nicht mehr aktuell sind oder fehlen, wählt die Datenbank möglicherweise einen weniger effizienten Plan für die Abfrageausführung, insbesondere bei komplexen Abfragen. Wenn die Statistiken aktuell sind, hilft dies dabei, komplexe Abfragen in der kürzestmöglichen Zeit auszuführen. </p>
            <p><b>Analyse</b></p>
            <p>Die Advisor-Analyse erfasst Tabellen, deren Statistiken veraltet sind oder die komplett fehlen. Der Advisor untersucht Metadaten zu Tabellenzugriffen bei komplexen Abfragen. Wenn der Advisor feststellt, dass Tabellen mit komplexen Zugriffsmustern keine Statistiken haben, gibt er eine <b>kritische</b> Empfehlung aus, ANALYZE auszuführen. Wenn Tabellen mit komplexen Zugriffsmustern aufgerufen werden, deren Statistiken veraltet sind, gibt der Advisor die Empfehlung, ANALYZE auszuführen, als <b>Vorschlag</b> aus.</p>

            <p><b>Empfehlung</b></p>
            <p>Immer wenn sich der Inhalt einer Tabelle erheblich ändert, sollten Sie die Statistiken mit ANALYZE aktualisieren. Wir empfehlen die Ausführung von ANALYZE, wenn eine große Anzahl neuer Datenzeilen mit dem COPY- oder dem INSERT-Befehl in eine vorhandene Tabelle geladen wird. Wir empfehlen zudem die Ausführung von ANALYZE, wenn eine erhebliche Anzahl von Zeilen mit dem UPDATE- oder dem DELETE-Befehl modifiziert wird. Um zu ermitteln, welche Tabellen fehlende oder veraltete Statistiken haben, führen Sie den folgenden SQL-Befehl als Superuser aus. Die Ergebnisse werden von der größten zur kleinsten Tabelle sortiert. </p>
            <p>Um zu ermitteln, welche Tabellen fehlende oder veraltete Statistiken haben, führen Sie den folgenden SQL-Befehl als Superuser aus. Die Ergebnisse werden von der größten zur kleinsten Tabelle sortiert.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT
   ti.schema||'.'||ti."table" tablename,
   ti.size table_size_mb,
   ti.stats_off statistics_accuracy
 FROM svv_table_info ti
 WHERE ti.stats_off &gt; 5.00
 ORDER BY ti.size DESC;          
         </code></pre>
            <p><b>Implementierungstipps</b></p>
            
                  <p>Der Standardschwellenwert für ANALYZE ist 10 Prozent. Dieser Standardwert bedeutet, dass der ANALYZE-Befehl eine vorhandene Tabelle überspringt, wenn weniger als 10 Prozent der Tabellenzeilen seit dem letzten ANALYZE-Vorgang geändert wurden. Daher können Sie am Ende jedes ETL-Prozesses wählen, ob ANALYZE-Befehle ausgeführt werden sollen. Dieser Ansatz beinhaltet, dass der Befehl ANALYZE häufig übersprungen wird, aber sichergestellt ist, dass er bei Bedarf ausgeführt wird.</p>
              
                  <p>ANALYZE-Statistiken haben die größten Auswirkungen auf Spalten, die in Joins verwendet werden (Beispiel: <code class="code">JOIN tbl_a ON col_b</code>) oder als Prädikate (Beispiel: <code class="code">WHERE col_b = 'xyz'</code>). Standardmäßig erfasst ANALYZE Statistiken für alle in der Tabelle angegebenen Spalten. Bei Bedarf können Sie die erforderliche Zeit zum Ausführen von ANALYZE reduzieren, indem Sie ANALYZE nur für die Spalten mit den größten Auswirkungen ausführen. Sie können den folgenden SQL-Befehl ausführen, um Spalten zu ermitteln, die als Prädikate verwendet werden. Sie können auch Amazon Redshift wählen lassen, welche Spalten analysiert werden sollen, indem Sie  angeben <code class="code">ANALYZE PREDICATE COLUMNS</code>. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">WITH predicate_column_info as (
SELECT ns.nspname AS schema_name, c.relname AS table_name, a.attnum as col_num,  a.attname as col_name,
        CASE
            WHEN 10002 = s.stakind1 THEN array_to_string(stavalues1, '||') 
            WHEN 10002 = s.stakind2 THEN array_to_string(stavalues2, '||')
            WHEN 10002 = s.stakind3 THEN array_to_string(stavalues3, '||')
            WHEN 10002 = s.stakind4 THEN array_to_string(stavalues4, '||')
            ELSE NULL::varchar
        END AS pred_ts
   FROM pg_statistic s
   JOIN pg_class c ON c.oid = s.starelid
   JOIN pg_namespace ns ON c.relnamespace = ns.oid
   JOIN pg_attribute a ON c.oid = a.attrelid AND a.attnum = s.staattnum)
SELECT schema_name, table_name, col_num, col_name,
       pred_ts NOT LIKE '2000-01-01%' AS is_predicate,
       CASE WHEN pred_ts NOT LIKE '2000-01-01%' THEN (split_part(pred_ts, '||',1))::timestamp ELSE NULL::timestamp END as first_predicate_use,
       CASE WHEN pred_ts NOT LIKE '%||2000-01-01%' THEN (split_part(pred_ts, '||',2))::timestamp ELSE NULL::timestamp END as last_analyze
FROM predicate_column_info;</code></pre>
            <p>Weitere Informationen finden Sie unter <a href="./t_Analyzing_tables.html">Analysieren von Tabellen</a>.</p>
          
            <h2 id="enable-sqa-recommendation">Aktivieren von Short Query Acceleration</h2>
            <p>Wenn Sie Short Query Acceleration (SQA) verwenden, werden ausgewählte, kurze Abfragen gegenüber Abfragen mit einer höheren Dauer priorisiert. SQA führt kurze Abfragen an einer dedizierten Stelle aus, sodass SQA-Abfragen nicht hinter längeren Abfragen in Warteschlangen eingereiht werden. SQA priorisiert nur Warteschlangen, die über eine kurze Zeit ausgeführt werden und sich in einer benutzerdefinierten Warteschlange befinden. Mit SQA werden kürzere Abfragen schneller ausgeführt und der Benutzer sieht schneller Ergebnisse. </p>
            <p>Wenn Sie SQA aktivieren, können Sie dedizierte Workload Management (WLM)-Warteschlangen für kurze Anfragen reduzieren oder ganz abschaffen. Außerdem konkurrieren lange Abfragen nicht mit kurzen Abfragen um Slots in einer Warteschlange, daher können Sie Ihre WLM-Warteschlangen mit weniger Abfrage-Slots konfigurieren. Wenn Sie einen niedrigeren Nebenläufigkeitswert verwenden, wird bei den meisten Arbeitslasten der Abfragedurchsatz erhöht und die gesamte Systemleistung verbessert. Weitere Informationen finden Sie unter <a href="./wlm-short-query-acceleration.html">Arbeiten mit Short Query Acceleration</a>. </p>
            <p><b>Analyse</b></p>
            <p>Der Advisor sucht nach Workloadmustern und meldet die Anzahl kürzlich ausgeführter Abfragen, bei denen SQA die Latenz und die Tages-Warteschlangendauer für SQA-qualifizierte Abfragen reduzieren würde.</p>
            <p><b>Empfehlung</b></p>
            <p>Ändern Sie die WLM-Konfiguration, um SQA zu aktivieren. Amazon Redshift verwendet einen Machine-Learning-Algorithmus, um berechtigte Abfragen zu analysieren. Voraussagen werden in dem Maße besser, in dem SQA aus den Abfragemustern lernt. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/workload-mgmt-config.html">Workload-Management-Konfiguration</a>. </p>
            <p>Wenn Sie SQA aktivieren, legt WLM die maximale Ausführungszeit für kurze Abfragen standardmäßig als „dynamisch“ fest. Sie sollten die dynamische Einstellung für die maximale SQA-Laufzeit beibehalten. </p>
            <p><b>Implementierungstipps</b></p>
            <p>Führen Sie die folgende Abfrage aus, um zu überprüfen, ob SQA aktiviert ist. Wenn für die Abfrage eine Zeile zurückgegeben wird, ist SQA aktiviert.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from stv_wlm_service_class_config 
where service_class = 14;</code></pre>
            <p>Weitere Informationen finden Sie unter <a href="./wlm-short-query-acceleration.html#wlm-monitoring-sqa">SQA-Überwachung</a>. </p>
          
            <h2 id="alter-diststyle-distkey-recommendation">Ändern der Verteilungsschlüssel in Tabellen</h2>
            <p>Amazon Redshift verteilt Tabellenzeilen im Cluster gemäß des Verteilungsstils der Tabelle. In Tabellen mit KEY-Verteilung muss eine Spalte als Verteilungsschlüssel (DISTKEY) gekennzeichnet sein. Eine Tabellenzeile wird einem Knoten-Slice eines Clusters basierend auf dessen DISTKEY-Spaltenwert zugewiesen. </p>
            <p>Ein passender DISTKEY platziert eine vergleichbare Anzahl an Zeilen in jedem Knoten-Slice und wird regelmäßig in Join-Bedingungen referenziert. Ein optimierter Join tritt auf, wenn Tabellen anhand ihrer DISTKEY-Spalten verbunden werden, um die Abfrageleistung zu erhöhen.</p>
            
            <p><b>Analyse</b></p>
            <p>Advisor analysiert den Workload Ihres Clusters, um den geeignetsten Verteilungsschlüssel für die Tabellen zu finden, der erheblich von einem KEY-Verteilungsstil profitieren kann. </p>
            
            <p><b>Empfehlung</b></p>
            <p>Advisor stellt <a href="./r_ALTER_TABLE.html">ALTER TABLE</a> Anweisungen bereit, die die Werte DISTSTYLE und DISTKEY einer Tabelle basierend auf deren Analyse anpassen. Um einen erheblichen Leistungsvorteil zu erzielen, müssen alle SQL-Anweisungen innerhalb einer Empfehlungsgruppe implementiert werden. </p>
            <p>Die Neuverteilung großer Tabellen mit ALTER TABLE verbraucht Cluster-Ressourcen, außerdem muss die Tabelle an verschiedenen Zeitpunkten kurzfristig gesperrt werden. Implementieren Sie die jeweiligen Empfehlungsgruppen, wenn der sonstige Workload im Cluster gering ist. Weitere Informationen zur Optimierung der Tabellenverteilungseigenschaften finden Sie unter <a href="https://aws.amazon.com/blogs/big-data/amazon-redshift-engineerings-advanced-table-design-playbook-distribution-styles-and-distribution-keys/" rel="noopener noreferrer" target="_blank"><span>Amazon Redshift Engineering's Advanced Table Design Playbook: Distribution Styles and Distribution Keys</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>        
            <p>Weitere Informationen zu ALTER DISTSTYLE und DISTKEY finden Sie unter <a href="./r_ALTER_TABLE.html">ALTER TABLE</a>. </p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Wenn keine Empfehlung angezeigt wird, bedeutet dies nicht unbedingt, dass die aktuellen Verteilungsstile am besten geeignet sind. Advisor gibt keine Empfehlungen, wenn nicht genügend Daten vorhanden sind oder der erwartete Nutzen der Umverteilung gering ist. </p><p>Advisor-Empfehlungen beziehen sich auf eine bestimmte Tabelle und können nicht auf Tabellen mit identischem Spaltennamen übertragen werden. Tabellen, die denselben Spaltennamen verwenden, können andere Eigenschaften für diese Spalten haben, sofern sich die darin enthaltenen Daten unterscheiden. </p><p>Wenn Sie Empfehlungen für Staging-Tabellen sehen, die von ETL-Aufgaben erstellt oder verworfen wurden, passen Sie Ihre ETL-Prozesse an, um von Advisor empfohlene Verteilungsschlüssel zu verwenden. </p></div></div>

          
            <h2 id="alter-sortkey-recommendation">Ändern der Sortierschlüssel für Tabellen</h2>
            <p>Amazon Redshift sortiert Tabellenzeilen nach dem <a href="./t_Sorting_data.html">Tabellensortierschlüssel</a>. Die Sortierung der Tabellenzeilen basiert auf den Sortierschlüsselspaltenwerten. </p>
            <p>Das Sortieren einer Tabelle mit einem geeigneten Sortierschlüssel kann die Leistung von Abfragen beschleunigen, insbesondere solche mit bereichsbeschränkten Prädikaten, da weniger Tabellenblöcke von der Festplatte gelesen werden müssen. </p>
            
            <p><b>Analyse</b></p>
            <p>Advisor analysiert die Workload Ihres Clusters über mehrere Tage, um einen vorteilhaften Sortierschlüssel für Ihre Tabellen zu identifizieren. </p>
            
            <p><b>Empfehlung</b></p>
            <p> Advisor stellt zwei Gruppen von ALTER TABLE-Anweisungen bereit, die den Sortierschlüssel einer Tabelle basierend auf ihrer Analyse ändern: </p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem"><p>Anweisungen, die eine Tabelle ändern, die derzeit keinen Sortierschlüssel zum Hinzufügen eines COMPOUND-Sortierschlüssels hat.</p></li><li class="listitem"><p>Anweisungen, die einen Sortierschlüssel von INTERLEAVED zu COMPOUND oder keinen Sortierschlüssel verändern.</p>
                  <p>Die Verwendung zusammengesetzter Sortierschlüssel verringert den Verwaltungsaufwand bei der Wartung deutlich. Tabellen mit zusammengesetzten Sortierschlüsseln benötigen nicht die teuren VACUUM REINDEX-Operationen, die bei überlappenden Sortierschlüsseln erforderlich sind. In der Praxis sind für die große Mehrheit der Amazon-Redshift-Workloads zusammengesetzte Sortierschlüssel effizienter als überlappende. Wenn eine Tabelle jedoch klein ist, ist der Verzicht auf einen Sortierschlüssel effizienter, um den Speicheraufwand für Sortierschlüssel zu vermeiden.</p></li></ul></div>
            
            <p>Beim Sortieren einer großen Tabelle mit ALTER TABLE werden Clusterressourcen belegt und zu unterschiedlichen Zeitpunkten sind Tabellensperren erforderlich. Implementieren Sie jede Empfehlung, wenn die Workload eines Clusters moderat ist. Weitere Details zur Optimierung von Tabellensortierschlüsselkonfigurationen finden Sie im <a href="https://aws.amazon.com/blogs/big-data/amazon-redshift-engineerings-advanced-table-design-playbook-compound-and-interleaved-sort-keys/" rel="noopener noreferrer" target="_blank"><span>Amazon Redshift Engineering's Advanced Table Design Playbook: Compound and Interleaved Sort Keys</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>        
            <p>Weitere Informationen zu ALTER SORTKEY finden Sie im Abschnitt <a href="./r_ALTER_TABLE.html">ALTER TABLE</a>. </p>
            
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Wenn Sie keine Empfehlung für eine Tabelle sehen, bedeutet dies nicht unbedingt, dass die aktuelle Konfiguration die beste ist. Advisor gibt keine Empfehlungen, wenn nicht genügend Daten vorhanden sind oder der erwartete Nutzen der Sortierung gering ist. </p><p>Advisor-Empfehlungen gelten für eine bestimmte Tabelle und gelten nicht unbedingt für eine Tabelle, die eine Spalte mit demselben Namen und Datentyp enthält. Für Tabellen, die Spaltennamen gemeinsam nutzen, können basierend auf den Daten in den Tabellen und der Workload unterschiedliche Empfehlungen gelten. </p></div></div>
            
          
            <h2 id="alter-compression-encoding-recommendation">Ändern der Komprimierungskodierungen für Spalten</h2>
            <p>Komprimierung ist eine Operation auf Spaltenebene, die die Größe von Daten reduziert, wenn sie gespeichert werden. Die Komprimierung wird in Amazon Redshift verwendet, um Speicherplatz zu sparen und die Abfrageleistung zu verbessern, indem die Menge an Festplatten-I/O reduziert wird. Wir empfehlen eine optimale Komprimierungskodierung für jede Spalte basierend auf ihrem Datentyp und auf Abfragemustern. Bei optimaler Komprimierung können Abfragen effizienter ausgeführt werden und die Datenbank beansprucht nur wenig Speicherplatz. </p>
            
            <p><b>Analyse</b></p>
            <p>Advisor führt kontinuierlich eine Analyse der Workload und des Datenbankschemas Ihres Clusters durch, um die optimale Komprimierungskodierung für jede Tabellenspalte zu ermitteln.</p>
            
            <p><b>Empfehlung</b></p>
            <p>Advisor stellt ALTER-TABLE-Anweisungen bereit, die die Komprimierungskodierung bestimmter Spalten basierend auf ihrer Analyse ändern. </p>
            <p>Ändern der Spaltenkomprimierungskodierungen mit <a href="./r_ALTER_TABLE.html">ALTER TABLE</a> verbraucht Clusterressourcen und erfordert Tabellensperren zu verschiedenen Zeitpunkten. Implementieren Sie am besten Empfehlungen, wenn der Workload im Cluster leicht ausfällt. </p>
            <p>Als Referenz zeigt <a href="./r_ALTER_TABLE_examples_basic.html">Beispiele für ALTER TABLE</a> mehrere Anweisungen an, die die Kodierung für eine Spalte ändern.</p>        
            
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Advisor gibt keine Empfehlungen, wenn nicht genügend Daten vorhanden sind oder der erwartete Nutzen der Verschlüsselung gering ist.</p></div></div>
            
          
            <h2 id="data-type-recommendation">Datentyp-Empfehlungen</h2>
            <p>Amazon Redshift verfügt über eine Bibliothek mit SQL-Datentypen für verschiedene Anwendungsfälle. Dazu gehören ganzzahlige Typen wie <code class="code">INT</code> und Typen zum Speichern von Zeichen wie <code class="code">VARCHAR</code>. Redshift speichert Typen optimiert, um einen schnelleren Zugriff und eine gute Abfrageleistung zu ermöglichen. Redshift bietet außerdem Funktionen für bestimmte Typen, mit denen Sie Berechnungen für Abfrageergebnisse formatieren oder durchführen können. </p>
            
            <p><b>Analyse</b></p>
            <p>Advisor führt kontinuierlich eine Analyse der Workload und des Datenbankschemas Ihres Clusters durch, um Spalten zu ermitteln, die erheblich von einer Datentypänderung profitieren können.</p>
            
            <p><b>Empfehlung</b></p>
            
            <p> Advisor bietet eine <code class="code">ALTER TABLE</code>-Anweisung, die eine neue Spalte mit dem vorgeschlagenen Datentyp hinzufügt. Eine begleitende <code class="code">UPDATE</code>-Anweisung kopiert Daten aus der vorhandenen Spalte in die neue Spalte. Nachdem Sie die neue Spalte erstellt und die Daten geladen haben, ändern Sie Ihre Abfragen und Erfassungsskripte, um auf die neue Spalte zuzugreifen. Nutzen Sie dann Ressourcen und Funktionen, die auf den neuen Datentyp spezialisiert sind, in <a href="./c_SQL_functions.html">SQL-Funktionsreferenz</a>. </p>
            <p> Das Kopieren vorhandener Daten in die neue Spalte kann einige Zeit dauern. Wir empfehlen Ihnen, jede Advisor-Empfehlung zu implementieren, wenn die Workload des Clusters leicht ist. Verweisen Sie auf die Liste der verfügbaren Datentypen unter <a href="./c_Supported_data_types.html">Datentypen</a>. </p>
            <p> Beachten Sie, Advisor gibt keine Empfehlungen, wenn nicht genügend Daten vorhanden sind oder der erwartete Nutzen der Veränderung des Datentyps gering ist. </p>        
            
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access-advisor.html">Advisor aufrufen</div><div id="next" class="next-link" accesskey="n" href="./tutorials-redshift.html">Tutorials</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>