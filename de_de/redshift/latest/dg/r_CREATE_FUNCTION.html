<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE FUNCTION - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_FUNCTION" /><meta name="default_state" content="r_CREATE_FUNCTION" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Datenbankentwicklerhandbuch" /><meta name="abstract" content="Erstellen und verwalten Sie ein Data Warehouse mit Amazon Redshift, einem vollständig verwalteten Petabyte-Data-Warehousing-Service auf Unternehmensniveau." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Datenbankentwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Datenbankentwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="CREATE FUNCTION" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE FUNCTION - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_CREATE_FUNCTION" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Cluster,Data Warehouse,Developer,Musterdaten,Datenbank,Database Developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Datenbankentwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL-Referenz",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL-Befehle",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE FUNCTION",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_CREATE_FUNCTION" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Datenbankentwicklerhandbuch</a></div><div id="page-toc-src"><a href="#r_CREATE_FUNCTION-privileges">Erforderliche Berechtigungen</a><a href="#r_CREATE_FUNCTION-synopsis">Syntax</a><a href="#r_CREATE_FUNCTION-parameters">Parameter</a><a href="#r_CREATE_FUNCTION-usage-notes">Nutzungshinweise</a><a href="#r_CREATE_FUNCTION-examples">Beispiele</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="r_CREATE_FUNCTION">CREATE FUNCTION</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p> </p><p>Erstellt eine neue skalare benutzerdefinierte Funktion (User-Defined Function; UDF) mit einer SQL SELECT-Klausel oder einem Python-Programm.</p><p>Weitere Informationen und Beispiele finden Sie unter <a href="./user-defined-functions.html">Erstellung benutzerdefinierter Funktionen</a>.</p>
         <h2 id="r_CREATE_FUNCTION-privileges">Erforderliche Berechtigungen</h2>
         <p>Für CREATE FUNCTION sind folgende Berechtigungen erforderlich:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Für CREATE FUNCTION:</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>Superuser kann sowohl vertrauenswürdige als auch nicht vertrauenswürdige Sprachen verwenden, um Funktionen zu erstellen.</p></li><li class="listitem"><p>Benutzer mit der Berechtigung CREATE [OR REPLACE] FUNCTION können Funktionen mit vertrauenswürdigen Sprachen erstellen.</p></li></ul></div>
            </li><li class="listitem"><p>Für REPLACE FUNCTION:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>Superuser</p></li><li class="listitem"><p>Benutzer mit der Berechtigung CREATE [ OR REPLACE ] FUNCTION</p></li><li class="listitem"><p>Funktionsbesitzer</p></li></ul></div>
            </li></ul></div>
       
         <h2 id="r_CREATE_FUNCTION-synopsis">Syntax</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE [ OR REPLACE ] FUNCTION <em>f_function_name</em>
( <span>{</span> [<em>py_arg_name</em> <em> py_arg_data_type</em> |
<em>sql_arg_data_type</em> } [ , ... ] ] )
RETURNS <em>data_type</em>
<span>{</span> VOLATILE | STABLE | IMMUTABLE }
AS $$
  <span>{</span> <em>python_program</em> | <em>SELECT_clause</em> }
$$ LANGUAGE <span>{</span> plpythonu | sql }</code></pre>
       
         <h2 id="r_CREATE_FUNCTION-parameters">Parameter</h2>
         <div class="variablelist">
             
             
             
             
             
             
             
             
             
         <dl>
               <dt><span class="term">OR REPLACE</span></dt>
               <dd>
                  <p>Gibt an, dass die vorhandene Funktion ersetzt wird, wenn eine Funktion mit demselben Namen und denselben Eingabeargument-Datentypen bzw. derselben <em>Signatur</em> vorhanden ist. Sie können eine Funktion nur durch eine neue Funktion ersetzen, wenn diese einen identischen Satz von Datentypen definiert. Sie müssen Superuser sein, um eine Funktion zu ersetzen.</p>
                  <p>Wenn Sie eine Funktion definieren, die den gleichen Namen wie eine vorhandene Funktion, aber eine andere Signatur besitzt, erstellen Sie eine neue Funktion. Der Funktionsname wird also überladen. Weitere Informationen finden Sie unter <a href="./udf-naming-udfs.html#udf-naming-overloading-function-names">Überladen von Funktionsnamen</a>.</p>
               </dd>
             
               <dt><span class="term"> <em>f_function_name</em> </span></dt>
               <dd>
                  <p>Der Name der Funktion. Wenn Sie einen Schemanamen angeben (wie <code class="code">myschema.myfunction</code>), wird die Funktion mithilfe des angegebenen Schemas erstellt. Andernfalls wird die Funktion im aktuellen Schema erstellt. Weitere Informationen zu gültigen Namen finden Sie unter <a href="./r_names.html">Namen und Kennungen</a>.</p>
                  <p>Es wird empfohlen, dass Sie alle UDFs mit dem Präfix  benennen <code class="code">f_</code>. Amazon Redshift reserviert das Präfix <code class="code">f_</code> ausschließlich für UDF-Namen. Wenn Sie Ihren UDF-Namen <code class="code">f_</code> voranstellen, stellen Sie daher sicher, dass Ihre UDF-Namen nicht im Widerspruch zu den Namen vorhandener oder zukünftiger, in Amazon Redshift integrierter SQL-Funktionen stehen. Weitere Informationen finden Sie unter <a href="./udf-naming-udfs.html">Benennung von UDFs</a>.</p>
                  <p>Sie können mehr als eine Funktion mit demselben Funktionsnamen definieren, wenn sich die Datentypen für die Eingabeargumente unterscheiden. Der Funktionsname wird also überladen. Weitere Informationen finden Sie unter <a href="./udf-naming-udfs.html#udf-naming-overloading-function-names">Überladen von Funktionsnamen</a>.</p>
               </dd>
             
               <dt><span class="term"> <em>py_arg_name py_arg_data_type | sql_arg_data type</em> </span></dt>
               <dd>
                  <p>Für eine Python-UDF: eine Liste eingegebener Argumentnamen und Datentypen. Für eine SQL-UDF: eine Liste der Datentypen ohne Argumentnamen. Verweisen Sie in einer Python-UDF anhand der Argumentnamen auf Argumente. Verweisen Sie in einer SQL-UDF mit $1, $2 usw. auf Argumente, basierend auf der Reihenfolge der Argumente in der Argumentliste. </p>
                  <p>Die Ein- und Rückgabedaten für eine SQL-UDF können jeden standardmäßigen Amazon Redshift-Datentyp verwenden. Für eine Python-UDF kommen als Eingabe- und Rückgabedatentypen SMALLINT, INTEGER, BIGINT, DECIMAL, REAL, DOUBLE PRECISION, BOOLEAN, CHAR, VARCHAR, DATE oder TIMESTAMP infrage. Darüber hinaus unterstützen Python benutzerdefinierte Funktionen (UDFs) den Datentyp ANYELEMENT. Dieser wird basierend auf dem Datentyp des entsprechenden Arguments, das zur Laufzeit bereitgestellt wird, automatisch in einen Standarddatentyp umgewandelt. Wenn mehrere Argumente ANYELEMENT verwenden, werden sie alle zur Laufzeit zum gleichen Datentyp aufgelöst, basierend auf dem ersten ANYELEMENT-Argument in der Liste. Weitere Informationen erhalten Sie unter <a href="./udf-data-types.html">Python-UDF-Datentypen</a> und <a href="./c_Supported_data_types.html">Datentypen</a>.</p>

                  <p>Sie können maximal 32 Argumente angeben.</p>
               </dd>
             
               <dt><span class="term"> RETURNS <em>data_type</em> </span></dt>
               <dd>
                  <p>Der Datentyp des Werts, der von der Funktion zurückgegeben wird. Der RETURNS-Datentyp kann ein beliebiger Standard-Amazon-Redshift-Datentyp sein. Zusätzlich können Python-UDFs den Datentyp ANYELEMENT verwenden. Dieser wird basierend auf dem Argument, das zur Laufzeit bereitgestellt wird, automatisch in einen Standarddatentyp umgewandelt. Wenn Sie ANYELEMENT für den Rückgabedatentyp angeben, muss mindestens ein Argument ANYELEMENT verwenden. Der tatsächliche Rückgabedatentyp entspricht dem Datentyp, der für das ANYELEMENT-Argument angegeben wird, wenn die Funktion aufgerufen wird. Weitere Informationen finden Sie unter <a href="./udf-data-types.html">Python-UDF-Datentypen</a>.</p>
               </dd>
             
               <dt><span class="term"> VOLATILE | STABLE | IMMUTABLE </span></dt>
               <dd>
                  <p>Informiert den Abfragenoptimierer über die Volatilität der Funktion. </p>
                  <p>Sie erhalten die beste Optimierung, wenn Sie Ihre Funktion mit der strengsten Volatilitätskategorie bezeichnen, die für sie zulässig ist. Wenn die Kategorie jedoch zu eng gefasst ist, besteht das Risiko, dass der Optimierer fälschlicherweise einige Aufrufe überspringt. Dies führt zu einem falschen Ergebnissatz. Beginnend mit der Volatilitätskategorie mit der geringsten Strenge sind dies die Volatilitätskategorien:</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>VOLATILE</p>
                     </li><li class="listitem">
                        <p>STABLE</p>
                     </li><li class="listitem">
                        <p>IMMUTABLE</p>
                     </li></ul></div>
                  
                  <p>VOLATILE</p>
                  <p>Bei gleichen Argumenten kann die Funktion unterschiedliche Ergebnisse für aufeinanderfolgende Aufrufe zurückgeben, auch für die Zeilen in einer einzelnen Anweisung. Der Abfragenoptimierer kann keine Annahmen über das Verhalten einer volatilen Funktion machen. Daher muss eine Abfrage, die eine volatile Funktion verwendet, die Funktion für jede Eingabezeile erneut evaluieren.</p>
                  <p>STABLE</p>
                  <p>Bei gleichen Argumenten gibt die Funktion garantiert die gleichen Ergebnisse für alle Zeilen zurück, die innerhalb einer einzelnen Anweisung verarbeitet werden. Die Funktion kann unterschiedliche Ergebnisse zurückgeben, wenn sie in unterschiedlichen Anweisungen aufgerufen wird. Diese Kategorie ermöglicht dem Optimierer, mehrere Aufrufe der Funktion innerhalb einer einzelnen Anweisung zu einem einzigen Aufruf für die Anweisung zu optimieren. </p>
                  <p>IMMUTABLE</p>
                  <p>Bei gleichen Argumenten gibt die Funktion stets das gleiche Ergebnis zurück. Wenn eine Abfrage eine <code class="code">IMMUTABLE</code>-Funktion mit konstanten Argumenten aufruft, evaluiert der Optimierer die Funktion im Voraus.</p>
               </dd>
             
               <dt><span class="term">AS $$-<em>Anweisung</em> $$</span></dt>
               <dd>
                  <p> Ein Konstrukt, das die Ausführung der Anweisung einschließt. Die Literalschlüsselwörter <code class="code">AS $$</code> und <code class="code">$$</code> sind erforderlich. </p>
                  <p>Amazon Redshift erfordert, dass Sie die Anweisung in Ihrer Funktion unter Verwendung eines Formats umschließen, das Dollaranführung genannt wird. Alles innerhalb der Umschließung wird exakt wie angegeben übergeben. Sie müssen für Sonderzeichen keine Escape-Zeichen verwenden, da der Inhalt der Zeichenfolge wie exakt wie angegeben geschrieben wird. </p>
                  <p> Bei der <em>Dollaranführung</em> verwenden Sie ein Dollarzeichenpaar ($$), um den Anfang und das Ende der auszuführenden Anweisung zu kennzeichnen, wie im folgenden Beispiel gezeigt. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$$ <code class="replaceable">my statement</code> $$</code></pre>
                  <p> Optional können Sie zwischen den beiden Dollarzeichen eine Zeichenfolge angeben, um die Identifizierung der Anweisung zu unterstützen. Die von Ihnen im umschließenden Dollarzeichenpaar am Anfang und am Ende verwendete Zeichenfolge muss identisch sein. Diese Zeichenfolge unterscheidet zwischen Groß- und Kleinschreibung und unterliegt den gleichen Einschränkungen wie Bezeichner, die nicht in einer Anführung stehen, darf jedoch keine Dollarzeichen enthalten. Im folgenden Beispiel wird die Zeichenfolge  verwendet <code class="code">test</code>. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$test$ <code class="replaceable">my statement</code> $test$</code></pre>

                  <p>Weitere Informationen zur Dollaranführung finden Sie unter "Zeichenfolgenkonstanten in Dollaranführung" im Abschnitt <a href="https://www.postgresql.org/docs/9.4/static/sql-syntax-lexical.html" rel="noopener noreferrer" target="_blank"><span>Lexikalische Struktur</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> der PostgreSQL-Dokumentation. </p>
               </dd>
             
               <dt><span class="term"><em>python_program</em> </span></dt>
               <dd>
                  <p>Ein gültiges ausführbares Python-Programm, das einen Wert zurückgibt. Die Anweisung, die Sie mit der Funktion übergeben, muss den Einrückungsanforderungen entsprechen, die in den <a href="https://www.python.org/dev/peps/pep-0008/#indentation" rel="noopener noreferrer" target="_blank"><span>Vorgaben für Python-Code</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> auf der Python-Website angegeben sind. Weitere Informationen finden Sie unter <a href="./udf-python-language-support.html">Python-Sprachunterstützung für UDFs</a>.</p>
               </dd>
             
               <dt><span class="term"><em>SQL_clause</em> </span></dt>
               <dd>
                  <p>Eine SQL SELECT-Klausel.</p>
                  <p>Die SELECT-Klausel darf keinen der folgenden Klausel-Typen enthalten:</p>
                  <div class="itemizedlist">
                      
                      
                      
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>FROM</p>
                     </li><li class="listitem">
                        <p>INTO</p>
                     </li><li class="listitem">
                        <p>WHERE</p>
                     </li><li class="listitem">
                        <p>GROUP BY</p>
                     </li><li class="listitem">
                        <p>ORDER BY</p>
                     </li><li class="listitem">
                        <p>LIMIT</p>
                     </li></ul></div>
               </dd>
             
               <dt><span class="term">LANGUAGE <span>{</span> plpythonu | sql } </span></dt>
               <dd>
                  <p>Legen Sie für Python  fest <code class="code">plpythonu</code>. Legen Sie für SQL  fest <code class="code">sql</code>. Sie müssen eine Berechtigung für die Nutzung in der Sprache für SQL oder plpythonu besitzen. Weitere Informationen finden Sie unter <a href="./udf-security-and-privileges.html">UDF-Sicherheit und Rechte</a>.</p>
               </dd>
            </dl></div>
       
         <h2 id="r_CREATE_FUNCTION-usage-notes">Nutzungshinweise</h2>
          
            <h3 id="r_CREATE_FUNCTION-usage-notes-nested-functions">Verschachtelte Funktionen</h3>
            <p>Sie können eine weitere SQL-UDF innerhalb einer SQL-UDF aufrufen. Die verschachtelte Funktion muss existieren, wenn Sie den Befehl CREATE FUNCTION ausführen. Amazon Redshift verfolgt keine Abhängigkeiten für UDFs, wenn Sie also die verschachtelte Funktion löschen, gibt Amazon Redshift keinen Fehler zurück. Die UDF schlägt jedoch fehl, wenn die verschachtelte Funktion nicht vorhanden ist. Die folgende Funktion ruft beispielsweise die <code class="code">f_sql_greater
               </code>-Funktion in der SELECT-Klausel auf.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_sql_commission (float, float )
  returns float
stable
as $$
  select f_sql_greater ($1, $2)
$$ language sql;</code></pre>
          
          
            <h3 id="r_CREATE_FUNCTION-usage-notes-security-and-privileges">UDF-Sicherheit und Rechte</h3>
            <p>Zum Erstellen einer UDF müssen Sie eine Berechtigung für die Nutzung in der Sprache für SQL oder plpythonu (Python) besitzen. USAGE ON LANGUAGE SQL wird standardmäßig PUBLIC gewährt. USAGE ON LANGUAGE PLPYTHONU müssen Sie jedoch spezifischen Benutzern oder Gruppen explizit gewähren. </p>
            <p>Um die Nutzung für SQL zu widerrufen, widerrufen Sie zuerst die Nutzung von PUBLIC. Erlauben Sie dann die Nutzung in SQL nur spezifischen Benutzern oder Gruppen, die auch die Erlaubnis zum Erstellen von SQL-UDFs besitzen. Im folgenden Beispiel wird die Nutzung in SQL von PUBLIC widerrufen. Anschließend wird die Nutzung der Benutzergruppe  erlaubt <code class="code">udf_devs</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">revoke usage on language sql from PUBLIC;
grant usage on language sql to group udf_devs;</code></pre>
            <p>Um eine UDF auszuführen, benötigen Sie für die jeweilige Funktion eine Ausführungsberechtigung. Standardmäßig wird PUBLIC die Ausführungsberechtigung für neue UDFs gewährt. Um die Nutzung einzuschränken, widerrufen Sie die Ausführungsberechtigung für die Funktion von PUBLIC. Gewähren Sie die Berechtigung anschließend den spezifischen Einzelpersonen oder Gruppen. </p>
            <p>Im folgenden Beispiel wird die Ausführungsberechtigung der Funktion <code class="code">f_py_greater</code> von PUBLIC widerrufen. Anschließend wird die Nutzung der Benutzergruppe <code class="code">udf_devs</code> erlaubt.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">revoke execute on function f_py_greater(a float, b float) from PUBLIC;
grant execute on function f_py_greater(a float, b float) to group udf_devs;</code></pre>
            <p>Superuser haben standardmäßig alle Berechtigungen. </p>
            <p>Weitere Informationen erhalten Sie unter <a href="./r_GRANT.html">GRANT</a> und <a href="./r_REVOKE.html">REVOKE</a>.</p>
          
       
         <h2 id="r_CREATE_FUNCTION-examples">Beispiele</h2>
          
            <h3 id="r_CREATE_FUNCTION-python-example">Beispiel für eine skalare Python-UDF</h3>
            <p>Im folgenden Beispiel wird eine Python-UDF erstellt, mit der zwei Ganzzahlen verglichen werden und die den größeren Wert zurückgibt.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_py_greater (a float, b float)
  returns float
stable
as $$
  if a &gt; b:
    return a
  return b
$$ language plpythonu;</code></pre>
            <p>Im folgenden Beispiel werden eine Abfrage für die Tabelle SALES ausgeführt und die neue <code class="code">f_py_greater</code>-Funktion aufgerufen, um entweder COMMISSION oder 20 Prozent von PRICEPAID zurückzugeben, je nachdem, welcher Wert größer ist.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select f_py_greater (commission, pricepaid*0.20) from sales;</code></pre>
          
          
            <h3 id="r_CREATE_FUNCTION-sql-example">Beispiel für eine skalare SQL-UDF</h3>
            <p>Im folgenden Beispiel wird eine Funktion erstellt, die zwei Zahlen vergleicht und die größere zurückgibt. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_sql_greater (float, float)
  returns float
stable
as $$
  select case when $1 &gt; $2 then $1
    else $2
  end
$$ language sql;</code></pre>
            <p>In der folgenden Abfrage wird die neue Funktion <code class="code">f_sql_greater</code> aufgerufen, um eine Abfrage über der Tabelle SALES auszuführen und entweder COMMISSION oder 20 Prozent von PRICEPAID zurückzugeben, je nachdem, welcher Wert größer ist.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select f_sql_greater (commission, pricepaid*0.20) from sales;</code></pre>
          
         
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_EXTERNAL_VIEW.html">CREATE EXTERNAL VIEW (Vorschau)</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_GROUP.html">CREATE GROUP</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>