<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tutorial: Verwenden von Geo-SQL-Funktionen mit Amazon Redshift - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="spatial-tutorial" /><meta name="default_state" content="spatial-tutorial" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/spatial-tutorial.html" /><meta name="description" content="In diesem Tutorial erfahren Sie, wie Geo-SQL-Funktionen mit Amazon Redshift verwendet werden." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Datenbankentwicklerhandbuch" /><meta name="abstract" content="Erstellen und verwalten Sie ein Data Warehouse mit Amazon Redshift, einem vollständig verwalteten Petabyte-Data-Warehousing-Service auf Unternehmensniveau." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/spatial-tutorial.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/spatial-tutorial.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/spatial-tutorial.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/spatial-tutorial.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/spatial-tutorial.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/spatial-tutorial.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/spatial-tutorial.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/spatial-tutorial.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/spatial-tutorial.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/spatial-tutorial.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/spatial-tutorial.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/spatial-tutorial.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/spatial-tutorial.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/spatial-tutorial.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/spatial-tutorial.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/spatial-tutorial.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/spatial-tutorial.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/spatial-tutorial.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/spatial-tutorial.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/spatial-tutorial.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/spatial-tutorial.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/spatial-tutorial.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Datenbankentwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Datenbankentwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="Tutorial: Verwenden von Geo-SQL-Funktionen mit Amazon Redshift" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Tutorial: Verwenden von Geo-SQL-Funktionen mit Amazon Redshift - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#spatial-tutorial" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/spatial-tutorial.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/spatial-tutorial.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/spatial-tutorial.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Cluster,Data Warehouse,Developer,Musterdaten,Datenbank,Database Developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Datenbankentwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Abfrage von Geodaten in Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/geospatial-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Tutorial: Verwenden von Geo-SQL-Funktionen mit Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/geospatial-overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#spatial-tutorial" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Datenbankentwicklerhandbuch</a></div><div id="page-toc-src"><a href="#spatial-tutorial-prerequisites">Voraussetzungen</a><a href="#spatial-tutorial-test-data">Schritt 1: Erstellen von Tabellen und Laden von Testdaten</a><a href="#spatial-tutorial-query">Schritt 2: Abfrage von Geodaten</a><a href="#spatial-tutorial-clean-up">Schritt 3: Bereinigen Ihrer Ressourcen</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="spatial-tutorial">Tutorial: Verwenden von Geo-SQL-Funktionen mit Amazon Redshift</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>In diesem Tutorial wird gezeigt, wie Sie einige der Geo-SQL-Funktionen mit Amazon Redshift verwenden. </p><p>Dazu fragen Sie zwei Tabellen mit Geo-SQL-Funktionen ab. Das Tutorial verwendet Daten aus öffentlichen Datensätzen, die Standortdaten von Mietunterkünften mit Postleitzahlen in Berlin, Deutschland, korrelieren. </p><div class="highlights" id="inline-topiclist"><h6>Themen</h6><ul><li><a href="#spatial-tutorial-prerequisites">Voraussetzungen</a></li><li><a href="#spatial-tutorial-test-data">Schritt 1: Erstellen von Tabellen und Laden von Testdaten</a></li><li><a href="#spatial-tutorial-query">Schritt 2: Abfrage von Geodaten</a></li><li><a href="#spatial-tutorial-clean-up">Schritt 3: Bereinigen Ihrer Ressourcen</a></li></ul></div>
        <h2 id="spatial-tutorial-prerequisites">Voraussetzungen</h2>
           
        <p>Für dieses Tutorial benötigen Sie folgende Ressourcen:</p>
           
        <div class="itemizedlist">
             
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                        <p>Ein vorhandener Amazon-Redshift-Cluster und -Datenbank, auf die Sie zugreifen und die Sie aktualisieren können. Im vorhandenen Cluster erstellen Sie Tabellen, laden Beispieldaten und führen SQL-Abfragen aus, um Geofunktionen zu demonstrieren. Ihr Cluster sollte mindestens zwei Knoten enthalten. Um zu erfahren, wie Sie einen Cluster erstellen, befolgen Sie die Schritte im Handbuch <a href="https://docs.aws.amazon.com/redshift/latest/gsg/">Erste Schritte in Amazon Redshift</a>. </p>
            </li><li class="listitem">
                        <p>Um den Abfrage-Editor von Amazon Redshift zu verwenden, stellen Sie sicher, dass sich Ihr Cluster in einer AWS-Region befindet, die den Abfrageeditor unterstützt. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/query-editor.html">Abfragen einer Datenbank mit dem Abfrage-Editor</a> im <em>Amazon-Redshift-Verwaltungshandbuch</em>. </p>
            </li><li class="listitem">
                        <p>AWS-Anmeldeinformationen für Ihren Amazon-Redshift-Cluster, mit denen Testdaten aus Amazon S3 geladen werden können. Informationen zum Zugriff auf andere AWS-Services wie Amazon S3 finden Sie unter <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html">Amazon Redshift autorisieren, um auf AWS-Services zuzugreifen</a>.</p>
            </li><li class="listitem">
                        <p>Die AWS Identity and Access Management (IAM)-Rolle namens <code class="code">mySpatialDemoRole</code>, die über die verwaltete Richtlinie <code class="code">AmazonS3ReadOnlyAccess</code> verfügt, um Amazon-S3-Daten lesen zu können. Informationen zum Erstellen einer Rolle mit der Berechtigung zum Laden von Daten aus einem Amazon-S3-Bucket finden Sie unter <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/copy-unload-iam-role.html">Authorizing COPY, UNLOAD, and CREATE EXTERNAL SCHEMA operations using IAM roles</a> (Autorisieren der Befehle COPY, UNLOAD und CREATE EXTERNAL SCHEMA mithilfe von IAM-Rollen) im <em>Amazon-Redshift-Verwaltungshandbuch</em>. </p>
            </li><li class="listitem"><p>Nachdem Sie die IAM-Rolle <code class="code">mySpatialDemoRole</code> erstellt haben, benötigt diese Rolle eine Zuordnung zu Ihrem Amazon-Redshift-Cluster. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/copy-unload-iam-role.html">Autorisierung der Operationen COPY, UNLOAD und CREATE EXTERNAL SCHEMA mit IAM-Rollen</a> im <em>Amazon-Redshift-Verwaltungshandbuch</em>. </p>    
            </li></ul></div>   

        
        <h2 id="spatial-tutorial-test-data">Schritt 1: Erstellen von Tabellen und Laden von Testdaten</h2>
            
            
             
            <p>Die in diesem Tutorial verwendeten Quelldaten befinden sich in Dateien mit den Namen <code>accommodations.csv</code> und <code>zipcodes.csv</code>. </p>
        <p>Die <code>accommodations.csv</code>-Datei ist Open-Source-Daten von insideairbnb.com. Die <code>zipcodes.csv</code>-Datei enthält Postleitzahlen, die Open-Source-Daten des nationalen Statistik-Instituts Berlin-Brandenburg in Deutschland (Amt für Statistik Berlin-Brandenburg) sind. Beide Datenquellen werden unter einer Creative-Commons-Lizenz bereitgestellt. Die Daten sind auf die Region Berlin, Deutschland, beschränkt. Diese Dateien befinden sich in einem öffentlichen Amazon-S3-Bucket, der mit diesem Tutorial verwendet werden kann. </p>
            
            <p>Optional können Sie die Quelldaten von den folgenden Amazon-S3-Links herunterladen:</p> 
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><a href="https://s3.amazonaws.com/redshift-downloads/spatial-data/accommodations.csv" rel="noopener noreferrer" target="_blank"><span>Quelldaten für die <code class="code">accommodations</code>-Tabelle</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p></li><li class="listitem"><p><a href="https://s3.amazonaws.com/redshift-downloads/spatial-data/zipcode.csv" rel="noopener noreferrer" target="_blank"><span>Quelldaten für die <code class="code">zipcode</code>-Tabelle</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p></li></ul></div>
            
           <p>Gehen Sie wie folgt vor, um Tabellen zu erstellen und Testdaten zu laden. </p>

            <div class="procedure"><h6>So erstellen Sie Tabellen und laden Testdaten:</h6><ol><li>
                    <p>Öffnen Sie den Abfrage-Editor von Amazon Redshift. Weitere Informationen zur Arbeit mit dem Abfrage-Editor finden Sie unter <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/query-editor.html">Querying a database using the query editor</a> (Abfragen für Datenbanken mit dem Abfrage-Editor) im <em>Amazon-Redshift-Verwaltungshandbuch</em>. </p> 
                </li><li>
                    <p>Löschen Sie alle Tabellen, die in diesem Tutorial verwendet werden, wenn sie bereits in Ihrer Datenbank vorhanden sind. Weitere Informationen finden Sie unter <a href="#spatial-tutorial-clean-up">Schritt 3: Bereinigen Ihrer Ressourcen</a>. </p>
                </li><li>
                    <p>Erstellen der <code class="code">accommodations</code>-Tabelle, um die geografische Lage der einzelnen Unterkünfte (Längen- und Breitengrad), den Namen der Auflistung und andere Geschäftsdaten zu speichern. </p>
                <p>Dieses Tutorial erforscht Zimmervermietungen in Berlin, Deutschland. Die Spalte <code class="code">shape</code> speichert geografische Punkte des Standortes von Unterkünften. Die anderen Spalten enthalten Informationen über die Vermietung. </p>
                    <p>Führen Sie zum Erstellen der Tabelle <code class="code">accommodations</code> die folgende SQL-Anweisung im Abfrage-Editor von Amazon Redshift aus. </p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE TABLE public.accommodations (
  id INTEGER PRIMARY KEY,
  shape GEOMETRY,
  name VARCHAR(100),
  host_name VARCHAR(100),
  neighbourhood_group VARCHAR(100),
  neighbourhood VARCHAR(100),
  room_type VARCHAR(100),
  price SMALLINT,
  minimum_nights SMALLINT,
  number_of_reviews SMALLINT,
  last_review DATE,
  reviews_per_month NUMERIC(8,2),
  calculated_host_listings_count SMALLINT, 
  availability_365 SMALLINT
);</code></pre>
               </li><li>
                    <p>Erstellen Sie die Tabelle <code class="code">zipcode</code> im Abfrage-Editor, um Postleitzahlen von Berlin zu speichern. </p>
                <p>Eine <em>Postleitzahl</em> wird in der Spalte <code class="code">wkb_geometry</code> als Polygon definiert. In den restlichen Spalten werden zusätzliche Geo-Metadaten zur Postleitzahl beschrieben. </p>
                <p>Führen Sie zum Erstellen der Tabelle <code class="code">zipcode</code> die folgende SQL-Anweisung im Abfrage-Editor von Amazon Redshift aus. </p>
                    
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE TABLE public.zipcode (
  ogc_field INTEGER PRIMARY KEY NOT NULL,
  wkb_geometry GEOMETRY,
  gml_id VARCHAR(256),
  spatial_name VARCHAR(256),
  spatial_alias VARCHAR(256),
  spatial_type VARCHAR(256)
 );</code></pre>
                    
                </li><li>
                    <p>Laden Sie die Tabellen mit Beispieldaten. </p>
                <p>Die Beispieldaten dafür befinden sich in einem Amazon-S3-Bucket, der den Lesezugriff für alle authentifizierten AWS-Benutzer gewährt. Stellen Sie sicher, dass Sie gültige AWS-Anmeldeinformationen angeben, die den Zugriff auf Amazon S3 gewähren. </p>
                <p>Führen Sie die folgenden COPY-Befehle aus, um Testdaten in Ihre Tabellen zu laden. Ersetzen Sie <code class="replaceable"><code class="code">account-number</code></code> mit Ihrer AWS-Kontonummer. Das Segment der Anmeldedatenzeichenfolge, das in einfachen Anführungszeichen eingeschlossen ist, darf keine Leerzeichen oder Zeilenumbrüche enthalten. </p>
                    
                    
  
                                                         
                            
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">COPY public.accommodations 
FROM 's3://redshift-downloads/spatial-data/accommodations.csv' 
DELIMITER ';' 
IGNOREHEADER 1 REGION 'us-east-1'
CREDENTIALS 'aws_iam_role=arn:aws:iam::<code class="replaceable">account-number</code>:role/mySpatialDemoRole';
</code></pre>
                            
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">COPY public.zipcode 
FROM 's3://redshift-downloads/spatial-data/zipcode.csv' 
DELIMITER ';' 
IGNOREHEADER 1 REGION 'us-east-1'
CREDENTIALS 'aws_iam_role=arn:aws:iam::<code class="replaceable">account-number</code>:role/mySpatialDemoRole';
</code></pre>  
 
 
                            
                            
                             
                            
                </li><li>
                    <p>Um zu prüfen, ob jede Tabelle korrekt geladen wurde, führen Sie die folgenden Befehle aus. </p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">select count(*) from accommodations;</code></pre>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">select count(*) from zipcode;</code></pre>
                    <p>Die folgende Ergebnistabelle zeigt die Anzahl der Zeilen in jeder Tabelle mit Testdaten.</p>
                    <div class="table-container"><div class="table-contents"><table id="w319aac25c67c11c13c12b9"><thead>
                                <tr>
                                    <th>Tabellenname</th>
                                    <th>Rows</th>
                                </tr>
                            </thead>
                                <tr>
                                    <td tabindex="-1">Unterkünfte</td>
                                    <td tabindex="-1">22.248</td>
                                </tr>
                                <tr>
                                    <td tabindex="-1">Postleitzahl</td>
                                    <td tabindex="-1">190</td>
                                </tr>
                            </table></div></div>
                </li></ol></div>                       
     
        <h2 id="spatial-tutorial-query">Schritt 2: Abfrage von Geodaten</h2>

        <p>Nachdem Ihre Tabellen erstellt und geladen wurden, können Sie sie mithilfe von SQL-SELECT-Anweisungen abfragen. Die folgenden Abfragen veranschaulichen einige der Informationen, die Sie abrufen können. Sie können viele andere Abfragen schreiben, die räumliche Geofunktionen verwenden, um Ihre Anforderungen zu erfüllen. </p>
        <div class="procedure"><h6>So fragen Sie Geodaten ab:</h6><ol><li>
                <p>Abfrage, um die Gesamtzahl der Angebote zu erhalten, die in der Tabelle <code class="code">accommodations</code> (siehe unten) gespeichert werden. Das Georeferenzsystem ist das World Geodetic System (WGS) 84, das den eindeutigen Georeferenzbezeichner 4326 aufweist.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT count(*) FROM public.accommodations WHERE ST_SRID(shape) = 4326;</code></pre>
                <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 count
-------
 22248</code></pre>                
            </li><li>
                <p>Rufen Sie die Geometrieobjekte im WKT-Format (bekannter Text) mit einigen zusätzlichen Attributen ab. Darüber hinaus können Sie überprüfen, ob diese Postleitzahlendaten auch in World Geodetic System (WGS) 84 gespeichert sind, das die Georeferenz-ID (SRID) 4326 verwendet. Geodaten müssen im selben Georeferenzsystem gespeichert werden, um interoperabel zu sein. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT ogc_field, spatial_name, spatial_type, ST_SRID(wkb_geometry), ST_AsText(wkb_geometry) 
FROM public.zipcode 
ORDER BY spatial_name;</code></pre>
                <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
ogc_field  spatial_name  spatial_type  st_srid  st_astext
---------------------------------------------------------------
0           10115        Polygon        4326     POLYGON((...))
4           10117        Polygon        4326     POLYGON((...))
8           10119        Polygon        4326     POLYGON((...))
...
(190 rows returned)</code></pre>
                
            </li><li>
                <p>Wählen Sie das Polygon von Berlin Mitte (10117), einem Berliner Bezirk, im GeoJSON-Format, seine Dimension und die Anzahl der Punkte in diesem Polygon aus. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT ogc_field, spatial_name, ST_AsGeoJSON(wkb_geometry), ST_Dimension(wkb_geometry), ST_NPoints(wkb_geometry)
FROM public.zipcode 
WHERE spatial_name='10117';</code></pre>
                <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
ogc_field  spatial_name  spatial_type                                   st_dimension  st_npoint
-----------------------------------------------------------------------------------------------
4           10117         <span>{</span>"type":"Polygon", "coordinates":[[[...]]]}    2             331
</code></pre>
                
            </li><li>
                <p>Führen Sie den folgenden SQL-Befehl aus, um anzuzeigen, wie viele Unterkünfte sich im Umkreis von 500 Metern vom Brandenburger Tor befinden. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT count(*) 
FROM public.accommodations 
WHERE ST_DistanceSphere(shape, ST_GeomFromText('POINT(13.377704 52.516431)', 4326)) &lt; 500;</code></pre>
                <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
count
------
  29
</code></pre>
                             
            </li><li>
                <p>Holen Sie sich den ungefähren Standort des Brandenburger Tores aus Daten, die mit den Unterkünften gespeichert sind, die als in der Nähe aufgeführt sind, indem Sie die folgende Abfrage ausführen.</p>
                <p>Diese Abfrage erfordert eine untergeordnete Auswahl. Es führt zu einer anderen Zählung, da der angeforderte Standort nicht mit der vorherigen Abfrage identisch ist, da er näher an den Unterkünften liegt. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">WITH poi(loc) as (
  SELECT st_astext(shape) FROM accommodations WHERE name LIKE '%brandenburg gate%'
)
SELECT count(*) 
FROM accommodations a, poi p
WHERE ST_DistanceSphere(a.shape, ST_GeomFromText(p.loc, 4326)) &lt; 500;</code></pre>                
                <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
count
------
  60
</code></pre>  
                
              
            </li><li>
                <p>Führen Sie die folgende Abfrage aus, um die Details aller Unterkünfte rund um das Brandenburger Tor anzuzeigen, sortiert nach Preis in absteigender Reihenfolge. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT name, price, ST_AsText(shape) 
FROM public.accommodations
WHERE ST_DistanceSphere(shape, ST_GeomFromText('POINT(13.377704 52.516431)', 4326)) &lt; 500
ORDER BY price DESC;</code></pre>
                <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
name                                                   price  st_astext
-------------------------------------------------------------------------------------------------------
DUPLEX APARTMENT/PENTHOUSE in 5* LOCATION! 7583        300    POINT(13.3826510209548 52.5159819722552)
DUPLEX-PENTHOUSE IN FIRST LOCATION! 7582               300    POINT(13.3799997083855 52.5135918444834)
... 
(29 rows returned)
</code></pre> 
                
                             
            </li><li>
                <p>Führen Sie die folgende Abfrage aus, um die teuerste Unterkunft mit ihrer Postleitzahl abzurufen. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT 
  a.price, a.name, ST_AsText(a.shape), 
  z.spatial_name, ST_AsText(z.wkb_geometry) 
FROM accommodations a, zipcode z 
WHERE price = 9000 AND ST_Within(a.shape, z.wkb_geometry);</code></pre>
                <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
price   name                                 st_astext                                  spatial_name      st_astext
-------------------------------------------------------------------------------------------------------------------------------------------------
9000    Ueber den Dächern Berlins Zentrum    POINT(13.334436985013 52.4979779501538)    10777             POLYGON((13.3318284987227 52.4956021172799,...
</code></pre>               
            </li><li>
                <p>Berechnen Sie den maximalen, minimalen oder mittleren Preis von Unterkünften mithilfe einer untergeordneten Abfrage. </p>
                <p>Die folgende Abfrage führt den mittleren Preis der Unterkünfte nach Postleitzahl auf. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT 
  a.price, a.name, ST_AsText(a.shape), 
  z.spatial_name, ST_AsText(z.wkb_geometry) 
FROM accommodations a, zipcode z 
WHERE 
  ST_Within(a.shape, z.wkb_geometry) AND 
  price = (SELECT median(price) FROM accommodations)
ORDER BY a.price;</code></pre>
                <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
price name                            st_astext                                   spatial_name   st_astext
---------------------------------------------------------------------------------------------------------------------------------------------                    
45    "Cozy room Berlin-Mitte"        POINT(13.3864349535358 52.5292016386514)    10115          POLYGON((13.3658598465795 52.535659581048,...
...
(723 rows returned)
</code></pre> 
                
            </li><li>
                <p>Führen Sie die folgende Abfrage aus, um die Anzahl der in Berlin aufgeführten Unterkünfte abzurufen. Um die Hotspots zu finden, werden diese nach Postleitzahl gruppiert und nach der Menge des Angebots sortiert. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT z.spatial_name as zip, count(*) as numAccommodations 
FROM public.accommodations a, public.zipcode z
WHERE ST_Within(a.shape, z.wkb_geometry)
GROUP BY zip 
ORDER BY numAccommodations DESC;</code></pre>
                <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
zip  	numaccommodations
----------------------------
10245	872
10247	832
10437	733
10115	664
...
(187 rows returned)
</code></pre>
            </li></ol></div>




     
           <h2 id="spatial-tutorial-clean-up">Schritt 3: Bereinigen Ihrer Ressourcen</h2>
           
           
           <p>Solange Ihr Cluster ausgeführt wird, fallen Gebühren dafür an. Nachdem Sie dieses Tutorial abgeschlossen haben, können Sie Ihren Beispiel-Cluster löschen. </p>
           <p>Wenn Sie den Cluster behalten möchten, den von den Testdatentabellen beanspruchten Speicherplatz jedoch zurückgewinnen möchten, führen Sie die folgenden Befehle zum Löschen der Tabellen aus. </p>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">drop table public.accommodations cascade;</code></pre>
           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">drop table public.zipcode cascade;</code></pre>
           
       <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./geospatial-overview.html">Abfrage von Geodaten</div><div id="next" class="next-link" accesskey="n" href="./spatial-copy-shapefile.html">Laden eines Shapefile</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/spatial-tutorial.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/spatial-tutorial.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>