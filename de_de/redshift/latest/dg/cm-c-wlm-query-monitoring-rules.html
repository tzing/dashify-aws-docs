<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>WLM-Abfrageüberwachungsregeln - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="cm-c-wlm-query-monitoring-rules" /><meta name="default_state" content="cm-c-wlm-query-monitoring-rules" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" /><meta name="description" content="In Amazon Redshift Workload Management (WLM) definieren Abfrageüberwachungsregeln auf Metriken basierende Leistungsgrenzen für WLM-Warteschlangen und geben an, welche Aktion durchgeführt werden soll, wenn eine Abfrage diese Grenzwerte überschreitet. So können Sie etwa für eine für kurze Abfragen dedizierte Warteschlange eine Regel erstellen, die Abfragen abbricht, die länger als 60 Sekunden ausgeführt werden. Zur Nachverfolgung schlecht gestalteter Abfragen können Sie eine weitere Regel verwenden, die Abfragen mit eingebetteten Schleifen protokolliert." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Datenbankentwicklerhandbuch" /><meta name="abstract" content="Erstellen und verwalten Sie ein Data Warehouse mit Amazon Redshift, einem vollständig verwalteten Petabyte-Data-Warehousing-Service auf Unternehmensniveau." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Datenbankentwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Datenbankentwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="WLM-Abfrageüberwachungsregeln" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>WLM-Abfrageüberwachungsregeln - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#cm-c-wlm-query-monitoring-rules" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Cluster,Data Warehouse,Developer,Musterdaten,Datenbank,Database Developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Datenbankentwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Implementierung von Workload Management",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-implementing-workload-management.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "WLM-Abfrageüberwachungsregeln",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-implementing-workload-management.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#cm-c-wlm-query-monitoring-rules" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Datenbankentwicklerhandbuch</a></div><div id="page-toc-src"><a href="#cm-c-wlm-defining-query-monitoring-rules">Definition einer Abfrageüberwachungsregel</a><a href="#cm-c-wlm-query-monitoring-metrics">Abfrageüberwachungsmetriken für Amazon Redshift wurden bereitgestellt</a><a href="#cm-c-wlm-query-monitoring-metrics-serverless">Abfrageüberwachungsmetriken für Amazon Redshift Serverless</a><a href="#cm-c-wlm-query-monitoring-templates">Vorlagen für Abfrageüberwachungsregeln</a><a href="#cm-c-wlm-qmr-tables-and-views">Systemtabellen und Ansichten für Abfrageüberwachungsregeln</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="cm-c-wlm-query-monitoring-rules">WLM-Abfrageüberwachungsregeln</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>In Amazon Redshift Workload Management (WLM) definieren Abfrageüberwachungsregeln auf Metriken basierende Leistungsgrenzen für WLM-Warteschlangen und geben an, welche Aktion durchgeführt werden soll, wenn eine Abfrage diese Grenzwerte überschreitet. So können Sie etwa für eine für kurze Abfragen dedizierte Warteschlange eine Regel erstellen, die Abfragen abbricht, die länger als 60 Sekunden ausgeführt werden. Zur Nachverfolgung schlecht gestalteter Abfragen können Sie eine weitere Regel verwenden, die Abfragen mit eingebetteten Schleifen protokolliert. </p><p>Sie definieren die Abfrageüberwachungsregeln im Rahmen Ihrer Workload Management (WLM)-Konfiguration. Sie können für jede Warteschlange bis zu 25 Regeln definieren. Dabei liegt die Grenze für alle Warteschlangen insgesamt bei 25 Regeln. Jede Regel enthält bis zu drei Bedingungen (oder Prädikate) sowie eine Aktion. Ein <em>Prädikat</em> besteht aus einer Metrik, einer Vergleichsbedingung (=, &lt;, oder &gt;) und einem Wert. Wenn alle Prädikate für eine Regel erfüllt sind, wird die Aktion der Regel ausgelöst. Mögliche Regelaktionen sind log, hop und abort, wie nachfolgend erläutert. </p><p>Die Regeln in einer Warteschlange gelten nur für Abfragen, die in dieser Warteschlange ausgeführt werden. Eine Regel ist unabhängig von anderen Regeln. </p><p>WLM evaluiert die Metriken alle 10 Sekunden. Wenn mehr als eine Regel im selben Zeitraum ausgelöst wird, initiiert WLM die schwerwiegendste Aktion – abort, dann hop, dann log. Wenn die Aktion hop oder abort ist, wird die Aktion protokolliert, und die Abfrage wird aus der Warteschlange entfernt. Wenn die Aktion log ist, wird die Abfrage weiterhin in der Warteschlange ausgeführt. WLM initiiert nur eine log-Aktion pro Abfrage und Regel. Wenn die Warteschlange weitere Regeln enthält, bleiben diese wirksam. Wenn die Aktion hop ist und die Abfrage zu einer anderen Warteschlange geleitet wird, gelten die Regeln für die neue Warteschlange. Weitere Informationen zur Abfrageüberwachung und zur Nachverfolgung von Aktionen, die bei bestimmten Abfragen ergriffen wurden, finden Sie in der Beispielsammlung unter <a href="./wlm-short-query-acceleration.html">Arbeiten mit Short Query Acceleration</a>.</p><p>Wenn alle Prädikate einer Regel erfüllt sind, schreibt WLM eine Zeile in die Systemtabelle <a href="./r_STL_WLM_RULE_ACTION.html">STL_WLM_RULE_ACTION</a>. Zusätzlich zeichnet Amazon Redshift Abfragemetriken für aktuell ausgeführte Abfragen in  auf <a href="./r_STV_QUERY_METRICS.html">STV_QUERY_METRICS</a>. Metriken für abgeschlossene Abfragen werden in  gespeichert <a href="./r_STL_QUERY_METRICS.html">STL_QUERY_METRICS</a>. </p>
         <h2 id="cm-c-wlm-defining-query-monitoring-rules">Definition einer Abfrageüberwachungsregel</h2>


         <p>Sie erstellen Abfrageüberwachungsregeln als Teil Ihrer WLM-Konfiguration, die Sie im Rahmen der Parametergruppendefinition für Ihren Cluster definieren.</p>



         <p>Sie können Regeln mit der AWS Management Console oder auf programmatischem Wege mit JSON erstellen. </p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Wenn Sie Regeln auf programmatischen Wege erstellen, empfehlen wir nachdrücklich, die Konsole zu verwenden, um die JSON-Elemente zu erstellen, die Sie in der Parametergruppendefinition verwenden. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-parameter-groups-console.html#parameter-group-modify-qmr-console">Erstellen oder Modifizieren einer Abfrageüberwachungsregel mit der Konsole</a> und <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/working-with-parameter-groups.html#configure-parameters-using-the-cli">Konfiguration von Parameterwerten mit der AWS CLI</a> im <em>Amazon-Redshift-Verwaltungshandbuch</em>. </p></div></div>

         <p>Zur Definition einer Abfrageüberwachungsregel geben Sie die folgenden Elemente an:</p>
         <div class="itemizedlist">
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Einen Regelnamen – Regelnamen müssen innerhalb der WLM-Konfiguration eindeutig sein. Regelnamen können aus bis zu 32 alphanumerischen Zeichen oder Unterstrichen bestehen und dürfen keine Leerzeichen oder Anführungszeichen enthalten. Sie können bis zu 25 Regeln pro Warteschlange und insgesamt 25 Regeln für alle Warteschlangen festlegen.</p>
            </li><li class="listitem">
               <p>Ein oder mehrere Prädikat(e) – Sie können bis zu drei Prädikate pro Regel angeben. Wenn alle Prädikate für eine Regel erfüllt sind, wird die Aktion der Regel ausgelöst. Ein Prädikat wird durch einen Metriknamen, einen Operator ( =, &lt;, or &gt; ) und einen Wert definiert. Ein Beispiel ist <code class="code">query_cpu_time &gt; 100000</code>. Für eine Liste der Metriken und Beispiele für Werte bei unterschiedlichen Metriken vgl. <a href="#cm-c-wlm-query-monitoring-metrics">Abfrageüberwachungsmetriken für Amazon Redshift wurden bereitgestellt</a> unten in diesem Abschnitt. </p>
            </li><li class="listitem">
               <p>Eine Aktion – Wenn mehr als eine Regel ausgelöst wird, wählt WLM die Regel mit der schwerwiegendsten Aktion. Mögliche Aktionen, aufsteigend nach Schweregrad, sind:</p>
               <div class="itemizedlist">
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>Log – Aufzeichnung von Informationen zu der Abfrage in der Systemtabelle STL_WLM_RULE_ACTION. Verwenden Sie diese Aktion, wenn Sie lediglich einen Protokolleintrag schreiben möchten. WLM erstellt höchstens einen Protokolleintrag pro Abfrage und Regel. Nach einer Log-Aktion bleiben andere Regeln wirksam, und WLM überwacht die Abfrage weiter. </p>
                  </li><li class="listitem">
                     <p>Hop (Nur bei manuellem WLM verfügbar) – Protokollieren der Aktion und Hopping der Abfrage zur nächsten übereinstimmenden Warteschlange. Wenn keine andere passende Warteschlange vorhanden ist, wird die Abfrage abgebrochen. QMR führt Hopping nur für <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_AS.html">CREATE TABLE AS</a> (CTAS)-Anweisungen und schreibgeschützte Abfragen aus, beispielsweise SELECT-Anweisungen. Weitere Informationen finden Sie unter <a href="./wlm-queue-hopping.html">WLM-Abfragewarteschlangen-Hopping</a>. </p>
                  </li><li class="listitem">
                     <p>Abort – Protokollieren der Aktion und Abbrechen der Abfrage. QMR stoppt keine COPY-Anweisungen und Wartungsoperationen wie ANALYZE und VACUUM. </p>
                  </li><li class="listitem">
                     <p>Ändern der Priorität (nur bei automatischem WLM verfügbar) – Ändern der Priorität einer Warteschlange. </p>
                  </li></ul></div>
            </li></ul></div>

         
         <p>Zur Begrenzung der Laufzeit von Abfragen empfehlen wir das Erstellen einer Abfrageüberwachungsregel anstelle eines WLM-Timeouts. Sie können beispielsweise <code class="code">max_execution_time</code> auf 50.000 Millisekunden festlegen, wie im folgenden JSON-Snippet gezeigt.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"max_execution_time": 50000</code></pre>
         <p>Sie sollten jedoch stattdessen besser eine gleichwertige Abfrageüberwachungsregel definieren, die <code class="code">query_execution_time</code> auf 50 Sekunden festlegt wie im folgenden JSON-Snippet gezeigt.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"rules": 
[
    <span>{</span>
        "rule_name": "rule_query_execution",
        "predicate": [
            <span>{</span>
                "metric_name": "query_execution_time",
                "operator": "&gt;",
                "value": 50
            }
        ],
        "action": "abort"
    }            
]</code></pre>
         
         <p>Informationen zu den Schritten zum Erstellen oder Ändern einer Abfrageüberwachungsregel finden Sie unter <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-parameter-groups-console.html#parameter-group-modify-qmr-console">Erstellen oder Modifizieren einer Abfrageüberwachungsregel mit der Konsole</a> und <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/workload-mgmt-config.html#wlm-json-config-properties">Eigenschaften im Parameter wlm_json_configuration</a> im <em>Amazon-Redshift-Verwaltungshandbuch</em>.</p>
         

         <p>Weitere Informationen zu Abfrageüberwachungsregeln finden Sie in den folgenden Themen: </p>
         <div class="itemizedlist">
             

             

             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>
                  <a href="#cm-c-wlm-query-monitoring-metrics">Abfrageüberwachungsmetriken für Amazon Redshift wurden bereitgestellt</a>
               </p>
            </li><li class="listitem">
               <p>
                  <a href="#cm-c-wlm-query-monitoring-templates">Vorlagen für Abfrageüberwachungsregeln</a>
               </p>
            </li><li class="listitem">
               <p> <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-parameter-groups-console.html#parameter-group-modify-qmr-console">Erstellen einer Regel mit der Konsole</a> </p>
            </li><li class="listitem">
               <p> <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/workload-mgmt-config.html">Workload-Management-Konfiguration</a> </p>
            </li><li class="listitem">
               <p>
                  <a href="#cm-c-wlm-qmr-tables-and-views">Systemtabellen und Ansichten für Abfrageüberwachungsregeln</a>
               </p>
            </li></ul></div>
       
         <h2 id="cm-c-wlm-query-monitoring-metrics">Abfrageüberwachungsmetriken für Amazon Redshift wurden bereitgestellt</h2>


         <p>Die folgende Tabelle beschreibt die Metriken für Abfrageüberwachungsregeln. (Diese Metriken unterscheiden sich von den in den Systemtabellen <a href="./r_STV_QUERY_METRICS.html">STV_QUERY_METRICS</a> und <a href="./r_STL_QUERY_METRICS.html">STL_QUERY_METRICS</a> gespeicherten Metriken.) </p>
         <p>Für eine Metrik wird der Leistungsschwellenwert auf Abfrage- oder auf Segmentebene verfolgt. Für weitere Informationen zu Segmenten und Schritten vgl. <a href="./c-query-planning.html">Workflow der Abfrageplanung und -ausführung</a>.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Der Parameter <a href="./cm-c-defining-query-queues.html#wlm-timeout">WLM-Timeout</a> unterscheidet sich von Abfrageüberwachungsregeln.</p></div></div>

         <div class="table-container"><div class="table-contents"><table id="w319aac43c57c15b9"><thead>
                  <tr>
                     <th>Metrik</th>
                     <th>Name</th>
                     <th>Beschreibung</th>

                  </tr>
               </thead>
                  <tr>
                     <td tabindex="-1">Abfrage-CPU-Zeit</td>
                     <td tabindex="-1">
                        <code class="code">query_cpu_time</code>
                     </td>
                     <td tabindex="-1">Von der Abfrage verwendete CPU-Zeit, in Sekunden. <code class="code">CPU
                           time</code> unterscheidet sich von <code class="code">Query execution time</code>. <p>Gültige Werte liegen zwischen 0 und 999 999. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Gelesene Blöcke</td>
                     <td tabindex="-1">
                        <code class="code">query_blocks_read</code>
                     </td>
                     <td tabindex="-1">Anzahl der von der Abfrage gelesenen 1 MB-Blöcke.<p>Gültige Werte liegen zwischen 0 und 1 048 575. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Anzahl der Scan-Zeilen</td>
                     <td tabindex="-1">
                        <code class="code">scan_row_count</code>
                     </td>
                     <td tabindex="-1">
                        <p>Die Anzahl der Zeilen in einem Scan-Schritt. Die Anzahl der Zeilen ist die Gesamtzahl der Zeilen, die nach der Filterung der zur Löschung markierten Zeilen (Geisterzeilen), jedoch vor der Anwendung benutzerdefinierter Abfragefilter ausgegeben wurden.</p>
                        <p>Gültige Werte liegen zwischen 0 und 999 999 999 999 999. </p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Abfrageausführungszeit</td>
                     <td tabindex="-1">
                        <code class="code">query_execution_time</code>
                     </td>
                     <td tabindex="-1">Verstrichene Ausführungszeit für eine Abfrage, in Sekunden. Die Ausführungszeit enthält nicht die in einer Warteschlange verbrachte Zeit.<p>Gültige Werte liegen zwischen 0 und 86 399.</p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Zeit in Abfragewarteschlange</td>
                     <td tabindex="-1">
                        <code class="code">query_queue_time</code>
                     </td>
                     <td tabindex="-1">Wartezeit in einer Warteschlange in Sekunden. <p>Gültige Werte liegen zwischen 0 und 86 399. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">CPU-Verwendung</td>
                     <td tabindex="-1">
                        <code class="code">query_cpu_usage_percent</code>
                     </td>
                     <td tabindex="-1">Prozentsatz der von der Abfrage verwendeten CPU-Kapazität.<p>Gültige Werte liegen zwischen 0 und 6 399. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Speicher zu Festplatte</td>
                     <td tabindex="-1">
                        <code class="code">query_temp_blocks_to_disk</code>
                     </td>
                     <td tabindex="-1">Der temporäre Festplattenspeicherplatz, der zum Schreiben von Zwischenergebnissen verwendet wird, in 1 MB-Blöcken.<p>Gültige Werte liegen zwischen 0 und 319 815 679. </p></td>  
                  </tr>
                  <tr>
                     <td tabindex="-1">CPU-Verzerrung</td>
                     <td tabindex="-1">
                        <code class="code">cpu_skew</code>
                     </td>
                     <td tabindex="-1">Das Verhältnis der maximalen CPU-Nutzung für einen Slice zur durchschnittlichen CPU-Nutzung für alle Slices. Diese Metrik wird auf Segmentebene definiert.<p>Gültige Werte liegen zwischen 0 und 99. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">I/O-Verzerrung</td>
                     <td tabindex="-1">
                        <code class="code">io_skew</code>
                     </td>
                     <td tabindex="-1">Das Verhältnis der maximalen Zahl der gelesenen Blöcke (I/O) für einen Slice zur durchschnittlichen Zahl der gelesenen Blöcke für alle Slices. Diese Metrik wird auf Segmentebene definiert.<p>Gültige Werte liegen zwischen 0 und 99. </p></td>
                  </tr>

                  <tr>
                     <td tabindex="-1">Verbundene Zeilen</td>
                     <td tabindex="-1">
                        <code class="code">join_row_count</code>
                     </td>
                     <td tabindex="-1">Die Anzahl der in einem Join-Schritt verarbeiteten Zeilen.<p>Gültige Werte liegen zwischen 0 und 999 999 999 999 999. </p></td>
                  </tr>

                  <tr>
                     <td tabindex="-1">Zahl der Zeilen mit eingebetteten Loop-Joins.</td>
                     <td tabindex="-1">
                        <code class="code">nested_loop_join_row_count</code>
                     </td>
                     <td tabindex="-1">Die Anzahl der Zeilen in einem eingebetteten Loop-Join.<p>Gültige Werte liegen zwischen 0 und 999 999 999 999 999. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Anzahl der Rückgabezeilen.</td>
                     <td tabindex="-1">
                        <code class="code">return_row_count</code>
                     </td>
                     <td tabindex="-1">Die Anzahl der von der Abfrage ausgegebenen Zeilen.<p> Gültige Werte liegen zwischen 0 und 999 999 999 999 999. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Segment-Ausführungszeit.</td>
                     <td tabindex="-1">
                        <code class="code">segment_execution_time</code>
                     </td>
                     <td tabindex="-1">Verstrichene Ausführungszeit für ein einzelnes Segment, in Sekunden. Nehmen Sie zur Vermeidung oder Reduzierung von Samplingfehlern <code class="code">segment_execution_time
                           &gt; 10</code> in Ihre Regeln auf.<p>Gültige Werte liegen zwischen 0 und 86 388.</p></td>
                  </tr>

                  <tr>
                     <td tabindex="-1">Anzahl der Spectrum-Scan-Zeilen</td>
                     <td tabindex="-1">
                        <code class="code">spectrum_scan_row_count</code>
                     </td>
                     <td tabindex="-1">Die Anzahl der Datenzeilen in Amazon S3, die von einer Amazon-Redshift-Spectrum-Abfrage gescannt wurden. <p>Gültige Werte liegen zwischen 0 und 999 999 999 999 999. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Spektrum-Scan-Größe.</td>
                     <td tabindex="-1">
                        <code class="code">spectrum_scan_size_mb</code>
                     </td>
                     <td tabindex="-1">Die Datengröße in Amazon S3, in MB, die von einer Amazon-Redshift-Spectrum-Abfrage gescannt wurde.<p>Gültige Werte liegen zwischen 0 und 999 999 999 999 999. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Abfragepriorität</td>
                     <td tabindex="-1">
                        <code class="code">query_priority</code>
                     </td>
                     <td tabindex="-1">Die Priorität der Abfrage. <p>Gültige Werte sind <code class="code">HIGHEST</code>, <code class="code">HIGH</code>, <code class="code">NORMAL</code>, <code class="code">LOW</code> und <code class="code">LOWEST</code>. Beim Vergleich von <code class="code">query_priority</code> mittels der Operatoren „größer als (&gt;)“ und „kleiner als (&lt;)“ ist <code class="code">HIGHEST</code> größer als <code class="code">HIGH</code>, <code class="code">HIGH</code> größer als <code class="code">NORMAL</code> usw. </p></td>
                  </tr>
               </table></div></div>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem"><p>Die Hop-Aktion wird mit dem Prädikat <code class="code">query_queue_time</code> nicht unterstützt. Das heißt, Regeln, die zum Durchführen von Hopping definiert werden, wenn ein <code class="code">query_queue_time</code>-Prädikat erfüllt wird, werden ignoriert. </p></li><li class="listitem">
            <p>Kurze Segmentausführungszeiten können bei einigen Metriken zu Samplingfehlern führen, etwa bei <code class="code">io_skew</code> und <code class="code">query_cpu_usage_percent</code>. Nehmen Sie zur Vermeidung oder Reduzierung von Samplingfehlern die Segmentausführungszeit in Ihre Regeln auf. Ein guter Ausgangspunkt ist <code class="code">segment_execution_time &gt; 10</code>.</p>
            </li></ul></div></div></div>
         <p>Die Ansicht <a href="./r_SVL_QUERY_METRICS.html">SVL_QUERY_METRICS</a> zeigt die Metriken für abgeschlossene Abfragen. Die Ansicht <a href="./r_SVL_QUERY_METRICS_SUMMARY.html">SVL_QUERY_METRICS_SUMMARY</a> zeigt die maximalen Werte der Metriken für abgeschlossene Abfragen. Verwenden Sie die Werte in diesen Ansichten als Hilfe zur Bestimmung der Schwellenwerte für die Definition von Abfrageüberwachungsregeln.</p>
       
         <h2 id="cm-c-wlm-query-monitoring-metrics-serverless">Abfrageüberwachungsmetriken für Amazon Redshift Serverless</h2>
         <p>Die folgende Tabelle beschreibt die Metriken, die in Abfrageüberwachungsregeln für Amazon Redshift Serverless verwendet werden. </p>
            
         
         <div class="table-container"><div class="table-contents"><table id="w319aac43c57c17b5"><thead>
                  <tr>
                     <th>Kennzahl</th>
                     <th>Name</th>
                     <th>Beschreibung</th>
                  </tr>
               </thead>
                  <tr>
                     <td tabindex="-1">Abfrage-CPU-Zeit</td>
                     <td tabindex="-1"><code class="code">max_query_cpu_time</code></td>
                     <td tabindex="-1">Von der Abfrage verwendete CPU-Zeit, in Sekunden. <code class="code">CPU time</code> unterscheidet sich von <code class="code">Query execution time</code>. <p>Gültige Werte liegen zwischen 0 und 999 999. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Gelesene Blöcke</td>
                     <td tabindex="-1">
                        <code class="code">max_query_blocks_read</code>
                     </td>
                     <td tabindex="-1">Anzahl der von der Abfrage gelesenen 1 MB-Blöcke.<p>Gültige Werte liegen zwischen 0 und 1 048 575. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Anzahl der Scan-Zeilen</td>
                     <td tabindex="-1">
                        <code class="code">max_scan_row_count</code>
                     </td>
                     <td tabindex="-1">
                        <p>Die Anzahl der Zeilen in einem Scan-Schritt. Die Anzahl der Zeilen ist die Gesamtzahl der Zeilen, die nach der Filterung der zur Löschung markierten Zeilen (Geisterzeilen), jedoch vor der Anwendung benutzerdefinierter Abfragefilter ausgegeben wurden.</p>
                        <p>Gültige Werte liegen zwischen 0 und 999 999 999 999 999. </p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Abfrageausführungszeit</td>
                     <td tabindex="-1">max_query_execution_time</td>
                     <td tabindex="-1">
                        <p>Verstrichene Ausführungszeit für eine Abfrage, in Sekunden. Die Ausführungszeit enthält nicht die in einer Warteschlange verbrachte Zeit. Wenn eine Abfrage die festgelegte Ausführungszeit überschreitet, stoppt Amazon Redshift Serverless die Abfrage.</p>
                        <p>Gültige Werte liegen zwischen 0 und 86 399. </p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Zeit in Abfragewarteschlange</td>
                     <td tabindex="-1"><code class="code">max_query_queue_time</code></td>
                     <td tabindex="-1">Wartezeit in einer Warteschlange in Sekunden. <p>Gültige Werte liegen zwischen 0 und 86 399. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">CPU-Verwendung</td>
                     <td tabindex="-1">
                        <code class="code">max_query_cpu_usage_percent</code>
                     </td>
                     <td tabindex="-1">Prozentsatz der von der Abfrage verwendeten CPU-Kapazität.<p>Gültige Werte liegen zwischen 0 und 6 399. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Speicher zu Festplatte</td>
                     <td tabindex="-1">
                        <code class="code">max_query_temp_blocks_to_disk</code>
                     </td>
                     <td tabindex="-1">Der temporäre Festplattenspeicherplatz, der zum Schreiben von Zwischenergebnissen verwendet wird, in 1 MB-Blöcken.<p>Gültige Werte liegen zwischen 0 und 319 815 679. </p></td>  
                  </tr>
                  <tr>
                     <td tabindex="-1">Verbundene Zeilen</td>
                     <td tabindex="-1">
                        <code class="code">max_join_row_count</code>
                     </td>
                     <td tabindex="-1">Die Anzahl der in einem Join-Schritt verarbeiteten Zeilen.<p>Gültige Werte liegen zwischen 0 und 999 999 999 999 999. </p></td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Zahl der Zeilen mit eingebetteten Loop-Joins.</td>
                     <td tabindex="-1">
                        <code class="code">max_nested_loop_join_row_count</code>
                     </td>
                     <td tabindex="-1">Die Anzahl der Zeilen in einem eingebetteten Loop-Join.<p>Gültige Werte liegen zwischen 0 und 999 999 999 999 999. </p></td>
                  </tr>
               </table></div></div>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem"><p>Die Hop-Aktion wird mit dem Prädikat <code class="code">max_query_queue_time</code> nicht unterstützt. Das heißt, Regeln, die zum Durchführen von Hopping definiert werden, wenn ein <code class="code">max_query_queue_time</code>-Prädikat erfüllt wird, werden ignoriert. </p></li><li class="listitem">
                  <p>Kurze Segmentausführungszeiten können bei einigen Metriken zu Samplingfehlern führen, etwa bei <code class="code">max_io_skew</code> und <code class="code">max_query_cpu_usage_percent</code>.</p>
               </li></ul></div></div></div>
    
       
         <h2 id="cm-c-wlm-query-monitoring-templates">Vorlagen für Abfrageüberwachungsregeln</h2>



         <p>Beim Hinzufügen einer Regel mit der Amazon-Redshift-Konsole können Sie eine Regel aus einer vordefinierten Vorlage erstellen. Amazon Redshift erstellt eine neue Regel mit einem Satz von Prädikaten und füllt die Prädikate mit Standardwerten aus. Die Standardaktion ist log. Sie können die Prädikate und die Aktion an Ihren Anwendungsfall anpassen. </p>
         <p>In der folgenden Tabelle werden die verfügbaren Vorlagen aufgeführt. </p>
         <div class="table-container"><div class="table-contents"><table id="w319aac43c57c19b7"><thead>
                  <tr>
                     <th>Name der Vorlage</th>
                     <th>Prädikate</th>
                     <th>Beschreibung</th>

                  </tr>
               </thead>
                  <tr>
                     <td tabindex="-1">Nested loop join</td>
                     <td tabindex="-1">
                        <code class="code">nested_loop_join_row_count &gt; 100</code>
                     </td>
                     <td tabindex="-1">Ein eingebetteter Loop-Join kann auf ein unvollständiges Join-Prädikat hindeuten; diese führen oft zu sehr großen Ausgabesätzen (einem cartesischen Produkt). Verwenden Sie eine geringe Zahl von Zeilen, um eine mögliche Ausreißerabfrage frühzeitig zu finden.</td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Die Abfrage gibt eine sehr große Zahl von Zeilen aus.</td>
                     <td tabindex="-1">
                        <code class="code">return_row_count &gt; 1000000</code>
                     </td>
                     <td tabindex="-1">Wenn Sie eine Warteschlange für einfache und kurze Abfragen einrichten, können Sie eine Regel anwenden, die Abfragen mit einer großen Zahl ausgegebener Zeilen findet. Die Vorlage verwendet einen Standardwert von 1 Million Zeilen. Bei manchen Systemen kann 1 Million ein zu hoher Wert sein, während in anderen erst ein Wert von 1 Milliarde oder mehr als hoch gilt.</td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Join mit großer Zahl von Zeilen</td>
                     <td tabindex="-1">
                        <code class="code">join_row_count &gt; 1000000000</code>
                     </td>
                     <td tabindex="-1">Ein Join-Schritt mit einer großen Zahl von Zeilen kann darauf hindeuten, dass restriktivere Filter erforderlich sind. Die Vorlage verwendet einen Standardwert von 1 Milliarde Zeilen. Für eine (einmalige) Ad-Hoc-Warteschlange für schnelle und einfache Abfragen sollten Sie eine geringere Zahl verwenden. </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Hohe Festplattennutzung beim Schreiben von Zwischenergebnissen</td>
                     <td tabindex="-1">
                        <code class="code">query_temp_blocks_to_disk &gt; 100000</code>
                     </td>
                     <td tabindex="-1">Wenn gleichzeitig ausgeführte Abfragen mehr als den verfügbaren System-RAM verwenden, schreibt die Abfrageausführungsengine Zwischenergebnisse auf die Festplatte. Typischerweise ist dies das Ergebnis einer fehlerhaften Abfrage; solche Abfragen verwenden normalerweise auch den meisten Festplattenspeicherplatz. Der akzeptable Schwellenwert für die Festplattennutzung variiert je nach Typ des Clusterknotens und der Anzahl der Knoten. Die Vorlage verwendet einen Standardwert von 100.000 Blöcken bzw. 100 GB. Für einen kleineren Cluster werden Sie wahrscheinlich einen geringeren Wert verwenden. </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">Lang dauernde Abfrage mit hoher I/O-Verzerrung</td>
                     <td tabindex="-1"><code class="code">segment_execution_time &gt; 120</code> und <code class="code">io_skew &gt; 1.30</code> </td>
                     <td tabindex="-1">I/O-Verzerrung tritt auf, wenn ein Knotenslice eine viel höhere I/O-Rate aufweist als die anderen Slices. Als Ausgangspunkt gilt eine Verzerrung von 1,30 (das 1,3-fache des Durchschnitts) als hoch. Eine hohe I/O-Verzerrung ist nicht immer ein Problem. in Verbindung mit langen Abfrageausführungszeiten kann sie jedoch auf ein Problem mit dem Verteilungsstil oder dem Sortierschlüssel hindeuten. </td>
                  </tr>
               </table></div></div>

       
         <h2 id="cm-c-wlm-qmr-tables-and-views">Systemtabellen und Ansichten für Abfrageüberwachungsregeln</h2>



         <p>Wenn alle Prädikate einer Regel erfüllt sind, schreibt WLM eine Zeile in die Systemtabelle <a href="./r_STL_WLM_RULE_ACTION.html">STL_WLM_RULE_ACTION</a>. Diese Zeile enthält Details zu der Abfrage, die die Regel ausgelöst hat, und die daraus resultierende Aktion. </p>
         <p>Darüber hinaus zeichnet Amazon Redshift Abfragemetriken der folgenden Systemtabellen und Ansichten auf.</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Die Tabelle <a href="./r_STV_QUERY_METRICS.html">STV_QUERY_METRICS</a> zeigt die Metriken für aktuell ausgeführte Abfragen an.</p>
            </li><li class="listitem">
               <p>Die Tabelle <a href="./r_STL_QUERY_METRICS.html">STL_QUERY_METRICS</a> zeichnet die Metriken für abgeschlossene Abfragen auf. </p>
            </li><li class="listitem">
               <p>Die Ansicht <a href="./r_SVL_QUERY_METRICS.html">SVL_QUERY_METRICS</a> zeigt die Metriken für abgeschlossene Abfragen. </p>
            </li><li class="listitem">
               <p>Die Ansicht <a href="./r_SVL_QUERY_METRICS_SUMMARY.html">SVL_QUERY_METRICS_SUMMARY</a> zeigt die maximalen Werte der Metriken für abgeschlossene Abfragen.</p>
            </li></ul></div>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./cm-c-wlm-dynamic-example.html">Beispiel für dynamische WLM-Eigenschaften</div><div id="next" class="next-link" accesskey="n" href="./cm-c-wlm-system-tables-and-views.html">WLM-Systemtabellen und Ansichten</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-wlm-query-monitoring-rules.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>