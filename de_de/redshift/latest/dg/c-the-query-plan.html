<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Abfrageplan - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-the-query-plan" /><meta name="default_state" content="c-the-query-plan" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-the-query-plan.html" /><meta name="description" content="Beschreibung, wie ein Abfrageplan interpretiert wird." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Datenbankentwicklerhandbuch" /><meta name="abstract" content="Erstellen und verwalten Sie ein Data Warehouse mit Amazon Redshift, einem vollständig verwalteten Petabyte-Data-Warehousing-Service auf Unternehmensniveau." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-the-query-plan.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-the-query-plan.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-the-query-plan.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-the-query-plan.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-the-query-plan.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-the-query-plan.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-the-query-plan.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-the-query-plan.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-the-query-plan.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-the-query-plan.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-the-query-plan.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-the-query-plan.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-the-query-plan.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-the-query-plan.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-the-query-plan.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-the-query-plan.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-the-query-plan.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-the-query-plan.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-the-query-plan.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-the-query-plan.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-the-query-plan.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-the-query-plan.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Datenbankentwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Datenbankentwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="Abfrageplan" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Abfrageplan - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c-the-query-plan" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-the-query-plan.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-the-query-plan.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-the-query-plan.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Cluster,Data Warehouse,Developer,Musterdaten,Datenbank,Database Developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Datenbankentwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Optimieren der Abfrageleistung",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-optimizing-query-performance.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Verarbeitung von Abfragen",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-query-processing.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Abfrageplan",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-query-processing.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c-the-query-plan" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Datenbankentwicklerhandbuch</a></div><div id="page-toc-src"><a href="#EXPLAIN-operators">EXPLAIN-Operatoren</a><a href="#joins-in-EXPLAIN">Joins in EXPLAIN</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="c-the-query-plan">Abfrageplan</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Sie können den Abfrageplan verwenden, um Informationen über die Einzeloperationen zu erhalten, die zur Ausführung einer Abfrage benötigt werden. Wir empfehlen, sich zunächst mit den Grundlagen der Verarbeitung von Abfragen und der Erstellung von Abfrageplänen durch Amazon Redshift vertraut zu machen, bevor Sie mit Abfrageplänen arbeiten. Weitere Informationen finden Sie unter <a href="./c-query-planning.html">Workflow der Abfrageplanung und -ausführung</a>.</p><p>Um einen Abfrageplan zu erstellen, führen Sie einen <a href="./r_EXPLAIN.html">EXPLAIN</a>-Befehl, gefolgt von der Abfragetext, aus. Der Abfrageplan enthält die folgenden Informationen:</p><div class="itemizedlist">
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Von unten nach oben gelesen erhalten Sie die Operationen, die die Ausführungs-Engine durchführt.</p>
            </li><li class="listitem">
               <p>Welche Art von Schritten jede Operation ausführt</p>
            </li><li class="listitem">
               <p>Für jede Operation die verwendeten Tabellen und Spalten</p>
            </li><li class="listitem">
               <p>Für jede Operation, welches Datenvolumen verarbeitet wird (als Anzahl Spalten, sowie die Datenbreite in Bytes)</p>
            </li><li class="listitem">
               <p>Die relativen Kosten der Operation. Die <em>Kosten</em> sind ein Maß für den Vergleich der relativen Ausführungsdauer der Schritte in einem Plan. Die Kosten geben keinen Aufschluss über die tatsächliche Ausführungsdauer oder den Speicherverbrauch und ermöglichen auch keinen Vergleich zwischen Ausführungsplänen. Die Kosten weisen vielmehr darauf hin, welche Operationen in einer Abfrage die meisten Ressourcen verbrauchen.</p>
            </li></ul></div><p>Der Befehl EXPLAIN führt die Abfrage nicht aus. Der Befehl zeigt lediglich den Plan an, den Amazon Redshift ausführt, wenn die Abfrage unter den aktuellen Betriebsbedingungen ausgeführt wird. Wenn Sie für eine Tabelle das Schema oder Daten ändern und dann erneut <a href="./r_ANALYZE.html">ANALYZE</a> ausführen, um die statistischen Metadaten zu aktualisieren, sieht der Abfrageplan möglicherweise anders aus.</p><p>Der von EXPLAIN ausgegebene Abfrageplan ist eine vereinfachte Übersicht der Abfrageausführung. Die Details zur parallelen Verarbeitung der Abfragen werden nicht angezeigt. Wenn Sie alle Informationen detailliert anzeigen möchten, müssen Sie die Abfrage ausführen und dann die Zusammenfassung der Abfrage über die Ansicht SVL_QUERY_SUMMARY oder SVL_QUERY_REPORT abrufen. Weitere Informationen zur Verwendung dieser Ansichten finden Sie unter <a href="./c-analyzing-the-query-summary.html">Analysieren des Abfragezusammenfassung</a>.</p><p>In dem folgenden Beispiel ist die Ausgabe von EXPLAIN für eine einfache GROUP BY-Abfrage über der Tabelle EVENT dargestellt:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain select eventname, count(*) from event group by eventname;

                            QUERY PLAN
-------------------------------------------------------------------
XN HashAggregate  (cost=131.97..133.41 rows=576 width=17)
  -&gt;  XN Seq Scan on event  (cost=0.00..87.98 rows=8798 width=17)</code></pre><p>EXPLAIN gibt für jede Operation die folgenden Metriken zurück:</p><div class="variablelist">
             
             
             
         <dl>
               <dt><b><span class="term">Kosten</span></b></dt>
               <dd>
                  <p>Ein relativer Wert, mit dem sich die Operationen in einem Plan vergleichen lassen. Die kosten werden repräsentiert als zwei Dezimalzahlen, die durch zwei Punkte getrennt sind, beispielsweise <code class="code">cost=131.97..133.41</code>. Der erste Wert (in diesem Fall 131,97) gibt die relativen Kosten für die Rückgabe der ersten Zeile für diese Operation an. Der zweite Wert (in diesem Fall 133,41) gibt die relativen Kosten für die Ausführung der gesamten Operation an. Die Kosten im Abfrageplan sind beim Lesen des Plans kumulativ, sodass die  HashAggregate Kosten in diesem Beispiel (131.97...133.41) die Kosten des darunterliegenden Seq Scans beinhalten (0.00...87.98).</p>
               </dd>
            
               <dt><b><span class="term">Rows</span></b></dt>
               <dd>
                  <p>Die geschätzte Anzahl der zurückzugebenden Zeilen. In diesem Beispiel wird erwartet, dass der Scan 8798 Zeilen zurückgibt. Es wird erwartet, dass der  HashAggregate Operator allein 576 Zeilen zurückgibt (nachdem doppelte Ereignisnamen aus der Ergebnismenge verworfen wurden).</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Die Schätzung der zurückgegebenen Zeilen basiert auf der durch den Befehl ANALYZE generierten Statistik. Wenn ANALYZE längere Zeit nicht ausgeführt wurde, sind die Schätzungen weniger zuverlässig.</p></div></div>
               </dd>
            
               <dt><b><span class="term">Width</span></b></dt>
               <dd>
                  <p>Die geschätzte Breite der Zeilen, in Bytes. In diesem Beispiel wird eine durchschnittliche Zeilenbreite von 17 Bytes erwartet.</p>
               </dd>
            </dl></div><h2 id="EXPLAIN-operators">EXPLAIN-Operatoren</h2>
            
            <p>In diesem Abschnitt werden kurz die verschiedenen Operatoren beschrieben, die von EXPLAIN am häufigsten ausgegeben werden. Eine vollständige Liste der Operatoren finden Sie unter <a href="./r_EXPLAIN.html">EXPLAIN</a> im Abschnitt „SQL-Befehle“.</p>
            <h3 id="scan-operator">Sequenzieller Scan-Operator</h3>
               
               <p>Der sequenzielle Scan-Operator (Seq Scan) scannt eine Tabelle. Seq Scan scannt alle Spalten in der Tabelle sequenziell von Anfang bis Ende und bewertet für jede Zeile die Bedingungen der Abfrage in der WHERE-Klausel.</p>
             
            <h3 id="join-operators">Join-Operatoren</h3>
               
               <p>Amazon Redshift wählt Join-Operatoren abhängig vom physischen Design der Tabellen, für die die Join-Operation ausgeführt wird, vom Speicherort der Daten, die für den Join benötigt werden, und von den spezifischen Anforderungen der Abfrage selbst aus.</p>
               <div class="itemizedlist">
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><span class="topcom">Nested Loop</span></p>
                     <p>Dies ist der am wenigsten optimale Join; wird vor allem für Kreuz-Joins (kartesische Produkte) und einige Ungleichheits-Joins verwendet.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">Hash-Join und Hash</span></p>
                     <p>Hash-Joins und Hashes werden in der Regel schneller ausgeführt als ein Join über eine verschachtelte Schleife, und werden für innere linke Joins sowie für äußere linke und rechte Joins verwendet. Diese Operatoren werden bei Join-Operationen für Tabellen verwendet, bei denen die Join-Spalten nicht sowohl Verteilungsschlüssel <em>als auch</em> Sortierschlüssel sind. Hash-Joins erstellen die Hash-Tabelle für die innere Tabelle des Verbunds. Der Hash-Join-Operator liest die äußere Tabelle, erstellt einen Hash für die Spalte, über die verbunden wird, durchsucht die innere Hash-Tabelle nach Übereinstimmungen.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">Merge Join</span></p>
                     <p>In der Regel die schnellste Join-Variante, wird für innere und äußere Joins verwendet. Der Zusammenführungs-Join ermöglicht nicht die Erstellung eines vollständigen Joins. Der Operator wird bei Join-Operationen für Tabellen verwendet, bei denen die Join-Spalten sowohl Verteilungsschlüssel <em>als auch</em> Sortierschlüssel sind und weniger als 20 % der Tabellen für die Join-Operation unsortiert sind. Bei dieser Operation werden zwei sortierte Tabellen sequentiell eingelesen und die übereinstimmenden Zeilen gesucht. Um den Prozentsatz unsortierter Zeilen anzuzeigen, führen Sie eine Abfrage über der Systemtabelle <a href="./r_SVV_TABLE_INFO.html">SVV_TABLE_INFO</a> aus.</p>
                  </li><li class="listitem"> 
                     <p><span class="topcom">Räumlicher Join</span></p>
                     <p>In der Regel ein schneller Join, der auf der Nähe von räumlichen Daten basiert und für die Datentypen <code class="code">GEOMETRY</code> und <code class="code">GEOGRAPHY</code> verwendet wird.</p>
                  </li></ul></div>
             
            <h3 id="aggregate-operators">Aggregat-Operatoren</h3>
               
               <p>In Abfrageplänen werden die folgenden Operatoren bei Abfragen verwendet, die Aggregat-Funktionen und GROUP BY-Operationen verwenden.</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><span class="topcom">Aggregate</span></p>
                     <p>Operator für skalare Aggregat-Funktionen wie AVG oder SUM.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">HashAggregate</span></p>
                     <p>Operator für unsortierte, gruppierte Aggregat-Funktionen.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">GroupAggregate</span></p>
                     <p>Operator für sortierte, gruppierte Aggregat-Funktionen.</p>
                  </li></ul></div>
             
            <h3 id="sort-operators">Sortieroperatoren</h3>
               
               <p>In dem Abfrageplan werden die folgenden Operatoren verwendet, wenn in Abfragen Ergebnissätze sortiert oder zusammengeführt werden sollen.</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><span class="topcom">Sortierung</span></p>
                     <p>Bewertet die ORDER BY-Klausel und andere Sortieroperationen, beispielsweise Sortiervorgänge aufgrund von UNION-Abfragen und Join-Operationen, SELECT DISTINCT-Abfragen und Fensterfunktionen.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">Mischen von</span></p>
                     <p>Erstellt die abschließenden sortierten Ergebnisse auf der Basis zwischenzeitlicher sortierter Ergebnisse, die aus den parallel ausgeführten Operationen abgeleitet werden.</p>
                  </li></ul></div>
             
            <h3 id="UNION-INTERSECT-and-EXCEPT-operators">Die Operatoren UNION, INTERSECT und EXCEPT</h3>
               
               <p>In Abfrageplänen werden die folgenden Operatoren bei Abfragen verwendet, die Operationen über Mengen (UNION, INTERSECT und EXCEPT) verwenden.</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><span class="topcom">Unterabfrage</span></p>
                     <p>Wird zur Ausführung von UNION-Abfragen verwendet.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">Hash Intersect Distinct </span></p>
                     <p>Wird für INTERSECT -Abfragen verwendet.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">SetOp Ausnahme</span></p>
                     <p>Wird zur Ausführung von EXCEPT- (bzw. MINUS-)Abfragen verwendet.</p>
                  </li></ul></div>
             
            <h3 id="other-operators">Andere Operatoren</h3>
               
               <p>Die folgenden Operatoren werden häufig bei Routineabfragen in der Ausgabe von EXPLAIN verwendet.</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><span class="topcom">Eindeutig</span></p>
                     <p>Beseitigt Duplikate bei SELECT DISTINCT- und UNION-Abfragen.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">Limit</span></p>
                     <p>Verarbeitet die LIMIT-Klausel.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">Window</span></p>
                     <p>Führt Fensterfunktionen aus.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">Ergebnis</span></p>
                     <p>Führt skalare Funktionen aus, für die kein Tabellenzugriff erforderlich ist.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">Subplan</span></p>
                     <p>Wird für bestimmte Unterabfragen verwendet.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">Netzwerk</span></p>
                     <p>Sendet Zwischenergebnisse zur weiteren Verarbeitung an den Führungsknoten zurück.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">Materialize</span></p>
                     <p>Speichert Zeilen als Eingabe für Joins mit verschachtelten Schleifen und einige Zusammenführungs-Joins.</p>
                  </li></ul></div>
             
         <h2 id="joins-in-EXPLAIN">Joins in EXPLAIN</h2>
            
            <p>Der Abfrageoptimierer verwendet verschiedene Varianten von Join-Operationen, je nachdem, wie die Abfrage und die zugrundeliegenden Tabellen strukturiert sind. In der Ausgabe von EXPLAIN sind die Join-Variante, die verwendeten Tabellen und die Verteilung der Daten über den Cluster aufgeführt, um die Verarbeitung der Abfrage zu beschreiben.</p>

            <h3 id="join-types">Beispiele für Join-Varianten</h3>
               
               <p>Die folgenden Beispiele zeigen die verschiedene Join-Varianten, die dem Abfrageoptimierer zur Verfügung stehen. Die Join-Variante in dem Abfrageplan hängt vom physischen Design der beteiligten Tabellen ab.</p>
               <h4 id="hash-join-two-tables">Beispiel: Hash-Join zweier Tabellen</h4>
                  
                  <p>Mit der folgenden Abfrage werden EVENT und CATEGORY über die Spalte CATID verbunden. CATID ist der Verteilungsschlüssel und der Sortierschlüssel für CATEGORY, aber nicht für EVENT. Es wird ein Hash-Join mit EVENT als äußerer Tabelle und CATEGORY als innerer Tabelle durchgeführt. Weil CATEGORY die kleinere der beiden Tabellen ist, sendet der Planer bei der Ausführung der Abfrage mit DS_BCAST_INNER eine Kopie der Tabelle an die Verarbeitungsknoten. Die Kosten für die Join-Operation machen den Großteil der kumulierten Kosten für den Plan aus.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain select * from category, event where category.catid=event.catid;

                               QUERY PLAN
-------------------------------------------------------------------------
 XN Hash Join DS_BCAST_INNER  (cost=0.14..6600286.07 rows=8798 width=84)
   Hash Cond: ("outer".catid = "inner".catid)
   -&gt;  XN Seq Scan on event  (cost=0.00..87.98 rows=8798 width=35)
   -&gt;  XN Hash  (cost=0.11..0.11 rows=11 width=49)
         -&gt;  XN Seq Scan on category  (cost=0.00..0.11 rows=11 width=49)</code></pre>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Wenn in der Ausgabe von EXPLAIN zwei Operatoren gleich weit eingerückt sind, kann dies bedeuten, dass diese Operationen voneinander unabhängig sind und parallel gestartet werden können. In dem vorangehenden Beispiel jedoch ist dies nicht möglich: Zwar befinden sich die Scan-Operation für die Tabelle EVENT und die Hash-Operation auf derselben Ebene, aber der Scan von EVENT kann erst gestartet werden, nachdem die Hash-Operation vollständig abgeschlossen ist.</p></div></div>
                
               <h4 id="merge-join-two-tables">Beispiel: Zusammenführungs-Join zweier Tabellen</h4>
                  
                  <p>In der folgenden Abfrage wird ebenfalls SELECT * verwendet, aber es wird der Verbund von SALES und LISTING über die Spalte LISTID durchgeführt, und LISTID ist für beide Tabellen sowohl Verteilungs- als auch Sortierschlüssel. Der Optimierer wählt als Join-Variante Merge-Join, und für den Join ist keine Umverteilung von Daten erforderlich (DS_DIST_NONE).</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain select * from sales, listing where sales.listid = listing.listid;
QUERY PLAN
-----------------------------------------------------------------------------
XN Merge Join DS_DIST_NONE  (cost=0.00..6285.93 rows=172456 width=97)
  Merge Cond: ("outer".listid = "inner".listid)
  -&gt;  XN Seq Scan on listing  (cost=0.00..1924.97 rows=192497 width=44)
  -&gt;  XN Seq Scan on sales  (cost=0.00..1724.56 rows=172456 width=53)</code></pre>
                  <p>Das folgende Beispiele illustriert die verschiedene Join-Varianten in derselben Abfrage. Wie in dem vorangehenden Beispiel werden ebenfalls SALES und LISTING per Zusammenführungs-Join verbunden, aber die dritte Tabelle, EVENT, muss per Hash-Join mit dem Ergebnis des Zusammenführungs-Joins verbunden werden. Auch hier fallen für den Hash-Join Kosten für die Rundsendung von Daten an.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain select * from sales, listing, event
where sales.listid = listing.listid and sales.eventid = event.eventid;
                                  QUERY PLAN
----------------------------------------------------------------------------
XN Hash Join DS_BCAST_INNER  (cost=109.98..3871130276.17 rows=172456 width=132)
  Hash Cond: ("outer".eventid = "inner".eventid)
  -&gt;  XN Merge Join DS_DIST_NONE  (cost=0.00..6285.93 rows=172456 width=97)
        Merge Cond: ("outer".listid = "inner".listid)
        -&gt;  XN Seq Scan on listing  (cost=0.00..1924.97 rows=192497 width=44)
        -&gt;  XN Seq Scan on sales  (cost=0.00..1724.56 rows=172456 width=53)
  -&gt;  XN Hash  (cost=87.98..87.98 rows=8798 width=35)
        -&gt;  XN Seq Scan on event  (cost=0.00..87.98 rows=8798 width=35)</code></pre>
                
               <h4 id="join-aggregate-and-sort-example">Beispiel: Join-, Aggregat- und Sortieroperationen</h4>
                  
                  <p>In der folgenden Abfrage wird ein Hash-Join für die Tabellen SALES und EVENT durchgeführt, gefolgt von Aggregat- und Sortieroperationen für die gruppierte SUM-Funktion und die ORDER BY-Klausel. Der erste Sortieroperator wird parallel auf den Datenverarbeitungsknoten ausgeführt. Anschließend sendet der Network-Operator die Ergebnisse an den Führungsknoten, wo sie mit einer Merge-Operation zu einem sortierten Endergebnis zusammengeführt werden.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain select eventname, sum(pricepaid) from sales, event 
where sales.eventid=event.eventid group by eventname
order by 2 desc;
                                           QUERY PLAN
---------------------------------------------------------------------------------
 XN Merge  (cost=1002815366604.92..1002815366606.36 rows=576 width=27)
  Merge Key: sum(sales.pricepaid)
  -&gt;  XN Network  (cost=1002815366604.92..1002815366606.36 rows=576 width=27)
        Send to leader
        -&gt;  XN Sort  (cost=1002815366604.92..1002815366606.36 rows=576 width=27)
              Sort Key: sum(sales.pricepaid)
              -&gt;  XN HashAggregate  (cost=2815366577.07..2815366578.51 rows=576 width=27)
                    -&gt;  XN Hash Join DS_BCAST_INNER  (cost=109.98..2815365714.80 rows=172456 width=27)
                          Hash Cond: ("outer".eventid = "inner".eventid)
                          -&gt;  XN Seq Scan on sales  (cost=0.00..1724.56 rows=172456 width=14)
                          -&gt;  XN Hash  (cost=87.98..87.98 rows=8798 width=21)
                                -&gt;  XN Seq Scan on event  (cost=0.00..87.98 rows=8798 width=21)</code></pre>
                
             
            <h3 id="data-redistribution">Datenumverteilung</h3>
               
               <p>Die Ausgabe für EXPLAIN enthält bei Join-Operationen die Angabe der Methode, mit der Daten in einem Cluster bewegt werden, um die Join-Operation durchzuführen. Diese Datenbewegung kann entweder eine Rundsendung oder eine Umverteilung sein. Bei einer Rundsendung werden die Datenwerte von der einen Seite des Joins von jedem Verarbeitungsknoten an jeden anderen Verarbeitungsknoten gesendet, sodass jeder Verarbeitungsknoten am Ende der Operation eine vollständige Kopie der Daten hat. Bei einer Umverteilung werden die jeweiligen Datenwerte von ihrer aktuellen Slice an eine neue Slice gesendet, die sich möglicherweise auf einem anderen Knoten befindet. Die Daten werden normalerweise entsprechend dem Verteilungsschlüssel der anderen Tabelle des Joins umverteilt, wenn eine der Spalten der Join-Operation dieser Verteilungsschlüssel ist. Wenn keine der beiden Tabellen Verteilungsschlüssel in der jeweils anderen Tabelle hat, werden entweder beide Tabellen verteilt, oder die innere Tabelle wird an alle Knoten rundgesendet.</p>
               <p>Die Ausgabe von EXPLAIN enthält auch Angaben zu inneren und äußeren Tabellen. Die innere Tabelle wird zuerst gescannt und wird weiter unten im Abfrageplan angezeigt. Die innere Tabelle ist die Tabelle, in der nach Übereinstimmungen gesucht wird. Sie wird normalerweise im Speicher gehalten und als Quelltabelle für Hash-Operationen verwendet. Falls möglich wird die kleiner der beiden Tabellen als innere Tabelle verwendet. Der äußeren Tabelle werden die Zeilen entnommen für die in der inneren Tabelle nach Übereinstimmungen gesucht wird. Sie wird normalerweise vom Datenträger gelesen. Der Abfrageoptimierer wählt auf der Grundlage der Datenbankstatistik, die bei der letzten Ausführung des Befehls ANALYZE erstellt wurde, aus, welche Tabelle als innere und welche als äußere verwendet wird. Die Reihenfolge der Tabellen in der FROM-Klausel der Abfrage beeinflusst diese Auswahl nicht.</p>
               <p>Die folgenden Attribute in Abfrageplänen ermöglichen zu identifizieren, welche Daten bei der Ausführung einer Abfrage bewegt werden:</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><span class="topcom">DS_BCAST_INNER</span></p>
                     <p>Es wird eine Kopie der gesamten inneren Tabelle an alle Verarbeitungsknoten rundgesendet.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">DS_DIST_ALL_NONE</span></p>
                     <p>Es ist keine Umverteilung erforderlich, weil die innere Tabelle bereits mit DISTSTYLE ALL an alle Knoten verteilt wurde.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">DS_DIST_NONE</span></p>
                     <p>Es werden keine Tabellen umverteilt. Eine Zusammenstellung der Joins ist bereits möglich, weil die entsprechenden Slices verbunden werden, ohne dass Daten zwischen Knoten bewegt werden müssen.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">DS_DIST_INNER</span></p>
                     <p>Die innere Tabelle wird umverteilt.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">DS_DIST_OUTER</span></p>
                     <p>Die äußere Tabelle wird umverteilt.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">DS_DIST_ALL_INNER</span></p>
                     <p>Die gesamte innere Tabelle wird an eine einzige Slice umverteilt wurde, weil die äußere Tabelle DISTSTYLE ALL verwendet.</p>
                  </li><li class="listitem">
                     <p><span class="topcom">DS_DIST_BOTH</span></p>
                     <p>Beide Tabellen werden umverteilt.</p>
                  </li></ul></div>
             
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-query-planning.html">Workflow der Abfrageplanung und -ausführung</div><div id="next" class="next-link" accesskey="n" href="./reviewing-query-plan-steps.html">Übersicht über die Schritte des Abfrageplans</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-the-query-plan.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-the-query-plan.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>