<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Bewährte Methoden für die Gestaltung von Abfragen mit Amazon Redshift - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c_designing-queries-best-practices" /><meta name="default_state" content="c_designing-queries-best-practices" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="description" content="Befolgen Sie diese Empfehlungen beim Erstellen von Abfragen, um die Abfrageleistung zu maximieren:" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Datenbankentwicklerhandbuch" /><meta name="abstract" content="Erstellen und verwalten Sie ein Data Warehouse mit Amazon Redshift, einem vollständig verwalteten Petabyte-Data-Warehousing-Service auf Unternehmensniveau." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Datenbankentwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Datenbankentwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="Bewährte Methoden für die Gestaltung von Abfragen mit Amazon Redshift" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Bewährte Methoden für die Gestaltung von Abfragen mit Amazon Redshift - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c_designing-queries-best-practices" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Cluster,Data Warehouse,Developer,Musterdaten,Datenbank,Database Developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Datenbankentwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Bewährte Methoden für Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/best-practices.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Bewährte Methoden für die Gestaltung von Abfragen mit Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/best-practices.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c_designing-queries-best-practices" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Datenbankentwicklerhandbuch</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="c_designing-queries-best-practices">Bewährte Methoden für die Gestaltung von Abfragen mit Amazon Redshift</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Befolgen Sie diese Empfehlungen beim Erstellen von Abfragen, um die Abfrageleistung zu maximieren:</p><div class="itemizedlist">
          
          
          
          
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Gestalten Sie die Tabellen unter Berücksichtigung der bewährten Methoden, um eine solide Grundlage für die Abfrageleistung zu schaffen. Weitere Informationen finden Sie unter <a href="./c_designing-tables-best-practices.html">Bewährte Methoden für die Gestaltung von Tabellen mit Amazon Redshift</a>.</p>
         </li><li class="listitem">
            <p>Vermeiden Sie die Verwendung von <code class="code">select *</code>. Schließen Sie nur die Spalten ein, die Sie wirklich benötigen.</p>
         </li><li class="listitem">
            <p>Verwenden Sie einen <a href="./r_CASE_function.html">Der bedingte Ausdruck CASE</a> zur Durchführung komplexer Aggregierungen, anstatt mehrmals aus der selben Tabelle auszuwählen.</p>
         </li><li class="listitem">
            <p>Verwenden Sie Cross-Joins nur wenn unbedingt erforderlich. Diese Joins ohne Join-Bedingung ergeben das cartesische Produkt zweier Tabellen. Cross-Joins werden typischerweise als verschachtelte Loop–Joins durchgeführt; dies ist der langsamste der möglichen Join-Typen. </p>
         </li><li class="listitem">
            <p>Verwenden Sie Unterabfragen, wenn eine Tabelle in der Abfrage nur für Prädikatbedingungen verwendet wird, und die Unterabfrage eine kleine Zahl von Zeilen (weniger als etwa 200) zurückgibt. Das folgende Beispiel verwendet eine Unterabfrage, um das Joining der LISTING-Tabelle zu vermeiden.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select sum(sales.qtysold)
from sales
where salesid in (select listid from listing where listtime &gt; '2008-12-26');</code></pre>
         </li><li class="listitem">
            <p>Verwenden Sie Prädikate, um den Datensatz so weit wie möglich einzuschränken.</p>
         </li><li class="listitem">
            <p>Verwenden Sie in den Prädikaten die Operatoren mit den geringstmöglichen Kosten. <a href="./r_comparison_condition.html">Vergleichsbedingung</a>-Operatoren sind gegenüber <a href="./r_patternmatching_condition_like.html">LIKE</a>-Operatoren vorzuziehen. LIKE-Operatoren sind weiterhin gegenüber <a href="./pattern-matching-conditions-similar-to.html">SIMILAR TO</a> oder <a href="./pattern-matching-conditions-posix.html">POSIX-Operatoren</a> vorzuziehen.</p>
         </li><li class="listitem">
            <p>Vermeiden Sie die Verwendung von Funktionen in Abfrageprädikaten. Deren Verwendung kann die Kosten der Abfrage dadurch erhöhen, dass große Zahlen von Zeilen die Zwischenschritte der Abfrage auflösen müssen.</p>
         </li><li class="listitem">
            <p>Verwenden Sie nach Möglichkeit eine WHERE-Klausel, um den Datensatz einzuschränken. Der Abfrageplaner kann dann die Zeilenreihenfolge verwenden, um zu bestimmen, welche Datensätze den Kriterien entsprechen, und entsprechend das Scannen großer Zahlen von Festplattenblöcken überspringen. Ohne dies muss die Abfrageausführung die beteiligten Spalten vollständig scannen.</p>
         </li><li class="listitem">
            <p>Fügen Sie Prädikate zu Filtertabellen hinzu, die an Joins beteiligt sind, selbst wenn die Prädikate die gleichen Filter anwenden. Die Abfrage gibt den gleichen Ergebnissatz zurück, Amazon Redshift kann jedoch die Join-Tabellen vor dem Scan-Schritt filtern und dann das Scannen von Blöcken aus diesen Tabellen effektiv übergehen. Redundante Filter werden nicht benötigt, wenn Sie auf einer Spalte filtern, die in der Join-Bedingung verwendet wird. </p>
            <p>Nehmen Sie zum Beispiel an, Sie möchten <code class="code">SALES</code> und <code class="code">LISTING</code> verbinden, um Ticketverkäufe für nach dem Dezember gelistete Tickets, gruppiert nach Verkäufer, zu finden. Beide Tabellen werden nach Datum sortiert. Die folgende Abfrage verbindet die Tabellen auf ihrem gemeinsamen Schlüssel und filtert nach <code class="code">listing.listtime</code>-Werten nach dem 1. Dezember.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select listing.sellerid, sum(sales.qtysold)
from sales, listing
where sales.salesid = listing.listid
and listing.listtime &gt; '2008-12-01'
group by 1 order by 1;</code></pre>
            <p>Die WHERE-Klausel enthält kein Prädikat für <code class="code">sales.saletime</code>, die Ausführungsengine muss daher die gesamte <code class="code">SALES</code>-Tabelle filtern. Wenn Sie wissen, dass der Filter dazu führt, dass weniger Zeilen an dem Join beteiligt sind, fügen Sie auch diesen Filter hinzu. Beim folgenden Beispiel ist die Ausführungszeit erheblich verkürzt.</p>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select listing.sellerid, sum(sales.qtysold)
from sales, listing
where sales.salesid = listing.listid
and listing.listtime &gt; '2008-12-01'
and sales.saletime &gt; '2008-12-01'
group by 1 order by 1;</code></pre>

         </li><li class="listitem">
            <p>Verwenden Sie Sortierschlüssel in der GROUP BY-Klausel, so dass der Abfrageplaner eine effizientere Aggregierung verwenden kann. Eine Abfrage kann für eine einphasige Aggregierung in Frage kommen, wenn ihre GROUP BY-Liste Sortierschlüsselspalten enthält, von denen eine auch der Verteilungsschlüssel ist. Die Sortierschlüsselspalten in der GROUP BY-Liste müssen den ersten Sortierschlüssel und dann weitere Sortierschlüssel, die Sie verwenden möchten, in der Sortierschlüsselreihenfolge enthalten. So ist es beispielsweise korrekt, den ersten Sortierschlüssel, den ersten und den zweiten Sortierschlüssel, den ersten, zweiten und dritten Sortierschlüssel zu verwenden usw. Es ist nicht möglich, den ersten und den dritten Sortierschlüssel zu verwenden.</p>
            <p>Sie können die Verwendung der einphasigen Aggregierung bestätigen, indem Sie den Befehl <a href="./r_EXPLAIN.html">EXPLAIN</a> verwenden und nach <code class="code">XN
                  GroupAggregate</code> im Aggregierungsschritt der Abfrage suchen.</p>
         </li><li class="listitem">
            <p>Wenn Sie die GROUP BY- und die ORDER BY-Klausel verwenden, müssen Sie sicherstellen, dass die Spalten in beiden die gleiche Reihenfolge haben. Gehen Sie also einfach wie folgt vor:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">group by a, b, c
order by a, b, c</code></pre>
            <p>Gehen Sie nicht wie folgt vor.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">group by b, c, a
order by a, b, c</code></pre>
         </li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c_best-practices-avoid-maintenance.html">Planen rund um Wartungszeitfenster</div><div id="next" class="next-link" accesskey="n" href="./advisor.html">Arbeiten mit Advisor</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>