<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Fehlerbehebung bei Abfragen in Amazon Redshift Spectrum - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-spectrum-troubleshooting" /><meta name="default_state" content="c-spectrum-troubleshooting" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html" /><meta name="description" content="Wenn bei einer Amazon-Redshift-Spectrum-Anfrage eine Zeitüberschreitung auftritt, wird die Anfrage abgebrochen und erneut übermittelt. Nach fünf fehlgeschlagenen erneuten Versuchen schlägt die Abfrage mit dem folgenden Fehler fehl. Große Dateien (über 1 GB). Prüfen Sie die Größe Ihrer Dateien in Amazon S3, und suchen Sie nach großen Dateien und Dateigrößenverzerrungen. Teilen Sie große Dateien in kleinere auf, zwischen 100 MB und 1 GB. Versuchen Sie, die Dateien etwa gleich groß zu halten." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Datenbankentwicklerhandbuch" /><meta name="abstract" content="Erstellen und verwalten Sie ein Data Warehouse mit Amazon Redshift, einem vollständig verwalteten Petabyte-Data-Warehousing-Service auf Unternehmensniveau." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Datenbankentwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Datenbankentwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="Fehlerbehebung bei Abfragen in Amazon Redshift Spectrum" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Fehlerbehebung bei Abfragen in Amazon Redshift Spectrum - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c-spectrum-troubleshooting" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,Cluster,Data Warehouse,Developer,Musterdaten,Datenbank,Database Developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Datenbankentwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Abfrage externer Daten mit Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Fehlerbehebung bei Abfragen in Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c-spectrum-troubleshooting" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Datenbankentwicklerhandbuch</a></div><div id="page-toc-src"><a href="#spectrum-troubleshooting-retries-exceeded">Überschreitung der Anzahl erneuter Versuche</a><a href="#spectrum-troubleshooting-access-throttled">Zugriff gedrosselt</a><a href="#spectrum-troubleshooting-resource-limit-exceeded">Ressourcenlimit überschritten</a><a href="#spectrum-troubleshooting-no-rows-partitioned-table">Für eine partitionierte Tabelle werden keine Zeilen ausgegeben.</a><a href="#spectrum-troubleshooting-not-authorized-error">„Nicht autorisiert“-Fehler</a><a href="#spectrum-troubleshooting-incompatible-data-format">Inkompatible Datenformate</a><a href="#spectrum-troubleshooting-syntax-error-using-hive-ddl">Syntaxfehler bei der Verwendung von Hive-DDL in Amazon Redshift</a><a href="#spectrum-troubleshooting-permission-to-create-temp-tables">Berechtigungen zum Erstellen temporärer Tabellen</a><a href="#spectrum-troubleshooting-invalid-range">Ungültiger Bereich </a><a href="#spectrum-troubleshooting-invalid-parquet-version">Ungültige Parquet-Versionsnummer </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="c-spectrum-troubleshooting">Fehlerbehebung bei Abfragen in Amazon Redshift Spectrum</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p></p><p>Im Folgenden finden Sie eine Kurzreferenz, die einige häufige Probleme identifiziert und behebt, die bei Amazon-Redshift-Spectrum-Abfragen auftreten können. Fragen Sie zur Anzeige der von Redshift Spectrum generierten Fehler die Systemtabelle <a href="./r_SVL_S3LOG.html">SVL_S3LOG</a> ab.</p><div class="highlights" id="inline-topiclist"><h6>Themen</h6><ul><li><a href="#spectrum-troubleshooting-retries-exceeded">Überschreitung der Anzahl erneuter Versuche</a></li><li><a href="#spectrum-troubleshooting-access-throttled">Zugriff gedrosselt</a></li><li><a href="#spectrum-troubleshooting-resource-limit-exceeded">Ressourcenlimit überschritten</a></li><li><a href="#spectrum-troubleshooting-no-rows-partitioned-table">Für eine partitionierte Tabelle werden keine Zeilen ausgegeben.</a></li><li><a href="#spectrum-troubleshooting-not-authorized-error">„Nicht autorisiert“-Fehler</a></li><li><a href="#spectrum-troubleshooting-incompatible-data-format">Inkompatible Datenformate</a></li><li><a href="#spectrum-troubleshooting-syntax-error-using-hive-ddl">Syntaxfehler bei der Verwendung von Hive-DDL in Amazon Redshift</a></li><li><a href="#spectrum-troubleshooting-permission-to-create-temp-tables">Berechtigungen zum Erstellen temporärer Tabellen</a></li><li><a href="#spectrum-troubleshooting-invalid-range">Ungültiger Bereich </a></li><li><a href="#spectrum-troubleshooting-invalid-parquet-version">Ungültige Parquet-Versionsnummer </a></li></ul></div>
         <h2 id="spectrum-troubleshooting-retries-exceeded">Überschreitung der Anzahl erneuter Versuche</h2>

         <p>Wenn bei einer Amazon-Redshift-Spectrum-Anfrage eine Zeitüberschreitung auftritt, wird die Anfrage abgebrochen und erneut übermittelt. Nach fünf fehlgeschlagenen erneuten Versuchen schlägt die Abfrage mit dem folgenden Fehler fehl.</p>
         <pre class="screen">error:  Spectrum Scan Error: Retries exceeded</pre>
         <p>Dafür gibt es die folgenden möglichen Ursachen: </p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Große Dateien (über 1 GB). Prüfen Sie die Größe Ihrer Dateien in Amazon S3, und suchen Sie nach großen Dateien und Dateigrößenverzerrungen. Teilen Sie große Dateien in kleinere auf, zwischen 100 MB und 1 GB. Versuchen Sie, die Dateien etwa gleich groß zu halten. </p>
            </li><li class="listitem">
               <p>Langsamer Netzwerkdurchsatz. Versuchen Sie Ihre Abfrage später erneut. </p>
            </li></ul></div>
       
         <h2 id="spectrum-troubleshooting-access-throttled">Zugriff gedrosselt</h2>
         <p>Amazon Redshift Spectrum unterliegt den Servicekontingenten anderer AWS-Services. Bei hoher Auslastung müssen Redshift-Spectrum-Anforderungen möglicherweise verlangsamt werden, was zum folgenden Fehler führt.</p>
         <pre class="screen">error:  Spectrum Scan Error: Access throttled</pre>
         <p>Es können zwei Arten der Drosselung auftreten:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
            <p>Zugriff gedrosselt von Amazon S3.</p>
            </li><li class="listitem">
            <p>Zugriff gedrosselt von AWS KMS.</p>
            </li></ul></div>
         <p>Der Fehlerkontext enthält weitere Details zum Typ der Drosselung. Nachfolgend können Sie Ursachen und mögliche Lösungen für diese Drosselung finden.</p>



          
            <h3 id="spectrum-troubleshooting-access-throttled-s3">Zugriff gedrosselt von Amazon S3</h3>
            
            <p>Amazon S3 drosselt möglicherweise eine Redshift-Spectrum-Anforderung, wenn die Leseanforderungsrate für ein <a href="https://docs.aws.amazon.com/glossary/latest/reference/glos-chap.html#keyprefix">Präfix</a> zu hoch ist. Informationen zu einer GET/HEAD-Anforderungsrate, die Sie in Amazon S3 erreichen können, finden Sie unter <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/optimizing-performance.html">Optimieren der Leistung von Amazon S3</a> im <em>Amazon-Simple-Storage-Service-Benutzerhandbuch</em>. Die Amazon-S3-GET/HEAD Anforderungsrate berücksichtigt alle GET/HEAD-Anforderungen an ein Präfix, sodass verschiedene Anwendungen, die auf dasselbe Präfix zugreifen, die Gesamtanforderungsrate teilen.</p>
            <p>Wenn Ihre Redshift-Spectrum-Anforderungen häufig von Amazon S3 gedrosselt werden, reduzieren Sie die Anzahl der Amazon-S3-GET/HEAD-Anforderungen, die Redshift Spectrum an Amazon S3 richtet. Versuchen Sie dazu, kleine Dateien zu größeren Dateien zusammenzufassen. Wir empfehlen, Dateigrößen von mindestens 64 MB zu verwenden.</p>
         <p>Ziehen Sie auch die Partitionierung Ihrer Redshift-Spectrum-Tabellen in Betracht, um von einer frühen Filterung zu profitieren und die Anzahl der Dateien zu reduzieren, auf die in Amazon S3 zugegriffen wird. Weitere Informationen finden Sie unter <a href="./c-spectrum-external-tables.html#c-spectrum-external-tables-partitioning">Partitionierung externer Redshift-Spectrum-Tabellen</a>. </p>
          
            
          
            <h3 id="spectrum-troubleshooting-access-throttled-kms">Zugriff gedrosselt von AWS KMS</h3>
         
            
            <p>Wenn Sie Ihre Daten in Amazon S3 unter Verwendung der serverseitigen Verschlüsselung (SSE-S3 oder SSE-KMS) speichern, ruft Amazon S3 für jede Datei, auf die Redshift Spectrum zugreift, eine API-Operation für AWS KMS auf. Diese Anforderungen zählen für Ihr kryptografisches Operationskontingent. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/kms/latest/developerguide/requests-per-second.html">AWS KMS-Anforderungskontingente</a>. Weitere Informationen zu SSE-S3 und SSE-KMS finden Sie unter <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingServerSideEncryption.html">Schutz von Daten mit serverseitiger Verschlüsselung</a> und <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingKMSEncryption.html">Schutz von Daten mit serverseitiger Verschlüsselung mit in AWS KMS gespeicherten KMS-Schlüsseln</a> im <em>Amazon-Simple-Storage-Service-Benutzerhandbuch.</em></p>

            <p>Ein erster Schritt, um die Anzahl der Anforderungen zu reduzieren, die Redshift Spectrum an AWS KMS stellt, besteht darin, die Anzahl der Dateien zu reduzieren, auf die zugegriffen wird. Versuchen Sie dazu, kleine Dateien zu größeren Dateien zusammenzufassen. Wir empfehlen, Dateigrößen von mindestens 64 MB zu verwenden.</p>
            <p>Wenn Ihre Redshift-Spectrum-Anforderungen häufig von AWS KMS gedrosselt werden, sollten Sie eine Kontingenterhöhung für Ihre AWS KMS-Anforderungsrate für kryptografische Operationen beantragen. Informationen zum Anfordern einer Kontingenterhöhung finden Sie unter <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html">AWS-Service Limits</a> im <em>Allgemeine Amazon Web Services-Referenz</em>. </p>
          
       
         <h2 id="spectrum-troubleshooting-resource-limit-exceeded">Ressourcenlimit überschritten</h2>
         <p>Redshift Spectrum erzwingt eine Obergrenze für die Speichermenge, die eine Anforderung verwenden kann. Eine Redshift-Spectrum-Anforderung, die mehr Speicher benötigt, schlägt fehl, was zu dem folgenden Fehler führt.</p>
         <pre class="screen">error:  Spectrum Scan Error: Resource limit exceeded</pre>
            <p>Es gibt zwei häufige Gründe, die dazu führen können, dass eine Redshift-Spectrum-Anforderung ihr Speicherkontingent überschreitet:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Redshift Spectrum verarbeitet einen großen Datenblock, der nicht in kleinere Datenblöcke aufgeteilt werden kann.</p>
            </li><li class="listitem">
               <p>Ein großer Aggregationsschritt wird von Redshift Spectrum verarbeitet.</p>
            </li></ul></div>

         <p>Es wird empfohlen, ein Dateiformat zu verwenden, das parallele Lesevorgänge mit geteilten Größen von 128 MB oder weniger unterstützt. Unterstützte Dateiformate und allgemeine Richtlinien für die Erstellung von Datendateien finden Sie unter <a href="./c-spectrum-data-files.html">Erstellen von Datendateien für Abfragen in Amazon Redshift Spectrum</a>. Bei Verwendung von Dateiformaten oder Komprimierungsalgorithmen, die keine parallelen Lesevorgänge unterstützen, empfehlen wir, die Dateigrößen zwischen 64 MB und 128 MB zu halten.</p>
       
         <h2 id="spectrum-troubleshooting-no-rows-partitioned-table">Für eine partitionierte Tabelle werden keine Zeilen ausgegeben.</h2>

         <p>Wenn Ihre Abfrage von einer partitionierten externen Tabelle null Zeilen ausgibt, prüfen Sie, ob für diese externe Tabelle eine Partition hinzugefügt wurde. Redshift Spectrum scannt nur Dateien an einem Amazon-S3-Speicherort, der ausdrücklich mit  hinzugefügt wurde <code class="code">ALTER TABLE … ADD PARTITION</code>. Fragen Sie die Ansicht <a href="./r_SVV_EXTERNAL_PARTITIONS.html">SVV_EXTERNAL_PARTITIONS</a> ab, um die vorhandenen Partitionen zu finden. Führen Sie für jede fehlende Partition <code class="code">ALTER TABLE … ADD PARTITION</code> aus. </p>
       
         <h2 id="spectrum-troubleshooting-not-authorized-error">„Nicht autorisiert“-Fehler</h2>

         <p>Prüfen Sie, ob die IAM-Rolle für den Cluster den Zugriff auf die Amazon-S3-Dateiobjekte erlaubt. Wenn sich Ihre externe Datenbank auf Amazon Athena befindet, prüfen Sie, ob die IAM-Rolle den Zugriff auf Athena-Ressourcen erlaubt. Weitere Informationen finden Sie unter <a href="./c-spectrum-iam-policies.html">IAM-Richtlinien für Amazon Redshift Spectrum</a>.</p>
       
         <h2 id="spectrum-troubleshooting-incompatible-data-format">Inkompatible Datenformate</h2>

         <p>Bei einem Spaltenformat wie Apache Parquet ist der Spaltentyp mit den Daten eingebettet. Der Spaltentyp in der CREATE EXTERNAL TABLE-Definition muss dem Spaltentyp der Datendatei entsprechen. Wenn dies nicht der Fall ist, erhalten Sie eine Fehlermeldung wie die folgende:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">File 'https://s3bucket/location/file has an incompatible Parquet schema
for column ‘s3://s3bucket/location.col1'. Column type: VARCHAR, Par</code></pre>
         <p>Die Fehlermeldung kann aus Längengründen verkürzt angezeigt werden. Um die gesamte Fehlermeldung, einschließlich Spaltenname und Spaltentyp, abzurufen, fragen Sie die Systemansicht <a href="./r_SVL_S3LOG.html">SVL_S3LOG</a> ab.</p>
         <p>Im folgenden Beispiel wird SVL_S3LOG nach der letzten abgeschlossene Abfrage abgefragt.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">select message 
from svl_s3log 
where query = pg_last_query_id() 
order by query,segment,slice;</code></pre>
         <p>nachfolgend sehen Sie ein Beispiel für ein Ergebnis mit der vollständigen Fehlermeldung.</p>

         <pre class="screen">                            message
–––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––-
Spectrum Scan Error. File 'https://s3bucket/location/file has an incompatible
Parquet schema for column ' s3bucket/location.col1'. 
Column type: VARCHAR, Parquet schema:\noptional int64 l_orderkey [i:0 d:1 r:0]\n</pre>
         <p>Um den Fehler zu korrigieren, ändern Sie die externe Tabelle so, dass sie dem Spaltentyp der Parquet-Datei entspricht. </p>
       
         <h2 id="spectrum-troubleshooting-syntax-error-using-hive-ddl">Syntaxfehler bei der Verwendung von Hive-DDL in Amazon Redshift</h2>

         <p>Amazon Redshift unterstützt die Data Definition Language (DDL) für CREATE EXTERNAL TABLE, die ähnlich der Hive-DDL ist. Die beiden DDL-Typen sind aber nicht überall gleich. Wenn Sie Hive-DDL zur Erstellung oder Änderung externer Amazon-Redshift-Tabellen kopieren, können Syntaxfehler auftreten. Nachfolgend sehen Sie einige Beispiele für Unterschiede zwischen Amazon Redshift und Hive-DDL: </p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Amazon Redshift erfordert einfache Anführungszeichen ('), während Hive-DDL doppelte Anführungszeichen unterstützt (").</p>
            </li><li class="listitem">
               <p>Amazon Redshift unterstützt nicht den Datentyp STRING. Verwenden Sie stattdessen VARCHAR.</p>
            </li></ul></div>
       
         <h2 id="spectrum-troubleshooting-permission-to-create-temp-tables">Berechtigungen zum Erstellen temporärer Tabellen</h2>
         <p>Um Redshift Spectrum-Abfragen auszuführen, benötigt der Datenbankbenutzer die Berechtigung, temporäre Tabellen in der Datenbank zu erstellen. Das folgende Beispiel erteilt der Benutzergruppe <code class="code">spectrumdb</code> temporäre Berechtigungen für die Datenbank <code class="code">spectrumusers</code>. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">grant temp on database spectrumdb  to group spectrumusers;</code></pre>
         <p>Weitere Informationen finden Sie unter <a href="./r_GRANT.html">GRANT</a>.</p>
       
      
      <h2 id="spectrum-troubleshooting-invalid-range">Ungültiger Bereich </h2>
      <p>Redshift Spectrum erwartet, dass Dateien in Amazon S3, die zu einer externen Tabelle gehören, bei einer Abfrage nicht überschrieben werden. Sollte dies doch geschehen, kann der folgende Fehler auftreten.</p>
      <pre class="screen">Error: HTTP response error code: 416 Message: InvalidRange The requested range is not satisfiable</pre>
      <p>Um den Fehler zu vermeiden, stellen Sie sicher, dass Amazon S3-Dateien nicht überschrieben werden, während sie mit Redshift Spectrum abgefragt werden.</p>    
    
         
         <h2 id="spectrum-troubleshooting-invalid-parquet-version">Ungültige Parquet-Versionsnummer </h2>
         <p>Redshift Spectrum überprüft die Metadaten jeder Apache Parquet-Datei, auf die zugegriffen wird. Wenn die Prüfung fehlschlägt, kann dies zu einem Fehler wie dem folgenden führen:</p>
         <pre class="screen">File 'https://s3.<code class="replaceable">region</code>.amazonaws.com/s3bucket/location/file has an invalid version number</pre>
         <p>Es gibt zwei häufige Gründe, die dazu führen können, dass die Überprüfung fehlschlägt:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Die Parquet-Datei wurde bei der Abfrage überschrieben (siehe <a href="#spectrum-troubleshooting-invalid-range">Ungültiger Bereich </a>).</p>
            </li><li class="listitem">
               <p>Die Parquett-Datei ist beschädigt.</p>
            </li></ul></div>   
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-spectrum-metrics.html">Überwachung von Metriken</div><div id="next" class="next-link" accesskey="n" href="./tutorial-query-nested-data.html">Tutorial: Abfragen verschachtelter Daten mit Amazon Redshift Spectrum </div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>