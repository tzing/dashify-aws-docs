<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Verhindern von Aktualisierungen der Stack-Ressourcen - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="protect-stack-resources" /><meta name="default_state" content="protect-stack-resources" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" /><meta name="description" content="Verhindern Sie mithilfe von Stack- AWS CloudFormation Richtlinien, dass Stack-Ressourcen während einer Stack-Aktualisierung unabsichtlich aktualisiert oder gelöscht werden." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Leitfaden" /><meta name="abstract" content="Erstellen und verwalten Sie AWS Infrastrukturbereitstellungen vorhersehbar und wiederholt mithilfe von AWS CloudFormation mit diesem Benutzerhandbuch." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Leitfaden" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Leitfaden" /><meta id="panorama-serviceConsolePage" value="Verhindern von Aktualisierungen der Stack-Ressourcen" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Verhindern von Aktualisierungen der Stack-Ressourcen - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,Ressourcenbereitstellung,Ressourcenkonfiguration,Infrastrukturverwaltung,CloudFormer,CloudFormation -Stack,CloudFormation Stackset,CloudFormation -Vorlage,Änderungssatz" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Leitfaden",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Arbeiten mit -Stacks",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS CloudFormation-Stack-Updates",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Verhindern von Aktualisierungen der Stack-Ressourcen",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Leitfaden</a></div><div id="page-toc-src"><a href="#stack-policy-intro-example">Beispiel-Stack-Richtlinie</a><a href="#stack-policy-reference">Definieren einer Stack-Richtlinie</a><a href="#protect-stack-resources-protecting">Festlegen einer Stack-Richtlinie</a><a href="#protect-stack-resources-updating">Aktualisieren geschützter Ressourcen</a><a href="#protect-stack-resources-modifying">Ändern einer Stack-Richtlinie </a><a href="#stack-policy-samples">Weitere Beispiel-Stack-Richtlinien</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="protect-stack-resources">Verhindern von Aktualisierungen der Stack-Ressourcen</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Wenn Sie ein Stack erstellen, sind alle Aktualisierungsaktionen für alle Ressourcen zulässig. Standardmäßig können alle Personen, die berechtigt sind, Stack-Aktualisierungen vorzunehmen, alle Ressourcen im Stack aktualisieren. Während einer Aktualisierung müssen einige Ressourcen möglicherweise unterbrochen oder vollständig ersetzt werden, was zu neuen physischen IDs oder völlig neuem Speicher führt. Sie können mithilfe einer Stack-Richtlinie verhindern, dass <a href="./aws-template-resource-type-ref.html">Stack-Ressourcen</a> während einer Stack-Aktualisierung unabsichtlich aktualisiert oder gelöscht werden. Eine Stack-Richtlinie ist ein JSON-Dokument, in dem die Aktualisierungsaktionen definiert werden, die für designierte Ressourcen ausgeführt werden können.</p><p>Nachdem Sie eine Stack-Richtlinie festgelegt haben, sind alle Ressourcen im Stack standardmäßig geschützt. Um Aktualisierungen für bestimmte Ressourcen zuzulassen, geben Sie in der Stack-Richtlinie eine explizite <code class="code">Allow</code>-Anweisung für diese Ressourcen an. Sie können nur eine Stack-Richtlinie pro Stack definieren, aber mehrere Ressourcen in einer einzelnen Richtlinie schützen. Eine Stack-Richtlinie gilt für alle AWS CloudFormation Benutzer, die versuchen, den Stack zu aktualisieren. Sie können unterschiedlichen Benutzern keinen verschiedenen Stack-Richtlinien zuordnen.</p><p>Eine Stack-Richtlinie gilt nur während Stack-Aktualisierungen. Sie bietet keine Zugriffskontrollen wie eine AWS Identity and Access Management (IAM)-Richtlinie. Verwenden Sie eine Stack-Richtlinie nur als ausfallsicheren Mechanismus, um versehentliche Aktualisierungen bestimmter Stack-Ressourcen zu verhindern. Verwenden Sie IAM, um den Zugriff auf AWS Ressourcen oder Aktionen zu steuern.</p><div class="highlights" id="inline-topiclist"><h6>Themen</h6><ul><li><a href="#stack-policy-intro-example">Beispiel-Stack-Richtlinie</a></li><li><a href="#stack-policy-reference">Definieren einer Stack-Richtlinie</a></li><li><a href="#protect-stack-resources-protecting">Festlegen einer Stack-Richtlinie</a></li><li><a href="#protect-stack-resources-updating">Aktualisieren geschützter Ressourcen</a></li><li><a href="#protect-stack-resources-modifying">Ändern einer Stack-Richtlinie </a></li><li><a href="#stack-policy-samples">Weitere Beispiel-Stack-Richtlinien</a></li></ul></div>
   <h2 id="stack-policy-intro-example">Beispiel-Stack-Richtlinie</h2>
    <p>Die folgende Beispiel-Stack-Richtlinie verhindert Aktualisierungen an der <code class="code">ProductionDatabase</code>-Ressource:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Allow",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "*"
    },
    <span>{</span>
      "Effect" : "Deny",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "LogicalResourceId/ProductionDatabase"
    }
  ]
}</code></pre>
    <p>Wenn Sie eine Stack-Richtlinie festlegen, sind alle Ressourcen standardmäßig geschützt. Um Aktualisierungen für alle Ressourcen zuzulassen, fügen wir eine <code class="code">Allow</code>-Anweisung hinzu, die alle Aktionen für alle Ressourcen zulässt. Zwar gibt die <code class="code">Allow</code>-Anweisung alle Ressourcen an, jedoch überschreibt die explizite <code class="code">Deny</code>-Anweisung diese Anweisung für die Ressource mit der logischen ID <code class="code">ProductionDatabase</code>. Diese <code class="code">Deny</code>-Anweisung verhindert sämtliche Aktualisierungsaktionen, wie z. B. Ersetzung oder Löschung, für die <code class="code">ProductionDatabase</code>-Ressource.</p>
    <p>Das <code class="code">Principal</code>-Element ist erforderlich, unterstützt aber nur den Platzhalter (<code class="code">*</code>), was bedeutet, dass die Anweisung für alle <a href="https://docs.aws.amazon.com/glossary/latest/reference/glos-chap.html#principal">Prinzipale</a> gilt.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Während einer Stack-Aktualisierung aktualisiert AWS CloudFormation automatisch Ressourcen, die von anderen aktualisierten Ressourcen abhängen. Beispielsweise AWS CloudFormation aktualisiert eine Ressource, die auf eine aktualisierte Ressource verweist. AWS CloudFormation führt keine physischen Änderungen, z. B. an der Ressourcen-ID, an automatisch aktualisierten Ressourcen durch. Wenn diesen Ressourcen jedoch eine Stack-Richtlinie zugeordnet ist, müssen Sie über die Berechtigung verfügen, diese zu aktualisieren.</p></div></div>
   
   <h2 id="stack-policy-reference">Definieren einer Stack-Richtlinie</h2>
    <p>Wenn Sie ein Stack erstellen, ist keine Stack-Richtlinie festgelegt, sodass alle Aktualisierungsaktionen für alle Ressourcen zulässig sind. Um Stack-Ressourcen vor Aktualisierungsaktionen zu schützen, definieren Sie eine Stack-Richtlinie und legen Sie diese dann für den Stack fest. Eine Stack-Richtlinie ist ein JSON-Dokument, das die AWS CloudFormation Stack-Aktualisierungsaktionen definiert, die AWS CloudFormation Benutzer ausführen können, und die Ressourcen, für die die Aktionen gelten. Sie legen die Stack-Richtlinie bei der Erstellung eines Stacks fest, indem Sie eine Textdatei mit der Stack-Richtlinie angeben oder diese eingeben. Wenn Sie eine Stack-Richtlinie für den Stack festlegen, werden Aktualisierungen, die nicht ausdrücklich zugelassen sind, standardmäßig verweigert.</p>
    <p>Sie definieren eine Stack-Richtlinie mit fünf Elemente: <code class="code">Effect</code>, <code class="code">Action</code>, <code class="code">Principal</code>, <code class="code">Resource</code> und <code class="code">Condition</code>. Der folgende Pseudocode veranschaulicht die Stack-Richtlinien-Syntax.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "<code class="replaceable">Deny_or_Allow</code>",
      "Action" : "<code class="replaceable">update_actions</code>",
      "Principal" : "*",
      "Resource" : "LogicalResourceId/<code class="replaceable">resource_logical_ID</code>",
      "Condition" : <span>{</span>
        "<code class="replaceable">StringEquals_or_StringLike</code>" : <span>{</span>
          "ResourceType" : [<code class="replaceable">resource_type, ...</code>]
        }
      }
    }
  ]
}</code></pre>
    <div class="variablelist">
       
       
       
       
       
    <dl>
        <dt><span class="term"><code class="code">Effect</code></span></dt>
        <dd>
          <p>Bestimmt, ob die Aktionen, die Sie angeben, für die angegebene(n) Ressource(n) verweigert oder zugelassen werden. Sie können nur <code class="code">Deny</code> oder <code class="code">Allow</code> festlegen, wie z. B.:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Effect" : "Deny"</code></pre>
          <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Wenn eine Stack-Richtlinie überlappende Anweisungen enthält (Zulassen und Verweigern von Aktualisierungen für eine Ressource), wird eine <code class="code">Deny</code>-Anweisung immer durch eine <code class="code">Allow</code>-Anweisung überschrieben. Um sicherzustellen, dass eine Ressource geschützt ist, verwenden Sie eine <code class="code">Deny</code>-Anweisung für die betreffende Ressource.</p></div></div>
        </dd>
       
        <dt><span class="term">Aktion</span></dt>
        <dd>
          <p>Gibt die Aktualisierungsaktionen an, die verweigert oder zugelassen werden:</p><div class="variablelist">
               
               
               
               
            <dl>
                <dt><span class="term">Update:Modify</span></dt>
                <dd>
                  <p>Gibt Aktualisierungsaktionen an, während denen Ressourcen möglicherweise nicht unterbrochen oder unterbrochen werden, während Änderungen angewendet werden. Alle Ressourcen behalten ihre physischen IDs.</p>
                </dd>
               
                <dt><span class="term">Update:Replace</span></dt>
                <dd>
                  <p>Gibt Aktualisierungsaktionen an, bei denen Ressourcen neu erstellt werden. AWS CloudFormation erstellt eine neue Ressource mit den angegebenen Aktualisierungen und löscht dann die alte Ressource. Da die Ressource neu erstellt wird, hat die neue Ressourcen möglicherweise eine andere physische ID.</p>
                </dd>
               
                <dt><span class="term">Update:Delete</span></dt>
                <dd>
                  <p>Gibt Aktualisierungsaktionen an, während denen Ressourcen entfernt werden. Aktualisierungen, durch die Ressourcen vollständig aus einer Stack-Vorlage entfernt werden, erfordern diese Aktion.</p>
                </dd>
               
                <dt><span class="term">Update:*</span></dt>
                <dd>
                  <p>Gibt alle Aktualisierungsaktionen an. Das Sternchen ist ein Platzhalter, der für alle Aktualisierungsaktionen steht.</p>
                </dd>
              </dl></div>
          <p>Im folgenden Beispiel wird gezeigt, wie Sie nur die Ersetzungs- und Löschungsaktionen angeben:</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Action" : ["Update:Replace", "Update:Delete"]</code></pre>
          <p>Um alle Aktualisierungsaktionen außer einer zuzulassen, verwenden Sie <code class="code">NotAction</code>. Um beispielsweise alle Aktualisierungsaktionen außer <code class="code">Update:Delete</code> zuzulassen, verwenden Sie <code class="code">NotAction</code>, wie im folgenden Beispiel veranschaulicht:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Allow",
      "NotAction" : "Update:Delete",
      "Principal": "*",
      "Resource" : "*"
    }
  ]
}</code></pre>
          <p>Weitere Informationen zu Stack-Aktualisierungen finden Sie unter <a href="./using-cfn-updating-stacks.html">AWS CloudFormation-Stack-Updates</a>.</p>
        </dd>
       
        <dt><span class="term">Auftraggeber</span></dt>
        <dd>
          <p>Das <code class="code">Principal</code>-Element gibt die Entität an, für die die Richtlinie gilt. Dieses Element ist erforderlich, unterstützt aber nur den Platzhalter (<code class="code">*</code>), was bedeutet, dass die Richtlinie für alle <a href="https://docs.aws.amazon.com/glossary/latest/reference/glos-chap.html#principal">Prinzipale</a> gilt.</p>
        </dd>
       
        <dt><span class="term">Ressource</span></dt>
        <dd>
          <p>Gibt die logischen IDs der Ressourcen an, für die die Richtlinie gilt. Um <a href="./aws-template-resource-type-ref.html">Arten von Ressourcen</a> anzugeben, verwenden Sie das <code class="code">Condition</code>-Element.</p>
          <p>Um eine einzelne Ressource anzugeben, verwenden Sie deren logische ID. Beispielsweise:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Resource" : ["LogicalResourceId/myEC2instance"]</code></pre>
          <p>Sie können einen Platzhalter mit logischen IDs verwenden. Wenn Sie beispielsweise ein gängiges logisches ID-Präfix für alle verwandten Ressourcen verwenden, können Sie alle mit einem Platzhalter angeben:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Resource" : ["LogicalResourceId/CriticalResource*"]</code></pre>
          <p>Sie können auch ein <code class="code">Not</code>-Element mit Ressourcen verwenden. Um beispielsweise Aktualisierungen für alle Ressourcen außer einer zuzulassen, verwenden Sie ein <code class="code">NotResource</code>-Element, um diese Ressource zu schützen:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Allow",
      "Action" : "Update:*",
      "Principal": "*",
      "NotResource" : "LogicalResourceId/ProductionDatabase"
    }
  ]
}</code></pre>
          <p>Wenn Sie eine Stack-Richtlinie festlegen, werden Aktualisierungen, die nicht ausdrücklich zugelassen sind, verweigert. Wenn Sie Aktualisierungen für alle Ressourcen außer der <code class="code">ProductionDatabase</code>-Ressource zulassen, verweigern Sie Aktualisierungen der <code class="code">ProductionDatabase</code>-Ressource.</p>
        </dd>
       
        <dt><span class="term">Bedingungen</span></dt>
        <dd>
          <p>Gibt den <a href="./aws-template-resource-type-ref.html">Ressourcentyp</a> an, für den die Richtlinie gilt. Um die logischen IDs bestimmter Ressourcen anzugeben, verwenden Sie das <code class="code">Resource</code>-Element.</p>
          <p>Sie können einen Ressourcentyp festlegen, z. B. alle EC2 Instances und RDS-DB-Instances, wie im folgenden Beispiel veranschaulicht:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
  <span>{</span>
    "Effect" : "Deny",
    "Principal" : "*",
    "Action" : "Update:*",
    "Resource" : "*",
    "Condition" : <span>{</span>
      "StringEquals" : <span>{</span>
        "ResourceType" : ["AWS::EC2::Instance", "AWS::RDS::DBInstance"]
      }
    }
  },
  <span>{</span>
    "Effect" : "Allow",
    "Principal" : "*",
    "Action" : "Update:*",
    "Resource" : "*"
  }
  ]
}</code></pre>
          <p>Die <code class="code">Allow</code>-Anweisung erteilt Aktualisierungsberechtigungen für alle Ressourcen und die <code class="code">Deny</code>-Anweisung verweigert Aktualisierungen für EC2 Instances und RDS-DB-Instances. Die <code class="code">Deny</code>-Anweisung überschreibt immer Zulassungsaktionen.</p>
          <p>Sie können einen Platzhalter mit Ressourcentypen verwenden. Sie können beispielsweise Aktualisierungsberechtigungen für alle Amazon EC2-Ressourcen verweigern, z. B. Instances, Sicherheitsgruppen und Subnetze, indem Sie wie im folgenden Beispiel einen Platzhalter verwenden:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Condition" : <span>{</span>
  "StringLike" : <span>{</span>
    "ResourceType" : ["AWS::EC2::*"]
  }
}</code></pre>
          <p>Sie müssen die <code class="code">StringLike</code>-Bedingung verwenden, wenn Sie Platzhalter verwenden.</p>
        </dd>
      </dl></div>
   
   <h2 id="protect-stack-resources-protecting">Festlegen einer Stack-Richtlinie</h2>
    <p>Sie können die -Konsole oder verwenden AWS CLI , um eine Stack-Richtlinie anzuwenden, wenn Sie einen Stack erstellen. Sie können auch die verwenden AWS CLI , um eine Stack-Richtlinie auf einen vorhandenen Stack anzuwenden. Nachdem Sie eine Stack-Richtlinie angewendet haben, können Sie sie nicht aus dem Stack entfernen, aber Sie können die verwenden, AWS CLI um sie zu ändern.</p>
    <p>Stack-Richtlinien gelten für alle AWS CloudFormation Benutzer, die versuchen, den Stack zu aktualisieren. Sie können unterschiedlichen Benutzern keinen verschiedenen Stack-Richtlinien zuordnen.</p>
    <p>Informationen zum Schreiben von Stack-Richtlinien finden Sie unter <a href="#stack-policy-reference">Definieren einer Stack-Richtlinie</a>.</p>
    <div class="procedure"><h6>So legen Sie eine Stack-Richtlinie beim Erstellen eines Stacks fest (Konsole)</h6><ol><li><p>Öffnen Sie die - AWS CloudFormation Konsole unter <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
        <p>Wählen Sie auf der Seite <b>CloudFormation Stacks</b> die Option <b>Stack erstellen aus</b>.</p>
      </li><li>
        <p>Erweitern Sie im Assistenten für das Erstellen eines Stacks auf der Seite <b>Configure stack options (Stack-Optionen konfigurieren)</b> den Abschnitt <b>Advanced (Erweitert)</b> und wählen Sie dann <b>Stack policy (Stack-Richtlinie)</b> aus.</p>
      </li><li>
        <p>Geben Sie die Stack-Richtlinie an:</p>
        <div class="itemizedlist">
           
           
        <ul class="itemizedlist"><li class="listitem"><p>Um eine Richtlinie direkt in der Konsole zu schreiben, wählen Sie <b>Enter stack policy (Stack-Richtlinie eingeben)</b> aus und geben Sie die Stack-Richtlinie direkt in das Textfeld ein.</p></li><li class="listitem"><p>Um eine Richtlinie zu verwenden, die in einer separaten Datei definiert ist, wählen Sie <b>Upload a file (Datei hochladen)</b> und dann <b>Choose file (Datei auswählen)</b> aus, um die Datei auszuwählen, die die Stack-Richtlinie enthält.</p></li></ul></div>
      </li></ol></div>
    <div class="procedure"><h6>So legen Sie eine Stack-Richtlinie beim Erstellen eines Stacks fest (AWS CLI)</h6><ul><li>
        <p>Verwenden Sie den Befehl <code class="code"><a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/create-stack.html">aws cloudformation create-stack</a></code> mit der Option <code class="code">--stack-policy-body</code>, um eine geänderte Richtlinie einzugeben, oder der Option <code class="code">--stack-policy-url</code>, um eine Datei anzugeben, die die Richtlinie enthält. </p>
      </li></ul></div>
    <div class="procedure"><h6>So legen Sie eine Stack-Richtlinie für einen vorhandenen Stack fest (AWS CLI nur )</h6><ul><li>
        <p>Verwenden Sie den Befehl <code class="code"><a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/set-stack-policy.html">aws cloudformation set-stack-policy</a></code> mit der Option <code class="code">--stack-policy-body</code>, um eine geänderte Richtlinie einzugeben, oder der Option <code class="code">--stack-policy-url</code>, um eine Datei anzugeben, die die Richtlinie enthält.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Um einem vorhandenen Stack eine Richtlinie hinzuzufügen, müssen Sie über die Berechtigung für die AWS CloudFormation <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_SetStackPolicy.html">SetStackPolicy</a></code> Aktion verfügen.</p></div></div>
      </li></ul></div>
   
   <h2 id="protect-stack-resources-updating">Aktualisieren geschützter Ressourcen</h2>
    <p>Um geschützte Ressourcen zu aktualisieren, erstellen Sie eine temporäre Richtlinie, die die Stack-Richtlinie überschreibt und Aktualisierungen für diese Ressourcen zulässt. Geben Sie die Überschreibungsrichtlinie ab, wenn Sie den Stack aktualisieren. Die Überschreibungsrichtlinie ändert die Stack-Richtlinie nicht dauerhaft.</p>
    <p>Um geschützte Ressourcen zu aktualisieren, müssen Sie über die Berechtigung zur Verwendung der AWS CloudFormation -<code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_SetStackPolicy.html">SetStackPolicy</a></code>Aktion verfügen. Informationen zum Festlegen von AWS CloudFormation Berechtigungen finden Sie unter <a href="./using-iam-template.html">Steuern des Zugriffs mit AWS Identity and Access Management</a>.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Während einer Stack-Aktualisierung aktualisiert AWS CloudFormation automatisch Ressourcen, die von anderen aktualisierten Ressourcen abhängen. Beispielsweise AWS CloudFormation aktualisiert eine Ressource, die auf eine aktualisierte Ressource verweist. AWS CloudFormation führt keine physischen Änderungen, z. B. die ID der Ressourcen, an automatisch aktualisierten Ressourcen durch. Wenn diesen Ressourcen jedoch eine Stack-Richtlinie zugeordnet ist, müssen Sie über die Berechtigung verfügen, diese zu aktualisieren.</p></div></div>
    <div class="procedure"><h6>So aktualisieren Sie eine geschützte Ressource (Konsole)</h6><ol><li><p>Öffnen Sie die - AWS CloudFormation Konsole unter <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
        <p>Wählen Sie den Stack aus, den Sie aktualisieren möchten. Wählen Sie <b>Stack actions (Stack-Aktionen)</b> und anschließend <b>Update Stack (Stack aktualisieren)</b> aus.</p>
      </li><li>
        <p>Wenn Sie die Stack-Vorlage <em>nicht</em> geändert haben, wählen Sie <b>Use current template (Aktuelle Vorlage verwenden)</b> aus und klicken Sie dann auf <b>Next (Weiter)</b>. Wenn Sie die Vorlage geändert haben, wählen Sie <b>Replace current template (Aktuelle Vorlage ersetzen)</b> aus und geben Sie den Speicherort der aktualisierten Vorlage im Abschnitt <b>Specify template (Vorlage angeben)</b> an:</p>
        <div class="itemizedlist">
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>Für eine lokal auf Ihrem Computer gespeicherte Vorlage wählen Sie <b>Upload a template file (Vorlagendatei hochladen)</b> aus. Wählen Sie <b>Choose File</b>, um zur Datei zu navigieren. Wählen Sie die Datei aus und klicken Sie auf <b>Weiter</b>.</p>
          </li><li class="listitem">
            <p>Für eine in einem Amazon S3-Bucket gespeicherte Vorlage wählen Sie <b>Amazon S3-URL</b> aus. Geben Sie die URL für die Vorlage ein und klicken Sie dann auf <b>Weiter</b>.</p>
            <p>Wenn Sie über eine Vorlage in einem Bucket mit aktiviertem Versioning verfügen, können Sie eine bestimmte Version der Vorlage angeben, z. B. <code class="code">https://s3.amazonaws.com/templates/myTemplate.template?versionId=123ab1cdeKdOW5IH4GAcYbEngcpTJTDW</code>. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/AmazonS3/latest/user-guide/managing-objects-versioned-bucket.html">Verwalten von Objekten in einem Bucket mit aktiviertem Versioning</a> im <em>Benutzerhandbuch für Amazon Simple Storage Service</em>.</p>
          </li></ul></div>
      </li><li>
        <p>Wenn Ihre Vorlage Parameter enthält, geben Sie auf der Seite <b>Specify stack details (Stack-Details angeben)</b> die Parameterwerte ein oder ändern Sie sie und wählen Sie dann <b>Next (Weiter)</b> aus.</p>
        <p>AWS CloudFormation füllt jeden Parameter mit dem Wert aus, der derzeit im Stack festgelegt ist, mit Ausnahme von Parametern, die mit dem -<code class="code">NoEcho</code>Attribut deklariert sind. Sie können die aktuellen Werte für diese Parameter verwenden, indem Sie <b>Use existing value (Existierenden Wert verwenden)</b> auswählen.</p>
        <p>Weitere Informationen zum Maskieren vertraulicher Daten mit <code class="code">NoEcho</code> sowie zum Verwenden dynamischer Parameter zur Verwaltung von Secrets enthält die bewährte Methode <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html#creds">Keine Anmeldeinformationen in Ihre Vorlagen einbetten</a>.</p>
      </li><li>
        <p>Geben Sie eine Überschreibungs-Stack-Richtlinie an.</p>
        <ol><li><p>Wählen Sie auf der Seite <b>Configure stack options (Stack-Optionen konfigurieren)</b> im Abschnitt <b>Advanced options (Erweiterte Optionen)</b> die Option <b>Stack policy (Stack-Richtlinie)</b> aus.</p></li><li><p>Wählen Sie <b>Upload a file (Datei hochladen)</b> aus.</p></li><li><p>Klicken Sie auf <b>Choose File (Datei auswählen)</b> und navigieren Sie zu der Datei, die die überschreibende Stack-Richtlinie enthält, oder geben Sie eine Richtlinie ein.</p></li><li><p>Wählen Sie <b>Weiter</b> aus.</p></li></ol>
        
        <p>Die Überschreibungsrichtlinie muss eine <code class="code">Allow</code>-Anweisung für die geschützten Ressourcen angeben, die Sie aktualisieren möchten. Um beispielsweise alle geschützten Ressourcen zu aktualisieren, geben Sie eine temporäre Überschreibungsrichtlinie an, die alle Aktualisierungen zulässt:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Allow",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "*"
    }
  ]
}</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>AWS CloudFormation wendet die Überschreibungsrichtlinie nur während dieser Aktualisierung an. Die Überschreibungsrichtlinie ändert die Stack-Richtlinie nicht dauerhaft. Informationen zum Ändern einer Stack-Richtlinie finden Sie unter <a href="#protect-stack-resources-modifying">Ändern einer Stack-Richtlinie </a>.</p></div></div>
      </li><li>
        <p>Überprüfen Sie die Stack-Informationen und die Änderungen, die Sie übermittelt haben.</p>
        <p>Überprüfen Sie, ob Sie die richtigen Informationen gesendet haben, z. B. die richtigen Parameterwerte oder die richtige Vorlagen-URL. Wenn Ihre Vorlage IAM-Ressourcen enthält, wählen Sie <b>I acknowledge that this template may create IAM resources</b>, um anzugeben, dass Sie IAM-Ressourcen in der Vorlage verwenden möchten. Weitere Informationen zum Verwenden von IAM-Ressourcen in Vorlagen finden Sie unter <a href="./using-iam-template.html">Steuern des Zugriffs mit AWS Identity and Access Management</a>.</p>
        <p>Überprüfen Sie im Abschnitt <b>Vorschau Ihrer Änderungen</b>, ob alle erwarteten Änderungen vornehmen AWS CloudFormation wird. Überprüfen Sie beispielsweise, ob die Ressourcen AWS CloudFormation hinzufügt, entfernt und ändert, die Sie hinzufügen, entfernen oder ändern möchten. AWS CloudFormation generiert diese Vorschau, indem ein Änderungssatz für den Stack erstellt wird. Weitere Informationen finden Sie unter <a href="./using-cfn-updating-stacks-changesets.html">Aktualisieren von Stacks mithilfe von Änderungssätzen</a>.</p>
      </li><li>
        <p>Wenn Sie mit Ihren Änderungen zufrieden sind, klicken Sie auf <b>Update (Aktualisieren)</b>.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>An dieser Stelle haben Sie auch die Möglichkeit, den Änderungssatz anzusehen, um Ihre vorgeschlagenen Updates sorgfältiger zu überprüfen. Klicken Sie dazu auf <b>Änderungssatz anzeigen</b> anstelle von <b>Aktualisieren.</b>  CloudFormation zeigt den auf der Grundlage Ihrer Aktualisierungen generierten Änderungssatz an. Wenn Sie bereit sind, den Stack zu aktualisieren, klicken Sie auf <b>Execute (Ausführen)</b>.</p></div></div>
        <p>CloudFormation zeigt die Seite <b>Stack-Details</b> für Ihren Stack an. Ihr Stack verfügt jetzt über den Status <b>UPDATE_IN_PROGRESS</b>. Nachdem die Aktualisierung des Stacks erfolgreich abgeschlossen  CloudFormation hat, wird der Stack-Status auf <b>UPDATE_COMPLETE</b> gesetzt.</p>
        <p>Wenn die Stack-Aktualisierung fehlschlägt, setzt Änderungen  CloudFormationautomatisch zurück und legt den Stack-Status auf <b>UPDATE_ROLLBACK_COMPLETE</b> fest.</p>
      </li></ol></div>
    <div class="procedure"><h6>So aktualisieren Sie eine geschützte Ressource (AWS CLI)</h6><ul><li>
        <p>Verwenden Sie den Befehl <code class="code"><a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/update-stack.html">aws cloudformation update-stack</a></code> mit der Option <code class="code">--stack-policy-during-update-body</code>, um eine geänderte Richtlinie einzugeben, oder der Option <code class="code">--stack-policy-during-update-url</code>, um eine Datei anzugeben, die die Richtlinie enthält.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>AWS CloudFormation wendet die Überschreibungsrichtlinie nur während dieser Aktualisierung an. Die Überschreibungsrichtlinie ändert die Stack-Richtlinie nicht dauerhaft. Informationen zum Ändern einer Stack-Richtlinie finden Sie unter <a href="#protect-stack-resources-modifying">Ändern einer Stack-Richtlinie </a>.</p></div></div>
      </li></ul></div>
   
   <h2 id="protect-stack-resources-modifying">Ändern einer Stack-Richtlinie </h2>
    <p>Um zusätzliche Ressourcen zu schützen oder Schutz von Ressourcen zu entfernen, ändern Sie die Stack-Richtlinie. Wenn Sie beispielsweise eine Datenbank, die Sie schützen möchten, zu einem Stack hinzufügen, fügen Sie der Stack-Richtlinie eine <code class="code">Deny</code>-Anweisung für diese Datenbank hinzu. Um die Richtlinie zu ändern, benötigen Sie Berechtigungen zum Verwenden der <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_SetStackPolicy.html">SetStackPolicy</a></code>-Aktion.</p>
    <p>Verwenden Sie die AWS CLI , um Stack-Richtlinien zu ändern.</p>
    <div class="procedure"><h6>So ändern Sie eine Stack-Richtlinie (AWS CLI)</h6><ul><li>
        <p>Verwenden Sie den Befehl <code class="code"><a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/set-stack-policy.html">aws cloudformation set-stack-policy</a></code> mit der Option <code class="code">--stack-policy-body</code>, um eine geänderte Richtlinie einzugeben, oder der Option <code class="code">--stack-policy-url</code>, um eine Datei anzugeben, die die Richtlinie enthält.</p>
      </li></ul></div>
    <p>Stack-Richtlinien können nicht gelöscht werden. Zum Entfernen des gesamten Schutzes von allen Ressourcen, ändern Sie die Richtlinie, sodass alle Aktionen für alle Ressourcen ausdrücklich zugelassen werden. Mit der folgenden Richtlinie können alle Aktualisierungen für alle Ressourcen durchgeführt werden:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Allow",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "*"
    }
  ]
}</code></pre>
   
   <h2 id="stack-policy-samples">Weitere Beispiel-Stack-Richtlinien</h2>
    <p>Die folgenden Beispielrichtlinien zeigen, wie Sie Aktualisierungen aller Stack-Ressourcen und spezifischer Ressourcen verhindern und wie Sie bestimmte Arten von Aktualisierungen verhindern.</p>
     
     <h3 id="w9aac25c17c29c21b5">Verhindern von Aktualisierungen aller Stack-Ressourcen</h3>
      <p>Um Aktualisierungen aller Stack-Ressourcen zu verhindern, gibt die folgende Richtlinie eine <code class="code">Deny</code>-Anweisung für alle Aktualisierungsaktionen für alle Ressourcen an.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Deny",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "*"
    }
  ]
}</code></pre>
     
     
     <h3 id="w9aac25c17c29c21b7">Verhindern von Aktualisierungen an einer einzelnen Ressource</h3>
      <p>Mit der folgenden Richtlinie werden alle Aktualisierungsaktionen in der Datenbank mit der logischen ID <code class="code">MyDatabase</code> verweigert. Es werden alle Aktualisierungsaktionen für alle anderen Stack-Ressourcen mit einer <code class="code">Allow</code>-Anweisung zugelassen. Die <code class="code">Allow</code>-Anweisung gilt nicht für die <code class="code">MyDatabase</code>-Ressource, da die <code class="code">Deny</code>-Anweisung immer Zulassungsaktionen überschreibt.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Deny",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "LogicalResourceId/MyDatabase"
    },
    <span>{</span>
      "Effect" : "Allow",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "*"
    }
  ]
}</code></pre>
      <p>Sie können dasselbe Ergebnis wie im vorherigen Beispiel erzielen, wenn Sie eine Standardverweigerung verwenden. Wenn Sie eine Stack-Richtlinie festlegen, AWS CloudFormation verweigert jede Aktualisierung, die nicht ausdrücklich erlaubt ist. Die folgende Richtlinie lässt Aktualisierungen für alle Ressourcen zu, außer für die <code class="code">ProductionDatabase</code>-Ressource, die standardmäßig verweigert wird.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Allow",
      "Action" : "Update:*",
      "Principal": "*",
      "NotResource" : "LogicalResourceId/ProductionDatabase"
    }
  ]
}</code></pre>
      <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Es gibt Risiken bei der Verwendung einer Standardverweigerung. Wenn es an einer anderen Stelle in der Richtlinie eine <code class="code">Allow</code>-Anweisung gibt (z. B. eine <code class="code">Allow</code>-Anweisung, die einen Platzhalter verwendet), können Sie unwissentlich Aktualisierungsberechtigungen für Ressourcen erteilen, die Sie gar nicht aktualisieren möchten. Da eine ausdrückliche Verweigerung sämtliche Zulassungsaktionen überschreibt, können Sie sicherstellen, dass eine Ressource durch Verwendung einer <code class="code">Deny</code>-Anweisung geschützt wird.</p></div></div>
     
     
     <h3 id="w9aac25c17c29c21b9">Verhindern von Aktualisierungen aller Instances eines Ressourcentyps</h3>
      <p>Mit der folgenden Richtlinie werden alle Aktualisierungsaktionen für den RDS-DB-Instance-Ressourcentyp verweigert. Es werden alle Aktualisierungsaktionen für alle anderen Stack-Ressourcen mit einer <code class="code">Allow</code>-Anweisung zugelassen. Die <code class="code">Allow</code>-Anweisung gilt nicht für die RDS-DB-Instance-Ressourcen, da eine <code class="code">Deny</code>-Anweisung immer Zulassungsaktionen überschreibt.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Deny",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "*",
      "Condition" : <span>{</span>
        "StringEquals" : <span>{</span>
          "ResourceType" : ["AWS::RDS::DBInstance"]
        }
      }
    },
    <span>{</span>
      "Effect" : "Allow",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "*"
    }
  ]
}</code></pre>
     
     
     <h3 id="w9aac25c17c29c21c11">Verhindern von Ersetzungsaktualisierungen für eine Instance</h3>
      <p>Mit der folgenden Richtlinie werden Aktualisierungen verweigert, die zu einer Ersetzung der Instance mit der logischen ID <code class="code">MyInstance</code> führen würden. Es werden alle Aktualisierungsaktionen für alle anderen Stack-Ressourcen mit einer <code class="code">Allow</code>-Anweisung zugelassen. Die <code class="code">Allow</code>-Anweisung gilt nicht für die <code class="code">MyInstance</code>-Ressource, da die <code class="code">Deny</code>-Anweisung immer Zulassungsaktionen überschreibt.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Deny",
      "Action" : "Update:Replace",
      "Principal": "*",
      "Resource" : "LogicalResourceId/MyInstance"
    },
    <span>{</span>
      "Effect" : "Allow",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "*"
    }
  ]
}</code></pre>
     
     
     <h3 id="w9aac25c17c29c21c13">Verhindern von Aktualisierungen an verschachtelten Stacks</h3>
      <p>Die folgende Richtlinie verweigert alle Aktualisierungsaktionen für den AWS CloudFormation Stack-Ressourcentyp (verschachtelte Stacks). Es werden alle Aktualisierungsaktionen für alle anderen Stack-Ressourcen mit einer <code class="code">Allow</code>-Anweisung zugelassen. Die <code class="code">Allow</code> Anweisung gilt nicht für die AWS CloudFormationStack-Ressourcen, da die <code class="code">Deny</code> Anweisung immer Zulassungsaktionen überschreibt.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement" : [
    <span>{</span>
      "Effect" : "Deny",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "*",
      "Condition" : <span>{</span>
        "StringEquals" : <span>{</span>
          "ResourceType" : ["AWS::CloudFormation::Stack"]
        }
      }
    },
    <span>{</span>
      "Effect" : "Allow",
      "Action" : "Update:*",
      "Principal": "*",
      "Resource" : "*"
    }
  ]
}</code></pre>
     
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./using-cfn--stack-update-cancel.html">Stornieren einer Stack-Aktualisierung</div><div id="next" class="next-link" accesskey="n" href="./using-cfn-updating-stacks-continueupdaterollback.html">Rollback einer Aktualisierung fortsetzen</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>