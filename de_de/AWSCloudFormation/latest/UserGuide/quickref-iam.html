<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS Identity and Access Management -Vorlagenausschnitte - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="quickref-iam" /><meta name="default_state" content="quickref-iam" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html" /><meta name="description" content="Verwenden Sie diese Beispiel-Vorlagenausschnitte mit Ihren AWS Identity and Access Management Ressourcen in AWS CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Leitfaden" /><meta name="abstract" content="Erstellen und verwalten Sie AWS Infrastrukturbereitstellungen vorhersehbar und wiederholt mithilfe von AWS CloudFormation mit diesem Benutzerhandbuch." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-iam.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Leitfaden" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Leitfaden" /><meta id="panorama-serviceConsolePage" value="AWS Identity and Access Management -Vorlagenausschnitte" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS Identity and Access Management -Vorlagenausschnitte - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,Ressourcenbereitstellung,Ressourcenkonfiguration,Infrastrukturverwaltung,CloudFormer,CloudFormation -Stack,CloudFormation Stackset,CloudFormation -Vorlage,Änderungssatz" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Leitfaden",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Arbeiten mit AWS CloudFormation-Vorlagen",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Vorlagenausschnitte",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/CHAP_TemplateQuickRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "AWS Identity and Access Management -Vorlagenausschnitte",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/CHAP_TemplateQuickRef.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Leitfaden</a></div><div id="page-toc-src"><a href="#scenario-iam-user">Deklarieren einer IAM-Benutzerressource</a><a href="#scenario-iam-accesskey">Deklarieren einer IAM-Zugriffsschlüssel-Ressource</a><a href="#scenario-iam-group">Deklarieren einer IAM-Gruppenressource</a><a href="#scenario-iam-addusertogroup">Hinzufügen von Benutzern zu einer Gruppe</a><a href="#scenario-iam-policy">Deklarieren einer IAM-Richtlinie</a><a href="#scenario-bucket-policy">Deklarieren einer Amazon S3-Bucket-Richtlinie</a><a href="#scenario-sns-policy">Deklarieren einer Amazon SNS-Themenrichtlinie</a><a href="#scenario-sqs-policy">Deklarieren einer Amazon SQS-Richtlinie</a><a href="#scenarios-iamroles">Vorlagenbeispiele für IAM-Rollen</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="quickref-iam">AWS Identity and Access Management -Vorlagenausschnitte</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Dieser Abschnitt enthält AWS Identity and Access Management Vorlagenausschnitte.</p><div class="highlights" id="inline-topiclist"><h6>Themen</h6><ul><li><a href="#scenario-iam-user">Deklarieren einer IAM-Benutzerressource</a></li><li><a href="#scenario-iam-accesskey">Deklarieren einer IAM-Zugriffsschlüssel-Ressource</a></li><li><a href="#scenario-iam-group">Deklarieren einer IAM-Gruppenressource</a></li><li><a href="#scenario-iam-addusertogroup">Hinzufügen von Benutzern zu einer Gruppe</a></li><li><a href="#scenario-iam-policy">Deklarieren einer IAM-Richtlinie</a></li><li><a href="#scenario-bucket-policy">Deklarieren einer Amazon S3-Bucket-Richtlinie</a></li><li><a href="#scenario-sns-policy">Deklarieren einer Amazon SNS-Themenrichtlinie</a></li><li><a href="#scenario-sqs-policy">Deklarieren einer Amazon SQS-Richtlinie</a></li><li><a href="#scenarios-iamroles">Vorlagenbeispiele für IAM-Rollen</a></li></ul></div><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Beim Erstellen oder Aktualisieren eines Stacks anhand einer Vorlage, die IAM-Ressourcen enthält, müssen Sie die Verwendung von IAM-Funktionen bestätigen. Weitere Informationen zum Verwenden von IAM-Ressourcen in Vorlagen finden Sie unter <a href="./using-iam-template.html">Steuern des Zugriffs mit AWS Identity and Access Management</a>.</p></div></div>
      <h2 id="scenario-iam-user">Deklarieren einer IAM-Benutzerressource</h2>

      <p>Dieses Codefragment zeigt, wie eine <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html">AWS::IAM::User</a></code>-Ressource deklariert wird, um einen IAM-Benutzer zu erstellen. Der Benutzer wird mit dem Pfad (<code class="code">"/"</code>) und einem Anmeldungsprofil mit dem Passwort (<code class="code">myP@ssW0rd</code>) deklariert.</p>

      <p>Im Richtliniendokument namens <code class="code">giveaccesstoqueueonly</code> erhält der Benutzer die Berechtigung zum Ausführen aller Amazon SQS-Aktionen auf der Amazon SQS-Warteschlangenressource <code class="code">myqueue</code>. Der Zugriff auf alle anderen Amazon SQS-Warteschlangenressourcen wird verweigert. Die <code class="code"><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code>-Funktion ruft das Arn-Attribut der <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html">AWS::SQS::Queue</a></code>-Ressource <code class="code">myqueue</code> ab.</p>

      <p>Das Richtliniendokument namens <code class="code">giveaccesstotopiconly</code> wird dem Benutzer hinzugefügt, um ihm die Berechtigung zum Ausführen aller Amazon SNS-Aktionen auf der Amazon SNS-Themenressource <code class="code">mytopic</code> zu erteilen und den Zugriff auf alle anderen Amazon SNS-Ressourcen zu verweigern. Die <a href="./intrinsic-function-reference-ref.html">Ref</a>-Funktion ruft das ARN-Attribut der <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html">AWS::SNS::Topic</a></code>-Ressource <code class="code">mytopic</code> ab.</p>
      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-1.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myuser" : <span>{</span>
   "Type" : "AWS::IAM::User",
   "Properties" : <span>{</span>
      "Path" : "/",
      "LoginProfile" : <span>{</span>
         "Password" : "myP@ssW0rd"
      },
      "Policies" : [ <span>{</span>
         "PolicyName" : "giveaccesstoqueueonly",
         "PolicyDocument" : <span>{</span>
            "Version": "2012-10-17",
            "Statement" : [ <span>{</span>
               "Effect" : "Allow",
               "Action" : [ "sqs:*" ],
               "Resource" : [ <span>{</span>
                  "Fn::GetAtt" : [ "myqueue", "Arn" ]
               } ]
            }, <span>{</span>
               "Effect" : "Deny",
               "Action" : [ "sqs:*" ],
               "NotResource" : [ <span>{</span>
                  "Fn::GetAtt" : [ "myqueue", "Arn" ]
               } ]
            }
         ] }
      }, <span>{</span>
         "PolicyName" : "giveaccesstotopiconly",
         "PolicyDocument" : <span>{</span>
            "Version": "2012-10-17",
            "Statement" : [ <span>{</span>
               "Effect" : "Allow",
               "Action" : [ "sns:*" ],
               "Resource" : [ <span>{</span> "Ref" : "mytopic" } ]
            }, <span>{</span>
               "Effect" : "Deny",
               "Action" : [ "sns:*" ],
               "NotResource" : [ <span>{</span> "Ref" : "mytopic" } ]
            } ]
         }
      } ]
   }
} </code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-1.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myuser:
  Type: AWS::IAM::User
  Properties:
    Path: "/"
    LoginProfile:
      Password: myP@ssW0rd
    Policies:
    - PolicyName: giveaccesstoqueueonly
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Action:
          - sqs:*
          Resource:
          - !GetAtt myqueue.Arn
        - Effect: Deny
          Action:
          - sqs:*
          NotResource:
          - !GetAtt myqueue.Arn
    - PolicyName: giveaccesstotopiconly
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Action:
          - sns:*
          Resource:
          - !Ref mytopic
        - Effect: Deny
          Action:
          - sns:*
          NotResource:
          - !Ref mytopic</code></pre>
      </div>
    
      <h2 id="scenario-iam-accesskey">Deklarieren einer IAM-Zugriffsschlüssel-Ressource</h2>
       
         <h3 id="quickref-iam-access-key"></h3>
         <p>Dieses Codefragment zeigt eine <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-accesskey.html">AWS::IAM::AccessKey</a></code>-Ressource. Die <code class="code">myaccesskey</code>-Ressource erstellt einen Zugriffsschlüssel und weist ihn einem IAM-Benutzer zu, der in der Vorlage als eine <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html">AWS::IAM::User</a></code>-Ressource deklariert ist.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="quickref-iam-example-2.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myaccesskey" : <span>{</span>
   "Type" : "AWS::IAM::AccessKey",
   "Properties" : <span>{</span>
      "UserName" : <span>{</span> "Ref" : "myuser" }
   }
} </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="quickref-iam-example-2.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myaccesskey:
  Type: AWS::IAM::AccessKey
  Properties:
    UserName:
      !Ref myuser</code></pre>
         </div>
       
       
         <h3 id="quickref-iam-access-key-2"></h3>
         <p>Sie können den geheimen Schlüssel für eine <code class="code">AWS::IAM::AccessKey</code>-Ressource mithilfe der <code class="code"><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code>-Funktion abrufen. Eine Möglichkeit zum Abrufen des geheimen Schlüssels besteht darin, ihn in einen <code class="code">Output</code>-Wert zu setzen. Sie können den Zugriffsschlüssel mit der <code class="code">Ref</code>-Funktion abrufen. Die folgenden <code class="code">Output</code>-Wertdeklarationen rufen den Zugriffsschlüssel und den geheimen Schlüssel für <code class="code">myaccesskey</code> ab.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="quickref-iam-example-3.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"AccessKeyformyaccesskey" : <span>{</span>
   "Value" : <span>{</span> "Ref" : "myaccesskey" }
},
"SecretKeyformyaccesskey" : <span>{</span>
   "Value" : <span>{</span>
      "Fn::GetAtt" : [ "myaccesskey", "SecretAccessKey" ]
   }
} </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="quickref-iam-example-3.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AccessKeyformyaccesskey:
  Value:
    !Ref myaccesskey
SecretKeyformyaccesskey:
  Value: !GetAtt myaccesskey.SecretAccessKey</code></pre>
         </div>
       
       
         <h3 id="quickref-iam-access-key-3"></h3>
         <p>Sie können den AWS Zugriffsschlüssel und den geheimen Schlüssel auch an eine Amazon EC2-Instance oder Auto Scaling-Gruppe übergeben, die in der Vorlage definiert ist. Die folgende <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a></code>-Deklaration verwendet die <code class="code">UserData</code>-Eigenschaft zum Übergeben des Zugriffsschlüssels und geheimen Schlüssels für die <code class="code">myaccesskey</code> Ressource.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="quickref-iam-example-4.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myinstance" : <span>{</span>
   "Type" : "AWS::EC2::Instance",
   "Properties" : <span>{</span>
      "AvailabilityZone" : "<span>us-east-1a</span>",
      "ImageId" : "ami-0ff8a91507f77f867",
      "UserData" : <span>{</span>
         "Fn::Base64" : <span>{</span>
            "Fn::Join" : [
               "", [
                  "ACCESS_KEY=", <span>{</span>
                     "Ref" : "myaccesskey"
                  },
                  "&amp;",
                  "SECRET_KEY=",
                  <span>{</span>
                     "Fn::GetAtt" : [
                        "myaccesskey",
                        "SecretAccessKey"
                     ]
                  }
               ]
            ]
         }
      }
   }
} </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="quickref-iam-example-4.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myinstance:
  Type: AWS::EC2::Instance
  Properties:
    AvailabilityZone: "<span>us-east-1a</span>"
    ImageId: ami-0ff8a91507f77f867
    UserData:
      Fn::Base64: !Sub "ACCESS_KEY=$<span>{</span>myaccesskey}&amp;SECRET_KEY=$<span>{</span>myaccesskey.SecretAccessKey}"</code></pre>
         </div>
       
    
      <h2 id="scenario-iam-group">Deklarieren einer IAM-Gruppenressource</h2>

      <p>Dieses Codefragment zeigt eine <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-group.html">AWS::IAM::Group</a></code>-Ressource. Die Gruppe hat einen Pfad (<code class="code">"/myapplication/"</code>). Das Richtliniendokument namens <code class="code">myapppolicy</code> wird der Gruppe hinzugefügt, um den Benutzern der Gruppe die Berechtigung zum Ausführen aller Amazon SQS-Aktionen auf der Amazon SQS-Warteschlangenressource "myqueue" zu erteilen und den Zugriff auf alle anderen Amazon SQS-Ressourcen außer <code class="code">myqueue</code> zu verweigern.</p>
      <p>Zum Zuweisen einer Richtlinie zu einer Ressource benötigt IAM den Amazon-Ressourcennamen (ARN) für die Ressource. In dem Codebeispiel ruft die <code class="code"><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code>-Funktion den ARN der <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html">AWS::SQS::Queue</a></code>-Ressourcenwarteschlange ab.</p>
      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-5.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"mygroup" : <span>{</span>
   "Type" : "AWS::IAM::Group",
   "Properties" : <span>{</span>
      "Path" : "/myapplication/",
      "Policies" : [ <span>{</span>
         "PolicyName" : "myapppolicy",
         "PolicyDocument" : <span>{</span>
            "Version": "2012-10-17",
            "Statement" : [ <span>{</span>
               "Effect" : "Allow",
               "Action" : [ "sqs:*" ],
               "Resource" : [ <span>{</span>
                  "Fn::GetAtt" : [ "myqueue", "Arn" ]
               } ]
            },
            <span>{</span>
               "Effect" : "Deny",
               "Action" : [ "sqs:*" ],
               "NotResource" : [ <span>{</span> "Fn::GetAtt" : [ "myqueue", "Arn" ] } ]
            }
         ] }
      } ]
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-5.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">mygroup:
  Type: AWS::IAM::Group
  Properties:
    Path: "/myapplication/"
    Policies:
    - PolicyName: myapppolicy
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Action:
          - sqs:*
          Resource: !GetAtt myqueue.Arn
        - Effect: Deny
          Action:
          - sqs:*
          NotResource: !GetAtt myqueue.Arn</code></pre>
      </div>
    
      <h2 id="scenario-iam-addusertogroup">Hinzufügen von Benutzern zu einer Gruppe</h2>

      <p>Die <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-addusertogroup.html">AWS::IAM::UserToGroupAddition</a></code>-Ressource fügt Benutzer zu einer Gruppe hinzu. Im folgenden Codeausschnitt fügt die <code class="code">addUserToGroup</code>-Ressource die folgenden Benutzer zu einer bestehenden Gruppe mit dem Namen <code class="code">myexistinggroup2</code> hinzu: den vorhandenen Benutzer <code class="code">existinguser1</code> und den Benutzer <code class="code">myuser</code>, der in der Vorlage als <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html">AWS::IAM::User</a></code>-Ressource deklariert ist.</p>
      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-6.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"addUserToGroup" : <span>{</span>
   "Type" : "AWS::IAM::UserToGroupAddition",
   "Properties" : <span>{</span>
      "GroupName" : "myexistinggroup2",
      "Users" : [ "existinguser1", <span>{</span> "Ref" : "myuser" } ]
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-6.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">addUserToGroup:
  Type: AWS::IAM::UserToGroupAddition
  Properties:
    GroupName: myexistinggroup2
    Users:
    - existinguser1
    - !Ref myuser</code></pre>
      </div>
    
      <h2 id="scenario-iam-policy">Deklarieren einer IAM-Richtlinie</h2>

      <p>Im folgenden Codeausschnitt wird gezeigt, wie Sie eine Richtlinie erstellen und unter Verwendung einer <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-policy.html">AWS::IAM::Policy</a></code>-Ressource mit dem Namen <code class="code">mypolicy</code> auf mehreren Gruppen anwenden. Die <code class="code">mypolicy</code>-Ressource enthält eine <code class="code">PolicyDocument</code>-Eigenschaft, die <code class="code">GetObject</code>-, <code class="code">PutObject</code>- und <code class="code">PutObjectAcl</code>-Aktionen für die Objekte in dem durch den ARN <code class="code">arn:aws:s3:::myAWSBucket</code> repräsentierten S3-Bucket zulässt. Die <code class="code">mypolicy</code>-Ressource wendet die Richtlinie auf eine vorhandene Gruppe mit dem Namen <code class="code">myexistinggroup1</code> und eine Gruppe <code class="code">mygroup</code> an, die in der Vorlage als <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-group.html">AWS::IAM::Group</a></code>-Ressource deklariert ist. Dieses Beispiel zeigt, wie eine Richtlinie mithilfe der <code class="code">Groups</code>-Eigenschaft auf eine Gruppe angewendet wird. Sie können jedoch auch die <code class="code">Users</code>-Eigenschaft verwenden, um einer Liste von Benutzern ein Richtliniendokument hinzuzufügen.</p>
      <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Die in der <code class="code">AWS::IAM::Policy</code>-Ressource deklarierten Amazon-SNS-Richtlinienaktionen unterscheiden sich von den <a href="#scenario-sns-policy">in der AWS::SNS::TopicPolicy-Ressource deklarierten</a> Amazon-SNS-Themenrichtlinienaktionen. Beispielsweise werden die Richtlinienaktionen <code class="code">sns:Unsubscribe</code> und <code class="code">sns:SetSubscriptionAttributes</code> ausgeführt und sind für die <code class="code">AWS::IAM::Policy</code>-Ressource gültig, für die <code class="code">AWS::SNS::TopicPolicy</code>-Ressource jedoch ungültig. Weitere Informationen über gültige Amazon-SNS-Richtlinienaktionen, die Sie mit der Ressource <code class="code">AWS::IAM::Policy</code> verwenden können, finden Sie unter <a href="https://docs.aws.amazon.com/sns/latest/dg/AccessPolicyLanguage_SpecialInfo.html">Spezielle Informationen für Amazon-SNS-Richtlinien</a> im <em>Entwicklerhandbuch zu Amazon Simple Notification Service</em>.</p></div></div> <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-7.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"mypolicy" : <span>{</span>
   "Type" : "AWS::IAM::Policy",
   "Properties" : <span>{</span>
      "PolicyName" : "mygrouppolicy",
      "PolicyDocument" : <span>{</span>
         "Version": "2012-10-17",
         "Statement" : [ <span>{</span>
            "Effect" : "Allow",
            "Action" : [
               "s3:GetObject" , "s3:PutObject" , "s3:PutObjectAcl" ],
            "Resource" : "arn:aws:s3:::myAWSBucket/*"
         } ]
      },
      "Groups" : [ "myexistinggroup1", <span>{</span> "Ref" : "mygroup" } ]
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-7.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">mypolicy:
  Type: AWS::IAM::Policy
  Properties:
    PolicyName: mygrouppolicy
    PolicyDocument:
      Version: '2012-10-17'
      Statement:
      - Effect: Allow
        Action:
        - s3:GetObject
        - s3:PutObject
        - s3:PutObjectAcl
        Resource: arn:aws:s3:::myAWSBucket/*
    Groups:
    - myexistinggroup1
    - !Ref mygroup</code></pre>
      </div>
    
      <h2 id="scenario-bucket-policy">Deklarieren einer Amazon S3-Bucket-Richtlinie</h2>

      <p>Im folgenden Codeausschnitt wird gezeigt, wie Sie eine Richtlinie erstellen und unter Verwendung der <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::BucketPolicy</a></code>-Ressource auf einen Amazon S3-Bucket anwenden. Die <code class="code">mybucketpolicy</code>-Ressource deklariert ein Richtliniendokument, das dem <code class="code">user1</code>-Benutzer IAM erlaubt, die <code class="code">GetObject</code>-Aktion auf alle Objekte in dem S3-Bucket auszuführen, auf den die Richtlinie angewendet wird. In dem Codebeispiel ruft die <code class="code"><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code>-Funktion den ARN der <code class="code">user1</code>-Ressource ab. Die <code class="code">mybucketpolicy</code>-Ressource wendet die Richtlinie auf die <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::BucketPolicy</a></code>-Ressource mybucket an. Die <code class="code"><a href="./intrinsic-function-reference-ref.html">Ref</a></code>-Funktion ruft den Bucket-Namen der <code class="code">mybucket</code>-Ressource ab.</p>
      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-8.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"mybucketpolicy" : <span>{</span>
   "Type" : "AWS::S3::BucketPolicy",
   "Properties" : <span>{</span>
      "PolicyDocument" : <span>{</span>
         "Id" : "MyPolicy",
         "Version": "2012-10-17",
         "Statement" : [ <span>{</span>
            "Sid" : "ReadAccess",
            "Action" : [ "s3:GetObject" ],
            "Effect" : "Allow",
            "Resource" : <span>{</span> "Fn::Join" : [
                  "", [ "arn:aws:s3:::", <span>{</span> "Ref" : "mybucket" } , "/*" ]
               ] },
            "Principal" : <span>{</span>
               "AWS" : <span>{</span> "Fn::GetAtt" : [ "user1", "Arn" ] }
            }
         } ]
      },
      "Bucket" : <span>{</span> "Ref" : "mybucket" }
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-8.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">mybucketpolicy:
  Type: AWS::S3::BucketPolicy
  Properties:
    PolicyDocument:
      Id: MyPolicy
      Version: '2012-10-17'
      Statement:
      - Sid: ReadAccess
        Action:
        - s3:GetObject
        Effect: Allow
        Resource: !Sub "arn:aws:s3:::$<span>{</span>mybucket}/*"
        Principal:
          AWS: !GetAtt user1.Arn
    Bucket: !Ref mybucket</code></pre>
      </div>
    
      <h2 id="scenario-sns-policy">Deklarieren einer Amazon SNS-Themenrichtlinie</h2>

      <p>Im folgenden Codeausschnitt wird gezeigt, wie Sie eine Richtlinie erstellen und unter Verwendung der <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-policy.html">AWS::SNS::TopicPolicy</a></code>-Ressource auf ein Amazon SNS-Thema anwenden. Die <code class="code">mysnspolicy</code>-Ressource enthält eine <code class="code">PolicyDocument</code>-Eigenschaft, die der <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html">AWS::IAM::User</a></code>-Ressource <code class="code">myuser</code> die Ausführung der <code class="code">Publish</code>-Aktion auf eine <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html">AWS::SNS::Topic</a></code>-Ressource <code class="code">mytopic</code> erlaubt. In dem Codebeispiel ruft die <code class="code"><a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code>-Funktion den ARN für die <code class="code">myuser</code>-Ressource ab und die <code class="code"><a href="./intrinsic-function-reference-ref.html">Ref</a></code>-Funktion ruft den ARN für die <code class="code">mytopic</code>-Ressource ab.</p> <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Die in der <code class="code">AWS::IAM::Policy</code>-Ressource <a href="#scenario-iam-policy">deklarierten Amazon-SNS-Richtlinienaktionen</a> unterscheiden sich von den in der AWS::SNS::TopicPolicy-Ressource deklarierten Amazon-SNS-Themenrichtlinienaktionen. Beispielsweise werden die Richtlinienaktionen <code class="code">sns:Unsubscribe</code> und <code class="code">sns:SetSubscriptionAttributes</code> ausgeführt und sind für die <code class="code">AWS::IAM::Policy</code>-Ressource gültig, für die <code class="code">AWS::SNS::TopicPolicy</code>-Ressource jedoch ungültig. Weitere Informationen über gültige Amazon-SNS-Richtlinienaktionen, die Sie mit der Ressource <code class="code">AWS::IAM::Policy</code> verwenden können, finden Sie unter <a href="https://docs.aws.amazon.com/sns/latest/dg/AccessPolicyLanguage_SpecialInfo.html">Spezielle Informationen für Amazon-SNS-Richtlinien</a> im <em>Entwicklerhandbuch zu Amazon Simple Notification Service</em>.</p></div></div> <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-9.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"mysnspolicy" : <span>{</span>
   "Type" : "AWS::SNS::TopicPolicy",
   "Properties" : <span>{</span>
      "PolicyDocument" :  <span>{</span>
         "Id" : "MyTopicPolicy",
         "Version" : "2012-10-17",
         "Statement" : [ <span>{</span>
            "Sid" : "My-statement-id",
            "Effect" : "Allow",
            "Principal" : <span>{</span>
               "AWS" : <span>{</span> "Fn::GetAtt" : [ "myuser", "Arn" ] }
            },
            "Action" : "sns:Publish",
            "Resource" : "*"
         } ]
      },
      "Topics" : [ <span>{</span> "Ref" : "mytopic" } ]
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-9.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">mysnspolicy:
  Type: AWS::SNS::TopicPolicy
  Properties:
    PolicyDocument:
      Id: MyTopicPolicy
      Version: '2012-10-17'
      Statement:
      - Sid: My-statement-id
        Effect: Allow
        Principal:
          AWS: !GetAtt myuser.Arn
        Action: sns:Publish
        Resource: "*"
    Topics:
    - !Ref mytopic</code></pre>
      </div>
    
      <h2 id="scenario-sqs-policy">Deklarieren einer Amazon SQS-Richtlinie</h2>

      <p>Im folgenden Codeausschnitt wird gezeigt, wie Sie eine Richtlinie erstellen und unter Verwendung der <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-policy.html">AWS::SQS::QueuePolicy</a></code>-Ressource auf eine Amazon SQS-Warteschlange anwenden. Die <code class="code">PolicyDocument</code>-Eigenschaft ermöglicht dem vorhandenen Benutzer <code class="code">myapp</code> (angegeben durch seinen ARN) die Ausführung der <code class="code">SendMessage</code>-Aktion für eine vorhandene Warteschlange, die durch die URL angegeben ist, und eine <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sqs-queues.html">AWS::SQS::Queue</a></code>-Ressource myqueue. Die <a href="./intrinsic-function-reference-ref.html">Ref</a>-Funktion ruft die URL für die <code class="code">myqueue</code>-Ressource ab.</p>
      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="quickref-iam-example-10.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"mysqspolicy" : <span>{</span>
   "Type" : "AWS::SQS::QueuePolicy",
   "Properties" : <span>{</span>
      "PolicyDocument" : <span>{</span>
         "Id" : "MyQueuePolicy",
         "Version" : "2012-10-17",
         "Statement" : [ <span>{</span>
            "Sid" : "Allow-User-SendMessage",
            "Effect" : "Allow",
            "Principal" : <span>{</span>
               "AWS" : "arn:aws:iam::123456789012:user/myapp"
            },
            "Action" : [ "sqs:SendMessage" ],
            "Resource" : "*"
         } ]
      },
      "Queues" : [
         "https://sqs.us-east-2<span>us-east-2</span>.amazonaws.com/123456789012/myexistingqueue",
         <span>{</span> "Ref" : "myqueue" }
      ]
   }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="quickref-iam-example-10.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">mysqspolicy:
  Type: AWS::SQS::QueuePolicy
  Properties:
    PolicyDocument:
      Id: MyQueuePolicy
      Version: '2012-10-17'
      Statement:
      - Sid: Allow-User-SendMessage
        Effect: Allow
        Principal:
          AWS: arn:aws:iam::123456789012:user/myapp
        Action:
        - sqs:SendMessage
        Resource: "*"
    Queues:
    - https://sqs.<span>us-east-2</span>.amazonaws.com/123456789012/myexistingqueue
    - !Ref myqueue</code></pre>
      </div>
    
      <h2 id="scenarios-iamroles">Vorlagenbeispiele für IAM-Rollen</h2>


      <p>Dieser Abschnitt enthält  CloudFormation Vorlagenbeispiele für IAM-Rollen für EC2-Instances.</p>

      <p>Weitere Informationen zu IAM-Rollen finden Sie unter <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/WorkingWithRoles.html">Arbeiten mit Rollen</a> im <em>Benutzerhandbuch zuAWS Identity and Access Management</em>.</p>

      
       
         <h3 id="scenario-iamrole-ec2">IAM-Rolle mit EC2</h3>

         <p>In diesem Beispiel wird das Instance-Profil von der <code class="code">IamInstanceProfile</code>-Eigenschaft der EC2-Instance referenziert. Sowohl die Instance-Richtlinie als auch die Rollenrichtlinie referenzieren <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html">AWS::IAM::Role</a></code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="quickref-iam-example-11.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "AWSTemplateFormatVersion": "2010-09-09",
   "Resources": <span>{</span>
      "myEC2Instance": <span>{</span>
         "Type": "AWS::EC2::Instance",
         "Version": "2009-05-15",
         "Properties": <span>{</span>
            "ImageId": "ami-0ff8a91507f77f867",
            "InstanceType": "m1.small",
            "Monitoring": "true",
            "DisableApiTermination": "false",
            "IamInstanceProfile": <span>{</span>
               "Ref": "RootInstanceProfile"
            }
         }
      },
      "RootRole": <span>{</span>
         "Type": "AWS::IAM::Role",
         "Properties": <span>{</span>
            "AssumeRolePolicyDocument": <span>{</span>
               "Version" : "2012-10-17",
               "Statement": [ <span>{</span>
                  "Effect": "Allow",
                  "Principal": <span>{</span>
                     "Service": [ "ec2.amazonaws.com" ]
                  },
                  "Action": [ "sts:AssumeRole" ]
               } ]
            },
            "Path": "/"
         }
      },
      "RolePolicies": <span>{</span>
         "Type": "AWS::IAM::Policy",
         "Properties": <span>{</span>
            "PolicyName": "root",
            "PolicyDocument": <span>{</span>
               "Version" : "2012-10-17",
               "Statement": [ <span>{</span>
                  "Effect": "Allow",
                  "Action": "*",
                  "Resource": "*"
               } ]
            },
            "Roles": [ <span>{</span> "Ref": "RootRole" } ]
         }
      },
      "RootInstanceProfile": <span>{</span>
         "Type": "AWS::IAM::InstanceProfile",
         "Properties": <span>{</span>
            "Path": "/",
            "Roles": [ <span>{</span> "Ref": "RootRole" } ]
         }
      }
   }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="quickref-iam-example-11.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Resources:
  myEC2Instance:
    Type: AWS::EC2::Instance
    Version: '2009-05-15'
    Properties:
      ImageId: ami-0ff8a91507f77f867
      InstanceType: m1.small
      Monitoring: 'true'
      DisableApiTermination: 'false'
      IamInstanceProfile:
        !Ref RootInstanceProfile
  RootRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Principal:
            Service:
            - ec2.amazonaws.com
          Action:
          - sts:AssumeRole
      Path: "/"
  RolePolicies:
    Type: AWS::IAM::Policy
    Properties:
      PolicyName: root
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Action: "*"
          Resource: "*"
      Roles:
      - !Ref RootRole
  RootInstanceProfile:
    Type: AWS::IAM::InstanceProfile
    Properties:
      Path: "/"
      Roles:
      - !Ref RootRole</code></pre>
         </div>
       

      
       
         <h3 id="scenario-iamrole-asg">IAM-Rolle mit - AutoScaling Gruppe</h3>

         <p>In diesem Beispiel wird das Instance-Profil durch die -<code class="code">IamInstanceProfile</code>Eigenschaft einer - AutoScaling Gruppenstartkonfiguration referenziert.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="quickref-iam-example-12.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "AWSTemplateFormatVersion": "2010-09-09",
   "Resources": <span>{</span>
      "myLCOne": <span>{</span>
         "Type": "AWS::AutoScaling::LaunchConfiguration",
         "Version": "2009-05-15",
         "Properties": <span>{</span>
            "ImageId": "ami-0ff8a91507f77f867",
            "InstanceType": "m1.small",
            "InstanceMonitoring": "true",
            "IamInstanceProfile": <span>{</span> "Ref": "RootInstanceProfile" }
         }
      },
      "myASGrpOne": <span>{</span>
         "Type": "AWS::AutoScaling::AutoScalingGroup",
         "Version": "2009-05-15",
         "Properties": <span>{</span>
            "AvailabilityZones": [ "<span>us-east-1a</span>" ],
            "LaunchConfigurationName": <span>{</span> "Ref": "myLCOne" },
            "MinSize": "0",
            "MaxSize": "0",
            "HealthCheckType": "EC2",
            "HealthCheckGracePeriod": "120"
         }
      },
      "RootRole": <span>{</span>
         "Type": "AWS::IAM::Role",
         "Properties": <span>{</span>
            "AssumeRolePolicyDocument": <span>{</span>
               "Version" : "2012-10-17",
               "Statement": [ <span>{</span>
                  "Effect": "Allow",
                  "Principal": <span>{</span>
                     "Service": [ "ec2.amazonaws.com" ]
                  },
                  "Action": [ "sts:AssumeRole" ]
               } ]
            },
            "Path": "/"
         }
      },
      "RolePolicies": <span>{</span>
         "Type": "AWS::IAM::Policy",
         "Properties": <span>{</span>
            "PolicyName": "root",
            "PolicyDocument": <span>{</span>
               "Version" : "2012-10-17",
               "Statement": [ <span>{</span>
                  "Effect": "Allow",
                  "Action": "*",
                  "Resource": "*"
               } ]
            },
            "Roles": [ <span>{</span> "Ref": "RootRole" } ]
         }
      },
      "RootInstanceProfile": <span>{</span>
         "Type": "AWS::IAM::InstanceProfile",
         "Properties": <span>{</span>
            "Path": "/",
            "Roles": [ <span>{</span> "Ref": "RootRole" } ]
         }
      }
   }
}  </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="quickref-iam-example-12.yaml">YAML</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Resources:
  myLCOne:
    Type: AWS::AutoScaling::LaunchConfiguration
    Version: '2009-05-15'
    Properties:
      ImageId: ami-0ff8a91507f77f867
      InstanceType: m1.small
      InstanceMonitoring: 'true'
      IamInstanceProfile:
        !Ref RootInstanceProfile
  myASGrpOne:
    Type: AWS::AutoScaling::AutoScalingGroup
    Version: '2009-05-15'
    Properties:
      AvailabilityZones:
      - "<span>us-east-1a</span>"
      LaunchConfigurationName:
        !Ref myLCOne
      MinSize: '0'
      MaxSize: '0'
      HealthCheckType: EC2
      HealthCheckGracePeriod: '120'
  RootRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Principal:
            Service:
            - ec2.amazonaws.com
          Action:
          - sts:AssumeRole
      Path: "/"
  RolePolicies:
    Type: AWS::IAM::Policy
    Properties:
      PolicyName: root
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Effect: Allow
          Action: "*"
          Resource: "*"
      Roles:
      - !Ref RootRole
  RootInstanceProfile:
    Type: AWS::IAM::InstanceProfile
    Properties:
      Path: "/"
      Roles:
      - !Ref RootRole</code></pre>
         </div>
       
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./quickref-elb.html">Elastic Load Balancing</div><div id="next" class="next-link" accesskey="n" href="./quickref-lambda.html">AWS Lambda</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-iam.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>