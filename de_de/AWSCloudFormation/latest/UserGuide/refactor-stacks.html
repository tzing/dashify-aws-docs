<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Verschieben von Ressourcen zwischen Stacks - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="refactor-stacks" /><meta name="default_state" content="refactor-stacks" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" /><meta name="description" content="Verwenden Sie die resource import-Funktion, um Ressourcen zwischen Stacks zu verschieben." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Leitfaden" /><meta name="abstract" content="Erstellen und verwalten Sie AWS Infrastrukturbereitstellungen vorhersehbar und wiederholt mithilfe von AWS CloudFormation mit diesem Benutzerhandbuch." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Leitfaden" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Leitfaden" /><meta id="panorama-serviceConsolePage" value="Verschieben von Ressourcen zwischen Stacks" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Verschieben von Ressourcen zwischen Stacks - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,Ressourcenbereitstellung,Ressourcenkonfiguration,Infrastrukturverwaltung,CloudFormer,CloudFormation -Stack,CloudFormation Stackset,CloudFormation -Vorlage,Änderungssatz" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Leitfaden",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Arbeiten mit -Stacks",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Verschieben von Ressourcen zwischen Stacks",
        "item" : "https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacks.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Leitfaden</a></div><div id="page-toc-src"><a href="#refactor-stacks-console">Umgestalten eines Stacks mithilfe der AWS Management Console</a><a href="#refactor-stacks-cli">Umgestalten eines Stacks mithilfe der AWS CLI</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="refactor-stacks">Verschieben von Ressourcen zwischen Stacks</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Mithilfe der <code class="code">resource import</code>-Funktion können Sie Ressourcen zwischen Stacks verschieben oder Stacks <em>umgestalten</em>. Sie müssen zuerst eine <code class="code">Retain</code>-Löschrichtlinie zu der Ressource hinzufügen, die Sie verschieben möchten, um sicherzustellen, dass die Ressource erhalten bleibt, wenn Sie sie aus dem Quell-Stack entfernen und in den Ziel-Stack importieren.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Nicht alle Ressourcen unterstützen Importvorgänge. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resource-import-supported-resources.html">Ressourcen, die Importvorgänge unterstützen</a> bevor Sie eine Ressource aus dem Stack entfernen. Wenn Sie eine Ressource entfernen, die keine Importvorgänge aus dem Stack unterstützt, können Sie die Ressource nicht in einen anderen Stack importieren oder sie wieder in den Quell-Stack bringen.</p></div></div>
      <h2 id="refactor-stacks-console">Umgestalten eines Stacks mithilfe der AWS Management Console</h2>
      
      <div class="procedure"><ol><li>
            <p>Geben Sie in der Quellvorlage eine <code class="code">Retain</code>-<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html">DeletionPolicy</a> für die Ressource an, die Sie verschieben möchten.</p>
            <p>In der folgenden Beispiel-Quellvorlage ist <code class="code">Games</code> das Ziel dieser Umgestaltung.</p>
            <div class="example"><h6>Beispiel JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "ServiceTable":<span>{</span>
           "Type":"AWS::DynamoDB::Table",
           "Properties":<span>{</span>
              "TableName":"Service",
              "AttributeDefinitions":[
                 <span>{</span>
                    "AttributeName":"key",
                    "AttributeType":"S"
                 }
              ],
              "KeySchema":[
                 <span>{</span>
                    "AttributeName":"key",
                    "KeyType":"HASH"
                 }
              ],
              "ProvisionedThroughput":<span>{</span>
                 "ReadCapacityUnits":5,
                 "WriteCapacityUnits":1
              }
           }
        },
        "GamesTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            <b>"DeletionPolicy": "Retain",</b>
            "Properties": <span>{</span>
                "TableName": "Games",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        }
    }
}</code></pre></div></div>
            
         </li><li>
            <p>Öffnen Sie die AWS CloudFormation-Konsole zum Durchführen einer Stack-Aktualisierung, um die Löschrichtlinie anzuwenden.</p>
            <ol><li>
                  <p>Wählen Sie auf der Seite <b>Stacks (Stapel)</b> bei ausgewähltem Stack <b>Update (Aktualisieren)</b> aus.</p>
         </li><li>
                  <p>Wählen Sie unter <b>Vorlage vorbereiten</b> die Option <b>Aktuelle Vorlage ersetzen</b> aus.</p>
               </li><li>
                  <p>Geben Sie unter <b>Vorlage angeben</b> die aktualisierte Quellvorlage mit dem <code class="code">DeletionPolicy</code>-Attribut für <code class="code">GamesTable</code> ein und wählen Sie dann <b>Weiter</b> aus.</p>  
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Wählen Sie <b>Amazon S3-URL</b> aus und geben Sie dann im Textfeld die URL zur aktualisierten Quellvorlage an.</p>
                     </li><li class="listitem">
                        <p>Wählen Sie <b>Vorlagendatei hochladen</b> aus und suchen Sie dann nach der aktualisierten Quellvorlagendatei.</p>
                     </li></ul></div>
               </li><li>
                  <p>Auf der Seite <b>Stack-Details angeben</b> sind keine Änderungen erforderlich. Wählen Sie <b>Next (Weiter)</b>.</p>
               </li><li>
                  <p>Auf der Seite <b>Stack-Optionen konfigurieren</b> sind keine Änderungen erforderlich. Wählen Sie <b>Next (Weiter)</b>.</p>
               </li><li>
                  <p>Überprüfen Sie auf der Seite <b><code class="replaceable">stack_name</code> überprüfen</b> Ihre Änderungen. Wenn Ihre Vorlage IAM-Ressourcen enthält, wählen Sie <b>I acknowledge that this template may create IAM resources</b>, um anzugeben, dass Sie IAM-Ressourcen in der Vorlage verwenden möchten. Weitere Informationen zum Verwenden von IAM-Ressourcen in Vorlagen finden Sie unter <a href="./using-iam-template.html">Steuern des Zugriffs mit AWS Identity and Access Management</a>. Aktualisieren Sie dann entweder Ihren Quell-Stack, indem Sie einen Änderungssatz erstellen, oder aktualisieren Sie Ihren Quell-Stack direkt.</p>
               </li></ol>
         </li><li>
            <p>Entfernen Sie die Ressource, die zugehörigen Parameter und Ausgaben aus der Quellvorlage und fügen Sie sie dann der Zielvorlage hinzu.</p>
            <p>Die Quellvorlage sieht nun wie folgt aus.</p>
            <div class="example"><h6>Beispiel JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "ServiceTable":<span>{</span>
           "Type":"AWS::DynamoDB::Table",
           "Properties":<span>{</span>
              "TableName":"Service",
              "AttributeDefinitions":[
                 <span>{</span>
                    "AttributeName":"key",
                    "AttributeType":"S"
                 }
              ],
              "KeySchema":[
                 <span>{</span>
                    "AttributeName":"key",
                    "KeyType":"HASH"
                 }
              ],
              "ProvisionedThroughput":<span>{</span>
                 "ReadCapacityUnits":5,
                 "WriteCapacityUnits":1
              }
           }
        }
    }
}</code></pre></div></div>
            <p>Die folgende Beispiel-Zielvorlage enthält derzeit die <code class="code">PlayersTable</code>-Ressource und enthält nun auch <code class="code">GamesTable</code>.</p>
            <div class="example"><h6>Beispiel JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "PlayersTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            "Properties": <span>{</span>
                "TableName": "Players",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        },
        "GamesTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            <b>"DeletionPolicy": "Retain",</b>
            "Properties": <span>{</span>
                "TableName": "Games",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        }
    }
}</code></pre></div></div>
         </li><li>
            <p>Wiederholen Sie die Schritte 2–3, um den Quell-Stack erneut zu aktualisieren, um dieses Mal die Zielressource aus dem Stack zu löschen.</p>
         </li><li>
            <p>Führen Sie einen Importvorgang aus, der <code class="code">GamesTable</code> dem Ziel-Stack hinzufügt.</p> 
            <ol><li>
                  <p>Wählen Sie auf der Seite <b>Stacks</b> mit ausgewähltem übergeordneten Stack <b>Stack-Aktionen</b> und dann <b>Ressourcen in Stack importieren</b> aus.</p>
                  <div class="mediaobject">
                      
                        <img src="images/stack-actions-import.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                        Die Option „Ressourcen in Stack importieren“ in der Konsole.&#xA;                     " />
                      
                      
                  </div>
               </li><li>
            <p>Auf der Seite <b>Importübersicht</b> finden Sie eine Liste der Dinge, die Sie während dieses Vorgangs angeben müssen. Wählen Sie anschließend <b>Weiter</b> aus.</p>
         </li><li>
            <p>Führen Sie auf der Seite <b>Vorlage angeben</b> eine der folgenden Aktionen aus und wählen Sie dann <b>Weiter</b>.</p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Wählen Sie <b>Amazon S3-URL</b> aus und geben Sie dann im Textfeld eine URL an.</p>
               </li><li class="listitem">
                  <p>Wählen Sie <b>Vorlagendatei hochladen</b> aus und suchen Sie dann nach einer Datei, die hochgeladen werden soll.</p>
               </li></ul></div>
         </li><li>
            <p>Identifizieren Sie auf der Seite <b>Ressourcen identifizieren</b> die Ressource, die Sie verschieben möchten (in diesem Beispiel <code class="code">GamesTable</code>).</p>
            <div class="orderedlist">
                
                
                
            <ol><li>
                  <p>Wählen Sie unter <b>Bezeichnereigenschaft</b> den Typ des Ressourcenbezeichners aus. Beispielsweise kann eine <code class="code">AWS::DynamoDB::Table</code>-Ressource mit der <code class="code">TableName</code>-Eigenschaft identifiziert werden.</p>
               </li><li>
                  <p>Geben Sie unter <b>Bezeichnerwert</b> den tatsächlichen Eigenschaftswert ein. Zum Beispiel <code class="code"><code class="replaceable">GamesTables</code></code>.</p>
                  <div class="mediaobject">
                      
                        <img src="images/resources-to-import-identifiers.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                        Die Seite „Ressourcen identifizieren“ in der Konsole.&#xA;                     " />
                      
                      
                  </div>
               </li><li>
                  <p>Wählen Sie <b>Next (Weiter)</b>.</p>
               </li></ol></div>
         </li><li>
            <p>Ändern Sie auf der Seite <b>Stack-Details angeben</b> alle Parameter und wählen Sie dann <b>Weiter</b> aus. Dadurch wird automatisch ein Änderungssatz erstellt.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Der Importvorgang schlägt fehl, wenn Sie vorhandene Parameter ändern, die einen Erstellungs-, Aktualisierungs- oder Löschvorgang initiieren.</p></div></div>
         </li><li>
            <p>Überprüfen Sie auf der Seite <b><code class="replaceable">Stack-Name</code> überprüfen</b>, ob die richtige Ressource importiert wird, und wählen Sie dann <b>Ressourcen importieren</b> aus. Dadurch wird der im letzten Schritt erstellte Änderungssatz automatisch ausgeführt. Alle <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-add-tags.html">Tags auf Stack-Ebene</a> werden zu diesem Zeitpunkt auf importierte Ressourcen angewendet.</p>
         </li><li>
            <p>Der Bereich <b>Ereignisse</b> der Seite <b>Stack-Details</b> für Ihren übergeordneten Stack wird angezeigt.</p>
            <div class="mediaobject">
                
                  <img src="images/import-events.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                  Die Registerkarte „Ereignisse“ in der Konsole.&#xA;               " />
                
                
            </div>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Es ist nicht erforderlich, die Abweichungserkennung für den übergeordneten Stack nach diesem Importvorgang auszuführen, da die <code class="code">AWS::CloudFormation::Stack</code>-Ressource bereits von AWS CloudFormation verwaltet wird.</p></div></div>
         </li></ol>
         </li></ol></div>
      
    
      <h2 id="refactor-stacks-cli">Umgestalten eines Stacks mithilfe der AWS CLI</h2>
   <div class="procedure"><ol><li>
         <p>Geben Sie in der Quellvorlage eine <code class="code">Retain</code>-<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html">DeletionPolicy</a> für die Ressource an, die Sie verschieben möchten.</p>
         <p>In der folgenden Beispiel-Quellvorlage ist <code class="code">GamesTable</code> das Ziel dieser Umgestaltung.</p>
         <div class="example"><h6>Beispiel JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "ServiceTable":<span>{</span>
           "Type":"AWS::DynamoDB::Table",
           "Properties":<span>{</span>
              "TableName":"Service",
              "AttributeDefinitions":[
                 <span>{</span>
                    "AttributeName":"key",
                    "AttributeType":"S"
                 }
              ],
              "KeySchema":[
                 <span>{</span>
                    "AttributeName":"key",
                    "KeyType":"HASH"
                 }
              ],
              "ProvisionedThroughput":<span>{</span>
                 "ReadCapacityUnits":5,
                 "WriteCapacityUnits":1
              }
           }
        },
        "GamesTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            <b>"DeletionPolicy": "Retain",</b>
            "Properties": <span>{</span>
                "TableName": "Games",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        }
    }
}</code></pre></div></div>
      </li><li>
         <p>Aktualisieren Sie den Quell-Stack, um die Löschrichtlinie auf die Ressource anzuwenden.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation update-stack --stack-name "<code class="replaceable">source-stack-name</code>"</code></pre>
      </li><li>
         <p>Entfernen Sie die Ressource, die zugehörigen Parameter und Ausgaben aus der Quellvorlage und fügen Sie sie dann der Zielvorlage hinzu.</p>
         <p>Die Quellvorlage sieht nun wie folgt aus.</p>
         <div class="example"><h6>Beispiel JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "ServiceTable":<span>{</span>
           "Type":"AWS::DynamoDB::Table",
           "Properties":<span>{</span>
              "TableName":"Service",
              "AttributeDefinitions":[
                 <span>{</span>
                    "AttributeName":"key",
                    "AttributeType":"S"
                 }
              ],
              "KeySchema":[
                 <span>{</span>
                    "AttributeName":"key",
                    "KeyType":"HASH"
                 }
              ],
              "ProvisionedThroughput":<span>{</span>
                 "ReadCapacityUnits":5,
                 "WriteCapacityUnits":1
              }
           }
        }
    }
}</code></pre></div></div>
         <p>Die folgende Beispiel-Zielvorlage enthält derzeit die <code class="code">PlayersTable</code>-Ressource und enthält nun auch <code class="code">GamesTable</code>.</p>
         <div class="example"><h6>Beispiel JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "PlayersTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            "Properties": <span>{</span>
                "TableName": "Players",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        },
        "GamesTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            <b>"DeletionPolicy": "Retain",</b>
            "Properties": <span>{</span>
                "TableName": "Games",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        }
    }
}</code></pre></div></div>
      </li><li>
         <p>Aktualisieren Sie den Quell-Stack, um die <code class="code">GamesTable</code>-Ressource und die zugehörigen Parameter und Ausgaben aus dem Stack zu löschen.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation update-stack --stack-name "<code class="replaceable">source-stack-name</code>"</code></pre>
      </li><li>
         <p>Erstellen Sie einen Änderungssatz vom Typ <code class="code">IMPORT</code> mit den folgenden Parametern. <code class="code">--resources-to-import</code> unterstützt keine Inline-YAML.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">&gt;</code><code class="userinput">aws cloudformation create-change-set
    --stack-name <code class="replaceable">TargetStack</code> --change-set-name <code class="replaceable">ImportChangeSet</code>
    <b>--change-set-type <code class="replaceable">IMPORT</code>
    --resources-to-import "[<span>{</span>\"ResourceType\":\"<code class="replaceable">AWS::DynamoDB::Table</code>\",\"LogicalResourceId\":\"<code class="replaceable">GamesTable</code>\",\"ResourceIdentifier\":<span>{</span>\"<code class="replaceable">TableName</code>\":\"<code class="replaceable">Games</code>\"}}]"</b>
    --template-body <code class="replaceable">file://templateToImport.json</code></code></code></pre>
         <p>Die AWS CLI unterstützt auch Textdateien als Eingabe für den <code class="code">resources-to-import</code>-Parameter, wie im vorherigen Beispiel gezeigt.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">--resources-to-import <code class="replaceable">file://resourcesToImport.txt</code></code></pre>
          <p>In dieser Anleitung enthält <code class="replaceable">file://resourcesToImport.txt</code> Folgendes.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">[
  <span>{</span>
      "ResourceType":"AWS::DynamoDB::Table",
      "LogicalResourceId":"GamesTable",
      "ResourceIdentifier": <span>{</span>
        "TableName":"Games"
      }
  }
]</code></pre>
      </li><li>
         <p>Überprüfen Sie den Änderungssatz, um sicherzustellen, dass die richtige Ressource in den Ziel-Stack importiert wird.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation describe-change-set --change-set-name <code class="replaceable">ImportChangeSet</code></code></pre>
      </li><li>
          <p>Führen Sie den Änderungssatz aus, um die Ressource in den Ziel-Stack zu importieren. Alle <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-add-tags.html">Tags auf Stack-Ebene</a> werden zu diesem Zeitpunkt auf importierte Ressourcen angewendet. Nach erfolgreichem Abschluss des Vorgangs <code class="code">(IMPORT_COMPLETE)</code> wird die Ressource erfolgreich importiert.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation execute-change-set --change-set-name <code class="replaceable">ImportChangeSet</code> --stack-name (TargetStackName)</code></pre>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Es ist nicht erforderlich, die Abweichungserkennung für den Ziel-Stack nach diesem Importvorgang auszuführen, da die Ressource bereits von AWS CloudFormation verwaltet wird.</p></div></div>
      </li></ol></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./stack-failure-options.html">Stack-Fehleroptionen</div><div id="next" class="next-link" accesskey="n" href="./resource-import-supported-resources.html">Unterstützung von Ressourcentypen</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>