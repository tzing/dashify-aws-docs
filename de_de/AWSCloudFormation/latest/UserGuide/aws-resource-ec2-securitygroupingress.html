<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::EC2::SecurityGroupIngress - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-ec2-securitygroupingress" /><meta name="default_state" content="aws-resource-ec2-securitygroupingress" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" /><meta name="description" content="Adds an inbound (ingress) rule to a security group." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_EC2.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" hreflang="x-default" /><meta name="feedback-item" content="EC2 CFN" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::EC2::SecurityGroupIngress" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::EC2::SecurityGroupIngress - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2%20CFN&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon EC2 resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_EC2.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::EC2::SecurityGroupIngress",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_EC2.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_EC2.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-ec2-securitygroupingress-syntax">Syntax</a><a href="#aws-resource-ec2-securitygroupingress-properties">Properties</a><a href="#aws-resource-ec2-securitygroupingress--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-ec2-securitygroupingress">AWS::EC2::SecurityGroupIngress</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Adds an inbound (ingress) rule to a security group.</p><p>An inbound rule permits instances to receive traffic from the specified IPv4 or IPv6
         address range, the IP addresses that are specified by a prefix list, or the instances 
         that are associated with a source security group. For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/security-group-rules.html">Security group rules</a>.</p><p>You must specify exactly one of the following sources: an IPv4 address range, an IPv6 address range,
         a prefix list, or a security group.</p><p>You must specify a protocol for each rule (for example, TCP). If the protocol is TCP or UDP, 
         you must also specify a port or port range. If the protocol is ICMP or ICMPv6, you must also 
         specify the ICMP/ICMPv6 type and code.</p><p>Rule changes are propagated to instances associated with the security group as quickly 
         as possible. However, a small delay might occur.</p><h2 id="aws-resource-ec2-securitygroupingress-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-ec2-securitygroupingress-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::EC2::SecurityGroupIngress",
  "Properties" : <span>{</span>
      "<a href="#cfn-ec2-securitygroupingress-cidrip">CidrIp</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-securitygroupingress-cidripv6">CidrIpv6</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-securitygroupingress-description">Description</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-securitygroupingress-fromport">FromPort</a>" : <code class="replaceable">Integer</code>,
      "<a href="#cfn-ec2-securitygroupingress-groupid">GroupId</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-securitygroupingress-groupname">GroupName</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-securitygroupingress-ipprotocol">IpProtocol</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-securitygroupingress-sourceprefixlistid">SourcePrefixListId</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-securitygroupingress-sourcesecuritygroupid">SourceSecurityGroupId</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-securitygroupingress-sourcesecuritygroupname">SourceSecurityGroupName</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-securitygroupingress-sourcesecuritygroupownerid">SourceSecurityGroupOwnerId</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-securitygroupingress-toport">ToPort</a>" : <code class="replaceable">Integer</code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-ec2-securitygroupingress-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::EC2::SecurityGroupIngress
Properties:
  <a href="#cfn-ec2-securitygroupingress-cidrip">CidrIp</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-cidripv6">CidrIpv6</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-description">Description</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-fromport">FromPort</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-ec2-securitygroupingress-groupid">GroupId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-groupname">GroupName</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-ipprotocol">IpProtocol</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-sourceprefixlistid">SourcePrefixListId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-sourcesecuritygroupid">SourceSecurityGroupId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-sourcesecuritygroupname">SourceSecurityGroupName</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-sourcesecuritygroupownerid">SourceSecurityGroupOwnerId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-securitygroupingress-toport">ToPort</a>: <code class="replaceable">Integer</code>
</code></pre></div><h2 id="aws-resource-ec2-securitygroupingress-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-ec2-securitygroupingress-cidrip"><span class="term"><code class="code">CidrIp</code></span></dt><dd>
      <p>The IPv4 address range, in CIDR format.</p>
      <p>You must specify exactly one of the following: 
         <code class="code">CidrIp</code>, <code class="code">CidrIpv6</code>, <code class="code">SourcePrefixListId</code>, or <code class="code">SourceSecurityGroupId</code>.</p>
      <p>For examples of rules that you can add to security groups for specific access scenarios,
         see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-rules-reference.html">Security group rules
            for different use cases</a> in the <em>Amazon EC2 User
               Guide</em>.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-securitygroupingress-cidripv6"><span class="term"><code class="code">CidrIpv6</code></span></dt><dd>
      <p>The IPv6 address range, in CIDR format.</p>
      <p>You must specify exactly one of the following: 
         <code class="code">CidrIp</code>, <code class="code">CidrIpv6</code>, <code class="code">SourcePrefixListId</code>, or <code class="code">SourceSecurityGroupId</code>.</p>
      <p>For examples of rules that you can add to security groups for specific access scenarios,
         see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-rules-reference.html">Security group rules
            for different use cases</a> in the <em>Amazon EC2 User
               Guide</em>.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-securitygroupingress-description"><span class="term"><code class="code">Description</code></span></dt><dd>
      <p>Updates the description of an ingress (inbound) security group rule. You can replace an
         existing description, or add a description to a rule that did not have one
         previously.</p>
      <p>Constraints: Up to 255 characters in length. Allowed characters are a-z, A-Z, 0-9,
         spaces, and ._-:/()#,@[]+=;<span>{</span>}!$*</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ec2-securitygroupingress-fromport"><span class="term"><code class="code">FromPort</code></span></dt><dd>
      <p>The start of port range for the TCP and UDP protocols, or an ICMP/ICMPv6 type number. A
         value of <code class="code">-1</code> indicates all ICMP/ICMPv6 types. If you specify all ICMP/ICMPv6
         types, you must specify all codes.</p>
      <p>Use this for ICMP and any protocol that uses ports.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: Integer</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-securitygroupingress-groupid"><span class="term"><code class="code">GroupId</code></span></dt><dd>
      <p>The ID of the security group.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-securitygroupingress-groupname"><span class="term"><code class="code">GroupName</code></span></dt><dd>
         <p>The name of the security group.</p>
         <p>Constraints: Up to 255 characters in length. Cannot start with <code class="code">sg-</code>.</p>
         <p>Valid characters: a-z, A-Z, 0-9, spaces, and ._-:/()#,@[]+=&amp;;<span>{</span>}!$*</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-securitygroupingress-ipprotocol"><span class="term"><code class="code">IpProtocol</code></span></dt><dd>
         <p>The IP protocol name (<code class="code">tcp</code>, <code class="code">udp</code>, <code class="code">icmp</code>, <code class="code">icmpv6</code>) 
        or number (see <a href="http://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml" rel="noopener noreferrer" target="_blank"><span>Protocol Numbers</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>).</p>
         <p>Use <code class="code">-1</code> to specify all protocols. When authorizing
        security group rules, specifying <code class="code">-1</code> or a protocol number other than
        <code class="code">tcp</code>, <code class="code">udp</code>, <code class="code">icmp</code>, or <code class="code">icmpv6</code> allows
        traffic on all ports, regardless of any port range you specify. For <code class="code">tcp</code>,
        <code class="code">udp</code>, and <code class="code">icmp</code>, you must specify a port range. For <code class="code">icmpv6</code>,
        the port range is optional; if you omit the port range, traffic for all types and codes is allowed.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-securitygroupingress-sourceprefixlistid"><span class="term"><code class="code">SourcePrefixListId</code></span></dt><dd>
      <p>The ID of a prefix list.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-securitygroupingress-sourcesecuritygroupid"><span class="term"><code class="code">SourceSecurityGroupId</code></span></dt><dd>
      <p>The ID of the security group. You must specify either the security group ID or the
         security group name. For security groups in a nondefault VPC, you must specify the security
         group ID.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-securitygroupingress-sourcesecuritygroupname"><span class="term"><code class="code">SourceSecurityGroupName</code></span></dt><dd>
      <p>[Default VPC] The name of the source security group. You must specify either the security group ID 
         or the security group name. You can't specify the group name in combination with an IP address range. 
         Creates rules that grant full ICMP, UDP, and TCP access.</p>
      <p>For security groups in a nondefault VPC, you must specify the group ID.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-securitygroupingress-sourcesecuritygroupownerid"><span class="term"><code class="code">SourceSecurityGroupOwnerId</code></span></dt><dd>
      <p>[nondefault VPC] The AWS account ID for the source security group, if
         the source security group is in a different account. You can't specify this property with
         an IP address range. Creates rules that grant full ICMP, UDP, and TCP access.</p>
      <p>If you specify <code class="code">SourceSecurityGroupName</code> or
            <code class="code">SourceSecurityGroupId</code> and that security group is owned by a different
         account than the account creating the stack, you must specify
            <code class="code">SourceSecurityGroupOwnerId</code>; otherwise, this property is optional.</p>
   <p><em>Required</em>: Conditional</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-securitygroupingress-toport"><span class="term"><code class="code">ToPort</code></span></dt><dd>
      <p>The end of port range for the TCP and UDP protocols, or an ICMP/ICMPv6 code. A value of
         <code class="code">-1</code> indicates all ICMP/ICMPv6 codes for the specified ICMP type. If you
         specify all ICMP/ICMPv6 types, you must specify all codes.</p>
      <p>Use this for ICMP and any protocol that uses ports.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: Integer</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd></dl></div><h2 id="aws-resource-ec2-securitygroupingress--examples">Examples</h2><p></p><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-ec2-securitygroupingress--examples--VPC_security_groups_with_egress_and_ingress_rules">VPC security groups with egress and ingress rules</a></li><li><a href="#aws-resource-ec2-securitygroupingress--examples--Allow_traffic_from_a_security_group_in_a_peered_VPC">Allow traffic from a security group in a peered VPC</a></li></ul></div><h3 id="aws-resource-ec2-securitygroupingress--examples--VPC_security_groups_with_egress_and_ingress_rules">VPC security groups with egress and ingress rules</h3><p>In some cases, you might have an originating (source) security group to which you
               want to add an outbound rule that allows traffic to a destination (target) security
               group. The target security group also needs an inbound rule that allows traffic from
               the source security group. Note that you cannot use the Ref function to specify the
               outbound and inbound rules for each security group. Doing so creates a circular
               dependency; you cannot have two resources that depend on each other. Instead, use the
               egress and ingress resources to declare these outbound and inbound rules, as shown in
               the following template example. </p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ec2-securitygroupingress--examples--VPC_security_groups_with_egress_and_ingress_rules--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "SourceSG": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "VpcId" : "vpc-1a2b3c4d",
                "GroupDescription": "Sample source security group"
            }
        },
        "TargetSG": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "VpcId" : "vpc-1a2b3c4d",
                "GroupDescription": "Sample target security group"
            }
        },
        "OutboundRule": <span>{</span>
            "Type": "AWS::EC2::SecurityGroupEgress",
            "Properties":<span>{</span>
                "IpProtocol": "tcp",
                "FromPort": 0,
                "ToPort": 65535,
                "DestinationSecurityGroupId": <span>{</span>
                    "Fn::GetAtt": [
                        "TargetSG",
                        "GroupId"
                    ]
                },
                "GroupId": <span>{</span>
                    "Fn::GetAtt": [
                        "SourceSG",
                        "GroupId"
                    ]
                }
            }
        },
        "InboundRule": <span>{</span>
            "Type": "AWS::EC2::SecurityGroupIngress",
            "Properties":<span>{</span>
                "IpProtocol": "tcp",
                "FromPort": 0,
                "ToPort": 65535,
                "SourceSecurityGroupId": <span>{</span>
                    "Fn::GetAtt": [
                        "SourceSG",
                        "GroupId" 
                    ]
                },
                "GroupId": <span>{</span>
                    "Fn::GetAtt": [
                        "TargetSG",
                        "GroupId"
                    ]
                }
            }
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ec2-securitygroupingress--examples--VPC_security_groups_with_egress_and_ingress_rules--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  SourceSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      VpcId: vpc-1a2b3c4d
      GroupDescription: Sample source security group
  TargetSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      VpcId: vpc-1a2b3c4d
      GroupDescription: Sample target security group
  OutboundRule:
    Type: AWS::EC2::SecurityGroupEgress
    Properties:
      IpProtocol: tcp
      FromPort: 0
      ToPort: 65535
      DestinationSecurityGroupId:
        Fn::GetAtt:
          - TargetSG
          - GroupId
      GroupId:
        Fn::GetAtt:
          - SourceSG
          - GroupId
  InboundRule:
    Type: AWS::EC2::SecurityGroupIngress
    Properties:
      IpProtocol: tcp
      FromPort: 0
      ToPort: 65535
      SourceSecurityGroupId:
        Fn::GetAtt:
          - SourceSG
          - GroupId
      GroupId:
        Fn::GetAtt:
          - TargetSG
          - GroupId</code></pre></div><h3 id="aws-resource-ec2-securitygroupingress--examples--Allow_traffic_from_a_security_group_in_a_peered_VPC">Allow traffic from a security group in a peered VPC</h3><p>The following example allows one-way traffic from an
               originating (source) security group to a destination (target) security group.
               However, in this example the security groups are in peered VPCs across AWS accounts. You might want to allow cross-account traffic if, for
               example, you create a security scanning resource in one AWS account
               that you'll use to run diagnostics in another account. This example adds an ingress
               rule to a target VPC security group that allows incoming traffic from a source
               security group in a different AWS account. Note that the source
               security group also needs an egress rule that allows outgoing traffic to the target
               security group. Because the source security group is in a different account, the
               following example doesn't use the Ref function to reference the source security group
               ID but instead directly specifies the security group ID <code class="code">sg-12345678</code>.
            </p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ec2-securitygroupingress--examples--Allow_traffic_from_a_security_group_in_a_peered_VPC--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Resources": <span>{</span>
        "TargetSG": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "VpcId": "vpc-1a2b3c4d",
                "GroupDescription": "Security group allowing ingress for security scanners"
            }
        },
        "InboundRule": <span>{</span>
            "Type": "AWS::EC2::SecurityGroupIngress",
            "Properties": <span>{</span>
                "GroupId": <span>{</span>
                    "Fn::GetAtt": [
                        "TargetSG",
                        "GroupId"
                    ]
                },
                "IpProtocol": "tcp",
                "FromPort": 80,
                "ToPort": 80,
                "SourceSecurityGroupId": "sg-12345678",
                "SourceSecurityGroupOwnerId": "123456789012"
            }
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ec2-securitygroupingress--examples--Allow_traffic_from_a_security_group_in_a_peered_VPC--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Resources:
  TargetSG:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      VpcId: vpc-1a2b3c4d
      GroupDescription: Security group allowing ingress for security scanners
  InboundRule:
    Type: 'AWS::EC2::SecurityGroupIngress'
    Properties:
      GroupId: !GetAtt TargetSG.GroupId
      IpProtocol: tcp
      FromPort: 80
      ToPort: 80
      SourceSecurityGroupId: sg-12345678
      SourceSecurityGroupOwnerId: '123456789012'
</code></pre></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-resource-ec2-securitygroupegress.html">AWS::EC2::SecurityGroupEgress</div><div id="next" class="next-link" accesskey="n" href="./aws-resource-ec2-snapshotblockpublicaccess.html">AWS::EC2::SnapshotBlockPublicAccess</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2 CFN&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2 CFN&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-securitygroupingress.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>