<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="id-ID"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>STL_QUERYTEXT - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_STL_QUERYTEXT" /><meta name="default_state" content="r_STL_QUERYTEXT" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_QUERYTEXT.html" /><meta name="description" content="Menangkap teks kueri untuk perintah SQL." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Panduan Pengembang Database" /><meta name="abstract" content="Buat dan kelola gudang data dengan Amazon Redshift, skala petabyte tingkat perusahaan, layanan pergudangan data yang dikelola sepenuhnya." /><meta name="guide-locale" content="id_id" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_QUERYTEXT.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_QUERYTEXT.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Panduan Pengembang Database" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Panduan Pengembang Database" /><meta id="panorama-serviceConsolePage" value="STL_QUERYTEXT" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>STL_QUERYTEXT - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_STL_QUERYTEXT" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_QUERYTEXT.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_QUERYTEXT.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_QUERYTEXT.html" /><meta name="keywords" content="Amazon Redshift,AWS Pergeseran Merah,Redshift,Spektrum Pergeseran Merah,Klaster,gudang data,pengembang,data sampel,database,pengembang basis data,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Panduan Pengembang Database",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Tabel sistem dan referensi tampilan",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg/cm_chap_system-tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Pemantauan sistem (hanya disediakan)",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_intro_system_views.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Tampilan STL untuk pencatatan",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_intro_STL_tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "STL_QUERYTEXT",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_intro_STL_tables.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_STL_QUERYTEXT" target="_blank" rel="noopener noreferrer" title="Buka PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentasi</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Panduan Pengembang Database</a></div><div id="page-toc-src"><a href="#r_STL_QUERYTEXT-table-columns">Kolom tabel</a><a href="#r_STL_QUERYTEXT-sample-queries">Kueri Sampel</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Terjemahan disediakan oleh mesin penerjemah. Jika konten terjemahan yang diberikan bertentangan dengan versi bahasa Inggris aslinya, utamakan versi bahasa Inggris.</p></awsui-alert><h1 class="topictitle" id="r_STL_QUERYTEXT">STL_QUERYTEXT</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Menangkap teks kueri untuk perintah SQL.</p><p>Kueri tampilan STL_QUERYTEXT untuk menangkap SQL yang dicatat untuk pernyataan berikut: </p><div class="itemizedlist">
             
             
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>PILIH, PILIH KE</p>
            </li><li class="listitem">
                <p>MASUKKAN, PERBARUI, HAPUS</p>
            </li><li class="listitem">
                <p>MENYONTEK</p>
            </li><li class="listitem">
                <p>MEMBONGKAR</p>
            </li><li class="listitem">
                
                <p>Kueri yang dihasilkan dengan menjalankan VACUUM dan ANALYSIS</p>
            </li><li class="listitem">
                <p>BUAT TABEL SEBAGAI (CTAS)</p>
            </li></ul></div><p>Untuk melakukan kueri aktivitas pernyataan ini selama periode waktu tertentu, gabungkan tampilan STL_QUERYTEXT dan STL_QUERY.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>catatan</h6></div><div class="awsdocs-note-text"><p>Tampilan STL_QUERY dan STL_QUERYTEXT hanya berisi informasi tentang kueri, bukan utilitas dan perintah DDL lainnya. Untuk daftar dan informasi tentang semua pernyataan yang dijalankan oleh Amazon Redshift, Anda juga dapat menanyakan tampilan STL_DDLTEXT dan STL_UTILITYTEXT. Untuk daftar lengkap semua pernyataan yang dijalankan oleh Amazon Redshift, Anda dapat menanyakan tampilan SVL_STATEMENTTEXT.</p></div></div><p>Lihat juga<a href="./r_STL_DDLTEXT.html">STL_DDLTEXT</a>,<a href="./r_STL_UTILITYTEXT.html">STL_UTILITYTEXT</a>, dan<a href="./r_SVL_STATEMENTTEXT.html">SVL_STATEMENTTEXT</a>.</p><p>STL_QUERYTEXT dapat dilihat oleh semua pengguna. Pengguna super dapat melihat semua baris; pengguna biasa hanya dapat melihat data mereka sendiri. Untuk informasi selengkapnya, lihat <a href="./cm_chap_system-tables.html#c_visibility-of-data">Visibilitas data dalam tabel dan tampilan sistem</a>.</p><p>Beberapa atau semua data dalam tabel ini juga dapat ditemukan di tampilan <a href="./SYS_QUERY_TEXT.html">SYS_QUERY_TEXT</a> pemantauan SYS. Data dalam tampilan pemantauan SYS diformat agar lebih mudah digunakan dan dipahami. Kami menyarankan Anda menggunakan tampilan pemantauan SYS untuk pertanyaan Anda.</p>
            <h2 id="r_STL_QUERYTEXT-table-columns">Kolom tabel</h2>


            <div class="table-container"><div class="table-contents"><table id="w320aac49c17b9c71c19b3"><thead>
                        <tr>
                            <th>Nama kolom </th>
                            <th>Jenis data </th>
                            <th>Deskripsi </th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">userid</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">ID pengguna yang membuat entri.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">xid </td>
                            <td tabindex="-1">bigint </td>
                            <td tabindex="-1">ID Transaksi. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">pid</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">ID Proses. Biasanya, semua kueri dalam sesi dijalankan dalam proses yang sama, jadi nilai ini biasanya tetap konstan jika Anda menjalankan serangkaian kueri dalam sesi yang sama. Setelah peristiwa internal tertentu, Amazon Redshift mungkin memulai ulang sesi aktif dan menetapkan PID baru. Untuk informasi selengkapnya, lihat <a href="./r_STL_RESTARTED_SESSIONS.html">STL_RESTARTED_SESSIONS</a>. Anda dapat menggunakan kolom ini untuk bergabung dengan <a href="./r_STL_ERROR.html">STL_ERROR</a> tampilan. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">kueri </td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">ID kueri. Kolom kueri dapat digunakan untuk bergabung dengan tabel dan tampilan sistem lainnya.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">urutan </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">Ketika satu pernyataan berisi lebih dari 200 karakter, baris tambahan dicatat untuk pernyataan itu. Urutan 0 adalah baris pertama, 1 adalah yang kedua, dan seterusnya. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">text </td>
                            <td tabindex="-1">karakter (200) </td>
                            <td tabindex="-1">Teks SQL, dalam peningkatan 200 karakter. Bidang ini mungkin berisi karakter khusus seperti garis miring terbalik (<code class="code">\\</code>) dan baris baru (). <code class="code">\n</code> </td>
                        </tr>
                    </table></div></div>
         
            <h2 id="r_STL_QUERYTEXT-sample-queries">Kueri Sampel</h2>


            <p>Anda dapat menggunakan fungsi PG_BACKEND_PID () untuk mengambil informasi untuk sesi saat ini. Misalnya, query berikut mengembalikan ID query dan sebagian dari teks query untuk query selesai dalam sesi saat ini.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select query, substring(text,1,60)
from stl_querytext
where pid = pg_backend_pid()
order by query desc;

 query |                         substring
-------+--------------------------------------------------------------
 28262 | select query, substring(text,1,80) from stl_querytext where 
 28252 | select query, substring(path,0,80) as path from stl_unload_l
 28248 | copy category from 's3://dw-tickit/manifest/category/1030_ma
 28247 | Count rows in target table
 28245 | unload ('select * from category') to 's3://dw-tickit/manifes
 28240 | select query, substring(text,1,40) from stl_querytext where 
(6 rows)</code></pre>

             
                <h3 id="r_STL_QUERYTEXT-reconstruct-sql">Merekonstruksi SQL yang disimpan</h3>
            <p>Untuk merekonstruksi SQL yang disimpan di <code class="code">text</code> kolom STL_QUERYTEXT, jalankan pernyataan SELECT untuk membuat SQL dari 1 atau lebih bagian dalam kolom. <code class="code">text</code> Sebelum menjalankan SQL yang direkonstruksi, ganti setiap (<code class="code">\n</code>) karakter khusus dengan baris baru. Hasil dari pernyataan SELECT berikut adalah baris SQL direkonstruksi di lapangan. <code class="code">query_statement</code></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT query, LISTAGG(CASE WHEN LEN(RTRIM(text)) = 0 THEN text ELSE RTRIM(text) END) WITHIN GROUP (ORDER BY sequence) as query_statement, COUNT(*) as row_count 
FROM stl_querytext GROUP BY query ORDER BY query desc;</code></pre>
            <p>Misalnya, query berikut memilih 3 kolom. Kueri itu sendiri lebih panjang dari 200 karakter dan disimpan di bagian-bagian dalam STL_QUERYTEXT.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">select
1 AS a0123456789012345678901234567890123456789012345678901234567890,
2 AS b0123456789012345678901234567890123456789012345678901234567890,
3 AS b012345678901234567890123456789012345678901234
FROM stl_querytext;</code></pre>
            
            <p>Dalam contoh ini, kueri disimpan dalam 2 bagian (baris) di <code class="code">text</code> kolom STL_QUERYTEXT.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">select query, sequence, text
from stl_querytext where query=pg_last_query_id() order by query desc, sequence limit 10;</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
query  | sequence |                                                                                             text                                                                                                   
-------+----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    45 |        0 | select\n1 AS a0123456789012345678901234567890123456789012345678901234567890,\n2 AS b0123456789012345678901234567890123456789012345678901234567890,\n3 AS b012345678901234567890123456789012345678901234
    45 |        1 | \nFROM stl_querytext;</code></pre>
            
                <p>Untuk merekonstruksi SQL yang disimpan di STL_QUERYTEXT, jalankan SQL berikut. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select LISTAGG(CASE WHEN LEN(RTRIM(text)) = 0 THEN text ELSE RTRIM(text) END, '') within group (order by sequence) AS text 
from stl_querytext where query=pg_last_query_id();
</code></pre>
                <p>Untuk menggunakan SQL yang direkonstruksi yang dihasilkan di klien Anda, ganti karakter khusus (<code class="code">\n</code>) apa pun dengan baris baru. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
                                                                                                             text                                                                                                             
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 select\n1 AS a0123456789012345678901234567890123456789012345678901234567890,\n2 AS b0123456789012345678901234567890123456789012345678901234567890,\n3 AS b012345678901234567890123456789012345678901234\nFROM stl_querytext;
</code></pre>
                         
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Awas" /> <strong>Javascript dinonaktifkan atau tidak tersedia di browser Anda.</strong></p><p>Untuk menggunakan Dokumentasi AWS, Javascript harus diaktifkan. Lihat halaman Bantuan browser Anda untuk petunjuk.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Konvensi Dokumen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_STL_QUERY_METRICS.html">STL_QUERY_METRICS</div><div id="next" class="next-link" accesskey="n" href="./r_STL_REPLACEMENTS.html">STL_REPLACEMENTS</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Apakah halaman ini membantu Anda? - Ya</div><div class="content"><p>Terima kasih telah memberitahukan bahwa hasil pekerjaan kami sudah baik.</p><p>Jika Anda memiliki waktu luang, beri tahu kami aspek apa saja yang sudah bagus, agar kami dapat menerapkannya secara lebih luas.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Umpan Balik" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_QUERYTEXT.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Apakah halaman ini membantu Anda? - Tidak</div><div class="content"><p>Terima kasih telah memberi tahu kami bahwa halaman ini perlu ditingkatkan. Maaf karena telah mengecewakan Anda.</p><p>Jika Anda memiliki waktu luang, beri tahu kami bagaimana dokumentasi ini dapat ditingkatkan.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Umpan Balik" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_QUERYTEXT.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>