<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="id-ID"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>BUAT FUNGSI EKSTERNAL - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_EXTERNAL_FUNCTION" /><meta name="default_state" content="r_CREATE_EXTERNAL_FUNCTION" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" /><meta name="description" content="Membuat fungsi yang ditentukan pengguna skalar (UDF) berdasarkan Amazon AWS Lambda Redshift." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Panduan Pengembang Database" /><meta name="abstract" content="Buat dan kelola gudang data dengan Amazon Redshift, skala petabyte tingkat perusahaan, layanan pergudangan data yang dikelola sepenuhnya." /><meta name="guide-locale" content="id_id" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Panduan Pengembang Database" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Panduan Pengembang Database" /><meta id="panorama-serviceConsolePage" value="BUAT FUNGSI EKSTERNAL" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>BUAT FUNGSI EKSTERNAL - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_CREATE_EXTERNAL_FUNCTION" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html" /><meta name="keywords" content="Amazon Redshift,AWSPergeseran Merah,Redshift,Spektrum Pergeseran Merah,Klaster,gudang data,pengembang,data sampel,database,pengembang basis data,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Panduan Pengembang Database",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referensi SQL",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Perintah SQL",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "BUAT FUNGSI EKSTERNAL",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_CREATE_EXTERNAL_FUNCTION" target="_blank" rel="noopener noreferrer" title="Buka PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentasi</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Panduan Pengembang Database</a></div><div id="page-toc-src"><a href="#r_CREATE_EXTERNAL_FUNCTION-privileges">Hak istimewa yang diperlukan</a><a href="#r_CREATE_EXTERNAL_FUNCTION-synopsis">Sintaks</a><a href="#r_CREATE_EXTERNAL_FUNCTION-parameters">Parameter</a><a href="#r_CREATE_FUNCTION-usage-notes">Catatan penggunaan</a><a href="#r_CREATE_FUNCTION-examples">Contoh-contoh</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Terjemahan disediakan oleh mesin penerjemah. Jika konten terjemahan yang diberikan bertentangan dengan versi bahasa Inggris aslinya, utamakan versi bahasa Inggris.</p></awsui-alert><h1 class="topictitle" id="r_CREATE_EXTERNAL_FUNCTION">BUAT FUNGSI EKSTERNAL</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Membuat fungsi yang ditentukan pengguna skalar (UDF) berdasarkan Amazon AWS Lambda Redshift. Untuk informasi selengkapnya tentang fungsi yang ditentukan pengguna Lambda, lihat. <a href="./udf-creating-a-lambda-sql-udf.html">Membuat skalar Lambda UDF</a></p>
         <h2 id="r_CREATE_EXTERNAL_FUNCTION-privileges">Hak istimewa yang diperlukan</h2>
         <p>Berikut ini adalah hak istimewa yang diperlukan untuk CREATE EXTERNAL FUNCTION:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Superuser</p></li><li class="listitem"><p>Pengguna dengan hak istimewa CREATE [OR REPLACE] EXTERNAL FUNCTION</p></li></ul></div>
       
         <h2 id="r_CREATE_EXTERNAL_FUNCTION-synopsis">Sintaks</h2>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE [ OR REPLACE ] EXTERNAL FUNCTION <em>external_fn_name</em> ( [<em>data_type</em>] [, ...] )
RETURNS <em>data_type</em>
<span>{</span> VOLATILE | STABLE }
LAMBDA <em>'lambda_fn_name'</em>
IAM_ROLE <span>{</span> default | ‘arn:aws:iam::<code class="replaceable">&lt;Akun AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>’
RETRY_TIMEOUT <em>milliseconds</em>
MAX_BATCH_ROWS count
MAX_BATCH_SIZE size [ KB | MB ];</code></pre>

         
         
         <p>Berikut ini adalah sintaks untuk pembelajaran mesin di Amazon Redshift. Untuk informasi tentang parameter khusus model, lihat. <a href="./r_GRANT.html#r_GRANT-parameters">Parameter</a></p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE [ OR REPLACE ] EXTERNAL FUNCTION <em>external_fn_name</em> ( [<em>data_type</em>] [, ...] )
RETURNS <em>data_type</em>
<span>{</span> VOLATILE | STABLE }
SAGEMAKER<em>'endpoint_name'</em>
IAM_ROLE <span>{</span> default | ‘arn:aws:iam::<code class="replaceable">&lt;Akun AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>’ };</code></pre>


       
         <h2 id="r_CREATE_EXTERNAL_FUNCTION-parameters">Parameter</h2>


         <div class="variablelist">
             
             
             
             
            
             
          

             
            
         

             

             
             
          
         <dl>
               <dt><span class="term">ATAU GANTI</span></dt>
               <dd>
                  <p>Sebuah klausa yang menentukan bahwa jika fungsi dengan nama yang sama dan tipe data argumen masukan, atau <em>tanda tangan</em>, karena ini sudah ada, fungsi yang ada diganti. Anda hanya dapat mengganti fungsi dengan fungsi baru yang mendefinisikan kumpulan tipe data yang identik. Anda harus menjadi superuser untuk mengganti fungsi.</p>
                  <p>Jika Anda mendefinisikan fungsi dengan nama yang sama dengan fungsi yang ada tetapi tanda tangan yang berbeda, Anda membuat fungsi baru. Dengan kata lain, nama fungsi kelebihan beban. Untuk informasi selengkapnya, lihat <a href="./udf-naming-udfs.html#udf-naming-overloading-function-names">Nama fungsi yang berlebihan</a>.</p>
               </dd>
             
               <dt><span class="term"><em>external_fn_name</em></span></dt>
               <dd>
                  <p>Nama fungsi eksternal. Jika Anda menentukan nama skema (seperti myschema.myfunction), fungsi dibuat menggunakan skema yang ditentukan. Jika tidak, fungsi dibuat dalam skema saat ini. Untuk informasi selengkapnya tentang nama yang valid, lihat<a href="./r_names.html">Nama dan pengidentifikasi</a>. </p>
                  <p>Kami menyarankan Anda untuk mengawali semua nama UDF dengan. <code class="code">f_</code> Amazon Redshift mencadangkan <code class="code">f_</code> awalan untuk nama UDF. Dengan menggunakan <code class="code">f_</code> awalan, Anda membantu memastikan bahwa nama UDF Anda tidak akan bertentangan dengan nama fungsi SQL bawaan untuk Amazon Redshift sekarang atau di masa mendatang. Untuk informasi selengkapnya, lihat <a href="./udf-naming-udfs.html">Penamaan UDFs</a>.</p>
               </dd>
             
               <dt><span class="term"><em>data_type</em></span></dt>
               <dd>
                  <p>Tipe data untuk argumen masukan. Untuk informasi selengkapnya, lihat <a href="./c_Supported_data_types.html">Tipe Data</a>.</p>
               </dd>
             
               <dt><span class="term">RETURNS <em>data_type</em></span></dt>
               <dd>
                  <p>Tipe data dari nilai yang dikembalikan oleh fungsi. Tipe data RETURNS dapat berupa tipe data Amazon Redshift standar apa pun. Untuk informasi selengkapnya, lihat <a href="./udf-data-types.html">Tipe data Python UDF</a>.</p>
               </dd>
             
               <dt><span class="term">VOLATIL | STABIL</span></dt>
               <dd>
                  <p>Menginformasikan pengoptimal kueri tentang volatilitas fungsi. </p>
                  <p>Untuk mendapatkan optimasi terbaik, beri label fungsi Anda dengan kategori volatilitas ketat yang berlaku untuk itu. Dalam urutan keketatan, dimulai dengan yang paling ketat, kategori volatilitas adalah sebagai berikut:</p>
                  <div class="itemizedlist">
                       
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>VOLATIL</p>
                     </li><li class="listitem">
                        <p>STABIL</p>
                     </li></ul></div>
                  <p>VOLATIL</p>
                  <p>Dengan argumen yang sama, fungsi dapat mengembalikan hasil yang berbeda pada panggilan berturut-turut, bahkan untuk baris dalam satu pernyataan. Pengoptimal kueri tidak dapat membuat asumsi tentang perilaku fungsi volatile. Kueri yang menggunakan fungsi volatile harus mengevaluasi kembali fungsi untuk setiap input.</p>
                  <p>STABIL</p>
                  <p>Dengan argumen yang sama, fungsi dijamin untuk mengembalikan hasil yang sama pada panggilan berturut-turut yang diproses dalam satu pernyataan. Fungsi ini dapat mengembalikan hasil yang berbeda ketika dipanggil dalam pernyataan yang berbeda. Kategori ini membuatnya sehingga pengoptimal dapat mengurangi berapa kali fungsi dipanggil dalam satu pernyataan.</p>
                  <p>Perhatikan bahwa jika keketatan yang dipilih tidak valid untuk fungsi tersebut, ada risiko bahwa pengoptimal mungkin melewatkan beberapa panggilan berdasarkan keketatan ini. Hal ini dapat mengakibatkan set hasil yang salah.</p>
                  <p>Klausa IMMUTABLE saat ini tidak didukung untuk Lambda UDF.</p>
                  

               </dd>
             
               <dt><span class="term">LAMBDA <em>'lambda_fn_name'</em> </span></dt>
               <dd>
                  <p> Nama fungsi yang dipanggil Amazon Redshift.</p>
                  <p>Untuk langkah-langkah membuat AWS Lambda fungsi, lihat <a href="https://docs.aws.amazon.com/lambda/latest/dg/getting-started-create-function.html">Membuat fungsi Lambda dengan konsol di Panduan AWS Lambda</a> <em>Pengembang</em>.</p>
                 <p><em>Untuk informasi mengenai izin yang diperlukan untuk fungsi Lambda, <a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-permissions.html">AWS Lambdalihat</a> izin di AWS Lambda Panduan Pengembang.</em></p>

               </dd>
             
               <dt><span class="term"><code class="replaceable">IAM_ROLE <span>{</span>default | 'arn:aws:iam:: &lt; -id&gt;:role/ 'Akun AWS<code class="replaceable"></code></code>&lt;role-name&gt; </span></dt>
               <dd>
                  <p>Gunakan kata kunci default agar Amazon Redshift menggunakan peran IAM yang ditetapkan sebagai default dan terkait dengan cluster saat perintah CREATE EXTERNAL FUNCTION berjalan.</p>
                  <p>Gunakan Amazon Resource Name (ARN) untuk peran IAM yang digunakan klaster Anda untuk autentikasi dan otorisasi. Perintah CREATE EXTERNAL FUNCTION diotorisasi untuk memanggil fungsi Lambda melalui peran IAM ini. Jika klaster Anda memiliki peran IAM yang sudah ada dengan izin untuk memanggil fungsi Lambda yang terpasang, Anda dapat mengganti ARN peran Anda. Untuk informasi selengkapnya, lihat <a href="./udf-creating-a-lambda-sql-udf.html#udf-lambda-authorization">Mengkonfigurasi parameter otorisasi untuk Lambda UDF</a>.</p>
                  <p>Berikut ini menunjukkan sintaks untuk parameter IAM_ROLE.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">IAM_ROLE 'arn:aws:iam::<em>aws-account-id</em>:role/<em>role-name</em>'</code></pre>
               </dd>
             
               <dt><span class="term"><em>RETRY_TIMEOUT milidetik</em> </span></dt>
               <dd>
                  <p>Jumlah total waktu dalam milidetik yang digunakan Amazon Redshift untuk penundaan backoff coba lagi. </p>
                  <p>Alih-alih mencoba kembali segera untuk kueri yang gagal, Amazon Redshift melakukan backoff dan menunggu waktu tertentu di antara percobaan ulang. Kemudian Amazon Redshift mencoba ulang permintaan untuk menjalankan kembali kueri yang gagal hingga jumlah semua penundaan sama dengan atau melebihi nilai RETRY_TIMEOUT yang Anda tentukan. Nilai default adalah 20.000 milidetik.</p>
                  <p>Saat fungsi Lambda dipanggil, Amazon Redshift mencoba ulang kueri yang menerima kesalahan seperti,, dan. <code class="code">TooManyRequestsException</code> <code class="code">EC2ThrottledException</code> <code class="code">ServiceException</code> </p>
                  <p>Anda dapat mengatur parameter RETRY_TIMEOUT ke 0 milidetik untuk mencegah percobaan ulang untuk Lambda UDF.</p>
               </dd>
             
               <dt><span class="term"><em>Jumlah MAX_BATCH_ROWS</em></span></dt>
               <dd>
                  <p> Jumlah maksimum baris yang dikirimkan Amazon Redshift dalam satu permintaan batch untuk satu pemanggilan lambda. </p>
                  <p> Nilai minimum parameter ini adalah 1. Nilai maksimumnya adalah INT_MAX, atau 2.147.483.647. </p>
                  <p> Parameter ini bersifat opsional. Nilai defaultnya adalah INT_MAX, atau 2.147,483.647. </p>
               </dd>
             
            <dt><span class="term">MAX_BATCH_SIZE <em>ukuran [KB | MB]</em> </span></dt>
            <dd>
               <p> Ukuran maksimum payload data yang dikirimkan Amazon Redshift dalam satu permintaan batch untuk satu pemanggilan lambda. </p>
               <p> Nilai minimum parameter ini adalah 1 KB. Nilai maksimumnya adalah 5 MB. </p>
               <p> Nilai default parameter ini adalah 5 MB. </p>
               <p> KB dan MB adalah opsional. Jika Anda tidak menyetel unit pengukuran, Amazon Redshift default menggunakan KB. </p>
            </dd>
         </dl></div>
       
         <h2 id="r_CREATE_FUNCTION-usage-notes">Catatan penggunaan</h2>
         <p>Pertimbangkan hal berikut saat Anda membuat Lambda UDF: </p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Urutan panggilan fungsi Lambda pada argumen input tidak diperbaiki atau dijamin. Ini mungkin berbeda antara contoh kueri yang berjalan, tergantung pada konfigurasi cluster.</p></li><li class="listitem"><p>Fungsi tidak dijamin akan diterapkan pada setiap argumen masukan sekali dan hanya sekali. Interaksi antara Amazon Redshift dan AWS Lambda dapat menyebabkan panggilan berulang dengan input yang sama.</p></li></ul></div>
       
         <h2 id="r_CREATE_FUNCTION-examples">Contoh-contoh</h2>
         <p>Berikut ini adalah contoh penggunaan fungsi yang ditentukan pengguna Lambda skalar (UDF).</p>
          
            <h3 id="r_CREATE_FUNCTION-lambda-example-node">Contoh Skalar Lambda UDF menggunakan fungsi Lambda Node.js</h3>
            <p>Contoh berikut menciptakan fungsi eksternal yang disebut <code class="code">exfunc_sum</code> yang mengambil dua bilangan bulat sebagai argumen masukan. Fungsi ini mengembalikan jumlah sebagai output integer. Nama fungsi Lambda yang akan dipanggil adalah. <code class="code">lambda_sum</code> Bahasa yang digunakan untuk fungsi Lambda ini adalah Node.js 12.x. Pastikan untuk menentukan peran IAM. Contoh digunakan <code class="code">'arn:aws:iam::123456789012:user/johndoe'</code> sebagai peran IAM.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL FUNCTION exfunc_sum(INT,INT)
RETURNS INT
VOLATILE
LAMBDA 'lambda_sum'
IAM_ROLE 'arn:aws:iam::123456789012:role/Redshift-Exfunc-Test';</code></pre>
            <p>Fungsi Lambda mengambil payload permintaan dan iterasi di setiap baris. Semua nilai dalam satu baris ditambahkan untuk menghitung jumlah untuk baris itu, yang disimpan dalam array respons. Jumlah baris dalam larik hasil mirip dengan jumlah baris yang diterima dalam payload permintaan. </p>
            <p>Payload respons JSON harus memiliki data hasil di bidang 'hasil' agar dapat dikenali oleh fungsi eksternal. Bidang argumen dalam permintaan yang dikirim ke fungsi Lambda berisi payload data. Mungkin ada beberapa baris dalam payload data jika terjadi permintaan batch. Fungsi Lambda berikut iterasi atas semua baris dalam payload data permintaan. Ini juga secara individual mengulangi semua nilai dalam satu baris.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">exports.handler = async (event) =&gt; <span>{</span>
    // The 'arguments' field in the request sent to the Lambda function contains the data payload.
    var t1 = event['arguments'];

    // 'len(t1)' represents the number of rows in the request payload.
    // The number of results in the response payload should be the same as the number of rows received.
    const resp = new Array(t1.length);

    // Iterating over all the rows in the request payload.
    for (const [i, x] of t1.entries())
    <span>{</span>
        var sum = 0;
        // Iterating over all the values in a single row.
        for (const y of x) <span>{</span>
            sum = sum + y;
        }
        resp[i] = sum;
    }
    // The 'results' field should contain the results of the lambda call.
    const response = <span>{</span>
        results: resp
    };
    return JSON.stringify(response);
};</code></pre>
            <p>Contoh berikut memanggil fungsi eksternal dengan nilai literal.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select exfunc_sum(1,2);
exfunc_sum
------------
 3
(1 row)</code></pre>
            <p>Contoh berikut membuat tabel yang disebut t_sum dengan dua kolom, c1 dan c2, dari tipe data integer dan menyisipkan dua baris data. Kemudian fungsi eksternal dipanggil dengan melewatkan nama kolom tabel ini. Dua baris tabel dikirim dalam permintaan batch dalam payload permintaan sebagai pemanggilan Lambda tunggal.</p>
            
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE t_sum(c1 int, c2 int);
INSERT INTO t_sum VALUES (4,5), (6,7);
SELECT exfunc_sum(c1,c2) FROM t_sum;
 exfunc_sum
---------------
 9
 13
(2 rows)</code></pre>
          

         
          
            <h3 id="r_CREATE_FUNCTION-lambda-example-retry">Contoh Skalar Lambda UDF menggunakan atribut RETRY_TIMEOUT</h3>
            <p>Di bagian berikut, Anda dapat menemukan contoh cara menggunakan atribut RETRY_TIMEOUT di Lambda UDF. </p>
            <p>AWS Lambdafungsi memiliki batas konkurensi yang dapat Anda atur untuk setiap fungsi. Untuk informasi selengkapnya tentang batas konkurensi, lihat <a href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-concurrency.html">Mengelola konkurensi untuk fungsi Lambda</a> di <em>Panduan AWS Lambda Pengembang</em> dan posting <a href="https://aws.amazon.com/blogs/compute/managing-aws-lambda-function-concurrency" rel="noopener noreferrer" target="_blank"><span>Mengelola Konkurensi AWS Lambda Fungsi</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> di Blog Komputasi. AWS </p>
            <p>Ketika jumlah permintaan yang dilayani oleh Lambda UDF melebihi batas konkurensi, permintaan baru menerima kesalahan. <code class="code">TooManyRequestsException</code> Lambda UDF mencoba ulang kesalahan ini hingga jumlah semua penundaan antara permintaan yang dikirim ke fungsi Lambda sama dengan atau melebihi nilai RETRY_TIMEOUT yang Anda tetapkan. Nilai RETRY_TIMEOUT default adalah 20.000 milidetik.</p>
              <p>Contoh berikut menggunakan fungsi Lambda bernama. <code class="code">exfunc_sleep_3</code> Fungsi ini mengambil payload permintaan, iterasi di setiap baris, dan mengubah input menjadi huruf besar. Kemudian tidur selama 3 detik dan mengembalikan hasilnya. Bahasa yang digunakan untuk fungsi Lambda ini adalah Python 3.8. </p>
            <p>Jumlah baris dalam larik hasil mirip dengan jumlah baris yang diterima dalam payload permintaan. Payload respons JSON harus memiliki data hasil di <code class="code">results</code> lapangan agar dapat dikenali oleh fungsi eksternal. <code class="code">arguments</code>Bidang dalam permintaan yang dikirim ke fungsi Lambda berisi muatan data. Dalam kasus permintaan batch, beberapa baris dapat muncul di payload data.</p>
              <p>Batas konkurensi untuk fungsi ini secara khusus diatur ke 1 dalam konkurensi cadangan untuk menunjukkan penggunaan atribut RETRY_TIMEOUT. Ketika atribut diatur ke 1, fungsi Lambda hanya dapat melayani satu permintaan pada satu waktu.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">import json
import time
def lambda_handler(event, context):
    t1 = event['arguments']
    # 'len(t1)' represents the number of rows in the request payload.
    # The number of results in the response payload should be the same as the number of rows received.
    resp = [None]*len(t1)

    # Iterating over all rows in the request payload.
    for i, x in enumerate(t1):
        # Iterating over all the values in a single row.
        for j, y in enumerate(x):
            resp[i] = y.upper()

    time.sleep(3)
    ret = dict()
    ret['results'] = resp
    ret_json = json.dumps(ret)
    return ret_json</code></pre>
            <p>Berikut ini, dua contoh tambahan menggambarkan atribut RETRY_TIMEOUT. Mereka masing-masing memanggil Lambda UDF tunggal. Saat menjalankan Lambda UDF, setiap contoh menjalankan kueri SQL yang sama untuk memanggil UDF Lambda dari dua sesi database bersamaan pada saat yang bersamaan. Ketika kueri pertama yang memanggil Lambda UDF sedang dilayani oleh UDF, kueri kedua menerima kesalahan. <code class="code">TooManyRequestsException</code> Hasil ini terjadi karena Anda secara khusus mengatur konkurensi cadangan di UDF ke 1. Untuk informasi tentang cara menyetel konkurensi cadangan untuk fungsi Lambda, <a href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-concurrency.html#configuration-concurrency-reservedconfiguration-concurrency-reserved">lihat Mengonfigurasi konkurensi</a> cadangan.</p>


            

            <p>Contoh pertama, berikut, menetapkan atribut RETRY_TIMEOUT untuk Lambda UDF ke 0 milidetik. Jika permintaan Lambda menerima pengecualian apa pun dari fungsi Lambda, Amazon Redshift tidak akan mencoba lagi. Hasil ini terjadi karena atribut RETRY_TIMEOUT disetel ke 0.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE OR REPLACE EXTERNAL FUNCTION exfunc_upper(varchar)
RETURNS varchar
VOLATILE
LAMBDA 'exfunc_sleep_3'
IAM_ROLE 'arn:aws:iam::123456789012:role/Redshift-Exfunc-Test'
RETRY_TIMEOUT 0;</code></pre>
            <p>Dengan RETRY_TIMEOUT disetel ke 0, Anda dapat menjalankan dua kueri berikut dari sesi database terpisah untuk melihat hasil yang berbeda.</p>
            <p>Kueri SQL pertama yang menggunakan Lambda UDF berjalan dengan sukses.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select exfunc_upper('Varchar');
 exfunc_upper
 --------------
 VARCHAR
(1 row)</code></pre>
            <p>Kueri kedua, yang dijalankan dari sesi database terpisah pada saat yang sama, menerima <code class="code">TooManyRequestsException</code> kesalahan.</p>
                  
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select exfunc_upper('Varchar');
ERROR:  Rate Exceeded.; Exception: TooManyRequestsException; ShouldRetry: 1
DETAIL:
-----------------------------------------------
error:  Rate Exceeded.; Exception: TooManyRequestsException; ShouldRetry: 1
code:      32103
context:query:     0
location:  exfunc_client.cpp:102
process:   padbmaster [pid=26384]
-----------------------------------------------</code></pre>

                  <p>Contoh kedua, berikut, menetapkan atribut RETRY_TIMEOUT untuk Lambda UDF menjadi 3.000 milidetik. Bahkan jika kueri kedua dijalankan secara bersamaan, Lambda UDF mencoba ulang hingga total penundaan adalah 3.000 milidetik. Dengan demikian, kedua kueri berjalan dengan sukses.</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE OR REPLACE EXTERNAL FUNCTION exfunc_upper(varchar)
RETURNS varchar
VOLATILE
LAMBDA 'exfunc_sleep_3'
IAM_ROLE 'arn:aws:iam::123456789012:role/Redshift-Exfunc-Test'
RETRY_TIMEOUT 3000;</code></pre>
                  <p>Dengan RETRY_TIMEOUT disetel ke 3.000 milidetik, Anda dapat menjalankan dua kueri berikut dari sesi database terpisah untuk melihat hasil yang sama.</p>
                  <p>Kueri SQL pertama yang menjalankan Lambda UDF berjalan dengan sukses.</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select exfunc_upper('Varchar');
 exfunc_upper
 --------------
 VARCHAR
(1 row)</code></pre>
                  <p>Kueri kedua berjalan secara bersamaan, dan Lambda UDF mencoba lagi hingga total penundaan 3.000 milidetik.</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select exfunc_upper('Varchar');
 exfunc_upper
--------------
 VARCHAR
(1 row)</code></pre>

          

          
            <h3 id="r_CREATE_FUNCTION-lambda-example-python">Contoh Skalar Lambda UDF menggunakan fungsi Lambda Python</h3>
            <p>Contoh berikut menciptakan fungsi eksternal yang bernama <code class="code">exfunc_multiplication</code> dan yang mengalikan angka dan mengembalikan integer. Contoh ini menggabungkan keberhasilan dan <code class="code">error_msg</code> bidang dalam respons Lambda. Bidang sukses disetel ke false ketika ada luapan bilangan bulat dalam hasil perkalian, dan <code class="code">error_msg</code> pesan disetel ke. <code class="code">Integer multiplication overflow</code> <code class="code">exfunc_multiplication</code>Fungsi ini mengambil tiga bilangan bulat sebagai argumen masukan dan mengembalikan jumlah sebagai output integer. </p>
            <p>Nama fungsi Lambda yang disebut adalah. <code class="code">lambda_multiplication</code> Bahasa yang digunakan untuk fungsi Lambda ini adalah Python 3.8. Pastikan untuk menentukan peran IAM.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL FUNCTION exfunc_multiplication(int, int, int)
RETURNS INT
VOLATILE
LAMBDA 'lambda_multiplication'
IAM_ROLE 'arn:aws:iam::123456789012:role/Redshift-Exfunc-Test'; </code></pre>
            <p>Fungsi Lambda mengambil payload permintaan dan iterasi di setiap baris. Semua nilai dalam satu baris dikalikan untuk menghitung hasil untuk baris itu, yang disimpan dalam daftar respons. Contoh ini menggunakan nilai keberhasilan Boolean yang diatur ke true secara default. Jika hasil perkalian untuk baris memiliki overflow integer, maka nilai keberhasilan disetel ke false. Kemudian loop iterasi rusak. </p>
            <p>Saat membuat payload respons, jika nilai keberhasilannya salah, fungsi Lambda berikut menambahkan bidang <code class="code">error_msg</code> di payload. Ini juga mengatur pesan kesalahan ke<code class="code">Integer multiplication overflow</code>. Jika nilai keberhasilan benar, maka data hasil ditambahkan di bidang hasil. Jumlah baris dalam larik hasil, jika ada, mirip dengan jumlah baris yang diterima dalam payload permintaan. </p>
            <p>Bidang argumen dalam permintaan yang dikirim ke fungsi Lambda berisi payload data. Mungkin ada beberapa baris dalam payload data jika terjadi permintaan batch. Fungsi Lambda berikut mengulangi semua baris dalam payload data permintaan dan secara individual mengulangi semua nilai dalam satu baris. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">import json
def lambda_handler(event, context):
    t1 = event['arguments']
    # 'len(t1)' represents the number of rows in the request payload.
    # The number of results in the response payload should be the same as the number of rows received.
    resp = [None]*len(t1)

    # By default success is set to 'True'.
    success = True
    # Iterating over all rows in the request payload.
    for i, x in enumerate(t1):
        mul = 1
        # Iterating over all the values in a single row.
        for j, y in enumerate(x):
            mul = mul*y

        # Check integer overflow.
        if (mul &gt;= 9223372036854775807 or mul &lt;= -9223372036854775808):
            success = False
            break
        else:
            resp[i] = mul
    ret = dict()
    ret['success'] = success
    if not success:
        ret['error_msg'] = "Integer multiplication overflow"
    else:
        ret['results'] = resp
    ret_json = json.dumps(ret)

    return ret_json</code></pre>

            <p>Contoh berikut memanggil fungsi eksternal dengan nilai literal.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT exfunc_multiplication(8, 9, 2);
  exfunc_multiplication
---------------------------
          144
(1 row)</code></pre>

            <p>Contoh berikut membuat tabel bernama t_multi dengan tiga kolom, c1, c2, dan c3, dari tipe data integer. Fungsi eksternal dipanggil dengan melewatkan nama kolom tabel ini. Data dimasukkan sedemikian rupa untuk menyebabkan integer overflow untuk menunjukkan bagaimana kesalahan disebarkan.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE t_multi (c1 int, c2 int, c3 int);
INSERT INTO t_multi VALUES (2147483647, 2147483647, 4);
SELECT exfunc_multiplication(c1, c2, c3) FROM t_multi;
DETAIL:
  -----------------------------------------------
  error:  Integer multiplication overflow
  code:      32004context:
  context:
  query:     38
  location:  exfunc_data.cpp:276
  process:   query2_16_38 [pid=30494]
  -----------------------------------------------</code></pre>
          




         
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Awas" /> <strong>Javascript dinonaktifkan atau tidak tersedia di browser Anda.</strong></p><p>Untuk menggunakan Dokumentasi AWS, Javascript harus diaktifkan. Lihat halaman Bantuan browser Anda untuk petunjuk.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Konvensi Dokumen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_DATASHARE.html">BUAT DATASHARE</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_EXTERNAL_SCHEMA.html">BUAT SKEMA EKSTERNAL</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Apakah halaman ini membantu Anda? - Ya</div><div class="content"><p>Terima kasih telah memberitahukan bahwa hasil pekerjaan kami sudah baik.</p><p>Jika Anda memiliki waktu luang, beri tahu kami aspek apa saja yang sudah bagus, agar kami dapat menerapkannya secara lebih luas.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Umpan Balik" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Apakah halaman ini membantu Anda? - Tidak</div><div class="content"><p>Terima kasih telah memberi tahu kami bahwa halaman ini perlu ditingkatkan. Maaf karena telah mengecewakan Anda.</p><p>Jika Anda memiliki waktu luang, beri tahu kami bagaimana dokumentasi ini dapat ditingkatkan.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Umpan Balik" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_FUNCTION.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>