<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="id-ID"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Membuat tabel eksternal untuk Redshift Spectrum - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-spectrum-external-tables" /><meta name="default_state" content="c-spectrum-external-tables" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html" /><meta name="description" content="Anda membuat tabel eksternal dalam skema eksternal. Untuk membuat tabel eksternal, Anda harus menjadi pemilik skema eksternal atau superuser. Untuk mentransfer kepemilikan skema eksternal, gunakan untuk mengubah pemilik. Contoh berikut mengubah pemilik" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Panduan Pengembang Database" /><meta name="abstract" content="Buat dan kelola gudang data dengan Amazon Redshift, skala petabyte tingkat perusahaan, layanan pergudangan data yang dikelola sepenuhnya." /><meta name="guide-locale" content="id_id" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Panduan Pengembang Database" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Panduan Pengembang Database" /><meta id="panorama-serviceConsolePage" value="Membuat tabel eksternal untuk Redshift Spectrum" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Membuat tabel eksternal untuk Redshift Spectrum - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c-spectrum-external-tables" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html" /><meta name="keywords" content="Amazon Redshift,AWS Pergeseran Merah,Redshift,Spektrum Pergeseran Merah,Klaster,gudang data,pengembang,data sampel,database,pengembang basis data,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Panduan Pengembang Database",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Menanyakan data eksternal menggunakan Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Membuat tabel eksternal untuk Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c-spectrum-external-tables" target="_blank" rel="noopener noreferrer" title="Buka PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentasi</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Panduan Pengembang Database</a></div><div id="page-toc-src"><a href="#c-spectrum-external-tables-pseudocolumns">Pseudokolom</a><a href="#c-spectrum-external-tables-partitioning">Mempartisi tabel eksternal Redshift Spectrum</a><a href="#c-spectrum-column-mapping-orc">Pemetaan ke kolom ORC</a><a href="#c-spectrum-column-mapping-hudi">Membuat tabel eksternal untuk data yang dikelola HUDI</a><a href="#c-spectrum-column-mapping-delta">Membuat tabel eksternal untuk data Delta Lake</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Terjemahan disediakan oleh mesin penerjemah. Jika konten terjemahan yang diberikan bertentangan dengan versi bahasa Inggris aslinya, utamakan versi bahasa Inggris.</p></awsui-alert><h1 class="topictitle" id="c-spectrum-external-tables">Membuat tabel eksternal untuk Redshift Spectrum</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p></p><p>Anda membuat tabel eksternal dalam skema eksternal. Untuk membuat tabel eksternal, Anda harus menjadi pemilik skema eksternal atau superuser. Untuk mentransfer kepemilikan skema eksternal, gunakan <a href="./r_ALTER_SCHEMA.html">ALTER SCHEMA</a> untuk mengubah pemilik. Contoh berikut mengubah pemilik <code class="code">spectrum_schema</code> skema menjadi<code class="code">newowner</code>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">alter schema spectrum_schema owner to newowner;</code></pre><p>Untuk menjalankan kueri Redshift Spectrum, Anda memerlukan izin berikut:</p><div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Izin penggunaan pada skema </p>
         </li><li class="listitem">
            <p>Izin untuk membuat tabel sementara dalam database saat ini </p>
         </li></ul></div><p>Contoh berikut memberikan izin penggunaan pada skema <code class="code">spectrum_schema</code> ke grup <code class="code">spectrumusers</code> pengguna.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">grant usage on schema spectrum_schema to group spectrumusers;</code></pre><p>Contoh berikut memberikan izin sementara pada database <code class="code">spectrumdb</code> ke grup <code class="code">spectrumusers</code> pengguna. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">grant temp on database spectrumdb to group spectrumusers;</code></pre><p>Anda dapat membuat tabel eksternal di Amazon Redshift, Amazon AthenaAWS Glue, atau metastore Apache Hive. Untuk informasi selengkapnya, lihat <a href="https://docs.aws.amazon.com/glue/latest/dg/getting-started.html">Memulai Penggunaan AWS Glue</a> di <em>Panduan AWS Glue Pengembang</em>, <a href="https://docs.aws.amazon.com/athena/latest/ug/getting-started.html">Memulai</a> Panduan <em>Pengguna Amazon Athena, atau <a href="https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-hive.html">Apache Hive di</a> Panduan</em> Pengembang Amazon <em>EMR</em>. </p><p>Jika tabel eksternal Anda didefinisikan dalamAWS Glue, Athena, atau metastore Hive, Anda terlebih dahulu membuat skema eksternal yang mereferensikan database eksternal. Kemudian Anda dapat mereferensikan tabel eksternal dalam pernyataan SELECT Anda dengan mengawali nama tabel dengan nama skema, tanpa perlu membuat tabel di Amazon Redshift. Untuk informasi selengkapnya, lihat <a href="./c-spectrum-external-schemas.html">Membuat skema eksternal untuk Amazon Redshift Spectrum</a>. </p><p>Untuk mengizinkan Amazon Redshift melihat tabel diAWS Glue Data Catalog, tambahkan <code class="code">glue:GetTable</code> ke peran IAM Amazon Redshift. Jika tidak, Anda mungkin mendapatkan kesalahan yang mirip dengan berikut ini.</p><pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">RedshiftIamRoleSession is not authorized to perform: glue:GetTable on resource: *;</code></pre><p>Misalnya, Anda memiliki tabel eksternal bernama <code class="code">lineitem_athena</code> didefinisikan dalam katalog eksternal Athena. Dalam hal ini, Anda dapat menentukan skema eksternal bernama<code class="code">athena_schema</code>, lalu kueri tabel menggunakan pernyataan SELECT berikut.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select count(*) from athena_schema.lineitem_athena;</code></pre><p>Untuk menentukan tabel eksternal di Amazon Redshift, gunakan perintah. <a href="./r_CREATE_EXTERNAL_TABLE.html">CREATE EXTERNAL TABLE</a> Pernyataan tabel eksternal mendefinisikan kolom tabel, format file data Anda, dan lokasi data Anda di Amazon S3. Redshift Spectrum memindai file di folder yang ditentukan dan subfolder apa pun. Redshift Spectrum mengabaikan file dan file tersembunyi yang dimulai dengan titik, garis bawah, atau tanda hash (., _, atau #) atau diakhiri dengan tilde (~). </p><p>Contoh berikut membuat tabel bernama SALES dalam skema eksternal Amazon Redshift bernama. <code class="code">spectrum</code> Data ada dalam file teks yang dibatasi tab.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external table spectrum.sales(
salesid integer,
listid integer,
sellerid integer,
buyerid integer,
eventid integer,
dateid smallint,
qtysold smallint,
pricepaid decimal(8,2),
commission decimal(8,2),
saletime timestamp)
row format delimited
fields terminated by '\t'
stored as textfile
location 's3://redshift-downloads/tickit/spectrum/sales/'
table properties ('numRows'='172000');</code></pre><p>Untuk melihat tabel eksternal, kueri tampilan <a href="./r_SVV_EXTERNAL_TABLES.html">SVV_EXTERNAL_TABLES</a> sistem. </p>
         <h2 id="c-spectrum-external-tables-pseudocolumns">Pseudokolom</h2>

         
         <p>Secara default, Amazon Redshift membuat tabel eksternal dengan pseudocolumns<code class="code">$path</code>,, dan. <code class="code">$size</code> <code class="code">$spectrum_oid</code> Pilih <code class="code">$path</code> kolom untuk melihat jalur ke file data di Amazon S3, dan pilih <code class="code">$size</code> kolom untuk melihat ukuran file data untuk setiap baris yang dikembalikan oleh kueri. <code class="code">$spectrum_oid</code>Kolom menyediakan kemampuan untuk melakukan kueri berkorelasi dengan Redshift Spectrum. Lihat contohnya di <a href="./c_performing-correlated-subqueries-spectrum.html">Contoh: Melakukan subkueri berkorelasi dalam Redshift Spectrum</a>. Anda harus membatasi<code class="code">$path</code>,<code class="code">$size</code>, dan nama <code class="code">$spectrum_oid</code> kolom dengan tanda kutip ganda. Klausa SELECT * tidak mengembalikan pseudocolumns. Anda harus secara eksplisit menyertakan<code class="code">$path</code>,<code class="code">$size</code>, dan nama <code class="code">$spectrum_oid</code> kolom dalam kueri Anda, seperti yang ditunjukkan contoh berikut.</p>
         
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="SQL ">select "$path", "$size", "$spectrum_oid"
from spectrum.sales_part where saledate = '2008-12-01';</code></pre>
         
         <p>Anda dapat menonaktifkan pembuatan pseudocolumns untuk sesi dengan menyetel parameter <code class="code">spectrum_enable_pseudo_columns</code> konfigurasi ke. <code class="code">false</code> Untuk informasi selengkapnya, lihat <a href="./r_spectrum_enable_pseudo_columns.html">spectrum_enable_pseudo_columns</a>. Anda juga dapat menonaktifkan hanya <code class="code">$spectrum_oid</code> pseudocolumn dengan menyetel ke. <code class="code">enable_spectrum_oid</code> <code class="code">false</code> Untuk informasi selengkapnya, lihat <a href="./r_spectrum_enable_spectrum_oid.html">enable_spectrum_oid</a>. Namun, menonaktifkan <code class="code">$spectrum_oid</code> pseudocolumn juga menonaktifkan dukungan untuk kueri berkorelasi dengan Redshift Spectrum.</p>
         <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>penting</h6></div><div class="awsdocs-note-text"><p>Memilih<code class="code">$size</code>,<code class="code">$path</code>, atau <code class="code">$spectrum_oid</code> menimbulkan biaya karena Redshift Spectrum memindai file data di Amazon S3 untuk menentukan ukuran kumpulan hasil. Untuk informasi selengkapnya, lihat <a href="https://aws.amazon.com/redshift/pricing/" rel="noopener noreferrer" target="_blank"><span>Harga Amazon Redshift</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
          
            <h3 id="c-spectrum-external-tables-pseudocolumns-example">Contoh pseudocolumns</h3>

            <p>Contoh berikut mengembalikan ukuran total file data terkait untuk tabel eksternal.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select distinct "$path", "$size"
from spectrum.sales_part;

 $path                                                                    | $size
--------------------------------------------------------------------------+-------
s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-01/ |  1616
s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-02/ |  1444
s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-03/ |  1644</code></pre>
          
       
         <h2 id="c-spectrum-external-tables-partitioning">Mempartisi tabel eksternal Redshift Spectrum</h2>

         <p>Saat Anda mempartisi data Anda, Anda dapat membatasi jumlah data yang dipindai Redshift Spectrum dengan memfilter pada tombol partisi. Anda dapat mempartisi data Anda dengan kunci apa pun. </p>
         <p>Praktik yang umum adalah mempartisi data berdasarkan waktu. Misalnya, Anda dapat memilih untuk mempartisi berdasarkan tahun, bulan, tanggal, dan jam. Jika Anda memiliki data yang berasal dari berbagai sumber, Anda dapat mempartisi dengan pengenal dan tanggal sumber data. </p>
         <p>Prosedur berikut menjelaskan cara mempartisi data Anda.</p>
         <div class="procedure"><h6>Untuk mempartisi data Anda</h6><ol><li>
               <p>Simpan data Anda dalam folder di Amazon S3 sesuai dengan kunci partisi Anda. </p>
               <p>Buat satu folder untuk setiap nilai partisi dan beri nama folder dengan kunci dan nilai partisi. Misalnya, jika Anda mempartisi berdasarkan tanggal, Anda mungkin memiliki folder bernama <code class="code">saledate=2017-04-01</code><code class="code">saledate=2017-04-02</code>,, dan sebagainya. Redshift Spectrum memindai file di folder partisi dan subfolder apa pun. Redshift Spectrum mengabaikan file dan file tersembunyi yang dimulai dengan titik, garis bawah, atau tanda hash (., _, atau #) atau diakhiri dengan tilde (~). </p>

            </li><li>
               <p>Buat tabel eksternal dan tentukan kunci partisi dalam klausa PARTITIONED BY. </p>
               <p>Kunci partisi tidak bisa menjadi nama kolom tabel. Tipe data dapat berupa tipe data SMALLINT, INTEGER, BIGINT, DECIMAL, REAL, DOUBLE PRECISION, BOOLEAN, CHAR, VARCHAR, DATE, atau TIMESTAMP. </p>
            </li><li>
               <p>Tambahkan partisi. </p>
               <p>Menggunakan<a href="./r_ALTER_TABLE.html">ALTER TABLE</a>... ADD PARTITION, tambahkan setiap partisi, tentukan kolom partisi dan nilai kunci, dan lokasi folder partisi di Amazon S3. Anda dapat menambahkan beberapa partisi dalam satu pernyataan ALTER TABLE... ADD. Contoh berikut menambahkan partisi untuk <code class="code">'2008-01'</code> dan<code class="code">'2008-03'</code>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">alter table spectrum.sales_part add
partition(saledate='2008-01-01') 
location 's3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-01/'
partition(saledate='2008-03-01') 
location 's3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-03/';</code></pre>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>catatan</h6></div><div class="awsdocs-note-text"><p>Jika Anda menggunakan AWS Glue katalog, Anda dapat menambahkan hingga 100 partisi menggunakan pernyataan ALTER TABLE tunggal.</p></div></div>
            </li></ol></div>

          
            <h3 id="c-spectrum-external-tables-partitioning-example">Mempartisi contoh data</h3>


            <p>Dalam contoh ini, Anda membuat tabel eksternal yang dipartisi oleh kunci partisi tunggal dan tabel eksternal yang dipartisi oleh dua kunci partisi.</p>

            <p>Data sampel untuk contoh ini terletak di bucket Amazon S3 yang memberikan akses baca ke semua pengguna yang diautentikasiAWS. Cluster Anda dan file data eksternal Anda harus samaWilayah AWS. Bucket data sampel berada di Wilayah AS Timur (Virginia N.) (us-timur-1). Untuk mengakses data menggunakan Redshift Spectrum, cluster Anda juga harus berada di us-east-1. Untuk membuat daftar folder di Amazon S3, jalankan perintah berikut.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws s3 ls s3://redshift-downloads/tickit/spectrum/sales_partition/</code></pre>
            <pre class="screen">PRE saledate=2008-01/
PRE saledate=2008-03/
PRE saledate=2008-04/
PRE saledate=2008-05/
PRE saledate=2008-06/
PRE saledate=2008-12/</pre>
            <p>Jika Anda belum memiliki skema eksternal, jalankan perintah berikut. Gantikan Nama Sumber Daya Amazon (ARN) untuk peran AWS Identity and Access Management (IAM) Anda.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum
from data catalog
database 'spectrumdb'
iam_role 'arn:aws:iam::123456789012:role/myspectrumrole'
create external database if not exists;</code></pre>
             
               <h4 id="c-spectrum-external-tables-single-partition-example">Contoh 1: Partisi dengan kunci partisi tunggal</h4>
               <p>Dalam contoh berikut, Anda membuat tabel eksternal yang dipartisi berdasarkan bulan.</p>
               <p>Untuk membuat tabel eksternal yang dipartisi berdasarkan bulan, jalankan perintah berikut.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external table spectrum.sales_part(
salesid integer,
listid integer,
sellerid integer,
buyerid integer,
eventid integer,
dateid smallint,
qtysold smallint,
pricepaid decimal(8,2),
commission decimal(8,2),
saletime timestamp)
partitioned by (saledate char(10))
row format delimited
fields terminated by '|'
stored as textfile
location 's3://redshift-downloads/tickit/spectrum/sales_partition/'
table properties ('numRows'='172000');</code></pre>
               <p>Untuk menambahkan partisi, jalankan perintah ALTER TABLE berikut.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">alter table spectrum.sales_part add
partition(saledate='2008-01') 
location 's3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-01/'

partition(saledate='2008-03') 
location 's3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-03/'

partition(saledate='2008-04') 
location 's3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-04/';</code></pre>
               <p>Untuk memilih data dari tabel yang dipartisi, jalankan kueri berikut.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select top 5 spectrum.sales_part.eventid, sum(spectrum.sales_part.pricepaid) 
from spectrum.sales_part, event
where spectrum.sales_part.eventid = event.eventid
  and spectrum.sales_part.pricepaid &gt; 30
  and saledate = '2008-01'
group by spectrum.sales_part.eventid
order by 2 desc;</code></pre>

               <pre class="screen">eventid | sum     
--------+---------
   4124 | 21179.00
   1924 | 20569.00
   2294 | 18830.00
   2260 | 17669.00
   6032 | 17265.00</pre>
               <p>Untuk melihat partisi tabel eksternal, kueri tampilan <a href="./r_SVV_EXTERNAL_PARTITIONS.html">SVV_EXTERNAL_PARTITIONS</a> sistem.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select schemaname, tablename, values, location from svv_external_partitions
where tablename = 'sales_part';</code></pre>

               <pre class="screen">schemaname | tablename  | values      | location                                                                
-----------+------------+-------------+-------------------------------------------------------------------------
spectrum   | sales_part | ["2008-01"] | s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-01
spectrum   | sales_part | ["2008-03"] | s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-03
spectrum   | sales_part | ["2008-04"] | s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-04</pre>
             
             
               <h4 id="c-spectrum-external-tables-multi-partition-example">Contoh 2: Mempartisi dengan beberapa kunci partisi</h4>

               <p>Untuk membuat tabel eksternal yang dipartisi oleh <code class="code">date</code> dan<code class="code">eventid</code>, jalankan perintah berikut.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external table spectrum.sales_event(
salesid integer,
listid integer,
sellerid integer,
buyerid integer,
eventid integer,
dateid smallint,
qtysold smallint,
pricepaid decimal(8,2),
commission decimal(8,2),
saletime timestamp)
partitioned by (salesmonth char(10), event integer)
row format delimited
fields terminated by '|'
stored as textfile
location 's3://redshift-downloads/tickit/spectrum/salesevent/'
table properties ('numRows'='172000');</code></pre>
               <p>Untuk menambahkan partisi, jalankan perintah ALTER TABLE berikut.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">alter table spectrum.sales_event add
partition(salesmonth='2008-01', event='101') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-01/event=101/'

partition(salesmonth='2008-01', event='102') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-01/event=102/'

partition(salesmonth='2008-01', event='103') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-01/event=103/'

partition(salesmonth='2008-02', event='101') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-02/event=101/'

partition(salesmonth='2008-02', event='102') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-02/event=102/'

partition(salesmonth='2008-02', event='103') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-02/event=103/'

partition(salesmonth='2008-03', event='101') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-03/event=101/'

partition(salesmonth='2008-03', event='102') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-03/event=102/'

partition(salesmonth='2008-03', event='103') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-03/event=103/';</code></pre>
               <p>Jalankan query berikut untuk memilih data dari tabel dipartisi.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select spectrum.sales_event.salesmonth, event.eventname, sum(spectrum.sales_event.pricepaid) 
from spectrum.sales_event, event
where spectrum.sales_event.eventid = event.eventid
  and salesmonth = '2008-02'
	and (event = '101'
	or event = '102'
	or event = '103')
group by event.eventname, spectrum.sales_event.salesmonth
order by 3 desc;</code></pre>
               <pre class="screen">salesmonth | eventname       | sum    
-----------+-----------------+--------
2008-02    | The Magic Flute | 5062.00
2008-02    | La Sonnambula   | 3498.00
2008-02    | Die Walkure     |  534.00</pre>
             
          
       
         <h2 id="c-spectrum-column-mapping-orc">Memetakan kolom tabel eksternal ke kolom ORC</h2>
         <p>Anda menggunakan tabel eksternal Amazon Redshift Spectrum untuk menanyakan data dari file dalam format ORC. Format kolom baris yang dioptimalkan (ORC) adalah format file penyimpanan kolumnar yang mendukung struktur data bersarang. Untuk informasi selengkapnya tentang menanyakan data bersarang, lihat <a href="./tutorial-query-nested-data.html#tutorial-nested-data-overview">Menanyakan Data Bersarang dengan Amazon Redshift Spectrum</a>. </p>
         <p>Saat Anda membuat tabel eksternal yang mereferensikan data dalam file ORC, Anda memetakan setiap kolom di tabel eksternal ke kolom dalam data ORC. Untuk melakukannya, Anda menggunakan salah satu metode berikut:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p><a href="#orc-mapping-by-position">Pemetaan berdasarkan posisi</a></p>
            </li><li class="listitem">
               <p><a href="#orc-mapping-by-name">Pemetaan dengan nama kolom</a> </p>
            </li></ul></div>
         <p>Pemetaan dengan nama kolom adalah default. </p>
          
            <h3 id="orc-mapping-by-position">Pemetaan berdasarkan posisi</h3>
            <p>Dengan pemetaan posisi, kolom pertama yang ditentukan dalam tabel eksternal memetakan ke kolom pertama dalam file data ORC, yang kedua ke yang kedua, dan seterusnya. Pemetaan berdasarkan posisi mengharuskan urutan kolom dalam tabel eksternal dan dalam file ORC cocok. Jika urutan kolom tidak cocok, maka Anda dapat memetakan kolom berdasarkan nama. </p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>penting</h6></div><div class="awsdocs-note-text"><p>Dalam rilis sebelumnya, Redshift Spectrum menggunakan pemetaan posisi secara default. Jika Anda perlu terus menggunakan pemetaan posisi untuk tabel yang ada, atur properti tabel <code class="code">orc.schema.resolution</code> ke<code class="code">position</code>, seperti yang ditunjukkan contoh berikut. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">alter table spectrum.orc_example 
set table properties('orc.schema.resolution'='position'); </code></pre></div></div>
            <p>Misalnya, tabel <code class="code">SPECTRUM.ORC_EXAMPLE</code> didefinisikan sebagai berikut. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external table spectrum.orc_example(
int_col int,
float_col float,
nested_col struct&lt;
  "int_col" : int,
  "map_col" : map&lt;int, array&lt;float &gt;&gt;
   &gt;
) stored as orc
location 's3://example/orc/files/';</code></pre>
            <p>Struktur tabel dapat diabstraksikan sebagai berikut. </p>
            <pre class="screen">• 'int_col' : int
• 'float_col' : float
• 'nested_col' : struct
   o 'int_col' : int
   o 'map_col' : map
      - key : int
      - value : array
         - value : float</pre>
            <p>File ORC yang mendasarinya memiliki struktur file berikut.</p>
            <pre class="screen">• ORC file root(id = 0)
   o 'int_col' : int (id = 1)
   o 'float_col' : float (id = 2)
   o 'nested_col' : struct (id = 3)
      - 'int_col' : int (id = 4)
      - 'map_col' : map (id = 5)
         - key : int (id = 6)
         - value : array (id = 7)
            - value : float (id = 8)</pre>
            <p>Dalam contoh ini, Anda dapat memetakan setiap kolom di tabel eksternal ke kolom dalam file ORC secara ketat berdasarkan posisi. Berikut ini menunjukkan pemetaan.</p>

            <div class="table-container"><div class="table-contents"><table id="w320aac29c19c45c11c21"><thead>
                     <tr>
                        <th>Nama kolom tabel eksternal</th>
                        <th>ID kolom ORC</th>
                        <th>Nama kolom ORC</th>
                     </tr>
                  </thead>
                     <tr>
                        <td tabindex="-1">int_col</td>
                        <td tabindex="-1">1</td>
                        <td tabindex="-1">int_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">float_col</td>
                        <td tabindex="-1">2</td>
                        <td tabindex="-1">float_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col</td>
                        <td tabindex="-1">3</td>
                        <td tabindex="-1">nested_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col.int_col</td>
                        <td tabindex="-1">4</td>
                        <td tabindex="-1">int_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col.map_col</td>
                        <td tabindex="-1">5</td>
                        <td tabindex="-1">map_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col.map_col.key</td>
                        <td tabindex="-1">6</td>
                        <td tabindex="-1">TA</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col.map_col.value</td>
                        <td tabindex="-1">7</td>
                        <td tabindex="-1">TA</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col.map_col.value.item</td>
                        <td tabindex="-1">8</td>
                        <td tabindex="-1">TA</td>
                     </tr>
                  </table></div></div>
          
          
            <h3 id="orc-mapping-by-name">Pemetaan dengan nama kolom</h3>
            <p>Menggunakan pemetaan nama, Anda memetakan kolom dalam tabel eksternal ke kolom bernama dalam file ORC pada tingkat yang sama, dengan nama yang sama. </p>
            <p>Misalnya, misalkan Anda ingin memetakan tabel dari contoh sebelumnya<code class="code">SPECTRUM.ORC_EXAMPLE</code>, dengan file ORC yang menggunakan struktur file berikut.</p>
            <pre class="screen">• ORC file root(id = 0)
   o 'nested_col' : struct (id = 1)
      - 'map_col' : map (id = 2)
         - key : int (id = 3)
         - value : array (id = 4)
            - value : float (id = 5)
      - 'int_col' : int (id = 6)
   o 'int_col' : int (id = 7)
   o 'float_col' : float (id = 8)</pre>

            <p>Menggunakan pemetaan posisi, Redshift Spectrum mencoba pemetaan berikut. </p>
            <div class="table-container"><div class="table-contents"><table id="w320aac29c19c45c13c11"><thead>
                     <tr>
                        <th>Nama kolom tabel eksternal</th>
                        <th>ID kolom ORC</th>
                        <th>Nama kolom ORC</th>
                     </tr>
                  </thead>
                     <tr>
                        <td tabindex="-1">int_col</td>
                        <td tabindex="-1">1</td>
                        <td tabindex="-1">struct</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">float_col</td>
                        <td tabindex="-1">7</td>
                        <td tabindex="-1">int_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col</td>
                        <td tabindex="-1">8</td>
                        <td tabindex="-1">float_col</td>
                     </tr>
                  </table></div></div>
            <p>Saat Anda menanyakan tabel dengan pemetaan posisi sebelumnya, perintah SELECT gagal pada validasi tipe karena strukturnya berbeda. </p>
            <p>Anda dapat memetakan tabel eksternal yang sama ke kedua struktur file yang ditunjukkan pada contoh sebelumnya dengan menggunakan pemetaan nama kolom. Kolom tabel <code class="code">int_col</code><code class="code">float_col</code>,, dan <code class="code">nested_col</code> peta dengan nama kolom ke kolom dengan nama yang sama dalam file ORC. Kolom yang dinamai <code class="code">nested_col</code> dalam tabel eksternal adalah <code class="code">struct</code> kolom dengan subkolom bernama <code class="code">map_col</code> dan<code class="code">int_col</code>. Subkolom juga memetakan dengan benar ke kolom yang sesuai dalam file ORC dengan nama kolom. </p>

          
       
      <h2 id="c-spectrum-column-mapping-hudi">Membuat tabel eksternal untuk data yang dikelola di Apache Hudi</h2>
      <p>Untuk kueri data dalam format Apache Hudi Copy On Write (CoW), Anda dapat menggunakan tabel eksternal Amazon Redshift Spectrum. Tabel Hudi Copy On Write adalah kumpulan file Apache Parquet yang disimpan di Amazon S3. Anda dapat membaca tabel Copy On Write (CoW) di Apache Hudi versi 0.5.2, 0.6.0, 0.7.0, 0.8.0, 0.9.0, 0.10.0, 0.10.1, 0.11.0, dan 0.11.1 yang dibuat dan dimodifikasi dengan operasi insert, delete, dan upsert write. Misalnya, tabel bootstrap tidak didukung. Untuk informasi selengkapnya, lihat <a href="https://hudi.apache.org/docs/next/table_types#copy-on-write-table" rel="noopener noreferrer" target="_blank"><span>Menyalin Tabel Tulis di</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> dokumentasi Apache Hudi open source. </p>
      <p>Saat Anda membuat tabel eksternal yang mereferensikan data dalam format Hudi CoW, Anda memetakan setiap kolom di tabel eksternal ke kolom dalam data Hudi. Pemetaan dilakukan dengan kolom. </p>

      <p>Pernyataan bahasa definisi data (DDL) untuk tabel Hudi yang dipartisi dan tidak dipartisi mirip dengan yang untuk format file Apache Parquet lainnya. Untuk tabel Hudi, Anda mendefinisikan <code class="code">INPUTFORMAT</code> sebagai<code class="code">org.apache.hudi.hadoop.HoodieParquetInputFormat</code>. <code class="code">LOCATION</code>Parameter harus menunjuk ke folder dasar tabel Hudi yang berisi <code class="code">.hoodie</code> folder, yang diperlukan untuk menetapkan timeline komit Hudi. Dalam beberapa kasus, operasi SELECT pada tabel Hudi mungkin gagal dengan pesan <strong class="errortext"><code>Tidak ditemukan timeline komit Hudi yang valid</code></strong>. Jika demikian, periksa apakah <code class="code">.hoodie</code> folder tersebut berada di lokasi yang benar dan berisi timeline komit Hudi yang valid. </p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>catatan</h6></div><div class="awsdocs-note-text"><p>Format Apache Hudi hanya didukung saat Anda menggunakan file. AWS Glue Data Catalog Ini tidak didukung ketika Anda menggunakan metastore Apache Hive sebagai katalog eksternal. </p></div></div>
      <p>DDL untuk mendefinisikan tabel yang tidak dipartisi memiliki format berikut. </p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE EXTERNAL TABLE <em>tbl_name</em> (<em>columns</em>)
ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
STORED AS
INPUTFORMAT 'org.apache.hudi.hadoop.HoodieParquetInputFormat'
OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat'
LOCATION 's3://<em>s3-bucket</em>/<em>prefix</em>'</code></pre>
      <p>DDL untuk mendefinisikan tabel dipartisi memiliki format berikut. </p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE EXTERNAL TABLE <em>tbl_name</em> (<em>columns</em>)
PARTITIONED BY(<em>pcolumn1</em> <em>pcolumn1-type</em>[,...])
ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
STORED AS
INPUTFORMAT 'org.apache.hudi.hadoop.HoodieParquetInputFormat'
OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat'
LOCATION 's3://<em>s3-bucket</em>/<em>prefix</em>'</code></pre>
      <p>Untuk menambahkan partisi ke tabel Hudi yang dipartisi, jalankan perintah ALTER TABLE ADD PARTITION di mana <code class="code">LOCATION</code> parameter menunjuk ke subfolder Amazon S3 dengan file milik partisi.</p>
      <p>DDL untuk menambahkan partisi memiliki format berikut.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">ALTER TABLE <em>tbl_name</em>
ADD IF NOT EXISTS PARTITION(<em>pcolumn1</em>=<em>pvalue1</em>[,...])
LOCATION 's3://<em>s3-bucket</em>/<em>prefix</em>/<em>partition-path</em>'</code></pre>
    
      <h2 id="c-spectrum-column-mapping-delta">Membuat tabel eksternal untuk data yang dikelola di Delta Lake</h2>
      <p>Untuk menanyakan data dalam tabel Delta Lake, Anda dapat menggunakan tabel eksternal Amazon Redshift Spectrum. </p>
         <p>Untuk mengakses tabel Delta Lake dari Redshift Spectrum, buat manifes sebelum kueri. <em>Manifes</em> Delta Lake berisi daftar file yang membentuk snapshot yang konsisten dari tabel Delta Lake. Dalam tabel yang dipartisi, ada satu manifes per partisi. Tabel Delta Lake adalah kumpulan file Apache Parquet yang disimpan di Amazon S3. Untuk informasi lebih lanjut, lihat <a href="https://delta.io" rel="noopener noreferrer" target="_blank"><span>Delta Lake</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> di dokumentasi Delta Lake open source. </p>
      <p>Saat Anda membuat tabel eksternal yang mereferensikan data dalam tabel Delta Lake, Anda memetakan setiap kolom di tabel eksternal ke kolom di tabel Delta Lake. Pemetaan dilakukan dengan nama kolom. </p>
      
      <p>DDL untuk tabel Delta Lake yang dipartisi dan tidak dipartisi mirip dengan yang untuk format file Apache Parquet lainnya. Untuk tabel Delta Lake, Anda mendefinisikan <code class="code">INPUTFORMAT</code> sebagai <code class="code">org.apache.hadoop.hive.ql.io.SymlinkTextInputFormat</code> dan <code class="code">OUTPUTFORMAT</code> as<code class="code">org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat</code>. <code class="code">LOCATION</code>Parameter harus menunjuk ke folder manifes di folder dasar tabel. Jika operasi SELECT pada tabel Delta Lake gagal, untuk alasan yang mungkin lihat<a href="#c-spectrum-column-mapping-delta-limitations">Keterbatasan dan pemecahan masalah untuk tabel Delta Lake</a>. </p>
      <p>DDL untuk mendefinisikan tabel yang tidak dipartisi memiliki format berikut. </p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE EXTERNAL TABLE <em>tbl_name</em> (<em>columns</em>)
ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
STORED AS
INPUTFORMAT 'org.apache.hadoop.hive.ql.io.SymlinkTextInputFormat'
OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'
LOCATION 's3://<em>s3-bucket</em>/<em>prefix</em>/_symlink_format_manifest'</code></pre>
      <p>DDL untuk mendefinisikan tabel dipartisi memiliki format berikut. </p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE EXTERNAL TABLE <em>tbl_name</em> (<em>columns</em>)
PARTITIONED BY(<em>pcolumn1</em> <em>pcolumn1-type</em>[,...])
ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
STORED AS
INPUTFORMAT 'org.apache.hadoop.hive.ql.io.SymlinkTextInputFormat'
OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'
LOCATION 's3://<em>s3-bucket</em>&gt;/<em>prefix</em>/_symlink_format_manifest'</code></pre>
      <p>Untuk menambahkan partisi ke tabel Delta Lake yang dipartisi, jalankan perintah ALTER TABLE ADD PARTITION di mana <code class="code">LOCATION</code> parameter menunjuk ke subfolder Amazon S3 yang berisi manifes untuk partisi.</p>
      <p>DDL untuk menambahkan partisi memiliki format berikut.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">ALTER TABLE <em>tbl_name</em>
ADD IF NOT EXISTS PARTITION(<em>pcolumn1</em>=<em>pvalue1</em>[,...])
LOCATION
's3://<em>s3-bucket</em>/<em>prefix</em>/_symlink_format_manifest/<em>partition-path</em>'</code></pre>
      <p>Atau jalankan DDL yang menunjuk langsung ke file manifes Delta Lake.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">ALTER TABLE <em>tbl_name</em>
ADD IF NOT EXISTS PARTITION(<em>pcolumn1</em>=<em>pvalue1</em>[,...])
LOCATION
's3://<em>s3-bucket</em>/<em>prefix</em>/_symlink_format_manifest/<em>partition-path</em>/manifest'</code></pre>
      
       
         <h3 id="c-spectrum-column-mapping-delta-limitations">Keterbatasan dan pemecahan masalah untuk tabel Delta Lake</h3>
       
      <p>Pertimbangkan hal berikut saat menanyakan tabel Delta Lake dari Redshift Spectrum:</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem"><p>Jika manifes menunjuk ke snapshot atau partisi yang tidak ada lagi, kueri gagal hingga manifes baru yang valid telah dibuat. Misalnya, ini mungkin hasil dari operasi VACUUM pada tabel yang mendasarinya,</p></li><li class="listitem"><p>Manifestasi Danau Delta hanya memberikan konsistensi tingkat partisi. </p></li></ul></div>
      <p>Tabel berikut menjelaskan beberapa alasan potensial untuk kesalahan tertentu saat Anda menanyakan tabel Delta Lake. </p>
      <div class="table-container"><div class="table-contents"><table id="w320aac29c19c49c37"><thead>
               <tr>
                  <th>Pesan kesalahan</th>
                  <th>Kemungkinan alasannya</th>
               </tr>
            </thead>
               
               
               <tr>
                  <td tabindex="-1"><p><strong class="errortext"><code><em>Manifes Delta Lake di bucket <em>s3-bucket-1 tidak dapat berisi entri di bucket s3-bucket-2</em>.</em></code></strong></p></td>
                  <td tabindex="-1"><p>Entri manifes mengarah ke file di bucket Amazon S3 yang berbeda dari yang ditentukan. </p></td>
               </tr>
               <tr>
                  <td tabindex="-1"><p><strong class="errortext"><code>File Delta Lake diharapkan berada di folder yang sama.</code></strong></p></td>
                  <td tabindex="-1"><p>Entri manifes mengarah ke file yang memiliki awalan Amazon S3 berbeda dari yang ditentukan.</p></td>
               </tr>
               <tr>
                  <td tabindex="-1"><p><strong class="errortext"><code><em>Nama file</em> yang tercantum dalam jalur <em>manifes Delta Lake tidak ditemukan.</em></code></strong></p></td>
                  <td tabindex="-1"><p>File yang tercantum dalam manifes tidak ditemukan di Amazon S3. </p></td>
               </tr>
               <tr>
                  <td tabindex="-1"><p><strong class="errortext"><code>Kesalahan saat mengambil manifes Delta Lake.</code></strong></p></td>
                  <td tabindex="-1"><p>Manifes tidak ditemukan di Amazon S3. </p></td>
               </tr>
               <tr>
                  <td tabindex="-1"><p><strong class="errortext"><code>Jalur S3 Tidak Valid.</code></strong></p></td>
                  <td tabindex="-1"><p>Entri dalam file manifes bukan jalur Amazon S3 yang valid, atau file manifes telah rusak. </p></td>
               </tr>

            </table></div></div>
      
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Awas" /> <strong>Javascript dinonaktifkan atau tidak tersedia di browser Anda.</strong></p><p>Untuk menggunakan Dokumentasi AWS, Javascript harus diaktifkan. Lihat halaman Bantuan browser Anda untuk petunjuk.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Konvensi Dokumen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-spectrum-external-schemas.html">Membuat skema eksternal</div><div id="next" class="next-link" accesskey="n" href="./querying-iceberg.html">Menggunakan tabel Apache Iceberg</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Apakah halaman ini membantu Anda? - Ya</div><div class="content"><p>Terima kasih telah memberitahukan bahwa hasil pekerjaan kami sudah baik.</p><p>Jika Anda memiliki waktu luang, beri tahu kami aspek apa saja yang sudah bagus, agar kami dapat menerapkannya secara lebih luas.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Umpan Balik" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Apakah halaman ini membantu Anda? - Tidak</div><div class="content"><p>Terima kasih telah memberi tahu kami bahwa halaman ini perlu ditingkatkan. Maaf karena telah mengecewakan Anda.</p><p>Jika Anda memiliki waktu luang, beri tahu kami bagaimana dokumentasi ini dapat ditingkatkan.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Umpan Balik" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>