<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::KMS::ReplicaKey - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-kms-replicakey" /><meta name="default_state" content="aws-resource-kms-replicakey" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" /><meta name="description" content="Use the AWS CloudFormation AWS::KMS::ReplicaKey resource for KMS." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_KMS.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" hreflang="x-default" /><meta name="feedback-item" content="Key Management Service (KMS)" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::KMS::ReplicaKey" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::KMS::ReplicaKey - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Key%20Management%20Service%20%28KMS%29&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS Key Management Service resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_KMS.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::KMS::ReplicaKey",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_KMS.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_KMS.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-kms-replicakey-syntax">Syntax</a><a href="#aws-resource-kms-replicakey-properties">Properties</a><a href="#aws-resource-kms-replicakey-return-values">Return values</a><a href="#aws-resource-kms-replicakey--examples">Examples</a><a href="#aws-resource-kms-replicakey--seealso">See also</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-kms-replicakey">AWS::KMS::ReplicaKey</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The <code class="code">AWS::KMS::ReplicaKey</code> resource specifies a multi-Region replica key that
      is based on a multi-Region primary key.</p><p><em>Multi-Region keys</em> are an AWS KMS feature that lets you
      create multiple interoperable KMS keys in different AWS Regions. Because these
      KMS keys have the same key ID, key material, and other metadata, you can use them to encrypt data
      in one AWS Region and decrypt it in a different AWS Region
      without making a cross-Region call or exposing the plaintext data. For more information, see
        <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html">Multi-Region keys</a> in the <em>AWS Key Management Service Developer
        Guide</em>.</p><p>A multi-Region <em>primary key</em> is a fully functional symmetric encryption KMS key, HMAC KMS key, or
      asymmetric KMS key that is also the model for replica keys in other AWS Regions.
      To create a multi-Region primary key, add an <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html">AWS::KMS::Key</a>
      resource to your CloudFormation stack. Set its <code class="code">MultiRegion</code> property to
      true.</p><p>A multi-Region <em>replica key</em> is a fully functional KMS key that has the
      same key ID and key material as a multi-Region primary key, but is located in a different
        AWS Region of the same AWS partition. There can be
      multiple replicas of a primary key, but each must be in a different AWS Region. </p><p>When you create a replica key in AWS CloudFormation, the replica key is created in the AWS Region
      represented by the endpoint you use for the request. If you try to replicate a multi-Region key into a Region in which the key type
    is not supported, the request will fail.</p><p>A primary key and its replicas have the same key ID and key material. They also have the
      same key spec, key usage, key material origin, and automatic key rotation status. These
      properties are known as <em>shared properties</em>. If they change, AWS KMS synchronizes the change to all related multi-Region keys. All other properties
      of a replica key can differ, including its key policy, tags, aliases, and key state. AWS KMS does not synchronize these properties.</p><p><b>Regions</b></p><p>AWS KMS CloudFormation resources are available in all AWS Regions in which AWS KMS and
      AWS CloudFormation are supported. You can use the <code class="code">AWS::KMS::ReplicaKey</code>
      resource to create replica keys in all Regions that support multi-Region KMS keys. For
      details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html">Multi-Region keys in AWS KMS</a> in the <em>AWS Key Management Service Developer Guide</em>.</p><h2 id="aws-resource-kms-replicakey-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-kms-replicakey-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::KMS::ReplicaKey",
  "Properties" : <span>{</span>
      "<a href="#cfn-kms-replicakey-description">Description</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-kms-replicakey-enabled">Enabled</a>" : <code class="replaceable">Boolean</code>,
      "<a href="#cfn-kms-replicakey-keypolicy">KeyPolicy</a>" : <code class="replaceable">Json</code>,
      "<a href="#cfn-kms-replicakey-pendingwindowindays">PendingWindowInDays</a>" : <code class="replaceable">Integer</code>,
      "<a href="#cfn-kms-replicakey-primarykeyarn">PrimaryKeyArn</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-kms-replicakey-tags">Tags</a>" : <code class="replaceable">[ <a href="./aws-properties-kms-replicakey-tag.html">Tag</a>, ... ]</code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-kms-replicakey-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::KMS::ReplicaKey
Properties:
  <a href="#cfn-kms-replicakey-description">Description</a>: <code class="replaceable">String</code>
  <a href="#cfn-kms-replicakey-enabled">Enabled</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-kms-replicakey-keypolicy">KeyPolicy</a>: <code class="replaceable">Json</code>
  <a href="#cfn-kms-replicakey-pendingwindowindays">PendingWindowInDays</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-kms-replicakey-primarykeyarn">PrimaryKeyArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-kms-replicakey-tags">Tags</a>: <code class="replaceable">
    - <a href="./aws-properties-kms-replicakey-tag.html">Tag</a></code>
</code></pre></div><h2 id="aws-resource-kms-replicakey-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-kms-replicakey-description"><span class="term"><code class="code">Description</code></span></dt><dd>
    
    <p>A description of the KMS key. </p>
    <p>The default value is an empty string (no description).</p>
    <p>The description is not a shared property of multi-Region keys. You can specify the same
      description or a different description for each key in a set of related multi-Region keys. AWS Key Management Service does not synchronize this property.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">0</code></p><p><em>Maximum</em>: <code class="code">8192</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-replicakey-enabled"><span class="term"><code class="code">Enabled</code></span></dt><dd>
    
    <p>Specifies whether the replica key is enabled. Disabled KMS keys cannot be used in
      cryptographic operations.</p>
    <p>When <code class="code">Enabled</code> is <code class="code">true</code>, the <em>key state</em> of the
      KMS key is <code class="code">Enabled</code>. When <code class="code">Enabled</code> is <code class="code">false</code>, the key state of
      the KMS key is <code class="code">Disabled</code>. The default value is <code class="code">true</code>.</p>
    <p>The actual key state of the replica might be affected by actions taken outside of
      CloudFormation, such as running the <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_EnableKey.html">EnableKey</a>, <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_DisableKey.html">DisableKey</a>,
      or <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_ScheduleKeyDeletion.html">ScheduleKeyDeletion</a> operations. Also, while the replica key is being created, its
      key state is <code class="code">Creating</code>. When the process is complete, the key state of the replica
      key changes to <code class="code">Enabled</code>. </p>
    <p>For information about the key states of a KMS key, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html">Key state: Effect on your KMS key</a> in the
          <em>AWS Key Management Service Developer Guide</em>. </p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Boolean</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-replicakey-keypolicy"><span class="term"><code class="code">KeyPolicy</code></span></dt><dd>
    
    
    <p>The key policy that authorizes use of the replica key.</p>
    <p>The key policy is not a shared property of multi-Region keys. You can specify the same key
      policy or a different key policy for each key in a set of related multi-Region keys. AWS KMS does not synchronize this property.</p>
    <p>The key policy must conform to the following rules.</p>
    <div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The key policy must give the caller <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_PutKeyPolicy.html">PutKeyPolicy</a> permission on
          the KMS key. This reduces the risk that the KMS key becomes unmanageable. For more information,
          refer to the scenario in the <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-policies.html#key-policy-default-allow-root-enable-iam">Default key policy</a> section of the <em>
            <em>AWS Key Management Service Developer Guide</em>
          </em>.</p>
      </li><li class="listitem">
        <p>Each statement in the key policy must contain one or more principals. The principals
          in the key policy must exist and be visible to AWS KMS. When you create a new
            AWSprincipal (for example, an IAM user or role), you might need to
          enforce a delay before including the new principal in a key policy because the new
          principal might not be immediately visible to AWS KMS. For more information,
          see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/troubleshoot_general.html#troubleshoot_general_eventual-consistency">Changes that I make are not always immediately visible</a> in the <em>AWS Identity and Access Management User Guide</em>.</p>
      </li></ul></div>
    <p>A key policy document can include only the following characters:</p>
    <div class="itemizedlist">
         
       
             
    <ul class="itemizedlist"><li class="listitem">
        <p>Printable ASCII characters from the space character (<code class="code">\u0020</code>) through the end of the ASCII character range.</p>
      </li><li class="listitem">
        <p>Printable characters in the Basic Latin and Latin-1 Supplement character set (through <code class="code">\u00FF</code>).</p>
      </li><li class="listitem">
        <p>The tab (<code class="code">\u0009</code>), line feed (<code class="code">\u000A</code>), and carriage return (<code class="code">\u000D</code>) special characters</p>
      </li></ul></div>
    <p><em>Minimum</em>: <code class="code">1</code></p>
    <p><em>Maximum</em>: <code class="code">32768</code></p>
  <p><em>Required</em>: Yes</p><p><em>Type</em>: Json</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-replicakey-pendingwindowindays"><span class="term"><code class="code">PendingWindowInDays</code></span></dt><dd>
    
    <p>Specifies the number of days in the waiting period before AWS KMS deletes a
      replica key that has been removed from a CloudFormation stack. Enter a value between 7 and 30
      days. The default value is 30 days.</p>    
    <p>When you remove a replica key from a CloudFormation stack, AWS KMS schedules
      the replica key for deletion and starts the mandatory waiting period. The
        <code class="code">PendingWindowInDays</code> property determines the length of waiting period. During
      the waiting period, the key state of replica key is <code class="code">Pending Deletion</code>, which
      prevents it from being used in cryptographic operations. When the waiting period expires,
        AWS KMS permanently deletes the replica key.</p>
    <p>If the KMS key is a multi-Region primary key with replica keys, the waiting period begins when
      the last of its replica keys is deleted. Otherwise, the waiting period begins
      immediately.</p>
    <p>You cannot use a CloudFormation template to cancel deletion of the replica after you
      remove it from the stack, regardless of the waiting period. However, if you specify a replica
      key in your template that is based on the same primary key as the original replica key,
      CloudFormation creates a new replica key with the same key ID, key material, and other shared
      properties of the original replica key. This new replica key can decrypt ciphertext that was
      encrypted under the original replica key, or any related multi-Region key.</p>
    <p>For detailed information about deleting multi-Region keys, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-delete.html">Deleting multi-Region
        keys</a> in the <em>AWS Key Management Service Developer Guide</em>.</p>
    <p>For information about the <code class="code">PendingDeletion</code> key state, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html">Key state: Effect on
        your KMS key</a> in the <em>AWS Key Management Service Developer Guide</em>. For
      more information about deleting KMS keys, see the <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_ScheduleKeyDeletion.html">ScheduleKeyDeletion</a>
      operation in the <em>AWS Key Management Service API Reference</em> and <a href="https://docs.aws.amazon.com/kms/latest/developerguide/deleting-keys.html">Deleting KMS
        keys</a> in the <em>AWS Key Management Service Developer Guide</em>. </p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Integer</p><p><em>Minimum</em>: <code class="code">7</code></p><p><em>Maximum</em>: <code class="code">30</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-replicakey-primarykeyarn"><span class="term"><code class="code">PrimaryKeyArn</code></span></dt><dd>
    
    <p>Specifies the multi-Region primary key to replicate. The primary key must be in a
      different AWS Region of the same AWS partition. You can
      create only one replica of a given primary key in each AWS Region .</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you change the <code class="code">PrimaryKeyArn</code> value of a replica key, the existing
        replica key is scheduled for deletion and a new replica key is created based on the
        specified primary key. While it is scheduled for deletion, the existing replica key becomes
        unusable. You can cancel the scheduled deletion of the key outside of CloudFormation.</p><p>However, if you inadvertently delete a replica key, you can decrypt ciphertext encrypted
        by that replica key by using any related multi-Region key. If necessary, you can recreate
        the replica in the same Region after the previous one is completely deleted. For details,
        see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-delete.html">Deleting multi-Region
          keys</a> in the <em>AWS Key Management Service Developer Guide</em></p></div></div>
    <p>Specify the key ARN of an existing multi-Region primary key. For example,
        <code class="code">arn:aws:kms:us-east-2:111122223333:key/mrk-1234abcd12ab34cd56ef1234567890ab</code>.</p>
  <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">256</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-kms-replicakey-tags"><span class="term"><code class="code">Tags</code></span></dt><dd>
    
    <p>Assigns one or more tags to the replica key.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Tagging or untagging a KMS key can allow or deny permission to the KMS key. For details, see
          <a href="https://docs.aws.amazon.com/kms/latest/developerguide/abac.html">ABAC for
            AWS KMS</a> in the <em>AWS Key Management Service Developer
          Guide</em>.</p></div></div>
    <p>Tags are not a shared property of multi-Region keys. You can specify the same tags or
      different tags for each key in a set of related multi-Region keys. AWS KMS does
      not synchronize this property.</p>
    <p>Each tag consists of a tag key and a tag value. Both the tag key and the tag value are
      required, but the tag value can be an empty (null) string. You cannot have more than one tag
      on a KMS key with the same tag key. If you specify an existing tag key with a different tag value,
        AWS KMS replaces the current tag value with the specified one.</p>
    <p>When you assign tags to an AWSresource, AWSgenerates a
      cost allocation report with usage and costs aggregated by tags. Tags can also be used to
      control access to a KMS key. For details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/tagging-keys.html">Tagging keys</a>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-kms-replicakey-tag.html">Tag</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd></dl></div><h2 id="aws-resource-kms-replicakey-return-values">Return values</h2><h3 id="aws-resource-kms-replicakey-return-values-ref">Ref</h3><p>
      When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the key ID, such as
        <code class="code">mrk-1234abcd12ab34cd56ef1234567890ab</code>.</p><p>For more information about using the <code class="code">Ref</code> function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html"><code class="code">Ref</code></a>.</p><h3 id="aws-resource-kms-replicakey-return-values-fn--getatt">Fn::GetAtt</h3><p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following are the available attributes and sample return values.</p>
<p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html"><code class="code">Fn::GetAtt</code></a>.</p><h4 id="aws-resource-kms-replicakey-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist"><dl><dt id="Arn-fn::getatt"><span class="term"><code class="code">Arn</code></span></dt><dd>
    <p>The Amazon Resource Name (ARN) of the replica key, such as
        <code class="code">arn:aws:kms:us-west-2:111122223333:key/mrk-1234abcd12ab34cd56ef1234567890ab</code>.</p>
    <p>The key ARNs of related multi-Region keys differ only in the Region value. For information
      about the key ARNs of multi-Region keys, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html#mrk-how-it-works">How
        multi-Region keys work</a> in the <em>AWS Key Management Service Developer
        Guide</em>.</p>
  </dd><dt id="KeyId-fn::getatt"><span class="term"><code class="code">KeyId</code></span></dt><dd>
    <p>The key ID of the replica key, such as
      <code class="code">mrk-1234abcd12ab34cd56ef1234567890ab</code>.</p>
    <p>Related multi-Region keys have the same key ID. For information about the key IDs of
      multi-Region keys, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html#mrk-how-it-works">How
        multi-Region keys work</a> in the <em>AWS Key Management Service Developer
        Guide</em>.</p>
  </dd></dl></div><h2 id="aws-resource-kms-replicakey--examples">Examples</h2><h3 id="aws-resource-kms-replicakey--examples--Create_a_multi-Region_replica_key">Create a multi-Region replica key</h3><p>The following example creates a multi-Region replica key in the local Region based on a multi-Region primary key in the US West (Oregon)
          (us-west-2) Region.</p><p>If the key ARN specified by the <code class="code">PrimaryKeyArn</code> property
          doesn't identify a multi-Region primary key, or if a related multi-Region key already exists in the local Region, the operation fails. The example specifies a
          description, a key policy, and a waiting period for key deletion (PendingWindowInDays).
          These properties are independent of the primary key and related replica keys in other AWS Regions.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-kms-replicakey--examples--Create_a_multi-Region_replica_key--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myReplicaKey": <span>{</span>
        "Type": "AWS::KMS::ReplicaKey",
        "Properties": <span>{</span>
            "PrimaryKeyArn": "arn:aws:kms:us-west-2:111122223333:key/mrk-1234abcd12ab34cd56ef1234567890ab",
            "Description": "Example replica key",
            "PendingWindowInDays": 7,
            "KeyPolicy": <span>{</span>
                "Version": "2012-10-17",
                "Id": "key-default-1",
                "Statement": [
                    <span>{</span>
                        "Sid": "Enable IAM User Permissions",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:root"
                        },
                        "Action": "kms:*",
                        "Resource": "*"
                    },
                    <span>{</span>
                        "Sid": "Allow administration of the key",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:role/admin"
                        },
                        "Action": [
                            "kms:Create*",
                            "kms:Delete*",
                            "kms:Disable*",
                            "kms:Describe*",
                            "kms:Enable*",
                            "kms:Get*",
                            "kms:List*",
                            "kms:Put*",
                            "kms:Revoke*",
                            "kms:UpdateAlias",
                            "kms:ScheduleKeyDeletion",
                            "kms:CancelKeyDeletion"
                        ],
                        "Resource": "*"
                    },
                    <span>{</span>
                        "Sid": "Allow use of the key",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:role/developer"
                        },
                        "Action": [
                            "kms:DescribeKey",
                            "kms:Encrypt",
                            "kms:Decrypt",
                            "kms:ReEncrypt*",
                            "kms:GenerateDataKey",
                            "kms:GenerateDataKeyWithoutPlaintext"
                        ],
                        "Resource": "*"
                    }
                ]
            }
        }
    }</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-kms-replicakey--examples--Create_a_multi-Region_replica_key--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myReplicaKey:
  Type: 'AWS::KMS::ReplicaKey'
  Properties:
    PrimaryKeyArn: &gt;-
      arn:aws:kms:us-west-2:111122223333:key/mrk-1234abcd12ab34cd56ef1234567890ab
    Description: Example replica key
    PendingWindowInDays: 7
    KeyPolicy:
      Version: 2012-10-17
      Id: key-default-1
      Statement:
        - Sid: Enable IAM User Permissions
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:root'
          Action: 'kms:*'
          Resource: '*'
        - Sid: Allow administration of the key
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:role/admin'
          Action:
            - 'kms:Create*'
            - 'kms:Delete*'
            - 'kms:Disable*'
            - 'kms:Describe*'
            - 'kms:Enable*'
            - 'kms:Get*'
            - 'kms:List*'
            - 'kms:Put*'
            - 'kms:Revoke*'
            - 'kms:UpdateAlias'
            - 'kms:ScheduleKeyDeletion'
            - 'kms:CancelKeyDeletion'
          Resource: '*'
        - Sid: Allow use of the key
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:role/developer'
          Action:
            - 'kms:DescribeKey'
            - 'kms:Encrypt'
            - 'kms:Decrypt'
            - 'kms:ReEncrypt*'
            - 'kms:GenerateDataKey'
            - 'kms:GenerateDataKeyWithoutPlaintext'
          Resource: '*'</code></pre></div><h2 id="aws-resource-kms-replicakey--seealso">See also</h2><div class="itemizedlist">
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_ReplicateKey.html">ReplicateKey</a> in the <em>AWS Key Management Service API
              Reference</em>.</p>
        </li><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html">Multi-Region
              Keys</a> in the <em>AWS Key Management Service Developer
            Guide</em>.</p>
        </li><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-replicate.html">Creating multi-Region
              replica keys</a> in the <em>AWS Key Management Service Developer
              Guide</em>.</p>
        </li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-properties-kms-key-tag.html">Tag</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-kms-replicakey-tag.html">Tag</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Key Management Service (KMS)&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Key Management Service (KMS)&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>