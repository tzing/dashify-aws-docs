<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::EC2::FlowLog - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-ec2-flowlog" /><meta name="default_state" content="aws-resource-ec2-flowlog" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" /><meta name="description" content="Use the AWS CloudFormation AWS::EC2::FlowLog resource for EC2." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_EC2.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" hreflang="x-default" /><meta name="feedback-item" content="EC2 CFN" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::EC2::FlowLog" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::EC2::FlowLog - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2%20CFN&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon EC2 resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_EC2.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::EC2::FlowLog",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_EC2.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_EC2.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-ec2-flowlog-syntax">Syntax</a><a href="#aws-resource-ec2-flowlog-properties">Properties</a><a href="#aws-resource-ec2-flowlog-return-values">Return values</a><a href="#aws-resource-ec2-flowlog--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-ec2-flowlog">AWS::EC2::FlowLog</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Specifies a VPC flow log that captures IP traffic for a specified network interface,
         subnet, or VPC. To view the log data, use Amazon CloudWatch Logs (CloudWatch Logs) to help
         troubleshoot connection issues. For example, you can use a flow log to investigate why
         certain traffic isn't reaching an instance, which can help you diagnose overly restrictive
         security group rules. For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html">VPC Flow Logs</a> in the
         <em>Amazon VPC User Guide</em>.</p><h2 id="aws-resource-ec2-flowlog-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-ec2-flowlog-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::EC2::FlowLog",
  "Properties" : <span>{</span>
      "<a href="#cfn-ec2-flowlog-delivercrossaccountrole">DeliverCrossAccountRole</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-flowlog-deliverlogspermissionarn">DeliverLogsPermissionArn</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-flowlog-destinationoptions">DestinationOptions</a>" : <code class="replaceable"><a href="./aws-properties-ec2-flowlog-destinationoptions.html">DestinationOptions</a></code>,
      "<a href="#cfn-ec2-flowlog-logdestination">LogDestination</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-flowlog-logdestinationtype">LogDestinationType</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-flowlog-logformat">LogFormat</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-flowlog-loggroupname">LogGroupName</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-flowlog-maxaggregationinterval">MaxAggregationInterval</a>" : <code class="replaceable">Integer</code>,
      "<a href="#cfn-ec2-flowlog-resourceid">ResourceId</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-flowlog-resourcetype">ResourceType</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ec2-flowlog-tags">Tags</a>" : <code class="replaceable">[ <a href="./aws-properties-ec2-flowlog-tag.html">Tag</a>, ... ]</code>,
      "<a href="#cfn-ec2-flowlog-traffictype">TrafficType</a>" : <code class="replaceable">String</code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-ec2-flowlog-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::EC2::FlowLog
Properties:
  <a href="#cfn-ec2-flowlog-delivercrossaccountrole">DeliverCrossAccountRole</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-deliverlogspermissionarn">DeliverLogsPermissionArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-destinationoptions">DestinationOptions</a>: <code class="replaceable">
    <a href="./aws-properties-ec2-flowlog-destinationoptions.html">DestinationOptions</a></code>
  <a href="#cfn-ec2-flowlog-logdestination">LogDestination</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-logdestinationtype">LogDestinationType</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-logformat">LogFormat</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-loggroupname">LogGroupName</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-maxaggregationinterval">MaxAggregationInterval</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-ec2-flowlog-resourceid">ResourceId</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-resourcetype">ResourceType</a>: <code class="replaceable">String</code>
  <a href="#cfn-ec2-flowlog-tags">Tags</a>: <code class="replaceable">
    - <a href="./aws-properties-ec2-flowlog-tag.html">Tag</a></code>
  <a href="#cfn-ec2-flowlog-traffictype">TrafficType</a>: <code class="replaceable">String</code>
</code></pre></div><h2 id="aws-resource-ec2-flowlog-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-ec2-flowlog-delivercrossaccountrole"><span class="term"><code class="code">DeliverCrossAccountRole</code></span></dt><dd>
         <p>The ARN of the IAM role that allows the service to publish flow logs across accounts.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-flowlog-deliverlogspermissionarn"><span class="term"><code class="code">DeliverLogsPermissionArn</code></span></dt><dd>
         <p>The ARN of the IAM role that allows Amazon EC2 to publish flow logs to the log destination.</p>
         <p>This parameter is required if the destination type is <code class="code">cloud-watch-logs</code>,
            or if the destination type is <code class="code">kinesis-data-firehose</code> and the delivery stream
            and the resources to monitor are in different accounts.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-flowlog-destinationoptions"><span class="term"><code class="code">DestinationOptions</code></span></dt><dd>
         <p>The destination options.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-ec2-flowlog-destinationoptions.html">DestinationOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-flowlog-logdestination"><span class="term"><code class="code">LogDestination</code></span></dt><dd>
         <p>The destination for the flow log data. The meaning of this parameter depends on the destination type.</p>
         <div class="itemizedlist">
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>If the destination type is <code class="code">cloud-watch-logs</code>, specify the ARN of a CloudWatch Logs log group. For example:</p>
               <p>arn:aws:logs:<em>region</em>:<em>account_id</em>:log-group:<em>my_group</em>
               </p>
               <p>Alternatively, use the <code class="code">LogGroupName</code> parameter.</p>
            </li><li class="listitem">
               <p>If the destination type is <code class="code">s3</code>, specify the ARN of an S3 bucket. For example:</p>
               <p>arn:aws:s3:::<em>my_bucket</em>/<em>my_subfolder</em>/</p>
               <p>The subfolder is optional. Note that you can't use <code class="code">AWSLogs</code> as a subfolder name.</p>
            </li><li class="listitem">
               <p>If the destination type is <code class="code">kinesis-data-firehose</code>, specify the ARN of a Kinesis Data Firehose delivery stream. For example:</p>
               <p>arn:aws:firehose:<em>region</em>:<em>account_id</em>:deliverystream:<em>my_stream</em>
               </p>
            </li></ul></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-flowlog-logdestinationtype"><span class="term"><code class="code">LogDestinationType</code></span></dt><dd>
         <p>The type of destination for the flow log data.</p>
         <p>Default: <code class="code">cloud-watch-logs</code>
         </p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">cloud-watch-logs | s3 | kinesis-data-firehose</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-flowlog-logformat"><span class="term"><code class="code">LogFormat</code></span></dt><dd>
      <p>The fields to include in the flow log record, in the order in which they should appear. 
         If you omit this parameter, the flow log is created using the default format. If you specify 
         this parameter, you must include at least one field. For more information about the available fields, 
         see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html#flow-log-records">Flow log
            records</a> in the <em>Amazon VPC User Guide</em> or <a href="https://docs.aws.amazon.com/vpc/latest/tgw/tgw-flow-logs.html#flow-log-records">Transit Gateway 
               Flow Log records</a> in the <em>AWS Transit Gateway Guide</em>.</p>
      <p>Specify the fields using the <code class="code">$<span>{</span>field-id}</code> format, separated by
         spaces.</p>
   <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-flowlog-loggroupname"><span class="term"><code class="code">LogGroupName</code></span></dt><dd>
         <p>The name of a new or existing CloudWatch Logs log group where Amazon EC2 publishes your flow logs.</p>
         <p>This parameter is valid only if the destination type is <code class="code">cloud-watch-logs</code>.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-flowlog-maxaggregationinterval"><span class="term"><code class="code">MaxAggregationInterval</code></span></dt><dd>
         <p>The maximum interval of time during which a flow of packets is captured and aggregated into a flow log record. 
            The possible values are 60 seconds (1 minute) or 600 seconds (10 minutes).
            This parameter must be 60 seconds for transit gateway resource types.</p>
         <p>When a network interface is attached to a <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instance-types.html#ec2-nitro-instances">Nitro-based
                instance</a>, the aggregation interval is always 60 seconds or less, regardless
            of the value that you specify.</p>
         <p>Default: 600</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Integer</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-flowlog-resourceid"><span class="term"><code class="code">ResourceId</code></span></dt><dd>
      <p>The ID of the resource to monitor. For example, if the resource type is
         <code class="code">VPC</code>, specify the ID of the VPC.</p>
   <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-flowlog-resourcetype"><span class="term"><code class="code">ResourceType</code></span></dt><dd>
         <p>The type of resource to monitor.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">NetworkInterface | Subnet | VPC | TransitGateway | TransitGatewayAttachment</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ec2-flowlog-tags"><span class="term"><code class="code">Tags</code></span></dt><dd>
         <p>The tags to apply to the flow logs.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-ec2-flowlog-tag.html">Tag</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ec2-flowlog-traffictype"><span class="term"><code class="code">TrafficType</code></span></dt><dd>
         <p>The type of traffic to monitor (accepted traffic, rejected traffic, or all traffic).
            This parameter is not supported for transit gateway resource types. It is required for
            the other resource types.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">ACCEPT | ALL | REJECT</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd></dl></div><h2 id="aws-resource-ec2-flowlog-return-values">Return values</h2><h3 id="aws-resource-ec2-flowlog-return-values-ref">Ref</h3><p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the flow log ID, such as
         <code class="code">fl-123456abc123abc1</code>.</p><p>For more information about using the <code class="code">Ref</code> function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html"><code class="code">Ref</code></a>.</p><h3 id="aws-resource-ec2-flowlog-return-values-fn--getatt">Fn::GetAtt</h3><p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following are the available attributes and sample return values.</p>
<p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html"><code class="code">Fn::GetAtt</code></a>.</p><h4 id="aws-resource-ec2-flowlog-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist"><dl><dt id="Id-fn::getatt"><span class="term"><code class="code">Id</code></span></dt><dd>
      <p>The ID of the flow log. For example, <code class="code">fl-123456abc123abc1</code>.</p>
   </dd></dl></div><h2 id="aws-resource-ec2-flowlog--examples">Examples</h2><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-ec2-flowlog--examples--Publish_a_flow_log_to_CloudWatch_Logs_to_monitor_all_traffic">Publish a flow log to CloudWatch Logs to monitor all traffic</a></li><li><a href="#aws-resource-ec2-flowlog--examples--Publish_a_custom_format_flow_log_to_CloudWatch_Logs_for_REJECT_traffic">Publish a custom format flow log to CloudWatch Logs for REJECT traffic</a></li><li><a href="#aws-resource-ec2-flowlog--examples--Publish_a_custom_format_flow_log_to_Amazon_S3_for_ACCEPT_traffic">Publish a custom format flow log to Amazon S3 for ACCEPT traffic</a></li></ul></div><h3 id="aws-resource-ec2-flowlog--examples--Publish_a_flow_log_to_CloudWatch_Logs_to_monitor_all_traffic">Publish a flow log to CloudWatch Logs to monitor all traffic</h3><p>The following example creates a flow log for the specified VPC, and captures all
               traffic types. Amazon EC2 publishes the logs to the <code class="code">FlowLogsGroup</code> log
               group.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ec2-flowlog--examples--Publish_a_flow_log_to_CloudWatch_Logs_to_monitor_all_traffic--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "MyFlowLog": <span>{</span>
    "Type": "AWS::EC2::FlowLog",
    "Properties": <span>{</span>
      "DeliverLogsPermissionArn": <span>{</span>
        "Fn::GetAtt": [
          "FlowLogRole",
          "Arn"
        ]
      },
      "LogGroupName": "FlowLogsGroup",
      "ResourceId": <span>{</span>
        "Ref": "MyVPC"
      },
      "ResourceType": "VPC",
      "TrafficType": "ALL"
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ec2-flowlog--examples--Publish_a_flow_log_to_CloudWatch_Logs_to_monitor_all_traffic--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyFlowLog:
  Type: AWS::EC2::FlowLog
  Properties:
    DeliverLogsPermissionArn: !GetAtt FlowLogRole.Arn
    LogGroupName: FlowLogsGroup
    ResourceId: !Ref MyVPC
    ResourceType: VPC
    TrafficType: ALL</code></pre></div><h3 id="aws-resource-ec2-flowlog--examples--Publish_a_custom_format_flow_log_to_CloudWatch_Logs_for_REJECT_traffic">Publish a custom format flow log to CloudWatch Logs for REJECT traffic</h3><p>The following example creates a flow log for the specified subnet and captures
               REJECT traffic. The flow log uses a custom log format (the <code class="code">LogFormat</code>
               property uses the <code class="code">$<span>{</span>field-id}</code> format, separated by spaces). Amazon EC2
               aggregates the logs over 60 second intervals, and publishes the logs to the
               <code class="code">FlowLogsGroup</code> log group. The flow log is created with two
               tags.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ec2-flowlog--examples--Publish_a_custom_format_flow_log_to_CloudWatch_Logs_for_REJECT_traffic--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "MyDetailedFlowLogDeliveringToCloudWatchLogs": <span>{</span>
    "Type": "AWS::EC2::FlowLog",
    "Properties": <span>{</span>
      "ResourceId": <span>{</span>
        "Ref": "MySubnet"
      },
      "ResourceType": "Subnet",
      "TrafficType": "REJECT",
      "LogGroupName": "FlowLogsGroup",
      "DeliverLogsPermissionArn": <span>{</span>
        "Fn::GetAtt": [
          "FlowLogRole",
          "Arn"
        ]
      },
      "LogFormat": "$<span>{</span>version} $<span>{</span>vpc-id} $<span>{</span>subnet-id} $<span>{</span>instance-id} $<span>{</span>srcaddr} $<span>{</span>dstaddr} $<span>{</span>srcport} $<span>{</span>dstport} $<span>{</span>protocol} $<span>{</span>tcp-flags} $<span>{</span>type} $<span>{</span>pkt-srcaddr} $<span>{</span>pkt-dstaddr}",
      "MaxAggregationInterval": 60,
      "Tags": [
        <span>{</span>
          "Key": "Name",
          "Value": "FlowLogForSubnetA"
        },
        <span>{</span>
          "Key": "Purpose",
          "Value": "RejectTraffic"
        }
      ]
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ec2-flowlog--examples--Publish_a_custom_format_flow_log_to_CloudWatch_Logs_for_REJECT_traffic--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyDetailedFlowLogDeliveringToCloudWatchLogs:
  Type: AWS::EC2::FlowLog
  Properties: 
    ResourceId: !Ref MySubnet
    ResourceType: Subnet
    TrafficType: REJECT
    LogGroupName: FlowLogsGroup
    DeliverLogsPermissionArn: !GetAtt FlowLogRole.Arn
    LogFormat: $<span>{</span>version} $<span>{</span>vpc-id} $<span>{</span>subnet-id} $<span>{</span>instance-id} $<span>{</span>srcaddr} $<span>{</span>dstaddr} $<span>{</span>srcport} $<span>{</span>dstport} $<span>{</span>protocol} $<span>{</span>tcp-flags} $<span>{</span>type} $<span>{</span>pkt-srcaddr} $<span>{</span>pkt-dstaddr}
    MaxAggregationInterval: 60
    Tags:
      - Key: Name
        Value: FlowLogForSubnetA
      - Key: Purpose
        Value: RejectTraffic</code></pre></div><h3 id="aws-resource-ec2-flowlog--examples--Publish_a_custom_format_flow_log_to_Amazon_S3_for_ACCEPT_traffic">Publish a custom format flow log to Amazon S3 for ACCEPT traffic</h3><p>The following example creates a flow log for the specified subnet and captures
               ACCEPT traffic. The flow log uses a custom log format (the <code class="code">LogFormat</code>
               property uses the <code class="code">$<span>{</span>field-id}</code> format, separated by spaces). Amazon EC2
               aggregates the logs over 60 second intervals, and publishes the logs to an Amazon S3
               bucket that's referenced by its ARN, <code class="code">MyS3Bucket.Arn</code>. The logs are 
               published in parquet format in Hive-compatible prefixes partitioned on an hourly basis.
               The flow log is created with two tags.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ec2-flowlog--examples--Publish_a_custom_format_flow_log_to_Amazon_S3_for_ACCEPT_traffic--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "MyFlowLogDeliveringToS3": <span>{</span>
    "Type": "AWS::EC2::FlowLog",
    "Properties": <span>{</span>
      "ResourceId": <span>{</span>
        "Ref": "MySubnet"
      },
      "ResourceType": "Subnet",
      "TrafficType": "ACCEPT",
      "LogDestination": <span>{</span>
        "Fn::GetAtt": [
          "MyS3Bucket",
          "Arn"
        ]
      },
      "LogDestinationType": "s3",
      "LogFormat": "$<span>{</span>version} $<span>{</span>vpc-id} $<span>{</span>subnet-id} $<span>{</span>instance-id} $<span>{</span>srcaddr} $<span>{</span>dstaddr} $<span>{</span>srcport} $<span>{</span>dstport} $<span>{</span>protocol} $<span>{</span>tcp-flags} $<span>{</span>type} $<span>{</span>pkt-srcaddr} $<span>{</span>pkt-dstaddr}",
      "MaxAggregationInterval": 60,
      "DestinationOptions": <span>{</span>
        "FileFormat": "parquet",
        "HiveCompatiblePartitions": true,
        "PerHourPartition": true
      },
      "Tags": [
        <span>{</span>
          "Key": "Name",
          "Value": "FlowLogForSubnetB"
        },
        <span>{</span>
          "Key": "Purpose",
          "Value": "AcceptTraffic"
        }
      ]
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ec2-flowlog--examples--Publish_a_custom_format_flow_log_to_Amazon_S3_for_ACCEPT_traffic--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyFlowLogDeliveringToS3:
  Type: AWS::EC2::FlowLog
  Properties: 
    ResourceId: !Ref MySubnet
    ResourceType: Subnet
    TrafficType: ACCEPT
    LogDestination: !GetAtt MyS3Bucket.Arn
    LogDestinationType: s3
    LogFormat: $<span>{</span>version} $<span>{</span>vpc-id} $<span>{</span>subnet-id} $<span>{</span>instance-id} $<span>{</span>srcaddr} $<span>{</span>dstaddr} $<span>{</span>srcport} $<span>{</span>dstport} $<span>{</span>protocol} $<span>{</span>tcp-flags} $<span>{</span>type} $<span>{</span>pkt-srcaddr} $<span>{</span>pkt-dstaddr}
    MaxAggregationInterval: 60
    DestinationOptions:
      FileFormat: parquet
      HiveCompatiblePartitions: true
      PerHourPartition: true
    Tags:
      - Key: Name
        Value: FlowLogForSubnetB
      - Key: Purpose
        Value: AcceptTraffic</code></pre></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-resource-ec2-enclavecertificateiamroleassociation.html">AWS::EC2::EnclaveCertificateIamRoleAssociation</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-ec2-flowlog-destinationoptions.html">DestinationOptions</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2 CFN&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2 CFN&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>