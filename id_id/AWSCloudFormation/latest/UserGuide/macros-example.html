<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="id-ID"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Contoh makro: Membuat dan menggunakan makro - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="macros-example" /><meta name="default_state" content="macros-example" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html" /><meta name="description" content="Contoh berikut berjalan melalui proses penggunaan makro, mulai dari mendefinisikan makro dalam templat, hingga membuat fungsi Lambda untuk makro, lalu menggunakan makro dalam templat." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Panduan Pengguna" /><meta name="abstract" content="Membuat dan mengelola penyebaran AWS infrastruktur dapat diprediksi dan berulang kali menggunakan Panduan Pengguna AWS CloudFormation ini." /><meta name="guide-locale" content="id_id" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Panduan Pengguna" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Panduan Pengguna" /><meta id="panorama-serviceConsolePage" value="Contoh makro: Membuat dan menggunakan makro" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Contoh makro: Membuat dan menggunakan makro - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,penyediaan sumber daya,konfigurasi sumber daya,manajemen infrastruktur,CloudFormer,CloudFormation tumpukan,CloudFormation stackset,CloudFormation Template,ubah set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Panduan Pengguna",
        "item" : "https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Bekerja dengan templat AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Menggunakan AWS CloudFormation makro untuk melakukan pemrosesan khusus pada templat",
        "item" : "https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-macros.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Contoh makro: Membuat dan menggunakan makro",
        "item" : "https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-macros.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentasi</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Panduan Pengguna</a></div><div id="page-toc-src"><a href="#macros-example-definiton">Contoh makro: Templat definisi makro </a><a href="#macros-example-usage">Contoh makro: Templat penggunaan makro </a><a href="#macros-example-request">Contoh makro: Minta pemetaan peristiwa </a><a href="#macros-example-function">Contoh makro: Kode fungsi Lambda</a><a href="#macros-example-response">Contoh makro: Respons fungsi Lambda</a><a href="#macros-example-processed">Contoh makro: Template yang diproses yang dihasilkan</a><a href="#template-macros-examples-awslabs">Contoh makro tambahan</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Terjemahan disediakan oleh mesin penerjemah. Jika konten terjemahan yang diberikan bertentangan dengan versi bahasa Inggris aslinya, utamakan versi bahasa Inggris.</p></awsui-alert><h1 class="topictitle" id="macros-example">Contoh makro: Membuat dan menggunakan makro</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Contoh berikut berjalan melalui proses penggunaan makro, mulai dari mendefinisikan makro dalam templat, hingga membuat fungsi Lambda untuk makro, lalu menggunakan makro dalam templat.</p><p>Dalam contoh ini, kita membuat makro sederhana yang menyisipkan string yang ditentukan di tempat konten target yang ditentukan dalam templat yang diproses. Kemudian kita akan menggunakannya untuk menyisipkan <code class="code">WaitHandleCondition</code> kosong di lokasi yang ditentukan dalam templat yang diproses.</p>
            <h2 id="macros-example-definiton">Contoh makro: Templat definisi makro </h2>
            <p>Sebelum menggunakan makro, pertama kita harus menyelesaikan dua hal: membuat fungsi Lambda yang melakukan pemrosesan templat yang diinginkan, lalu membuat fungsi Lambda tersebut tersedia untuk CloudFormation  membuat definisi makro.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>catatan</h6></div><div class="awsdocs-note-text"><p>Kita akan memeriksa kode aktual untuk fungsi Lambda ini nanti dalam topik ini.</p></div></div>
            <p>Contoh template berikut berisi definisi untuk contoh makro kita. Untuk membuat makro tersedia dalam CloudFormation  akun tertentu, kita akan membuat tumpukan dari templat. Definisi makro menentukan nama makro, deskripsi singkat, dan mereferensikan fungsi ARN dari fungsi Lambda CloudFormation yang dipanggil saat makro ini digunakan dalam templat. (Kami belum menyertakan properti <b>LogGroupName</b>atau <b>LogRoleARN</b> untuk pencatatan kesalahan.) Untuk informasi selengkapnya, lihat <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a>.</p>
            <p>Dalam contoh ini, anggap bahwa tumpukan yang dibuat dari templat ini bernama <b>JavaMacroFunc</b>. Karena<code class="code">Name</code> properti makro diatur ke nama tumpukan, makro yang dihasilkan <b>JavaMacroFunc</b>juga bernama.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
  Resources:
    Macro:
      Type: AWS::CloudFormation::Macro
      Properties:
        Name: <code class="replaceable">!Sub '$<span>{</span>AWS::StackName}'</code>
        Description: <code class="replaceable">Adds a blank WaitConditionHandle named 'WaitHandle'</code>
        FunctionName: <code class="replaceable">"arn:aws:lambda:us-east-1:012345678910:function:JavaMacroFunc"</code></code></pre>
         
            <h2 id="macros-example-usage">Contoh makro: Templat penggunaan makro </h2>
            <p>Untuk menggunakan makro kita dalam hal ini, kita akan memasukkannya ke dalam templat menggunakan fungsi intrinsik <a href="./intrinsic-function-reference-transform.html">Fn::Transform</a>.</p>
            <p>Ketika kita membuat tumpukan menggunakan templat di bawah ini, CloudFormation  memanggil contoh makro kita. Fungsi Lambda yang mendasari akan menggantikan satu string yang ditentukan dengan string lain yang ditentukan. Dalam hal ini, hasilnya adalah <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-waitconditionhandle.html">AWS::CloudFormation::WaitConditionHandle</a> kosong yang dimasukkan ke dalam templat yang diproses.</p>
            <p>Perhatikan hal berikut:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Makro yang akan dipanggil ditetapkan sebagai <b>JavaMacroFunc</b>, yang berasal dari contoh definisi makro sebelumnya.</p>
                </li><li class="listitem">
                    <p>Makro melewati dua parameter, <code class="code">target</code> dan <code class="code">replacement</code>, yang mewakili string target dan nilai penggantian yang diinginkan.</p>
                </li><li class="listitem"><p>Makro dapat beroperasi pada konten simpul <code class="code">Type</code> karena merupakan <code class="code">Type</code> saudara dari fungsi <code class="code">Fn::Transform</code> yang mereferensikan makro.</p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-waitconditionhandle.html">AWS::CloudFormation::WaitConditionHandle</a> yang dihasilkan diberi nama<code class="code">2a</code>.</p></li><li class="listitem"><p>Template juga berisi parameter template, <code class="code">ExampleParameter</code>, yang juga dapat diakses oleh makro (tetapi tidak digunakan dalam hal ini).</p></li></ul></div>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  ExampleParameter:
    Type: String
    Default: 'SampleMacro'

Resources:
  2a:
    Fn::Transform:
      Name: "JavaMacroFunc"
      Parameters:
        replacement: 'AWS::CloudFormation::WaitConditionHandle'
        target: '$$REPLACEMENT$$'
    Type: '$$REPLACEMENT$$'</code></pre>
         
            <h2 id="macros-example-request">Contoh makro: Minta pemetaan peristiwa </h2>
            <p>Saat CloudFormation  memproses contoh templat kita selama pembuatan tumpukan, ini melewati pemetaan peristiwa berikut ke fungsi Lambda yang direferensikan dalam definisi <b>JavaMacroFunc</b>makro.</p>
            <p><code class="code">fragment</code> berisi JSON yang mewakili fragmen templat yang dapat diproses makro. Fragmen ini terdiri dari saudara dari panggilan fungsi <code class="code">Fn::Transform</code>, tetapi bukan fungsi panggilan itu sendiri. Juga, <code class="code">params</code> berisi JSON yang mewakili parameter makro. Dalam hal ini, penggantian dan target. Demikian pula, <code class="code">templateParameterValues</code> berisi JSON yang mewakili parameter yang ditentukan untuk templat secara keseluruhan.</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><code class="code">region</code></p><p><code class="code">us-east-1</code></p></li><li class="listitem"><p><code class="code">accountId</code></p><p><code class="code">012345678910</code></p></li><li class="listitem"><p><code class="code">fragment</code></p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type": "$$REPLACEMENT$$"
}</code></pre>
                </li><li class="listitem"><p><code class="code">transformId</code></p><p><code class="code">012345678910::JavaMacroFunc</code></p></li><li class="listitem"><p><code class="code">params</code></p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "replacement": "AWS::CloudFormation::WaitConditionHandle",
    "target": "$$REPLACEMENT$$"
}</code></pre>
                </li><li class="listitem"><p><code class="code">requestId</code></p><p><code class="code">5dba79b5-f117-4de0-9ce4-d40363bfb6ab</code></p></li><li class="listitem"><p><code class="code">templateParameterValues</code></p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "ExampleParameter": "SampleMacro"
}</code></pre>
                </li></ul></div>
         
            <h2 id="macros-example-function">Contoh makro: Kode fungsi Lambda</h2>
            <p>Berikut ini adalah kode aktual untuk fungsi Lambda yang mendasari <b>JavaMacroFunc</b>contoh makro. Ini mengulangi fragmen templat yang disertakan dalam respons (baik dalam format string, daftar, maupun peta), mencari string target yang ditentukan. Jika menemukan string target yang ditentukan, fungsi Lambda akan mengganti string target dengan string pengganti yang ditentukan. Jika tidak, fungsi membiarkan fragmen template tidak berubah. Kemudian, fungsi mengembalikan peta properti yang diharapkan, yang dibahas secara rinci di bawah, ke CloudFormation.</p>
            <div class="minimized-block" data-minimized="true"><div class="minimized-content">
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">package com.macroexample.lambda.demo;

import java.util.List;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import com.amazonaws.services.lambda.runtime.Context;
import com.amazonaws.services.lambda.runtime.RequestHandler;

public class LambdaFunctionHandler implements RequestHandler&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt; <span>{</span>

	private static final String REPLACEMENT = "replacement";
	private static final String TARGET = "target";
	private static final String PARAMS = "params";
	private static final String FRAGMENT = "fragment";
	private static final String REQUESTID = "requestId";
	private static final String STATUS = "status";
	private static final String SUCCESS = "SUCCESS";
	private static final String FAILURE = "FAILURE";
    @Override
    public Map&lt;String, Object&gt; handleRequest(Map&lt;String, Object&gt; event, Context context) <span>{</span>
        // TODO: implement your handler
    	final Map&lt;String, Object&gt; responseMap = new HashMap&lt;String, Object&gt;();
        responseMap.put(REQUESTID, event.get(REQUESTID));
        responseMap.put(STATUS, FAILURE);
    	try <span>{</span>
	        if (!event.containsKey(PARAMS)) <span>{</span>
	        	throw new RuntimeException("Params are required");
	        }
	    	
	        final Map&lt;String, Object&gt; params = (Map&lt;String, Object&gt;) event.get(PARAMS);
	        if (!params.containsKey(REPLACEMENT) || !params.containsKey(TARGET)) <span>{</span>
	        	throw new RuntimeException("replacement or target under Params are required");
	        }
	    	
	    	final String replacement = (String) params.get(REPLACEMENT);
	    	final String target = (String) params.get(TARGET);
	    	final Object fragment = event.getOrDefault(FRAGMENT, new HashMap&lt;String, Object&gt;());
	    	final Object retFragment;
	    	if (fragment instanceof String) <span>{</span>
	    		retFragment = iterateAndReplace(replacement, target, (String) fragment);
	    	} else if (fragment instanceof List) <span>{</span>
	    		retFragment = iterateAndReplace(replacement, target, (List&lt;Object&gt;) fragment);
	    	} else if (fragment instanceof Map) <span>{</span>
	    		retFragment = iterateAndReplace(replacement, target, (Map&lt;String, Object&gt;) fragment);
	    	} else <span>{</span>
	    		retFragment = fragment;
	    	}
	        responseMap.put(STATUS, SUCCESS);
	        responseMap.put(FRAGMENT, retFragment);
	        return responseMap;
    	} catch (Exception e) <span>{</span>
    		e.printStackTrace();
    		context.getLogger().log(e.getMessage());
    		return responseMap;
    	}
    }
    
    private Map&lt;String, Object&gt; iterateAndReplace(final String replacement, final String target, final Map&lt;String, Object&gt; fragment) <span>{</span>
    	final Map&lt;String, Object&gt; retFragment = new HashMap&lt;String, Object&gt;();
    	final List&lt;String&gt; replacementKeys = new ArrayList&lt;&gt;();
    	fragment.forEach((k, v) -&gt; <span>{</span>
    		if (v instanceof String) <span>{</span>
    			retFragment.put(k, iterateAndReplace(replacement, target, (String)v));
    		} else if (v instanceof List) <span>{</span>
    			retFragment.put(k, iterateAndReplace(replacement, target, (List&lt;Object&gt;)v));
    		} else if (v instanceof Map ) <span>{</span>
    			retFragment.put(k, iterateAndReplace(replacement, target, (Map&lt;String, Object&gt;) v));
    		} else <span>{</span>
    			retFragment.put(k, v);
    		}
    	});
    	return retFragment;
    }

    private List&lt;Object&gt; iterateAndReplace(final String replacement, final String target, final List&lt;Object&gt; fragment) <span>{</span>
    	final List&lt;Object&gt; retFragment = new ArrayList&lt;&gt;();
    	fragment.forEach(o -&gt; <span>{</span>
    		if (o instanceof String) <span>{</span>
    			retFragment.add(iterateAndReplace(replacement, target, (String) o));
    		} else if (o instanceof List) <span>{</span>
    			retFragment.add(iterateAndReplace(replacement, target, (List&lt;Object&gt;) o));
    		} else if (o instanceof Map) <span>{</span>
    			retFragment.add(iterateAndReplace(replacement, target, (Map&lt;String, Object&gt;) o));
    		} else <span>{</span>
    			retFragment.add(o);
    		}
    	});
    	return retFragment;
    }
    
    private String iterateAndReplace(final String replacement, final String target, final String fragment) <span>{</span>
    	System.out.println(replacement + " == " + target + " == " + fragment );
    	if (fragment != null AND_AND fragment.equals(target))
    		return replacement;
    	return fragment;
    }
}</code></pre>
            <div class="minimized-fader"></div></div><div class="show-more-btn"><a href="#"><awsui-icon class="show-more-text" variant="link" name="caret-right-filled"></awsui-icon><span class="show-more-text">Tampilkan lebih banyak</span><awsui-icon class="show-less-text" variant="link" name="caret-up-filled"></awsui-icon><span class="show-less-text">Tampilkan lebih sedikit</span></a></div></div>
         
            <h2 id="macros-example-response">Contoh makro: Respons fungsi Lambda</h2>
            <p>Berikut ini adalah pemetaan yang dikembalikan oleh fungsi LambdaAWS CloudFormation untuk diproses. <code class="code">requestId</code>Kecocokan yang dikirim dari CloudFormation, dan<code class="code">status</code> nilai<code class="code">SUCCESS</code> menunjukkan bahwa fungsi Lambda berhasil memproses fragmen templat yang disertakan dalam permintaan. Dalam respons ini, <code class="code">fragment</code> berisi JSON mewakili konten yang akan dimasukkan ke dalam templat yang diproses sebagai pengganti snippet templat asli.</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><code class="code">requestId</code></p><p><code class="code">5dba79b5-f117-4de0-9ce4-d40363bfb6ab</code></p></li><li class="listitem"><p><code class="code">status</code></p><p><code class="code">SUCCESS</code></p></li><li class="listitem"><p><code class="code">fragment</code></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type": "AWS::CloudFormation::WaitConditionHandle"
}</code></pre>
                </li></ul></div>
         
            <h2 id="macros-example-processed">Contoh makro: Template yang diproses yang dihasilkan</h2>
            <p>Setelah CloudFormation  menerima respons yang sukses dari fungsi Lambda, itu memasukkan fragmen templat yang dikembalikan ke templat yang diproses.</p>
            <p>Di bawah ini adalah templat yang diproses yang dihasilkan untuk contoh kita. Panggilan fungsi<code class="code">Fn::Transform</code> intrinsik yang mereferensikan <b>JavaMacroFunc</b>makro tidak lagi disertakan. Fragmen template yang dikembalikan oleh fungsi Lambda disertakan dalam lokasi yang sesuai, dengan hasil bahwa konten<code class="code">"Type": "$$REPLACEMENT$$"</code> telah diganti dengan<code class="code">"Type":
                "AWS::CloudFormation::WaitConditionHandle"</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Salinan"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Parameters": <span>{</span>
        "ExampleParameter": <span>{</span>
            "Default": "SampleMacro",
            "Type": "String"
        }
    },
    "Resources": <span>{</span>
        "2a": <span>{</span>
            "Type": "AWS::CloudFormation::WaitConditionHandle"
        }
    }
}</code></pre>
         
            <h2 id="template-macros-examples-awslabs">Contoh makro tambahan</h2>
            <p>Selain panduan ini dalam panduan ini, Anda dapat menemukan contoh makro, termasuk kode sumber dan templat, di bagian <a href="https://github.com/awslabs/aws-cloudformation-templates/tree/master/aws/services/CloudFormation/MacrosExamples/" rel="noopener noreferrer" target="_blank"><span>Contoh makro</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> di <a href="https://github.com/awslabs" rel="noopener noreferrer" target="_blank"><span>Amazon Web Services - repo Labs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> GitHub. Contoh-contoh ini disediakan 'sebagaimana adanya' untuk tujuan instruksional.</p>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Awas" /> <strong>Javascript dinonaktifkan atau tidak tersedia di browser Anda.</strong></p><p>Untuk menggunakan Dokumentasi AWS, Javascript harus diaktifkan. Lihat halaman Bantuan browser Anda untuk petunjuk.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Konvensi Dokumen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./template-macros.html">Makro templat</div><div id="next" class="next-link" accesskey="n" href="./modules.html">Menggunakan modul</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Apakah halaman ini membantu Anda? - Ya</div><div class="content"><p>Terima kasih telah memberitahukan bahwa hasil pekerjaan kami sudah baik.</p><p>Jika Anda memiliki waktu luang, beri tahu kami aspek apa saja yang sudah bagus, agar kami dapat menerapkannya secara lebih luas.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Umpan Balik" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Apakah halaman ini membantu Anda? - Tidak</div><div class="content"><p>Terima kasih telah memberi tahu kami bahwa halaman ini perlu ditingkatkan. Maaf karena telah mengecewakan Anda.</p><p>Jika Anda memiliki waktu luang, beri tahu kami bagaimana dokumentasi ini dapat ditingkatkan.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Umpan Balik" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>