<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ja-JP"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>使用を開始する - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="GettingStarted.Walkthrough" /><meta name="default_state" content="GettingStarted.Walkthrough" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" /><meta name="description" content="テンプレートを使用してリソースを宣言し、AWS CloudFormation でそのテンプレートを使用してスタックを作成する方法について説明します。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="ユーザーガイド" /><meta name="abstract" content="このユーザーガイドでは、AWS CloudFormation を使用して、予測かつ再現可能な方法で、AWS インフラストラクチャのデプロイを作成して管理します。" /><meta name="guide-locale" content="ja_jp" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="ユーザーガイド" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="ユーザーガイド" /><meta id="panorama-serviceConsolePage" value="使用を開始する" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>使用を開始する - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,リソースのプロビジョニング,リソース構成,インフラストラクチャ管理,CloudFormer,CloudFormation スタック,CloudFormation StackSet,CloudFormation テンプレート,変更セット" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "ユーザーガイド",
        "item" : "https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS CloudFormation の開始方法",
        "item" : "https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "使用を開始する",
        "item" : "https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">ドキュメント</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">ユーザーガイド</a></div><div id="page-toc-src"><a href="#GettingStarted.Walkthrough.PickTemplate">ステップ 1: テンプレートの選択</a><a href="#GettingStarted.Walkthrough.prep">ステップ 2: スタックに必要な項目の準備ができたことの確認</a><a href="#GettingStarted.Walkthrough.createstack">ステップ 3: スタックの作成</a><a href="#GettingStarted.Walkthrough.monitor">ステップ 4: スタックの作成状況の監視</a><a href="#GettingStarted.Walkthrough.viewapp">ステップ 5: スタックリソースの使用</a><a href="#GettingStarted.Walkthrough.cleanup">ステップ 6: クリーンアップする</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="GettingStarted.Walkthrough">使用を開始する</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>適切なテンプレートを使用すると、アプリケーションに必要なすべての AWS リソースを迅速にデプロイすることができます。このセクションでは、WordPress ブログのリソースの宣言、スタックとしての WordPress ブログの作成、スタック作成プロセスの監視、スタック上のリソースの検査、およびスタックの削除を行うテンプレートについて詳しく説明します。これらのタスクを行うには、AWS Management Console を使用します。</p>
      <h2 id="GettingStarted.Walkthrough.PickTemplate">ステップ 1: テンプレートの選択</h2>

      <p>まず、スタックで必要なリソースを指定するテンプレートが必要です。この手順では、既に用意されているサンプルテンプレートを使用します。サンプルテンプレートは、ストレージ用ローカル MySQL データベースを使って、単一の Amazon EC2 インスタンスを使用する基本 WordPress ブログを作成します。このテンプレートでは、Amazon EC2 インスタンスのファイアウォール設定を制御するために Amazon EC2 セキュリティグループを作成します。</p>
      <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>AWS CloudFormation は無料ですが、CloudFormation が作成する AWS リソースは実動のものです (サンドボックス環境では実行されません)。このチュートリアルの最後のタスクでリソースを終了させるまで、これらのリソースの標準使用料が発生します。合計料金はごくわずかです。料金を最小限に抑える方法については、「<a href="https://aws.amazon.com/free/" rel="noopener noreferrer" target="_blank"><span>http://aws.amazon.com/free/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>」を参照してください。</p></div></div>
      <div class="procedure"><h6>テンプレートを表示するには</h6><ul><li>
            <p><a href="https://s3.us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.template" rel="noopener noreferrer" target="_blank"><span>JSON</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>、または <a href="https://s3.us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.yaml" rel="noopener noreferrer" target="_blank"><span>YAML</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> の WordPress サンプルテンプレートを表示できます。テンプレートの URL は、このガイドの後半で使用するため、ここでダウンロードする必要はありません。テンプレート形式の詳細については、「<a href="./template-formats.html">AWS CloudFormation テンプレート形式</a>」を参照してください。</p>
         </li></ul></div>

      <p>テンプレートは、スタックで作成する AWS リソースの構成情報を含む JSON または YAML テキストファイルです。このチュートリアルでは、6 つの最上位セクション (<code class="code">AWSTemplateFormatVersion</code>、<code class="code">Description</code>、<code class="code">Parameters</code>、<code class="code">Mappings</code>、<code class="code">Resources</code>、<code class="code">Outputs</code>) がありますが、必要なのは <code class="code">Resources</code> セクションだけです。</p>
      <p>Resources セクションには、テンプレートで作成する AWS リソースの定義が含まれます。各リソースは個別にリストされ、その特定のリソースの作成に必要なプロパティを指定します。次のリソース宣言は、EC2 インスタンスの構成です。この例では論理名 <code class="code">WebServer</code> が含まれています。</p>
      <div class="example"><h6>例 JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Resources" : <span>{</span>
  ...    
  "WebServer": <span>{</span>
    "Type" : "AWS::EC2::Instance",
    "Properties": <span>{</span>
      "ImageId" : <span>{</span> "Fn::FindInMap" : [ "AWSRegionArch2AMI", <span>{</span> "Ref" : "AWS::Region" },
                        <span>{</span> "Fn::FindInMap" : [ "AWSInstanceType2Arch", <span>{</span> "Ref" : "InstanceType" }, "Arch" ] } ] },
      "InstanceType"   : <span>{</span> "Ref" : "InstanceType" },
      "SecurityGroups" : [ <span>{</span>"Ref" : "WebServerSecurityGroup"} ],
      "KeyName"        : <span>{</span> "Ref" : "KeyName" },
      "UserData" : <span>{</span> "Fn::Base64" : <span>{</span> "Fn::Join" : ["", [
                     "#!/bin/bash -xe\n",
                     "yum update -y aws-cfn-bootstrap\n",

                     "/opt/aws/bin/cfn-init -v ",
                     "         --stack ", <span>{</span> "Ref" : "AWS::StackName" },
                     "         --resource WebServer ",
                     "         --configsets wordpress_install ",
                     "         --region ", <span>{</span> "Ref" : "AWS::Region" }, "\n",

                     "/opt/aws/bin/cfn-signal -e $? ",
                     "         --stack ", <span>{</span> "Ref" : "AWS::StackName" },
                     "         --resource WebServer ",
                     "         --region ", <span>{</span> "Ref" : "AWS::Region" }, "\n"
      ]]}}
    },
    ...
  },
  ...  
  "WebServerSecurityGroup" : <span>{</span>
    "Type" : "AWS::EC2::SecurityGroup",
    "Properties" : <span>{</span>
      "GroupDescription" : "Enable HTTP access via port 80 locked down to the load balancer + SSH access",
      "SecurityGroupIngress" : [
        <span>{</span>"IpProtocol" : "tcp", "FromPort" : 80, "ToPort" : 80, "CidrIp" : "0.0.0.0/0"},
        <span>{</span>"IpProtocol" : "tcp", "FromPort" : 22, "ToPort" : 22, "CidrIp" : <span>{</span> "Ref" : "SSHLocation"}}
      ]
    }
  },
  ...    
},</code></pre></div></div>
      <div class="example"><h6>例 YAML</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources: 
  ...    
  WebServer:
    Type: AWS::EC2::Instance
    Properties:
      ImageId: !FindInMap [AWSRegionArch2AMI, !Ref 'AWS::Region', !FindInMap [AWSInstanceType2Arch, !Ref InstanceType, Arch]]      
      InstanceType:
        Ref: InstanceType
      KeyName:
        Ref: KeyName
      SecurityGroups:
      - Ref: WebServerSecurityGroup
      UserData:
        Fn::Base64: !Sub |
           #!/bin/bash -xe
           yum update -y aws-cfn-bootstrap
           /opt/aws/bin/cfn-init -v --stack $<span>{</span>AWS::StackId} --resource WebServer --configsets wordpress_install --region $<span>{</span>AWS::Region}
           /opt/aws/bin/cfn-signal -e $? --stack $<span>{</span>AWS::StackId} --resource WebServer --region $<span>{</span>AWS::Region}
    ...
  ...
  
  WebServerSecurityGroup:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: "Enable HTTP access via port 80 locked down to the load balancer + SSH access"
      SecurityGroupIngress:
      - CidrIp: 0.0.0.0/0
        FromPort: 80
        IpProtocol: tcp
        ToPort: 80
      - CidrIp: !Ref SSHLocation
        FromPort: 22
        IpProtocol: tcp
        ToPort: 22
  ...    </code></pre></div></div>
      <p>以前に EC2 インスタンスを作成したことがある場合は、インスタンスの構成を決定する、<code class="code">ImageId</code>、<code class="code">InstanceType</code>、<code class="code">KeyName</code> などのプロパティに気が付くでしょう。リソース宣言は、これらすべての構成を一度に指定するための効率的な方法です。テンプレートでリソースを宣言すると、テンプレートを使用してスタックを作成することによって、宣言したすべてのリソースを作成および設定できます。同じテンプレートを使用してリソースの同じ構成を起動する新しいスタックを作成します。</p>
      <p>リソース宣言は、リソースの論理名を指定する文字列で開始されます。後で説明するように、テンプレート内のリソースを参照するために、論理名を使用できます。</p>
      <p>スタックを作成する際にテンプレートに渡すことができる値を宣言するために、<em>Parameters</em> セクションを使用します。パラメーターは、ユーザー名やパスワードなど、テンプレート自体には格納したくない機密情報を指定する方法としても効果的です。これは、特定のアプリケーションに固有の情報や、デプロイしている構成 (例えば、ドメイン名やインスタンスタイプ) を指定する方法でもあります。このセクションの後の方で WordPress スタックを作成するときに、テンプレートで宣言されている一連のパラメータが <b>[Create Stack]</b> (スタックの作成) ウィザードの <b>[Specify Details]</b> (詳細の指定) ページに表示されます。このページで、スタックを作成する前にパラメータを設定できます。</p>
      <p>テンプレートでは、EC2 インスタンスのプロパティで使用される値を指定するために、次のパラメーターが使用されています。</p>
      <div class="example"><h6>例 JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Parameters" : <span>{</span>
  ...      
  "KeyName": <span>{</span>
    "Description" : "Name of an existing EC2 KeyPair to enable SSH access to the instances",
    "Type": "AWS::EC2::KeyPair::KeyName",
    "ConstraintDescription" : "must be the name of an existing EC2 KeyPair."
  },

  "InstanceType" : <span>{</span>
    "Description" : "WebServer EC2 instance type",
    "Type" : "String",
    "Default" : "t2.small",
       "AllowedValues": [
        "t1.micro",
        "t2.nano",
        "t2.micro",
        "t2.small",
        "t2.medium",
        "t2.large",
        "m1.small",
        "m1.medium",
        "m1.large",
        "m1.xlarge",
        "m2.xlarge",
        "m2.2xlarge",
        "m2.4xlarge",
        "m3.medium",
        "m3.large",
        "m3.xlarge",
        "m3.2xlarge",
        "m4.large",
        "m4.xlarge",
        "m4.2xlarge",
        "m4.4xlarge",
        "m4.10xlarge",
        "c1.medium",
        "c1.xlarge",
        "c3.large",
        "c3.xlarge",
        "c3.2xlarge",
        "c3.4xlarge",
        "c3.8xlarge",
        "c4.large",
        "c4.xlarge",
        "c4.2xlarge",
        "c4.4xlarge",
        "c4.8xlarge",
        "g2.2xlarge",
        "g2.8xlarge",
        "r3.large",
        "r3.xlarge",
        "r3.2xlarge",
        "r3.4xlarge",
        "r3.8xlarge",
        "i2.xlarge",
        "i2.2xlarge",
        "i2.4xlarge",
        "i2.8xlarge",
        "d2.xlarge",
        "d2.2xlarge",
        "d2.4xlarge",
        "d2.8xlarge",
        "hi1.4xlarge",
        "hs1.8xlarge",
        "cr1.8xlarge",
        "cc2.8xlarge",
        "cg1.4xlarge"
       ],
    "ConstraintDescription" : "must be a valid EC2 instance type."
  },
...</code></pre></div></div>
      <div class="example"><h6>例 YAML</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  ...      
  KeyName:
    ConstraintDescription: must be the name of an existing EC2 KeyPair.
    Description: Name of an existing EC2 KeyPair to enable SSH access to the instances
    Type: AWS::EC2::KeyPair::KeyName
  InstanceType:
    AllowedValues:
    - t1.micro
    - t2.nano
    - t2.micro
    - t2.small
    - t2.medium
    - t2.large
    - m1.small
    - m1.medium
    - m1.large
    - m1.xlarge
    - m2.xlarge
    - m2.2xlarge
    - m2.4xlarge
    - m3.medium
    - m3.large
    - m3.xlarge
    - m3.2xlarge
    - m4.large
    - m4.xlarge
    - m4.2xlarge
    - m4.4xlarge
    - m4.10xlarge
    - c1.medium
    - c1.xlarge
    - c3.large
    - c3.xlarge
    - c3.2xlarge
    - c3.4xlarge
    - c3.8xlarge
    - c4.large
    - c4.xlarge
    - c4.2xlarge
    - c4.4xlarge
    - c4.8xlarge
    - g2.2xlarge
    - g2.8xlarge
    - r3.large
    - r3.xlarge
    - r3.2xlarge
    - r3.4xlarge
    - r3.8xlarge
    - i2.xlarge
    - i2.2xlarge
    - i2.4xlarge
    - i2.8xlarge
    - d2.xlarge
    - d2.2xlarge
    - d2.4xlarge
    - d2.8xlarge
    - hi1.4xlarge
    - hs1.8xlarge
    - cr1.8xlarge
    - cc2.8xlarge
    - cg1.4xlarge
    ConstraintDescription: must be a valid EC2 instance type.
    Default: t2.small
    Description: WebServer EC2 instance type
    Type: String
...</code></pre></div></div>
      <p><code class="code">WebServer</code> リソース宣言では、次のように、<code class="code">KeyName</code> プロパティが <code class="code">KeyName</code> パラメーターで指定されています。</p>
      <div class="example"><h6>例 JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"WebServer" : <span>{</span>
  "Type": "AWS::EC2::Instance",
  "Properties": <span>{</span>
    "KeyName" : <span>{</span> "Ref" : "KeyName" },
    ...
  }
},</code></pre></div></div>
      <div class="example"><h6>例 YAML</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">WebServer:
  Type: AWS::EC2::Instance
  Properties:
    KeyName:
      Ref: KeyName
    ...</code></pre></div></div>
      <p>中括弧には、 <code class="code">KeyName</code> を入力とする <a href="./intrinsic-function-reference-ref.html">Ref</a> 関数への呼び出しが含まれています。Ref 関数は、参照するオブジェクトの値を返します。ここでは、Ref 関数は <code class="code">KeyName</code> プロパティを、スタックの作成時に <code class="code">KeyName</code> に指定された値に設定します。</p>
      <p>また、Ref 関数は、リソースのプロパティを別のリソースの値に設定することもできます。たとえば、リソース宣言 <code class="code">WebServer</code> には、以下のプロパティ宣言が含まれています。</p>
      <div class="example"><h6>例 JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"WebServer" : <span>{</span>
  "Type": "AWS::EC2::Instance",
  "Properties": <span>{</span>
    ...
    "SecurityGroups" : [ <span>{</span>"Ref" : "WebServerSecurityGroup"} ],
    ...
  }
},</code></pre></div></div>
      <div class="example"><h6>例 YAML</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">WebServer:
  Type: AWS::EC2::Instance
  Properties:
    SecurityGroups:
    - Ref: WebServerSecurityGroup
    ...</code></pre></div></div>
      <p><code class="code">SecurityGroups</code> プロパティは、EC2 セキュリティグループのリストを受け取ります。Ref 関数は入力として <code class="code">WebServerSecurityGroup</code>(テンプレート内のセキュリティグループの論理名) を受け取り、<code class="code">WebServerSecurityGroup</code> プロパティに <code class="code">SecurityGroups</code> の名前を追加します。</p>
      <p>テンプレートには、<em>Mappings</em> セクションもあります。マッピングを使用すると、ルックアップテーブルステートメントと同じように評価される条件値を宣言できます。テンプレートはマッピングを使用して、リージョンの適切な Amazon マシンイメージ (AMI) やインスタンスタイプのアーキテクチャタイプを選択します。[<em>Outputs</em>] (出力) は、<code class="code">aws cloudformation describe-stacks</code> コマンドで返されたり、スタック作成後に CloudFormation コンソールの [<b>Outputs</b>] (出力) タブで返されたりするカスタム値を定義します。出力値を使用すると、スタック内のリソースの情報 (テンプレートで作成したウェブサイトの URL など) を返すことができます。マッピング、出力や、テンプレートに関するその他のことの詳細については、「<a href="./gettingstarted.templatebasics.html">テンプレートの基礎に関する説明</a>」で説明しています。</p>
      <p>ここでは、テンプレートについてはこれで十分です。スタックの作成を始めましょう。</p>
    
      <h2 id="GettingStarted.Walkthrough.prep">ステップ 2: スタックに必要な項目の準備ができたことの確認</h2>


      <p>テンプレートからスタックを作成する前に、テンプレートに必要なすべての依存リソースが利用できることを確認する必要があります。テンプレートは、既存の AWS リソースと、テンプレート自体で宣言されたリソースの両方を使用または参照できます。CloudFormation によって、テンプレート内のリソースへの参照が確認され、既存のリソースへの参照についても、スタックを作成するリージョンにリソースが存在していることが確認されます。存在しない依存リソースをテンプレートが参照している場合、スタックの作成は失敗します。</p>

      <p>サンプル WordPress テンプレートには、入力パラメータである <code class="code">KeyName</code> が含まれています。このパラメータは、テンプレートで宣言された Amazon EC2 インスタンスに使用されるキーペアを指定します。テンプレートからスタックを作成するユーザーは、<code class="code">KeyName</code> パラメータの有効な Amazon EC2 キーペアを指定する必要があります。有効なキーペア名を指定すると、スタックが正常に作成されます。有効なキーペア名を指定しないと、スタックはロールバックされます。</p>

      <p>スタックを作成する前に、有効な Amazon EC2 キーペアがあることを確認し、キーペア名を記録しておきます。</p>
      <p>キーペアを表示するには、Amazon EC2 コンソールを開き、ナビゲーションペインで [<b>Key Pairs</b>] (キーペア) を選択します。</p>

      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>Amazon EC2 キーペアがない場合は、スタックを作成するのと同じリージョンでキーペアを作成する必要があります。キーペアの作成については、「Linux インスタンス用 Amazon EC2 ユーザーガイド」の「<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair">Getting an SSH key pair</a>」(SSH キーペアの取得) を参照してください。</p></div></div>

      <p>有効なキーペアができたので、WordPress テンプレートを使用してスタックを作成しましょう。</p>

    
      <h2 id="GettingStarted.Walkthrough.createstack">ステップ 3: スタックの作成</h2>

      <p>前に説明した <em>WordPress-1.0.0</em> ファイルに基づいてスタックを作成します。テンプレートには、EC2 インスタンスなど、いくつかの AWS リソースが含まれています。</p>
      <div class="procedure"><h6>WordPress スタックを作成するには</h6><ol><li><p>AWS Management Console にサインインし、AWS CloudFormation コンソール (<a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>) を開きます。</p></li><li>
            <p><b>[Create Stack]</b> (スタックの作成) を選択します。</p>
         </li><li>
            <p><b>[テンプレートを指定]</b> セクションで、<b>[Amazon S3 テンプレート URL]</b> を選択してサンプルテンプレート  WordPress の URL を入力または貼り付けた後、<b>[次へ]</b> を選択します。</p>
            <p><code class="code">https://s3.us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.template</code></p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>S3 バケットに保存されている AWS CloudFormation テンプレートは、スタックを作成するユーザーがアクセスできる必要があり、作成されているスタックと同じリージョンに配置されている必要があります。したがって、S3 バケットが <span>us-east-2</span> リージョンにある場合、スタックは <span>us-east-2</span> にも作成する必要があります。</p></div></div>
         </li><li>
            <p><b>[スタックの詳細を指定]</b> セクションでは、<b>[スタックの名前]</b> フィールドに名前を入力します。この例では <code class="userinput">MyWPTestStack</code> を使用します。スタック名にスペースを含めることはできません。</p>
         </li><li>
            <p><b>[パラメータ]</b> セクションでは、<b>[DBUser]</b>、<b>[DBPassword]</b>、<b>[DBRootPassword]</b>、<b>[KeyName]</b> など、デフォルト値を持たないすべてのパラメータの値を指定する必要があります。[<b>KeyName</b>] フィールドに、スタックを作成するのと同じリージョン内の有効な Amazon EC2 ペアの名前を入力します。</p>
         </li><li>
            <p>[<b>Next</b>] を選択します。</p>
         </li><li>
            <p>このシナリオでは、タグは追加しません。[<b>Next</b>] を選択します。キーと値のペアであるタグは、スタックの識別に役立ちます。詳細については、「<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-add-tags.html">CloudFormation スタックへのタグの追加</a>」をご参照ください。</p>
         </li><li>
            <p>スタックの情報を確認します。設定が適切であることを確認したら、[<b>Submit (送信)</b>] を選択します。</p>
         </li></ol></div>
      <p>スタックの作成には数分かかることがありますが、ただぼんやりと座って待っていたくはないでしょう。その場合は、スタックの作成状況を確認することができます。</p>
    
      <h2 id="GettingStarted.Walkthrough.monitor">ステップ 4: スタックの作成状況の監視</h2>

      <p>[<b>Create Stack</b>] (スタックを作成) のウィザードを完了すると、CloudFormation はテンプレートで指定されているリソースの作成を開始します。新しいスタックである <code class="code">MyWPTestStack</code> が、<b>CloudFormation</b> コンソールの上部のリストに表示されます。そのステータスは、CREATE_IN_PROGRESS である必要があります。スタックの詳細なステータスは、イベントを表示して確認できます。</p>
      <div class="procedure"><h6>スタックのイベントを表示するには</h6><ol><li>
            <p>CloudFormation コンソールのリストで、スタック <code class="code">MyWPTestStack</code> を選択します。</p>
         </li><li>
            <p>スタックの詳細ペインで、[<b>Events</b>] (イベント) タブを選択します。</p>
            <p>コンソールは自動的に更新され、60 秒ごとに最新のイベントがイベントリストに表示されます。</p>
         </li></ol></div>
      <p>[<b>イベント</b>] タブには、スタックの作成の主要な各ステップが、最新のイベントが一番上になるように時間順に表示されます。</p>
      <p>最初のイベント (イベントリストの一番下のイベント) は、スタック作成プロセスの開始です。</p>
      <p><code class="code">2013-04-24 18:54 UTC-7 CREATE_IN_PROGRESS AWS::CloudFormation::Stack MyWPTestStack
            User initiated</code></p>
      <p>続いて、各リソースの作成の開始と終了を示すイベントが表示されます。たとえば、EC2 インスタンスの作成は、次のようなエントリになります。</p>
      <p><code class="code">2013-04-24 18:59 UTC-7 CREATE_COMPLETE AWS::EC2::Instance...</code></p>
      <p><code class="code">2013-04-24 18:54 UTC-7 CREATE_IN_PROGRESS AWS::EC2::Instance...</code></p>
      <p>CloudFormation がリソースの作成を開始したことがレポートされると、<code class="code">CREATE_IN_PROGRESS</code> イベントが記録されます。リソースが正常に作成されると、<code class="code">CREATE_COMPLETE</code> イベントが記録されます。</p>
      <p>CloudFormation によって正常にスタックが作成されると、[<b>Events</b>] (イベント) タブの上部に次のイベントが表示されます。</p>
      <p><code class="code">2013-04-24 19:17 UTC-7 CREATE_COMPLETE AWS::CloudFormation::Stack
            MyWPTestStack</code></p>

      <p>CloudFormation がリソースを作成できない場合は、<code class="code">CREATE_FAILED</code> イベントがレポートされます。また、デフォルトではスタックがロールバックされて、作成されたリソースがある場合はすべて削除されます。[<b>状況の理由</b>] 列には、失敗の原因となった問題が表示されます。</p>

    
      <h2 id="GettingStarted.Walkthrough.viewapp">ステップ 5: スタックリソースの使用</h2>

      <p>スタック <code class="code">MyWPTestStack</code> のステータスが <code class="code">CREATE_COMPLETE</code> になっていれば、CloudFormation はスタックの作成を完了しており、リソースを使い始めることができます。</p>
      <p>サンプル WordPress スタックは、WordPress ウェブサイトを作成します。WordPress インストールスクリプトを実行すると、WordPress の設定を続けることができます。</p>
      <div class="procedure"><h6>WordPress のインストールを完了するには</h6><ol><li>
            <p>[<b>Outputs</b>] (出力) タブの [<b>WebsiteURL</b>] 行で、[<b>Value</b>] 列のリンクを選択します。</p>
            <p><code class="code">WebsiteURL</code> 出力値は、スタックで作成した WordPress ウェブサイトのインストールスクリプトの URL です。</p>
         </li><li>
            <p>WordPress インストールのウェブページで、WordPress の設定を完了するための画面の手順に従います。WordPress のインストールの詳細については、<a href="https://wordpress.org/support/article/how-to-install-wordpress/" rel="noopener noreferrer" target="_blank"><span>https://wordpress.org/support/article/how-to-install-wordpress/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> を参照してください。</p>
            <p>インストールとログインが完了するとダッシュボードが表示されるので、ここで WordPress ブログに追加オプションを設定することができます。その後、CloudFormation テンプレートを使用して、正常に作成されたブログへの投稿を開始できます。</p>
         </li></ol></div>
    
      <h2 id="GettingStarted.Walkthrough.cleanup">ステップ 6: クリーンアップする</h2>

      <p>CloudFormation の基本的なタスクを完了しました。不要なサービスに対して課金されていないことを確認するために、スタックとそのリソースを削除して、クリーンアップすることができます。</p>
      <div class="procedure"><h6>スタックとそのリソースを削除するには</h6><ol><li>
            <p>CloudFormation コンソールから、<code class="code">MyWPTestStack</code> スタックを選択します。</p>
         </li><li>
            <p>[<b>Delete Stack</b>] を選択します。</p>

         </li><li>
            <p>表示された確認メッセージで、[<b>Yes, Delete</b>] (はい、削除します) を選択します。</p>
         </li></ol></div>
      <p><code class="code">MyWPTestStack</code> のステータスが <code class="code">DELETE_IN_PROGRESS</code> に変わります。スタックの作成を監視したのと同じ方法で、[<b>イベント</b>] タブを使用して削除を監視できます。CloudFormation がスタックの削除を完了すると、リストからスタックが削除されます。</p>
      <p>お疲れ様でした。テンプレートの選択、スタックの作成、リソースの表示と使用、スタックとそのリソースの削除を正常に行うことができました。それだけでなく、CloudFormation テンプレートを使用して WordPress ブログを設定することもできました。その他のテンプレートは、<a href="https://aws.amazon.com/cloudformation/aws-cloudformation-templates/" rel="noopener noreferrer" target="_blank"><span>AWS CloudFormation サンプルテンプレートライブラリ</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>で見つけることができます。</p>
      <p>次は、既存のテンプレートを変更したり独自のテンプレートを作成したりできるように、「<a href="./gettingstarted.templatebasics.html">テンプレートの基礎に関する説明</a>」でテンプレートについてより詳しく知る必要があります。</p>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>ブラウザで JavaScript が無効になっているか、使用できません。</strong></p><p>AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。手順については、使用するブラウザのヘルプページを参照してください。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">ドキュメントの表記規則</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./GettingStarted.html">開始方法</div><div id="next" class="next-link" accesskey="n" href="./gettingstarted.templatebasics.html">テンプレートの基礎に関する説明</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">このページは役に立ちましたか? - はい</div><div class="content"><p>ページが役に立ったことをお知らせいただき、ありがとうございます。</p><p>お時間がある場合は、何が良かったかお知らせください。今後の参考にさせていただきます。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">このページは役に立ちましたか? - いいえ</div><div class="content"><p>このページは修正が必要なことをお知らせいただき、ありがとうございます。ご期待に沿うことができず申し訳ありません。</p><p>お時間がある場合は、ドキュメントを改善する方法についてお知らせください。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>