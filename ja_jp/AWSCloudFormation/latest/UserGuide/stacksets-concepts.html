<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ja-JP"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>StackSets の概念 - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="stacksets-concepts" /><meta name="default_state" content="stacksets-concepts" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" /><meta name="description" content="StackSets の基本的な概念とそれらの関連性について説明します。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="ユーザーガイド" /><meta name="abstract" content="このユーザーガイドでは、AWS CloudFormation を使用して、予測かつ再現可能な方法で、AWS インフラストラクチャのデプロイを作成して管理します。" /><meta name="guide-locale" content="ja_jp" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="ユーザーガイド" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="ユーザーガイド" /><meta id="panorama-serviceConsolePage" value="StackSets の概念" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>StackSets の概念 - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,リソースのプロビジョニング,リソース構成,インフラストラクチャ管理,CloudFormer,CloudFormation スタック,CloudFormation StackSet,CloudFormation テンプレート,変更セット" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "ユーザーガイド",
        "item" : "https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS CloudFormation StackSets の操作",
        "item" : "https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "StackSets の概念",
        "item" : "https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">ドキュメント</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">ユーザーガイド</a></div><div id="page-toc-src"><a href="#stacksets-concepts-accts">管理者アカウントおよびターゲットアカウント</a><a href="#stacksets-concepts-stackset">AWS CloudFormation StackSets</a><a href="#stacksets-concepts-stackset-permission-models">スタックセットのアクセス許可モデル</a><a href="#stacksets-concepts-stackinstances">スタックインスタンス</a><a href="#stacksets-concepts-ops">スタックセットオペレーション</a><a href="#stackset-ops-options">スタックセットオペレーションのオプション</a><a href="#stackset-concepts-tags">タグ</a><a href="#stackset-status-codes">StackSets ステータスコード</a><a href="#stack-instance-status-codes">スタックインスタンスのステータスコード</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="stacksets-concepts">StackSets の概念</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>StackSets を使用する場合は、スタックセット、スタックインスタンス、スタックを使用します。</p><div class="highlights" id="inline-topiclist"><h6>トピック</h6><ul><li><a href="#stacksets-concepts-accts">管理者アカウントおよびターゲットアカウント</a></li><li><a href="#stacksets-concepts-stackset">AWS CloudFormation StackSets</a></li><li><a href="#stacksets-concepts-stackset-permission-models">スタックセットのアクセス許可モデル</a></li><li><a href="#stacksets-concepts-stackinstances">スタックインスタンス</a></li><li><a href="#stacksets-concepts-ops">スタックセットオペレーション</a></li><li><a href="#stackset-ops-options">スタックセットオペレーションのオプション</a></li><li><a href="#stackset-concepts-tags">タグ</a></li><li><a href="#stackset-status-codes">StackSets ステータスコード</a></li><li><a href="#stack-instance-status-codes">スタックインスタンスのステータスコード</a></li></ul></div>
            <h2 id="stacksets-concepts-accts">管理者アカウントおよびターゲットアカウント</h2>

            <p><em>管理者アカウント</em>は、スタックセットを作成する AWS アカウントです。サービスマネージド型のアクセス許可を持つスタックセットの場合、管理者アカウントは組織の 管理アカウント または委任された管理者アカウントです。スタックセットを作成した AWS 管理者アカウントにサインインすることで、スタックセットを管理できます。</p>
            <p><em>ターゲットアカウント</em>は、スタックセットの 1 つ以上のスタックを作成、更新、削除するアカウントです。スタックセットを使用してターゲットアカウントにスタックを作成する前に、管理者アカウントとターゲットアカウントの間に信頼関係をセットアップします。</p>

         
            <h2 id="stacksets-concepts-stackset">AWS CloudFormation StackSets</h2>

            <p>スタックセットでは、1 つの CloudFormation テンプレートを使用して、複数のリージョンの AWS アカウント にスタックを作成できます。スタックセットの CloudFormation テンプレートは、各スタック内のすべてのリソースを定義します。スタックセットを作成する際、使用するテンプレートに加え、そのテンプレートで必要なパラメータや機能を指定します。</p>
            <p>スタックセットを定義したら、指定したターゲットアカウントや AWS リージョン でスタックを作成、更新、削除できるようになります。スタックを作成、更新、または削除する際には、オペレーションの環境設定も指定できます。例えば、オペレーションを実行するリージョンの順序、スタックオペレーションが停止する前の耐障害性のしきい値、およびスタックオペレーションを同時に実行するアカウントの数を含めます。</p>
            <p>スタックセットはリージョンのリソースです。スタックセットを 1 つの AWS リージョン で作成する場合では、そのリージョンを表示しているときにのみ表示または変更できます。</p>
         
            <h2 id="stacksets-concepts-stackset-permission-models">スタックセットのアクセス許可モデル</h2>
            <p>スタックセットは、セルフマネージド型のアクセス許可、またはサービスマネージド型のアクセス許可のいずれかを使用して作成できます。</p>
            <p>セルフマネージド型アクセス許可を使用する場合、アカウントとリージョン間でデプロイするために StackSets で必要な IAM ロールを作成します。これらのロールは、スタックセットを管理するアカウントとスタックインスタンスをデプロイするアカウントとの間に信頼できる関係を確立するために必要です。このアクセス許可モデルを使用すると、StackSets は、IAM ロールを作成するアクセス許可を持つ任意の AWS アカウントにデプロイできます。</p>
            <p><em>サービスマネージド型</em>のアクセス許可を使用する場合、AWS Organizations が管理するアカウントにスタックインスタンスをデプロイできます。このアクセス許可モデルを使用すると、必要な IAM ロールを作成する必要はありません。ユーザーに代わって StackSets が IAM ロールを作成します。このモデルでは、将来組織に追加するアカウントへの自動デプロイをオンにすることもできます。</p>
            <p>AWS Organizations は、CloudFormation と統合され、AWS リソースの拡張や成長に伴い、環境の一元管理およびガバナンスを支援します。</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>管理アカウント - 組織を作成するために使用するアカウント。詳しくは、<a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_getting-started_concepts.html#account">[AWS Organizationsterminology and concepts]</a> (用語と概念) をご覧ください。</p>
                </li><li class="listitem">
                    <p>委任管理者 - 互換性のある AWS サービスでは、組織内の AWS メンバーアカウントをそのサービスにおける組織のアカウントの管理者として登録できます。詳細については、「<a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_integrate_services_list.html">AWS Organizations で使用できる AWS のサービス</a>」を参照してください。</p>
                </li></ul></div>
            <p>サービスマネージド型のアクセス許可を使用してスタックセットを作成および管理する方法の詳細については、次のトピックを参照してください。</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./stacksets-orgs-activate-trusted-access.html">AWS Organizations の信頼されたアクセスをアクティブ化する</a></p>
                </li><li class="listitem">
                    <p><a href="./stacksets-orgs-delegated-admin.html">委任された管理者の登録</a></p>
                </li><li class="listitem">
                    <p><a href="./stacksets-getting-started-create.html#stacksets-orgs-associate-stackset-with-org">サービスマネージド型のアクセス許可を持つスタックセットの作成</a></p>
                </li></ul></div>
         
            <h2 id="stacksets-concepts-stackinstances">スタックインスタンス</h2>

            <p><em>スタックインスタンス</em>は、リージョン内のターゲットアカウントのスタックへのリファレンスです。スタックインスタンスはスタックなしで存在できます。例えば、何らかの理由によりスタックが作成されていない場合は、スタック作成の失敗理由がスタックインスタンスに表示されます。スタックインスタンスは、1 つのスタックセットにのみ関連付けられます。</p>
            <p>次の図は、スタックセット、スタックオペレーション、スタック間の論理関係を表しています。スタックセットを更新すると、関連付けられているすべてのスタックインスタンスは、すべてのアカウントおよびリージョンで更新されます。</p>
            <div class="mediaobject">
                 
                    <img src="images/stack_sets_operations_stacks_sv.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                    複数のアカウントおよびリージョンのスタックインスタンスやスタックを作成、更新、削除するための判断材料として、1 つのスタックセットを確保できます。&#xA;                " style="max-width:100%" />
                 
                 
            </div>
         
            <h2 id="stacksets-concepts-ops">スタックセットオペレーション</h2>

            <p>スタックセットでは、以下の操作を実行できます。</p>
            <div class="variablelist">
                 
                 
                 
                 
            <dl>
                    <dt><span class="term">スタックセットの作成</span></dt>
                    <dd>
                        <p>新しいスタックセットを作成するには、スタックの作成に使用する CloudFormation テンプレートの指定、スタックを作成するターゲットアカウントの指定、ターゲットアカウントのスタックをデプロイする AWS リージョン の特定などを行います。スタックセットでは、選択したリージョン内の指定したすべてのターゲットアカウントに対して同一の設定を使用して、同一のスタックリソースを一貫してデプロイできます。</p>
                    </dd>
                 
                    <dt><span class="term">スタックセットの更新</span></dt>
                    <dd>
                        <p>スタックセットを更新したら、スタックセットのスタックに変更内容をプッシュします。スタックセットは、以下のいずれかの方法で更新できます。テンプレートをアップデートすると必ずすべてのスタックに反映されます。スタックセットの一部スタックのテンプレートを選択してアップデートすることはできません。その他のスタックもアップデートされます。</p>
                        <div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>テンプレートの既存の設定を変更するか (例: 特定のサービスのパラメータ設定の更新)、新しいリソースを追加します (例: 新しい Amazon EC2 インスタンスの追加)。</p>
                            </li><li class="listitem">
                                <p>テンプレートを別のテンプレートに置き換えます。</p>
                            </li><li class="listitem">
                                <p>既存のリージョンまたは追加リージョンの既存または追加のターゲットアカウントにスタックを追加します。</p>
                            </li></ul></div>
                    </dd>
                 
                    <dt><span class="term">スタックの削除</span></dt>
                    <dd>
                        <p>スタックを削除する場合は、指定したリージョン内の指定したターゲットアカウントから、スタックおよび関連付けられているリソースを削除します。スタックは次の方法で削除できます。</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>一部のターゲットアカウントからスタックを削除し、実行中の他のターゲットアカウントの他のスタックはそのままにしておきます。</p>
                            </li><li class="listitem">
                                <p>一部のリージョンからスタックを削除し、実行中の他のリージョンのスタックはそのままにしておきます。</p>
                            </li><li class="listitem">
                                <p>スタックセットからスタックを削除しても保存されるため、[<b>Retain Stacks (スタックの保持)</b>] オプションを選択して、引き続き、個別にスタックセットを実行できます。その後、AWS CloudFormation で設定されたスタックの外部で保持されたスタックを管理できます。</p>
                            </li><li class="listitem">
                                <p>スタックセット全体を削除する準備段階として、スタックセット内のすべてのスタックを削除します。</p>
                            </li></ul></div>
                    </dd>
                 
                    <dt><span class="term">スタックセットの削除</span></dt>
                    <dd>
                        <p>スタックセットは、スタックセット内にスタックインスタンスが存在しない場合のみ、削除できます。</p>
                    </dd>
                </dl></div>
         
            <h2 id="stackset-ops-options">スタックセットオペレーションのオプション</h2>

            <p>このセクションで説明されているオプションを使用すると、スタックセットオペレーションを成功させるために許容されている障害時間や障害数を制御しやすくなるだけでなく、スタックリソースの損失を抑えるのにも役立ちます。</p>
            <div class="variablelist">
                 
                 
                 
                 
                 
            <dl>
                    <dt><span class="term">同時アカウントの最大数</span></dt>
                    <dd>
                        <p>この設定は、ワークフローの作成、更新、削除に適用され、一度にオペレーションを実行するターゲットアカウントの最大数または割合 (%) を指定することができます。数または割合 (%) が少ない場合は、オペレーションが、一度に少数のターゲットアカウントで実行していることを表します。オペレーションは、一度に 1 つのリージョンで、<b>[Deployment order]</b> (デプロイ順序) ボックスで指定した順序で実行します。例えば、スタックを 2 つのリージョンの 10 のターゲットアカウントにデプロイした場合、<b>[Maximum concurrent accounts]</b> (同時アカウントの最大数) を <b>50</b> と <b>[By percentage]</b> (割合) に設定すると、スタックは最初のリージョンの 5 つのアカウント、次に最初のリージョンの次の 5 つのアカウントにデプロイされた後、次のリージョンに移動し、最初の 5 つのターゲットアカウントにデプロイされます。</p>
                        <p>[<b>By percentage</b>] (割合) を選択して、指定された割合 (%) が指定したアカウントの整数にならない場合は、CloudFormation によって丸められます。例えば、スタックを 10 のターゲットアカウントにデプロイし、[<b>Maximum concurrent accounts</b>] (同時アカウントの最大数) を [<b>25</b>] と [<b>By percentage</b>] (割合) に設定した場合は、同時にデプロイされるスタック数は、CloudFormation によって 2.5 (設定できません) から 2 に丸められます。</p>
                        <p>この設定では、オペレーションの<em>最大値</em>を指定できます。大規模なデプロイの場合、特定の状況下では、同時に処理される実際のアカウント数はサービスのスロットリングのために低くなる可能性があります。デプロイの最大速度は、スタックセットあたり 100 の同時スタックインスタンスです。</p>
                    </dd>
                 
                    <dt><span class="term">同時実行モード</span></dt>
                    <dd>
                        <p>この設定は、作成、更新、および削除のワークフローで利用可能であり、スタックセットオペレーション時の同時実行レベルの動作を選択できます。詳細については、「<a href="./concurrency-mode.html">同時実行モードパラメータ</a>」を参照してください。</p>
                    </dd>
                 
                    <dt><span class="term">障害耐性</span></dt>
                    <dd>
                        <p>この設定は、ワークフローの作成、更新、削除で利用でき、各リージョンで発生する場合があるスタックオペレーションの失敗の最大数や割合を指定できます。この値を超えると、オペレーションは CloudFormation によって自動的に停止されます。数値または割合 (%) が少ない場合は、オペレーションで実行しているスタックが少数であることを意味しますが、失敗したオペレーションのトラブルシューティングをすばやく開始することができます。たとえば、10 のスタックを 3 つのリージョン内の 10 のターゲットアカウントにデプロイした場合、[<b>Failure tolerance (障害耐性)</b>] を [<b>20</b>] と [<b>By percentage (割合)</b>] に設定すると、オペレーションを続行するために、最大 2 つのスタックのアップデートがリージョン内で失敗することがあります。同リージョンの 3 番目のスタックで失敗した場合、CloudFormation はオペレーションを停止します。最初のリージョンでスタックを更新できない場合、更新オペレーションはそのリージョンで続行され、その後、次のリージョンに移行します。2 番目のスタックを 2 番目のリージョンで更新できない場合、耐障害性は 20% に達し、同リージョンの 3 番目のスタックが失敗した場合、CloudFormation は更新オペレーションを停止し、次のリージョンに移行することもありません。</p>
                        <p>[<b>By percentage</b>] (割合) を選択して、指定された割合 (%) が、各リージョン内のスタックの整数にならない場合、CloudFormation は切り捨てられます。例えば、スタックを 3 つのリージョンの 10 のターゲットアカウントにデプロイし、[<b>Failure tolerance</b>] (障害耐性) を [<b>25</b>] と [<b>By percentage</b>] (割合) に設定した場合、リージョンあたりの障害耐性 2.5 (設定できません) は、CloudFormation によって 2 に切り捨てられます。</p>
                    </dd>
                 
                    <dt><span class="term">スタックの保持</span></dt>
                    <dd>
                        <p>この設定は、スタックワークフローの削除に利用することができるだけでなく、スタックセットから削除した後でも、スタックやリソースを引き続き実行することができます。スタックを保持すると、AWS CloudFormation は、個別のアカウントとリージョンインタクトにスタックを残します。スタックはスタックセットから関連付けを解除しますが、スタックとそのリソースを保存します スタックの削除オペレーションが完了したら、スタックを作成したターゲットアカウント (管理者アカウントではありません) を使用して、CloudFormation で保持されているスタックを管理します。</p>
                    </dd>
                 
                    <dt><span class="term">リージョンの同時実行</span></dt>
                    <dd>
                        <p>この設定は、作成、更新、および削除のワークフローで利用可能であり、StackSets をリージョンにデプロイする方法を選択できます。</p>
                        <p>順次 - リージョンのデプロイ失敗が指定された耐障害性を超えない限り、リージョンの <b>[Deployment order]</b> (デプロイ順序) ボックスで指定されているように、一度に 1 つのリージョンに StackSets オペレーションをデプロイします。デフォルトでは、順次デプロイが選択されています。</p>
                        <p>並列 - リージョンのデプロイ失敗が指定された耐障害性を超えない限り、指定されたすべてのリージョンに StackSets オペレーションを同時にデプロイします。</p>
                    </dd>


                </dl></div>
         
            <h2 id="stackset-concepts-tags">タグ</h2>

            <p>スタックセットの作成オペレーションおよび更新オペレーション時にタグを追加するには、キーと値のペアを指定します。請求額とコストの配分を行うためにスタックセットリソースのソートおよびフィルタリングを行う場合は、タグが便利です。AWS でのタグの使用方法に関する詳細については、「AWS Billing and Cost Management ユーザーガイド」の「<a href="https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/cost-alloc-tags.html">Using cost allocation tags</a>」(コスト配分タグの使用) を参照してください。キーと値のペアを指定したあと、[<b>+</b>] を選択してタグを保存します。タグの右側にある赤い <b>X</b> を選択すると、使用しなくなったタグを削除できます。</p>
            <p>スタックセットに適用するタグは、すべてのスタックと、スタックにより作成されるリソースに適用されます。CloudFormation のスタックのみのレベルでタグを追加することもできますが、そのタグは StackSets には表示されない場合があります。</p>
            <p>StackSets でシステム定義のタグが追加されることはありませんが、文字列 <code class="code">aws:</code> を含むタグのキー名から開始しないようにしてください。</p>
         
            <h2 id="stackset-status-codes">StackSets ステータスコード</h2>

            <p>AWS CloudFormation StackSets は、スタックセットオペレーションのステータスコードを生成します。</p>
            <p>スタックセットオペレーションのステータスコードを以下のテーブルに示します。</p>
            <div class="table-container"><div class="table-contents"><table id="w1348aac21c15c23b7"><thead>
                        <tr>
                            <th>スタックセットオペレーションのステータス</th>
                            <th>説明</th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">RUNNING</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>オペレーションは現在進行中です。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">SUCCEEDED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>オペレーションは、オペレーションの障害耐性を超えることなく終了しました。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">FAILED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>オペレーションが完了できなかったスタックの数は、ユーザー定義の耐障害性を超えました。オペレーション向けに設定した耐障害性の値は、スタック作成およびスタック更新のオペレーション時に各リージョンに適用されます。リージョン内で失敗したスタックの数が耐障害性を超えた場合、リージョン内のオペレーションのステータスは、<code class="code">FAILED</code> に変更されます。オペレーション全体のステータスも <code class="code">FAILED</code> に設定され、その他のリージョンのオペレーションは CloudFormation によってキャンセルされます。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">QUEUED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p><code class="code">Service-managed permissions</code> 一連のオペレーションを必要とする自動デプロイの場合、オペレーションはキューに入り、実行されます。例:</p>
                                <div class="itemizedlist">
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p>アカウントをある組織単位 (OU) <code class="code">OU1</code> から別の組織単位 <code class="code">OU2</code> に移動すると、自動デプロイがトリガーされます。StackSets は、削除オペレーションを実行してターゲットリージョンのターゲット <code class="code">OU1</code> アカウントからスタックインスタンスを削除し、ターゲットリージョンのターゲット <code class="code">OU2</code> アカウントにスタックインスタンスを追加するための作成オペレーションをキューに入れます。</p>
                                    </li><li class="listitem">
                                        <p>OU にアカウント <code class="code">AccountA</code> を追加すると、自動デプロイがトリガーされます。StackSets は、ターゲットリージョンの <code class="code">AccountA</code> にスタックインスタンスを追加するための作成オペレーションを実行します。この作成オペレーションの実行中に別のアカウント <code class="code">AccountB</code> を OU に追加すると、StackSets は 2 番目の作成オペレーションをキューに入れます。最初の作成オペレーションが完了すると、StackSets は 2 番目の作成オペレーションを実行して、ターゲットリージョンの <code class="code">AccountB</code> にスタックインスタンスを追加します。</p>
                                    </li></ul></div>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">STOPPING</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>ユーザーのリクエストにより、オペレーションは停止中です。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">STOPPED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>ユーザーのリクエストにより、オペレーションは停止しました。</p>
                            </td>
                        </tr>
                    </table></div></div>
         
            <h2 id="stack-instance-status-codes">スタックインスタンスのステータスコード</h2>
            <p>AWS CloudFormation StackSets は、スタックインスタンスのステータスコードを生成します。</p>
            <p>次の表は、StackSets 内のスタックインスタンスのステータスコードについて説明したものです。</p>
            <div class="table-container"><div class="table-contents disable-scroll"><table id="w1348aac21c15c25b7"><thead>
                        <tr>
                            <th>スタックインスタンスの状態</th>
                            <th>説明</th>
                        </tr>
                    </thead>

                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">CURRENT</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>スタックは、スタックセットで最新状態です。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">OUTDATED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>スタックは、以下のいずれかの理由により、スタックセットで最新状態ではありません。</p>
                                <div class="itemizedlist">
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p>関連付けられたスタックの <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html">CreateStackSet</a></code> オペレーションまたは <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html">UpdateStackSet</a></code> オペレーションが失敗した</p>
                                    </li><li class="listitem">
                                        <p>スタックが作成または更新される前に、失敗または停止した <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html">CreateStackSet</a></code> オペレーションまたは <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html">UpdateStackSet</a></code> オペレーションの一部でした。</p>
                                    </li></ul></div>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">INOPERABLE</code></p>
                            </td>
                            <td tabindex="-1">
                                <p><code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DeleteStackInstances.html">DeleteStackInstances</a></code> オペレーションが失敗し、不安定な状態で放置されている この状態のスタックは、今後の <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html">UpdateStackSet</a></code> オペレーションから除外されます。必要に応じて、<code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DeleteStackInstances.html">DeleteStackInstances</a></code> を <code class="code">RetainStacks</code> に設定して <code class="code">true</code> オペレーションを実行し、スタックインスタンスを削除します。その後、手動でスタックを削除します。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">CANCELLED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定されたアカウントとリージョンでのオペレーションがキャンセルされました。これは、ユーザーがスタックセットオペレーションを停止したか、スタックセットオペレーションの耐障害性を超えたためです。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">FAILED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定されたアカウントとリージョンでのオペレーションに失敗しました。リージョン内の十分なアカウントでスタックセットオペレーションが失敗した場合、スタックセットオペレーション全体の障害耐性を超える可能性があります。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">PENDING</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定されたアカウントとリージョンでのオペレーションはまだ開始されていません。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">RUNNING</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定されたアカウントとリージョンでのオペレーションは現在進行中です。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">SKIPPED_SUSPENDED_ACCOUNT</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>操作の時点でアカウントが停止されたため、指定されたアカウントとリージョンでの操作がスキップされました。</p>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">
                                <p><code class="code">SUCCEEDED</code></p>
                            </td>
                            <td tabindex="-1">
                                <p>指定されたアカウントとリージョンでのオペレーションが正常に完了しました。</p>
                            </td>
                        </tr>
                    </table></div></div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>ブラウザで JavaScript が無効になっているか、使用できません。</strong></p><p>AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。手順については、使用するブラウザのヘルプページを参照してください。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">ドキュメントの表記規則</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./what-is-cfnstacksets.html">StackSets の操作</div><div id="next" class="next-link" accesskey="n" href="./stacksets-prereqs.html">スタックセットオペレーションの前提条件</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">このページは役に立ちましたか? - はい</div><div class="content"><p>ページが役に立ったことをお知らせいただき、ありがとうございます。</p><p>お時間がある場合は、何が良かったかお知らせください。今後の参考にさせていただきます。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">このページは役に立ちましたか? - いいえ</div><div class="content"><p>このページは修正が必要なことをお知らせいただき、ありがとうございます。ご期待に沿うことができず申し訳ありません。</p><p>お時間がある場合は、ドキュメントを改善する方法についてお知らせください。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-concepts.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>