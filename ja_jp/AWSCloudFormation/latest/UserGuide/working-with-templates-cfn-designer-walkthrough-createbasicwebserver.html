<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ja-JP"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>チュートリアル: AWS CloudFormation デザイナー を使用して基本的なウェブサーバーを作成する - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="working-with-templates-cfn-designer-walkthrough-createbasicwebserver" /><meta name="default_state" content="working-with-templates-cfn-designer-walkthrough-createbasicwebserver" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="description" content="AWS CloudFormation デザイナーを使用して基本的なウェブサーバーを作成します。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="ユーザーガイド" /><meta name="abstract" content="このユーザーガイドでは、AWS CloudFormation を使用して、予測かつ再現可能な方法で、AWS インフラストラクチャのデプロイを作成して管理します。" /><meta name="guide-locale" content="ja_jp" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="ユーザーガイド" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="ユーザーガイド" /><meta id="panorama-serviceConsolePage" value="チュートリアル: AWS CloudFormation デザイナー を使用して基本的なウェブサーバーを作成する" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>チュートリアル: AWS CloudFormation デザイナー を使用して基本的なウェブサーバーを作成する - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,リソースのプロビジョニング,リソース構成,インフラストラクチャ管理,CloudFormer,CloudFormation スタック,CloudFormation StackSet,CloudFormation テンプレート,変更セット" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "ユーザーガイド",
        "item" : "https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS CloudFormation テンプレートの使用",
        "item" : "https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "チュートリアル",
        "item" : "https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/CHAP_Using.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "チュートリアル: AWS CloudFormation デザイナー を使用して基本的なウェブサーバーを作成する",
        "item" : "https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/CHAP_Using.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">ドキュメント</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">ユーザーガイド</a></div><div id="page-toc-src"><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">ステップ 1: リソースの追加と接続</a><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">ステップ 2: のパラメーター、マッピング、出力の追加</a><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">ステップ 3: リソースプロパティを指定する</a><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">ステップ 4: リソースのプロビジョニング</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver">チュートリアル: AWS CloudFormation デザイナー を使用して基本的なウェブサーバーを作成する</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>AWS CloudFormation デザイナーは、テンプレートをグラフィカルに表示して、テンプレート内のリソースとその接続状況を知るのに役立ちます。統合された JSON および YAML エディタは、AWS CloudFormation コンソールで直接テンプレートを簡単に変更することもできます。これらのコンポーネントを使用する方法のデモを行うために、AWS CloudFormation デザイナーを使用して VPC で基本的なウェブサーバーを構築します。その後、テンプレートを保存して CloudFormation スタックを作成するのに使用します。</p><p>このウォークスルーでは、次のステップを完了します。</p><div class="orderedlist">
     
     
     
     
  <ol><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">リソースを追加し接続します。</a></p>
      <p>最初に AWS CloudFormation デザイナー を開いて、空のテンプレートを作成します。AWS CloudFormation デザイナーを使用して、VPC や EC2 インスタンスなどのリソースをテンプレートにドラッグし、テンプレートへの入力を開始します。それらの間にリンクも作成します。例えば、AWS CloudFormation デザイナーを使用してインターネットゲートウェイと VPC 間に接続を作成します。</p>
    </li><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">テンプレートパラメータ、マッピング、出力を追加します。</a></p>
      <p>AWS CloudFormation デザイナー 統合されたエディタ を使用して、他のテンプレートコンポーネントを追加し、テンプレートをより便利なものにします。たとえば、テンプレートにパラメーターを追加して、スタックを作成するときに入力値を指定できるようにします。この方法では、通常変更するプロパティ値のテンプレートを常に編集する必要がなくなります。</p>
    </li><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">リソースプロパティを指定します。</a></p>
      <p>ここでは、統合されたエディタ をもう一度使用して、リソースの構成を指定します。</p>
    </li><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">リソースのプロビジョニング</a></p>
      <p>スタックを作成するまで、リソーステンプレートは起動され実行されることはありません。ここでは、CloudFormation スタックを起動するために作成したテンプレートを使用します。これは、テンプレートで定義されているすべてのリソースをプロビジョニングします。</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>CloudFormation は無料サービスです。ただし、スタックに追加する AWS リソースにはそれぞれの現在の料金が課金されます。AWS 料金に関する詳細については、<a href="https://aws.amazon.com/" rel="noopener noreferrer" target="_blank"><span>http://aws.amazon.com</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> で各製品の詳細ページを参照してください。</p></div></div>
    </li></ol></div><p>前提条件</p><p>このチュートリアルは、お客様が Amazon Virtual Private Cloud (Amazon VPC)、Amazon Elastic Compute Cloud (Amazon EC2)、および CloudFormation に精通していることを想定しています。コンテキストでは、それぞれの手順でリソースに関する基本情報について説明します。</p><p>また開始前に、スタックを作成するリージョンに Amazon EC2 キーペアがあることを確認してください。詳細については、「Amazon EC2 Linux インスタンス用ユーザーガイド」の「<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">Amazon EC2 キーペア</a>」を参照してください。</p><h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">ステップ 1: リソースの追加と接続</h2>

    <p>AWS CloudFormation デザイナードラッグアンドドロップインターフェースを使用して、Amazon EC2 インスタンスと、VPC、サブネット、ルートテーブル、インターネットゲートウェイのような、ネットワークリソースを追加します。すべてのリソースを追加したら、その間に接続を作成します。たとえば、インターネットゲートウェイと VPC を関連付けます。</p>
    <div class="procedure"><h6>リソースをテンプレートに追加するには</h6><ol><li>
        <p>AWS CloudFormation デザイナー を <a href="https://console.aws.amazon.com/cloudformation/designer" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation/designer</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> で開きます。</p>
      </li><li>
        <p>統合されたエディタ で、ページの下半分にある [<b>Edit (編集)</b>] (<span class="inlinemediaobject">
             
              <img src="images/designer-edit-icon.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
             
          </span>) をクリックします。</p>
      </li><li>
        <p>テンプレート名を <code class="code">BasicWebServerInVPC</code> に変更し、[<b>Enter (入力)</b>] を押します。</p>
        <p>現在、有効でない空のテンプレートがあります。次のステップでは、リソースを追加してテンプレートを有効にします。</p>
      </li><li>
        <p>[<b>リソースタイプ</b>] ペインで、[<b>EC2</b>] カテゴリから [<b>VPC</b>] リソースタイプを [<b>Canvas (キャンバス)</b>] ペインにドラッグします。</p>
        <p>リソースは、リソースのカテゴリに整理されます。ここで追加するリソースはすべて、[<b>EC2</b>] カテゴリにあります。</p>
        <p>AWS CloudFormation デザイナーは、テンプレートを直ちに変更して VPC リソースを含めて、次の JSON スニペットに似た結果を生じさせます。</p>
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">  "Resources": <span>{</span>
    "VPC431KO": <span>{</span>
      "Type": "AWS::EC2::VPC",
      "Properties": <span>{</span>},
      "Metadata": <span>{</span>
        "AWS::CloudFormation::Designer": <span>{</span>
          "id": "445730ea-0d11-45ba-b6ac-12345EXAMPLE"
        }
      }
    }
  }</code></pre>

        <p>YAML スニペットは、以下のような内容です。</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  VPC431KO:
    Type: 'AWS::EC2::VPC'
    Properties: <span>{</span>}
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 9430b008-7a03-41ed-b63e-12345EXAMPLE</code></pre>

        <p>なお、VPC の CIDR ブロックのような VPC プロパティを指定する必要があることに注意してください。これについては、後で行います。これは、追加するすべてのリソースに当てはまります。</p>
      </li><li>
        <p>VPC の名前を変更します。</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>リソースの名前を変更するときは、論理 ID の名前も変更します。これはテンプレート参照される名前です (CloudFormation がリソースを作成した時に割り当てられる名前ではありません)。詳細については、「<a href="./resources-section-structure.html">リソース</a>」を参照してください。</p></div></div>
        <ol><li>
            <p>VPC リソースを選択します。</p>
          </li><li>
            <p>統合されたエディタ で、[<b>Edit (編集)</b>] アイコン (<span class="inlinemediaobject">
                 
                  <img src="images/designer-edit-icon.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                 
              </span>) をクリックします。</p>
          </li><li>
            <p>名前を <code class="code">VPC</code> に変更して、[<b>Enter (入力)</b>] を選択します。</p>
          </li></ol>
        <p>次に、VPC にリソースを追加します。</p>
      </li><li>
        <p>VPC リソースの角をドラッグして拡張し、複数の追加リソースに十分な大きさにします。</p>
        <p>ウェブサイトをホストする EC2 インスタンスを追加することはできないため、サブネットを VPC に直接追加する必要があります。インスタンスはサブネットになければなりません。</p>
      </li><li>
        <p>[<b>Subnet (サブネット)</b>] リソースタイプを VPC 内に追加して、その名前を <code class="code">PublicSubnet</code> に変更します。</p>
        <p>サブネットを使用して、他の AWS リソースと関連付ける Amazon EC2 インスタンスなどの VPC の IP アドレスの範囲を割り当てます。</p>
        <p>VPC 内にサブネットを追加すると、AWS CloudFormation デザイナーは自動的に VPC とサブネットを関連付けます。この関連付けはコンテナモデルで、コンテナ内のリソースがコンテナリソースに自動的に関連付けられます。</p>
      </li><li>
        <p>[<b>Instance (インスタンス)</b>] リソースタイプを <code class="code">PublicSubnet</code> リソース内に追加して、その名前を <code class="code">WebServerInstance</code> に変更します。</p>
        <p>インスタンスは、基本的なウェブサイトをホストする仮想コンピューティング環境です。サブネットおよび VPC の動作方法と同様に、サブネットにインスタンスを追加すると、サブネットがインスタンスに自動的に関連付けられます。</p>
      </li><li>
        <p>[<b>SecurityGroup</b>] リソースタイプを VPC 内に追加して、その名前を <code class="code">WebServerSecurityGroup</code> に変更します。</p>
        <p>セキュリティグループは、ウェブサーバーインスタンスのインバウンドトラフィックとアウトバウンドトラフィックを制御する仮想ファイアウォールです。また、VPC のインスタンスにも必要です。ここでは、ウェブサーバーのインスタンスとこのセキュリティグループを関連付ける必要があります。これは、後でインスタンスのプロパティを指定するときに行います。</p>
      </li><li>
        <p>[<b>InternetGateway</b>] リソースタイプを VPC 外のいずれかの場所に追加して、その名前を <code class="code">InternetGateway</code> に変更します。</p>
        <p>インターネットゲートウェイは、VPC とインターネット内にあるインスタンス間の通信を有効にします。インターネットゲートウェイがないと、他のウェブサイトにアクセスできなくなります。</p>
        <p>VPC 内でインターネットゲートウェイをドラッグすることができますが、これは VPC との連携は作成しません。インターネットゲートウェイはコンテナモデルには従っていません。代わりに、次のステップで説明するインターネットゲートウェイから VPC への接続をドラッグする必要があります。</p>
      </li><li>
        <p><code class="code">InternetGateway</code> リソースと <code class="code">VPC</code> リソース間の接続を作成します。</p>
        <ol><li>
            <p><code class="code">InternetGateway</code> リソースで、インターネットゲートウェイアタッチメント (<code class="code">AWS::EC2::VPCGatewayAttachment</code>) の上にマウスを移動します。</p>
          </li><li>
            <p>VPC への接続をドラッグします。</p>
            <p>有効な対象リソースの境界の色が変わります。この場合、VPC は唯一の有効な対象リソースです。この接続は、VPC とインターネットゲートウェイとを関連付けるアタッチメントリソースを作成します。</p>
          </li></ol>
      </li><li>
        <p>次に、ルートテーブルとルートを追加して、サブネット内からのネットワークトラフィックをルーティングする方法を指定する必要があります。VPC 内に [<b>RouteTable</b>] を追加して、その名前を <code class="code">PublicRouteTable</code> に変更します。</p>
        <p>これにより、VPC に新しいルートテーブルが関連付けられます。</p>
      </li><li>
        <p>ルーティングルールをルートテーブルに追加するには、[<b>Route (ルート)</b>] リソースタイプを <code class="code">PublicRouteTable</code> リソース内に追加し、その名前を <code class="code">PublicRoute</code> に変更します。</p>
        <p>ルートを使用して、トラフィックをルーティングする場所を指定します。</p>
      </li><li>
        <p>パブリックルートでは、インターネットゲートウェイを宛先とします。<code class="code">GatewayId</code> を使用して <code class="code">PublicRoute</code> リソースからインターネットのゲートウェイへの接続を作成します。これは、インターネットゲートウェイと VPC 間の接続で作成した方法と同様です。</p>
        <p>CloudFormation は、インターネットゲートウェイを VPC と関連付けなければ、インターネットゲートウェイをルートと関連付けることができません。これは、次のステップで説明するように、インターネットゲートウェイ - VPC アタッチメントに明示的な依存性を作成する必要があることを意味します。詳細については、「<a href="./aws-attribute-dependson.html">DependsOn 属性</a>」を参照してください。</p>
      </li><li>
        <p><code class="code">PublicRoute</code> リソースとインターネットゲートウェイ - VPC アタッチメント間に明示依存性を作成します。</p>
        <ol><li>
            <p><code class="code">PublicRoute</code> リソースで、[<b>DependsOn</b>] のドット上にマウスを移動します。</p>
          </li><li>
            <p>インターネットゲートウェイ - VPC アタッチメント (<code class="code">AWS::EC2::VPCGatewayAttachment</code>) に接続をドラッグします。</p>
            <p><code class="code">DependsOn</code> 接続を介して、AWS CloudFormation デザイナー は発信元リソースが対象リソースに依存する依存関係 (<code class="code">DependsOn</code> 属性) を作成します。この場合、AWS CloudFormation デザイナーは <code class="code">DependsOn</code> 属性を <code class="code">PublicRoute</code> リソースに追加し、依存性として gateway-VPC アタッチメントを指定します。</p>
          </li></ol>
      </li><li>
        <p><code class="code">WebServerInstance</code> リソースから <code class="code">PublicRoute</code> リソースへの別の依存性を作成します。</p>
        <p><code class="code">WebServerInstance</code> リソースは、パブリックルートに依存してトラフィックをインターネットにルーティングします。パブリックルートがない場合、インスタンスは信号を送信して (cfn-signal ヘルパースクリプトを使用)、CloudFormation に対してインスタンス構成とアプリケーションのデプロイが完了したことを通知できません。</p>
      </li><li>
        <p>ルートテーブルとサブネットを関連付けるには、<code class="code">PublicRouteTable</code> リソースから <code class="code">PublicSubnet</code> リソースへ接続をドラッグしてください。</p>
        <p>これで、パブリックサブネットはパブリックルートテーブルを使用してトラフィックをルーティングできるようになります。</p>
      </li><li>
        <p>[AWS CloudFormation デザイナー] ツールバーで、<b>[ファイル]</b> メニュー (ファイルアイコン) を使用してテンプレートをローカルへ保存します。</p>
        <p>AWS CloudFormation デザイナー は、ハードドライブにテンプレートを保存します。後でテンプレートを使用して、スタックを作成できます。変更内容が失われないよう、テンプレートを定期的に保存することをお勧めします。</p>
      </li></ol></div>
    <p>このステップでは、テンプレートに 7 つのリソースを追加して、その論理 ID とや一般名を変更しました。また、ほとんどのリソースにビジュアルな接続を確立して、関連付けや依存性を作成しました。ただし、このテンプレートにスタックを作成する前に、いくつかの接続 (セキュリティグループとインスタンスの関連付けなど) を作成して、各リソースにプロパティを指定する必要があります。次のステップでは、AWS CloudFormation デザイナーの統合されたエディタを使用して、入力パラメータのようなテンプレートの他のコンポーネントを変更する方法について説明します。</p>
  <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">ステップ 2: のパラメーター、マッピング、出力の追加</h2>
    
    <p>リソースプロパティを指定する前に、他のテンプレートコンポーネントを追加して、複数の環境でテンプレートを簡単に再利用する必要があります。このステップでは、AWS CloudFormation デザイナー 統合されたエディタを使用してパラメータ、マッピング、出力を追加します。次に、リソースプロパティを指定するときに、これらのパラメーターやマッピングを参照できます。チュートリアルでは、統合されたエディタ にコピーして貼り付けられるサンプル JSON および YAML が提供されます。</p>
    <div class="procedure"><h6>パラメーターを追加するには</h6><p>パラメーターは、スタックを作成するときに指定する入力値です。これらは、テンプレートにハードコードされた値がない状態で値を渡すのに役立ちます。たとえば、ウェブサーバーのインスタンスタイプをテンプレートでハードコーディングする必要はありません。代わりに、スタックを作成するときに、パラメーターを使用してインスタンスタイプを指定できます。このように、同じテンプレートを使用して、異なるインスタンスタイプを持つ複数のウェブサーバーを作成できます。詳細については、「<a href="./parameters-section-structure.html">パラメータ</a>」を参照してください。</p><ol><li>
        <p>AWS CloudFormation デザイナー キャンバスのオープンエリアをクリックします。</p>
        <p>選択した内容により、統合されたエディタ は、編集可能なテンプレートレベルまたはリソースレベルのコンポーネントを表示します。テンプレートレベルでは、テンプレートパラメーター、マッピング、出力など、テンプレートのリソースセクション以外のすべてのセクションを編集できます。リソースレベルでは、リソースプロパティと属性を編集できます。</p>
        <p>キャンバスのオープンエリアをクリックすると、テンプレートレベルのコンポーネントを編集することができます。リソースレベルのコンポーネントを編集するには、リソースを選択します。</p>
      </li><li>
        <p>統合されたエディタペインで、<b>[Components]</b> (コンポーネント) ビューの <b>[Parameters]</b> (パラメータ) タブを選択します。</p>
      </li><li>
        <p>次のスニペットのパラメーターをコピーして、統合されたエディタ に貼り付けます。</p>
        <p>次の JSON スニペットは、ウェブサーバーのインスタンスタイプ、ウェブサーバーへの SSH アクセスのための Amazon EC2 キーペアの名前、SSH を使用してウェブサーバーにアクセスするのに使用できる IP アドレス範囲を指定するためのパラメータを追加します。</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "InstanceType" : <span>{</span>
      "Description" : "WebServer EC2 instance type",
      "Type" : "String",
      "Default" : "t2.small",
      "AllowedValues" : [ 
        "t1.micro", 
        "t2.nano", 
        "t2.micro", 
        "t2.small", 
        "t2.medium", 
        "t2.large", 
        "m1.small", 
        "m1.medium", 
        "m1.large", 
        "m1.xlarge", 
        "m2.xlarge", 
        "m2.2xlarge", 
        "m2.4xlarge", 
        "m3.medium", 
        "m3.large", 
        "m3.xlarge", 
        "m3.2xlarge", 
        "m4.large", 
        "m4.xlarge", 
        "m4.2xlarge", 
        "m4.4xlarge", 
        "m4.10xlarge", 
        "c1.medium", 
        "c1.xlarge", 
        "c3.large", 
        "c3.xlarge", 
        "c3.2xlarge", 
        "c3.4xlarge", 
        "c3.8xlarge", 
        "c4.large", 
        "c4.xlarge", 
        "c4.2xlarge", 
        "c4.4xlarge", 
        "c4.8xlarge", 
        "g2.2xlarge", 
        "g2.8xlarge", 
        "r3.large", 
        "r3.xlarge", 
        "r3.2xlarge", 
        "r3.4xlarge", 
        "r3.8xlarge", 
        "i2.xlarge", 
        "i2.2xlarge", 
        "i2.4xlarge", 
        "i2.8xlarge", 
        "d2.xlarge", 
        "d2.2xlarge", 
        "d2.4xlarge", 
        "d2.8xlarge", 
        "hi1.4xlarge", 
        "hs1.8xlarge", 
        "cr1.8xlarge", 
        "cc2.8xlarge", 
        "cg1.4xlarge"
      ],
      "ConstraintDescription" : "must be a valid EC2 instance type."
    },
    "KeyName": <span>{</span>
      "Description": "Name of an EC2 KeyPair to enable SSH access to the instance.",
      "Type": "AWS::EC2::KeyPair::KeyName",
      "ConstraintDescription": "must be the name of an existing EC2 KeyPair."
    },
    "SSHLocation": <span>{</span>
      "Description": " The IP address range that can be used to access the web server using SSH.",
      "Type": "String",
      "MinLength": "9",
      "MaxLength": "18",
      "Default": "0.0.0.0/0",
      "AllowedPattern": "(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})/(\\d<span>{</span>1,2})",
      "ConstraintDescription": "must be a valid IP CIDR range of the form x.x.x.x/x."
    }
  }
}</code></pre>

        <p>YAML での同じスニペットを次に示します。</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  InstanceType:
    Description: WebServer EC2 instance type
    Type: String
    Default: t2.small
    AllowedValues:
      - t1.micro
      - t2.nano
      - t2.micro
      - t2.small
      - t2.medium
      - t2.large
      - m1.small
      - m1.medium
      - m1.large
      - m1.xlarge
      - m2.xlarge
      - m2.2xlarge
      - m2.4xlarge
      - m3.medium
      - m3.large
      - m3.xlarge
      - m3.2xlarge
      - m4.large
      - m4.xlarge
      - m4.2xlarge
      - m4.4xlarge
      - m4.10xlarge
      - c1.medium
      - c1.xlarge
      - c3.large
      - c3.xlarge
      - c3.2xlarge
      - c3.4xlarge
      - c3.8xlarge
      - c4.large
      - c4.xlarge
      - c4.2xlarge
      - c4.4xlarge
      - c4.8xlarge
      - g2.2xlarge
      - g2.8xlarge
      - r3.large
      - r3.xlarge
      - r3.2xlarge
      - r3.4xlarge
      - r3.8xlarge
      - i2.xlarge
      - i2.2xlarge
      - i2.4xlarge
      - i2.8xlarge
      - d2.xlarge
      - d2.2xlarge
      - d2.4xlarge
      - d2.8xlarge
      - hi1.4xlarge
      - hs1.8xlarge
      - cr1.8xlarge
      - cc2.8xlarge
      - cg1.4xlarge
    ConstraintDescription: must be a valid EC2 instance type.
  KeyName:
    Description: Name of an EC2 KeyPair to enable SSH access to the instance.
    Type: 'AWS::EC2::KeyPair::KeyName'
    ConstraintDescription: must be the name of an existing EC2 KeyPair.
  SSHLocation:
    Description: ' The IP address range that can be used to access the web server using SSH.'
    Type: String
    MinLength: '9'
    MaxLength: '18'
    Default: 0.0.0.0/0
    AllowedPattern: '(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})/(\d<span>{</span>1,2})'
    ConstraintDescription: must be a valid IP CIDR range of the form x.x.x.x/x.</code></pre>
      </li></ol></div>
    <div class="procedure"><h6>マッピングを追加するには</h6><p>マッピングは、名前と値のペアに関連付けられる一連のキーです。これらは、入力パラメーター値に基づいて値を指定する場合に役立ちます。このウォークスルーでは、マッピングを使用して、インスタンスタイプに基づく EC2 インスタンスの AMI ID、およびスタックを作成するリージョンを指定します。詳細については、「<a href="./mappings-section-structure.html">Mappings</a>」を参照してください。</p><ol><li>
        <p>統合されたエディタ ペインで、[<b>Mappings (マッピング)</b>] タブを選択します。</p>
      </li><li>
        <p>以下の JSON マッピングをコピーし、統合されたエディタ に貼り付けます。</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>      
  "Mappings" : <span>{</span>
    "AWSInstanceType2Arch" : <span>{</span>
      "t1.micro"    : <span>{</span> "Arch" : "HVM64"  },
      "t2.nano"     : <span>{</span> "Arch" : "HVM64"  },
      "t2.micro"    : <span>{</span> "Arch" : "HVM64"  },
      "t2.small"    : <span>{</span> "Arch" : "HVM64"  },
      "t2.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "t2.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m1.small"    : <span>{</span> "Arch" : "HVM64"  },
      "m1.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "m1.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m1.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m2.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m2.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m2.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m3.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "m3.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m3.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m3.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m4.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m4.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m4.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m4.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m4.10xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "c1.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "c1.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "c3.large"    : <span>{</span> "Arch" : "HVM64"  },
      "c3.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "c3.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c3.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c3.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c4.large"    : <span>{</span> "Arch" : "HVM64"  },
      "c4.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "c4.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c4.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c4.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "g2.2xlarge"  : <span>{</span> "Arch" : "HVMG2"  },
      "g2.8xlarge"  : <span>{</span> "Arch" : "HVMG2"  },
      "r3.large"    : <span>{</span> "Arch" : "HVM64"  },
      "r3.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "r3.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "r3.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "r3.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "i2.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "i2.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "i2.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "i2.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "d2.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "d2.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "d2.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "d2.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "hi1.4xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "hs1.8xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "cr1.8xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "cc2.8xlarge" : <span>{</span> "Arch" : "HVM64"  }
    },
    "AWSRegionArch2AMI" : <span>{</span>
      "us-east-1"        : <span>{</span>"HVM64" : "ami-0ff8a91507f77f867", "HVMG2" : "ami-0a584ac55a7631c0c"},
      "us-west-2"        : <span>{</span>"HVM64" : "ami-a0cfeed8", "HVMG2" : "ami-0e09505bc235aa82d"},
      "us-west-1"        : <span>{</span>"HVM64" : "ami-0bdb828fd58c52235", "HVMG2" : "ami-066ee5fd4a9ef77f1"},
      "eu-west-1"        : <span>{</span>"HVM64" : "ami-047bb4163c506cd98", "HVMG2" : "ami-0a7c483d527806435"},
      "eu-west-2"        : <span>{</span>"HVM64" : "ami-f976839e", "HVMG2" : "NOT_SUPPORTED"},
      "eu-west-3"        : <span>{</span>"HVM64" : "ami-0ebc281c20e89ba4b", "HVMG2" : "NOT_SUPPORTED"},
      "eu-central-1"     : <span>{</span>"HVM64" : "ami-0233214e13e500f77", "HVMG2" : "ami-06223d46a6d0661c7"},
      "ap-northeast-1"   : <span>{</span>"HVM64" : "ami-06cd52961ce9f0d85", "HVMG2" : "ami-053cdd503598e4a9d"},
      "ap-northeast-2"   : <span>{</span>"HVM64" : "ami-0a10b2721688ce9d2", "HVMG2" : "NOT_SUPPORTED"},
      "ap-northeast-3"   : <span>{</span>"HVM64" : "ami-0d98120a9fb693f07", "HVMG2" : "NOT_SUPPORTED"},
      "ap-southeast-1"   : <span>{</span>"HVM64" : "ami-08569b978cc4dfa10", "HVMG2" : "ami-0be9df32ae9f92309"},
      "ap-southeast-2"   : <span>{</span>"HVM64" : "ami-09b42976632b27e9b", "HVMG2" : "ami-0a9ce9fecc3d1daf8"},
      "ap-south-1"       : <span>{</span>"HVM64" : "ami-0912f71e06545ad88", "HVMG2" : "ami-097b15e89dbdcfcf4"},
      "us-east-2"        : <span>{</span>"HVM64" : "ami-0b59bfac6be064b78", "HVMG2" : "NOT_SUPPORTED"},
      "ca-central-1"     : <span>{</span>"HVM64" : "ami-0b18956f", "HVMG2" : "NOT_SUPPORTED"},
      "sa-east-1"        : <span>{</span>"HVM64" : "ami-07b14488da8ea02a0", "HVMG2" : "NOT_SUPPORTED"},
      "cn-north-1"       : <span>{</span>"HVM64" : "ami-0a4eaf6c4454eda75", "HVMG2" : "NOT_SUPPORTED"},
      "cn-northwest-1"   : <span>{</span>"HVM64" : "ami-6b6a7d09", "HVMG2" : "NOT_SUPPORTED"}
    }
  }
}</code></pre>

        <p>YAML での同じマッピングを次に示します。</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Mappings:
  AWSInstanceType2Arch:
    t1.micro:
      Arch: HVM64
    t2.nano:
      Arch: HVM64
    t2.micro:
      Arch: HVM64
    t2.small:
      Arch: HVM64
    t2.medium:
      Arch: HVM64
    t2.large:
      Arch: HVM64
    m1.small:
      Arch: HVM64
    m1.medium:
      Arch: HVM64
    m1.large:
      Arch: HVM64
    m1.xlarge:
      Arch: HVM64
    m2.xlarge:
      Arch: HVM64
    m2.2xlarge:
      Arch: HVM64
    m2.4xlarge:
      Arch: HVM64
    m3.medium:
      Arch: HVM64
    m3.large:
      Arch: HVM64
    m3.xlarge:
      Arch: HVM64
    m3.2xlarge:
      Arch: HVM64
    m4.large:
      Arch: HVM64
    m4.xlarge:
      Arch: HVM64
    m4.2xlarge:
      Arch: HVM64
    m4.4xlarge:
      Arch: HVM64
    m4.10xlarge:
      Arch: HVM64
    c1.medium:
      Arch: HVM64
    c1.xlarge:
      Arch: HVM64
    c3.large:
      Arch: HVM64
    c3.xlarge:
      Arch: HVM64
    c3.2xlarge:
      Arch: HVM64
    c3.4xlarge:
      Arch: HVM64
    c3.8xlarge:
      Arch: HVM64
    c4.large:
      Arch: HVM64
    c4.xlarge:
      Arch: HVM64
    c4.2xlarge:
      Arch: HVM64
    c4.4xlarge:
      Arch: HVM64
    c4.8xlarge:
      Arch: HVM64
    g2.2xlarge:
      Arch: HVMG2
    g2.8xlarge:
      Arch: HVMG2
    r3.large:
      Arch: HVM64
    r3.xlarge:
      Arch: HVM64
    r3.2xlarge:
      Arch: HVM64
    r3.4xlarge:
      Arch: HVM64
    r3.8xlarge:
      Arch: HVM64
    i2.xlarge:
      Arch: HVM64
    i2.2xlarge:
      Arch: HVM64
    i2.4xlarge:
      Arch: HVM64
    i2.8xlarge:
      Arch: HVM64
    d2.xlarge:
      Arch: HVM64
    d2.2xlarge:
      Arch: HVM64
    d2.4xlarge:
      Arch: HVM64
    d2.8xlarge:
      Arch: HVM64
    hi1.4xlarge:
      Arch: HVM64
    hs1.8xlarge:
      Arch: HVM64
    cr1.8xlarge:
      Arch: HVM64
    cc2.8xlarge:
      Arch: HVM64
  AWSRegionArch2AMI:
    us-east-1:
      HVM64: ami-0ff8a91507f77f867
      HVMG2: ami-0a584ac55a7631c0c
    us-west-2:
      HVM64: ami-a0cfeed8
      HVMG2: ami-0e09505bc235aa82d
    us-west-1:
      HVM64: ami-0bdb828fd58c52235
      HVMG2: ami-066ee5fd4a9ef77f1
    eu-west-1:
      HVM64: ami-047bb4163c506cd98
      HVMG2: ami-0a7c483d527806435
    eu-west-2:
      HVM64: ami-f976839e
      HVMG2: NOT_SUPPORTED
    eu-west-3:
      HVM64: ami-0ebc281c20e89ba4b
      HVMG2: NOT_SUPPORTED
    eu-central-1:
      HVM64: ami-0233214e13e500f77
      HVMG2: ami-06223d46a6d0661c7
    ap-northeast-1:
      HVM64: ami-06cd52961ce9f0d85
      HVMG2: ami-053cdd503598e4a9d
    ap-northeast-2:
      HVM64: ami-0a10b2721688ce9d2
      HVMG2: NOT_SUPPORTED
    ap-northeast-3:
      HVM64: ami-0d98120a9fb693f07
      HVMG2: NOT_SUPPORTED
    ap-southeast-1:
      HVM64: ami-08569b978cc4dfa10
      HVMG2: ami-0be9df32ae9f92309
    ap-southeast-2:
      HVM64: ami-09b42976632b27e9b
      HVMG2: ami-0a9ce9fecc3d1daf8
    ap-south-1:
      HVM64: ami-0912f71e06545ad88
      HVMG2: ami-097b15e89dbdcfcf4
    us-east-2:
      HVM64: ami-0b59bfac6be064b78
      HVMG2: NOT_SUPPORTED
    ca-central-1:
      HVM64: ami-0b18956f
      HVMG2: NOT_SUPPORTED
    sa-east-1:
      HVM64: ami-07b14488da8ea02a0
      HVMG2: NOT_SUPPORTED
    cn-north-1:
      HVM64: ami-0a4eaf6c4454eda75
      HVMG2: NOT_SUPPORTED
    cn-northwest-1:
      HVM64: ami-6b6a7d09
      HVMG2: NOT_SUPPORTED</code></pre>
      </li></ol></div>
    <div class="procedure"><h6>出力を追加するには</h6><p>出力は、<code class="code">describe
          stacks</code> API 呼び出し、または CloudFormation コンソールスタックの [<b>Outputs</b>] (出力) タブで使用できる値を宣言します。このウォークスルーでは、作成後に簡単に自分のウェブサイトを見られるように、ウェブサイトの URL を出力します。詳細については、「<a href="./outputs-section-structure.html">出力</a>」を参照してください。</p><ol><li>
        <p>統合されたエディタ ペインで、[<b>出力</b>] タブを選択します。</p>
      </li><li>
        <p>以下の JSON 出力をコピーし、統合されたエディタ に貼り付けます。</p>
        <p>出力は <code class="code">Fn::GetAtt</code> 組込み関数を使用して、ウェブサーバーインスタンスのパブリック IP を取得します。</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Outputs": <span>{</span>
    "URL": <span>{</span>
      "Value": <span>{</span>
        "Fn::Join": [
          "",
          [
            "http://",
            <span>{</span>
              "Fn::GetAtt": [
                "WebServerInstance",
                "PublicIp"
              ]
            }
          ]
        ]
      },
      "Description": "Newly created application URL"
    }
  }
}</code></pre>

        <p>YAML での同じ出力を次に示します。</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Outputs:
  URL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - WebServerInstance
          - PublicIp
    Description: Newly created application URL</code></pre>
      </li><li>
        <p>変更内容を失わないように、テンプレートを再度保存します。前のセクションで作成した同じファイルに、変更内容を安全に保存できます。</p>
      </li></ol></div>
    <p>これで、テンプレートパラメーター、マッピングおよび出力が用意され、リソースプロパティを指定できるようになりました。</p>
  <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">ステップ 3: リソースプロパティを指定する</h2>
    
    <p>多くのリソースで、ウェブサーバーを使用するためのインスタンスタイプのような、構成を定義するプロパティが必要です。前のステップで行ったのと同様に、AWS CloudFormation デザイナー 統合されたエディタを使用してリソースプロパティを指定します。コピーして 統合されたエディタ に貼り付けられるサンプルの JSON および YAML を提供します。</p>
    <div class="procedure"><h6>リソースプロパティを指定するには</h6><ol><li>
        <p>AWS CloudFormation デザイナーキャンバスで、<code class="code">VPC</code> リソースを選択します。</p>
        <p>統合されたエディタ は、リソースプロパティや属性など、編集可能なリソースレベルのコンポーネントを表示します。</p>
      </li><li>
        <p>[統合されたエディタ] ペインで、[<b>Properties (プロパティ)</b>] タブを選択します。</p>
      </li><li>
        <p>次の JSON スニペットをコピーして、統合されたエディタ の [<b>Properties (プロパティ)</b>] 括弧 (<code class="code"><span>{</span>}</code>) の間に貼り付けます。</p>
        <p>この例では、VPC の DNS 設定および CIDR ブロックを指定します。</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "EnableDnsSupport": "true",
        "EnableDnsHostnames": "true",
        "CidrBlock": "10.0.0.0/16"</code></pre>
        <p>YAML の場合は、<code class="code">Properties:</code> の後に新しい行を入力し、以下のスニペットを貼り付けます。</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      EnableDnsSupport: 'true'
      EnableDnsHostnames: 'true'
      CidrBlock: 10.0.0.0/16</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>効率性を考慮して、コピー &amp; ペーストが可能な JSON および YAML スニペットを提供します。ただし、テキストエディタには、手動で各プロパティを指定するのに使用できる、自動完了機能があります。詳細については、「<a href="./working-with-templates-cfn-designer-json-editor.html">統合された JSON および YAML エディタ</a>」を参照してください。</p></div></div>
      </li><li>
        <p>次のリソースでこのプロセスを繰り返します。</p><div class="variablelist">
             
             
             
             
          <dl>
              <dt><span class="term"><code class="code">PublicSubnet</code></span></dt>
              <dd>
                <p>VPC ID プロパティの後に、次の CIDR ブロックプロパティを追加します。AWS CloudFormationVPC 内でサブネットがドラッグされると、デザイナーが自動的に VPC ID のプロパティを追加しました。</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>AWS CloudFormation デザイナーが自動的に作成した、他のいくつかの関連付けを確認できます。太字になっている、新しいプロパティを追加します。</p></div></div>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "VpcId": <span>{</span>
          "Ref": "VPC"
        },
        <b>"CidrBlock": "10.0.0.0/24"</b></code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      VpcId: !Ref VPC
      <b>CidrBlock: 10.0.0.0/24</b></code></pre>
              </dd>
             
              <dt><span class="term"><code class="code">PublicRoute</code></span></dt>
              <dd>
                <p>すべてのトラフィックをインターネットゲートウェイへ誘導する、次の送信先 CIDR ブロックプロパティを追加します。</p>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">        <b>"DestinationCidrBlock": "0.0.0.0/0",</b>
        "RouteTableId": <span>{</span>
          "Ref": "PublicRouteTable"
        },        
        "GatewayId": <span>{</span>
          "Ref": "InternetGateway"
        }</code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      <b>DestinationCidrBlock: 0.0.0.0/0</b>
      RouteTableId: !Ref PublicRouteTable
      GatewayId: !Ref InternetGateway</code></pre>
              </dd>
             
              <dt><span class="term"><code class="code">WebServerSecurityGroup</code></span></dt>
              <dd>
                <p>どのトラフィックがウェブサーバーインスタンスに到達できるかを決定する、次のインバウンドルールを追加します。このルールは、スタックの作成時にパラメーター値として指定する、すべての HTTP トラフィックと特定の SSH トラフィックを許可します。</p>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "VpcId": <span>{</span>
          "Ref": "VPC"
        }<b>,
        "GroupDescription" : "Allow access from HTTP and SSH traffic",
        "SecurityGroupIngress": [
          <span>{</span>
            "IpProtocol": "tcp",
            "FromPort": 80,
            "ToPort": 80,
            "CidrIp": "0.0.0.0/0"
          },
          <span>{</span>
            "IpProtocol": "tcp",
            "FromPort": 22,
            "ToPort": 22,
            "CidrIp": <span>{</span>
              "Ref": "SSHLocation"
            }
          }
        ]</b></code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      VpcId: !Ref VPC
      <b>GroupDescription: Allow access from HTTP and SSH traffic
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 80
          ToPort: 80
          CidrIp: 0.0.0.0/0
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: !Ref SSHLocation</b></code></pre>
              </dd>
             
              <dt><span class="term"><code class="code">WebServerInstance</code></span></dt>
              <dd>
                <p>ウェブサーバーインスタンスの多数のプロパティを指定する必要がありますので、デモのためにそのいくつかを強調表示しています。<code class="code">InstanceType</code> プロパティと <code class="code">ImageId</code> プロパティは、前のセクションで指定したパラメーターやマッピング値を使用します。スタックの作成時に、パラメーター値としてインスタンスタイプを指定します。<code class="code">ImageId</code> 値は、スタックのリージョンと指定したインスタンスタイプに基づくマッピングです。</p>
                <p><code class="code">NetworkInterfaces</code> プロパティは、ウェブサーバーのインスタンスで使用できるネットワーク設定を指定します。このプロパティで、インスタンスにセキュリティグループとサブネットを関連付けることができます。AWS CloudFormation デザイナー は <code class="code">SubnetId</code> プロパティを使用してサブネットとインスタンスを関連付けますが、<code class="code">NetworkInterfaces</code> を使用する必要があります。それがウェブサーバーにパブリック IP を付与する唯一の方法だからです。<code class="code">NetworkInterfaces</code> プロパティを指定すると、そのプロパティ内でサブネットとセキュリティグループを指定する必要があります。</p>
                <p><code class="code">UserData</code> プロパティで、インスタンスが起動して実行されたら実行する、構成スクリプトを指定します。すべての構成情報は、次のステップで追加するインスタンスのメタデータに定義されます。</p>
                <p>すべてのプロパティを次のスニペットに置き換えます:</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>既存のプロパティにこのスニペットを追加しないでください。</p></div></div>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><b>       "InstanceType": <span>{</span>
          "Ref": "InstanceType"
        },
        "ImageId": <span>{</span>
          "Fn::FindInMap": [
            "AWSRegionArch2AMI",
            <span>{</span>
              "Ref": "AWS::Region"
            },
            <span>{</span>
              "Fn::FindInMap": [
                "AWSInstanceType2Arch",
                <span>{</span>
                  "Ref": "InstanceType"
                },
                "Arch"
              ]
            }
          ]
        },
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "NetworkInterfaces": [
          <span>{</span>
            "GroupSet": [
              <span>{</span>
                "Ref": "WebServerSecurityGroup"
              }
            ],
            "AssociatePublicIpAddress": "true",
            "DeviceIndex": "0",
            "DeleteOnTermination": "true",
            "SubnetId": <span>{</span>
              "Ref": "PublicSubnet"
            }
          }
        ],
        "UserData": <span>{</span>
          "Fn::Base64": <span>{</span>
            "Fn::Join": [
              "",
              [
                "#!/bin/bash -xe\n",
                "yum install -y aws-cfn-bootstrap\n",
                "# Install the files and packages from the metadata\n",
                "/opt/aws/bin/cfn-init -v ",
                "         --stack ",
                <span>{</span>
                  "Ref": "AWS::StackName"
                },
                "         --resource WebServerInstance ",
                "         --configsets All ",
                "         --region ",
                <span>{</span>
                  "Ref": "AWS::Region"
                },
                "\n",
                "# Signal the status from cfn-init\n",
                "/opt/aws/bin/cfn-signal -e $? ",
                "         --stack ",
                <span>{</span>
                  "Ref": "AWS::StackName"
                },
                "         --resource WebServerInstance ",
                "         --region ",
                <span>{</span>
                  "Ref": "AWS::Region"
                },
                "\n"
              ]
            ]
          }
        }</b></code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml "><b>      InstanceType: !Ref InstanceType
      ImageId: !FindInMap 
        - AWSRegionArch2AMI
        - !Ref 'AWS::Region'
        - !FindInMap 
          - AWSInstanceType2Arch
          - !Ref InstanceType
          - Arch
      KeyName: !Ref KeyName
      NetworkInterfaces:
        - GroupSet:
            - !Ref WebServerSecurityGroup
          AssociatePublicIpAddress: 'true'
          DeviceIndex: '0'
          DeleteOnTermination: 'true'
          SubnetId: !Ref PublicSubnet
      UserData: !Base64 
        'Fn::Join':
          - ''
          - - |
              #!/bin/bash -xe
            - |
              yum install -y aws-cfn-bootstrap
            - |
              # Install the files and packages from the metadata
            - '/opt/aws/bin/cfn-init -v '
            - '         --stack '
            - !Ref 'AWS::StackName'
            - '         --resource WebServerInstance '
            - '         --configsets All '
            - '         --region '
            - !Ref 'AWS::Region'
            - |+

            - |
              # Signal the status from cfn-init
            - '/opt/aws/bin/cfn-signal -e $? '
            - '         --stack '
            - !Ref 'AWS::StackName'
            - '         --resource WebServerInstance '
            - '         --region '
            - !Ref 'AWS::Region'
            - |+</b></code></pre>
              </dd>
            </dl></div>
      </li><li>
        <p>ウェブサーバー構成メタデータを <code class="code">WebServerInstance</code> リソースに追加します。</p>
        <ol><li>
            <p><code class="code">WebServerInstance</code> リソースを選択し、次に 統合されたエディタ ペインの [<b>Metadata (メタデータ)</b>] タブを選択します。</p>
          </li><li>
            <p><em>JSON でテンプレートを記述する場合</em>: <code class="code">Metadata</code> の中括弧 (<code class="code"><span>{</span>}</code>) の中と、<code class="code">AWS::CloudFormation::Designer</code> の閉じ括弧の後に、カンマ (<code class="code">,</code>) を追加します。</p>
          </li><li>
            <p><code class="code">AWS::CloudFormation::Designer</code> プロパティの後に次のスニペットを追加します。これは、cfn-init ヘルパースクリプトにウェブサーバーの起動と基本的なウェブページの作成を命令します。</p>
            <p>JSON</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "AWS::CloudFormation::Init" : <span>{</span>
          "configSets" : <span>{</span>
            "All" : [ "ConfigureSampleApp" ]
          },
          "ConfigureSampleApp" : <span>{</span>
            "packages" : <span>{</span>
              "yum" : <span>{</span>
                "httpd" : []
              }
            },
            "files" : <span>{</span>
              "/var/www/html/index.html" : <span>{</span>
                "content" : <span>{</span> "Fn::Join" : ["\n", [
                  "&lt;h1&gt;Congratulations, you have successfully launched the AWS CloudFormation sample.&lt;/h1&gt;"
                ]]},
                "mode"    : "000644",
                "owner"   : "root",
                "group"   : "root"
              }
            },
            "services" : <span>{</span>
              "sysvinit" : <span>{</span>
                "httpd"    : <span>{</span> "enabled" : "true", "ensureRunning" : "true" }
              }
            }
          }
        }</code></pre>
            <p>YAML</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      'AWS::CloudFormation::Init':
        configSets:
          All:
            - ConfigureSampleApp
        ConfigureSampleApp:
          packages:
            yum:
              httpd: []
          files:
            /var/www/html/index.html:
              content: !Join 
                - |+

                - - &gt;-
                    &lt;h1&gt;Congratulations, you have successfully launched the AWS
                    CloudFormation sample.&lt;/h1&gt;
              mode: '000644'
              owner: root
              group: root
          services:
            sysvinit:
              httpd:
                enabled: 'true'
                ensureRunning: 'true'</code></pre>
          </li></ol>
      </li><li>
        <p>[AWS CloudFormation デザイナー] ツールバーで、<b>[テンプレートを検証]</b> (<span class="inlinemediaobject">
               
                <img src="images/designer-validate-icon.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
               
            </span>) を選択して、テンプレートに構文エラーがないか確認します。</p>
        <p>[<b>Messages (メッセージ)</b>] ペインでエラーを表示して修正し、テンプレートを再度検証します。エラーが表示されない場合、テンプレートの構文は有効です。</p>
      </li><li>
        <p>行ったすべての変更を保持するために、完成したテンプレートを保存します。</p>
      </li></ol></div>
    <p>これで、完全な CloudFormation テンプレートが完成し、VPC 内で基本的なウェブサーバーを作成するのに使用できます。テンプレートを作成するには、AWS CloudFormation デザイナーキャンバスペインを使用して、最初にテンプレートリソースを追加して接続します。次に、統合されたエディタ を使用して、その他のテンプレートコンポーネントを追加し、リソースプロパティを指定します。次のステップでは、このテンプレートを使用してスタックを作成します。</p>
  <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">ステップ 4: リソースのプロビジョニング</h2>
    
    <p>スタックを作成するには、AWS CloudFormation デザイナーから CloudFormation <b>[Create Stack Wizard]</b> (スタック作成ウィザード) を起動します。前のステップで作成したテンプレートを使用して、CloudFormation スタックを作成します。CloudFormation がすべてのリソースのプロビジョニングを行った後で、基本的なウェブサイトを起動して実行します。</p>
    <div class="procedure"><h6> スタックを作成するには</h6><ol><li>
        <p>[AWS CloudFormation デザイナー] ツールバーで、<b>[スタックを作成]</b> (雲のアイコン) を選択します。</p>
        <p>AWS CloudFormation デザイナーは S3 バケットで開かれたテンプレートを保存し、CloudFormation <b>[Create Stack Wizard]</b> (スタック作成ウィザード) を起動します。CloudFormation は、テンプレートをアップロードするたびに作成される同じ S3 バケットを使用します。</p>
      </li><li>
        <p>CloudFormation が自動的にテンプレート URL を入力します。[<b>Next</b>] (次へ) を選択します。</p>
      </li><li>
        <p>[<b>詳細の指定</b>] セクションでは、[<b>スタックの名前</b>] フィールドにスタックの名前を入力します。この例では、<code class="userinput">BasicWebServerStack</code> を使用します。</p>
      </li><li>
        <p>[<b>パラメータ</b>] セクションでは、[<b>KeyName</b>] フィールドに、スタックを作成するのと同じリージョン内の有効な Amazon EC2 キーペアの名前を入力します。</p>
      </li><li>
        <p>他のデフォルトのパラメータ値をそのまま使用し、[<b>次へ</b>] を選択します。</p>
      </li><li>
        <p>このチュートリアルでは、タグの追加も詳細設定の指定も不要です。[<b>次へ</b>] を選択します。</p>
      </li><li>
        <p>スタック名と Amazon EC2 キーペア名が正しいことを確認し、[<b>作成</b>] を選択します。</p>
      </li></ol></div>
    <p>AWS CloudFormation がスタックを作成するのに、数分かかります。進捗状況を監視するには、スタックイベントを確認します。スタックイベントの表示の詳細については、「<a href="./cfn-console-view-stack-data-resources.html">AWS Management Console での AWS CloudFormation スタックデータとリソースの表示</a>」を参照してください。スタックが作成されると、スタックの出力を確認し、サンプルウェブサイトの URL に移動してウェブサイトが実行中であることを確認します。詳細については、「<a href="./cfn-console-view-stack-data-resources.html">AWS Management Console での AWS CloudFormation スタックデータとリソースの表示</a>」を参照してください。</p>
    <p>これで、AWS CloudFormation デザイナーを使用してテンプレートを作成し、スタックを起動できました。以下の <a href="./working-with-templates-cfn-designer-walkthrough-updatebasicwebserver.html">ウォークスルー: AWS CloudFormation デザイナーを使用してスタックのテンプレートを変更します。</a> のウォークスルーでこのスタックを使用します。ここでは、スケーラブルなウェブサーバーを作成できるように、テンプレートを変更します。</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>ブラウザで JavaScript が無効になっているか、使用できません。</strong></p><p>AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。手順については、使用するブラウザのヘルプページを参照してください。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">ドキュメントの表記規則</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./CHAP_Using.html">チュートリアル</div><div id="next" class="next-link" accesskey="n" href="./working-with-templates-cfn-designer-walkthrough-updatebasicwebserver.html">デザイナーを使用してテンプレートを変更する</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">このページは役に立ちましたか? - はい</div><div class="content"><p>ページが役に立ったことをお知らせいただき、ありがとうございます。</p><p>お時間がある場合は、何が良かったかお知らせください。今後の参考にさせていただきます。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">このページは役に立ちましたか? - いいえ</div><div class="content"><p>このページは修正が必要なことをお知らせいただき、ありがとうございます。ご期待に沿うことができず申し訳ありません。</p><p>お時間がある場合は、ドキュメントを改善する方法についてお知らせください。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>