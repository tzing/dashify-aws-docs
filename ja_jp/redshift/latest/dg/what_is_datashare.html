<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ja-JP"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>データ共有とは - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="what_is_datashare" /><meta name="default_state" content="what_is_datashare" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html" /><meta name="description" content="データ共有 は、Amazon Redshift でデータを共有する単位です。同じ AWS アカウントまたは異なる AWS アカウント間でデータを使用するには、データ共有を使用します。また、異なる Amazon Redshift クラスター間で、読み取りのためにデータを共有することもできます。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="データベース開発者ガイド" /><meta name="abstract" content="エンタープライズレベル、ペタバイト規模、フルマネージドのデータウェアハウスサービス、Amazon Redshift を使用してデータウェアハウスを作成および管理できます。" /><meta name="guide-locale" content="ja_jp" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/what_is_datashare.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/what_is_datashare.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/what_is_datashare.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/what_is_datashare.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/what_is_datashare.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/what_is_datashare.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/what_is_datashare.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/what_is_datashare.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/what_is_datashare.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/what_is_datashare.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/what_is_datashare.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/what_is_datashare.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/what_is_datashare.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/what_is_datashare.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/what_is_datashare.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/what_is_datashare.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/what_is_datashare.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/what_is_datashare.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/what_is_datashare.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="データベース開発者ガイド" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="データベース開発者ガイド" /><meta id="panorama-serviceConsolePage" value="データ共有とは" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>データ共有とは - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#what_is_datashare" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,クラスター,データウェアハウス,開発者,サンプルデータ,データベース,データベース開発者,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "データベース開発者ガイド",
        "item" : "https://docs.aws.amazon.com/ja_jp/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon Redshift でのクラスター間のデータの共有",
        "item" : "https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/datashare-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "データ共有とは",
        "item" : "https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/datashare-overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#what_is_datashare" target="_blank" rel="noopener noreferrer" title="PDF を開く"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">ドキュメント</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">データベース開発者ガイド</a></div><div id="page-toc-src"><a href="#standard_datashare">標準データ共有</a><a href="#adx_datashare_overview">AWS Data Exchange データ共有</a><a href="#lf_datashare_overview">AWS Lake Formation 管理のデータ共有</a><a href="#datashare_producer_consumer">データ共有のプロデューサーとコンシューマー</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="what_is_datashare">データ共有とは</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p><em>データ共有</em>は、Amazon Redshift でデータを共有する単位です。同じ AWS アカウントまたは異なる AWS アカウント間でデータを使用するには、データ共有を使用します。また、異なる Amazon Redshift クラスター間で、読み取りのためにデータを共有することもできます。</p><p>各データ共有は、Amazon Redshift クラスター内の特定のデータベースに関連付けられます。</p><p>プロデューサークラスター管理者は、データ共有を作成し、データベースオブジェクトを追加して、他のクラスターとデータを共有できます。これは<em>アウトバウンド</em>共有と呼ばれます。コンシューマー管理者は、他のクラスターからデータ共有を受け取ることができます。これは<em>インバウンド</em>共有と呼ばれます。プロデューサーとコンシューマーの詳細については、「<a href="#datashare_producer_consumer">データ共有のプロデューサーとコンシューマー</a>」を参照してください。</p><p>データ共有オブジェクトは、クラスター上の特定のデータベースからのオブジェクトであり、プロデューサークラスターの管理者がデータ共有に追加してデータコンシューマーと共有することができます。データ共有オブジェクトは、データコンシューマーに対して読み取り専用です。データ共有オブジェクトの例には、テーブル、ビュー、およびユーザー定義関数があります。データ共有の作成中またはデータ共有の編集中に、いつでもデータ共有オブジェクトをデータ共有に追加できます。</p><p>クラスターがサイズ変更されるか、プロデューサークラスターが一時停止されても、データ共有は引き続き機能します。</p><p>データ共有にはさまざまな種類があります。</p><div class="highlights" id="inline-topiclist"><h6>トピック</h6><ul><li><a href="#standard_datashare">標準データ共有</a></li><li><a href="#adx_datashare_overview">AWS Data Exchange データ共有</a></li><li><a href="#lf_datashare_overview">AWS Lake Formation 管理のデータ共有</a></li><li><a href="#datashare_producer_consumer">データ共有のプロデューサーとコンシューマー</a></li></ul></div>
            <h2 id="standard_datashare">標準データ共有</h2>
            <p>標準データ共有を使用すると、プロビジョニングされたクラスター、サーバーレスワークグループ、アベイラビリティーゾーン、AWS アカウント、および AWS リージョン の間でデータを共有できます。クラスタータイプ間およびプロビジョニングされたクラスターと Amazon Redshift Serverless 間で共有できます。</p>
            <p>データを共有するには、以下のプロビジョニング済みクラスター、サーバーレス名前空間、および AWS アカウント 識別子を書き留めます。</p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p>プロビジョニングされたクラスターの名前空間は、Amazon Redshift でプロビジョニングされたクラスターを識別する識別子です。名前空間のグローバル一意識別子 (GUID) は、プロビジョニングされたクラスターの作成中に自動的に作成され、クラスターにアタッチされます。Amazon リソースネーム (ARN) の名前空間は、arn:<span>{</span>partition}:redshift:<span>{</span>region}:<span>{</span>account-id}:namespace:<span>{</span>namespace-guid} の形式です。プロビジョニングされたクラスターの名前空間は、Amazon Redshift コンソールのクラスター詳細ページで確認できます。</p>
                  <p>データ共有ワークフローでは、AWS アカウント内にあるクラスターとのデータの共有に名前空間の GUID 値とクラスター名前空間 の ARN が使用されます。<code class="code">current_namespace</code> 関数を使用して、現在のクラスターの名前空間を見つけることもできます。</p></li><li class="listitem"><p>サーバーレス名前空間は、Amazon Redshift Serverless を識別する識別子です。名前空間のグローバル一意識別子 (GUID) は、Amazon Redshift Serverless の作成中に自動的に作成され、インスタンスにアタッチされます。サーバーレス名前空間 ARN は、arn:<span>{</span>partition}:redshift-serverless:<span>{</span>region}:<span>{</span>account-id}:namespace/<span>{</span>namespace-guid} の形式です。</p></li><li class="listitem"><p>AWS アカウントはデータ共有のコンシューマーにすることができ、それぞれが 12 桁の AWS アカウント ID で表されます。</p></li></ul></div>
            <p><em>標準データ共有</em>の場合、以下の点を考慮してください。</p>
            <div class="itemizedlist">
                
                 
            <ul class="itemizedlist"><li class="listitem"><p>プロデューサークラスターが削除されると、Amazon Redshift はプロデューサークラスターによって作成されたデータ共有を削除します。プロデューサークラスターをバックアップおよび復元しても、作成されたデータ共有は復元されたクラスターに残ります。ただし、他のクラスターに付与されたデータ共有のアクセス許可は、復元されたクラスターでは無効になります。データ共有の使用許可を目的のコンシューマークラスターに再付与します。コンシューマークラスター上のコンシューマデータベースは、スナップショットが作成された元のクラスターからのデータ共有を指します。復元されたクラスターから共有データをクエリするには、コンシューマークラスター管理者は別のデータベースを作成する必要があります。この管理者はまた、既存のコンシューマーデータベースを削除および再作成して、新しく復元されたクラスターのデータ共有を使用することもできます。</p></li><li class="listitem"><p>コンシューマークラスターが、削除された後にスナップショットから復元された場合は、このクラスターに共有されていた以前のアクセスは無効になり、表示されなくなります。復元されたコンシューマークラスターで引き続きデータ共有へのアクセスが必要な場合、プロデューサクラスターの管理者は、復元されたコンシューマークラスターに対し、データ共有の使用を再度許可する必要があります。コンシューマークラスター管理者は、無効化されたデータ共有から作成された古いコンシューマデータベースを、すべて削除する必要があります。さらにこの管理者は、プロデューサーがアクセス許可を再付与した後に、データ共有からコンシューマーデータベースを再作成する必要があります。復元されたクラスターのクラスター名前空間 GUID は元のクラスターとは異なるため、コンシューマークラスターまたはプロデューサークラスターがバックアップから復元されたときにデータ共有の許可を再付与します。</p></li></ul></div>
          
            <h2 id="adx_datashare_overview">AWS Data Exchange データ共有</h2>
            <p>AWS Data Exchange データ共有は、AWS Data Exchange 経由でデータを共有するためのライセンス供与の単位です。AWS は、AWS Data Exchange へのサブスクリプションと Amazon Redshift データ共有の使用に関連するすべての請求と支払いを管理します。承認されたデータプロバイダーは、AWS Data Exchange製品に AWS Data Exchange データ共有を追加することができます。御社の顧客が AWS Data Exchange データ共有を使用する製品にサブスクライブした場合、製品内のデータ共有にアクセスできるようになります。</p>
            
            <p><em>AWS Data Exchange for Amazon Redshift</em> を使用すると、Amazon Redshift データへの AWS Data Exchange を介したアクセスを許可するのに便利です。御社の顧客が AWS Data Exchange データ共有を使用する製品にサブスクライブする場合、AWS Data Exchangeではその顧客を、データ製品に含まれるすべての AWS Data Exchange データ共有に対し、コンシューマーとして自動的に追加します。請求書は自動的に生成され、AWS Marketplace Entitlement Serviceを介して支払いの一元的な収集と、自動的な分配が行われます。</p>
            <p>プロバイダーは、スキーマ、テーブル、ビュー、およびユーザー定義関数などの詳細なレベルで、Amazon Redshift のデータをライセンスできます。複数の AWS Data Exchange 製品間で、同じ AWS Data Exchange データ共有を使用できます。コンシューマーは、AWS Data Exchangeデータ共有に追加された任意のオブジェクトを利用することが可能です。プロデューサーはすべての AWS Data Exchange データ共有を、それらを管理している AWS Data Exchange に代わって表示できます。これには Amazon Redshift API オペレーション、SQL コマンド、および Amazon Redshift コンソールを使用します。製品の AWS Data Exchange データ共有にサブスクライブしている顧客は、そのデータ共有内のオブジェクトに対する、読み取り専用のアクセス権を持ちます。</p>
            <p>サードパーティーのプロデューサーデータを利用しようとする顧客は、AWS Data Exchangeカタログを閲覧することで、Amazon Redshift のデータセットを検索しサブスクライブできます。AWS Data Exchange へのサブスクリプションがアクティブ化された後は、クラスター内のデータ共有からデータベースを作成したり、Amazon Redshift のデータに対しクエリを実行したりできます。</p>
            
             
               <h3 id="adx-how-it-works">AWS Data Exchange データ共有のしくみ</h3>
                
                  <h4 id="provider-how-it-works">プロデューサー管理者としての AWS Data Exchange データ共有の管理</h4>
                  
                  <p> データプロデューサー (AWS Data Exchange 上ではプロバイダとも呼ばれます) である場合は、Amazon Redshift データベースに接続する AWS Data Exchange データ共有を作成できます。AWS Data Exchange 上の製品に AWS Data Exchange データ共有を追加するには、AWS Data Exchangeのプロバイダーとして登録されている必要があります。</p>
                  <p>AWS Data Exchange でのデータ共有の使用開始方法については、「<a href="./adx-getting-started.html">AWS Data Exchange でのライセンス付き Amazon Redshift データの共有</a>」を参照してください。</p>
                
               
                
                  <h4 id="subscriber-how-it-works">コンシューマーとしてアクティブな AWS Data Exchange サブスクリプションを使用ながらの AWS Data Exchange データ共有の使用</h4>
                  
                  <p>有効な AWS Data Exchange サブスクリプションのあるコンシューマー (AWS Data Exchange 上ではサブスクライバとも呼ばれます) であれば、AWS Data Exchangeコンソールから AWS Data Exchange カタログを閲覧し AWS Data Exchange データ共有が使用可能な製品の検索が行えます。</p>
                  <p>AWS Data Exchange データ共有が含まれる製品にサブスクライブした後、クラスター内のデータ共有からデータベースを作成します。その後は、抽出、変換、およびロードを行わなくても Amazon Redshift のデータを直接クエリできようになります。</p>
                  <p>AWS Data Exchange でのデータ共有の使用開始方法については、「<a href="./adx-getting-started.html">AWS Data Exchange でのライセンス付き Amazon Redshift データの共有</a>」を参照してください。</p>
                
             
            <p><em>AWS Data Exchange データ共有</em>については、以下の点を考慮してください。</p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p>プロデューサークラスターが削除されると、Amazon Redshift はプロデューサークラスターによって作成されたデータ共有を削除します。プロデューサークラスターをバックアップおよび復元しても、作成されたデータ共有は復元されたクラスターに残ります。データのサブスクライバが引き続きデータにアクセスできるようにするには、AWS Data Exchangeデータ共有を再度実行し、そのデータ共有を製品のデータセットに公開します。コンシューマークラスター上のコンシューマデータベースは、スナップショットが作成された元のクラスターからのデータ共有を指します。復元されたクラスターから共有データをクエリするには、コンシューマークラスターの管理者は別のデータベースを作成するか、既存のコンシューマデータベースを削除して再作成し、その AWS Data Exchange データ共有を新しく復元されたクラスターから使用します。</p></li><li class="listitem"><p>コンシューマークラスターが削除された後にスナップショットから復元された場合も、このクラスターに共有されていた以前のアクセス権は有効のまま維持されるので表示が可能になります。コンシューマークラスターの管理者は、非アクティブなデータ共有から作成された古いコンシューマーデータベースをすべて削除し、プロデューサーが許可を再付与した後、データ共有からコンシューマーデータベースを再作成する必要があります。復元されたクラスターのクラスター名前空間 GUID は元のクラスターとは異なるため、プロデューサークラスターがバックアップから復元された際にデータ共有の許可を再付与します。</p></li><li class="listitem"><p>AWS Data Exchange データ共有を使用している場合には、クラスターの削除は行わないように推奨します。このタイプの変更を実行すると、AWS Data Exchangeのデータ製品での使用条件に違反する可能性があります。</p></li></ul></div>
            
             
               <h3 id="adx-usage-notes">Amazon Redshift 向け AWS Data Exchange を使用する場合の考慮事項</h3>
               <p>Amazon Redshift 向け AWS Data Exchange を使用する場合、以下の点を考慮してください。</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
                   
                   
                   
                   
                  
               <ul class="itemizedlist"><li class="listitem"><p>プロデューサーとコンシューマーの両方が、Amazon Redshift のデータ共有を使用する際は、RA3 インスタンスタイプを使用する必要があります。プロデューサーの場合は、最新の Amazon Redshift クラスターバージョンで RA3 インスタンスタイプを使用する必要があります。</p></li><li class="listitem"><p>プロデューサクラスターとコンシューマークラスターの両方が暗号化されている必要があります。</p></li><li class="listitem"><p>AWS Data Exchange のデータ共有が使用可能なものを含む AWS Data Exchange 製品をリストするためには、AWS Data Exchangeプロバイダーとして登録されている必要があります。詳細については、「<a href="https://docs.aws.amazon.com/data-exchange/latest/userguide/provider-getting-started.html">Getting started as a provider</a>」を参照してください。</p></li><li class="listitem"><p>AWS Data Exchange を介して Amazon Redshift データに対し検索、サブスクライブ、およびクエリを行う際は、AWS Data Exchangeプロバイダーとして登録する必要はありません。</p></li><li class="listitem"><p>データへのアクセスを制御するには、パブリックなアクセスが可能な設定を有効にして AWS Data Exchange データ共有を作成します。AWS Data Exchange データ共有を変更してパブリックなアクセスが可能な設定をオフにするには、ALTER DATASHARE SET PUBLICACCESSIBLE FALSE を許可するようにセッション変数を設定します。詳細については、「<a href="./r_ALTER_DATASHARE.html#r_ALTER_DATASHARE_usage">ALTER DATASHARE の使用に関する注意事項</a>」を参照してください。</p></li><li class="listitem"><p>データ共有へのアクセス権は、AWS Data Exchangeデータ共有が使用可能な AWS Data Exchange 製品に対し有効なサブスクリプションがある場合に付与されます。そのためプロデューサーは、コンシューマーを手動で AWS Data Exchange データ共有に追加したり、そこから削除したりすることはできません。</p></li><li class="listitem"><p>プロデューサは、コンシューマーが実行する SQL クエリを表示できません。プロデューサは、プロデューサーのみがアクセス可能な Amazon Redshift テーブルを介して、クエリの数やコンシューマーがクエリしているオブジェクトなどのメタデータのみを表示できます。詳細については、「<a href="./auditing.html">Amazon Redshift でのデータ共有のモニタリングと監査</a>」を参照してください。</p></li><li class="listitem"><p>データ共有は、パブリックなアクセスが可能なように構成とすることをお勧めします。これを行わない場合、パブリックにアクセス可能なコンシューマークラスターを使用している AWS Data Exchange 上のサブスクライバーが、データ共有を使用できなくなります。</p></li><li class="listitem"><p>他の AWS アカウント と共有している AWS Data Exchange データ共有は、DROP DATASHARE ステートメントを使用して削除しないことをお勧めします。これを行うと、そのデータ共有へのアクセス権を持つ AWS アカウント が、データ共有にアクセスできなくなります。このアクションを元に戻すことはできません。このタイプの変更を実行すると、AWS Data Exchangeのデータ製品での使用条件に違反する可能性があります。AWS Data Exchange のデータ共有を削除する場合は、「<a href="./r_DROP_DATASHARE.html#r_DROP_DATASHARE_usage">DROP DATASHARE の使用に関する注意事項</a>」を参照してください。</p></li><li class="listitem"><p>クロスリージョンでのデータ共有の場合、AWS Data Exchangeデータ共有を作成すればライセンスされたデータを共有できます。</p></li><li class="listitem"><p>別のリージョンのデータを使用する場合、コンシューマーはプロデューサーリージョンからコンシューマーリージョンへのクロスリージョンデータ転送料金を支払います。</p></li></ul></div>    
             
          
            <h2 id="lf_datashare_overview">AWS Lake Formation 管理のデータ共有</h2>
            
            
            <p> AWS Lake Formation を使用すると、Amazon Redshift データ共有のデータベース、テーブル、列、行レベルのアクセス許可を一元的に定義して適用し、データ共有内のオブジェクトへのユーザーアクセスを制限できます。Lake Formation を介してデータを共有することで、Lake Formation でアクセス権を定義し、そのアクセス許可を任意のデータ共有とそのオブジェクトに適用できます。例えば、従業員情報を含んだテーブルがある場合、Lake Formation の列レベルのフィルターを使用して、人事部門に属さない従業員が社会保障番号などの個人を特定できる情報 (PII) を表示できないようにすることができます。データフィルターの詳細については、「AWS Lake Formation 開発者ガイド」の「<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/data-filtering.html">Data Filtering and Cell-Level Security in Lake Formation</a>」(Lake Formation におけるデータフィルタリングとセルレベルのセキュリティ) を参照してください。</p>
            <p>Lake Formation でタグを使用して、Lake Formation のリソースに対するアクセス許可を設定することもできます。詳細については、「<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/tag-based-access-control.html">Lake Formation のタグベースのアクセスコントロール</a>」を参照してください。</p>
            <p> Amazon Redshift は現在、同じアカウント内または複数のアカウント間での共有は、Lake Formation 経由でのデータ共有をサポートしています。クロスリージョン共有は現在サポートされていません。</p>
            <p>次に、Lake Formation を使用してデータ共有の許可を制御する方法の大まかな概要を示します。</p>
            <div class="procedure"><ol><li><p>Amazon Redshift では、プロデューサークラスターまたはワークグループの管理者は、プロデューサークラスターまたはワークグループ上にデータ共有を作成し、Lake Formation アカウントに対する使用許可の付与を行います。</p></li><li><p>プロデューサークラスターまたはワークグループの管理者は、Lake Formation アカウントにデータ共有にアクセスする承認を与えます。</p></li><li><p>Lake Formation 管理者がデータ共有を見つけて、登録します。また、アクセスできる AWS Glue ARN を見つけて、データ共有を AWS Glue Data Catalog ARN に関連付ける必要があります。AWS CLI を使用している場合、Redshift CLI 操作 <code class="code">describe-data-shares</code> と <code class="code">associate-data-share-consumer</code> でデータ共有を見つけて承認できます。データ共有を登録するには、Lake Formation CLI 操作 <code class="code">register-resource</code> を使用します。</p></li><li><p>Lake Formation 管理者は、AWS Glue Data Catalog にフェデレーティッドデータベースを作成し、データ共有内のオブジェクトへのユーザーアクセスを制御する Lake Formation アクセス許可を設定します。AWS Glue のフェデレーティッドデータベースの詳細については、「<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/data-sharing-redshift.html">Amazon Redshift データ共有でのデータに対するアクセス許可の管理</a>」を参照してください。</p></li><li><p>Lake Formation 管理者は、アクセスできる AWS Glue データベースを見つけて、データ共有を AWS Glue Data Catalog ARN に関連付けます。</p></li><li><p>Redshift 管理者は、アクセスできる AWS Glue データベース ARN を見つけて、AWS Glue データベース ARN を使用して Amazon Redshift コンシューマークラスターに外部データベースを作成し、<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/options-for-providing-iam-credentials.html">IAM 認証情報で認証されたデータベースユーザー</a>に Amazon Redshift データベースへのクエリを開始する使用権を付与します。</p></li><li><p>データベースユーザーは、SVV_EXTERNAL_TABLES ビューと SVV_EXTERNAL_COLUMNS ビューを使用して、アクセス許可のある AWS Glue データベース内のすべてのテーブルや列を検索し、AWS Glue データベースのテーブルをクエリできます。</p></li><li><p>プロデューサークラスターまたはワークグループの管理者がコンシューマークラスターとデータを共有しないことを決定した場合、プロデューサークラスター管理者は Redshift からデータ共有について使用を取り消し、承認を解除し、または削除できます。Lake Formation 内に関連付けられたアクセス許可とオブジェクトは自動的には削除されません。</p></li></ol></div>
            
            <p>プロデューサークラスターまたはワークグループの管理者として、AWS Lake Formation でデータ共有を行う方法の詳細については、「<a href="./lake-formation-getting-started-producer.html">プロデューサーとして Lake Formation 管理のデータ共有を使用する</a>」を参照してください。プロデューサークラスターまたはワークグループの共有データを使用するには、「<a href="./lake-formation-getting-started-consumer.html">コンシューマーとしての Lake Formation 管理のデータ共有を使用する</a>」を参照してください。</p>
            
             
               <h3 id="lake-formation-datashare-considerations">Amazon Redshift で AWS Lake Formation を使用する場合の考慮事項と制限</h3>
               <p>Lake Formation を使用して Amazon Redshift のデータを共有する際の考慮事項と制限事項は次のとおりです。データ共有の考慮事項と制限事項については、「<a href="https://docs.aws.amazon.com/redshift/latest/dg/considerations.html">Amazon Redshift でのデータ共有に関する考慮事項</a>」を参照してください。Lake Formation の制限事項については、「<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/notes-rs-datashare.html">Lake Formation での Amazon Redshift データ共有の使用に関する注意事項</a>」を参照してください。</p>
               <div class="itemizedlist">
                   
                  
                   
                   
                   
                   
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>リージョン間での Lake Formation へのデータ共有は、現在サポートされていません。</p>
                  </li><li class="listitem">
                     <p>共有リレーションでユーザーに対して列レベルのフィルターが定義されている場合、<code class="code">SELECT *</code> 操作を実行すると、ユーザーがアクセスできる列のみが返されます。</p>
                  </li><li class="listitem">
                     <p>Lake Formation のセルレベルのフィルターはサポートされていません。</p>
                  </li><li class="listitem">
                     <p>ビューとそのテーブルを作成して Lake Formation と共有した場合、フィルターを設定してテーブルへのアクセスを管理できますが、Amazon Redshift は、コンシューマークラスターのユーザーが共有オブジェクトにアクセスするとき、Lake Formation が定義したポリシーを適用します。ユーザーが Lake Formation と共有されているビューにアクセスすると、Redshift は定義されている Lake Formation ポリシーをビューにのみ適用し、ビューに含まれるテーブルには適用しません。ただし、ユーザーがテーブルに直接アクセスすると、Redshift は定義済みの Lake Formation ポリシーをテーブルに適用します。</p>
                  </li><li class="listitem">
                     <p>テーブルに Lake Formation フィルターが設定されている場合、共有テーブルに基づいてコンシューマーのマテリアライズドビューを作成することはできません。</p>
                  </li><li class="listitem">
                     <p>Lake Formation 管理者は、<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/getting-started-setup.html#create-data-lake-admin">データレイク管理者</a>アクセス許可と、<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/redshift-ds-prereqs.html">データ共有を受け入れるために必要なアクセス許可</a>を持っている必要があります。</p>
                  </li><li class="listitem">
                     <p>Lake Formation を介してデータ共有を行うには、プロデューサーコンシューマークラスターは、最新の Amazon Redshift クラスターバージョンまたはサーバーレスワークグループを持つ RA3 クラスターである必要があります。</p>
                  </li><li class="listitem">
                     <p>プロデューサクラスターとコンシューマークラスターの両方が暗号化されている必要があります。</p>
                  </li><li class="listitem">
                     <p>プロデューサークラスターまたはワークグループに実装されている Redshift の行レベルと列レベルのアクセス制御ポリシーは、データ共有が Lake Formation と行われる場合は無視されます。Lake Formation の管理者は、Lake Formation でこれらのポリシーを設定する必要があります。プロデューサークラスターまたはワークグループの管理者は、<a href="https://docs.aws.amazon.com/redshift/latest/dg/r_ALTER_TABLE.html">ALTER TABLE</a> コマンドを使用して、テーブルの RLS を無効にできます。</p>
                  </li><li class="listitem">
                     <p>Lake Formation によるデータ共有は、Redshift と Lake Formation の両方にアクセスできるユーザーのみが利用できます。</p>
                  </li></ul></div>
               
             
          
         <h2 id="datashare_producer_consumer">データ共有のプロデューサーとコンシューマー</h2>
         <p><em>データプロデューサー</em> (データ共有プロデューサーまたはデータシェアプロデューサーとも言う) は、データを共有するクラスターです。プロデューサークラスターの管理者とデータベースの所有者は、CREATE DATASHARE コマンドを使用してデータ共有を作成できます。そこにスキーマ、テーブル、ビュー、SQL ユーザー定義関数 (UDF) などのオブジェクトをデータベースから追加すると、そのデータベースのプロデューサークラスターとコンシューマークラスターが、読み取り目的でデータを共有できるようになります。</p>
         <p>AWS Data Exchange データ共有のためのデータプロデューサー (AWS Data Exchange 上ではプロバイダーとも呼ばれます) は、AWS Data Exchangeを介してデータをライセンスできます。承認されたプロバイダーは、AWS Data Exchange製品に AWS Data Exchange データ共有を追加できます。</p>
         <p>AWS Data Exchange データ共有が含まれる製品を顧客がサブスクライブすると、AWS Data Exchangeはその顧客をデータコンシューマーとして、製品に含まれるすべての AWS Data Exchange データ共有に自動的に追加します。AWS Data Exchange は、顧客のサブスクリプションが終了すると、AWS Data Exchangeデータ共有からそれらの顧客全員を削除します。AWS Data Exchange は、AWS Data Exchangeデータ共有が含まれる有料製品に関する料金の請求、請求書の発行、支払いの回収、および支払いの分配も自動的に管理します。詳細については、「<a href="#adx_datashare_overview">AWS Data Exchange データ共有</a>」を参照してください。AWS Data Exchange のデータプロバイダとしての登録については、「<a href="https://docs.aws.amazon.com/data-exchange/latest/userguide/provider-getting-started.html">Getting started as a provider</a>」を参照してください。</p>
         
         <p><em>データコンシューマ</em> (データ共有コンシューマまたはデータシェアコンシューマとも言う) は、プロデューサクラスターからデータ共有を受信するクラスターです。</p>
         <p>データを共有する Amazon Redshift の各クラスターは、同じあるいは別の AWS アカウントに置くことも、異なる AWS リージョンに置くこともできます。これにより、組織間でのデータ共有や、他のチームとの共同作業が可能になります。コンシューマークラスターの管理者は、使用が許可されているデータ共有を受け取り、各データ共有の内容を確認します。共有データを使用するために、コンシューマークラスターの管理者はデータ共有から Amazon Redshift データベースを作成します。次に、管理者はデータベースに対するアクセス許可をコンシューマークラスター内のユーザーおよびロールに割り当てます。アクセス許可が付与されると、ユーザーとロールは、コンシューマークラスター上のローカルデータとともに、標準のメタデータクエリの一部として共有オブジェクトを一覧表示できます。すぐにクエリを開始できます。</p>
         <p><em>アクティブな AWS Data Exchange サブスクリプションを持つコンシューマー</em> (AWS Data Exchange ではサブスクライバーとも呼ばれます) である場合は、データを抽出、変換、ロードすることなく、詳細かつ最新の Amazon Redshift データを検索、サブスクライブ、クエリすることが可能です。詳細については、「<a href="#adx_datashare_overview">AWS Data Exchange データ共有</a>」を参照してください。</p>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>ブラウザで JavaScript が無効になっているか、使用できません。</strong></p><p>AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。手順については、使用するブラウザのヘルプページを参照してください。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">ドキュメントの表記規則</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./data_sharing_regions.html">データ共有が利用可能なリージョン</div><div id="next" class="next-link" accesskey="n" href="./how_it_works.html">データ共有の仕組み</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">このページは役に立ちましたか? - はい</div><div class="content"><p>ページが役に立ったことをお知らせいただき、ありがとうございます。</p><p>お時間がある場合は、何が良かったかお知らせください。今後の参考にさせていただきます。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">このページは役に立ちましたか? - いいえ</div><div class="content"><p>このページは修正が必要なことをお知らせいただき、ありがとうございます。ご期待に沿うことができず申し訳ありません。</p><p>お時間がある場合は、ドキュメントを改善する方法についてお知らせください。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/what_is_datashare.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>