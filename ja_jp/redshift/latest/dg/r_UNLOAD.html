<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ja-JP"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>UNLOAD - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_UNLOAD" /><meta name="default_state" content="r_UNLOAD" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html" /><meta name="description" content="クエリの結果を、Amazon Simple Storage Service (Amazon S3) の 1 つ以上のファイルにアンロードします。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="データベース開発者ガイド" /><meta name="abstract" content="エンタープライズレベル、ペタバイト規模、フルマネージドのデータウェアハウスサービス、Amazon Redshift を使用してデータウェアハウスを作成および管理できます。" /><meta name="guide-locale" content="ja_jp" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_UNLOAD.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_UNLOAD.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_UNLOAD.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_UNLOAD.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_UNLOAD.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_UNLOAD.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_UNLOAD.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_UNLOAD.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_UNLOAD.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_UNLOAD.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_UNLOAD.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_UNLOAD.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_UNLOAD.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_UNLOAD.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="データベース開発者ガイド" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="データベース開発者ガイド" /><meta id="panorama-serviceConsolePage" value="UNLOAD" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>UNLOAD - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_UNLOAD" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,クラスター,データウェアハウス,開発者,サンプルデータ,データベース,データベース開発者,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "データベース開発者ガイド",
        "item" : "https://docs.aws.amazon.com/ja_jp/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL リファレンス",
        "item" : "https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL コマンド",
        "item" : "https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "UNLOAD",
        "item" : "https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_UNLOAD" target="_blank" rel="noopener noreferrer" title="PDF を開く"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">ドキュメント</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">データベース開発者ガイド</a></div><div id="page-toc-src"><a href="#r_UNLOAD-permissions">必要な権限とアクセス許可</a><a href="#r_UNLOAD-synopsis">構文</a><a href="#unload-parameters">パラメータ</a><a href="#unload-usage-notes">使用に関する注意事項</a><a href="#r_UNLOAD-examples">例</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_UNLOAD">UNLOAD</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon S3 のサーバー側の暗号化 (SSE-S3) を使用して、Amazon S3 上の 1 つ、または複数のテキスト、JSON、または Apache Parquet ファイルにクエリの結果をアンロードします。AWS Key Management Service キーを使用したサーバー側の暗号化 (SSE-KMS)、またはカスタマーマネージド型キーを使用したクライアント側の暗号化を指定することもできます。</p><p>デフォルトでは、アンロードされたファイルの形式はパイプ区切り (<code class="code">|</code>) テキストです。</p><p>Amazon S3 のファイルは、サイズ、拡張子、ファイル数、MAXFILESIZE パラメータを設定することで管理できます。S3 IP 範囲が許可リストに追加されていることを確認します。必要な S3 IP 範囲の詳細については、「<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/security-network-isolation.html#network-isolation">ネットワークの隔離</a>」を参照してください。</p><p>分析用の効率的なオープン列型ストレージ形式である Apache Parquet では、Amazon Redshift クエリの結果を Amazon S3 データレイクにアンロードできます。Parquet 形式は、テキスト形式と比較して、アンロードが最大 2 倍速く、さらにストレージ使用量が Amazon S3 で最大 6 倍少なくすみます。これにより、Amazon S3 で行ったデータ変換とエンリッチメントをオープン形式で Amazon S3 データレイクに保存できます。次に、Redshift Spectrum や Amazon Athena、Amazon EMR、Amazon SageMaker などの他の AWS のサービスを使用してデータを分析できます。</p><p>UNLOAD コマンドの使用に関する詳細とシナリオ例については、「<a href="./c_unloading_data.html">データのアンロード</a>」を参照してください。</p>
         <h2 id="r_UNLOAD-permissions">必要な権限とアクセス許可</h2>
         <p>UNLOAD コマンドを正常に実行するには、少なくともデータベース内のデータに対する SELECT 権限と、Amazon S3 ロケーションへの書き込みアクセス許可が必要です。必要なアクセス許可は COPY コマンドと同様です。COPY コマンドのアクセス許可に関する情報は、「<a href="./copy-usage_notes-access-permissions.html">他の AWS リソースにアクセスするアクセス許可</a>」を参照してください。</p>
       
         <h2 id="r_UNLOAD-synopsis">構文</h2>
         
         
         
         
         
         
         
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">UNLOAD ('<em>select-statement</em>')
TO '<em>s3://object-path/name-prefix</em>'
<em>authorization</em>
[ <em>option</em>, ...] 

where <em>authorization</em> is
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;AWS アカウント-id-1&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>[,arn:aws:iam::<code class="replaceable">&lt;AWS アカウント-id-2&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>][,...]' }
            
where <em>option</em> is
| [ FORMAT [ AS ] ] CSV | PARQUET | JSON
| PARTITION BY ( <em>column_name</em> [, ... ] ) [ INCLUDE ]
| MANIFEST [ VERBOSE ]
| HEADER
| DELIMITER [ AS ] '<em>delimiter-char</em>'
| FIXEDWIDTH [ AS ] '<em>fixedwidth-spec</em>'
| ENCRYPTED [ AUTO ]
| BZIP2
| GZIP
| ZSTD
| ADDQUOTES
| NULL [ AS ] '<em>null-string</em>'
| ESCAPE
| ALLOWOVERWRITE
| CLEANPATH
| PARALLEL [ <span>{</span> ON | TRUE } | <span>{</span> OFF | FALSE } ]
| MAXFILESIZE [AS] <em>max-size</em> [ MB | GB ]
| ROWGROUPSIZE [AS] <em>size</em> [ MB | GB ]
| REGION [AS] '<em>aws-region</em>' }
| EXTENSION '<em>extension-name</em>'

</code></pre>
       
         <h2 id="unload-parameters">パラメータ</h2>
         <div class="variablelist">
             
             
             
             
            
            
             
            
            
            
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
            
             
             
             
            
             
         <dl>
               <dt><span class="term">('<em>select-statement</em>') </span></dt>
               <dd>
                  <p>SELECT クエリ。クエリ結果をアンロードします。ほとんどの場合、クエリで ORDER BY 句を指定してソート順にデータをアンロードすることは有益です。この方法は、データの再ロード時にデータをソートするために必要な時間を節約します。</p>
                  <p>クエリは、次に示すように一重引用符で囲む必要があります: </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="">('select * from venue order by venueid')</code></pre>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>クエリに引用符が含まれている場合 (リテラル値を囲む場合など)、リテラルを 2 つの単一引用符で囲みます。また、クエリを単一引用符で囲む必要があります。</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">('select * from venue where venuestate=''NV''')</code></pre></div></div>
               </dd>
             
               <dt><span class="term">TO 's3://<em>object-path/name-prefix</em>'</span></dt>
               <dd>
                  <p>Amazon Redshift が出力ファイルオブジェクト (MANIFEST が指定されている場合はマニフェストファイルを含む) を書き込む Amazon S3 上の絶対パス (バケット名を含む)。オブジェクト名には <em>name-prefix</em> というプレフィックスが付きます。<code class="code">PARTITION BY</code> を使用すると、必要に応じて <em>name-prefix</em> 値の末尾にスラッシュ (/) が自動的に追加されます。さらにセキュリティを強化するために、UNLOAD は HTTPS 接続を使用して Amazon S3 に接続します。デフォルトでは、UNLOAD はスライスごとに 1 つ以上のファイルを書き込みます。次に示すように、UNLOAD は指定された名前のプレフィックスにスライス番号とパート番号を追加します:</p>
                  <p><code class="code"><code class="replaceable">&lt;object-path&gt;</code>/<code class="replaceable">&lt;name-prefix&gt;</code><code class="replaceable">&lt;slice-number&gt;</code>_part_<code class="replaceable">&lt;part-number&gt;</code></code>. </p>
                  <p>MANIFEST が指定された場合、マニフェストファイルは次のように書き込まれます:</p>
                  <p><code class="code"><code class="replaceable">&lt;object_path&gt;</code>/<code class="replaceable">&lt;name_prefix&gt;</code>manifest</code>. </p>
                  <p>PARALLEL が OFF に指定されている場合、データファイルは次のように書き込まれます。</p>
                  <p><code class="code"><code class="replaceable">&lt;object_path&gt;</code>/<code class="replaceable">&lt;name_prefix&gt;</code><code class="replaceable">&lt;part-number&gt;</code></code>. </p>
                  <p>UNLOAD は、Amazon S3 サーバー側の暗号化 (SSE) を使用して自動的に暗号化ファイルを作成します。MANIFEST を使用すると、マニフェストファイルも暗号化されます。COPY コマンドは、ロード操作中に自動的にサーバー側で暗号化されたファイルを読み取ります。Amazon S3 コンソールまたは API を使用すると、サーバー側で暗号化されたファイルをバケットから透過的にダウンロードできます。詳細については、「<a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/serv-side-encryption.html">サーバー側の暗号化を使用したデータの保護</a>」を参照してください。</p>
                  <p>Amazon S3 クライアント側暗号化機能を使用するには、ENCRYPTED オプションを指定します。</p>
                  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>REGION は、Amazon S3 バケットが Amazon Redshift データベースと同じ AWS リージョン にない場合に必須です。</p></div></div>
               </dd>
             
               <dt><span class="term"><em>authorization</em></span></dt>
               <dd>
                  <p>UNLOAD コマンドには Amazon S3 にデータを書き込むための認証が必要です。UNLOAD コマンドは、COPY コマンドが認証に使用するのと同じパラメータを使用します。詳細については、COPY コマンドの構文リファレンスの「<a href="./copy-parameters-authorization.html">認証パラメータ</a>」を参照してください。</p>
               </dd>
             
               <dt id="unload-iam"><span class="term">IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;AWS アカウント-id-1&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>'</span></dt>
               <dd>
                  <p>デフォルトキーワードを使用して、UNLOAD コマンドの実行時にデフォルトとして設定されクラスターに関連付けられた IAM ロールの使用を、Amazon Redshift に指示します。</p>
                  <p>クラスターが認証と承認に使用する IAM ロールの Amazon リソースネーム (ARN) を使用します。IAM_ROLE を指定すると、ACCESS_KEY_ID および SECRET_ACCESS_KEY、SESSION_TOKEN、または CREDENTIALS は使用できません。IAM_ROLE は連鎖できます。詳細については、「<em>Amazon Redshift 管理ガイド</em>」の「<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html#authorizing-redshift-service-chaining-roles">IAM ロールを連鎖する</a>」を参照してください。</p>
               </dd>
             
               <dt id="unload-csv"><span class="term">[ FORMAT [AS] ] CSV | PARQUET | JSON</span></dt>
               <dd>
                  <p>デフォルトの形式を上書きするアンロード形式を指定するキーワード。</p>
                  <p>CSV の場合、デフォルトの区切り文字としてカンマ (,) を使用して CSV 形式でテキストファイルをアンロードします。フィールドに区切り文字、二重引用符、改行文字、またはキャリッジリターンが含まれている場合、アンロードしたファイルのフィールドは二重引用符で囲まれます。データフィールド内の二重引用符は、追加の二重引用符でエスケープされます。ゼロ行がアンロードされると、Amazon Redshift は空の Amazon S3 オブジェクトを書き込む可能性があります。</p>
                  <p>PARQUET の場合、Apache Parquet バージョン 1.0 形式のファイルにアンロードします。デフォルトでは、各行グループは SNAPPY 圧縮を使用して圧縮されます。Apache Parquet 形式の詳細については、「<a href="https://parquet.apache.org/" rel="noopener noreferrer" target="_blank"><span>Apache Parquet</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>」を参照してください。</p>
                  <p>JSON の場合、各行に JSON オブジェクトが含まれている JSON ファイルにアンロードして、クエリ結果の完全なレコードを表します。Amazon Redshift は、クエリ結果に SUPER 列が含まれている場合に、ネストされた JSON の書き込みをサポートします 有効な JSON オブジェクトを作成するには、クエリ内の各列の名前が一意である必要があります。JSON ファイルでは、ブール値が <code class="code">t</code> または <code class="code">f</code> としてアンロードされ、NULL 値が <code class="code">null</code> としてアンロードされます。ゼロ行がアンロードされると、Amazon Redshift は Amazon S3 オブジェクトを書き込まなくなります。</p>
                  <p>キーワード FORMAT および AS はオプションです。CSV は FIXEDWIDTH または ADDQUOTES と併用できません。DELIMITER、FIXEDWIDTH、ADDQUOTES、ESCAPE、NULL AS、HEADER、GZIP、BZIP2、ZSTD では、PARQUET を使用できません。ENCRYPTED を使用した PARQUET は、AWS Key Management Serviceキー (SSE-KMS) を使用したサーバー側の暗号化でのみサポートされます。DELIMITER、HEADER、FIXEDWIDTH、ADDQUOTES、ESCAPE、または NULL AS では、JSON を使用できません。</p>
               </dd>
             
               <dt id="unload-partitionby"><span class="term">PARTITION BY ( <em>column_name</em> [, ... ] ) [INCLUDE]</span></dt>
               <dd>
                  <p>アンロードオペレーションのパーティションキーを指定します。UNLOAD は、Apache Hive の規則に従って、パーティションキーの値に基づいて、出力ファイルをパーティションフォルダに自動的に分割します。たとえば、パーティション year 2019 および month September に属する Parquet ファイルには、次のプレフィックス <code>s3://my_bucket_name/my_prefix/year=2019/month=September/000.parquet</code> があります。</p>
                  <p><em>column_name</em> の値は、アンロードされるクエリ結果の列である必要があります。</p>
                  <p>PARTITION BY で INCLUDE オプションを指定すると、アンロードされるファイルからパーティション列が削除されません。</p>

                  <p>Amazon Redshift は、PARTITION BY 句で文字列リテラルをサポートしていません。</p>


               </dd>
             
               <dt><span class="term">MANIFEST [ VERBOSE ]</span></dt>
               <dd>
                  <p>UNLOAD プロセスによって作成されたデータファイルの詳細を明示的に一覧表示するマニフェストファイルを作成します。マニフェストは、Amazon S3 に書き込まれた各ファイルの URL をリストする、JSON 形式のテキストファイルです。</p>
                  <p>MANIFEST が VERBOSE オプションとともに指定されている場合、マニフェストには以下の詳細が含まれます。</p>
                  <div class="itemizedlist">
                      
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>列名とデータ型、および CHAR、VARCHAR、または NUMERIC データ型の場合は各列のディメンション。CHAR および VARCHAR データ型の場合、ディメンションは長さです。DECIMAL または NUMERIC データ型の場合、ディメンションは精度とスケールです。</p>
                     </li><li class="listitem">
                        <p>各ファイルにアンロードされた行数。HEADER オプションが指定されている場合、行数にはヘッダー行が含まれます。</p>
                     </li><li class="listitem">
                        <p>アンロードされたすべてのファイルの合計ファイルサイズ、およびすべてのファイルにアンロードされた合計行数。HEADER オプションが指定されている場合、行数にはヘッダー行が含まれます。</p>
                     </li><li class="listitem">
                        <p>作成者。作成者は常に「Amazon Redshift」です。</p>
                     </li></ul></div>
                  <p>VERBOSE は、MANIFEST の後にしか指定できません。</p>
                  <p>マニフェストファイルは、アンロードファイルと同じ Amazon S3 パスプレフィックスに <code class="code">&lt;object_path_prefix&gt;manifest</code> 形式で書き込まれます。たとえば、UNLOAD で Amazon S3 パスプレフィックス '<code class="code">s3://mybucket/venue_</code>' が指定されている場合、マニフェストファイルの場所は '<code class="code">s3://mybucket/venue_manifest</code>' となります。</p>
               </dd>
             
               <dt><span class="term">HEADER</span></dt>
               <dd>
                  <p>各出力ファイルの先頭に列名を含むヘッダー行を追加します。CSV、DELIMITER、ADDQUOTES、ESCAPE などのテキスト変換オプションもヘッダー行に適用されます。HEADER は FIXEDWIDTH と併用できません。</p>
               </dd>
             
               <dt><span class="term">DELIMITER AS '<em>delimiter_character</em>'</span></dt>
               <dd>
                  <p>パイプ文字 (|)、カンマ (,)、タブ (\t) など、出力ファイルのフィールドを区切るために使用する単一の ASCII 文字を指定します。テキストファイルのデフォルトの区切り文字はパイプ文字です。CSV ファイルのデフォルトの区切り文字はコンマ文字です。AS キーワードはオプションです。DELIMITER は FIXEDWIDTH と併用できません。データに区切り文字が含まれている場合、ESCAPE オプションを指定して、区切り文字をエスケープするか、ADDQUOTES を使って、データを二重引用符で囲む必要があります。代替案として、データ内に含まれていない区切り文字を指定します。</p>
               </dd>
             
               <dt><span class="term">FIXEDWIDTH '<em>fixedwidth_spec</em>'</span></dt>
               <dd>
                  <p>区切り文字によって区切られているのではなく、各列の幅が固定長のファイルにデータをアンロードします。<em>fixedwidth_spec</em> は、列の数と列の幅を指定する文字列です。AS キーワードはオプションです。FIXEDWIDTH はデータを切り捨てないため、UNLOAD ステートメントの各列の指定は、少なくともその列の最長エントリの長さと同じになります。<em>fixedwidth_spec</em> の形式を次に示します。</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">'<em>colID1:colWidth1,colID2:colWidth2, ...</em>'</code></pre>
                  <p>FIXEDWIDTH は DELIMITER または HEADER と併用できません。</p>
               </dd>
             
               <dt id="unload-parameters-encrypted"><span class="term">ENCRYPTED [AUTO]</span></dt>
               <dd>
                  <p>Amazon S3 上の出力ファイルは、Amazon S3 サーバー側の暗号化機能またはクライアント側の暗号化機能を使って暗号化されるよう指定します。MANIFEST を指定すると、マニフェストファイルも暗号化されます。詳細については、「<a href="./t_unloading_encrypted_files.html">暗号化されたデータファイルをアンロードする</a>」を参照してください。ENCRYPTED パラメータを指定しない場合、UNLOAD は AWS 管理の暗号化キーによる Amazon S3 のサーバー側暗号化 (SSE-S3) 機能を使用して、暗号化されたファイルを自動的に作成します。</p>
                  <p>ENCRYPTED を指定すると、AWS KMSキーによるサーバー側の暗号化 (SSE-KMS) 機能を使用して Amazon S3 へのアンロードを実行することも可能です。その場合は、<a href="#unload-parameters-kms-key-id">KMS_KEY_ID</a>パラメータを使用してキー ID を指定します。<a href="./copy-parameters-authorization.html#copy-credentials">CREDENTIALS</a> パラメータを KMS_KEY_ID パラメータと併用することはできません。KMS_KEY_ID を使用してデータに対して UNLOAD コマンドを実行すると、キーを指定せずに同じデータに対して COPY オペレーションを実行できます。</p>
                  <p>お客様が提供した対称キーによるクライアント側の暗号化を使用して Amazon S3 にアンロードするには、以下の 2 つの方法のいずれかでキーを指定します。キーを提供するには、<a href="#unload-parameters-master-symmetric-key">MASTER_SYMMETRIC_KEY</a>パラメータまたは <a href="./copy-parameters-authorization.html#copy-credentials">CREDENTIALS</a> 認証情報文字列の <code class="code">master_symmetric_key</code> 部分を使用します。ルート対称キーを使用してデータをアンロードする場合は、暗号化されたデータに対して COPY オペレーションを実行する際にも、必ず同じキーを指定します。</p>
                  <p>UNLOAD では、お客様が用意したキー (SSE-C) による Amazon S3 サーバー側の暗号化はサポートされません。</p>
                  <p>ENCRYPTED AUTO が使用されている場合、UNLOAD コマンドは、ターゲット Amazon S3 バケットのプロパティ上にあるデフォルトの AWS KMS 暗号化キーを取得し、Amazon S3 に書き込まれたファイルに対し AWS KMS キーによる暗号化を行います。バケットにデフォルトの AWS KMS 暗号化キーがない場合、UNLOAD は Amazon Redshift サーバー側の暗号化に AWS 管理の暗号化キーを使用 (SSE-S3) して、暗号化されたファイルを自動的に作成します。このオプションは、master_symmetric_key を含む KMS_KEY_ID、MASTER_SYMMETRIC_KEY、または CREDENTIALS では使用できません。</p>
               </dd>
             
               <dt id="unload-parameters-kms-key-id"><span class="term">KMS_KEY_ID '<em>key-id</em>'</span></dt>
               <dd>
                  <p>Amazon S3 上のデータファイルの暗号化に使用する AWS Key Management Service (AWS KMS) キー の ID を指定します。詳細については、「<a href="https://docs.aws.amazon.com/kms/latest/developerguide/overview.html">AWS Key Management Service とは</a>」を参照してください。KMS_KEY_ID を指定する場合、<a href="#unload-parameters-encrypted">ENCRYPTED</a>パラメータも指定する必要があります。KMS_KEY_ID を指定する場合、CREDENTIALS パラメータを使用して認証することはできません。代わりに <a href="./copy-parameters-authorization.html#copy-iam-role">IAM_ROLE</a> または <a href="./copy-parameters-authorization.html#copy-access-key-id">ACCESS_KEY_ID and SECRET_ACCESS_KEY</a> のどちらかを使用します。</p>

               </dd>
             
               <dt id="unload-parameters-master-symmetric-key"><span class="term">MASTER_SYMMETRIC_KEY '<em>root_key</em>'</span></dt>
               <dd>
                  <p>Amazon S3 上のデータファイルの暗号化に使用するルート対称キーを指定します。MASTER_SYMMETRIC_KEY を指定する場合、<a href="#unload-parameters-encrypted">ENCRYPTED</a>パラメータも指定する必要があります。MASTER_SYMMETRIC_KEY は CREDENTIALS パラメータと併用できません。詳細については、「<a href="./c_loading-encrypted-files.html">暗号化されたデータファイルを Amazon S3 からロードする</a>」を参照してください。</p>
               </dd>
             
               <dt><span class="term">BZIP2 </span></dt>
               <dd>
                  <p>スライスごとに、1 つまたは複数の bzip2 圧縮ファイルにデータをアンロードします。生成される各ファイルには、<code class="code">.bz2</code>拡張子が付加されます。</p>
               </dd>
             
               <dt><span class="term">GZIP </span></dt>
               <dd>
                  <p>スライスごとに、1 つまたは複数の gzip 圧縮ファイルにデータをアンロードします。生成される各ファイルには、<code class="code">.gz</code>拡張子が付加されます。</p>
               </dd>
             
               <dt><span class="term">ZSTD </span></dt>
               <dd>
                  <p>スライスごとに、1 つまたは複数の Zstandard 圧縮ファイルにデータをアンロードします。生成される各ファイルには、<code class="code">.zst</code>拡張子が付加されます。</p>
               </dd>
             
               <dt><span class="term">ADDQUOTES </span></dt>
               <dd>
                  <p>アンロードされた各データフィールドは引用符で囲まれるため、Amazon Redshift は区切り文字自体を含んでいるデータ値をアンロードすることができます。例えば、区切りがカンマの場合、次のデータのアンロードと再ロードを完了することができます。</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class=""> "1","Hello, World" </code></pre>
                  <p>追加した引用符がない場合、文字列 <code class="code">Hello, World</code> は 2 つの異なるフィールドとして解析されます。</p>
                  <p>一部の出力形式は ADDQUOTES をサポートしていません。</p>
                  <p>ADDQUOTES を使用した際にデータを再ロードするには、COPY で REMOVEQUOTES を指定する必要があります。</p>
               </dd>
             
               <dt><span class="term">NULL AS '<em>null-string</em>'</span></dt>
               <dd>
                  <p>アンロードファイル内で NULL 値を表す文字列を指定します。このオプションを使用すると、選択したデータ内で検出された任意の NULL 値の代わりに、指定した文字列がすべての出力ファイルに挿入されます。このオプションを指定しない場合、NULL 値は次のようにアンロードされます。</p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>区切り文字で区切られた出力に対するゼロ長文字列 </p>
                     </li><li class="listitem">
                        <p>固定幅出力に対するホワイトスペース文字列</p>
                     </li></ul></div>
                  <p>固定幅のアンロードに対して NULL 文字列が指定され、出力列の幅が NULL 文字列の幅より小さい場合、次の動作が発生します。</p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>空のフィールドは非文字列用の出力です。</p>
                     </li><li class="listitem">
                        <p>文字列に対してはエラーがレポートされます。</p>
                     </li></ul></div>
                  <p>ユーザー定義の文字列が null 値を表す他のデータ型とは異なり、Amazon Redshift は JSON 形式を使用して SUPER データ列をエクスポートし、JSON 形式で決定されるように null として表します。その結果、SUPER データ列では、UNLOAD コマンドで使用される NULL [AS] オプションを無視します。</p>
               </dd>
             
               <dt><span class="term">ESCAPE </span></dt>
               <dd>
                  <p>区切られたアンロードファイル内の CHAR と VARCHAR 列の場合、エスケープ文字 (<code class="code">\</code>) が次の文字の前に必ず配置されます。</p>
                  <div class="itemizedlist">
                      
                      
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>ラインフィード: <code class="code">\n</code></p>
                     </li><li class="listitem">
                        <p>キャリッジリターン: <code class="code">\r</code></p>
                     </li><li class="listitem">
                        <p>アンロードデータ用に指定された区切り文字。</p>
                     </li><li class="listitem">
                        <p>エスケープ文字: <code class="code">\</code></p>
                     </li><li class="listitem">
                        <p>引用符: <code class="code">"</code> または <code class="code">'</code> (ESCAPE と ADDQUOTES の両方を UNLOAD コマンドで指定した場合)。</p>
                     </li></ul></div>
                  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>ESCAPE オプションを指定して COPY を使ってデータをロードした場合、UNLOAD コマンドでも ESCAPE オプションを指定して可逆出力ファイルを生成する必要があります。同様に、ESCAPE オプションを使って UNLOAD を実行すると、同じデータを COPY する場合に ESCAPE を使用する必要があります。</p></div></div>
               </dd>
             
               <dt id="allowoverwrite"><span class="term">ALLOWOVERWRITE </span></dt>
               <dd>
                  <p>デフォルトでは、UNLOAD によってファイルの上書きが発生する可能性がある場合、その UNLOAD 操作は失敗します。ALLOWOVERWRITE が指定された場合、UNLOAD によって、マニフェストファイルを含めた既存のファイルが上書きされます。</p>
               </dd>
             
               <dt id="cleanpath"><span class="term">CLEANPATH</span></dt>
               <dd>
                  <p>CLEANPATH オプションは、TO 句で指定された Amazon S3 パスにある既存のファイルを削除してから、指定した場所にファイルをアンロードします。</p>
                  <p>PARTITION BY 句を含めると、既存のファイルはパーティションフォルダからのみ削除され、UNLOAD オペレーションによって生成された新しいファイルを受信します。</p>
                  <p>Amazon S3 バケットでの <code class="code">s3:DeleteObject</code> 許可が必要です。詳細については、<a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-policy-language-overview.html">Amazon Simple Storage Service ユーザーガイド</a>の <em>Amazon S3 でのポリシーとアクセス許可</em>を参照してください。CLEANPATH オプションを使用して削除したファイルは、完全に削除され、復元することはできません。</p>
                  <p>ALLOWOVERWRITE オプションを指定した場合、CLEANPATH オプションを指定することはできません。</p>
               </dd>
             
               <dt id="unload-parallel"><span class="term">PARALLEL </span></dt>
               <dd>
                  <p>デフォルトでは、UNLOAD は、クラスター内のスライスの数に応じて、データを複数のファイルに同時に書き込みます。デフォルトのオプションは ON または TRUE です。PARALLEL が OFF または FALSE の場合、UNLOAD は、ORDER BY 句が使用される場合はそれに従って絶対的にソートされた 1 つ以上のデータファイルに逐次書き込みます。データファイルの最大サイズは 6.2 GB です。したがって、例えば、13.4 GB のデータをアンロードする場合、UNLOAD は以下の 3 つのファイルを作成します。</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="">s3://mybucket/key000    6.2 GB
s3://mybucket/key001    6.2 GB
s3://mybucket/key002    1.0 GB</code></pre>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>UNLOAD コマンドは、並列処理を使用するように設計されています。特別な理由がなく、特にファイルが COPY コマンドを使用してテーブルをロードするために使用される場合には、PARALLEL を有効にしたままにすることをお勧めします。</p></div></div>
               </dd>
             
               <dt id="unload-maxfilesize"><span class="term">MAXFILESIZE [AS] 最大サイズ [ MB | GB ] </span></dt>
               <dd>
                  <p>UNLOAD によって Amazon S3 で作成されるファイルの最大サイズを指定します。5 MB ～ 6.2 GB の十進値を指定します。AS キーワードはオプションです。デフォルト単位は MB です。MAXFILESIZE を指定しない場合、デフォルトの最大ファイルサイズは 6.2 GB です。マニフェストファイルが使用されている場合、このサイズは MAXFILESIZE に影響されません。</p>
               </dd>
             
               <dt id="unload-rowgroupsize"><span class="term">ROWGROUPSIZE [AS] サイズ [MB | GB] </span></dt>
               <dd>
                  <p>行グループのサイズを指定します。大きいサイズを選択すると、行グループの数を減らし、ネットワーク通信量を減らすことができます。32 MBから 128 MB の間の整数値を指定します。AS キーワードはオプションです。デフォルト単位は MB です。</p>
                  <p>ROWGROUPSIZE が指定されなかった場合、デフォルトのサイズは 32 MB です。このパラメータを使用するには、ストレージ形式がParquet で、ノードタイプが ra3.4xlarge、ra3.16xlarge、ds2.8xlarge、または dc2.8xlarge である必要があります。</p>
               </dd>
             
               <dt id="unload-region"><span class="term">REGION [AS] '<em>aws-region</em>'</span></dt>
               <dd>
                  <p>ターゲットの Amazon S3 バケットがある AWS リージョン を指定します。Amazon Redshift データベースと同じ AWS リージョン にない Amazon S3 バケットへの UNLOAD には、REGION が必要です。</p>
                  <p><em>aws_region</em> の値は、「<em>AWS 全般のリファレンス</em>」の「<a href="https://docs.aws.amazon.com/general/latest/gr/rande.html#redshift_region">Amazon Redshift のリージョンとエンドポイント</a>」の表に記載されている AWS リージョンと一致している必要があります。</p>
                  <p>デフォルトでは、UNLOAD は、ターゲットの Amazon S3 バケットは、Amazon Redshift データベースと同じ AWS リージョン にあると見なします。</p>
               </dd>
             
               <dt id="unload-extension"><span class="term">拡張子「<em>extension-name</em>」</span></dt>
               <dd>
                  <p>アンロードされたファイルの名前に付加するファイル拡張子を指定します。Amazon Redshift は検証を実行しないため、指定したファイル拡張子が正しいことを確認する必要があります。GZIP などの圧縮方法を使用している場合でも、拡張子パラメータで <code class="code">.gz</code> を指定する必要があります。拡張子を指定しない場合、Amazon Redshift はファイル名に何も追加しません。拡張子を指定せずに圧縮方法を指定した場合、Amazon Redshift は圧縮方法の拡張子のみをファイル名に追加します。</p>
               </dd>
            </dl></div>
       
         <h2 id="unload-usage-notes">使用に関する注意事項</h2>
          
            <h3 id="unload-usage-escape">区切り文字が使われているすべての UNLOAD 操作に対する ESCAPE の使用</h3>
            <p>区切り文字を使用して UNLOAD する場合、データにはその区切り文字、または ESCAPE オプションの説明に一覧表示されている任意の文字を含めることができます。この場合は、UNLOAD ステートメントで ESCAPE オプションを使用する必要があります。UNLOAD コマンドで ESCAPE オプションを使用しない場合、その後のアンロードされたデータを使用する COPY 操作は失敗する可能性があります。</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>必ず UNLOAD ステートメントと COPY ステートメントの両方で ESCAPE オプションを使用することを強くお勧めします。ただし、データに区切り文字が含まれていないこと、またはエスケープが必要となる可能性のあるその他の文字が含まれていないことが確実である場合は除きます。</p></div></div>
          
          
            <h3 id="unload-usage-floating-point-precision">浮動小数点精度の損失</h3>
            <p>アンロードと再ロードを連続して実行した浮動小数点データは精度を失っていることがあります。</p>
          
          
            <h3 id="unload-usage-limit-clause">Limit 句</h3>
            <p>SELECT クエリは、外部の SELECT で LIMIT 句を使用することはできません。例えば、次の UNLOAD ステートメントは失敗します。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue limit 10')
to 's3://mybucket/venue_pipe_' iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'; </code></pre>
            <p>代わりに、次の例のようにネストした LIMIT 句を使用してください。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue where venueid in
(select venueid from venue order by venueid desc limit 10)')
to 's3://mybucket/venue_pipe_' iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole';</code></pre>
            <p>SELECT…INTO を使ってテーブルを入力するか、LIMIT 句を使って CREATE TABLE AS を実行し、そのテーブルからアンロードすることもできます。</p>
          
          
            <h3 id="unload-usage-geometry">GEOMETRY データ型の列のアップロード</h3>
            <p>GEOMETRY 列はテキストまたは CSV 形式でのみアップロードできます。<code class="code">FIXEDWIDTH</code> オプションを使用して、GEOMETRY データをアップロードすることはできません。データは、16 進数の Extended Well-Known Binary (EWKB) 形式でアップロードされます。EWKB データのサイズが 4 MB 以上の場合、後でテーブルにデータをロードできなくなるため、警告が表示されます。</p>
          


          
            <h3 id="unload-usage-hll">HLLSKETCH データ型のアンロード</h3>

            <p>HLLSKETCH 列はテキストまたは CSV 形式でのみアンロードできます。<code class="code">FIXEDWIDTH</code> オプションを使用して、HLLSKETCH データをアップロードすることはできません。データは、デンスの HyperLogLog スケッチの場合は Base64 形式、スパースの HyperLogLog スケッチの場合は JSON 形式でアンロードされます。詳細については、「<a href="./hyperloglog-functions.html">HyperLogLog 関数</a>」を参照してください。</p>
            <p>次の例では、HLLSKETCH 列を含むテーブルをファイルにエクスポートします。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE TABLE a_table(an_int INT, b_int INT);
INSERT INTO a_table VALUES (1,1), (2,1), (3,1), (4,1), (1,2), (2,2), (3,2), (4,2), (5,2), (6,2);

CREATE TABLE hll_table (sketch HLLSKETCH);
INSERT INTO hll_table select hll_create_sketch(an_int) from a_table group by b_int;

UNLOAD ('select * from hll_table') TO 's3://mybucket/unload/'
IAM_ROLE 'arn:aws:iam::0123456789012:role/MyRedshiftRole' NULL AS 'null' ALLOWOVERWRITE CSV;</code></pre>
          

          
            
            <h3 id="unload-usage-varbyte">VARBYTE データ型の列のアンロード</h3>
            <p>VARBYTE列はテキストまたは CSV 形式でのみアンロードできます。データは 16 進数形式でアンロードされます。<code class="code">FIXEDWIDTH</code> オプションを使用して、VARBYTE データをアンロードすることはできません。CSV に UNLOAD するための <code class="code">ADDQUOTES</code> オプションはサポートされていません。VARBYTE 列は、PARTITIONED BY 列にすることはできません。</p>
          


          
            <h3 id="unload-parquet-usage">FORMAT AS PARQUET 句</h3>
            <p>FORMAT AS PARQUET を使用する場合は、次の考慮事項に注意してください。</p>
            <div class="itemizedlist">
                
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>[Unload to Parquet (Parquet にアンロード)] では、ファイルレベルの圧縮は使用されません。各行グループは SNAPPY で圧縮されます。</p>
               </li><li class="listitem">
                  <p>MAXFILESIZE を指定しない場合、デフォルトの最大ファイルサイズは 6.2 GB です。MAXFILESIZE を使用して、5 MB～6.2 GB のファイルサイズを指定できます。実際のファイルサイズは、ファイルの書き込み時に概算されるため、指定した数と正確に等しくない場合があります。</p>
                  <p>スキャンパフォーマンスを最大化するため、Amazon Redshift はまったく同じサイズの 32 MB の行グループを含む Parquet ファイルの作成を試みます。指定した MAXFILESIZE 値は、32 MB の最も近い倍数に自動的に切り捨てられます。例えば、MAXFILESIZE 200 MB を指定すると、アンロードされた各 Parquet ファイルは約 192 MB になります (32 MB の行グループ x 6 = 192 MB)。</p>
               </li><li class="listitem">
                  <p>列で TIMESTAMPTZ データ形式が使用されている場合、タイムスタンプ値のみがアンロードされます。タイムゾーン情報はアンロードされません。</p>
               </li><li class="listitem">
                  <p>アンダースコア (_) 文字またはピリオド (.) 文字で始まるファイル名プレフィックスを指定しないでください。Redshift Spectrum は、これらの文字で始まるファイルを隠しファイルとして処理し、無視します。</p>
               </li></ul></div>
          
          
            <h3 id="unload-partitionby-usage">PARTITION BY 句</h3>
            <p>PARTITION BY を使用する場合は、次の考慮事項に注意してください。</p>
            <div class="itemizedlist">

                
                
                
                
                
                

            <ul class="itemizedlist"><li class="listitem">
                  <p>パーティション列は出力ファイルに含まれていません。</p>
               </li><li class="listitem">
                  <p>必ず、UNLOAD ステートメントで使用される SELECT クエリにパーティション列を含めてください。UNLOAD コマンドでは、任意の数のパーティション列を指定できます。ただし、ファイルの一部となる非パーティション列が少なくとも 1 つ存在する必要があるという制限があります。</p>
               </li><li class="listitem">
                  <p>パーティションキー値が null の場合、Amazon Redshift はそのデータをデフォルトパーティション (<code class="code">partition_column=__HIVE_DEFAULT_PARTITION__</code>) に自動的にアンロードします。</p>
               </li><li class="listitem">
                  <p>UNLOAD コマンドでは、外部カタログへの呼び出しは行われません。新しいパーティションを既存の外部テーブルの一部として登録するには、別個の ALTER TABLE ..。ADD PARTITION ... コマンドを使用します。または、CREATE EXTERNAL TABLE コマンドを実行して、アンロードされたデータを新しい外部テーブルとして登録することもできます。また、AWS Glueクローラを使用して、データカタログにデータを入力することもできます。詳細については、<em>AWS Glueデベロッパーガイド</em>の「<a href="https://docs.aws.amazon.com/glue/latest/dg/add-crawler.html">クローラの定義</a>」を参照してください。</p>
               </li><li class="listitem">
                  <p>MANIFEST オプションを使用する場合、Amazon Redshift はルート Amazon S3 フォルダにマニフェストファイルを 1 つだけ生成します。</p>
               </li><li class="listitem">
                  <p>パーティションキーとして使用できる列のデータ型は、SMALLINT、INTEGER、BIGINT、DECIMAL、REAL、BOOLEAN、CHAR、VARCHAR、DATE および TIMESTAMP です。</p>
               </li></ul></div>
          
         

         


         

          
            <h3 id="unload-assumerole-privilege-usage">ASSUMEROLE 権限を使用して、UNLOAD オペレーションの IAM ロールへのアクセスを許可する</h3>

            <p>特定のユーザーおよびグループに UNLOAD オペレーション用の IAM ロールへのアクセスを提供するために、スーパーユーザーは IAM ロールに対する ASSUMEROLE 権限をユーザーおよびグループに付与できます。詳細については、<a href="./r_GRANT.html">GRANT</a>を参照してください。</p>

          

          
            <h3 id="unload-usage-s3-access-point-alias">UNLOAD は、Amazon S3 アクセスポイントのエイリアスをサポートしていません</h3>

            <p>UNLOAD コマンドで、Amazon S3 アクセスポイントのエイリアスを使用することはできません。</p>
          
         
       
            <h2 id="r_UNLOAD-examples">例</h2>
            <p>UNLOAD コマンドの使用方法の例については、「<a href="./r_UNLOAD_command_examples.html">UNLOAD の例</a>」を参照してください。</p>
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>ブラウザで JavaScript が無効になっているか、使用できません。</strong></p><p>AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。手順については、使用するブラウザのヘルプページを参照してください。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">ドキュメントの表記規則</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_TRUNCATE.html">TRUNCATE</div><div id="next" class="next-link" accesskey="n" href="./r_UNLOAD_command_examples.html">UNLOAD の例</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">このページは役に立ちましたか? - はい</div><div class="content"><p>ページが役に立ったことをお知らせいただき、ありがとうございます。</p><p>お時間がある場合は、何が良かったかお知らせください。今後の参考にさせていただきます。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">このページは役に立ちましたか? - いいえ</div><div class="content"><p>このページは修正が必要なことをお知らせいただき、ありがとうございます。ご期待に沿うことができず申し訳ありません。</p><p>お時間がある場合は、ドキュメントを改善する方法についてお知らせください。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>