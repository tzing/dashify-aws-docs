<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ja-JP"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>クエリのトラブルシューティング - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="queries-troubleshooting" /><meta name="default_state" content="queries-troubleshooting" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" /><meta name="description" content="このセクションは、Amazon Redshift クエリで発生する可能性のある一般的な問題と重大な問題を特定し、それらの問題に対処するためのクイックリファレンスとして追加しました。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="データベース開発者ガイド" /><meta name="abstract" content="エンタープライズレベル、ペタバイト規模、フルマネージドのデータウェアハウスサービス、Amazon Redshift を使用してデータウェアハウスを作成および管理できます。" /><meta name="guide-locale" content="ja_jp" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/queries-troubleshooting.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/queries-troubleshooting.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/queries-troubleshooting.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/queries-troubleshooting.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/queries-troubleshooting.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/queries-troubleshooting.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/queries-troubleshooting.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/queries-troubleshooting.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/queries-troubleshooting.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/queries-troubleshooting.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/queries-troubleshooting.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/queries-troubleshooting.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/queries-troubleshooting.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/queries-troubleshooting.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/queries-troubleshooting.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="データベース開発者ガイド" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="データベース開発者ガイド" /><meta id="panorama-serviceConsolePage" value="クエリのトラブルシューティング" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>クエリのトラブルシューティング - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#queries-troubleshooting" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,クラスター,データウェアハウス,開発者,サンプルデータ,データベース,データベース開発者,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "データベース開発者ガイド",
        "item" : "https://docs.aws.amazon.com/ja_jp/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "クエリパフォーマンスのチューニング",
        "item" : "https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-optimizing-query-performance.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "クエリのトラブルシューティング",
        "item" : "https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-optimizing-query-performance.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#queries-troubleshooting" target="_blank" rel="noopener noreferrer" title="PDF を開く"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">ドキュメント</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">データベース開発者ガイド</a></div><div id="page-toc-src"><a href="#queries-troubleshooting-connection-fails">接続できない</a><a href="#queries-troubleshooting-query-hangs">クエリがハングする</a><a href="#queries-troubleshooting-query-takes-too-long">クエリに時間がかかりすぎる</a><a href="#queries-troubleshooting-load-fails">ロードが失敗する</a><a href="#queries-troubleshooting-load-takes-too-long">ロードに時間がかかりすぎる</a><a href="#queries-troubleshooting-load-data-incorrect">ロードデータが正しくない</a><a href="#set-the-JDBC-fetch-size-parameter">JDBC フェッチサイズパラメータの設定</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="queries-troubleshooting">クエリのトラブルシューティング</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>このセクションは、Amazon Redshift クエリで発生する可能性のある一般的な問題と重大な問題を特定し、それらの問題に対処するためのクイックリファレンスとして追加しました。</p><div class="highlights" id="inline-topiclist"><h6>トピック</h6><ul><li><a href="#queries-troubleshooting-connection-fails">接続できない</a></li><li><a href="#queries-troubleshooting-query-hangs">クエリがハングする</a></li><li><a href="#queries-troubleshooting-query-takes-too-long">クエリに時間がかかりすぎる</a></li><li><a href="#queries-troubleshooting-load-fails">ロードが失敗する</a></li><li><a href="#queries-troubleshooting-load-takes-too-long">ロードに時間がかかりすぎる</a></li><li><a href="#queries-troubleshooting-load-data-incorrect">ロードデータが正しくない</a></li><li><a href="#set-the-JDBC-fetch-size-parameter">JDBC フェッチサイズパラメータの設定</a></li></ul></div><p>これらの提案は、トラブルシューティングの最初のステップです。以下のリソースにはより詳細な情報が記載されていますので、合わせて参照してください。</p><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="https://docs.aws.amazon.com/redshift/latest/mgmt/using-rs-tools.html">Amazon Redshift クラスターとデータベースへのアクセス</a></p>
         </li></ul></div><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="./t_Creating_tables.html">自動テーブル最適化の使用</a></p>
         </li></ul></div><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="./t_Loading_data.html">データのロード</a></p>
         </li></ul></div><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="./tutorial-loading-data.html">チュートリアル: Amazon S3 からデータをロードする</a></p>
         </li></ul></div><h2 id="queries-troubleshooting-connection-fails">接続できない</h2>
         
         <p>クエリの接続が失敗する理由としては、以下が考えられます。以下に示す方法でトラブルシューティングすることをお勧めします。</p>
          
            <h6>クライアントがサーバーに接続できない</h6>
            <p>SSL またはサーバー証明書を使用している場合、接続の問題をトラブルシューティングしているときにまずこの複雑さを排除します。その後、解決策を見つけたら、もう一度 SSL またはサーバー証明書を追加します。詳細については、「<em>Amazon Redshift 管理ガイド</em>」の「<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-ssl-support.html">接続のセキュリティオプションを設定する</a>」を参照してください。</p>
          
          
            <h6>接続が拒否される</h6>
            <p>一般的に、接続の確立に失敗したことを示すエラーメッセージを受け取った場合、クラスターにアクセスするためのアクセス許可に問題があることを意味します。詳細については、「<em>Amazon Redshift 管理ガイド</em>」の「<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-refusal-failure-issues.html">接続が拒否または失敗する</a>」を参照してください。</p>
          
      <h2 id="queries-troubleshooting-query-hangs">クエリがハングする</h2>
         
         <p>クエリがハングする、または応答しなくなる理由としては、以下が考えられます。以下に示す方法でトラブルシューティングすることをお勧めします。</p>
          
            <h6>データベースへの接続が中断された</h6>
            <p>最大送信単位 (MTU) のサイズを小さくします。MTU サイズにより、ネットワーク接続を介して 1 つのイーサネットフレームで転送できるパケットの最大サイズ (バイト単位) が決まります。詳細については、「<em>Amazon Redshift 管理ガイド</em>」の「<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-drop-issues.html">The connection to the database is dropped</a>」(データベースへの接続が中断する) を参照してください </p>
          
          
            <h6>データベースへの接続がタイムアウトした</h6>
            <p>COPY コマンドなどの長いクエリを実行すると、データベースへのクライアント接続がハングまたはタイムアウトしているように見えます。この場合、Amazon Redshift コンソールにはクエリが完了したと表示されますが、クライアントツール自体はまだクエリを実行しているように見えることがあります。接続がいつ停止したかに応じて、クエリの結果がないか、不完全になる可能性があります。この効果は、中間ネットワークコンポーネントによってアイドル接続が終了すると発生します。詳細については、「<em>Amazon Redshift 管理ガイド</em>」の「<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-firewall-guidance.html">Firewall Timeout Issue</a>」(ファイアウォールのタイムアウト問題) を参照してください。</p>
          
          
            <h6>ODBC 使用時にクライアント側のメモリ不足エラーが発生する</h6>
            <p>クライアントアプリケーションが ODBC 接続を使用し、クエリで作成される結果セットが大きすぎてメモリが足りなくなる場合、カーソルを使用して、結果セットをクライアントアプリケーションに渡すことができます。詳細については、「<a href="./declare.html">DECLARE</a>」および「<a href="./declare.html#declare-performance">カーソルを使用するときのパフォーマンスに関する考慮事項</a>」を参照してください。</p>
          
          
            <h6>JDBC 使用時にクライアント側のメモリ不足エラーが発生する</h6>
            <p>JDBC 接続で大規模な結果セットを取得しようとすると、クライアント側のメモリ不足エラーが発生する可能性があります。詳細については、「<a href="#set-the-JDBC-fetch-size-parameter">JDBC フェッチサイズパラメータの設定</a>」を参照してください。</p>
          
          
            <h6>デッドロックがある可能性がある </h6>
            <p>デッドロックがあると考えられる場合は、以下を試してください。</p>
          
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p><a href="./r_STV_LOCKS.html">STV_LOCKS</a> および <a href="./r_STL_TR_CONFLICT.html">STL_TR_CONFLICT</a> システムテーブルで複数のテーブルの更新に起因する競合を見つけます。</p>
            </li><li class="listitem">
               <p><a href="./PG_CANCEL_BACKEND.html">PG_CANCEL_BACKEND</a> 関数を使用して、1 つ以上の競合しているクエリをキャンセルします。</p>
            </li><li class="listitem">
               <p><a href="./PG_TERMINATE_BACKEND.html">PG_TERMINATE_BACKEND</a> 関数を使用して、セッションを終了します。これにより、終了したセッションで現在実行されているトランザクションがすべてのロックを解除し、トランザクションがロールバックされます。</p>
            </li><li class="listitem">
               <p>同時書き込み操作のスケジュールを慎重に設定します。詳細については、「<a href="./c_Concurrent_writes.html">同時書き込み操作を管理する</a>」を参照してください。</p>
            </li></ul></div>
      <h2 id="queries-troubleshooting-query-takes-too-long">クエリに時間がかかりすぎる</h2>
         
         <p>クエリに時間がかかりすぎる理由としては、以下が考えられます。以下に示す方法でトラブルシューティングすることをお勧めします。</p>
          
            <h6>テーブルが最適化されていない</h6>
            <p>並列処理を最大限に活用できるようにテーブルのソートキー、分散スタイル、および圧縮エンコードを設定します。詳細については、<a href="./t_Creating_tables.html">自動テーブル最適化の使用</a>を参照してください。</p>
          
          
            <h6>クエリがディスクに書き込みを行っている</h6>
            <p>クエリが少なくともクエリ実行の一部でディスクに書き込みを行っている可能性があります。詳細については、「<a href="./query-performance-improvement-opportunities.html"> クエリパフォーマンスの向上</a>」を参照してください。</p>
          
          
            <h6>クエリが他のクエリの終了を待つ必要がある</h6>
            <p>クエリキューを作成し、別の種類のクエリを適切なキューに割り当てることで、システムの全体的なパフォーマンスを改善できる可能性があります。詳細については、「<a href="./cm-c-implementing-workload-management.html">ワークロード管理の実装</a>」を参照してください。</p>
          
          
            <h6>クエリが最適化されていない</h6>
            <p>説明プランを分析して、クエリを書き換えることが可能かどうか、またはデータベースを最適化することが可能かどうかを調べます。詳細については、「<a href="./c-the-query-plan.html">クエリプラン</a>」を参照してください。</p>
          
          
            <h6>クエリの実行により多くのメモリが必要である</h6>
            <p>特定のクエリにより多くのメモリが必要な場合は、<a href="./r_wlm_query_slot_count.html">wlm_query_slot_count</a>を増やすことによって使用可能なメモリを増やすことができます。</p>
          
          
            <h6>データベースに対して VACUUM コマンドを実行する必要がある</h6>
            <p>大量の行数を追加、削除、変更した場合、データをソートキー順序でロードしていなければ、VACUUM コマンドを実行します。VACUUM コマンドを実行すると、データが再編成され、ソート順序が維持され、パフォーマンスが復旧されます。詳細については、「<a href="./t_Reclaiming_storage_space202.html">テーブルのバキューム処理</a>」を参照してください。</p>
          

         <h3 id="queries-troubleshooting-cross-refs">実行時間の長いクエリのトラブルシューティングに役立つその他のリソース</h3>
            <p>以下は、クエリのチューニングに役立つシステムビューのトピックとその他のドキュメントセクションです。</p>
            <div class="itemizedlist">
                
                
                
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p><a href="./r_STV_INFLIGHT.html">STV_INFLIGHT</a> システムビューには、クラスターで実行されているクエリが表示されます。<a href="./r_STV_RECENTS.html">STV_RECENTS</a> と一緒に使用すると、現在実行中のクエリや最近完了したクエリを判別できます。</p></li><li class="listitem"><p><a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a> はトラブルシューティングに役立ちます。DDL クエリと DML クエリが、関連するプロパティと共に表示されます。例えば、<code class="code">running</code> や <code class="code">failed</code> などの現在のステータス、それぞれの実行にかかった時間、同時実行スケーリングクラスターに対してクエリが実行されたかどうかなどを確認できます。</p></li><li class="listitem"><p><a href="./r_STL_QUERYTEXT.html">STL_QUERYTEXT</a> は、SQL コマンドのクエリテキストを取得します。さらに、STL_QUERYTEXT を STV_INFLIGHT に結合する <a href="./r_SVV_QUERY_INFLIGHT.html">SVV_QUERY_INFLIGHT</a> には、より多くのクエリメタデータが表示されます。</p></li><li class="listitem"><p>トランザクションロックの競合は、クエリパフォーマンスの問題を引き起こす可能性があります。現在テーブルをロックしているトランザクションについては、「<a href="./r_SVV_TRANSACTIONS.html">SVV_TRANSACTIONS</a>」を参照してください。</p></li><li class="listitem"><p>「<a href="https://docs.aws.amazon.com/redshift/latest/dg/diagnostic-queries-for-query-tuning.html#identify-queries-that-are-top-candidates-for-tuning">優先して調整が必要なクエリの特定</a>」には、最近実行したどのクエリが最も時間がかかったかを判断するのに役立つトラブルシューティングクエリが紹介されています。これにより、改善が必要なクエリに集中して取り組むことができます。</p></li><li class="listitem"><p>クエリ管理の詳細を参照し、クエリキューの管理方法を理解したい場合は、「<a href="./cm-c-implementing-workload-management.html">ワークロード管理の実装</a>」にその方法が記載されています。ワークロード管理は高度な機能であるため、通常は自動ワークロード管理を利用することをお勧めします。</p></li></ul></div>
          
         
         
      <h2 id="queries-troubleshooting-load-fails">ロードが失敗する</h2>
         
         <p>データのロードが失敗する理由としては、以下が考えられます。以下に示す方法でトラブルシューティングすることをお勧めします。</p>
          
            <h6>データソースが別の AWS リージョンにある</h6>
            <p>デフォルトでは、COPY コマンドで指定された Amazon S3 バケットまたは Amazon DynamoDB テーブルは、クラスターと同じ AWS リージョンに置かれている必要があります。データとクラスターが異なるリージョンにある場合、次のようなエラーが発生します。</p>
          
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="コピー"><awsui-icon name="copy"></awsui-icon></div></div><code class="">The bucket you are attempting to access must be addressed using the specified endpoint.</code></pre>
         <p>可能な限り、クラスターとデータソースが同じリージョンに配置されるようにしてください。COPY コマンドで <a href="./copy-parameters-data-source-s3.html#copy-region">REGION</a> オプションを使用することによって、別のリージョンを指定できます。</p>
         
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>クラスターとデータソースが異なる AWS リージョンにある場合、データ転送コストが発生します。レイテンシーも高くなります。</p></div></div>
          
            <h6>COPY コマンドが失敗する</h6>
            <p>STL_LOAD_ERRORS にクエリして、特定のロード中に発生したエラーを見つけます。詳細については、「<a href="./r_STL_LOAD_ERRORS.html">STL_LOAD_ERRORS</a>」を参照してください。</p>
          
      <h2 id="queries-troubleshooting-load-takes-too-long">ロードに時間がかかりすぎる</h2>
         
         <p>ロード操作に時間がかかりすぎる理由としては、以下が考えられます。以下に示す方法でトラブルシューティングすることをお勧めします。</p>
          
            <h6>COPY が 1 つのファイルからデータをロードする</h6>
            <p>ロードデータを複数のファイルに分割します。1 つの大容量ファイルからすべてのデータをロードする場合、Amazon Redshift は低速なシリアル化されたロードを実行します。ファイル数は、クラスター内のスライス数の倍数にする必要があり、ファイルはほぼ同じサイズ (圧縮後 1 MB～1 GB) にする必要があります。詳細については、「<a href="./c_designing-queries-best-practices.html">Amazon Redshift クエリの設計のベストプラクティス</a>」を参照してください。</p>
          
          
            <h6>ロード操作で複数の COPY コマンドを使用する</h6>
            <p>複数の COPY コマンドを同時に使用して複数のファイルから 1 つのテーブルをロードする場合、Amazon Redshift は低速なシリアル化されたロードを実行します。この場合、1 つの COPY コマンドを使用します。</p>
          
      <h2 id="queries-troubleshooting-load-data-incorrect">ロードデータが正しくない</h2>
         
         <p>COPY 操作がロードするデータが正しくない理由としては、以下が考えられます。以下に示す方法でトラブルシューティングすることをお勧めします。</p>
         
          
            <h6>違うファイルがロードされる</h6>
            <p>オブジェクトプレフィックスを使用してデータファイルを指定すると、不要なファイルが読み取られることがあります。ロードするファイルを正確に指定するには、代わりにマニフェストファイルを使用します。詳細については、COPY コマンドの <a href="./copy-parameters-data-source-s3.html#copy-manifest-file">copy_from_s3_manifest_file</a> オプションと COPY の例の <a href="./r_COPY_command_examples.html#copy-command-examples-manifest">Example: COPY from Amazon S3 using a manifest</a> を参照してください。</p>
          
      <h2 id="set-the-JDBC-fetch-size-parameter">JDBC フェッチサイズパラメータの設定</h2>
         <p>デフォルトでは、JDBC ドライバーはクエリに対して一度にすべての結果を収集します。その結果、JDBC 接続で大きな結果セットを取得しようとすると、クライアント側のメモリ不足エラーが発生する可能性があります。クライアントが 1 つのオールオアナッシングの取得ではなくバッチで結果セットを取得できるようにするには、JDBC フェッチサイズパラメータをクライアントアプリケーションで設定します。</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>フェッチサイズは ODBC ではサポートされません。</p></div></div>
         <p>最適なパフォーマンスのためには、メモリ不足エラーが発生しない最大の値にフェッチサイズを設定します。フェッチサイズの値を低く設定すると、サーバートリップが増え、それにより実行時間が長くなります。サーバーは、クライアントが結果セット全体を取得するまで、WLM クエリスロットおよび関連メモリを含むリソースを予約します。そうでない場合、クエリはキャンセルされます。フェッチサイズを適切に調整すると、それらのリソースはより迅速に解放され、他のクエリに利用できるようになります。</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注記</h6></div><div class="awsdocs-note-text"><p>大きなデータセットを抽出する必要がある場合は、<a href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html">UNLOAD</a> ステートメントを使用してデータを Amazon S3 に転送することをお勧めします。UNLOAD を使用するときは、コンピューティングノードは並行してデータの転送を高速化します。</p></div></div>
         <p>JDBC フェッチサイズパラメータの詳細については、PostgreSQL のドキュメントで「<a href="https://jdbc.postgresql.org/documentation/query/#getting-results-based-on-a-cursor" rel="noopener noreferrer" target="_blank"><span>Getting results based on a cursor</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>」を参照してください。</p>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>ブラウザで JavaScript が無効になっているか、使用できません。</strong></p><p>AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。手順については、使用するブラウザのヘルプページを参照してください。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">ドキュメントの表記規則</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./diagnostic-queries-for-query-tuning.html">クエリ調整用の診断クエリ</div><div id="next" class="next-link" accesskey="n" href="./cm-c-implementing-workload-management.html">ワークロード管理の実装</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">このページは役に立ちましたか? - はい</div><div class="content"><p>ページが役に立ったことをお知らせいただき、ありがとうございます。</p><p>お時間がある場合は、何が良かったかお知らせください。今後の参考にさせていただきます。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">このページは役に立ちましたか? - いいえ</div><div class="content"><p>このページは修正が必要なことをお知らせいただき、ありがとうございます。ご期待に沿うことができず申し訳ありません。</p><p>お時間がある場合は、ドキュメントを改善する方法についてお知らせください。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="フィードバック" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>