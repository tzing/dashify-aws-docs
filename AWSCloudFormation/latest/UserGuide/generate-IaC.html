<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Generating templates for existing resources - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="generate-IaC" /><meta name="default_state" content="generate-IaC" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/generate-IaC.html" /><meta name="description" content="Generate infrastructure as Code (IaC) templates from AWS resource types deployed in your account that are not managed by CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/generate-IaC.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Generating templates for existing resources" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Generating templates for existing resources - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/generate-IaC.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/generate-IaC.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/generate-IaC.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set,IaC generator,AWS CloudFormation IaC generator" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Working with AWS CloudFormation templates",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Generating templates for existing resources",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-guide.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#generate-template-considerations">Considerations</a><a href="#generate-template-console">Generating a template (console)</a><a href="#generate-template-cli">Generate a template (AWS CLI)</a><a href="#generate-IaC-cdk-migrate">Generate and manage templates with the AWS CDK</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="generate-IaC">Generating templates for existing resources</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>With the AWS CloudFormation <em>IaC generator</em> (infrastructure as code generator), you can generate a
  template using AWS resources provisioned in your account that are not already managed by CloudFormation. Use the
  template to import resources into CloudFormation or replicate resources in a new account or Region.</p><p>The IaC generation process consists of several steps:</p><div class="orderedlist">
   
   
   
   
 <ol><li>
   <p>Start a scan of your account.</p>
  </li><li>
   <p>Create a template, either from scratch or by using the template of an existing stack as a starting
    point.</p>
  </li><li>
   <p>Add scanned resources and related resources to the template using the <em>add resources
    wizard</em>.</p>
  </li><li>
   <p>Import the resources to be managed by CloudFormation as a stack or migrate them into an AWS CDK app.</p>
  </li></ol></div><p>The IaC generator feature is available in all commercial Regions and supports many common AWS resource types.
  For a full list, see <a href="./resource-import-supported-resources.html">Resource type support</a>.</p><div class="highlights"><h6>Topics</h6><ul><li><a href="#generate-template-considerations">Considerations</a></li><li><a href="#generate-template-console">Generating a template (console)</a></li><li><a href="#generate-template-cli">Generate a template (AWS CLI)</a></li><li><a href="#generate-IaC-cdk-migrate">Generate and manage templates with the AWS CDK</a></li><li><a href="./generate-IaC-write-only-properties.html">IaC generator and write-only properties</a></li><li><a href="./generate-IaC-lambda-function.html">Updating AWS::Lambda::Function resources</a></li><li><a href="./generate-IaC-apigateway-restapi.html">Updating AWS::ApiGateway::RestAPI resources</a></li></ul></div>
  <h2 id="generate-template-considerations">Considerations</h2>
  <p>You can generate <code class="code">JSON</code> or <code class="code">YAML</code> templates for AWS resources published to the
   CloudFormation registry, for resources for which you have Read permissions. The templates for the IaC
   generator capability models cloud resources reliably and quickly without having to describe a resource property by
   property.</p>
  <p>The following table lists the quotas available for the IaC generation feature.</p>
  <div class="table-container"><div class="table-contents"><table id="w1355aac23c23c15b7"><thead>
     <tr>
      <th>Name</th>
      <th>Value</th>
     </tr>
    </thead>
     <tr>
      <td tabindex="-1">
       <p>Maximum number of resources that can be processed in an account scan</p>
      </td>
      <td tabindex="-1">
       <p>100000</p>
      </td>
     </tr>
     <tr>
      <td tabindex="-1">
       <p>Number of scans per day (for accounts with less than 10,000 resources)</p>
      </td>
      <td tabindex="-1">
       <p>3</p>
      </td>
     </tr>
     <tr>
      <td tabindex="-1">
       <p>Number of scans per day (for accounts with more than 10,000 resources)</p>
      </td>
      <td tabindex="-1">
       <p>1</p>
      </td>
     </tr>
     <tr>
      <td tabindex="-1">
       <p>Concurrent number of templates generating per account</p>
      </td>
      <td tabindex="-1">
       <p>5</p>
      </td>
     </tr>
     <tr>
      <td tabindex="-1">
       <p>Concurrent number of resources modeled for one template generation.</p>
      </td>
      <td tabindex="-1">
       <p>5</p>
      </td>
     </tr>
     <tr>
      <td tabindex="-1">
       <p>Total number of resources that can be modeled in one template</p>
      </td>
      <td tabindex="-1">
       <p>500</p>
      </td>
     </tr>
    </table></div></div>
  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>IaC generator only supports resources that are supported by Cloud Control API in your Region. For more information, see
     <a href="https://docs.aws.amazon.com/cloudcontrolapi/latest/userguide/resource-types.html#resource-types-determine-support">Determining if a
     resource type supports Cloud Control API</a> in the <em>Cloud Control API User Guide</em></p></div></div>
  
  <h2 id="generate-template-console">Generating a template (console)</h2>
  <p>This section describes how to create a template, add resources to your template, and import resources from the
   template into a stack using the IaC generator feature.</p>
  
  <div class="procedure"><h6>To open a new template using the IaC generator</h6><ol><li><p>Sign in to the AWS Management Console and open the AWS CloudFormation console at
         <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
    <p>From the navigation pane, choose <b>IaC generator</b>.</p>
    <div class="mediaobject">
      
      <img src="/images/AWSCloudFormation/latest/UserGuide/images/IaC-generator.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      IaC generator console page&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li><li>
    <p>From the <b>Scans</b> panel, choose <b>Start a new scan</b>. Scans discover the
     resources provisioned in your account and the relationship between resources. The more resources you have in your
     account in the Region, the longer the scan takes.</p>
    <div class="mediaobject">
      
      <img src="/images/AWSCloudFormation/latest/UserGuide/images/IaC-generator-scans.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Scans panel of IaC generator console page&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li><li>
    <p>From the <b>Templates</b> panel, choose <b>Create template</b>.</p>
    <div class="mediaobject">
      
      <img src="/images/AWSCloudFormation/latest/UserGuide/images/IaC-generator-specify-template-details.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Specify template details page of IaC generator&#xA;     " style="max-width:100%" />
      
      
    </div>
    <ol><li>
      <p>Select <b>Start from a new template</b>.</p>
     </li><li>
      <p>In the <b>Template name</b> panel, enter a name for your generated template.</p>
     </li><li>
      <p>(Optional) Configure your <b>Deletion policy</b> and <b>Update replace
       policy</b>.</p>
     </li><li>
      <p>Choose <b>Next</b> to add scanned resources to the template.</p>
     </li></ol>
   </li></ol></div>
  
  <div class="procedure"><h6>To add scanned resources to your template</h6><ol><li>
    <p>From the list of scanned resources, browse the list of scanned resources. You can filter the resources by
     resource identifier, resource type, or tags. The filters are mutually inclusive.</p>
    <div class="mediaobject">
      
      <img src="/images/AWSCloudFormation/latest/UserGuide/images/IaC-generator-add-scanned-resources.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Add scanned resources panel of IaC generator&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li><li>
    <p>Select the resource or resources you want to add.</p>
    <p>Repeat Steps 1 and 2, until you've added all needed resources to your template.</p>
    <div class="mediaobject">
      
      <img src="/images/AWSCloudFormation/latest/UserGuide/images/IaC-generator-add-scanned-selected-resources.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Select scanned resources in add of IaC generator&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li><li>
    <p>Choose <b>Next</b> to exit the <b>Add scanned resources</b> page and proceed to
     the <b>Add related resources</b> page.</p>
   </li><li>
    <p>Review a recommended list of related resources. Related resources, such as Amazon EC2 instances and security
     groups, are interdependent and typically belong to the same workload. Select the related resources that you want to
     include in the generated template.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>We suggest that you add all related resources to this template.</p></div></div>
    <div class="mediaobject">
      
      <img src="/images/AWSCloudFormation/latest/UserGuide/images/IaC-generator-add-related-resources.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Add related resources in IaC generator&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li><li>
    <p>Review the template details, scanned resources, and related resources. Choose <b>Edit</b> to
     make any changes.</p>
   </li><li>
    <p>Choose <b>Create template</b> to exit the <b>Review and create</b> page and create
     the template.</p>
    <div class="mediaobject">
      
      <img src="/images/AWSCloudFormation/latest/UserGuide/images/IaC-generator-review-and-create.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Review and create template in IaC generator&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li></ol></div>
  <p><em>Results</em>: You've started the creation of your CloudFormation template and added your scanned and
   related resources.</p>
  <div class="procedure"><h6>To import resources to be managed by CloudFormation as a stack</h6><ol><li>
    
    <p>Choose <b>Import to stack</b> and then choose <b>Next</b>.</p>
   </li><li>
    <p>Enter the name of your stack on the <b>Specify stack</b> panel of the <b>Specify stack
     details</b> page. Choose <b>Next</b>.</p>
   </li><li>
    <p>Review and enter the <a href="./parameters-section-structure.html">parameters</a> for the stack. Choose
     <b>Next</b>.</p>
    
   </li><li>
    <p>Review your options on the <b>Review changes</b> page and choose
     <b>Next</b>.</p>
   </li><li>
    <p>Review your details on the <b>Review and import</b> page and choose <b>Import
     resources</b>.</p>
   </li></ol></div>
  <p><em>Results</em>: All resources added to your template with IaC generator are imported into a
   CloudFormation stack.</p>
  
  <h2 id="generate-template-cli">Generate a template (AWS CLI)</h2>
  <p>This section describes how to scan for resources, create a template, add resources to your template and update
   it, and delete a template using the AWS CLI.</p>
  <div class="procedure"><h6>To scan for resources in your account</h6><ul><li>
    <p>To scan for resources in your account in the selected Region, use the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/start-resource-scan.html">start-resource-scan</a> operation.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation start-resource-scan</code></code></pre>
    <p>The command returns the following:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "ResourceScanId": \
      "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:resourceScan/<code class="replaceable">0a699f15-489c-43ca-a3ef-3e6ecfa5da60</code>"
}</code></pre>
   </li></ul></div>
  <div class="procedure"><h6>To describe the account resource scan</h6><ul><li>
    <p>To describe the scan for resources in your account, use the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/describe-resource-scan.html">describe-resource-scan</a>
     operation.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation describe-resource-scan \
  --resource-scan-id \
    "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:resourceScan/<code class="replaceable">0a699f15-489c-43ca-a3ef-3e6ecfa5da60</code>"</code></code></pre>
    <p>The command returns the following:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "ResourceScanId" : \
      "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:resourceScan/<code class="replaceable">0a699f15-489c-43ca-a3ef-3e6ecfa5da60</code>",
    "Status": "complete",
    "StartTime": "2023-08-21T03:10:38.485000+00:00",
    "EndTime": "2023-08-21T03:20:28.485000+00:00",
    "PercentageCompleted": 100.0,
    "ResourceTypes": [
        "AWS::EKS::Cluster",
        "AWS::S3::Bucket"
    ],
}</code></pre>
   </li></ul></div>
  <div class="procedure"><h6>To list all of the resources from your scan</h6><ul><li>
    <p>To list the resources found in your scan, use the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/list-resource-scan-resources.html">list-resource-scan-resources</a>
     operation. The response includes a column that indicates if CloudFormation manages the resource already.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation list-resource-scan-resources \
  --resource-scan-id \
    "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:resourceScan/<code class="replaceable">0a699f15-489c-43ca-a3ef-3e6ecfa5da60</code>" \
  --resource-identifier exampleResource</code></code></pre>
    <p>The command returns the following:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": [
        <span>{</span>
            "ResourceType": "AWS::EKS::Cluster",
            "ResourceIdentifier": <span>{</span>
                "ClusterName": "exampleResourceCluster"
            }
        },
            "ManagedByStack": false
        <span>{</span>
            "ResourceType": "AWS::S3::Bucket",
            "ResourceIdentifier": <span>{</span>
                "BucketName": "exampleResourceBucket"
            },
            "ManagedByStack": false
        }
    ]
}</code></pre>
    <p>In this example, assume the output from <code class="code">list-resource-scan-resources</code> is saved into a JSON file
     named <code class="code">resources.json</code>.</p>
   </li></ul></div>
  <div class="procedure"><h6>To list all of the resources related to your scanned resources</h6><ul><li>
    <p>To list the resources related to your scanned resources, create batches of up to 100 scanned resources and use
     the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/list-resource-scan-related-resources.html">list-resource-scan-related-resources</a> operation for each batch. Be aware that the output may contain
     duplicated resources in the list.</p>
    <p>The response includes a column that states if CloudFormation manages the resource already. It's recommended that
     you add all related resources to the template.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation list-resource-scan-related-resources \
  --resource-scan-id \
    "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:resourceScan/<code class="replaceable">0a699f15-489c-43ca-a3ef-3e6ecfa5da60</code>" \
  --resources file://<code class="replaceable">resources</code>.json</code></code></pre>
    <p>The command returns the following:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "RelatedResources": [
        <span>{</span>
            "ResourceType": "AWS::EKS::Nodegroup",
            "ResourceIdentifier": <span>{</span>
                "NodegroupName": "exampleNodegroup"
            },
            "ManagedByStack": false
        },
        <span>{</span>
            "ResourceType": "AWS::IAM::Role",
            "ResourceIdentifier": <span>{</span>
                "RoleId": "arn:aws::iam::<code class="replaceable">123456789012</code>:role/S3Access"
            },
            "ManagedByStack": false
        }
    ]
}</code></pre>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The input list of resources can't exceed a length of 100. To list related resources for more than 100
      resources, run the operation in batches of 100 and consolidate the results.</p></div></div>
    <p>Assume that the output from <code class="code">list-resource-scan-related-resources</code> is also added to the JSON file
     named <code class="code">resources.json</code>.</p>
   </li></ul></div>
  <div class="procedure"><h6>To generate a template</h6><ul><li>
    <p>To generate a new template with no resources, use the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/create-generated-template.html">create-generated-template</a>
     operation and specify the template name.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation create-generated-template \
  --generated-template-name <code class="replaceable">TemplateName</code></code></code></pre>
    <p>The <code class="code">create-generated-template</code> command returns the following.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Arn": \
    "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:generatedtemplate/<code class="replaceable">7fc8512c-d8cb-4e02-b266-d39c48344e48</code>",
  "Name": "<code class="replaceable">TemplateName</code>"
}</code></pre>
   </li></ul></div>
  <div class="procedure"><h6>To update the generated template with resources</h6><ul><li>
    <p>To update your newly created template, you can specify a list of resources you want to add. In this example,
     we use the file <code class="code">resources.json</code>. The following is the JSON text file for
     <code class="code">resources.json</code>:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">[
    <span>{</span>
        "ResourceType": "AWS::EKS::Cluster",
        "LogicalResourceId":"Cluster",
        "ResourceIdentifier": <span>{</span>
            "ClusterName": "exampleResourceCluster"
        }
    },
    <span>{</span>
        "ResourceType": "AWS::S3::Bucket",
        "LogicalResourceId":"Bucket",
        "ResourceIdentifier": <span>{</span>
            "BucketName": "exampleResourceBucket"
        }
    },
    <span>{</span>
        "ResourceType": "AWS::EKS::Nodegroup",
        "LogicalResourceId":"Nodegroup",
        "ResourceIdentifier": <span>{</span>
            "NodegroupName": "exampleNodegroup"
        }
    },
    <span>{</span>
        "ResourceType": "AWS::IAM::Role",
        "LogicalResourceId":"Role",
        "ResourceIdentifier": <span>{</span>
            "RoleId": "arn:aws::iam::<code class="replaceable">123456789012</code>:role/S3Access"
        }
    }
]</code></pre>
    <p>To update your template, use the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/update-generated-template.html">update-generated-template</a>
     operation, specify your stack name, and specify your text file to add resources to your template. The
     <code class="code">--cloud-formation-template-configuration</code> option isn't included, so the
     <code class="code">UpdateReplacePolicy</code> and <code class="code">DeletionPolicy</code> policies are set to <code class="code">Retain</code> by
     default.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation update-generated-template \
  --generated-template-name <code class="replaceable">TemplateName</code> \
  --add-resources file://<code class="replaceable">resources.json</code></code></code></pre>
    <p>The <code class="code">update-generated-template</code> command returns the following.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span> 
  "Arn": "arn:aws:cloudformation:us-east-1:123456789012:template/equipment-sorter",
  "Name": "<code class="replaceable">TemplateName</code>"
}</code></pre>
   </li></ul></div>
  <div class="procedure"><h6>To delete the specified template by stack name</h6><ul><li>
    <p>To delete your generated template, use the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/delete-generated-template.html">delete-generated-template</a>
     operation and specify the template generation name or template generation ARN.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation delete-generated-template \
  --generated-template-name <code class="replaceable">TemplateName</code></code></code></pre>
   </li></ul></div>
  
  
  <h2 id="generate-IaC-cdk-migrate">Generate and manage templates with the AWS CDK</h2>
  <p>The AWS Cloud Development Kit (AWS CDK) is an open-source software development framework that you can use to develop, manage, and deploy
   AWS CloudFormation resources using popular programming languages.</p>
  <p>The AWS CDK CLI provides an integration with IaC generator. Use the AWS CDK CLI <code class="code">cdk migrate</code> command to
   generate an AWS CloudFormation template and create a new CDK app that contains your resources. Then, you can use the AWS CDK to
   manage your resources and deploy to AWS CloudFormation.</p>
  <p>For more information, see <a href="https://docs.aws.amazon.com/cdk/v2/guide/migrate.html">Migrate to AWS CDK</a>
   in the <em>AWS Cloud Development Kit (AWS CDK) Developer Guide</em>.</p>
 <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./scenario-sqs-queue.html">Amazon SQS</div><div id="next" class="next-link" accesskey="n" href="./generate-IaC-write-only-properties.html">Write-only properties</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/generate-IaC.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/generate-IaC.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>