<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>cfn-signal - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="cfn-signal" /><meta name="default_state" content="cfn-signal" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-signal.html" /><meta name="description" content="Pause the stack creation process." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-signal.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-signal.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="cfn-signal" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>cfn-signal - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/cfn-signal.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/cfn-signal.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/cfn-signal.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Template reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "CloudFormation helper scripts reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-helper-scripts-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "cfn-signal",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-helper-scripts-reference.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#cfn-signal-Description">Description</a><a href="#w9aac34c42c29b5">Syntax for resource signaling (recommended)</a><a href="#cfn-signal-Syntaxwaitcondition">Syntax for use with wait condition
               handle</a><a href="#cfn-signal-options">Options</a><a href="#cfn-signal-Examples">Example</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="cfn-signal">cfn-signal</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div>
         <h2 id="cfn-signal-Description">Description</h2>

         <p>The cfn-signal helper script signals CloudFormation to indicate whether Amazon EC2 instances
            have been successfully created or updated. If you install and configure software
            applications on instances, you can signal CloudFormation when those software applications
            are ready.</p>
         <p>You use the cfn-signal script in conjunction with a <a href="./aws-attribute-creationpolicy.html">CreationPolicy attribute</a>
            or an Auto Scaling group with a <a href="./aws-attribute-updatepolicy.html">WaitOnResourceSignals</a> update policy. When CloudFormation creates
            or updates resources with those policies, it suspends work on the stack until the
            resource receives the requisite number of signals or until the timeout period is
            exceeded. For each valid signal that CloudFormation receives, CloudFormation publishes the
            signals to the stack events so that you track each signal. For a walkthrough that uses a
            creation policy and cfn-signal, see <a href="./deploying.applications.html">Deploying applications on Amazon EC2 with AWS CloudFormation</a>.</p>

         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>cfn-signal doesn't require credentials, so you don't need to use the
                  <code class="code">--access-key</code>, <code class="code">--secret-key</code>, <code class="code">--role</code>, or
                  <code class="code">--credential-file</code> options. However, if no credentials are specified,
               CloudFormation checks for stack membership and limits the scope of the call to the stack
               that the instance belongs to.</p></div></div>
       
         <h2 id="w9aac34c42c29b5">Syntax for resource signaling (recommended)</h2>

         <p>If you want to signal CloudFormation resources, use the following syntax.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">cfn-signal --success|-s <code class="replaceable">signal.to.send</code> \
        --access-key <code class="replaceable">access.key</code> \
        --credential-file|-f <code class="replaceable">credential.file</code> \
        --exit-code|-e <code class="replaceable">exit.code</code> \
        --http-proxy <code class="replaceable">HTTP.proxy</code> \
        --https-proxy <code class="replaceable">HTTPS.proxy</code> \
        --id|-i <code class="replaceable">unique.id</code> \
        --region <code class="replaceable">AWS.region</code> \
        --resource <code class="replaceable">resource.logical.ID</code> \
        --role <code class="replaceable">IAM.role.name</code> \
        --secret-key <code class="replaceable">secret.key</code> \
        --stack <code class="replaceable">stack.name.or.stack.ID</code> \
        --url <code class="replaceable">AWS CloudFormation.endpoint</code></code></pre>
       
         <h2 id="cfn-signal-Syntaxwaitcondition">Syntax for use with wait condition
               handle</h2>

         <p>If you want to signal a wait condition handle, use the following syntax.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">cfn-signal --success|-s <code class="replaceable">signal.to.send</code> \
        --reason|-r <code class="replaceable">resource.status.reason</code> \
        --data|-d <code class="replaceable">data</code> \
        --id|-i <code class="replaceable">unique.id</code> \
        --exit-code|-e <code class="replaceable">exit.code</code> \
        <code class="replaceable">waitconditionhandle.url</code></code></pre>
       
         <h2 id="cfn-signal-options">Options</h2>

         <p>The options that you can use depend on whether you're signaling a creation policy or
            a wait condition handle. Some options that apply to a creation policy might not apply to
            a wait condition handle.</p>
         <div class="table-container"><div class="table-contents"><table id="w1355aac34c42c29b9b5"><thead>
                  <tr>
                     <th>Name</th>
                     <th>Description</th>
                     <th>Required</th>
                  </tr>
               </thead>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">--access-key</code> (resource signaling only)</p>
                     </td>
                     <td tabindex="-1">
                        <p>AWS access key for an account with permission to call the CloudFormation
                              <code class="code">SignalResource </code>API. The credential file parameter
                           supersedes this parameter.</p>
                        <p><em>Type</em>: String</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">-d, --data</code> (wait condition handle only)</p>
                     </td>
                     <td tabindex="-1">
                        <p>Data to send back with the <code class="code">waitConditionHandle</code>. Defaults
                           to blank.</p>
                        <p><em>Type</em>: String</p>
                        <p><em>Default</em>: blank</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">-e, --exit-code</code>
                        </p>
                     </td>
                     <td tabindex="-1">
                        <p>The error code from a process that can be used to determine success or
                           failure. If specified, the <code class="code">--success</code> option is
                           ignored.</p>
                        <p><em>Type</em>: String</p>
                        <p><em>Examples</em>: <code class="code">-e $?</code> (for Linux),
                              <code class="code">-e %ERRORLEVEL%</code> (for Windows cmd.exe), and <code class="code">-e
                              $lastexitcode</code> (for Windows PowerShell).</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">-f, --credential-file</code> (resource signaling only)</p>
                     </td>
                     <td tabindex="-1">
                        <p>A file that contains both a secret access key and an access key. The
                           credential file parameter supersedes the --role, --access-key, and
                           --secret-key parameters.</p>
                        <p><em>Type</em>: String</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">--http-proxy</code></p>
                     </td>
                     <td tabindex="-1">
                        <p>An HTTP proxy (non-SSL). Use the following format:
                                 <code class="code">http://<code class="replaceable">user:password</code>@<code class="replaceable">host</code>:<code class="replaceable">port</code></code></p>
                        <p><em>Type</em>: String</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">--https-proxy</code></p>
                     </td>
                     <td tabindex="-1">
                        <p>An HTTPS proxy. Use the following format:
                                 <code class="code">https://<code class="replaceable">user:password</code>@<code class="replaceable">host</code>:<code class="replaceable">port</code></code></p>
                        <p><em>Type</em>: String</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">-i, --id</code></p>
                     </td>
                     <td tabindex="-1">
                        <p>The unique ID to send.</p>
                        <p><em>Type</em>: String</p>
                        <p><em>Default</em>: The ID of the Amazon EC2 instance. If the ID
                           can't be resolved, the machine's Fully Qualified Domain Name (FQDN) is
                           returned.</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">-r, --reason </code> (wait condition handle only)</p>
                     </td>
                     <td tabindex="-1">
                        <p>A status reason for the resource event (currently only used on
                           failure) - defaults to 'Configuration failed' if success is false.</p>
                        <p><em>Type</em>: String</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1"><code class="code">--region</code> (resource signaling only)</td>
                     <td tabindex="-1">
                        <p>The CloudFormation regional endpoint to use.</p>
                        <p><em>Type</em>: String</p>
                        <p><em>Default</em>: <code class="code">us-east-1</code></p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1"><code class="code">--resource</code> (resource signaling only)</td>
                     <td tabindex="-1">
                        <p>The <a href="./resources-section-structure.html">logical ID</a> of
                           the resource that contains the creations policy you want to
                           signal.</p>
                        <p><em>Type</em>: String</p>
                     </td>
                     <td tabindex="-1">
                        <p>Yes</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">--role</code> (resource signaling only)</p>
                     </td>
                     <td tabindex="-1">
                        <p>The name of an IAM role that's associated with the instance.</p>
                        <p><em>Type</em>: String</p>
                        <p>Condition: The credential file parameter supersedes this
                           parameter.</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">-s, --success</code>
                        </p>
                     </td>
                     <td tabindex="-1">
                        <p>If true, signal <code class="code">SUCCESS</code>, else
                           <code class="code">FAILURE</code>.</p>
                        <p><em>Type</em>: Boolean</p>
                        <p><em>Default</em>: <code class="code">true</code></p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">--secret-key</code> (resource signaling only)</p>
                     </td>
                     <td tabindex="-1">
                        <p>AWS secret access key that corresponds to the specified AWS access
                           key.</p>
                        <p><em>Type</em>: String</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">--stack</code> (resource signaling only)</p>
                     </td>
                     <td tabindex="-1">
                        <p>The stack name or stack ID that contains the resource you want to
                           signal.</p>
                        <p><em>Type</em>: String</p>
                     </td>
                     <td tabindex="-1">
                        <p>Yes</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1"><code class="code">-u, --url</code> (resource signaling only)</td>
                     <td tabindex="-1">
                        <p>The CloudFormation endpoint to use.</p>
                        <p><em>Type</em>: String</p>
                     </td>
                     <td tabindex="-1">
                        <p>No</p>
                     </td>
                  </tr>
                  <tr>
                     <td tabindex="-1">
                        <p><code class="code">waitconditionhandle.url</code> (wait condition handle
                           only)</p>
                     </td>
                     <td tabindex="-1">
                        <p>A presigned URL that you can use to signal success or failure to an
                           associated <code class="code">WaitCondition</code></p>
                        <p><em>Type</em>: String</p>
                     </td>
                     <td tabindex="-1">
                        <p>Yes</p>
                     </td>
                  </tr>
               </table></div></div>
       
         <h2 id="cfn-signal-Examples">Example</h2>

          
            <h3 id="w9aac34c42c29c11b3">Amazon Linux example</h3>

            <p>A common usage pattern is to use cfn-init and cfn-signal together. The cfn-signal
               call uses the return status of the call to cfn-init (using the $? shell construct).
               If the application fails to install, the instance will fail to create and the stack
               will rollback. For Windows stacks, see <a href="./cfn-windows-stacks-bootstrapping.html">Bootstrapping AWS CloudFormation Windows stacks</a>.</p>
            <div id="JSON" name="JSON" class="section langfilter">
               <h4 id="cfn-signal-example.json">JSON</h4>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Simple EC2 instance",
    "Resources": <span>{</span>
        "MyInstance": <span>{</span>
            "Type": "AWS::EC2::Instance",
            "Metadata": <span>{</span>
                "AWS::CloudFormation::Init": <span>{</span>
                    "config": <span>{</span>
                        "files": <span>{</span>
                            "/tmp/test.txt": <span>{</span>
                                "content": "Hello world!",
                                "mode": "000755",
                                "owner": "root",
                                "group": "root"
                            }
                        }
                    }
                }
            },
            "Properties": <span>{</span>
                "ImageId": "<span>{</span><span>{</span>resolve:ssm:/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2}}",
                "InstanceType": "t2.micro",
                "UserData": <span>{</span>
                    "Fn::Base64": <span>{</span>
                        "Fn::Join": [
                            "",
                            [
                                "#!/bin/bash -x\n",
                                "# Install the files and packages from the metadata\n",
                                "yum install -y aws-cfn-bootstrap",
                                "\n",
                                "/opt/aws/bin/cfn-init -v ",
                                "         --stack ",
                                <span>{</span>
                                    "Ref": "AWS::StackName"
                                },
                                "         --resource MyInstance ",
                                "         --region ",
                                <span>{</span>
                                    "Ref": "AWS::Region"
                                },
                                "\n",
                                "# Signal the status from cfn-init\n",
                                "/opt/aws/bin/cfn-signal -e $? ",
                                "         --stack ",
                                <span>{</span>
                                    "Ref": "AWS::StackName"
                                },
                                "         --resource MyInstance ",
                                "         --region ",
                                <span>{</span>
                                    "Ref": "AWS::Region"
                                },
                                "\n"
                            ]
                        ]
                    }
                }
            },
            "CreationPolicy": <span>{</span>
                "ResourceSignal": <span>{</span>
                    "Timeout": "PT5M"
                }
            }
        }
    }
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h4 id="cfn-signal-example.yaml">YAML</h4>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Description: Simple EC2 instance
Resources:
  MyInstance:
    Type: 'AWS::EC2::Instance'
    Metadata:
      'AWS::CloudFormation::Init':
        config:
          files:
            /tmp/test.txt:
              content: Hello world!
              mode: '000755'
              owner: root
              group: root
    Properties:
      ImageId: <span>{</span><span>{</span>resolve:ssm:/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2}}
      InstanceType: t2.micro
      UserData: !Base64 
        'Fn::Join':
          - ''
          - - |
              #!/bin/bash -x
            - |
              # Install the files and packages from the metadata
            - yum install -y aws-cfn-bootstrap
            - |+
            
            - |
            - '/opt/aws/bin/cfn-init -v '
            - '         --stack '
            - !Ref 'AWS::StackName'
            - '         --resource MyInstance '
            - '         --region '
            - !Ref 'AWS::Region'
            - |+

            - |
              # Signal the status from cfn-init
            - '/opt/aws/bin/cfn-signal -e $? '
            - '         --stack '
            - !Ref 'AWS::StackName'
            - '         --resource MyInstance '
            - '         --region '
            - !Ref 'AWS::Region'
            - |+

    CreationPolicy:
      ResourceSignal:
        Timeout: PT5M</code></pre>
            </div>
             
               <h4 id="w9aac34c42c29c11b3b9">Examples</h4>

               <p>Several CloudFormation sample templates use cfn-signal, including the following
                  templates.</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>
                        <a href="https://s3.amazonaws.com/cloudformation-templates-us-east-1/LAMP_Single_Instance.template" rel="noopener noreferrer" target="_blank"><span>LAMP: Single EC2 instance with local MySQL database</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
                     </p>
                  </li><li class="listitem">
                     <p>
                        <a href="https://s3.amazonaws.com/cloudformation-templates-us-east-1/WordPress_Single_Instance.template" rel="noopener noreferrer" target="_blank"><span>WordPress: Single EC2 instance with local MySQL database</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
                     </p>
                  </li></ul></div>
             
          
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./cfn-init.html">cfn-init</div><div id="next" class="next-link" accesskey="n" href="./cfn-get-metadata.html">cfn-get-metadata</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/cfn-signal.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/cfn-signal.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>