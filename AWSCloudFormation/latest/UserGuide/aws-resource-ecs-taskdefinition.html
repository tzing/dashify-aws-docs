<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::ECS::TaskDefinition - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-ecs-taskdefinition" /><meta name="default_state" content="aws-resource-ecs-taskdefinition" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" /><meta name="description" content="Use the AWS CloudFormation AWS::ECS::TaskDefinition resource for ECS." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_ECS.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" hreflang="x-default" /><meta name="feedback-item" content="ECS" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::ECS::TaskDefinition" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::ECS::TaskDefinition - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=ECS&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon ECS resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_ECS.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::ECS::TaskDefinition",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_ECS.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_ECS.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-ecs-taskdefinition-syntax">Syntax</a><a href="#aws-resource-ecs-taskdefinition-properties">Properties</a><a href="#aws-resource-ecs-taskdefinition-return-values">Return values</a><a href="#aws-resource-ecs-taskdefinition--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-ecs-taskdefinition">AWS::ECS::TaskDefinition</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Registers a new task definition from the supplied <code class="code">family</code> and
				<code class="code">containerDefinitions</code>. Optionally, you can add data volumes to your
			containers with the <code class="code">volumes</code> parameter. For more information about task
			definition parameters and defaults, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_defintions.html">Amazon ECS Task
				Definitions</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</p><p>You can specify a role for your task with the <code class="code">taskRoleArn</code> parameter. When
			you specify a role for a task, its containers can then use the latest versions of the
			AWS CLI or SDKs to make API requests to the AWS services that are specified in the
			policy that's associated with the role. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-iam-roles.html">IAM
				Roles for Tasks</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</p><p>You can specify a Docker networking mode for the containers in your task definition
			with the <code class="code">networkMode</code> parameter. The available network modes correspond to
			those described in <a href="https://docs.docker.com/engine/reference/run/#/network-settings" rel="noopener noreferrer" target="_blank"><span>Network
				settings</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the Docker run reference. If you specify the <code class="code">awsvpc</code>
			network mode, the task is allocated an elastic network interface, and you must specify a
				<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-service.html#cfn-ecs-service-networkconfiguration">NetworkConfiguration</a> when you create a service or run a task with
			the task definition. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-networking.html">Task Networking</a>
			in the <em>Amazon Elastic Container Service Developer Guide</em>.</p><h2 id="aws-resource-ecs-taskdefinition-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-ecs-taskdefinition-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::ECS::TaskDefinition",
  "Properties" : <span>{</span>
      "<a href="#cfn-ecs-taskdefinition-containerdefinitions">ContainerDefinitions</a>" : <code class="replaceable">[ <a href="./aws-properties-ecs-taskdefinition-containerdefinition.html">ContainerDefinition</a>, ... ]</code>,
      "<a href="#cfn-ecs-taskdefinition-cpu">Cpu</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ecs-taskdefinition-ephemeralstorage">EphemeralStorage</a>" : <code class="replaceable"><a href="./aws-properties-ecs-taskdefinition-ephemeralstorage.html">EphemeralStorage</a></code>,
      "<a href="#cfn-ecs-taskdefinition-executionrolearn">ExecutionRoleArn</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ecs-taskdefinition-family">Family</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ecs-taskdefinition-inferenceaccelerators">InferenceAccelerators</a>" : <code class="replaceable">[ <a href="./aws-properties-ecs-taskdefinition-inferenceaccelerator.html">InferenceAccelerator</a>, ... ]</code>,
      "<a href="#cfn-ecs-taskdefinition-ipcmode">IpcMode</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ecs-taskdefinition-memory">Memory</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ecs-taskdefinition-networkmode">NetworkMode</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ecs-taskdefinition-pidmode">PidMode</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ecs-taskdefinition-placementconstraints">PlacementConstraints</a>" : <code class="replaceable">[ <a href="./aws-properties-ecs-taskdefinition-taskdefinitionplacementconstraint.html">TaskDefinitionPlacementConstraint</a>, ... ]</code>,
      "<a href="#cfn-ecs-taskdefinition-proxyconfiguration">ProxyConfiguration</a>" : <code class="replaceable"><a href="./aws-properties-ecs-taskdefinition-proxyconfiguration.html">ProxyConfiguration</a></code>,
      "<a href="#cfn-ecs-taskdefinition-requirescompatibilities">RequiresCompatibilities</a>" : <code class="replaceable">[ String, ... ]</code>,
      "<a href="#cfn-ecs-taskdefinition-runtimeplatform">RuntimePlatform</a>" : <code class="replaceable"><a href="./aws-properties-ecs-taskdefinition-runtimeplatform.html">RuntimePlatform</a></code>,
      "<a href="#cfn-ecs-taskdefinition-tags">Tags</a>" : <code class="replaceable">[ <a href="./aws-properties-ecs-taskdefinition-tag.html">Tag</a>, ... ]</code>,
      "<a href="#cfn-ecs-taskdefinition-taskrolearn">TaskRoleArn</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ecs-taskdefinition-volumes">Volumes</a>" : <code class="replaceable">[ <a href="./aws-properties-ecs-taskdefinition-volume.html">Volume</a>, ... ]</code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-ecs-taskdefinition-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::ECS::TaskDefinition
Properties:
  <a href="#cfn-ecs-taskdefinition-containerdefinitions">ContainerDefinitions</a>: <code class="replaceable">
    - <a href="./aws-properties-ecs-taskdefinition-containerdefinition.html">ContainerDefinition</a></code>
  <a href="#cfn-ecs-taskdefinition-cpu">Cpu</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-ephemeralstorage">EphemeralStorage</a>: <code class="replaceable">
    <a href="./aws-properties-ecs-taskdefinition-ephemeralstorage.html">EphemeralStorage</a></code>
  <a href="#cfn-ecs-taskdefinition-executionrolearn">ExecutionRoleArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-family">Family</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-inferenceaccelerators">InferenceAccelerators</a>: <code class="replaceable">
    - <a href="./aws-properties-ecs-taskdefinition-inferenceaccelerator.html">InferenceAccelerator</a></code>
  <a href="#cfn-ecs-taskdefinition-ipcmode">IpcMode</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-memory">Memory</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-networkmode">NetworkMode</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-pidmode">PidMode</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-placementconstraints">PlacementConstraints</a>: <code class="replaceable">
    - <a href="./aws-properties-ecs-taskdefinition-taskdefinitionplacementconstraint.html">TaskDefinitionPlacementConstraint</a></code>
  <a href="#cfn-ecs-taskdefinition-proxyconfiguration">ProxyConfiguration</a>: <code class="replaceable">
    <a href="./aws-properties-ecs-taskdefinition-proxyconfiguration.html">ProxyConfiguration</a></code>
  <a href="#cfn-ecs-taskdefinition-requirescompatibilities">RequiresCompatibilities</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-ecs-taskdefinition-runtimeplatform">RuntimePlatform</a>: <code class="replaceable">
    <a href="./aws-properties-ecs-taskdefinition-runtimeplatform.html">RuntimePlatform</a></code>
  <a href="#cfn-ecs-taskdefinition-tags">Tags</a>: <code class="replaceable">
    - <a href="./aws-properties-ecs-taskdefinition-tag.html">Tag</a></code>
  <a href="#cfn-ecs-taskdefinition-taskrolearn">TaskRoleArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-ecs-taskdefinition-volumes">Volumes</a>: <code class="replaceable">
    - <a href="./aws-properties-ecs-taskdefinition-volume.html">Volume</a></code>
</code></pre></div><h2 id="aws-resource-ecs-taskdefinition-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-ecs-taskdefinition-containerdefinitions"><span class="term"><code class="code">ContainerDefinitions</code></span></dt><dd>
         <p>A list of container definitions in JSON format that describe the different containers
			that make up your task. For more information about container definition parameters and
			defaults, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_defintions.html">Amazon ECS Task
				Definitions</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-ecs-taskdefinition-containerdefinition.html">ContainerDefinition</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-cpu"><span class="term"><code class="code">Cpu</code></span></dt><dd>
         <p>The number of <code class="code">cpu</code> units used by the task. If you use the EC2 launch type,
			this field is optional. Any value can be used. If you use the Fargate launch type, this
			field is required. You must use one of the following values. The value that you choose
			determines your range of valid values for the <code class="code">memory</code> parameter.</p>
         <p>The CPU units cannot be less than 1 vCPU when you use Windows containers on
			Fargate.</p>
         <div class="itemizedlist">
             
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>256 (.25 vCPU) - Available <code class="code">memory</code> values: 512 (0.5 GB), 1024 (1 GB), 2048 (2 GB)</p>
            </li><li class="listitem">
               <p>512 (.5 vCPU) - Available <code class="code">memory</code> values: 1024 (1 GB), 2048 (2 GB), 3072 (3 GB), 4096 (4 GB)</p>
            </li><li class="listitem">
               <p>1024 (1 vCPU) - Available <code class="code">memory</code> values: 2048 (2 GB), 3072 (3 GB), 4096 (4 GB), 5120 (5 GB), 6144 (6 GB), 7168 (7 GB), 8192 (8 GB)</p>
            </li><li class="listitem">
               <p>2048 (2 vCPU) - Available <code class="code">memory</code> values: 4096 (4 GB) and 16384 (16 GB) in increments of 1024 (1 GB)</p>
            </li><li class="listitem">
               <p>4096 (4 vCPU) - Available <code class="code">memory</code> values: 8192 (8 GB) and 30720 (30 GB) in increments of 1024 (1 GB)</p>
            </li><li class="listitem">
               <p>8192 (8 vCPU)  - Available <code class="code">memory</code> values: 16 GB and 60 GB in 4 GB increments</p>
               <p>This option requires Linux platform <code class="code">1.4.0</code> or
                                        later.</p>
            </li><li class="listitem">
               <p>16384 (16vCPU)  - Available <code class="code">memory</code> values: 32GB and 120 GB in 8 GB increments</p>
               <p>This option requires Linux platform <code class="code">1.4.0</code> or
                                        later.</p>
            </li></ul></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-ephemeralstorage"><span class="term"><code class="code">EphemeralStorage</code></span></dt><dd>
         <p>The ephemeral storage settings to use for tasks run with the task definition.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-ecs-taskdefinition-ephemeralstorage.html">EphemeralStorage</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-executionrolearn"><span class="term"><code class="code">ExecutionRoleArn</code></span></dt><dd>
         <p>The Amazon Resource Name (ARN) of the task execution role that grants the Amazon ECS container agent
            permission to make AWS API calls on your behalf. The task execution IAM role is required
            depending on the requirements of your task. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_execution_IAM_role.html">Amazon ECS task
                execution IAM role</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-family"><span class="term"><code class="code">Family</code></span></dt><dd>
  <p>The name of a family that this task definition is registered to. Up to 255 letters (uppercase and lowercase),
   numbers, hyphens, and underscores are allowed.</p>
  <p>A family groups multiple versions of a task definition. Amazon ECS gives the first task definition that you
   registered to a family a revision number of 1. Amazon ECS gives sequential revision numbers to each task definition
   that you add.</p>
  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>To use revision numbers when you update a task definition, specify this property. If you don't specify a value,
     AWS CloudFormation generates a new task definition each time that you update it.</p></div></div>
 <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-inferenceaccelerators"><span class="term"><code class="code">InferenceAccelerators</code></span></dt><dd>
         <p>The Elastic Inference accelerators to use for the containers in the task.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-ecs-taskdefinition-inferenceaccelerator.html">InferenceAccelerator</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-ipcmode"><span class="term"><code class="code">IpcMode</code></span></dt><dd>
         <p>The IPC resource namespace to use for the containers in the task. The valid values are
                <code class="code">host</code>, <code class="code">task</code>, or <code class="code">none</code>. If <code class="code">host</code> is
            specified, then all containers within the tasks that specified the <code class="code">host</code> IPC
            mode on the same container instance share the same IPC resources with the host Amazon EC2
            instance. If <code class="code">task</code> is specified, all containers within the specified task
            share the same IPC resources. If <code class="code">none</code> is specified, then IPC resources
            within the containers of a task are private and not shared with other containers in a
            task or on the container instance. If no value is specified, then the IPC resource
            namespace sharing depends on the Docker daemon setting on the container instance. For
            more information, see <a href="https://docs.docker.com/engine/reference/run/#ipc-settings---ipc" rel="noopener noreferrer" target="_blank"><span>IPC
                settings</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>Docker run reference</em>.</p>
         <p>If the <code class="code">host</code> IPC mode is used, be aware that there is a heightened risk of
            undesired IPC namespace expose. For more information, see <a href="https://docs.docker.com/engine/security/security/" rel="noopener noreferrer" target="_blank"><span>Docker
            security</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
         <p>If you are setting namespaced kernel parameters using <code class="code">systemControls</code> for
            the containers in the task, the following will apply to your IPC resource namespace. For
            more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html">System
                Controls</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>For tasks that use the <code class="code">host</code> IPC mode, IPC namespace related
                        <code class="code">systemControls</code> are not supported.</p>
            </li><li class="listitem">
               <p>For tasks that use the <code class="code">task</code> IPC mode, IPC namespace related
                        <code class="code">systemControls</code> will apply to all containers within a
                    task.</p>
            </li></ul></div>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This parameter is not supported for Windows containers or tasks run on AWS Fargate.</p></div></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">host | task | none</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-memory"><span class="term"><code class="code">Memory</code></span></dt><dd>
         <p>The amount (in MiB) of memory used by the task.</p>
         <p>If your tasks runs on Amazon EC2 instances, you must specify either a task-level memory
			value or a container-level memory value. This field is optional and any value can be
			used. If a task-level memory value is specified, the container-level memory value is
			optional. For more information regarding container-level memory and memory reservation,
			see <a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_ContainerDefinition.html">ContainerDefinition</a>.</p>
         <p>If your tasks runs on AWS Fargate, this field is required. You must use one of the
			following values. The value you choose determines your range of valid values for the
				<code class="code">cpu</code> parameter.</p>
         <div class="itemizedlist">
             
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>512 (0.5 GB), 1024 (1 GB), 2048 (2 GB) - Available <code class="code">cpu</code> values: 256 (.25 vCPU)</p>
            </li><li class="listitem">
               <p>1024 (1 GB), 2048 (2 GB), 3072 (3 GB), 4096 (4 GB) - Available <code class="code">cpu</code> values: 512 (.5 vCPU)</p>
            </li><li class="listitem">
               <p>2048 (2 GB), 3072 (3 GB), 4096 (4 GB), 5120 (5 GB), 6144 (6 GB), 7168 (7 GB), 8192 (8 GB) - Available <code class="code">cpu</code> values: 1024 (1 vCPU)</p>
            </li><li class="listitem">
               <p>Between 4096 (4 GB) and 16384 (16 GB) in increments of 1024 (1 GB) - Available <code class="code">cpu</code> values: 2048 (2 vCPU)</p>
            </li><li class="listitem">
               <p>Between 8192 (8 GB) and 30720 (30 GB) in increments of 1024 (1 GB) - Available <code class="code">cpu</code> values: 4096 (4 vCPU)</p>
            </li><li class="listitem">
               <p>Between 16 GB and 60 GB in 4 GB increments - Available <code class="code">cpu</code> values: 8192 (8 vCPU)</p>
               <p>This option requires Linux platform <code class="code">1.4.0</code> or
                                        later.</p>
            </li><li class="listitem">
               <p>Between 32GB and 120 GB in 8 GB increments - Available <code class="code">cpu</code> values: 16384 (16 vCPU)</p>
               <p>This option requires Linux platform <code class="code">1.4.0</code> or
                                        later.</p>
            </li></ul></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-networkmode"><span class="term"><code class="code">NetworkMode</code></span></dt><dd>
         <p>The Docker networking mode to use for the containers in the task. The valid values are
                <code class="code">none</code>, <code class="code">bridge</code>, <code class="code">awsvpc</code>, and <code class="code">host</code>.
            If no network mode is specified, the default is <code class="code">bridge</code>.</p>
         <p>For Amazon ECS tasks on Fargate, the <code class="code">awsvpc</code> network mode is required. 
            For Amazon ECS tasks on Amazon EC2 Linux instances, any network mode can be used.  For Amazon ECS tasks on Amazon EC2 Windows instances, <code class="code">&lt;default&gt;</code> or <code class="code">awsvpc</code> can be used. If the network
            mode is set to <code class="code">none</code>, you cannot specify port mappings in your container
            definitions, and the tasks containers do not have external connectivity. The
                <code class="code">host</code> and <code class="code">awsvpc</code> network modes offer the highest networking
            performance for containers because they use the EC2 network stack instead of the
            virtualized network stack provided by the <code class="code">bridge</code> mode.</p>
         <p>With the <code class="code">host</code> and <code class="code">awsvpc</code> network modes, exposed container
            ports are mapped directly to the corresponding host port (for the <code class="code">host</code>
            network mode) or the attached elastic network interface port (for the
                <code class="code">awsvpc</code> network mode), so you cannot take advantage of dynamic host port
            mappings. </p>
         <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>When using the <code class="code">host</code> network mode, you should not run
                            containers using the root user (UID 0). It is considered best practice
                            to use a non-root user.</p></div></div>
         <p>If the network mode is <code class="code">awsvpc</code>, the task is allocated an elastic network
            interface, and you must specify a <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-service.html#cfn-ecs-service-networkconfiguration">NetworkConfiguration</a> value when you create
            a service or run a task with the task definition. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-networking.html">Task Networking</a> in the
                <em>Amazon Elastic Container Service Developer Guide</em>.</p>
         <p>If the network mode is <code class="code">host</code>, you cannot run multiple instantiations of the
            same task on a single container instance when port mappings are used.</p>
         <p>For more information, see <a href="https://docs.docker.com/engine/reference/run/#network-settings" rel="noopener noreferrer" target="_blank"><span>Network
                settings</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>Docker run reference</em>.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">bridge | host | awsvpc | none</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-pidmode"><span class="term"><code class="code">PidMode</code></span></dt><dd>
         <p>The process namespace to use for the containers in the task. The valid
                            values are <code class="code">host</code> or <code class="code">task</code>. On Fargate for
                            Linux containers, the only valid value is <code class="code">task</code>. For
                            example, monitoring sidecars might need <code class="code">pidMode</code> to access
                            information about other containers running in the same task.</p>
         <p>If <code class="code">host</code> is specified, all containers within the tasks
                            that specified the <code class="code">host</code> PID mode on the same container
                            instance share the same process namespace with the host Amazon EC2
                            instance.</p>
         <p>If <code class="code">task</code> is specified, all containers within the specified
                            task share the same process namespace.</p>
         <p>If no value is specified, the
                            default is a private namespace for each container. For more information,
                            see <a href="https://docs.docker.com/engine/reference/run/#pid-settings---pid" rel="noopener noreferrer" target="_blank"><span>PID settings</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>Docker run
                                reference</em>.</p>
         <p>If the <code class="code">host</code> PID mode is used, there's a heightened risk
                            of undesired process namespace exposure. For more information, see
                                <a href="https://docs.docker.com/engine/security/security/" rel="noopener noreferrer" target="_blank"><span>Docker security</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This parameter is not supported for Windows containers.</p></div></div>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This parameter is only supported for tasks that are hosted on
        AWS Fargate if the tasks are using platform version <code class="code">1.4.0</code> or later
        (Linux). This isn't supported for Windows containers on
        Fargate.</p></div></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">host | task</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-placementconstraints"><span class="term"><code class="code">PlacementConstraints</code></span></dt><dd>
         <p>An array of placement constraint objects to use for tasks.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This parameter isn't supported for tasks run on AWS Fargate.</p></div></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-ecs-taskdefinition-taskdefinitionplacementconstraint.html">TaskDefinitionPlacementConstraint</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-proxyconfiguration"><span class="term"><code class="code">ProxyConfiguration</code></span></dt><dd>
         <p>The configuration details for the App Mesh proxy.</p>
         <p>Your Amazon ECS container instances require at least version 1.26.0 of the container agent
			and at least version 1.26.0-1 of the <code class="code">ecs-init</code> package to use a proxy
			configuration. If your container instances are launched from the Amazon ECS optimized AMI
			version <code class="code">20190301</code> or later, they contain the required versions of the
			container agent and <code class="code">ecs-init</code>. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html">Amazon ECS-optimized Linux AMI</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-ecs-taskdefinition-proxyconfiguration.html">ProxyConfiguration</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-requirescompatibilities"><span class="term"><code class="code">RequiresCompatibilities</code></span></dt><dd>
         <p>The task launch types the task definition was validated against. The valid values are
				<code class="code">EC2</code>, <code class="code">FARGATE</code>, and <code class="code">EXTERNAL</code>. For more
			information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/launch_types.html">Amazon ECS launch types</a>
			in the <em>Amazon Elastic Container Service Developer Guide</em>.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-runtimeplatform"><span class="term"><code class="code">RuntimePlatform</code></span></dt><dd>
         <p>The operating system that your tasks definitions run on. A platform family is
			specified only for tasks using the Fargate launch type. </p>
         <p>When you specify a task definition in a service, this value must match the
				<code class="code">runtimePlatform</code> value of the service.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-ecs-taskdefinition-runtimeplatform.html">RuntimePlatform</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-tags"><span class="term"><code class="code">Tags</code></span></dt><dd>
         <p>The metadata that you apply to the task definition to help you categorize and organize
			them. Each tag consists of a key and an optional value. You define both of them.</p>
         <p>The following basic restrictions apply to tags:</p>
         <div class="itemizedlist">
             
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Maximum number of tags per resource - 50</p>
            </li><li class="listitem">
               <p>For each resource, each tag key must be unique, and each tag key can have only
                    one value.</p>
            </li><li class="listitem">
               <p>Maximum key length - 128 Unicode characters in UTF-8</p>
            </li><li class="listitem">
               <p>Maximum value length - 256 Unicode characters in UTF-8</p>
            </li><li class="listitem">
               <p>If your tagging schema is used across multiple services and resources,
                    remember that other services may have restrictions on allowed characters.
                    Generally allowed characters are: letters, numbers, and spaces representable in
                    UTF-8, and the following characters: + - = . _ : / @.</p>
            </li><li class="listitem">
               <p>Tag keys and values are case-sensitive.</p>
            </li><li class="listitem">
               <p>Do not use <code class="code">aws:</code>, <code class="code">AWS:</code>, or any upper or lowercase
                    combination of such as a prefix for either keys or values as it is reserved for
                    AWS use. You cannot edit or delete tag keys or values with this prefix. Tags with
                    this prefix do not count against your tags per resource limit.</p>
            </li></ul></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-ecs-taskdefinition-tag.html">Tag</a></p><p><em>Minimum</em>: <code class="code">0</code></p><p><em>Maximum</em>: <code class="code">50</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ecs-taskdefinition-taskrolearn"><span class="term"><code class="code">TaskRoleArn</code></span></dt><dd>
         <p>The short name or full Amazon Resource Name (ARN) of the AWS Identity and Access Management role that grants containers in the
			task permission to call AWS APIs on your behalf. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-iam-roles.html">Amazon ECS
				Task Role</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</p>
         <p>IAM roles for tasks on Windows require that the <code class="code">-EnableTaskIAMRole</code>
			option is set when you launch the Amazon ECS-optimized Windows AMI. Your containers must also run some
			configuration code to use the feature. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/windows_task_IAM_roles.html">Windows IAM roles
				for tasks</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ecs-taskdefinition-volumes"><span class="term"><code class="code">Volumes</code></span></dt><dd>
         <p>The list of data volume definitions for the task. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/using_data_volumes.html">Using data volumes in tasks</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The <code class="code">host</code> and <code class="code">sourcePath</code> parameters aren't supported for
				tasks run on AWS Fargate. </p></div></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-ecs-taskdefinition-volume.html">Volume</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd></dl></div><h2 id="aws-resource-ecs-taskdefinition-return-values">Return values</h2><h3 id="aws-resource-ecs-taskdefinition-return-values-ref">Ref</h3><p>
   When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the Amazon Resource Name (ARN).</p><p>In the following example, the <code class="code">Ref</code> function returns the ARN of the <code class="code">MyTaskDefinition</code>
   task definition, such as
   <code class="code">arn:aws:ecs:us-west-2:123456789012:task-definition/TaskDefinitionFamily:1</code>.</p><p>
   <code class="code"><span>{</span> "Ref": "MyTaskDefinition" }</code>
  </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html"><code class="code">Ref</code></a>.</p><h3 id="aws-resource-ecs-taskdefinition-return-values-fn--getatt">Fn::GetAtt</h3><h4 id="aws-resource-ecs-taskdefinition-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist"><dl><dt id="TaskDefinitionArn-fn::getatt"><span class="term"><code class="code">TaskDefinitionArn</code></span></dt><dd><p>The ARN of the task definition.</p></dd></dl></div><h2 id="aws-resource-ecs-taskdefinition--examples">Examples</h2><p></p><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_with_2_containers">Create an Amazon ECS task definition with 2 containers</a></li><li><a href="#aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_for_the_EC2_launch_type">Create an Amazon ECS task definition for the EC2 launch type</a></li><li><a href="#aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_for_the_launch_type">Create an Amazon ECS task definition for the Fargate launch type</a></li></ul></div><h3 id="aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_with_2_containers">Create an Amazon ECS task definition with 2 containers</h3><p>The following example defines an Amazon ECS task definition, which includes two container definitions
     and one volume definition.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_with_2_containers--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"taskdefinition": <span>{</span>
  "Type": "AWS::ECS::TaskDefinition",
  "Properties" : <span>{</span>
    "ContainerDefinitions" : [
    <span>{</span>
      "Name": <span>{</span>"Ref": "AppName"},
      "MountPoints": [
        <span>{</span>
          "SourceVolume": "my-vol",
          "ContainerPath": "/var/www/my-vol"
        }
      ],
      "Image":"amazon/amazon-ecs-sample",
      "Cpu": 256,
      "PortMappings":[
        <span>{</span>
          "ContainerPort": <span>{</span>"Ref":"AppContainerPort"},
          "HostPort": <span>{</span>"Ref":"AppHostPort"}
        }
      ],
      "EntryPoint": [
        "/usr/sbin/apache2",
        "-D",
        "FOREGROUND"
      ],
      "Memory": 512,
      "Essential": true
    },
    <span>{</span>
      "Name": "busybox",
      "Image": "busybox",
      "Cpu": 256,
      "EntryPoint": [
        "sh",
        "-c"
      ],
      "Memory": 512,
      "Command": [
        "/bin/sh -c \"while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\""
      ],
      "Essential" : false,
      "VolumesFrom": [
        <span>{</span>
          "SourceContainer": <span>{</span>"Ref":"AppName"}
        }
      ]
    }],
    "Volumes": [
    <span>{</span>
      "Host": <span>{</span>
        "SourcePath": "/var/lib/docker/vfs/dir/"
      },
      "Name": "my-vol"
    }]
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_with_2_containers--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">taskdefinition: 
  Type: AWS::ECS::TaskDefinition
  Properties: 
    ContainerDefinitions: 
      - 
        Name: 
          Ref: "AppName"
        MountPoints: 
          - 
            SourceVolume: "my-vol"
            ContainerPath: "/var/www/my-vol"
        Image: "amazon/amazon-ecs-sample"
        Cpu: 256
        PortMappings: 
          - 
            ContainerPort: 
              Ref: "AppContainerPort"
            HostPort: 
              Ref: "AppHostPort"
        EntryPoint: 
          - "/usr/sbin/apache2"
          - "-D"
          - "FOREGROUND"
        Memory: 512
        Essential: true
      - 
        Name: "busybox"
        Image: "busybox"
        Cpu: 256
        EntryPoint: 
          - "sh"
          - "-c"
        Memory: 512
        Command: 
          - "/bin/sh -c \"while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\""
        Essential: false
        VolumesFrom: 
          - 
            SourceContainer: 
              Ref: "AppName"
    Volumes: 
      - 
        Host: 
          SourcePath: "/var/lib/docker/vfs/dir/"
        Name: "my-vol"</code></pre></div><h3 id="aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_for_the_EC2_launch_type">Create an Amazon ECS task definition for the EC2 launch type</h3><p>The following example defines an Amazon ECS task definition that specifies EC2 as required
     compatibilities.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_for_the_EC2_launch_type--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Resources": <span>{</span>
        "taskdefinition": <span>{</span>
            "Type": "AWS::ECS::TaskDefinition",
            "Properties": <span>{</span>
                "RequiresCompatibilities": [
                    "EC2"
                ],
                "ContainerDefinitions": [
                    <span>{</span>
                        "Name": "my-app",
                        "MountPoints": [
                            <span>{</span>
                                "SourceVolume": "my-vol",
                                "ContainerPath": "/var/www/my-vol"
                            }
                        ],
                        "Image": "amazon/amazon-ecs-sample",
                        "Cpu": 256,
                        "EntryPoint": [
                            "/usr/sbin/apache2",
                            "-D",
                            "FOREGROUND"
                        ],
                        "Memory": 512,
                        "Essential": true
                    },
                    <span>{</span>
                        "Name": "busybox",
                        "Image": "busybox",
                        "Cpu": 256,
                        "EntryPoint": [
                            "sh",
                            "-c"
                        ],
                        "Memory": 512,
                        "Command": [
                            "/bin/sh -c \"while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\""
                        ],
                        "Essential": false,
                        "DependsOn": [
                            <span>{</span>
                                "ContainerName": "my-app",
                                "Condition": "START"
                            }
                        ],
                        "VolumesFrom": [
                            <span>{</span>
                                "SourceContainer": "my-app"
                            }
                        ]
                    }
                ],
                "Volumes": [
                    <span>{</span>
                        "Host": <span>{</span>
                            "SourcePath": "/var/lib/docker/vfs/dir/"
                        },
                        "Name": "my-vol"
                    }
                ]
            }
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_for_the_EC2_launch_type--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Resources:
  taskdefinition: 
    Type: AWS::ECS::TaskDefinition
    Properties: 
      RequiresCompatibilities:
        - "EC2"
      ContainerDefinitions: 
        - 
          Name: "my-app"
          MountPoints: 
            - 
              SourceVolume: "my-vol"
              ContainerPath: "/var/www/my-vol"
          Image: "amazon/amazon-ecs-sample"
          Cpu: 256
          EntryPoint: 
            - "/usr/sbin/apache2"
            - "-D"
            - "FOREGROUND"
          Memory: 512
          Essential: true
        - 
          Name: "busybox"
          Image: "busybox"
          Cpu: 256
          EntryPoint: 
            - "sh"
            - "-c"
          Memory: 512
          Command: 
            - "/bin/sh -c \"while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\""
          Essential: false
          DependsOn:
            - ContainerName: my-app
              Condition: START
          VolumesFrom: 
            - 
              SourceContainer: "my-app"
      Volumes: 
        - 
          Host: 
            SourcePath: "/var/lib/docker/vfs/dir/"
          Name: "my-vol"</code></pre></div><h3 id="aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_for_the_launch_type">Create an Amazon ECS task definition for the Fargate launch type</h3><p>The following is an example task definition using the Linux containers on Fargate launch type that sets up a web server and is tagged with the key
            <code class="code">environment</code> and the value <code class="code">webserver</code>:</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_for_the_launch_type--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Create a task definition for a web server.",
  "Resources": <span>{</span>
    "ECSTaskDefinition": <span>{</span>
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": <span>{</span>
        "ContainerDefinitions": [
          <span>{</span>
            "Name": "first-run-task",
            "Image": "httpd:2.4",
            "Essential": true,
            "PortMappings": [
              <span>{</span>
                "ContainerPort": 80,
                "Protocol": "tcp"
              }
            ],
            "Environment": [
              <span>{</span>
                "Name": "entryPoint",
                "Value": "sh, -c"
              },
              <span>{</span>
                "Name": "command",
                "Value": "/bin/sh -c \\\"echo '&lt;html&gt; &lt;head&gt; &lt;title&gt;Amazon ECS Sample App&lt;/title&gt; &lt;style&gt;body <span>{</span>margin-top: 40px; background-color: #333;} &lt;/style&gt; &lt;/head&gt;&lt;body&gt; &lt;div style=color:white;text-align:center&gt; &lt;h1&gt;Amazon ECS Sample App&lt;/h1&gt; &lt;h2&gt;Congratulations!&lt;/h2&gt; &lt;p&gt;Your application is now running on a container in Amazon ECS.&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;' &gt;  /usr/local/apache2/htdocs/index.html &amp;&amp; httpd-foreground\\\""
              }
            ],
            "EnvironmentFiles": []
          }
        ],
        "Family": "first-run-task",
        "Cpu": "1 vCPU",
        "Memory": "3 GB"
      }
    },
    "Tags": [
            <span>{</span>
                "Key": "environment",
                "Value": "webserver"
            }
        ]
  },
  "Outputs": <span>{</span>
    "ECSTaskDefinition": <span>{</span>
      "Description": "The created Taskdefinition.",
      "Value": <span>{</span>
        "Ref": "ECSTaskDefinition"
      }
    }
  }
}          </code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ecs-taskdefinition--examples--Create_an_task_definition_for_the_launch_type--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Description: Create a task definition for a web server.
Resources:
  ECSTaskDefinition:
    Type: 'AWS::ECS::TaskDefinition'
    Properties:
      ContainerDefinitions:
        - Name: first-run-task
          Image: 'httpd:2.4'
          Essential: true
          PortMappings:
            - ContainerPort: 80
              Protocol: tcp
          Environment:
            - Name: entryPoint
              Value: 'sh, -c'
            - Name: command
              Value: &gt;-
                /bin/sh -c \"echo '&lt;html&gt; &lt;head&gt; &lt;title&gt;Amazon ECS Sample
                App&lt;/title&gt; &lt;style&gt;body <span>{</span>margin-top: 40px; background-color:
                #333;} &lt;/style&gt; &lt;/head&gt;&lt;body&gt; &lt;div
                style=color:white;text-align:center&gt; &lt;h1&gt;Amazon ECS Sample
                App&lt;/h1&gt; &lt;h2&gt;Congratulations!&lt;/h2&gt; &lt;p&gt;Your application is now
                running on a container in Amazon ECS.&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;'
                &gt;  /usr/local/apache2/htdocs/index.html &amp;&amp; httpd-foreground\"
          EnvironmentFiles: []
      Family: first-run-task
      Cpu: 1 vCPU
      Memory: 3 GB
     Tags:
        - Key: environment
          Value: webserver
Outputs:
  ECSTaskDefinition:
    Description: The created Taskdefinition.
    Value: !Ref ECSTaskDefinition        </code></pre></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-properties-ecs-service-timeoutconfiguration.html">TimeoutConfiguration</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-ecs-taskdefinition-authorizationconfig.html">AuthorizationConfig</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=ECS&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=ECS&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>