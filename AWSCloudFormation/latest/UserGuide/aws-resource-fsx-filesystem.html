<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::FSx::FileSystem - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-fsx-filesystem" /><meta name="default_state" content="aws-resource-fsx-filesystem" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" /><meta name="description" content="Use the AWS CloudFormation AWS::FSx::FileSystem resource for FSx." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_FSx.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" hreflang="x-default" /><meta name="feedback-item" content="FSx" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::FSx::FileSystem" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::FSx::FileSystem - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=FSx&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon FSx resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_FSx.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::FSx::FileSystem",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_FSx.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_FSx.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-fsx-filesystem-syntax">Syntax</a><a href="#aws-resource-fsx-filesystem-properties">Properties</a><a href="#aws-resource-fsx-filesystem-return-values">Return values</a><a href="#aws-resource-fsx-filesystem--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-fsx-filesystem">AWS::FSx::FileSystem</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The <code class="code">AWS::FSx::FileSystem</code> resource is an Amazon FSx resource type
            that specifies an Amazon FSx file system. You can create any of the following
            supported file system types:</p><div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem"><p>Amazon FSx for Lustre</p></li><li class="listitem"><p>Amazon FSx for NetApp ONTAP</p></li><li class="listitem"><p>FSx for OpenZFS</p></li><li class="listitem"><p>Amazon FSx for Windows File Server</p></li></ul></div><h2 id="aws-resource-fsx-filesystem-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-fsx-filesystem-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::FSx::FileSystem",
  "Properties" : <span>{</span>
      "<a href="#cfn-fsx-filesystem-backupid">BackupId</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-fsx-filesystem-filesystemtype">FileSystemType</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-fsx-filesystem-filesystemtypeversion">FileSystemTypeVersion</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-fsx-filesystem-kmskeyid">KmsKeyId</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-fsx-filesystem-lustreconfiguration">LustreConfiguration</a>" : <code class="replaceable"><a href="./aws-properties-fsx-filesystem-lustreconfiguration.html">LustreConfiguration</a></code>,
      "<a href="#cfn-fsx-filesystem-ontapconfiguration">OntapConfiguration</a>" : <code class="replaceable"><a href="./aws-properties-fsx-filesystem-ontapconfiguration.html">OntapConfiguration</a></code>,
      "<a href="#cfn-fsx-filesystem-openzfsconfiguration">OpenZFSConfiguration</a>" : <code class="replaceable"><a href="./aws-properties-fsx-filesystem-openzfsconfiguration.html">OpenZFSConfiguration</a></code>,
      "<a href="#cfn-fsx-filesystem-securitygroupids">SecurityGroupIds</a>" : <code class="replaceable">[ String, ... ]</code>,
      "<a href="#cfn-fsx-filesystem-storagecapacity">StorageCapacity</a>" : <code class="replaceable">Integer</code>,
      "<a href="#cfn-fsx-filesystem-storagetype">StorageType</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-fsx-filesystem-subnetids">SubnetIds</a>" : <code class="replaceable">[ String, ... ]</code>,
      "<a href="#cfn-fsx-filesystem-tags">Tags</a>" : <code class="replaceable">[ <a href="./aws-properties-fsx-filesystem-tag.html">Tag</a>, ... ]</code>,
      "<a href="#cfn-fsx-filesystem-windowsconfiguration">WindowsConfiguration</a>" : <code class="replaceable"><a href="./aws-properties-fsx-filesystem-windowsconfiguration.html">WindowsConfiguration</a></code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-fsx-filesystem-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::FSx::FileSystem
Properties:
  <a href="#cfn-fsx-filesystem-backupid">BackupId</a>: <code class="replaceable">String</code>
  <a href="#cfn-fsx-filesystem-filesystemtype">FileSystemType</a>: <code class="replaceable">String</code>
  <a href="#cfn-fsx-filesystem-filesystemtypeversion">FileSystemTypeVersion</a>: <code class="replaceable">String</code>
  <a href="#cfn-fsx-filesystem-kmskeyid">KmsKeyId</a>: <code class="replaceable">String</code>
  <a href="#cfn-fsx-filesystem-lustreconfiguration">LustreConfiguration</a>: <code class="replaceable">
    <a href="./aws-properties-fsx-filesystem-lustreconfiguration.html">LustreConfiguration</a></code>
  <a href="#cfn-fsx-filesystem-ontapconfiguration">OntapConfiguration</a>: <code class="replaceable">
    <a href="./aws-properties-fsx-filesystem-ontapconfiguration.html">OntapConfiguration</a></code>
  <a href="#cfn-fsx-filesystem-openzfsconfiguration">OpenZFSConfiguration</a>: <code class="replaceable">
    <a href="./aws-properties-fsx-filesystem-openzfsconfiguration.html">OpenZFSConfiguration</a></code>
  <a href="#cfn-fsx-filesystem-securitygroupids">SecurityGroupIds</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-fsx-filesystem-storagecapacity">StorageCapacity</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-fsx-filesystem-storagetype">StorageType</a>: <code class="replaceable">String</code>
  <a href="#cfn-fsx-filesystem-subnetids">SubnetIds</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-fsx-filesystem-tags">Tags</a>: <code class="replaceable">
    - <a href="./aws-properties-fsx-filesystem-tag.html">Tag</a></code>
  <a href="#cfn-fsx-filesystem-windowsconfiguration">WindowsConfiguration</a>: <code class="replaceable">
    <a href="./aws-properties-fsx-filesystem-windowsconfiguration.html">WindowsConfiguration</a></code>
</code></pre></div><h2 id="aws-resource-fsx-filesystem-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-fsx-filesystem-backupid"><span class="term"><code class="code">BackupId</code></span></dt><dd>
        <p>The ID of the file system backup that you are using to create a file system. For more information, 
            see <a href="https://docs.aws.amazon.com/fsx/latest/APIReference/API_CreateFileSystemFromBackup.html">CreateFileSystemFromBackup</a>.</p>
        
    <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-fsx-filesystem-filesystemtype"><span class="term"><code class="code">FileSystemType</code></span></dt><dd>
         <p>The type of Amazon FSx file system, which can be <code class="code">LUSTRE</code>,
                <code class="code">WINDOWS</code>, <code class="code">ONTAP</code>, or <code class="code">OPENZFS</code>.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-fsx-filesystem-filesystemtypeversion"><span class="term"><code class="code">FileSystemTypeVersion</code></span></dt><dd>
         <p>(Optional) For FSx for Lustre file systems, sets the Lustre version
            for the file system that you're creating. Valid values are <code class="code">2.10</code>, 
            <code class="code">2.12</code>, and <code class="code">2.15</code>:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>2.10 is supported by the Scratch and Persistent_1 Lustre deployment types.</p>
            </li><li class="listitem">
               <p>2.12 and 2.15 are supported by all Lustre deployment types. <code class="code">2.12</code>
                or <code class="code">2.15</code> is required when setting FSx for Lustre <code class="code">DeploymentType</code>
                to <code class="code">PERSISTENT_2</code>.</p>
            </li></ul></div>
         <p>Default value = <code class="code">2.10</code>, except when <code class="code">DeploymentType</code> is set to 
            <code class="code">PERSISTENT_2</code>, then the default is <code class="code">2.12</code>.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you set <code class="code">FileSystemTypeVersion</code> to <code class="code">2.10</code> for a   
            <code class="code">PERSISTENT_2</code> Lustre deployment type, the <code class="code">CreateFileSystem</code> 
            operation fails.</p></div></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">^[0-9](.[0-9]*)*$</code></p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">20</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-fsx-filesystem-kmskeyid"><span class="term"><code class="code">KmsKeyId</code></span></dt><dd>
         <p>The ID of the AWS Key Management Service (AWS KMS) key used to encrypt Amazon FSx file
            system data. Used as follows with Amazon FSx file system types:</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Amazon FSx for Lustre <code class="code">PERSISTENT_1</code>
               and <code class="code">PERSISTENT_2</code> deployment types only.</p>
               <p>
                  <code class="code">SCRATCH_1</code> and <code class="code">SCRATCH_2</code> types are encrypted using 
                    the Amazon FSx service AWS KMS key for your account.</p>
            </li><li class="listitem">
               <p>Amazon FSx for NetApp ONTAP</p>
            </li><li class="listitem">
               <p>Amazon FSx for OpenZFS</p>
            </li><li class="listitem">
               <p>Amazon FSx for Windows File Server</p>
            </li></ul></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-fsx-filesystem-lustreconfiguration"><span class="term"><code class="code">LustreConfiguration</code></span></dt><dd>
        <p>The Lustre configuration for the file system being created.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The following parameters are not supported when creating Lustre file systems with a data repository association.</p><div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                  <p>
                     <code class="code">AutoImportPolicy</code>
                  </p>
               </li><li class="listitem">
                  <p>
                     <code class="code">ExportPath</code>
                  </p>
               </li><li class="listitem">
                  <p>
                     <code class="code">ImportedChunkSize</code>
                  </p>
               </li><li class="listitem">
                  <p>
                     <code class="code">ImportPath</code>
                  </p>
               </li></ul></div></div></div>
      <p><em>Required</em>: Conditional</p><p><em>Type</em>: <a href="./aws-properties-fsx-filesystem-lustreconfiguration.html">LustreConfiguration</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-fsx-filesystem-ontapconfiguration"><span class="term"><code class="code">OntapConfiguration</code></span></dt><dd>
         <p>The ONTAP configuration properties of the FSx for ONTAP file system that you
            are creating.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-fsx-filesystem-ontapconfiguration.html">OntapConfiguration</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-fsx-filesystem-openzfsconfiguration"><span class="term"><code class="code">OpenZFSConfiguration</code></span></dt><dd>
         <p>The Amazon FSx for OpenZFS configuration properties for the file system that you are creating.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-fsx-filesystem-openzfsconfiguration.html">OpenZFSConfiguration</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-fsx-filesystem-securitygroupids"><span class="term"><code class="code">SecurityGroupIds</code></span></dt><dd>
         <p>A list of IDs specifying the security groups to apply to all network interfaces
            created for file system access. This list isn't returned in later requests to
            describe the file system.</p>
         <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>You must specify a security group if you are creating a Multi-AZ 
            FSx for ONTAP file system in a VPC subnet that has been shared with you.</p></div></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of String</p><p><em>Maximum</em>: <code class="code">50</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-fsx-filesystem-storagecapacity"><span class="term"><code class="code">StorageCapacity</code></span></dt><dd>
        <p>Sets the storage capacity of the file system that you're creating.</p>
                <p><code class="code">StorageCapacity</code> is required if you are creating a new file system. It is not required if you are creating a 
                file system by restoring a backup.</p>
        
        <p><b>FSx for Lustre file systems</b> - The amount of
            storage capacity that you can configure depends on the value that you set for
                <code class="code">StorageType</code> and the Lustre <code class="code">DeploymentType</code>, as
            follows:</p>
        <div class="itemizedlist">
             
            
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>For <code class="code">SCRATCH_2</code>, <code class="code">PERSISTENT_2</code> and
                        <code class="code">PERSISTENT_1</code> deployment types using SSD storage type, the valid
                    values are 1200 GiB, 2400 GiB, and increments of 2400 GiB.</p>
            </li><li class="listitem">
                <p>For <code class="code">PERSISTENT_1</code> HDD file systems, valid values are increments of
                    6000 GiB for 12 MB/s/TiB file systems and increments of 1800 GiB for 40 MB/s/TiB
                    file systems.</p>
            </li><li class="listitem">
                <p>For <code class="code">SCRATCH_1</code> deployment type, valid values are 1200 GiB, 2400
                    GiB, and increments of 3600 GiB.</p>
            </li></ul></div>
        <p><b>FSx for ONTAP file systems</b> - The amount of
            storage capacity that you can configure is from 1024 GiB up to 196,608 GiB (192
            TiB).</p>
        <p><b>FSx for OpenZFS file systems</b> - The amount of storage
            capacity that you can configure is from 64 GiB up to 524,288 GiB (512 TiB). If you are creating a 
        file system from a backup, you can specify a storage capacity equal to or greater than the original 
        file system's storage capacity.</p>
        <p><b>FSx for Windows File Server file systems</b> - The amount
            of storage capacity that you can configure depends on the value that you set for
                <code class="code">StorageType</code> as follows:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>For SSD storage, valid values are 32 GiB-65,536 GiB (64 TiB).</p>
            </li><li class="listitem">
                <p>For HDD storage, valid values are 2000 GiB-65,536 GiB (64 TiB).</p>
            </li></ul></div>

    <p><em>Required</em>: Conditional</p><p><em>Type</em>: Integer</p><p><em>Minimum</em>: <code class="code">0</code></p><p><em>Maximum</em>: <code class="code">2147483647</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-fsx-filesystem-storagetype"><span class="term"><code class="code">StorageType</code></span></dt><dd>
         <p>Sets the storage type for the file system that you're creating. Valid values are
                <code class="code">SSD</code> and <code class="code">HDD</code>.</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Set to <code class="code">SSD</code> to use solid state drive storage. SSD is supported on all Windows,
                    Lustre, ONTAP, and OpenZFS deployment types.</p>
            </li><li class="listitem">
               <p>Set to <code class="code">HDD</code> to use hard disk drive storage. 
                HDD is supported on <code class="code">SINGLE_AZ_2</code> and <code class="code">MULTI_AZ_1</code> Windows file system deployment types,
                and on <code class="code">PERSISTENT_1</code> Lustre file system deployment types. 
                </p>
            </li></ul></div>
         <p>Default value is <code class="code">SSD</code>. For more information, see <a href="https://docs.aws.amazon.com/fsx/latest/WindowsGuide/optimize-fsx-costs.html#storage-type-options"> Storage
                type options</a> in the <em>FSx for Windows File Server User
                Guide</em> and <a href="https://docs.aws.amazon.com/fsx/latest/LustreGuide/what-is.html#storage-options">Multiple storage
                options</a> in the <em>FSx for Lustre User
            Guide</em>. </p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">SSD | HDD</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-fsx-filesystem-subnetids"><span class="term"><code class="code">SubnetIds</code></span></dt><dd>
         <p>Specifies the IDs of the subnets that the file system will be accessible from. For
            Windows and ONTAP <code class="code">MULTI_AZ_1</code> deployment types,provide exactly two subnet
            IDs, one for the preferred file server and one for the standby file server. You specify
            one of these subnets as the preferred subnet using the <code class="code">WindowsConfiguration &gt;
                PreferredSubnetID</code> or <code class="code">OntapConfiguration &gt; PreferredSubnetID</code>
            properties. For more information about Multi-AZ file system configuration, see <a href="https://docs.aws.amazon.com/fsx/latest/WindowsGuide/high-availability-multiAZ.html">
                Availability and durability: Single-AZ and Multi-AZ file systems</a> in the
                <em>Amazon FSx for Windows User Guide</em> and <a href="https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/high-availability-multiAZ.html">
                Availability and durability</a> in the <em>Amazon FSx for ONTAP User
                Guide</em>.</p>
         <p>For Windows <code class="code">SINGLE_AZ_1</code> and <code class="code">SINGLE_AZ_2</code> and all Lustre 
            deployment types, provide exactly one subnet ID.
           The file server is launched in that subnet's Availability Zone.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: Array of String</p><p><em>Maximum</em>: <code class="code">50</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-fsx-filesystem-tags"><span class="term"><code class="code">Tags</code></span></dt><dd>
         <p>The tags to associate with the file system. For more information, see <a href="https://docs.aws.amazon.com/fsx/latest/LustreGuide/tag-resources.html">Tagging your
                Amazon FSx resources</a> in the <em>Amazon FSx for Lustre User
            Guide</em>.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-fsx-filesystem-tag.html">Tag</a></p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">50</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-fsx-filesystem-windowsconfiguration"><span class="term"><code class="code">WindowsConfiguration</code></span></dt><dd>
        <p>The configuration object for the Microsoft Windows file system you are creating.</p>
        <p>This value is required if <code class="code">FileSystemType</code> is set to <code class="code">WINDOWS</code>.</p>
    <p><em>Required</em>: Conditional</p><p><em>Type</em>: <a href="./aws-properties-fsx-filesystem-windowsconfiguration.html">WindowsConfiguration</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd></dl></div><h2 id="aws-resource-fsx-filesystem-return-values">Return values</h2><h3 id="aws-resource-fsx-filesystem-return-values-ref">Ref</h3><p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the file system resource ID. For example:</p><p><code class="code"><span>{</span>"Ref":"file_system_logical_id"}</code></p><p>Returns <code class="code">fs-0123456789abcdef6</code>.</p><p>For more information about using the <code class="code">Ref</code> function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html"><code class="code">Ref</code></a>.</p><h3 id="aws-resource-fsx-filesystem-return-values-fn--getatt">Fn::GetAtt</h3><p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following are the available attributes and sample return values.</p>
<p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html"><code class="code">Fn::GetAtt</code></a>.</p><h4 id="aws-resource-fsx-filesystem-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist"><dl><dt id="DNSName-fn::getatt"><span class="term"><code class="code">DNSName</code></span></dt><dd>
        <p>Returns the FSx for Windows file system's DNSName.</p>
        <p>Example: <code class="code">amznfsxp1honlek.corp.example.com</code></p>        
    </dd><dt id="LustreMountName-fn::getatt"><span class="term"><code class="code">LustreMountName</code></span></dt><dd>
        <p>Returns the Lustre file system's <code class="code">LustreMountName</code>.</p> 
        <p>Example for <code class="code">SCRATCH_1</code> deployment types: This value is always <code class="code">fsx</code>.</p>
        <p>Example for <code class="code">SCRATCH_2</code> and <code class="code">PERSISTENT</code> deployment types: <code class="code">2p3fhbmv</code></p>        
    </dd><dt id="ResourceARN-fn::getatt"><span class="term"><code class="code">ResourceARN</code></span></dt><dd>
        <p>Returns the Amazon Resource Name (ARN) for the Amazon FSx file system.</p>
        <p>Example: <code class="code">arn:aws:fsx:us-east-2:111122223333:file-system/fs-0123abcd56789ef0a</code></p>
    </dd><dt id="RootVolumeId-fn::getatt"><span class="term"><code class="code">RootVolumeId</code></span></dt><dd>
        <p>Returns the root volume ID of the FSx for OpenZFS file system.</p>
        <p>Example: <code class="code">fsvol-0123456789abcdefa</code></p>        
    </dd></dl></div><h2 id="aws-resource-fsx-filesystem--examples">Examples</h2><p></p><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Lustre_File_System">Create an Amazon FSx for Lustre File System</a></li><li><a href="#aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_a_Self-managed_Active_Directory">Create an Amazon FSx for Windows File Server File System in a Self-managed Active Directory</a></li><li><a href="#aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_an_Amazon_Managed_Active_Directory">Create an Amazon FSx for Windows File Server File System in an Amazon Managed Active Directory</a></li><li><a href="#aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_with_file_access_audit_event_logging_enabled">Create an Amazon FSx for Windows File Server File System with file access audit event logging enabled</a></li><li><a href="#aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_NetApp_ONTAP_File_System">Create an Amazon FSx for NetApp ONTAP File System</a></li></ul></div><h3 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Lustre_File_System">Create an Amazon FSx for Lustre File System</h3><p>The following examples create a 1.2 TiB persistent Amazon FSx for Lustre file
                    system, with a <code class="code">PerUnitStorageThroughput</code> of 200 MB/s/TiB.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Lustre_File_System--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "BasicS3LinkedLustreFileSystem": <span>{</span>
            "Type": "AWS::FSx::FileSystem",
            "Properties": <span>{</span>
                "FileSystemType": "LUSTRE",
                "FileSystemTypeVersion": "2.12",
                "StorageCapacity": 1200,
                "SubnetIds": [
                    <span>{</span>
                        "Fn::ImportValue": "MySubnet01"
                    }
                ],
                "SecurityGroupIds": [
                    <span>{</span>
                        "Fn::ImportValue": "LustreIngressSecurityGroupId"
                    }
                ],
                "Tags": [
                    <span>{</span>
                        "Key": "Name",
                        "Value": "CFNs3linkedLustre"
                    }
                ],
                "LustreConfiguration": <span>{</span>
                    "AutoImportPolicy" : "NEW",               
                    "CopyTagsToBackups" : true,
                    "DeploymentType": "PERSISTENT_1",
                    "PerUnitStorageThroughput": 200,                    
                    "DataCompressionType": "LZ4",
                    "ImportPath": <span>{</span>
                        "Fn::Join": [
                            "",
                            [
                                "s3://",
                                <span>{</span>
                                    "Fn::ImportValue": "LustreCFNS3ImportBucketName"
                                }
                            ]
                        ]
                    },
                    "ExportPath": <span>{</span>
                        "Fn::Join": [
                            "",
                            [
                                "s3://",
                                <span>{</span>
                                    "Fn::ImportValue": "LustreCFNS3ExportPath"
                                }
                            ]
                        ]
                    },
                    "WeeklyMaintenanceStartTime": "2:20:30"
                }
            }
        }
    },
    "Outputs": <span>{</span>
        "FileSystemId": <span>{</span>
            "Value": <span>{</span>
                "Ref": "BasicS3LinkedLustreFileSystem"
            }
        }
    }
}
            </code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Lustre_File_System--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  BasicS3LinkedLustreFileSystem:
    Type: AWS::FSx::FileSystem
    Properties:
      FileSystemType: "LUSTRE"
      FileSystemTypeVersion: "2.12"
      StorageCapacity: 1200
      SubnetIds: [!ImportValue MySubnet01]
      SecurityGroupIds: [!ImportValue LustreIngressSecurityGroupId]
      Tags:
        - Key: "Name"
          Value: "CFNs3linkedLustre"
      LustreConfiguration:
        AutoImportPolicy: "NEW"
        CopyTagsToBackups: true
        DeploymentType: "PERSISTENT_1"
        PerUnitStorageThroughput: 200
        DataCompressionType: "LZ4"
        ImportPath: !Join ["", ["s3://", !ImportValue LustreCFNS3ImportBucketName]]
        ExportPath: !Join ["", ["s3://", !ImportValue LustreCFNS3ExportPath]]
        WeeklyMaintenanceStartTime: "2:20:30"
Outputs:
  FileSystemId:
    Value: !Ref BasicS3LinkedLustreFileSystem</code></pre></div><h3 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_a_Self-managed_Active_Directory">Create an Amazon FSx for Windows File Server File System in a Self-managed Active Directory</h3><p>The following examples create a Multi-AZ Amazon FSx for Windows File Server
                    file system joined to a self-managed active directory.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_a_Self-managed_Active_Directory--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "WindowsSelfManagedADFileSystemWithAllConfigs": <span>{</span>
            "Type": "AWS::FSx::FileSystem",
            "Properties": <span>{</span>
                "FileSystemType": "WINDOWS",
                "StorageCapacity": 32,
                "StorageType": "SSD",
                "SubnetIds": [
                    <span>{</span>
                        "Fn::ImportValue": "MySubnet01"
                    },
                    <span>{</span>
                        "Fn::ImportValue": "MySubnet02"
                    }
                ],
                "SecurityGroupIds": [
                    <span>{</span>
                        "Fn::ImportValue": "WindowsIngressSecurityGroupId"
                    }
                ],
                "Tags": [
                    <span>{</span>
                        "Key": "Name",
                        "Value": "windows"
                    }
                ],
                "WindowsConfiguration": <span>{</span>
                    "ThroughputCapacity": 8,
                    "Aliases": [
                        "financials.corp.example.com"
                    ],
                    "WeeklyMaintenanceStartTime": "4:16:30",
                    "DailyAutomaticBackupStartTime": "01:00",
                    "AutomaticBackupRetentionDays": 30,
                    "CopyTagsToBackups": false,
                    "DeploymentType": "MULTI_AZ_1",
                    "PreferredSubnetId": <span>{</span>
                        "Fn::ImportValue": "MySubnet01"
                    },
                    "SelfManagedActiveDirectoryConfiguration": <span>{</span>
                        "DnsIps": [
                            <span>{</span>
                                "Fn::Select": [
                                    0,
                                    <span>{</span>
                                        "Fn::Split": [
                                            ",",
                                            <span>{</span>
                                                "Fn::ImportValue": "MySelfManagedADDnsIpAddresses"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        "DomainName": <span>{</span>
                            "Fn::ImportValue": "SelfManagedADDomainName"
                        },
                        "FileSystemAdministratorsGroup": "MyDomainAdminGroup",
                        "OrganizationalUnitDistinguishedName": "OU=FileSystems,DC=corp,DC=example,DC=com",
                        "UserName": "Admin",
                        "Password": <span>{</span>
                            "Fn::Join": [
                                ":",
                                [
                                    "<span>{</span><span>{</span>resolve:secretsmanager",
                                    <span>{</span>
                                        "Fn::ImportValue": "MySelfManagedADCredentialName"
                                    },
                                    "SecretString}}"
                                ]
                            ]
                        }
                    }
                }
            }
        }
    },
    "Outputs": <span>{</span>
        "FileSystemId": <span>{</span>
            "Value": <span>{</span>
                "Ref": "WindowsSelfManagedADFileSystemWithAllConfigs"
            }
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_a_Self-managed_Active_Directory--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  WindowsSelfManagedADFileSystemWithAllConfigs:
    Type: 'AWS::FSx::FileSystem'
    Properties:
      FileSystemType: WINDOWS
      StorageCapacity: 32
      StorageType: SSD
      SubnetIds:
        - !ImportValue MySubnet01
        - !ImportValue MySubnet02
      SecurityGroupIds:
        - !ImportValue WindowsIngressSecurityGroupId
      Tags:
        - Key: Name
          Value: windows
      WindowsConfiguration:
        ThroughputCapacity: 8
        Aliases: 
            - financials.corp.example.com         
        WeeklyMaintenanceStartTime: '4:16:30'
        DailyAutomaticBackupStartTime: '01:00'
        AutomaticBackupRetentionDays: 30
        CopyTagsToBackups: false
        DeploymentType: MULTI_AZ_1
        PreferredSubnetId: !ImportValue MySubnet01
        SelfManagedActiveDirectoryConfiguration:
          DnsIps:
            - !Select 
              - 0
              - !Split 
                - ','
                - !ImportValue MySelfManagedADDnsIpAddresses
          DomainName:
            'Fn::ImportValue': SelfManagedADDomainName
          FileSystemAdministratorsGroup: MyDomainAdminGroup
          OrganizationalUnitDistinguishedName: 'OU=FileSystems,DC=corp,DC=example,DC=com'
          UserName: Admin
          Password: !Join 
            - ':'
            - - '<span>{</span><span>{</span>resolve:secretsmanager'
              - !ImportValue MySelfManagedADCredentialName
              - 'SecretString}}'
Outputs:
  FileSystemId:
    Value: !Ref WindowsSelfManagedADFileSystemWithAllConfigs
</code></pre></div><h3 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_an_Amazon_Managed_Active_Directory">Create an Amazon FSx for Windows File Server File System in an Amazon Managed Active Directory</h3><p>The following examples create a Multi-AZ Amazon FSx for Windows File Server
                    file system using HDD storage that is joined to an AWS Managed Active
                    Directory.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_an_Amazon_Managed_Active_Directory--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "WindowsMadFileSystemWithAllConfigs": <span>{</span>
            "Type": "AWS::FSx::FileSystem",
            "Properties": <span>{</span>
                "FileSystemType": "WINDOWS",
                "StorageCapacity": 2000,
                "StorageType": "HDD",
                "SubnetIds": [
                    <span>{</span>
                        "Fn::ImportValue": "CfnFsxMadSubnet01"
                    },
                    <span>{</span>
                        "Fn::ImportValue": "CfnFsxMadSubnet02"
                    }
                ],
                "SecurityGroupIds": [
                    <span>{</span>
                        "Fn::ImportValue": "WindowsIngressSecurityGroupId"
                    }
                ],
                "Tags": [
                    <span>{</span>
                        "Key": "Name",
                        "Value": "windows"
                    }
                ],
                "WindowsConfiguration": <span>{</span>
                    "ActiveDirectoryId": <span>{</span>
                        "Fn::ImportValue": "CfnFsxMadDirectoryServiceId"
                    },
                    "ThroughputCapacity": 8,
                    "Aliases": [
                        "financials.corp.example.com"
                    ],
                    "WeeklyMaintenanceStartTime": "4:16:30",
                    "DailyAutomaticBackupStartTime": "01:00",
                    "AutomaticBackupRetentionDays": 90,
                    "CopyTagsToBackups": false,
                    "DeploymentType": "MULTI_AZ_1",
                    "PreferredSubnetId": <span>{</span>
                        "Fn::ImportValue": "CfnFsxMadSubnet01"
                    }
                }
            }
        }
    },
    "Outputs": <span>{</span>
        "FileSystemId": <span>{</span>
            "Value": <span>{</span>
                "Ref": "WindowsMadFileSystemWithAllConfigs"
            }
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_in_an_Amazon_Managed_Active_Directory--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  WindowsMadFileSystemWithAllConfigs:
    Type: 'AWS::FSx::FileSystem'
    Properties:
      FileSystemType: WINDOWS
      StorageCapacity: 2000
      StorageType: SSD
      SubnetIds:
        - !ImportValue CfnFsxMadSubnet01
        - !ImportValue CfnFsxMadSubnet02
      SecurityGroupIds:
        - !ImportValue WindowsIngressSecurityGroupId
      Tags:
        - Key: Name
          Value: windows
      WindowsConfiguration:
        ActiveDirectoryId: !ImportValue CfnFsxMadDirectoryServiceId
        ThroughputCapacity: 8
        Aliases: 
            - financials.corp.example.com
        WeeklyMaintenanceStartTime: '4:16:30'
        DailyAutomaticBackupStartTime: '01:00'
        AutomaticBackupRetentionDays: 90
        DeploymentType: MULTI_AZ_1
        PreferredSubnetId: !ImportValue CfnFsxMadSubnet01
        CopyTagsToBackups: false
Outputs:
  FileSystemId:
    Value: !Ref WindowsMadFileSystemWithAllConfigs
</code></pre></div><h3 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_with_file_access_audit_event_logging_enabled">Create an Amazon FSx for Windows File Server File System with file access audit event logging enabled</h3><p>The following examples create a Multi-AZ Amazon FSx for Windows File Server
                    file system with file access auditing enabled. Audit event logs are emitted when
                    end users make successful or failed attempts to access files, folders, and file
                    shares on the file system.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_with_file_access_audit_event_logging_enabled--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "WindowsMadFileSystemWithAllConfigs": <span>{</span>
            "Type": "Dev::FSx::FileSystem",
            "Properties": <span>{</span>
                "FileSystemType": "WINDOWS",
                "StorageCapacity": 100,
                "SubnetIds": [
                    <span>{</span>
                        "Fn::ImportValue": "CfnFsxMadSubnet01"
                    },
                    <span>{</span>
                        "Fn::ImportValue": "CfnFsxMadSubnet02"
                    }
                ],
                "SecurityGroupIds": [
                    <span>{</span>
                        "Fn::ImportValue": "CfnWindowsIngressSecurityGroupId"
                    }
                ],
                "Tags": [
                    <span>{</span>
                        "Key": "Name",
                        "Value": "windows"
                    }
                ],
                "WindowsConfiguration": <span>{</span>
                    "ActiveDirectoryId": <span>{</span>
                        "Fn::ImportValue": "CfnFsxMadDirectoryServiceId"
                    },
                    "ThroughputCapacity": 32,
                    "DeploymentType": "MULTI_AZ_1",
                    "PreferredSubnetId": <span>{</span>
                        "Fn::ImportValue": "CfnFsxMadSubnet01"
                    }
                    "AuditLogConfiguration": <span>{</span>
                        "FileAccessAuditLogLevel": "SUCCESS_AND_FAILURE",
                        "FileShareAccessAuditLogLevel": "SUCCESS_AND_FAILURE",
                        "AuditLogDestination": 
                        <span>{</span>
                          "Fn::Select": [
                            0,
                            <span>{</span>
                              "Fn::Split": [
                                ":*",
                                <span>{</span>
                                  "Fn::ImportValue": "CfnWindowsFileAccessAuditingLogGroupArn"
                                }
                              ]
                            }
                          ]
                        }
                    }
                }
            }
        }
    },
    "Outputs": <span>{</span>
        "FileSystemId": <span>{</span>
             "Value": <span>{</span>
                "Ref": "WindowsMadFileSystemWithAllConfigs"
            }
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_Windows_File_Server_File_System_with_file_access_audit_event_logging_enabled--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  WindowsMadFileSystemWithAllConfigs:
    Type: "AWS::FSx::FileSystem"
    Properties:
      FileSystemType: "WINDOWS"
      StorageCapacity: 100
      SubnetIds:
        - !ImportValue CfnFsxMadSubnet01
        - !ImportValue CfnFsxMadSubnet02
      SecurityGroupIds:
        - !ImportValue WindowsIngressSecurityGroupId
      Tags:
        - Key: Name
          Value: windows
      WindowsConfiguration:
        ActiveDirectoryId: !ImportValue CfnFsxMadDirectoryServiceId
        ThroughputCapacity: 32
        DeploymentType: MULTI_AZ_1
        PreferredSubnetId: !ImportValue CfnFsxMadSubnet01
        AuditLogConfiguration:
          FileAccessAuditLogLevel: "SUCCESS_AND_FAILURE"
          FileShareAccessAuditLogLevel: "SUCCESS_AND_FAILURE"
          AuditLogDestination: !Select
            - 0
            - !Split
              - ':*'
              - 'Fn::ImportValue': WindowsFileAccessAuditingLogGroupArn
                
Outputs:
    FileSystemId:
      Value: !Ref WindowsMadFileSystemWithAllConfigs</code></pre></div><h3 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_NetApp_ONTAP_File_System">Create an Amazon FSx for NetApp ONTAP File System</h3><p>The following examples create a 1 TiB Amazon FSx for NetApp ONTAP file
                    system.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_NetApp_ONTAP_File_System--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "OntapMultiAzFileSystemWithAllConfigs": <span>{</span>
      "Type": "AWS::FSx::FileSystem",
      "Condition": "OntapMazEnabled",
      "Properties": <span>{</span>
         "FileSystemType": "ONTAP",
         "StorageCapacity": 1024,
         "StorageType": "SSD",
         "SubnetIds": [
         "subnet-1234567890abcdef0",
         "subnet-abcdef01234567890"
         ],
         "SecurityGroupIds": [
         "sg-021345abcdef6789"
         ],
         "OntapConfiguration": <span>{</span>
            "AutomaticBackupRetentionDays": 3,
            "DailyAutomaticBackupStartTime": "07:00",
            "DeploymentType": "MULTI_AZ_1",
            "DiskIopsConfiguration": <span>{</span>
               "Iops": 10000,
               "Mode": "USER_PROVISIONED"
            },
            "PreferredSubnetId": "subnet-abcdef01234567890",
            "RouteTableIds": [
            "rtb-abcdef01234567890"
            ],
            "ThroughputCapacity": 512,
            "WeeklyMaintenanceStartTime": "4:16:30"
         },
         "Tags": [
            <span>{</span>
               "Key": "Name",
               "Value": "OntapFileSystem_MAZ"
            }
         ]
      }
   }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-fsx-filesystem--examples--Create_an_Amazon_FSx_for_NetApp_ONTAP_File_System--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">OntapMultiAzFileSystemWithAllConfigs:
   Type: "AWS::FSx::FileSystem"
   Condition: OntapMazEnabled
   Properties:
      FileSystemType: "ONTAP"
      StorageCapacity: 1024
      StorageType: SSD
      SubnetIds: ["subnet-1234567890abcdef0", "subnet-abcdef01234567890"]
      SecurityGroupIds: ["sg-068ec2a396aa7c2c8"]
      OntapConfiguration:
         AutomaticBackupRetentionDays: 3
         DailyAutomaticBackupStartTime: "07:00"
         DeploymentType: "MULTI_AZ_1"
         DiskIopsConfiguration:
            Iops: 10000
            Mode: "USER_PROVISIONED"
         PreferredSubnetId: "subnet-abcdef01234567890"
         RouteTableIds: ["rtb-abcdef01234567890"]
         ThroughputCapacity: 512
         WeeklyMaintenanceStartTime: "4:16:30"
      Tags:
        - Key: "Name"
          Value: "OntapFileSystem_MAZ"</code></pre></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-properties-fsx-datarepositoryassociation-tag.html">Tag</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-fsx-filesystem-auditlogconfiguration.html">AuditLogConfiguration</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=FSx&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=FSx&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-fsx-filesystem.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>