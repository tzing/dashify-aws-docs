<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>DependsOn attribute - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-attribute-dependson" /><meta name="default_state" content="aws-attribute-dependson" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="description" content="Specify that the creation of a specific resource depends on another resource in CloudFormation with the DependsOn attribute." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="DependsOn attribute" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>DependsOn attribute - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Template reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Resource attribute reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-product-attribute-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "DependsOn attribute",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-product-attribute-reference.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-attribute-dependson-syntax">Syntax</a><a href="#aws-attribute-dependson-example">Example</a><a href="#gatewayattachment">When a DependsOn attribute is
                required</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-attribute-dependson"><code class="code">DependsOn</code> attribute</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>With the <code class="code">DependsOn</code> attribute you can specify that the creation of a specific
        resource follows another. When you add a <code class="code">DependsOn</code> attribute to a resource,
        that resource is created only after the creation of the resource specified in the
            <code class="code">DependsOn</code> attribute.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Dependent stacks also have implicit dependencies in the form of target properties
                <code class="code">!Ref</code>, <code class="code">!GetAtt</code>, and <code class="code">!Sub</code>. For example, if the properties of
            resource A use a <code class="code">!Ref</code> to resource B, the following rules apply:</p><div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Resource B is created before resource A.</p>
            </li><li class="listitem">
                <p>Resource A is deleted before resource B.</p>
            </li><li class="listitem">
                <p>Resource B is updated before resource A.</p>
            </li></ul></div></div></div><p>You can use the <code class="code">DependsOn</code> attribute with any resource. Here are some typical
        uses:</p><div class="itemizedlist">
         
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>Determine when a wait condition goes into effect. For more information, see <a href="./using-cfn-waitcondition.html">Creating wait conditions in a template</a>.</p>
        </li><li class="listitem">
            <p>Declare dependencies for resources that must be created or deleted in a specific
                order. For example, you must explicitly declare dependencies on gateway attachments
                for some resources in a VPC. For more information, see <a href="#gatewayattachment">When a DependsOn attribute is
                required</a>.</p>
        </li><li class="listitem">
            <p>Override default parallelism when creating, updating, or deleting resources. AWS CloudFormation
                creates, updates, and deletes resources in parallel to the extent possible. It
                automatically determines which resources in a template can be parallelized and which
                have dependencies that require other operations to finish first. You can use
                    <code class="code">DependsOn</code> to explicitly specify dependencies, which overrides the
                default parallelism and directs CloudFormation to operate on those resources in a
                specified order.</p>
        </li></ul></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>During a stack update, resources that depend on updated resources are updated
            automatically. CloudFormation makes no changes to the automatically updated resources, but,
            if a stack policy is associated with these resources, your account must have the
            permissions to update them.</p></div></div>
        <h2 id="aws-attribute-dependson-syntax">Syntax</h2>

        <p>The <code class="code">DependsOn</code> attribute can take a single string or list of
            strings.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"DependsOn" : [ <code class="replaceable">String, ...</code> ]</code></pre>
     
        <h2 id="aws-attribute-dependson-example">Example</h2>

        <p>The following template contains an <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a> resource with a <code class="code">DependsOn</code> attribute that
            specifies myDB, an <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-rds-database-instance.html">AWS::RDS::DBInstance</a>. When CloudFormation creates this stack, it first creates
            myDB, then creates Ec2Instance.</p>
        <div id="JSON" name="JSON" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-1.json">JSON</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion" : "2010-09-09",
    "Mappings" : <span>{</span>
        "RegionMap" : <span>{</span>
            "us-east-1" : <span>{</span> 
                "AMI" : "ami-0ff8a91507f77f867" 
            },
            "us-west-1" : <span>{</span> 
                "AMI" : "ami-0bdb828fd58c52235" 
            },
            "eu-west-1" : <span>{</span> 
                "AMI" : "ami-047bb4163c506cd98" 
            },
            "ap-northeast-1" : <span>{</span> 
                "AMI" : "ami-06cd52961ce9f0d85" 
            },
            "ap-southeast-1" : <span>{</span> 
                "AMI" : "ami-08569b978cc4dfa10" 
            }
        }
    },
    "Resources" : <span>{</span>
        "Ec2Instance" : <span>{</span>
            "Type" : "AWS::EC2::Instance",
            "Properties" : <span>{</span>
                "ImageId": <span>{</span>
                    "Fn::FindInMap": [
                        "RegionMap",
                        <span>{</span>
                            "Ref": "AWS::Region"
                        },
                        "AMI"
                    ]
                }
            },
            "DependsOn" : "myDB"
        },
        "myDB" : <span>{</span>
            "Type" : "AWS::RDS::DBInstance",
            "Properties" : <span>{</span>
               "AllocatedStorage" : "5",
               "DBInstanceClass" : "db.t2.small",
               "Engine" : "MySQL",
               "EngineVersion" : "5.5",
               "MasterUsername" : "MyName",
               "MasterUserPassword" : "MyPassword"
            }
        }
    }
}     </code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-1.yaml">YAML</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Mappings:
  RegionMap:
    us-east-1:
      AMI: ami-0ff8a91507f77f867
    us-west-1:
      AMI: ami-0bdb828fd58c52235
    eu-west-1:
      AMI: ami-047bb4163c506cd98
    ap-northeast-1:
      AMI: ami-06cd52961ce9f0d85
    ap-southeast-1:
      AMI: ami-08569b978cc4dfa10
Resources:
  Ec2Instance:
    Type: AWS::EC2::Instance
    Properties:
      ImageId:
        Fn::FindInMap:
        - RegionMap
        - Ref: AWS::Region
        - AMI
    DependsOn: myDB
  myDB:
    Type: AWS::RDS::DBInstance
    Properties:
      AllocatedStorage: '5'
      DBInstanceClass: db.t2.small
      Engine: MySQL
      EngineVersion: '5.5'
      MasterUsername: MyName
      MasterUserPassword: MyPassword
</code></pre>
        </div>
     
        <h2 id="gatewayattachment">When a <code class="code">DependsOn</code> attribute is
                required</h2>

        <p>VPC-gateway attachment</p>
        <p>Some resources in a VPC require a gateway (either an Internet or VPN gateway). If your
            CloudFormation template defines a VPC, a gateway, and a gateway attachment, any resources
            that require the gateway are dependent on the gateway attachment. For example, an Amazon EC2
            instance with a public IP address is dependent on the VPC-gateway attachment if the
                <code class="code">VPC</code> and <code class="code">InternetGateway</code> resources are also declared in the
            same template.</p>
        <p>Currently, the following resources depend on a VPC-gateway attachment when they have
            an associated public IP address and are in a VPC.</p>
        <div class="itemizedlist">
             
             
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Auto Scaling groups</p>
            </li><li class="listitem">
                <p>Amazon EC2 instances</p>
            </li><li class="listitem">
                <p>Elastic Load Balancing load balancers</p>
            </li><li class="listitem">
                <p>Elastic IP addresses</p>
            </li><li class="listitem">
                <p>Amazon RDS database instances</p>
            </li><li class="listitem">
                <p>Amazon VPC routes that include the Internet gateway</p>
            </li></ul></div>
        <p>A VPN gateway route propagation depends on a VPC-gateway attachment when you have a
            VPN gateway.</p>
        <p>The following snippet shows a sample gateway attachment and an Amazon EC2 instance that
            depends on a gateway attachment:</p>
        <div id="JSON" name="JSON" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-2.json">JSON</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"GatewayToInternet" : <span>{</span>
  "Type" : "AWS::EC2::VPCGatewayAttachment",
  "Properties" : <span>{</span>
    "VpcId" : <span>{</span> 
      "Ref" : "VPC" 
    },
    "InternetGatewayId" : <span>{</span> 
      "Ref" : "InternetGateway" 
    }
  }
},

"EC2Host" : <span>{</span>
  "Type" : "AWS::EC2::Instance",
  "DependsOn" : "GatewayToInternet",
  "Properties" : <span>{</span>
    "InstanceType" : <span>{</span> 
      "Ref" : "EC2InstanceType" 
    },
    "KeyName"  : <span>{</span> 
      "Ref" : "KeyName" 
    },
    "ImageId": <span>{</span>
      "Fn::FindInMap": [
        "AWSRegionArch2AMI",
        <span>{</span>
          "Ref": "AWS::Region"
        },
        <span>{</span>
          "Fn::FindInMap": [
            "AWSInstanceType2Arch",
            <span>{</span>
              "Ref": "EC2InstanceType"
            },
            "Arch"
          ]
        }
      ]
    },
    "NetworkInterfaces" : [
      <span>{</span>
        "GroupSet" : [
          <span>{</span> 
            "Ref" : "EC2SecurityGroup" 
          }
        ],
        "AssociatePublicIpAddress" : "true",
        "DeviceIndex" : "0",
        "DeleteOnTermination" : "true",
        "SubnetId" : <span>{</span> 
          "Ref" : "PublicSubnet" 
        }
      }
    ]
  }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-2.yaml">YAML</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">GatewayToInternet:
  Type: AWS::EC2::VPCGatewayAttachment
  Properties:
    VpcId:
      Ref: VPC
    InternetGatewayId:
      Ref: InternetGateway
EC2Host:
  Type: AWS::EC2::Instance
  DependsOn: GatewayToInternet
  Properties:
    InstanceType:
      Ref: EC2InstanceType
    KeyName:
      Ref: KeyName
    ImageId:
      Fn::FindInMap:
      - AWSRegionArch2AMI
      - Ref: AWS::Region
      - Fn::FindInMap:
        - AWSInstanceType2Arch
        - Ref: EC2InstanceType
        - Arch
    NetworkInterfaces:
    - GroupSet:
      - Ref: EC2SecurityGroup
      AssociatePublicIpAddress: 'true'
      DeviceIndex: '0'
      DeleteOnTermination: 'true'
      SubnetId:
        Ref: PublicSubnet</code></pre>
        </div>
         
            <h3 id="w9aac34c23c15c17c19">Amazon ECS service and Auto Scaling group</h3>

            <p>When you use Auto Scaling or Amazon Elastic Compute Cloud (Amazon EC2) to create container instances for an Amazon ECS
                cluster, the Amazon ECS service resource must have a dependency on the Auto Scaling group or
                Amazon EC2 instances, as shown in the following snippet. That way the container instances
                are available and associated with the Amazon ECS cluster before CloudFormation creates the
                Amazon ECS service.</p>
            <div id="JSON" name="JSON" class="section langfilter">
                <h4 id="aws-attribute-dependson-example-3.json">JSON</h4>

                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"service": <span>{</span>
  "Type": "AWS::ECS::Service",
  "DependsOn": [
    "ECSAutoScalingGroup"
  ],
  "Properties" : <span>{</span>
    "Cluster": <span>{</span>
      "Ref": "ECSCluster"
    },
    "DesiredCount": "1",
    "LoadBalancers": [
      <span>{</span>
        "ContainerName": "simple-app",
        "ContainerPort": "80",
        "LoadBalancerName" : <span>{</span> 
          "Ref" : "EcsElasticLoadBalancer" 
        }
      }
    ],
    "Role" : <span>{</span>
      "Ref":"ECSServiceRole"
    },
    "TaskDefinition" : <span>{</span>
      "Ref":"taskdefinition"
    }
  }
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
                <h4 id="aws-attribute-dependson-example-3.yaml">YAML</h4>

                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">service:
  Type: AWS::ECS::Service
  DependsOn:
  - ECSAutoScalingGroup
  Properties:
    Cluster:
      Ref: ECSCluster
    DesiredCount: 1
    LoadBalancers:
    - ContainerName: simple-app
      ContainerPort: 80
      LoadBalancerName:
        Ref: EcsElasticLoadBalancer
    Role:
      Ref: ECSServiceRole
    TaskDefinition:
      Ref: taskdefinition</code></pre>
            </div>
         
         
            <h3 id="w9aac34c23c15c17c21">IAM role policy</h3>

            <p>Resources that make additional calls to AWS require a service role, which
                permits a service to make calls to AWS on your behalf. For example, the
                    <code class="code">AWS::CodeDeploy::DeploymentGroup</code> resource requires a service role
                so that CodeDeploy has permissions to deploy applications to your instances. When you
                have a single template that defines a service role, the role's policy (by using the
                    <code class="code">AWS::IAM::Policy</code> or <code class="code">AWS::IAM::ManagedPolicy</code> resource),
                and a resource that uses the role, add a dependency so that the resource depends on
                the role's policy. This dependency ensures that the policy is available throughout
                the resource's lifecycle.</p>
            <p>For example, imagine that you have a template with a deployment group resource, a
                service role, and the role's policy. When you create a stack, CloudFormation won't
                create the deployment group until it creates the role's policy. Without the
                dependency, CloudFormation can create the deployment group resource before it creates
                the role's policy. If that happens, the deployment group will fail to create because
                of insufficient permissions.</p>
            <p>If the role has an embedded policy, don't specify a dependency. CloudFormation creates
                the role and its policy at the same time.</p>
         
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-attribute-deletionpolicy.html">DeletionPolicy</div><div id="next" class="next-link" accesskey="n" href="./aws-attribute-metadata.html">Metadata</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>