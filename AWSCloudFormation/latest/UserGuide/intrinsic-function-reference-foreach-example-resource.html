<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Examples of Fn::ForEach in the Resources section - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="intrinsic-function-reference-foreach-example-resource" /><meta name="default_state" content="intrinsic-function-reference-foreach-example-resource" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" /><meta name="description" content="These examples demonstrate using the Fn::ForEach intrinsic function in the section." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Examples of Fn::ForEach in the Resources section" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Examples of Fn::ForEach in the Resources section - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set,Fn::ForEach,Examples" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Template reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Intrinsic function reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Fn::ForEach",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Examples",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-examples.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Examples of Fn::ForEach in the Resources section",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-examples.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#intrinsic-function-reference-foreach-example-replicate-resource">Replicate an Amazon SNS resource</a><a href="#intrinsic-function-reference-foreach-example-replicate-ddb-resource">Replicate an Amazon DynamoDB resource</a><a href="#intrinsic-function-reference-foreach-example-replicate-multiple-resources">Replicate multiple resources</a><a href="#intrinsic-function-reference-foreach-example-nested-loop-resources">Replicate multiple resources using a nested Fn::ForEach loops</a><a href="#intrinsic-function-reference-foreach-example-reference-replicated-resource">Reference replicated properties for an Amazon EC2 resource</a><a href="#intrinsic-function-reference-foreach-example-replicate-resource-properties">Replicate properties for an Amazon EC2 resource</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="intrinsic-function-reference-foreach-example-resource">Examples of
            <code class="code">Fn::ForEach</code> in the <code class="code">Resources</code> section</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>These examples demonstrate using the <code class="code">Fn::ForEach</code> intrinsic function in the
          <a href="./resources-section-structure.html">Resources</a>
        section.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#intrinsic-function-reference-foreach-example-replicate-resource">Replicate an Amazon SNS resource</a></li><li><a href="#intrinsic-function-reference-foreach-example-replicate-ddb-resource">Replicate an Amazon DynamoDB resource</a></li><li><a href="#intrinsic-function-reference-foreach-example-replicate-multiple-resources">Replicate multiple resources</a></li><li><a href="#intrinsic-function-reference-foreach-example-nested-loop-resources">Replicate multiple resources using a nested Fn::ForEach loops</a></li><li><a href="#intrinsic-function-reference-foreach-example-reference-replicated-resource">Reference replicated properties for an Amazon EC2 resource</a></li><li><a href="#intrinsic-function-reference-foreach-example-replicate-resource-properties">Replicate properties for an Amazon EC2 resource</a></li></ul></div>
        <h2 id="intrinsic-function-reference-foreach-example-replicate-resource">Replicate an Amazon SNS resource</h2>
        <p>This example snippet returns a list of four Amazon SNS topics, with the logical ID
          corresponding to the items in the collection (<code class="code">Success</code>, <code class="code">Failure</code>,
            <code class="code">Timeout</code>, <code class="code">Unknown</code>), with a matching <code class="code">TopicName</code> and
            <code class="code">FifoTopic</code> set to <code class="code">true</code>.</p>
        <div id="JSON" name="JSON" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-replicate-resource.json">JSON</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Transform": "AWS::LanguageExtensions",
    "Parameters": <span>{</span>
        "pRepoARNs": <span>{</span>
            "Description": "ARN of SSO instance",
            "Type": "CommaDelimitedList"
        }
    },
    "Resources": <span>{</span>
        "Fn::ForEach::Topics": [
            "TopicName",
            <span>{</span>
                "Ref": "pRepoARNs"
            },
            <span>{</span>
                "SnsTopic$<span>{</span>TopicName}": <span>{</span>
                    "Type": "AWS::SNS::Topic",
                    "Properties": <span>{</span>
                        "TopicName": <span>{</span>
                            "Fn::Join": [
                                ".",
                                [
                                    <span>{</span>
                                        "Ref": "TopicName"
                                    },
                                    "fifo"
                                ]
                            ]
                        },
                        "FifoTopic": true
                    }
                }
            }
        ]
    }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-replicate-resource.yaml">YAML</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: 'AWS::LanguageExtensions'
Parameters:
  pRepoARNs:
    Description: ARN of SSO instance
    Type: CommaDelimitedList
Resources:
  'Fn::ForEach::Topics':
    - TopicName
    - !Ref pRepoARNs
    - 'SnsTopic$<span>{</span>TopicName}':
        Type: 'AWS::SNS::Topic'
        Properties:
          TopicName: 
           'Fn::Join':
            - '.'
            - - !Ref TopicName
              - fifo
          FifoTopic: true</code></pre>
        </div>
        <p>The transformed template will be equivalent to the following template:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Resources": <span>{</span>
        "SnsTopicSuccess": <span>{</span>
            "Type": "AWS::SNS::Topic",
            "Properties": <span>{</span>
                "TopicName": "Success.fifo",
                "FifoTopic": true
            }
        },
        "SnsTopicFailure": <span>{</span>
            "Type": "AWS::SNS::Topic",
            "Properties": <span>{</span>
                "TopicName": "Failure.fifo",
                "FifoTopic": true
            }
        },
        "SnsTopicTimeout": <span>{</span>
            "Type": "AWS::SNS::Topic",
            "Properties": <span>{</span>
                "TopicName": "Timeout.fifo",
                "FifoTopic": true
            }
        },
        "SnsTopicUnknown": <span>{</span>
            "Type": "AWS::SNS::Topic",
            "Properties": <span>{</span>
                "TopicName": "Unknown.fifo",
                "FifoTopic": true
            }
        }
    }
}</code></pre>
       
        <h2 id="intrinsic-function-reference-foreach-example-replicate-ddb-resource">Replicate an Amazon DynamoDB resource</h2>
        <p>This example snippet creates four <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-dynamodb-table.html"><code class="code">AWS::DynamoDB::Table</code></a> resources with names such as
            <code class="code">Points</code>, <code class="code">Score</code>, etc.</p>
        <div id="JSON" name="JSON" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-replicate-ddb-resource.json">JSON</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Transform": "AWS::LanguageExtensions",
    "Resources": <span>{</span>
        "Fn::ForEach::Tables": [
            "TableName",
            ["Points", "Score", "Name", "Leaderboard"],
            <span>{</span>
                "DynamoDB$<span>{</span>TableName}": <span>{</span>
                    "Type": "AWS::DynamoDB::Table",
                    "Properties": <span>{</span>
                        "TableName": <span>{</span>
                            "Ref": "TableName"
                        },
                        "AttributeDefinitions": [
                            <span>{</span>
                                "AttributeName": "id",
                                "AttributeType": "S"
                            }
                        ],
                        "KeySchema": [
                            <span>{</span>
                                "AttributeName": "id",
                                "KeyType": "HASH"
                            }
                        ],
                        "ProvisionedThroughput": <span>{</span>
                            "ReadCapacityUnits": "5",
                            "WriteCapacityUnits": "5"
                        }
                    }
                }
            }
        ]
    }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-replicate-ddb-resource.yaml">YAML</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: 'AWS::LanguageExtensions'
Resources:
  'Fn::ForEach::Tables':
    - TableName
    - [Points, Score, Name, Leaderboard]
    - 'DynamoDB$<span>{</span>TableName}':
        Type: 'AWS::DynamoDB::Table'
        Properties:
          TableName: !Ref TableName
          AttributeDefinitions:
            - AttributeName: id
              AttributeType: S
          KeySchema:
            - AttributeName: id
              KeyType: HASH
          ProvisionedThroughput:
            ReadCapacityUnits: '5'
            WriteCapacityUnits: '5'</code></pre>
        </div>
        <p>The transformed template will be equivalent to the following template:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: 'AWS::LanguageExtensions'
Resources:
  DynamoDBPoints:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      TableName: Points
      AttributeDefinitions:
        - AttributeName: id
          AttributeType: S
      KeySchema:
        - AttributeName: id
          KeyType: HASH
      ProvisionedThroughput:
        ReadCapacityUnits: '5'
        WriteCapacityUnits: '5'
  DynamoDBScore:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      TableName: Score
      AttributeDefinitions:
        - AttributeName: id
          AttributeType: S
      KeySchema:
        - AttributeName: id
          KeyType: HASH
      ProvisionedThroughput:
        ReadCapacityUnits: '5'
        WriteCapacityUnits: '5'
  DynamoDBName:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      TableName: Name
      AttributeDefinitions:
        - AttributeName: id
          AttributeType: S
      KeySchema:
        - AttributeName: id
          KeyType: HASH
      ProvisionedThroughput:
        ReadCapacityUnits: '5'
        WriteCapacityUnits: '5'
  DynamoDBLeaderboard:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      TableName: Leaderboard
      AttributeDefinitions:
        - AttributeName: id
          AttributeType: S
      KeySchema:
        - AttributeName: id
          KeyType: HASH
      ProvisionedThroughput:
        ReadCapacityUnits: '5'
        WriteCapacityUnits: '5'</code></pre>
       
        <h2 id="intrinsic-function-reference-foreach-example-replicate-multiple-resources">Replicate multiple resources</h2>
        <p>This example creates multiple instances of <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-natgateway.html"><code class="code">AWS::EC2::NatGateway</code></a> and <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-eip.html"><code class="code">AWS::EC2::EIP</code></a> using a naming convention of
          "<span>{</span>ResourceType}$<span>{</span>Identifier}". You can declare multiple resource types under one
            <code class="code">Fn::ForEach</code> loop to take advantage of a single identifier.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The example below assumes the <code class="code">TwoNatGateways</code> and
              <code class="code">ThreeNatGateways</code> Conditions exist, and <code class="code">PublicSubnetA</code>,
              <code class="code">PublicSubnetB</code>, and <code class="code">PublicSubnetC</code> Resources are
            defined.</p></div></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Unique values for each element in the Collection are defined within the Mappings
            section, where the <a href="./intrinsic-function-reference-findinmap.html">Fn::FindInMap</a> intrinsic function is used to
            reference the corresponding value. If <code class="code">Fn::FindInMap</code> is unable to find the
            corresponding identifier, the Condition property will not be set resolving to <code class="code">!Ref
              â€˜AWS:::NoValue</code>.</p></div></div>
        <div id="JSON" name="JSON" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-replicate-multiple-resources.json">JSON</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "AWSTemplateFormatVersion": "2010-09-09",
  "Transform": "AWS::LanguageExtensions",
  "Mappings": <span>{</span>
    "NatGateway": <span>{</span>
      "Condition": <span>{</span>
        "B": "TwoNatGateways",
        "C": "ThreeNatGateways"
      }
    }
  },
  "Resources": <span>{</span>
    "Fn::ForEach::NatGatewayAndEIP": [
      "Identifier",
      [ "A", "B", "C" ],
      <span>{</span>
        "NatGateway$<span>{</span>Identifier}": <span>{</span>
          "Type": "AWS::EC2::NatGateway",
          "Properties": <span>{</span>
            "AllocationId": <span>{</span>
              "Fn::GetAtt": [
                <span>{</span>
                  "Fn::Sub": "NatGatewayAttachment$<span>{</span>Identifier}"
                },
                "AllocationId"
              ]
            },
            "SubnetId": <span>{</span>
              "Ref": <span>{</span>
                "Fn::Sub": "PublicSubnet$<span>{</span>Identifier}"
              }
            }
          },
          "Condition": <span>{</span>
            "Fn::FindInMap": [
              "NatGateway",
              "Condition",
              <span>{</span>
                "Ref": "Identifier"
              },
              <span>{</span>
                "DefaultValue": <span>{</span>
                  "Ref": "AWS::NoValue"
                }
              }
            ]
          }
        },
        "NatGatewayAttachment$<span>{</span>Identifier}": <span>{</span>
          "Type": "AWS::EC2::EIP",
          "Properties": <span>{</span>
            "Domain": "vpc"
          },
          "Condition": <span>{</span>
            "Fn::FindInMap": [
              "NatGateway",
              "Condition",
              <span>{</span>
                "Ref": "Identifier"
              },
              <span>{</span>
                "DefaultValue": <span>{</span>
                  "Ref": "AWS::NoValue"
                }
              }
            ]
          }
        }
      }
    ]
  }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-replicate-multiple-resources.yaml">YAML</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: AWS::LanguageExtensions
Mappings:
  NatGateway:
    Condition:
      B: TwoNatGateways
      C: ThreeNatGateways
Resources:
  Fn::ForEach::NatGatewayAndEIP:
    - Identifier
    - - A
      - B
      - C
    - NatGateway$<span>{</span>Identifier}:
        Type: AWS::EC2::NatGateway
        Properties:
          AllocationId: !GetAtt
            - !Sub NatGatewayAttachment$<span>{</span>Identifier}
            - AllocationId
          SubnetId: !Ref
            Fn::Sub: PublicSubnet$<span>{</span>Identifier}
        Condition: !FindInMap
          - NatGateway
          - Condition
          - !Ref Identifier
          - DefaultValue: !Ref AWS::NoValue
      NatGatewayAttachment$<span>{</span>Identifier}:
        Type: AWS::EC2::EIP
        Properties:
          Domain: vpc
        Condition: !FindInMap
          - NatGateway
          - Condition
          - !Ref Identifier
          - DefaultValue: !Ref AWS::NoValue</code></pre>
        </div>
        <p>The transformed template will be equivalent to the following template:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: AWS::LanguageExtensions
Resources:
  NatGatewayA:
    Type: AWS::EC2::NatGateway
    Properties:
      AllocationId: !GetAtt
        - NatGatewayAttachmentA
        - AllocationId
      SubnetId: !Ref PublicSubnetA
  NatGatewayB:
    Type: AWS::EC2::NatGateway
    Properties:
      AllocationId: !GetAtt
        - NatGatewayAttachmentB
        - AllocationId
      SubnetId: !Ref PublicSubnetB
    Condition: TwoNatGateways
  NatGatewayC:
    Type: AWS::EC2::NatGateway
    Properties:
      AllocationId: !GetAtt
        - NatGatewayAttachmentC
        - AllocationId
      SubnetId: !Ref PublicSubnetC
    Condition: ThreeNatGateways
  NatGatewayAttachmentA:
    Type: AWS::EC2::EIP
    Properties:
      Domain: vpc
  NatGatewayAttachmentB:
    Type: AWS::EC2::EIP
    Properties:
      Domain: vpc
    Condition: TwoNatGateways
  NatGatewayAttachmentC:
    Type: AWS::EC2::EIP
    Properties:
      Domain: vpc
    Condition: ThreeNatGateways</code></pre>
       
        <h2 id="intrinsic-function-reference-foreach-example-nested-loop-resources">Replicate multiple resources using a nested <code class="code">Fn::ForEach</code> loops</h2>
        <p>This example uses nested <code class="code">Fn::ForEach</code> loops to map three resources (
            <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-natgateway.html"><code class="code">AWS::EC2::NetworkAcl</code></a>, <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-subnet.html"><code class="code">AWS::EC2::Subnet</code></a>, and <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-subnet-network-acl-assoc.html"><code class="code">AWS::EC2::SubnetNetworkAclAssociation</code></a>) with each other.</p>
        <div id="JSON" name="JSON" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-nested-loop-resources.json">JSON</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "AWSTemplateFormatVersion": "2010-09-09",
  "Transform": "AWS::LanguageExtensions",
  "Resources": <span>{</span>
    "VPC": <span>{</span>
      "Type": "AWS::EC2::VPC",
      "Properties": <span>{</span>
        "CidrBlock": "10.0.0.0/16",
        "EnableDnsSupport": "true",
        "EnableDnsHostnames": "true"
      }
    },
    "Fn::ForEach::SubnetResources": [
      "Prefix",
      [
        "Transit",
        "Public"
      ],
      <span>{</span>
        "Nacl$<span>{</span>Prefix}Subnet": <span>{</span>
          "Type": "AWS::EC2::NetworkAcl",
          "Properties": <span>{</span>
            "VpcId": <span>{</span>
              "Ref": "VPC"
            }
          }
        },
        "Fn::ForEach::LoopInner": [
          "Suffix",
          [
            "A",
            "B",
            "C"
          ],
          <span>{</span>
            "$<span>{</span>Prefix}Subnet$<span>{</span>Suffix}": <span>{</span>
              "Type": "AWS::EC2::Subnet",
              "Properties": <span>{</span>
                "VpcId": <span>{</span>
                  "Ref": "VPC"
                }
              }
            },
            "Nacl$<span>{</span>Prefix}Subnet$<span>{</span>Suffix}Association": <span>{</span>
              "Type": "AWS::EC2::SubnetNetworkAclAssociation",
              "Properties": <span>{</span>
                "SubnetId": <span>{</span>
                  "Ref": <span>{</span>
                    "Fn::Sub": "$<span>{</span>Prefix}Subnet$<span>{</span>Suffix}"
                  }
                },
                "NetworkAclId": <span>{</span>
                  "Ref": <span>{</span>
                    "Fn::Sub": "Nacl$<span>{</span>Prefix}Subnet"
                  }
                }
              }
            }
          }
        ]
      }
    ]
  }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-nested-loop-resources.yaml">YAML</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: 'AWS::LanguageExtensions'
Resources:
  VPC:
    Type: 'AWS::EC2::VPC'
    Properties:
      CidrBlock: 10.0.0.0/16
      EnableDnsSupport: 'true'
      EnableDnsHostnames: 'true'
  'Fn::ForEach::SubnetResources':
  - Prefix
  - [Transit, Public]
  - 'Nacl$<span>{</span>Prefix}Subnet':
      Type: 'AWS::EC2::NetworkAcl'
      Properties:
        VpcId: !Ref 'VPC'
    'Fn::ForEach::LoopInner':
    - Suffix
    - [A, B, C]
    - '$<span>{</span>Prefix}Subnet$<span>{</span>Suffix}':
        Type: 'AWS::EC2::Subnet'
        Properties:
          VpcId: !Ref 'VPC'
      'Nacl$<span>{</span>Prefix}Subnet$<span>{</span>Suffix}Association':
        Type: 'AWS::EC2::SubnetNetworkAclAssociation'
        Properties:
          SubnetId: !Ref
            'Fn::Sub': '$<span>{</span>Prefix}Subnet$<span>{</span>Suffix}'
          NetworkAclId: !Ref
            'Fn::Sub': 'Nacl$<span>{</span>Prefix}Subnet'</code></pre>
        </div>
        <p>The transformed template will be equivalent to the following template:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: 'AWS::LanguageExtensions'
Resources:
  VPC:
    Type: 'AWS::EC2::VPC'
    Properties:
      CidrBlock: 10.0.0.0/16
      EnableDnsSupport: 'true'
      EnableDnsHostnames: 'true'
  NaclTransitSubnet:
    Type: 'AWS::EC2::NetworkAcl'
    Properties:
      VpcId: !Ref VPC
  TransitSubnetA:
    Type: 'AWS::EC2::Subnet'
    Properties:
      VpcId: !Ref VPC
  NaclTransitSubnetAAssociation:
    Type: 'AWS::EC2::SubnetNetworkAclAssociation'
    Properties:
      SubnetId: !Ref TransitSubnetA
      NetworkAclId: !Ref NaclTransitSubnet
  TransitSubnetB:
    Type: 'AWS::EC2::Subnet'
    Properties:
      VpcId: !Ref VPC
  NaclTransitSubnetBAssociation:
    Type: 'AWS::EC2::SubnetNetworkAclAssociation'
    Properties:
      SubnetId: !Ref TransitSubnetB
      NetworkAclId: !Ref NaclTransitSubnet
  TransitSubnetC:
    Type: 'AWS::EC2::Subnet'
    Properties:
      VpcId: !Ref VPC
  NaclTransitSubnetCAssociation:
    Type: 'AWS::EC2::SubnetNetworkAclAssociation'
    Properties:
      SubnetId: !Ref TransitSubnetC
      NetworkAclId: !Ref NaclTransitSubnet
  NaclPublicSubnet:
    Type: 'AWS::EC2::NetworkAcl'
    Properties:
      VpcId: !Ref VPC
  PublicSubnetA:
    Type: 'AWS::EC2::Subnet'
    Properties:
      VpcId: !Ref VPC
  NaclPublicSubnetAAssociation:
    Type: 'AWS::EC2::SubnetNetworkAclAssociation'
    Properties:
      SubnetId: !Ref PublicSubnetA
      NetworkAclId: !Ref NaclPublicSubnet
  PublicSubnetB:
    Type: 'AWS::EC2::Subnet'
    Properties:
      VpcId: !Ref VPC
  NaclPublicSubnetBAssociation:
    Type: 'AWS::EC2::SubnetNetworkAclAssociation'
    Properties:
      SubnetId: !Ref PublicSubnetB
      NetworkAclId: !Ref NaclPublicSubnet
  PublicSubnetC:
    Type: 'AWS::EC2::Subnet'
    Properties:
      VpcId: !Ref VPC
  NaclPublicSubnetCAssociation:
    Type: 'AWS::EC2::SubnetNetworkAclAssociation'
    Properties:
      SubnetId: !Ref PublicSubnetC
      NetworkAclId: !Ref NaclPublicSubnet</code></pre>
       
        <h2 id="intrinsic-function-reference-foreach-example-reference-replicated-resource">Reference replicated properties for an Amazon EC2 resource</h2>
        <p>This example uses the <code class="code">Fn::ForEach</code> intrinsic function to reference
          replicated <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html"><code class="code">AWS::EC2::Instance</code></a> resources.</p>
        <div id="JSON" name="JSON" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-reference-replicated-resource.json">JSON</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "AWSTemplateFormatVersion": "2010-09-09",
  "Transform": "AWS::LanguageExtensions",
  "Mappings": <span>{</span>
    "Instances": <span>{</span>
      "InstanceType": <span>{</span>
        "B": "m5.4xlarge",
        "C": "c5.2xlarge"
      },
      "ImageId": <span>{</span>"A": "ami-id1"}
    }
  },
  "Resources": <span>{</span>
    "Fn::ForEach::Instances": [
      "Identifier",
      [
        "A",
        "B",
        "C"
      ],
      <span>{</span>
        "Instance$<span>{</span>Identifier}": <span>{</span>
          "Type": "AWS::EC2::Instance",
          "Properties": <span>{</span>
            "InstanceType": <span>{</span>
              "Fn::FindInMap": [
                "Instances",
                "InstanceType",
                <span>{</span>"Ref": "Identifier"},
                <span>{</span>"DefaultValue": "m5.xlarge"}
              ]
            },
            "ImageId": <span>{</span>
              "Fn::FindInMap": [
                "Instances",
                "ImageId",
                <span>{</span>"Ref": "Identifier"},
                <span>{</span>"DefaultValue": "ami-id-default"}
              ]
            }
          }
        }
      }
    ]
  },
  "Outputs": <span>{</span>
    "SecondInstanceId": <span>{</span>
      "Description": "Instance Id for InstanceB",
      "Value": <span>{</span>"Ref": "InstanceB"}
    },
    "SecondPrivateIp": <span>{</span>
      "Description": "Private IP for InstanceB",
      "Value": <span>{</span>
        "Fn::GetAtt": [
          "InstanceB",
          "PrivateIp"
        ]
      }
    }
  }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-reference-replicated-resource.yaml">YAML</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: 'AWS::LanguageExtensions'
Mappings:
  Instances:
    InstanceType:
      B: m5.4xlarge
      C: c5.2xlarge
    ImageId:
      A: ami-id1
Resources:
  'Fn::ForEach::Instances':
  - Identifier
  - [A, B, C]
  - 'Instance$<span>{</span>Identifier}':
      Type: 'AWS::EC2::Instance'
      Properties:
        InstanceType: !FindInMap [Instances, InstanceType, !Ref 'Identifier', <span>{</span>DefaultValue: m5.xlarge}]
        ImageId: !FindInMap [Instances, ImageId, !Ref 'Identifier', <span>{</span>DefaultValue: ami-id-default}]
Outputs:
  SecondInstanceId:
    Description: Instance Id for InstanceB
    Value: !Ref 'InstanceB'
  SecondPrivateIp:
    Description: Private IP for InstanceB
    Value: !GetAtt [InstanceB, PrivateIp]</code></pre>
        </div>
        <p>The transformed template will be equivalent to the following template:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: 'AWS::LanguageExtensions'
Resources:
  InstanceA:
    Type: 'AWS::EC2::Instance'
    Properties:
      InstanceType: m5.xlarge
      ImageId: ami-id1
  InstanceB:
    Type: 'AWS::EC2::Instance'
    Properties:
      InstanceType: m5.4xlarge
      ImageId: ami-id-default
  InstanceC:
    Type: 'AWS::EC2::Instance'
    Properties:
      InstanceType: c5.2xlarge
      ImageId: ami-id-default
Outputs:
  SecondInstanceId:
    Description: Instance Id for InstanceB
    Value: !Ref InstanceB
  SecondPrivateIp:
    Description: Private IP for InstanceB
    Value: !GetAtt [InstanceB, PrivateIp]</code></pre>
       
        <h2 id="intrinsic-function-reference-foreach-example-replicate-resource-properties">Replicate properties for an Amazon EC2 resource</h2>
        <p>This example uses the <code class="code">Fn::ForEach</code> intrinsic function to repeat some
          properties like <code class="code">ImageId</code>, <code class="code">InstanceType</code>, and
            <code class="code">AvailabilityZone</code> to an <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html"><code class="code">AWS::EC2::Instance</code></a> resource.</p>
        <div id="JSON" name="JSON" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-replicate-resource-properties.json">JSON</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "AWSTemplateFormatVersion": "2010-09-09",
  "Transform": "AWS::LanguageExtensions",
  "Mappings": <span>{</span>
    "InstanceA": <span>{</span>
      "Properties": <span>{</span>
        "ImageId": "ami-id1",
        "InstanceType": "m5.xlarge"
      }
    },
    "InstanceB": <span>{</span>
      "Properties": <span>{</span>
        "ImageId": "ami-id2"
      }
    },
    "InstanceC": <span>{</span>
      "Properties": <span>{</span>
        "ImageId": "ami-id3",
        "InstanceType": "m5.2xlarge",
        "AvailabilityZone": "us-east-1a"
      }
    }
  },
  "Resources": <span>{</span>
    "Fn::ForEach::Instances": [
      "InstanceLogicalId",
      [ "InstanceA", "InstanceB", "InstanceC" ],
      <span>{</span>
        "$<span>{</span>InstanceLogicalId}": <span>{</span>
          "Type": "AWS::EC2::Instance",
          "Properties": <span>{</span>
            "DisableApiTermination": true,
            "UserData": <span>{</span>
              "Fn::Base64": <span>{</span>
                "Fn::Join": [
                  "",
                  [
                    "#!/bin/bash\n",
                    "yum update -y\n",
                    "yum install -y httpd.x86_64\n",
                    "systemctl start httpd.service\n",
                    "systemctl enable httpd.service\n",
                    "echo \"Hello World from $(hostname -f)\" &gt; /var/www/html/index.html\n"
                  ]
                ]
              }
            },
            "Fn::ForEach::Properties": [
              "PropertyName",
              [ "ImageId", "InstanceType", "AvailabilityZone" ],
              <span>{</span>
                "$<span>{</span>PropertyName}": <span>{</span>
                  "Fn::FindInMap": [
                    <span>{</span> "Ref": "InstanceLogicalId" },
                    "Properties",
                    <span>{</span> "Ref": "PropertyName"},
                    <span>{</span>
                      "DefaultValue": <span>{</span> "Ref": "AWS::NoValue" }
                    }
                  ]
                }
              }
            ]
          }
        }
      }
    ]
  }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h3 id="intrinsic-function-reference-foreach-example-replicate-resource-properties.yaml">YAML</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: 'AWS::LanguageExtensions'
Mappings:
  InstanceA:
    Properties:
      ImageId: ami-id1
      InstanceType: m5.xlarge
  InstanceB:
    Properties:
      ImageId: ami-id2
  InstanceC:
    Properties:
      ImageId: ami-id3
      InstanceType: m5.2xlarge
      AvailabilityZone: us-east-1a
Resources:
  'Fn::ForEach::Instances':
  - InstanceLogicalId
  - [InstanceA, InstanceB, InstanceC]
  - '$<span>{</span>InstanceLogicalId}':
      Type: 'AWS::EC2::Instance'
      Properties:
        DisableApiTermination: true
        UserData:
          Fn::Base64: !Sub |
            #!/bin/bash
            yum update -y
            yum install -y httpd.x86_64
            systemctl start httpd.service
            systemctl enable httpd.service
            echo "Hello World from $(hostname -f)" &gt; /var/www/html/index.html
        'Fn::ForEach::Properties':
          - PropertyName
          - [ImageId, InstanceType, AvailabilityZone]
          - '$<span>{</span>PropertyName}':
             'Fn::FindInMap':
               - Ref: 'InstanceLogicalId'
               - Properties
               - Ref: 'PropertyName'
               - <span>{</span>DefaultValue: !Ref 'AWS::NoValue'}</code></pre>
        </div>
        <p>The transformed template will be equivalent to the following template:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Transform: 'AWS::LanguageExtensions'
Resources:
  InstanceA:
    Type: 'AWS::EC2::Instance'
    Properties:
      DisableApiTermination: true
      UserData:
        Fn::Base64: 
          !Sub |
            #!/bin/bash
            yum update -y
            yum install -y httpd.x86_64
            systemctl start httpd.service
            systemctl enable httpd.service
            echo "Hello World from $(hostname -f)" &gt; /var/www/html/index.html
      ImageId: ami-id1
      InstanceType: m5.xlarge
  InstanceB:
    Type: 'AWS::EC2::Instance'
    Properties:
      DisableApiTermination: true
      UserData:
        Fn::Base64: 
          !Sub |
            #!/bin/bash
            yum update -y
            yum install -y httpd.x86_64
            systemctl start httpd.service
            systemctl enable httpd.service
            echo "Hello World from $(hostname -f)" &gt; /var/www/html/index.html
      ImageId: ami-id2
  InstanceC:
    Type: 'AWS::EC2::Instance'
    Properties:
      DisableApiTermination: true
      UserData:
        Fn::Base64: 
          !Sub |
            #!/bin/bash
            yum update -y
            yum install -y httpd.x86_64
            systemctl start httpd.service
            systemctl enable httpd.service
            echo "Hello World from $(hostname -f)" &gt; /var/www/html/index.html
      ImageId: ami-id3
      InstanceType: m5.2xlarge
      AvailabilityZone: us-east-1a</code></pre>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./intrinsic-function-reference-foreach-examples.html">Examples</div><div id="next" class="next-link" accesskey="n" href="./intrinsic-function-reference-foreach-example-outputs.html">Outputs section</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-foreach-example-resource.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>