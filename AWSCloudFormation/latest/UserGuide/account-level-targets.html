<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Account level targets for service-managed Stack Sets - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="account-level-targets" /><meta name="default_state" content="account-level-targets" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/account-level-targets.html" /><meta name="description" content="The AccountFilterType allows you to limit deployment targets to individual accounts or include additional accounts with provided AWS Organizations units (OUs) with your Create, Update, or Delete operations." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/account-level-targets.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/account-level-targets.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Account level targets for service-managed Stack Sets" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Account level targets for service-managed Stack Sets - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/account-level-targets.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/account-level-targets.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/account-level-targets.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Working with AWS CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Account level targets for service-managed Stack Sets",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#account-level-cli-examples">AWS CLI examples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="account-level-targets">Account level targets for service-managed Stack
   Sets</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The <code class="code">AccountFilterType</code> allows you to limit deployment targets to individual
  accounts or include additional accounts with provided AWS Organizations units (OUs) with your
  Create, Update, or Delete operations.</p><p>Service-managed Stack Sets can deploy to individual accounts with the accounts parameter, to all the accounts in
  specified OU, or to a subset of accounts in the specified OU. For more information about deployment targets, see
   <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DeploymentTargets.html"><code class="code">DeploymentTargets</code></a>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "<a href="#accounts">Accounts</a>": ["string", ...],
  "<a href="#accountsurl">AccountsUrl</a>": "string", 
  "<a href="#org.unit">OrganizationalUnitIds</a>": ["string", ...] 
  "<a href="#accountfiltertype">AccountFilterType</a>": "string"
}</code></pre><div class="variablelist">
   
   
   
   
 <dl>
   <dt id="accounts"><span class="term"><code class="code">Accounts</code></span></dt>
   <dd>
    <p>The names of one or more AWS accounts for which you want to deploy a
     StackSets updates to.</p>
   </dd>
   
   <dt id="accountsurl"><span class="term"><code class="code">AccountsUrl</code></span></dt>
   <dd>
    <p>An Amazon S3 URL for a list of accounts.</p>
   </dd>
   
   <dt id="org.unit"><span class="term"><code class="code">OrganizationalUnitIds</code></span></dt>
   <dd>
    <p>The organization root ID or organizational unit (OU) IDs to which StackSets deploys
     to.</p>
   </dd>
   
   <dt id="accountfiltertype"><span class="term"><code class="code">AccountFilterType</code></span></dt>
   <dd>
    <p><em>Valid values</em>: <code class="code">INTERSECTION</code> | <code class="code">DIFFERENCE</code> |
      <code class="code">UNION</code></p>
    <p>The following is a list of possible values for the <code class="code">AccountFilterType</code>
     operation.</p>
    <div class="itemizedlist">
      
      
      
      
    <ul class="itemizedlist"><li class="listitem">
      <p><code class="code">INTERSECTION</code>: StackSets deploys to the accounts specified in
        <code class="code">Accounts</code> parameter.</p>
     </li><li class="listitem">
      <p><code class="code">DIFFERENCE</code>: StackSets excludes the accounts specified in
        <code class="code">Accounts</code> parameter. This enables user to avoid certain accounts within an OU
       such as suspended accounts.</p>
     </li><li class="listitem">
      <p><code class="code">UNION</code>: (default value) StackSets includes additional accounts deployment
       targets.</p>
      <p>The default value if <code class="code">AccountFilterType</code> isn't provided. This enables user to
       update an entire OU and individual accounts from a different OU in one request, which used to
       be two separate requests.</p>
     </li><li class="listitem">
      <p><code class="code">NONE</code>: Deploys to all accounts in the specified organizational units (OU).</p>
     </li></ul></div>
   </dd>
  </dl></div>
  <h2 id="account-level-cli-examples">AWS CLI examples</h2>
  <p>The following examples show how to use <code class="code">AccountFilterType</code> in the AWS CLI.</p>
   
   <h3 id="target-accounts-within-ou">Target individual accounts within an OU</h3>
   <p>The following example filters the deployment targets in the OU. In this example, A1, A2,
    and A3 accounts are all in the OU1 Organization. The AWS CLI command deploys to the
    A1 and A2 target accounts.</p>
   
   <div class="mediaobject">
     
     <img src="/images/AWSCloudFormation/latest/UserGuide/images/target-accounts-within-ou.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;     Target individual accounts within an OU.&#xA;    " style="max-width:50%" />
     
     
   </div>

   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws cloudformation create-stack-instances --deployment-targets OrganizationalUnitIds=OU1,Accounts=A1,A2,AccountFilterType=INTERSECTION</code></pre>
   <p><em>Results</em>: You've created stack instances for accounts 1 and 2.</p>

   
   
   <h3 id="target-ou-except-account">Target an OU and filter individual accounts</h3>
   <p>The following example creates a stack instance in all accounts in the OU besides account 1
    and 2.</p>
   <div class="mediaobject">
     
     <img src="/images/AWSCloudFormation/latest/UserGuide/images/target-ou-except-account.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;     Target individual accounts within an OU.&#xA;    " style="max-width:50%" />
     
     
   </div>

   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws cloudformation create-stack-instances --deployment-targets OrganizationalUnitIds=OU1,Accounts=A1,A2,AccountFilterType=DIFFERENCE</code></pre>
   <p><em>Results</em>: You avoided deploying to specific accounts in your OU.</p>

   
   
   <h3 id="target-out-with-account">Target an OU and an additional individual
     account</h3>
   <p>The following example updates stack instances.</p>
   <div class="mediaobject">
     
     <img src="/images/AWSCloudFormation/latest/UserGuide/images/target-out-with-account.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;     Target individual accounts within an OU.&#xA;    " style="max-width:50%" />
     
     
   </div>


   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">aws cloudformation update-stack-instances --deployment-targets OrganizationalUnitIds=OU1,Accounts=A4,AccountFilterType=UNION</code></pre>
   <p><em>Results</em>: You updated stack instances for accounts 1, 2, and 4 in your
    OU. By filtering accounts, you didn't update stack instances on account A5.</p>

   
  
 <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./reverting-stackset-import.html">To revert an import operation</div><div id="next" class="next-link" accesskey="n" href="./stacksets-bestpractices.html">Best practices</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/account-level-targets.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/account-level-targets.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>