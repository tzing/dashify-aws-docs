<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>How does AWS CloudFormation work? - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="cfn-whatis-howdoesitwork" /><meta name="default_state" content="cfn-whatis-howdoesitwork" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" /><meta name="description" content="How does AWS CloudFormation work?" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="How does AWS CloudFormation work?" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>How does AWS CloudFormation work? - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "What is AWS CloudFormation?",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "How does AWS CloudFormation work?",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#updating-stack-with-change-sets">Updating a stack with change sets</a><a href="#how-to-delete-a-stack">Deleting a stack</a><a href="#what-is-cfn-additional-resource">Additional resources</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="cfn-whatis-howdoesitwork">How does AWS CloudFormation work?</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>When creating a stack, AWS CloudFormation makes underlying service calls to AWS to provision and
    configure your resources. CloudFormation can only perform actions that you have permission to do.
    For example, to create EC2 instances by using CloudFormation, you need permissions to create
    instances. You'll need similar permissions to terminate instances when you delete stacks with
    instances. You use <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/">AWS Identity and Access Management</a> (IAM) to manage
    permissions.</p><p>The calls that CloudFormation makes are all declared by your template. For example, suppose you
    have a template that describes an EC2 instance with a <code class="code">t2.micro</code> instance type. When
    you use that template to create a stack, CloudFormation calls the Amazon EC2 create instance API and
    specifies the instance type as <code class="code">t2.micro</code>. The following diagram summarizes the
    CloudFormation workflow for creating stacks.</p><div class="mediaobject">
     
      <img src="/images/AWSCloudFormation/latest/UserGuide/images/create-stack-diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
     
  </div><div class="orderedlist">
     
     
     
  <ol><li>
      <p>Use the <a href="https://console.aws.amazon.com/cloudformation/designer" rel="noopener noreferrer" target="_blank"><span>AWS CloudFormation Designer</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> or
        your own text editor to create or modify a CloudFormation template in JSON or YAML format. You
        can also choose to use a provided template. The CloudFormation template describes the resources
        you want and their settings. For example, suppose you want to create an EC2 instance. Your
        template can declare an Amazon EC2 instance and describe its properties, as shown in the
        following example:</p>
      <div class="example"><h6>Example JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "AWSTemplateFormatVersion": "2010-09-09",&#xD;
    "Description": "A simple EC2 instance",&#xD;
    "Resources": <span>{</span>&#xD;
        "MyEC2Instance": <span>{</span>&#xD;
            "Type": "AWS::EC2::Instance",&#xD;
            "Properties": <span>{</span>&#xD;
                "ImageId": "ami-0ff8a91507f77f867",&#xD;
                "InstanceType": "t2.micro"&#xD;
            }&#xD;
        }&#xD;
    }&#xD;
}</code></pre></div></div>
      <div class="example"><h6>Example YAML</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09&#xD;
Description: A simple EC2 instance&#xD;
Resources:&#xD;
  MyEC2Instance:&#xD;
    Type: 'AWS::EC2::Instance'&#xD;
    Properties:&#xD;
      ImageId: ami-0ff8a91507f77f867&#xD;
      InstanceType: t2.micro&#xD;
</code></pre></div></div>
    </li><li>
      <p>Save the template locally or in an Amazon S3 bucket. If you created a template,
        save it with a file extension like: <code>.json</code>, <code>.yaml</code>,
        or <code>.txt</code>.</p>
    </li><li>
      <p>Create a CloudFormation stack by specifying the location of your template file, such as
        a path on your local computer or an Amazon S3 URL. If the template contains parameters, you can
        specify input values when you create the stack. Parameters allow you to pass in values to
        your template so that you can customize your resources each time you create a stack.</p>
      <p>You can create stacks by using the CloudFormation <a href="./cfn-console-create-stack.html">console</a>,
     <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html"><code class="code">CreateStack</code></a> API operation, or <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/create-stack.html"><code class="code">create-stack</code></a> AWS CLI command.</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you specify a template file stored locally, CloudFormation uploads it to an S3 bucket
          in your AWS account. CloudFormation creates a bucket for each region in which you upload a
          template file. The buckets are accessible to anyone with Amazon Simple Storage Service (Amazon S3) permissions in
          your AWS account. If a bucket created by CloudFormation is already present, the template is
          added to that bucket.</p><p>You can use your own bucket and manage its permissions by manually uploading templates
          to Amazon S3. Then whenever you create or update a stack, specify the Amazon S3 URL of a template
          file.</p></div></div>
    </li></ol></div><p>CloudFormation provisions and configures resources by making calls to the AWS services that
    are described in your template.</p><p>After all the resources have been created, CloudFormation reports that your stack has been
    created. You can then start using the resources in your stack. If stack creation fails,
    CloudFormation rolls back your changes by deleting the resources that it created.</p>
    <h2 id="updating-stack-with-change-sets">Updating a stack with change sets</h2>

    <p>When you need to update your stack's resources, you can modify the stack's template. You
      don't need to create a new stack and delete the old one. To update a stack, create a change
      set by submitting a modified version of the original stack template, different input parameter
      values, or both. CloudFormation compares the modified template with the original template and
      generates a change set. The change set lists the proposed changes. After reviewing the
      changes, you can start the change set to update your stack or you can create a new change set.
      The following diagram summarizes the workflow for updating a stack.</p>
    <div class="mediaobject">
       
        <img src="/images/AWSCloudFormation/latest/UserGuide/images/update-stack-diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
       
    </div>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Updates can cause interruptions. Depending on the resource and properties that you are
        updating, an update might interrupt or even replace an existing resource. For more
        information, see <a href="./using-cfn-updating-stacks.html">AWS CloudFormation stack updates</a>.</p></div></div>
    <div class="orderedlist">
       
       
       
       
       
    <ol><li>
        <p>You can modify a CloudFormation stack template by using <a href="https://console.aws.amazon.com/cloudformation/designer" rel="noopener noreferrer" target="_blank"><span>AWS CloudFormation Designer</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> or a text editor.
          For example, if you want to change the instance type for an EC2 instance, you would change
          the value of the <code class="code">InstanceType</code> property in the original stack's
          template.</p>
        <p>For more information, see <a href="./using-cfn-updating-stacks-get-template.html">Modifying a stack template</a>.</p>
      </li><li>
        <p>Save the CloudFormation template locally or in an S3 bucket.</p>
      </li><li>
        <p>Create a change set by specifying the stack that you want to update and the location
          of the modified template, such as a path on your local computer or an Amazon S3 URL. If the
          template contains parameters, you can specify values when you create the change
          set.</p>
        <p>For more information about creating change sets, see <a href="./using-cfn-updating-stacks-changesets.html">Updating stacks using change sets</a>.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you specify a template that's stored on your local computer, CloudFormation
            automatically uploads your template to an S3 bucket in your AWS account.</p></div></div>
      </li><li>
        <p>View the change set to check that CloudFormation will perform the changes that you expect.
          For example, check whether CloudFormation will replace any critical stack resources. You can
          create as many change sets as you need until you have included the changes that you
          want.</p>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Change sets don't indicate whether your stack update will be successful. For
            example, a change set doesn't check if you will surpass an account <a href="./cloudformation-limits.html">quota</a>, if you're updating a <a href="./aws-template-resource-type-ref.html">resource</a> that doesn't support updates,
            or if you have insufficient <a href="./using-iam-template.html">permissions</a> to
            modify a resource, which can cause a stack update to fail.</p></div></div>
      </li><li>
        <p>Initiate the change set that you want to apply to your stack. CloudFormation updates your
          stack by updating only the resources that you modified and signals that your stack has
          been successfully updated. If the stack updates fails, CloudFormation rolls back changes to
          restore the stack to the last known working state.</p>
      </li></ol></div>
   
    <h2 id="how-to-delete-a-stack">Deleting a stack</h2>

    <p>When you delete a stack, you specify the stack to delete, and CloudFormation deletes the stack and all the
   resources in that stack. You can delete stacks by using the CloudFormation <a href="./cfn-console-delete-stack.html">console</a>, <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DeleteStack.html"><code class="code">DeleteStack</code></a> API operation, or
    <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/delete-stack.html"><code class="code">delete-stack</code></a> AWS CLI command.</p>
    <p>If you want to delete a stack but want to retain some resources in that stack, you can use
      a <a href="./aws-attribute-deletionpolicy.html">deletion policy</a> to retain those
      resources.</p>
    <p>After all the resources have been deleted, CloudFormation signals that your stack has been
      successfully deleted. If CloudFormation can't delete a resource, the stack won't be deleted. Any
      resources that haven't been deleted will remain until you can successfully delete the
      stack.</p>
   
    <h2 id="what-is-cfn-additional-resource">Additional resources</h2>

    <div class="itemizedlist">
       
    <ul class="itemizedlist"><li class="listitem">
        <p>For more information about creating CloudFormation templates, see <a href="./template-anatomy.html">Template anatomy</a>.</p>
      </li></ul></div>
    <div class="itemizedlist">
       
    <ul class="itemizedlist"><li class="listitem">
        <p>For more information about creating, updating, or deleting stacks, see <a href="./stacks.html">Working with stacks</a>.</p>
      </li></ul></div>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./cfn-whatis-concepts.html">CloudFormation concepts</div><div id="next" class="next-link" accesskey="n" href="./settingup.html">Setting up</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>