<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using modules to encapsulate and reuse resource configurations - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="modules" /><meta name="default_state" content="modules" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/modules.html" /><meta name="description" content="Learn how to use modules to include resource configurations that incorporate best practices, expert domain knowledge, and accepted guidelines in your templates, without having to acquire deep knowledge of the intricacies of the resource implementation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/modules.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Using modules to encapsulate and reuse resource configurations" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Using modules to encapsulate and reuse resource configurations - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/modules.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/modules.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/modules.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Working with AWS CloudFormation templates",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Using modules to encapsulate and reuse resource configurations",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-guide.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#modules-using">Using modules in a template</a><a href="#module-using-params">Using parameters to specify module values</a><a href="#module-ref-resources">Referencing resources in a module</a><a href="#module-considerations">Considerations when using modules</a><a href="#module-versioning">Module registration and versioning</a><a href="#module-enabling">Activating public modules</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="modules">Using modules to encapsulate and reuse resource configurations</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p><em>Module</em>s are a way for you to package resource configurations for inclusion across stack
  templates, in a transparent, manageable, and repeatable way. Modules can encapsulate common service configurations and
  best practices as modular, customizable building blocks for you to include in your stack templates. Modules enable you
  to include resource configurations that incorporate best practices, expert domain knowledge, and accepted guidelines
  (for areas such as security, compliance, governance, and industry regulations) in your templates, without having to
  acquire deep knowledge of the intricacies of the resource implementation.</p><p>For example, a domain expert in networking could create a module that contains built-in security groups and
  ingress/egress rules that adhere to security guidelines. You could then include that module in your template to
  provision secure networking infrastructure in your stack--without having to spend time figuring out how VPCs, subnets,
  security groups, and gateways work. And because modules are versioned, if security guidelines change over time, the
  module author can create a new version of the module that incorporates those changes.</p><p>Characteristics of using modules in your templates include:</p><div class="itemizedlist">
   
   
   
   
 <ul class="itemizedlist"><li class="listitem">
   <p><em>Predictability</em>: A module must adhere to the schema it registers in the CloudFormation
    registry, so you know what resources it can resolve to once you include it in your template.</p>
  </li><li class="listitem">
   <p><em>Reusability</em>: You can use the same module across multiple templates and accounts.</p>
  </li><li class="listitem">
   <p><em>Traceability</em>: CloudFormation retains knowledge of which resources in a stack were provisioned
    from a module, enabling you to easily understand the source of resource changes.</p>
  </li><li class="listitem">
   <p><em>Manageability</em>: Once you've registered a module, you can manage it through the CloudFormation
    registry, including versioning and account and region availability.</p>
  </li></ul></div><p>A module can contain:</p><div class="itemizedlist">
   
   
 <ul class="itemizedlist"><li class="listitem">
   <p>One or more resources to be provisioned from the module, along with any associated data, such as outputs or
    conditions.</p>
  </li><li class="listitem">
   <p>Any <em>module parameters</em>, which enable you to specify custom values whenever the module is
    used.</p>
  </li></ul></div><p>For information on developing module types, see <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/modules-develop.html">Developing module types</a> in the
  <em>CloudFormation Command Line Interface User Guide</em>.</p>
  <h2 id="modules-using">Using modules in a template</h2>
  <p>To use a module, make sure it's registered in the account and region in which you want to use it. For more
   information, see <a href="./registry.html#registry-public-private">Public and private extensions</a>. You register
   modules in the CloudFormation registry as private extensions. Then, treat it much as you would an individual
   resource:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>Include it in the <code class="code"><a href="./resources-section-structure.html">Resources</a></code> section of your template.</p>
   </li><li class="listitem">
    <p>Specify any necessary properties for the module.</p>
   </li></ul></div>
  <p>When you initiate a stack operation, CloudFormation generates a processed template that resolves any included
   modules into the appropriate resources. Use change sets to preview the resources to be added or updated prior to
   actually executing the stack operation. For more information, see <a href="./using-cfn-updating-stacks-changesets.html">Updating stacks using change sets</a>.</p>
  <p>Consider the following example: you have a template that contains both resources and modules. The template
   contains one individual resource, <b>ResourceA</b>, as well as a module,
   <b>ModuleParent</b>. That module contains two resources, <b>ResourceB</b> and
   <b>ResourceC</b>, as well as a nested module, <b>ModuleChild</b>.
   <b>ModuleChild</b> contains a single resource, <b>ResourceD</b>. If you create a stack
   from this template, CloudFormation processes the template and resolves the modules to the appropriate resources. The
   resulting stack has four resources: <b>ResourceA</b>, <b>ResourceB</b>,
   <b>ResourceC</b>, and <b>ResourceD</b>.</p>
  <div class="mediaobject">
    
    <img src="/images/AWSCloudFormation/latest/UserGuide/images/modules-resource-inclusion.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;    During a stack operation, CloudFormation resolves the two modules included in the stack template into the&#xA;     appropriate four resources.&#xA;   " style="max-width:100%" />
    
    
  </div>
  <p>CloudFormation keeps track of which resources in a stack were created from modules. You can view this information on
   the <b>Events</b>, <b>Resources</b>, and <b>Drifts</b> tabs for a given
   stack, and it's also included in change set previews.</p>
  <p>Modules are distinguishable from resources in a template because they adhere to the following four-part naming
   convention, as opposed to the typical three-part convention used by resources:</p>
  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="text "><code class="replaceable">organization</code>::<code class="replaceable">service</code>::<code class="replaceable">use-case</code>::MODULE</code></pre>
  
  <h2 id="module-using-params">Using parameters to specify module values</h2>
  <p>Modules can include module parameters. Much like template parameters, module parameters enable you to input
   custom values to your module from the template (or module) that contains it. The module can then use these values to
   set properties of the resources it contains.</p>
  <p>You can also define template parameters that in turn set module properties, so that users can input values that
   get passed to the module at the time of the stack operation. For more information about defining template parameters,
   see <a href="./parameters-section-structure.html">Parameters</a>.</p>
  <p>Likewise, if a module contains a nested module that includes module parameters, you can:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>Specify the values for the nested module's parameters directly in the parent module.</p>
   </li><li class="listitem">
    <p>Define corresponding module parameters in the parent module that enable the nested module's parameters to be
     set by the template (or module) in which the parent module is contained.</p>
   </li></ul></div>
   
   <h3 id="module-using-params-example-1">Using template parameters to specify module parameter values</h3>
   <p>The following example shows how to define template parameters that pass values to a module.</p>
   <p>Here, the template containing <code class="code">My::S3::SampleBucket::MODULE</code> defines a template parameter,
    <code class="code">BucketName</code>, that enables the user to specify an S3 bucket name during the stack operation.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">// Template containing My::S3::SampleBucket::MODULE
<span>{</span>
  "Parameters": <span>{</span>
    "<b>BucketName</b>": <span>{</span>
      "Description": "Name for your sample bucket",
      "Type": "String"
    }
  },
  "Resources": <span>{</span>
    "MyBucket": <span>{</span>
      "Type": "<b>My::S3::SampleBucket::MODULE</b>",
      "Properties": <span>{</span>
        "<b>BucketName</b>": <span>{</span>
          "Ref": "BucketName"
        }
      }
    }
  }
}</code></pre>
   
   
   <h3 id="module-using-params-example-2">Specifying properties on resources in a child module from the parent
     module</h3>
   <p>The following example illustrates how to specify parameter values in a module that's nested within another
    module.</p>
   <p>This first module, <code class="code">My::S3::SampleBucketPrivate::MODULE</code>, will be the child module. It defines two
    parameters: <code class="code">BucketName</code> and <code class="code">AccessControl</code>. The values specified for these parameters are
    used to specify the <code class="code">BucketName</code> and <code class="code">AccessControl</code> properties of the
    <code class="code">AWS::S3::Bucket</code> resource the module contains. Below is the template fragment for
    <code class="code">My::S3::SampleBucketPrivate::MODULE</code>.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">// My::S3::SampleBucketPrivate::MODULE
<span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "A sample S3 Bucket with Versioning and DeletionPolicy.",
    "Parameters": <span>{</span>
        "<b>BucketName</b>": <span>{</span>
            "Description": "Name for the bucket",
            "Type": "String"
        },
        "<b>AccessControl</b>": <span>{</span>
            "Description": "AccessControl for the bucket",
            "Type": "String"
        }
    },
    "Resources": <span>{</span>
        "S3Bucket": <span>{</span>
            "Type": "AWS::S3::Bucket",
            "Properties": <span>{</span>
                "<b>BucketName</b>": <span>{</span>
                    "Ref": "BucketName"
                },
                "<b>AccessControl</b>": <span>{</span>
                    "Ref": "AccessControl"
                },
                "DeletionPolicy": "Retain",
                "VersioningConfiguration": <span>{</span>
                    "Status": "Enabled"
                }
            }
        }
    }
}</code></pre>
   <p>Next, the previous module is nested within a parent module, <code class="code">My::S3::SampleBucket::MODULE</code>. The
    parent module, <code class="code">My::S3::SampleBucket::MODULE</code>, sets the child module parameters in the following
    ways:</p>
   <div class="itemizedlist">
     
     
   <ul class="itemizedlist"><li class="listitem">
     <p>It sets the <code class="code">AccessControl</code> parameter of <code class="code">My::S3::SampleBucketPrivate::MODULE</code> to
      <code class="code">Private</code>.</p>
    </li><li class="listitem">
     <p>For <code class="code">BucketName</code>, it defines a module parameter, which will enable the bucket name to be specified
      in the template (or module) that contains <code class="code">My::S3::SampleBucket::MODULE</code>.</p>
    </li></ul></div>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">// My::S3::SampleBucket::MODULE
<span>{</span>
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "A sample S3 Bucket. With Private AccessControl.",
  "Parameters": <span>{</span>
    "<b>BucketName</b>": <span>{</span>
      "Description": "Name for your sample bucket",
      "Type": "String"
    }
  },
  "Resources": <span>{</span>
    "MyBucket": <span>{</span>
      "Type": "<b>My::S3::SampleBucketPrivate::MODULE</b>",
      "Properties": <span>{</span>
        "<b>BucketName</b>": <span>{</span>
          "Ref": "BucketName"
        },
        "<b>AccessControl</b>" : "Private"
      }
    }
  }
}</code></pre>
   
   
   <h3 id="modules-using-parameters-constraints">Specifying constraints for module parameters</h3>
   <p>Module parameters don't support constraint enforcement. For more information, see <a href="./parameters-section-structure.html#parameters-section-structure-properties">Properties</a>. To
    perform constraint checking on a module parameter, create a template parameter with the desired constraints, then
    reference that template parameter in your module parameter.</p>
   
  
  <h2 id="module-ref-resources">Referencing resources in a module</h2>
  <p>Resources in a module can be referenced by logical name. The fully-qualified logical name of a resource
   contained in a module can be constructed by combining:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>The logical name specified for the module in the containing template (or containing module).</p>
   </li><li class="listitem">
    <p>The logical name for the resource, specified in the module.</p>
   </li></ul></div>
  <p>The fully-qualified logical name for the resource can be specified with or without using a period as a
   delimiter. For example, both of the logical names below are valid, and functionally equivalent:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p><code class="code"><code class="replaceable">ModuleLogicalName</code>.<code class="replaceable">ResourceLogicalName</code></code></p>
   </li><li class="listitem">
    <p><code class="code"><code class="replaceable">ModuleLogicalNameResourceLogicalName</code></code></p>
   </li></ul></div>
  <p>In this way, you can use <code class="code">GetAtt</code> and <code class="code">Ref</code> intrinsic functions to access property values
   on module resources.</p>
  <p>In the following example, the template references a property in a module to set a corresponding property on a
   resource in the template itself.</p>
  <p>Suppose that the <code class="code">My::S3::SampleBucket::MODULE</code> module contains an <code class="code">AWS::S3::Bucket</code>
   resource with the logical name of <code class="code">S3Bucket</code>. To reference the bucket name of this resource using the
   <code class="code">Ref</code> intrinsic function, combine the logical name given the module in the template,
   <code class="code">MyBucket</code>, with the logical name of the resource in the module, <code class="code">S3Bucket</code>, to get the fully
   qualified logical name of the resource: either <code class="code">MyBucket.S3Bucket</code> or
   <code class="code">MyBucketS3Bucket</code>.</p>
  <p>The logical names of resources contained in a module are specified in the module's schema. You can access that
   schema in the following ways:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>Finding the module in the CloudFormation registry. The <b>Schema</b> tab displays the module
     schema.</p>
   </li><li class="listitem">
    <p>Using the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeType.html"><code class="code">DescribeType</code></a> operation to return the module details, which includes the schema.</p>
   </li></ul></div>

  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">// Template that uses My::S3::SampleBucket::MODULE
<span>{</span>
  "Parameters": <span>{</span>
    "BucketName": <span>{</span>
      "Description": "Name for your sample bucket",
      "Type": "String"
   }
 },
  "Resources": <span>{</span>
    "MyBucket": <span>{</span>
      "Type": "My::S3::SampleBucket::MODULE",
      "Properties": <span>{</span>
          "BucketName": <span>{</span>
            "Ref": "BucketName"
         }
      }
    },
    "exampleQueue": <span>{</span>
      "Type": "AWS::SQS::Queue",
      "Properties": <span>{</span>
          "QueueName": <span>{</span>
            "Ref": "<b>MyBucket.S3Bucket</b>"
          }
      }
    }
},
"Outputs": <span>{</span>
  "BucketArn": <span>{</span>
      "Value": <span>{</span>
          "Fn::GetAtt": [
             "<b>MyBucket</b>",
             "<b>S3Bucket.Arn</b>"
          ]
      }
    }
  }
}</code></pre>
  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  BucketName:
    Description: Name for your sample bucket
    Type: String
Resources:
  MyBucket:
    Type: My::S3::SampleBucket::MODULE
    Properties:
      BucketName: !Ref BucketName
  exampleQueue:
    Type: AWS::SQS::Queue
    Properties:
      QueueName: !Ref <b>MyBucket.S3Bucket</b>
Outputs:
  BucketArn:
    Value: !<b>GetAtt MyBucket.S3Bucket.Arn</b></code></pre>
  
  <h2 id="module-considerations">Considerations when using modules</h2>
  <div class="itemizedlist">
    
    
    
    
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>There is no additional charge for using modules. You pay only for the resources those modules resolve to in
     your stacks.</p>
   </li><li class="listitem">
    <p>CloudFormation quotas, such as the maximum number of resources allowed in a stack, or the maximum size of the
     template body, apply to the processed template whether the resources included in that template come from modules or
     not. For more information, see <a href="./cloudformation-limits.html">AWS CloudFormation quotas</a>.</p>
   </li><li class="listitem">
    <p>Tags you specify at the <em>stack</em> level are assigned to the individual resources derived from
     the module.</p>
   </li><li class="listitem">
    <p>Helper scripts specified at the module level don't propagate to the individual resources contained in the
     module when CloudFormation processes the template.</p>
   </li><li class="listitem">
    <p>Outputs specified in the module are propagated to outputs at the template level.</p>
    <p>Each output will be assigned a logical ID that's a concatenation of the module logical name and the output
     name as defined in the module. For more information on outputs, see <a href="./outputs-section-structure.html">Outputs</a>.</p>
   </li><li class="listitem">
    <p>Parameters specified in the module aren't propagated to parameters at the template level.</p>
    <p>However, you can create template-level parameters that reference module-level parameters. For more
     information, see <a href="#module-using-params">Using parameters to specify module values</a>.</p>
   </li></ul></div>
  
  <h2 id="module-versioning">Module registration and versioning</h2>
  <p>You register and manage the modules in your account and region using the CloudFormation registry. For more
   information, see <a href="./registry.html">Using the AWS CloudFormation registry</a>.</p>
  <p>You can register multiple versions of the same module in a given account and region. Keep in mind the following
   considerations:</p>
  <div class="itemizedlist">
    
    
    
    
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>A module must be registered in the account and region in which you want to use it.</p>
   </li><li class="listitem">
    <p>During stack operations, CloudFormation uses whatever version of the module that's currently registered as the
     default version <em>in the account and region in which the stack operation is being performed</em>.
     This includes modules that are nested in other modules.</p>
    <p>Therefore, be aware that if you have different versions of the same module registered as the default version
     in different accounts or regions, using the same template may result in different results.</p>
    <p>For more information, see <a href="./registry-private.html#registry-set-version">Specifying a version of a private extension
                    to use using the AWS CLI</a>.</p>
   </li><li class="listitem">
    <p>During stack operations, CloudFormation uses whatever version of the <em>resource</em> that's
     currently registered as the default version in the account and region in which the stack operation is being
     performed. This includes the resources generated by including modules.</p>
   </li><li class="listitem">
    <p>Changing the default version of a module doesn't initiate any stack update operation. However, the next time
     you perform a stack operation with any template containing that module, such as a stack update, CloudFormation will use
     the new default version in the operation.</p>
    <p>The one exception to this is performing a stack update with the <b>use previous template</b>
     option specified, as described below.</p>
   </li><li class="listitem">
    <p>For stack update operations, if you specify the <b>use previous template</b> option, CloudFormation
     uses the previous processed template for the stack update, and doesn't reprocess the module for any changes you
     might have made to it.</p>
   </li><li class="listitem">
    <p>To guarantee uniform results, if you are including modules in a stack template for use with stack sets, you
     should ensure that the same version of the module is set as the default version in all the accounts and regions in
     which you are planning to deploy your stack instances. This includes for modules that are nested in other modules.
     For more information on stack sets, see <a href="./what-is-cfnstacksets.html">Working with AWS CloudFormation StackSets</a>.</p>
   </li></ul></div>
  <p>For more information on registering new versions of a module, or changing the default version of a module, see
   <a href="./registry.html">Using the AWS CloudFormation registry</a>.</p>
  
  <h2 id="module-enabling">Activating public modules for use in your account</h2>
  <p>In order to successfully activate a public module in your account and region, the following must be true for
   each third-party public extension (resource or module) included in the module:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>The extension must already be activated in your account and region.</p>
    <p>If the extension in the module uses a type name alias, the extension must be registered in your account and
     region using the same type name alias. For more information, see <a href="./registry-public.html#registry-public-enable-alias">Specifying aliases to refer to
                        extensions</a>.</p>
   </li><li class="listitem">
    <p>The extension version currently activated must be one of the supported major versions of that extension
     specified in the module. For more information, see <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/modules-structure.html#modules-structure-publishing-prereqs">Module
     requirements for publishing a public module</a> in the <em>CloudFormation CLI User
     Guide</em>.</p>
   </li></ul></div>
  <p>If you do not have the correct third-party public extensions and extension versions activated, CloudFormation
   will fail the operation with an error listing the extensions and/or versions that need to be activated before the
   module can be successfully activated.</p>
 <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./macros-example.html">Macro example: Creating and using a macro</div><div id="next" class="next-link" accesskey="n" href="./blue-green.html">Perform ECS blue/green deployments</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/modules.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/modules.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>