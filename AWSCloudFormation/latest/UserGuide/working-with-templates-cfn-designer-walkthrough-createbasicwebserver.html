<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Walkthrough: Use AWS CloudFormation Designer to create a basic web server - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="working-with-templates-cfn-designer-walkthrough-createbasicwebserver" /><meta name="default_state" content="working-with-templates-cfn-designer-walkthrough-createbasicwebserver" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="description" content="Use AWS CloudFormation Designer to create a basic web server." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Walkthrough: Use AWS CloudFormation Designer to create a basic web server" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Walkthrough: Use AWS CloudFormation Designer to create a basic web server - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Working with AWS CloudFormation templates",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Walkthroughs",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/CHAP_Using.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Walkthrough: Use AWS CloudFormation Designer to create a basic web server",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/CHAP_Using.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">Step 1: Add and connect resources</a><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">Step 2: Add parameters, mappings, and outputs</a><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">Step 3: Specify resource properties</a><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">Step 4: Provision resources</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver">Walkthrough: Use AWS CloudFormation Designer to create a basic web server</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>AWS CloudFormation Designer graphically represents your templates to help you see the resources in the
    template and how they're connected. The integrated JSON and YAML editor makes it easy to modify templates
    directly in the AWS CloudFormation console. To demonstrate how to use both of these components, we'll use
    AWS CloudFormation Designer to build a basic web server in a VPC. Then, we'll save the template and use it to
    create a CloudFormation stack.</p><p>In the walkthrough, you will complete the following steps:</p><div class="orderedlist">
     
     
     
     
  <ol><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">Add and connect resources.</a></p>
      <p>When you first open AWS CloudFormation Designer, you start with a blank template.
        We'll use AWS CloudFormation Designer to start populating the template by dragging
        resources, such as a VPC and an EC2 instance into your template. We'll
        also create links between them. For example, we'll use AWS CloudFormation Designer to
        create a connection between the Internet gateway and the VPC.</p>
    </li><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">Add template parameters, mappings, and outputs.</a></p>
      <p>We'll use the AWS CloudFormation Designer integrated editor to add other
        template components to make the template more useful. For example, we'll
        add parameters to the template so that you can specify input values when
        you create a stack. That way you don't have to constantly edit the
        template for property values that you might commonly change.</p>
    </li><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">Specify resource properties.</a></p>
      <p>We'll use the integrated editor again to specify
        configuration settings for our resources.</p>
    </li><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">Provision resources</a></p>
      <p>None of your template resources are up and running until you create
        a stack. We'll use the template that you just created to launch a CloudFormation
        stack, which will provision all the resources that are defined in your
        template.</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>CloudFormation is a free service; however, you are charged for the
          AWS resources you include in your stacks at the current rate for
          each. For more information about AWS pricing, see the detail page
          for each product on <a href="http://aws.amazon.com" rel="noopener noreferrer" target="_blank"><span>http://aws.amazon.com</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
    </li></ol></div><p>Prerequisites</p><p>This walkthrough assumes that you have a working knowledge of Amazon Virtual Private Cloud
    (Amazon VPC), Amazon Elastic Compute Cloud (Amazon EC2), and CloudFormation. For context, each procedure provides
    some basic information about each resource.</p><p>Also, before you begin, make sure you have an Amazon EC2 key pair in the
    region in which you're creating your stack. For more information, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">Amazon EC2 key pairs</a> in the
      <em>Amazon EC2 User Guide for Linux Instances</em>.</p><h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">Step 1: Add and connect resources</h2>

    <p>We'll use the AWS CloudFormation Designer drag-and-drop interface to add an Amazon EC2
      instance and network resources, such as a VPC, subnet, route table, and
      Internet gateway. After adding all the resources, we'll create connections
      between them. For example, we'll associate the Internet gateway with a
      VPC.</p>
    <div class="procedure"><h6>To add resources to a template</h6><ol><li>
        <p>Open AWS CloudFormation Designer at <a href="https://console.aws.amazon.com/cloudformation/designer" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation/designer</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
      </li><li>
        <p>In the integrated editor on the lower half of the page, choose
            <b>Edit</b> (<span class="inlinemediaobject">
             
              <img src="/images/AWSCloudFormation/latest/UserGuide/images/designer-edit-icon.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
             
          </span>).</p>
      </li><li>
        <p>Change the template name to <code class="code">BasicWebServerInVPC</code> and
          then press <b>Enter</b>.</p>
        <p>Currently, we have a blank template that isn't valid. In the next
          steps, we'll add resources to make it valid.</p>
      </li><li>
        <p>In the <b>Resource types</b>
          pane, from within the <b>EC2</b> category, drag a <b>VPC</b> resource type onto the <b>Canvas</b> pane.</p>
        <p>The resources are organized by resource categories. All of the resources we're adding
          are in the <b>EC2</b> category.</p>
        <p>AWS CloudFormation Designer immediately modifies your template to include a VPC resource, with the
          results looking similar to the following
          JSON snippet.</p>
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">  "Resources": <span>{</span>
    "VPC431KO": <span>{</span>
      "Type": "AWS::EC2::VPC",
      "Properties": <span>{</span>},
      "Metadata": <span>{</span>
        "AWS::CloudFormation::Designer": <span>{</span>
          "id": "445730ea-0d11-45ba-b6ac-12345EXAMPLE"
        }
      }
    }
  }</code></pre>

        <p>The YAML snippet looks similar to the following.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  VPC431KO:
    Type: 'AWS::EC2::VPC'
    Properties: <span>{</span>}
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 9430b008-7a03-41ed-b63e-12345EXAMPLE</code></pre>

        <p>Note that we still need to specify the VPC properties, such as the
          VPC's CIDR block. We'll do that later. This is true for all resources
          that we'll add.</p>
      </li><li>
        <p>Rename the VPC.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>When you rename a resource, you rename its logical ID, which is
            the name that is referenced in the template (not the name assigned
            when CloudFormation creates the resource). For more information, see <a href="./resources-section-structure.html">Resources</a>.</p></div></div>
        <ol><li>
            <p>Choose the VPC resource.</p>
          </li><li>
            <p>In the integrated editor, choose the
                <b>Edit</b> icon (<span class="inlinemediaobject">
                 
                  <img src="/images/AWSCloudFormation/latest/UserGuide/images/designer-edit-icon.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                 
              </span>).</p>
          </li><li>
            <p>Change the name to <code class="code">VPC</code>, and then choose
                <b>Enter</b>.</p>
          </li></ol>
        <p>Next, we'll add resources to the VPC.</p>
      </li><li>
        <p>Drag a corner of the VPC resource to expand it so that it's large
          enough to fit several more resources.</p>
        <p>We need to add a subnet because you can't add an EC2 instance,
          which hosts the website, directly into the VPC; instances must be
          located in a subnet.</p>
      </li><li>
        <p>Add a <b>Subnet</b> resource type inside the VPC and
          rename it <code class="code">PublicSubnet</code>.</p>
        <p>We will use the subnet to allocate a range of IP addresses in the
          VPC that you can associate with other AWS resources, such as an Amazon EC2
          instance.</p>
        <p>When you add the subnet inside the VPC, AWS CloudFormation Designer automatically
          associates the subnet with the VPC. This association is a container
          model, where resources inside the container are automatically
          associated with the container resource.</p>
      </li><li>
        <p>Add an <b>Instance</b> resource type inside the
            <code class="code">PublicSubnet</code> resource and rename it
            <code class="code">WebServerInstance</code>.</p>
        <p>The instance is a virtual computing environment where you'll host
          a basic website. Similar to the way this worked with the subnet and
          VPC, adding the instance in the subnet automatically associates the
          instance with the subnet.</p>
      </li><li>
        <p>Add a <b>SecurityGroup</b> resource type inside the
          VPC and rename it <code class="code">WebServerSecurityGroup</code>.</p>
        <p>The security group is a virtual firewall that controls the inbound
          and outbound traffic of the web server instance. It's also required
          for instances in a VPC. We'll need to associate the web server
          instance with this security group, which we'll do later when we
          specify the instance's properties.</p>
      </li><li>
        <p>Add an <b>InternetGateway</b> resource type anywhere
          outside of the VPC and rename it <code class="code">InternetGateway</code>.</p>
        <p>The Internet gateway enables communication between the instance
          that is inside the VPC and the Internet. Without the Internet gateway,
          no one can access your website.</p>
        <p>Although, you can drag the Internet gateway inside the VPC, this
          doesn't create an association with the VPC. The Internet gateway
          doesn't follow the container model; instead, you must drag a
          connection from the Internet gateway to the VPC, as described in the
          next step.</p>
      </li><li>
        <p>Create a connection between the <code class="code">InternetGateway</code>
          resource and the <code class="code">VPC</code> resource.</p>
        <ol><li>
            <p>On the <code class="code">InternetGateway</code> resource, hover over the
              Internet gateway attachment
                (<code class="code">AWS::EC2::VPCGatewayAttachment</code>).</p>
          </li><li>
            <p>Drag a connection to the VPC.</p>
            <p>The border of valid target resources changes color. In this
              case, the VPC is the only valid target resource. This connection
              creates an attachment resource that associates the Internet
              gateway with the VPC.</p>
          </li></ol>
      </li><li>
        <p>Next, we need to add a route table and route to specify how to
          direct network traffic from within a subnet. Add a
            <b>RouteTable</b> inside the VPC and rename it
            <code class="code">PublicRouteTable</code>.</p>
        <p>This associates a new route table with the VPC.</p>
      </li><li>
        <p>To add a routing rule to the route table, add a
            <b>Route</b> resource type inside the
            <code class="code">PublicRouteTable</code> resource and rename it
            <code class="code">PublicRoute</code>.</p>
        <p>We'll use the route to specify where to direct traffic.</p>
      </li><li>
        <p>For the public route, we want the Internet gateway to be the
          destination target. Use <code class="code">GatewayId</code> to create a connection
          from the <code class="code">PublicRoute</code> resource to the Internet gateway,
          similar to the way you created a connection between the Internet
          gateway and the VPC.</p>
        <p>CloudFormation can't associate a route with an Internet gateway until you
          associate the Internet gateway with the VPC. This means we need to
          create an explicit dependency on the Internet gateway-VPC attachment,
          as described in the next step. For more information, see <a href="./aws-attribute-dependson.html">DependsOn attribute</a>.</p>
      </li><li>
        <p>Create an explicit dependency between the <code class="code">PublicRoute</code>
          resource and the Internet gateway-VPC attachment.</p>
        <ol><li>
            <p>On the <code class="code">PublicRoute</code> resource, hover over the
                <b>DependsOn</b> dot.</p>
          </li><li>
            <p>Drag a connection to the Internet gateway-VPC attachment
                (<code class="code">AWS::EC2::VPCGatewayAttachment</code>).</p>
            <p>With <code class="code">DependsOn</code> connections, AWS CloudFormation Designer creates a
              dependency (a <code class="code">DependsOn</code> attribute), where the
              originating resource depends on the target resource. In this case,
              AWS CloudFormation Designer adds a <code class="code">DependsOn</code> attribute to the
                <code class="code">PublicRoute</code> resource and specifies the gateway-VPC
              attachment as a dependency.</p>
          </li></ol>
      </li><li>
        <p>Create another dependency from the <code class="code">WebServerInstance</code>
          resource to the <code class="code">PublicRoute</code> resource.</p>
        <p>The <code class="code">WebServerInstance</code> resource depends on the public
          route to route traffic to the Internet. Without the public route, the
          instance cannot send a signal (using the cfn-signal helper script) to
          notify CloudFormation when the instance configuration and application
          deployments are complete.</p>
      </li><li>
        <p>Drag a connection from the <code class="code">PublicRouteTable</code> resource
          to the <code class="code">PublicSubnet</code> resource to associate the route table
          and subnet.</p>
        <p>Now the public subnet will use the public route table to direct
          traffic.</p>
      </li><li>
        <p>From the AWS CloudFormation Designer toolbar, save the template locally by using
          the <b>File</b> menu (the file
          icon).</p>
        <p>AWS CloudFormation Designer saves your template on your hard drive. You can use the
          template later to create a stack. We recommend that you save the
          template regularly to avoid losing changes.</p>
      </li></ol></div>
    <p>In this step, we added seven resources to your template and renamed
      their logical IDs with friendly names. We also established visual
      connections with most of the resources to create associations and a
      dependency. However, before we can create a stack with this template, we
      need to create a few more connections (such as associating the instance
      with the security group) and to specify properties for each resource. In
      the next step, we'll walk through modifying other components of your
      template, such as input parameters, by using the AWS CloudFormation Designer
      integrated editor.</p>
  <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">Step 2: Add parameters, mappings, and outputs</h2>
    
    <p>Before we specify resource properties, we need to add other template
      components to make reusing the template in multiple environments easier.
      In this step, we'll use the AWS CloudFormation Designer integrated editor to add
      parameters, mappings, and outputs. Then, we can refer to these parameters
      and mappings when we specify resource properties. The walkthrough provides
      sample JSON and YAML that you can use to copy and paste in to the
      integrated editor.</p>
    <div class="procedure"><h6>To add parameters</h6><p>Parameters are input values that you specify when you create a
        stack. They're useful for passing in values so that you don't have hard
        coded values in templates. For example, you don't need to hard code your
        web server's instance type in your template; instead, you can use a
        parameter to specify the instance type when you create a stack. That way
        you can use the same template to create multiple web servers with
        different instance types. For more information, see <a href="./parameters-section-structure.html">Parameters</a>.</p><ol><li>
        <p>Click on an open area in the AWS CloudFormation Designer canvas.</p>
        <p>Depending on what you have selected, the
          integrated editor shows either template-level or
          resource-level components that you can edit. At the template-level,
          you can edit all other sections of a template, such as template
          parameters, mappings, and outputs, except for the Resources section.
          At the resource-level, you can edit resource properties and
          attributes.</p>
        <p>Clicking on an open area in the canvas allows you to edit
          template-level components. To edit resource-level components, select a
          resource.</p>
      </li><li>
        <p>In the integrated editor pane, choose the
            <b>Parameters</b> tab in the
            <b>Components</b> view.</p>
      </li><li>
        <p>Copy the parameters in the following snippet and paste them into
          the integrated editor.</p>
        <p>The following JSON snippet adds parameters for specifying your web
          server's instance type, an Amazon EC2 key-pair name for SSH access to the
          web server, and the IP address range that can be used to access the
          web server using SSH.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "InstanceType" : <span>{</span>
      "Description" : "WebServer EC2 instance type",
      "Type" : "String",
      "Default" : "t2.small",
      "AllowedValues" : [ 
        "t1.micro", 
        "t2.nano", 
        "t2.micro", 
        "t2.small", 
        "t2.medium", 
        "t2.large", 
        "m1.small", 
        "m1.medium", 
        "m1.large", 
        "m1.xlarge", 
        "m2.xlarge", 
        "m2.2xlarge", 
        "m2.4xlarge", 
        "m3.medium", 
        "m3.large", 
        "m3.xlarge", 
        "m3.2xlarge", 
        "m4.large", 
        "m4.xlarge", 
        "m4.2xlarge", 
        "m4.4xlarge", 
        "m4.10xlarge", 
        "c1.medium", 
        "c1.xlarge", 
        "c3.large", 
        "c3.xlarge", 
        "c3.2xlarge", 
        "c3.4xlarge", 
        "c3.8xlarge", 
        "c4.large", 
        "c4.xlarge", 
        "c4.2xlarge", 
        "c4.4xlarge", 
        "c4.8xlarge", 
        "g2.2xlarge", 
        "g2.8xlarge", 
        "r3.large", 
        "r3.xlarge", 
        "r3.2xlarge", 
        "r3.4xlarge", 
        "r3.8xlarge", 
        "i2.xlarge", 
        "i2.2xlarge", 
        "i2.4xlarge", 
        "i2.8xlarge", 
        "d2.xlarge", 
        "d2.2xlarge", 
        "d2.4xlarge", 
        "d2.8xlarge", 
        "hi1.4xlarge", 
        "hs1.8xlarge", 
        "cr1.8xlarge", 
        "cc2.8xlarge", 
        "cg1.4xlarge"
      ],
      "ConstraintDescription" : "must be a valid EC2 instance type."
    },
    "KeyName": <span>{</span>
      "Description": "Name of an EC2 KeyPair to enable SSH access to the instance.",
      "Type": "AWS::EC2::KeyPair::KeyName",
      "ConstraintDescription": "must be the name of an existing EC2 KeyPair."
    },
    "SSHLocation": <span>{</span>
      "Description": " The IP address range that can be used to access the web server using SSH.",
      "Type": "String",
      "MinLength": "9",
      "MaxLength": "18",
      "Default": "0.0.0.0/0",
      "AllowedPattern": "(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})/(\\d<span>{</span>1,2})",
      "ConstraintDescription": "must be a valid IP CIDR range of the form x.x.x.x/x."
    }
  }
}</code></pre>

        <p>Here is the same snippet in YAML.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  InstanceType:
    Description: WebServer EC2 instance type
    Type: String
    Default: t2.small
    AllowedValues:
      - t1.micro
      - t2.nano
      - t2.micro
      - t2.small
      - t2.medium
      - t2.large
      - m1.small
      - m1.medium
      - m1.large
      - m1.xlarge
      - m2.xlarge
      - m2.2xlarge
      - m2.4xlarge
      - m3.medium
      - m3.large
      - m3.xlarge
      - m3.2xlarge
      - m4.large
      - m4.xlarge
      - m4.2xlarge
      - m4.4xlarge
      - m4.10xlarge
      - c1.medium
      - c1.xlarge
      - c3.large
      - c3.xlarge
      - c3.2xlarge
      - c3.4xlarge
      - c3.8xlarge
      - c4.large
      - c4.xlarge
      - c4.2xlarge
      - c4.4xlarge
      - c4.8xlarge
      - g2.2xlarge
      - g2.8xlarge
      - r3.large
      - r3.xlarge
      - r3.2xlarge
      - r3.4xlarge
      - r3.8xlarge
      - i2.xlarge
      - i2.2xlarge
      - i2.4xlarge
      - i2.8xlarge
      - d2.xlarge
      - d2.2xlarge
      - d2.4xlarge
      - d2.8xlarge
      - hi1.4xlarge
      - hs1.8xlarge
      - cr1.8xlarge
      - cc2.8xlarge
      - cg1.4xlarge
    ConstraintDescription: must be a valid EC2 instance type.
  KeyName:
    Description: Name of an EC2 KeyPair to enable SSH access to the instance.
    Type: 'AWS::EC2::KeyPair::KeyName'
    ConstraintDescription: must be the name of an existing EC2 KeyPair.
  SSHLocation:
    Description: ' The IP address range that can be used to access the web server using SSH.'
    Type: String
    MinLength: '9'
    MaxLength: '18'
    Default: 0.0.0.0/0
    AllowedPattern: '(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})/(\d<span>{</span>1,2})'
    ConstraintDescription: must be a valid IP CIDR range of the form x.x.x.x/x.</code></pre>
      </li></ol></div>
    <div class="procedure"><h6>To add mappings</h6><p>Mappings are a set of keys that are associated with a set of
        name-value pairs. They're useful for specifying values based on an input
        parameter value. For this walkthrough, we'll use a mapping to specify an
        AMI ID for an EC2 instance based on the instance type and region in
        which you create the stack. For more information, see <a href="./mappings-section-structure.html">Mappings</a>.</p><ol><li>
        <p>In the integrated editor pane, choose the
            <b>Mappings</b> tab.</p>
      </li><li>
        <p>Copy the following JSON mappings and paste them into the
          integrated editor.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>      
  "Mappings" : <span>{</span>
    "AWSInstanceType2Arch" : <span>{</span>
      "t1.micro"    : <span>{</span> "Arch" : "HVM64"  },
      "t2.nano"     : <span>{</span> "Arch" : "HVM64"  },
      "t2.micro"    : <span>{</span> "Arch" : "HVM64"  },
      "t2.small"    : <span>{</span> "Arch" : "HVM64"  },
      "t2.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "t2.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m1.small"    : <span>{</span> "Arch" : "HVM64"  },
      "m1.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "m1.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m1.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m2.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m2.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m2.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m3.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "m3.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m3.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m3.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m4.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m4.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m4.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m4.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m4.10xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "c1.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "c1.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "c3.large"    : <span>{</span> "Arch" : "HVM64"  },
      "c3.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "c3.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c3.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c3.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c4.large"    : <span>{</span> "Arch" : "HVM64"  },
      "c4.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "c4.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c4.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c4.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "g2.2xlarge"  : <span>{</span> "Arch" : "HVMG2"  },
      "g2.8xlarge"  : <span>{</span> "Arch" : "HVMG2"  },
      "r3.large"    : <span>{</span> "Arch" : "HVM64"  },
      "r3.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "r3.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "r3.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "r3.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "i2.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "i2.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "i2.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "i2.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "d2.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "d2.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "d2.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "d2.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "hi1.4xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "hs1.8xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "cr1.8xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "cc2.8xlarge" : <span>{</span> "Arch" : "HVM64"  }
    },
    "AWSRegionArch2AMI" : <span>{</span>
      "us-east-1"        : <span>{</span>"HVM64" : "ami-0ff8a91507f77f867", "HVMG2" : "ami-0a584ac55a7631c0c"},
      "us-west-2"        : <span>{</span>"HVM64" : "ami-a0cfeed8", "HVMG2" : "ami-0e09505bc235aa82d"},
      "us-west-1"        : <span>{</span>"HVM64" : "ami-0bdb828fd58c52235", "HVMG2" : "ami-066ee5fd4a9ef77f1"},
      "eu-west-1"        : <span>{</span>"HVM64" : "ami-047bb4163c506cd98", "HVMG2" : "ami-0a7c483d527806435"},
      "eu-west-2"        : <span>{</span>"HVM64" : "ami-f976839e", "HVMG2" : "NOT_SUPPORTED"},
      "eu-west-3"        : <span>{</span>"HVM64" : "ami-0ebc281c20e89ba4b", "HVMG2" : "NOT_SUPPORTED"},
      "eu-central-1"     : <span>{</span>"HVM64" : "ami-0233214e13e500f77", "HVMG2" : "ami-06223d46a6d0661c7"},
      "ap-northeast-1"   : <span>{</span>"HVM64" : "ami-06cd52961ce9f0d85", "HVMG2" : "ami-053cdd503598e4a9d"},
      "ap-northeast-2"   : <span>{</span>"HVM64" : "ami-0a10b2721688ce9d2", "HVMG2" : "NOT_SUPPORTED"},
      "ap-northeast-3"   : <span>{</span>"HVM64" : "ami-0d98120a9fb693f07", "HVMG2" : "NOT_SUPPORTED"},
      "ap-southeast-1"   : <span>{</span>"HVM64" : "ami-08569b978cc4dfa10", "HVMG2" : "ami-0be9df32ae9f92309"},
      "ap-southeast-2"   : <span>{</span>"HVM64" : "ami-09b42976632b27e9b", "HVMG2" : "ami-0a9ce9fecc3d1daf8"},
      "ap-south-1"       : <span>{</span>"HVM64" : "ami-0912f71e06545ad88", "HVMG2" : "ami-097b15e89dbdcfcf4"},
      "us-east-2"        : <span>{</span>"HVM64" : "ami-0b59bfac6be064b78", "HVMG2" : "NOT_SUPPORTED"},
      "ca-central-1"     : <span>{</span>"HVM64" : "ami-0b18956f", "HVMG2" : "NOT_SUPPORTED"},
      "sa-east-1"        : <span>{</span>"HVM64" : "ami-07b14488da8ea02a0", "HVMG2" : "NOT_SUPPORTED"},
      "cn-north-1"       : <span>{</span>"HVM64" : "ami-0a4eaf6c4454eda75", "HVMG2" : "NOT_SUPPORTED"},
      "cn-northwest-1"   : <span>{</span>"HVM64" : "ami-6b6a7d09", "HVMG2" : "NOT_SUPPORTED"}
    }
  }
}</code></pre>

        <p>Here are the same mappings in YAML.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Mappings:
  AWSInstanceType2Arch:
    t1.micro:
      Arch: HVM64
    t2.nano:
      Arch: HVM64
    t2.micro:
      Arch: HVM64
    t2.small:
      Arch: HVM64
    t2.medium:
      Arch: HVM64
    t2.large:
      Arch: HVM64
    m1.small:
      Arch: HVM64
    m1.medium:
      Arch: HVM64
    m1.large:
      Arch: HVM64
    m1.xlarge:
      Arch: HVM64
    m2.xlarge:
      Arch: HVM64
    m2.2xlarge:
      Arch: HVM64
    m2.4xlarge:
      Arch: HVM64
    m3.medium:
      Arch: HVM64
    m3.large:
      Arch: HVM64
    m3.xlarge:
      Arch: HVM64
    m3.2xlarge:
      Arch: HVM64
    m4.large:
      Arch: HVM64
    m4.xlarge:
      Arch: HVM64
    m4.2xlarge:
      Arch: HVM64
    m4.4xlarge:
      Arch: HVM64
    m4.10xlarge:
      Arch: HVM64
    c1.medium:
      Arch: HVM64
    c1.xlarge:
      Arch: HVM64
    c3.large:
      Arch: HVM64
    c3.xlarge:
      Arch: HVM64
    c3.2xlarge:
      Arch: HVM64
    c3.4xlarge:
      Arch: HVM64
    c3.8xlarge:
      Arch: HVM64
    c4.large:
      Arch: HVM64
    c4.xlarge:
      Arch: HVM64
    c4.2xlarge:
      Arch: HVM64
    c4.4xlarge:
      Arch: HVM64
    c4.8xlarge:
      Arch: HVM64
    g2.2xlarge:
      Arch: HVMG2
    g2.8xlarge:
      Arch: HVMG2
    r3.large:
      Arch: HVM64
    r3.xlarge:
      Arch: HVM64
    r3.2xlarge:
      Arch: HVM64
    r3.4xlarge:
      Arch: HVM64
    r3.8xlarge:
      Arch: HVM64
    i2.xlarge:
      Arch: HVM64
    i2.2xlarge:
      Arch: HVM64
    i2.4xlarge:
      Arch: HVM64
    i2.8xlarge:
      Arch: HVM64
    d2.xlarge:
      Arch: HVM64
    d2.2xlarge:
      Arch: HVM64
    d2.4xlarge:
      Arch: HVM64
    d2.8xlarge:
      Arch: HVM64
    hi1.4xlarge:
      Arch: HVM64
    hs1.8xlarge:
      Arch: HVM64
    cr1.8xlarge:
      Arch: HVM64
    cc2.8xlarge:
      Arch: HVM64
  AWSRegionArch2AMI:
    us-east-1:
      HVM64: ami-0ff8a91507f77f867
      HVMG2: ami-0a584ac55a7631c0c
    us-west-2:
      HVM64: ami-a0cfeed8
      HVMG2: ami-0e09505bc235aa82d
    us-west-1:
      HVM64: ami-0bdb828fd58c52235
      HVMG2: ami-066ee5fd4a9ef77f1
    eu-west-1:
      HVM64: ami-047bb4163c506cd98
      HVMG2: ami-0a7c483d527806435
    eu-west-2:
      HVM64: ami-f976839e
      HVMG2: NOT_SUPPORTED
    eu-west-3:
      HVM64: ami-0ebc281c20e89ba4b
      HVMG2: NOT_SUPPORTED
    eu-central-1:
      HVM64: ami-0233214e13e500f77
      HVMG2: ami-06223d46a6d0661c7
    ap-northeast-1:
      HVM64: ami-06cd52961ce9f0d85
      HVMG2: ami-053cdd503598e4a9d
    ap-northeast-2:
      HVM64: ami-0a10b2721688ce9d2
      HVMG2: NOT_SUPPORTED
    ap-northeast-3:
      HVM64: ami-0d98120a9fb693f07
      HVMG2: NOT_SUPPORTED
    ap-southeast-1:
      HVM64: ami-08569b978cc4dfa10
      HVMG2: ami-0be9df32ae9f92309
    ap-southeast-2:
      HVM64: ami-09b42976632b27e9b
      HVMG2: ami-0a9ce9fecc3d1daf8
    ap-south-1:
      HVM64: ami-0912f71e06545ad88
      HVMG2: ami-097b15e89dbdcfcf4
    us-east-2:
      HVM64: ami-0b59bfac6be064b78
      HVMG2: NOT_SUPPORTED
    ca-central-1:
      HVM64: ami-0b18956f
      HVMG2: NOT_SUPPORTED
    sa-east-1:
      HVM64: ami-07b14488da8ea02a0
      HVMG2: NOT_SUPPORTED
    cn-north-1:
      HVM64: ami-0a4eaf6c4454eda75
      HVMG2: NOT_SUPPORTED
    cn-northwest-1:
      HVM64: ami-6b6a7d09
      HVMG2: NOT_SUPPORTED</code></pre>
      </li></ol></div>
    <div class="procedure"><h6>To add outputs</h6><p>Outputs declare values that you want available to a <code class="code">describe
          stacks</code> API call or through the CloudFormation console stack
          <b>Outputs</b> tab. For this walkthrough, we'll output
        the website URL so that you can easily view the website after we create
        it. For more information, see <a href="./outputs-section-structure.html">Outputs</a>.</p><ol><li>
        <p>In the integrated editor pane, select the
            <b>Outputs</b> tab.</p>
      </li><li>
        <p>Copy the following JSON output and paste it into the
          integrated editor.</p>
        <p>The output uses an <code class="code">Fn::GetAtt</code> intrinsic function to
          get the public IP of the web server instance.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Outputs": <span>{</span>
    "URL": <span>{</span>
      "Value": <span>{</span>
        "Fn::Join": [
          "",
          [
            "http://",
            <span>{</span>
              "Fn::GetAtt": [
                "WebServerInstance",
                "PublicIp"
              ]
            }
          ]
        ]
      },
      "Description": "Newly created application URL"
    }
  }
}</code></pre>

        <p>Here is the same output in YAML.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Outputs:
  URL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - WebServerInstance
          - PublicIp
    Description: Newly created application URL</code></pre>
      </li><li>
        <p>Save your template again so that you don't lose your changes. You
          can safely save your changes to the same file that you created in the
          previous section.</p>
      </li></ol></div>
    <p>Now that the template parameters, mappings, and outputs are in place,
      we can specify resource properties.</p>
  <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">Step 3: Specify resource properties</h2>
    
    <p>Many resources have required properties that define their
      configurations or settings, such as which instance type to use for the web
      server. Similar to what we did in the previous step, we'll use the
      AWS CloudFormation Designer integrated editor to specify resource properties. We
      provide sample JSON and YAML that you can copy and paste into the
      integrated editor.</p>
    <div class="procedure"><h6>To specify resource properties</h6><ol><li>
        <p>On the AWS CloudFormation Designer canvas, choose the <code class="code">VPC</code>
          resource.</p>
        <p>The integrated editor shows the resource-level
          components that you can edit, such as the resource properties and
          attributes.</p>
      </li><li>
        <p>In the integrated editor pane, choose the
            <b>Properties</b> tab.</p>
      </li><li>
        <p>Copy the following JSON snippet and paste it into the
          integrated editor between the
            <b>Properties</b> braces (<code class="code"><span>{</span>}</code>).</p>
        <p>This snippet specifies DNS settings and the CIDR block of the
          VPC.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "EnableDnsSupport": "true",
        "EnableDnsHostnames": "true",
        "CidrBlock": "10.0.0.0/16"</code></pre>
        <p>For YAML, type a new line after <code class="code">Properties:</code> and paste
          the following snippet.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      EnableDnsSupport: 'true'
      EnableDnsHostnames: 'true'
      CidrBlock: 10.0.0.0/16</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For efficiency, we provide JSON and YAML snippets that you can
            copy and paste. Note, however, that the editor has an auto-complete
            feature that you can use to manually specify each property. For more
            information, see <a href="./working-with-templates-cfn-designer-json-editor.html">Integrated JSON and YAML
          editor</a>.</p></div></div>
      </li><li>
        <p>Repeat this process for the following resources:</p><div class="variablelist">
             
             
             
             
          <dl>
              <dt><span class="term"><code class="code">PublicSubnet</code></span></dt>
              <dd>
                <p>Add the following CIDR block property after the VPC ID
                  property. AWS CloudFormation Designer automatically added the VPC ID property
                  when you dragged the subnet inside the VPC.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You'll see a few other associations that AWS CloudFormation Designer
                      automatically created for you. Add just the new
                      properties, which are in bold.</p></div></div>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "VpcId": <span>{</span>
          "Ref": "VPC"
        },
        <b>"CidrBlock": "10.0.0.0/24"</b></code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      VpcId: !Ref VPC
      <b>CidrBlock: 10.0.0.0/24</b></code></pre>
              </dd>
             
              <dt><span class="term"><code class="code">PublicRoute</code></span></dt>
              <dd>
                <p>Add the following destination CIDR block property, which
                  directs all traffic to the Internet gateway:</p>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">        <b>"DestinationCidrBlock": "0.0.0.0/0",</b>
        "RouteTableId": <span>{</span>
          "Ref": "PublicRouteTable"
        },        
        "GatewayId": <span>{</span>
          "Ref": "InternetGateway"
        }</code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      <b>DestinationCidrBlock: 0.0.0.0/0</b>
      RouteTableId: !Ref PublicRouteTable
      GatewayId: !Ref InternetGateway</code></pre>
              </dd>
             
              <dt><span class="term"><code class="code">WebServerSecurityGroup</code></span></dt>
              <dd>
                <p>Add the following inbound rules that determine what
                  traffic can reach the web server instance. The rules allow all
                  HTTP and certain SSH traffic, which you specify as a parameter
                  value when you create a stack.</p>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "VpcId": <span>{</span>
          "Ref": "VPC"
        }<b>,
        "GroupDescription" : "Allow access from HTTP and SSH traffic",
        "SecurityGroupIngress": [
          <span>{</span>
            "IpProtocol": "tcp",
            "FromPort": 80,
            "ToPort": 80,
            "CidrIp": "0.0.0.0/0"
          },
          <span>{</span>
            "IpProtocol": "tcp",
            "FromPort": 22,
            "ToPort": 22,
            "CidrIp": <span>{</span>
              "Ref": "SSHLocation"
            }
          }
        ]</b></code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      VpcId: !Ref VPC
      <b>GroupDescription: Allow access from HTTP and SSH traffic
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 80
          ToPort: 80
          CidrIp: 0.0.0.0/0
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: !Ref SSHLocation</b></code></pre>
              </dd>
             
              <dt><span class="term"><code class="code">WebServerInstance</code></span></dt>
              <dd>
                <p>You need to specify a number of properties for the web
                  server instance, so we'll highlight just a few for
                  demonstration purposes. The <code class="code">InstanceType</code> and
                    <code class="code">ImageId</code> properties use the parameter and
                  mapping values that we specified in the previous section. When
                  you create a stack, you specify the instance type as a
                  parameter value. The <code class="code">ImageId</code> value is a mapping
                  that is based on your stack's region and the instance type
                  that you specified.</p>
                <p>The <code class="code">NetworkInterfaces</code> property specifies
                  network settings for the web server instance. This property
                  allows us to associate the security group and subnet with the
                  instance. Although AWS CloudFormation Designer used the <code class="code">SubnetId</code>
                  property to associate the instance with the subnet, we need to
                  use the <code class="code">NetworkInterfaces</code> property because that's
                  the only way to give the web server a public IP. And when you
                  specify the <code class="code">NetworkInterfaces</code> property, you are
                  required to specify the subnet and security group within that
                  property.</p>
                <p>In the <code class="code">UserData</code> property, we specify
                  configuration scripts that run after the instance is up and
                  running. All of the configuration information is defined in
                  the instance's metadata, which we'll add in the next
                  step.</p>
                <p>Replace all properties with the following snippet:</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Don't append this snippet to existing properties.</p></div></div>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><b>       "InstanceType": <span>{</span>
          "Ref": "InstanceType"
        },
        "ImageId": <span>{</span>
          "Fn::FindInMap": [
            "AWSRegionArch2AMI",
            <span>{</span>
              "Ref": "AWS::Region"
            },
            <span>{</span>
              "Fn::FindInMap": [
                "AWSInstanceType2Arch",
                <span>{</span>
                  "Ref": "InstanceType"
                },
                "Arch"
              ]
            }
          ]
        },
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "NetworkInterfaces": [
          <span>{</span>
            "GroupSet": [
              <span>{</span>
                "Ref": "WebServerSecurityGroup"
              }
            ],
            "AssociatePublicIpAddress": "true",
            "DeviceIndex": "0",
            "DeleteOnTermination": "true",
            "SubnetId": <span>{</span>
              "Ref": "PublicSubnet"
            }
          }
        ],
        "UserData": <span>{</span>
          "Fn::Base64": <span>{</span>
            "Fn::Join": [
              "",
              [
                "#!/bin/bash -xe\n",
                "yum install -y aws-cfn-bootstrap\n",
                "# Install the files and packages from the metadata\n",
                "/opt/aws/bin/cfn-init -v ",
                "         --stack ",
                <span>{</span>
                  "Ref": "AWS::StackName"
                },
                "         --resource WebServerInstance ",
                "         --configsets All ",
                "         --region ",
                <span>{</span>
                  "Ref": "AWS::Region"
                },
                "\n",
                "# Signal the status from cfn-init\n",
                "/opt/aws/bin/cfn-signal -e $? ",
                "         --stack ",
                <span>{</span>
                  "Ref": "AWS::StackName"
                },
                "         --resource WebServerInstance ",
                "         --region ",
                <span>{</span>
                  "Ref": "AWS::Region"
                },
                "\n"
              ]
            ]
          }
        }</b></code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml "><b>      InstanceType: !Ref InstanceType
      ImageId: !FindInMap 
        - AWSRegionArch2AMI
        - !Ref 'AWS::Region'
        - !FindInMap 
          - AWSInstanceType2Arch
          - !Ref InstanceType
          - Arch
      KeyName: !Ref KeyName
      NetworkInterfaces:
        - GroupSet:
            - !Ref WebServerSecurityGroup
          AssociatePublicIpAddress: 'true'
          DeviceIndex: '0'
          DeleteOnTermination: 'true'
          SubnetId: !Ref PublicSubnet
      UserData: !Base64 
        'Fn::Join':
          - ''
          - - |
              #!/bin/bash -xe
            - |
              yum install -y aws-cfn-bootstrap
            - |
              # Install the files and packages from the metadata
            - '/opt/aws/bin/cfn-init -v '
            - '         --stack '
            - !Ref 'AWS::StackName'
            - '         --resource WebServerInstance '
            - '         --configsets All '
            - '         --region '
            - !Ref 'AWS::Region'
            - |+

            - |
              # Signal the status from cfn-init
            - '/opt/aws/bin/cfn-signal -e $? '
            - '         --stack '
            - !Ref 'AWS::StackName'
            - '         --resource WebServerInstance '
            - '         --region '
            - !Ref 'AWS::Region'
            - |+</b></code></pre>
              </dd>
            </dl></div>
      </li><li>
        <p>Add the web server configuration metadata to the
            <code class="code">WebServerInstance</code> resource.</p>
        <ol><li>
            <p>Choose the <code class="code">WebServerInstance</code> resource, and then
              choose the <b>Metadata</b> tab in the
              integrated editor pane.</p>
          </li><li>
            <p><em>If you are authoring your template in
                JSON</em>: Within the <code class="code">Metadata</code> braces
                (<code class="code"><span>{</span>}</code>) and after the
                <code class="code">AWS::CloudFormation::Designer</code> closing brace, add a
              comma (<code class="code">,</code>).</p>
          </li><li>
            <p>After the <code class="code">AWS::CloudFormation::Designer</code> property,
              add the following snippet, which instructs the cfn-init helper
              script to start the web server and create a basic web page.</p>
            <p>JSON</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "AWS::CloudFormation::Init" : <span>{</span>
          "configSets" : <span>{</span>
            "All" : [ "ConfigureSampleApp" ]
          },
          "ConfigureSampleApp" : <span>{</span>
            "packages" : <span>{</span>
              "yum" : <span>{</span>
                "httpd" : []
              }
            },
            "files" : <span>{</span>
              "/var/www/html/index.html" : <span>{</span>
                "content" : <span>{</span> "Fn::Join" : ["\n", [
                  "&lt;h1&gt;Congratulations, you have successfully launched the AWS CloudFormation sample.&lt;/h1&gt;"
                ]]},
                "mode"    : "000644",
                "owner"   : "root",
                "group"   : "root"
              }
            },
            "services" : <span>{</span>
              "sysvinit" : <span>{</span>
                "httpd"    : <span>{</span> "enabled" : "true", "ensureRunning" : "true" }
              }
            }
          }
        }</code></pre>
            <p>YAML</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      'AWS::CloudFormation::Init':
        configSets:
          All:
            - ConfigureSampleApp
        ConfigureSampleApp:
          packages:
            yum:
              httpd: []
          files:
            /var/www/html/index.html:
              content: !Join 
                - |+

                - - &gt;-
                    &lt;h1&gt;Congratulations, you have successfully launched the AWS
                    CloudFormation sample.&lt;/h1&gt;
              mode: '000644'
              owner: root
              group: root
          services:
            sysvinit:
              httpd:
                enabled: 'true'
                ensureRunning: 'true'</code></pre>
          </li></ol>
      </li><li>
        <p>On the AWS CloudFormation Designer toolbar, choose <b>Validate
            template</b> (<span class="inlinemediaobject">
               
                <img src="/images/AWSCloudFormation/latest/UserGuide/images/designer-validate-icon.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
               
            </span>) to check for syntax errors in
          your template.</p>
        <p>View and fix errors in the <b>Messages</b> pane, and
          then validate the template again. If you don't see errors, your
          template is syntactically valid.</p>
      </li><li>
        <p>Save your completed template to keep all the changes you
          made.</p>
      </li></ol></div>
    <p>You now have a complete CloudFormation template that you can use to create a
      basic web server in a VPC. To create the template, we first added and
      connected template resources by using the AWS CloudFormation Designer canvas pane. Then, we
      used the integrated editor to add other template components and
      to specify resource properties. In the next step, we'll use this template
      to create a stack.</p>
  <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">Step 4: Provision resources</h2>
    
    <p>To create a stack, you can launch the CloudFormation <b>Create Stack Wizard</b> from
      AWS CloudFormation Designer. We'll use the template that we created in the previous steps
      to create a CloudFormation stack. After CloudFormation provisions all of your resources,
      you'll have a basic website up and running.</p>
    <div class="procedure"><h6>To create the stack</h6><ol><li>
        <p>On the AWS CloudFormation Designer toolbar, choose <b>Create
            Stack</b> (the cloud
          icon).</p>
        <p>AWS CloudFormation Designer saves the open template in an S3 bucket, and then
          launches the CloudFormation <b>Create Stack Wizard</b>. CloudFormation uses the same S3 bucket
          that it creates whenever you upload templates.</p>
      </li><li>
        <p>CloudFormation automatically populates the template URL; choose
            <b>Next</b>.</p>
      </li><li>
        <p>In the<b>Specify Details</b>section, enter a stack
          name in the<b>Stack name</b> field. For this example,
            use<code class="userinput">BasicWebServerStack</code>.</p>
      </li><li>
        <p>In the<b>Parameters</b> section, for the
            <b>KeyName</b>field, enter the name of a valid Amazon
          EC2 key pair in the same region you are creating the stack.</p>
      </li><li>
        <p>Keep the other default parameter values and choose
            <b>Next</b>.</p>
      </li><li>
        <p>For this walkthrough, you don't need to add tags or specify
          advanced settings, so choose <b>Next</b>.</p>
      </li><li>
        <p>Ensure that the stack name and Amazon EC2 key-pair name are correct,
          and then choose <b>Create</b>.</p>
      </li></ol></div>
    <p>It can take several minutes for AWS CloudFormation to create your stack. To monitor progress, view
      the stack events. For more information about viewing stack events, see <a href="./cfn-console-view-stack-data-resources.html">Viewing AWS CloudFormation stack data and resources on the
   AWS Management Console</a>. After the stack is created, view
      the stack outputs and go to the sample website URL to verify that the website is running. For
      more information, see <a href="./cfn-console-view-stack-data-resources.html">Viewing AWS CloudFormation stack data and resources on the
   AWS Management Console</a>.</p>
    <p>Now that you've successfully created a template and launched a stack
      using AWS CloudFormation Designer, you can use the stack in the following walkthrough:
        <a href="./working-with-templates-cfn-designer-walkthrough-updatebasicwebserver.html">Walkthrough: Use AWS CloudFormation Designer to modify a stack's template</a>, which modifies the template to create a scalable web server.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./CHAP_Using.html">Walkthroughs</div><div id="next" class="next-link" accesskey="n" href="./working-with-templates-cfn-designer-walkthrough-updatebasicwebserver.html">Use Designer to modify a template</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>