<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Add stacks to a stack set - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="stackinstances-create" /><meta name="default_state" content="stackinstances-create" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" /><meta name="description" content="When you create a stack set, you can create the stacks for that stack set. AWS CloudFormation also enables you to add more stacks, for additional accounts and Regions, at any point after the stack set is created. You can add stack instances using either the AWS CloudFormation console, or by using AWS CloudFormation commands in the AWS CLI. In this procedure, we will add stack instances for an additional Region to the stack set we created in" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Add stacks to a stack set" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Add stacks to a stack set - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Working with AWS CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Getting started with AWS CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-getting-started.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Add stacks to a stack set",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-getting-started.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#stackinstances-create-console">Add stack instances to a
                    stack set using the AWS Management Console</a><a href="#stackinstances-create-cli">Add stack instances to a
                    stack set using the AWS CLI</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="stackinstances-create">Add stacks to a stack set</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>When you create a stack set, you can create the stacks for that stack set. AWS CloudFormation also
            enables you to add more stacks, for additional accounts and Regions, at any point after
            the stack set is created. You can add stack instances using either the AWS CloudFormation console, or
            by using AWS CloudFormation commands in the AWS CLI. In this procedure, we will add stack instances
            for an additional Region to the stack set we created in <a href="./stacksets-getting-started-create.html">Create a stack set</a>.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#stackinstances-create-console">Add stack instances to a stack set
                    using the AWS Management Console</a></li><li><a href="#stackinstances-create-cli">Add stack instances to a stack set using
                    the AWS CLI</a></li></ul></div>
            <h2 id="stackinstances-create-console">Add stack instances to a stack set
                    using the AWS Management Console</h2>

            <div class="procedure"><ol><li><p>Open the AWS CloudFormation console at
         <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
                    <p>From the navigation pane, choose <b>StackSets</b>. On the
                        StackSets page, select the stack set that you created in <a href="./stacksets-getting-started-create.html">Create a stack set</a>.</p>
                </li><li>
                    <p>With the stack set selected, choose <b>Add new stacks to
                            StackSet</b> from the <b>Actions</b> menu.</p>
                    <div class="mediaobject">
                         
                            <img src="/images/AWSCloudFormation/latest/UserGuide/images/console-stacksets-action-add-stacks.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                            Manage stacks in stack set page&#xA;                        " style="max-width:100%" />
                         
                         
                    </div>
                </li><li>
                    <p>On the <b>Set deployment options</b> page, provide the
                        accounts and Regions into which you want to add stacks for your stack
                        set.</p>
                    <p>AWS CloudFormation will deploy stacks in the specified accounts within the first
                        Region, then moves on to the next, and so on, as long as a Region's
                        deployment failures don't exceed a specified failure tolerance.</p>
                    <ol><li>
                            <p>[Self-managed permissions] For <b>Deployment
                                    targets</b>, choose <b>Deploy stacks in
                                    accounts</b>. Paste your target account numbers in the
                                text box, separating multiple numbers with commas.</p>
                            <p>[Service-managed permissions] For <b>Deployment
                                    targets</b>, choose the accounts in your organization to
                                deploy to.</p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>Choose <b>Deploy to organization</b> to
                                        deploy to all accounts in your organization.</p>
                                    <div class="mediaobject">
                                         
                                            <img src="/images/AWSCloudFormation/latest/UserGuide/images/console-stackset-deploy-to-org.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                            Deploy stack instances to all accounts in your&#xA;                                                organization.&#xA;                                        " style="max-width:100%" />
                                         
                                         
                                    </div>
                                </li><li class="listitem">
                                    <p>Choose <b>Deploy to organizational units
                                            (OUs)</b> to deploy to all accounts in specific
                                        OUs. Choose <b>Add another OU</b>, and then
                                        paste the target OU ID in the text box. Repeat for each new
                                        target OU. StackSets also targets any child OUs of your
                                        selected targets.</p>
                                    <div class="mediaobject">
                                         
                                            <img src="/images/AWSCloudFormation/latest/UserGuide/images/console-stackset-deploy-to-organizational-units.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                            Deploy stack instances to all accounts in select&#xA;                                                OUs within your organization.&#xA;                                        " style="max-width:100%" />
                                         
                                         
                                    </div>
                                </li></ul></div>
                            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you add an OU that your stack set already targets,
                                    StackSets creates new stack instances in any accounts in the
                                    OU that don't already have stack instances from your stack set
                                    (for example, accounts that were added to the OU after your
                                    stack set was created and with automatic deployments
                                    disabled).</p></div></div>

                        </li><li>
                            <p>For <b>Deployment regions</b>, choose US West (N.
                                California). You will be creating new stacks, in the US West (N.
                                California) Region, for the targets you've specified.</p>
                            <p>If you add multiple Regions, the order of the Regions under
                                    <b>Specify regions</b> determines their deployment
                                order.</p>
                        </li><li>
                            <p>For <b>Deployment options</b>:</p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>For <b>Maximum concurrent accounts</b>, keep
                                        the default values of <b>Number</b> and
                                            <b>1</b>.</p>
                                    <p>This means that AWS CloudFormation deploys your stack in only one
                                        account at one time.</p>
                                </li><li class="listitem">
                                    <p>For <b>Failure tolerance</b>, keep the
                                        defaults of <b>Number</b> and
                                            <b>0</b>.</p>
                                    <p>This means that a maximum of one stack deployment can fail
                                        in one of your specified Regions before AWS CloudFormation stops
                                        deployment in the current Region, and cancels deployment in
                                        remaining Regions. If you want CloudFormation to be more failure
                                        tolerant, increase this value.</p>
                                </li></ul></div>
                            <p>Choose <b>Next</b>.</p>
                        </li></ol>
                </li><li>
                    <p>On the <b>Specify Overrides</b> page, leave the property
                        values as specified. You won't be overriding any property values for the
                        stacks you're going to create. Choose <b>Next</b>.</p>
                </li><li>
                    <p>On the <b>Review</b> page, review your choices and your
                        stack set's properties. To make changes, choose <b>Edit</b> in
                        the area in which you want to change properties. Before you can create the
                        new stacks, you must fill the check box in the
                            <b>Capabilities</b> area to acknowledge that some of the
                        resources that you are creating with the stack set might require new IAM
                        resources and permissions. For more information about potentially required
                        permissions, see <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-iam-template.html#using-iam-capabilities">Acknowledging IAM resources in AWS CloudFormation templates</a>
                        in this guide. When you are ready to create your stack instances, choose
                            <b>Submit</b>.</p>
                    <div class="mediaobject">
                         
                            <img src="/images/AWSCloudFormation/latest/UserGuide/images/console-create-stackset-review-capabilities.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                            Acknowledge required capabilities&#xA;                        " style="max-width:100%" />
                         
                         
                    </div>
                </li><li>
                    <p>AWS CloudFormation starts creating your stack instances. View the progress and status
                        of the creation of the stack instances in your stack set in the stack set
                        details page that opens when you choose <b>Submit</b>. When
                        complete, your new stack instances should be listed on the <b>Stack
                            instances</b> tab.</p>
                    <div class="mediaobject">
                         
                            <img src="/images/AWSCloudFormation/latest/UserGuide/images/console-stackset-detail-operations.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                            Operations tab of the StackSets details page&#xA;                        " style="max-width:100%" />
                         
                         
                    </div>
                </li></ol></div>
         
            <h2 id="stackinstances-create-cli">Add stack instances to a stack set using
                    the AWS CLI</h2>

            <p>When acting as a delegated administrator, you must set the <code class="code">--call-as</code>
                parameter to <code class="code">DELEGATED_ADMIN</code> each time you run a StackSets
                command.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">--call-as <code class="replaceable">DELEGATED_ADMIN</code></code></pre>

            <div class="procedure"><ol><li>
                    <p>Open the AWS CLI.</p>
                </li><li>
                    <p>Run the <code class="code">create-stack-instances</code> command.</p>

                    <p>[Self-managed permissions] Provide the accounts IDs for which you want to
                        create stack instances.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation create-stack-instances --stack-set-name <code class="replaceable">my-awsconfig-stackset</code> --accounts '["<code class="replaceable">account_id</code>"]' --regions '["<code class="replaceable">eu-west-1</code>", "<code class="replaceable">us-west-2</code>"]'</code></pre>

                    <p>[Service-managed permissions] Provide the organization (root) ID or OU IDs
                        for which you want to create stack instances. In this example, we specify
                        OUs with <code class="code">ou-rcuk-1x5j1lwo</code> and <code class="code">ou-rcuk-slr5lh0a</code>
                        IDs.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation create-stack-instances --stack-set-name <code class="replaceable">StackSet-myApp</code> --deployment-targets OrganizationalUnitIds='["<code class="replaceable">ou-rcuk-r1qi0wl7</code>"]' --regions '["<code class="replaceable">eu-west-1</code>", "<code class="replaceable">us-west-2</code>"]'</code></pre>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you add an OU that your stack set already targets, StackSets
                            creates new stack instances in any accounts in the OU that don't already
                            have stack instances from your stack set (for example, accounts that
                            were added to the OU after your stack set was created and with automatic
                            deployments disabled).</p></div></div>
                </li></ol></div>

        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./stacksets-update.html">Update your stack set</div><div id="next" class="next-link" accesskey="n" href="./concurrency-mode.html">Concurrency Mode parameter</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/stackinstances-create.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/stackinstances-create.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>