<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ko-KR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>업데이트 롤백 계속 - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-cfn-updating-stacks-continueupdaterollback" /><meta name="default_state" content="using-cfn-updating-stacks-continueupdaterollback" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="description" content="스택이 UPDATE_ROLLBACK_FAILED 상태인 경우 실패의 원인인 오류를 해결하고 업데이트를 계속 롤백하여 스택을 작업 상태(UPDATE_ROLLBACK_COMPLETE)로 되돌립니다." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="사용자 가이드" /><meta name="abstract" content="이 사용 설명서와 AWS CloudFormation을 사용하여 AWS 인프라 배포를 예상한 대로 반복해서 생성 및 관리합니다." /><meta name="guide-locale" content="ko_kr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="사용자 가이드" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="사용자 가이드" /><meta id="panorama-serviceConsolePage" value="업데이트 롤백 계속" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>업데이트 롤백 계속 - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,리소스 프로비저닝,리소스 구성,인프라 관리,CloudFormer,CloudFormation 스택,CloudFormation stackset,CloudFormation 템플릿,변경 세트" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "사용자 가이드",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "스택 작업",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS CloudFormation 스택 업데이트",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "업데이트 롤백 계속",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">aws-documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">사용자 가이드</a></div><div id="page-toc-src"><a href="#nested-stacks">ResourcesToSkip을 사용하여 중첩 스택 계층 구조 복구</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-cfn-updating-stacks-continueupdaterollback">업데이트 롤백 계속</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>AWS CloudFormation에서 업데이트 중에 모든 변경 사항을 롤백할 수 없는 경우 스택이 <code class="code">UPDATE_ROLLBACK_FAILED</code> 상태로 전환됩니다. 예를 들어, 스택이 CloudFormation 외부에서 삭제된 이전 데이터베이스 인스턴스로 롤백하기 시작합니다. CloudFormation에서는 데이터베이스가 삭제되었는지 알지 못하므로 해당 데이터베이스 인스턴스가 존재하는 것으로 간주하고 롤백을 시도합니다. 따라서 업데이트 롤백이 실패합니다.</p><p>스택이 <code class="code">UPDATE_ROLLBACK_FAILED</code> 상태인 경우 작업 상태(<code class="code">UPDATE_ROLLBACK_COMPLETE</code>)로 계속 롤백할 수 있습니다. <code class="code">UPDATE_ROLLBACK_FAILED</code> 상태인 스택을 업데이트할 수 없습니다. 하지만 롤백을 계속할 수 있는 경우 스택을 원래 설정으로 되돌린 다음 다시 업데이트할 수 있습니다.</p><p>대부분의 경우 스택을 계속해서 롤백하려면 업데이트 롤백 실패의 원인인 오류를 해결해야 합니다. 자세한 내용은  섹션을 참조하십시오. 그 밖의 경우(예: 스택 작업이 시간 초과된 경우) 변경하지 않고 업데이트를 계속 롤백할 수 있습니다.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>중첩 스택을 사용하는 경우 상위 스택을 롤백하면 모든 하위 스택도 함께 롤백하려고 시도합니다.</p></div></div><div class="procedure"><h6>업데이트 롤백을 계속하려면(콘솔)</h6><ol><li><p>AWS CloudFormation 콘솔(<a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>)을 엽니다.</p></li><li>
      <p>업데이트할 스택을 선택하고 <b>Stack actions(스택 작업)</b>, <b>업데이트 롤백 계속</b>을 차례로 선택합니다.</p>

      <p><a href="./troubleshooting.html#troubleshooting-errors">오류 해결</a>의 해결 방법이 모두 효과가 없는 경우 고급 옵션을 사용하여 CloudFormation에서 롤백할 수 없는 리소스를 건너뛸 수 있습니다. 건너뛸 리소스의 논리적 ID를 <a href="./cfn-console-view-stack-data-resources.html">조회</a>하여 입력해야 합니다. 업데이트 전달 도중이 아니라 <code class="code">UpdateRollback</code> 중에 <code class="code">UPDATE_FAILED</code> 상태로 전환된 리소스만 지정합니다.</p>
      <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>주의</h6></div><div class="awsdocs-note-text"><p>CloudFormation에서 지정된 리소스의 상태를 <code class="code">UPDATE_COMPLETE</code>로 설정하고 스택을 계속 롤백합니다. 롤백이 완료된 이후에는 건너뛴 리소스의 상태가 스택 템플릿에 있는 리소스의 상태와 일치하지 않게 됩니다. 다른 스택을 업데이트하기 전에 스택 또는 리소스를 서로 일치하도록 업데이트해야 합니다. 그렇지 않으면 후속 스택 업데이트가 실패할 수 있습니다. 이 경우 스택을 복구할 수 없습니다.</p></div></div>
      <p>스택을 롤백하는 데 필요한 최소 리소스 수를 지정합니다. 예를 들어, 리소스 업데이트가 실패하여 종속 리소스가 실패할 수 있습니다. 이 경우 종속 리소스를 건너뛸 필요가 없습니다.</p>
      <p>중첩 스택에 포함된 리소스를 건너뛰려면 <code class="code"><code class="replaceable">NestedStackName</code>.<code class="replaceable">ResourceLogicalID</code></code> 형식을 사용합니다. <code class="code">Type: AWS::CloudFormation::Stack</code> 목록에서 스택 리소스의 논리적 ID(<code class="code">ResourcesToSkip</code>)를 지정하려면 포함된 해당 스택이 <code class="code">DELETE_IN_PROGRESS</code>, <code class="code">DELETE_COMPLETE</code> 또는 <code class="code">DELETE_FAILED</code> 상태 중 하나여야 합니다.</p>
    </li></ol></div><div class="procedure"><h6>업데이트 롤백을 계속하려면(AWS CLI)</h6><ul><li>
   <p><code class="code"><a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/continue-update-rollback.html">aws cloudformation continue-update-rollback</a></code> 명령을 <code class="code">stack-name</code> 옵션과 함께 사용하여 롤백을 계속할 스택의 ID를 지정합니다.</p></li></ul></div><h2 id="nested-stacks"><code class="code">ResourcesToSkip</code>을 사용하여 중첩 스택 계층 구조 복구</h2>
    
    <p>다음 다이어그램은 <code class="code">UPDATE_ROLLBACK_FAILED</code> 상태인 중첩 스택 계층 구조를 보여줍니다. 이 예에서는 <code class="code">WebInfra</code> 루트 스택에 두 개의 중첩 스택(<code class="code">WebInfra-Compute</code> 및 <code class="code">WebInfra-Storage</code>)이 있고, 여기에 다시 하나 이상의 중첩 스택이 있습니다.</p>
    <div class="mediaobject">
       
        <img src="images/cfn-update-stack-continue-update-rollback_nested-stacks.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        3단계 중첩 스택의 계층 구조 다이어그램.&#xA;      " style="max-width:100%" />
       
       
    </div>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>간소화하기 위해 이 예에서는 스택 이름이 잘려 있습니다. 하위 스택 이름은 일반적으로 CloudFormation에 의해 생성되고 고유한 임의의 문자열을 포함하므로 실제 이름은 사용자에게 친숙하지 않을 수 있습니다.</p></div></div>      
    <p><code class="code">continue-update-rollback</code>을 사용하여 루트 스택을 실행 가능한 상태로 가져오려면 <code class="code">resources-to-skip</code> 파라미터를 사용하여 롤백에 실패한 리소스를 건너뛰어야 합니다. 이 예에서 <code class="code">resources-to-skip</code>은 다음 항목을 포함합니다.</p>
    <div class="orderedlist">
       
       
       
       
    <ol><li><p>myCustom</p></li><li><p>WebInfra-Compute-Asg.myAsg</p></li><li><p>WebInfra-Compute-LB.myLoadBalancer</p></li><li><p>WebInfra-Storage.DB</p></li></ol></div>
    <p>다음은 전체 AWS CLI 명령의 예입니다.</p>
    <pre class="programlisting"><div class="code-btn-container"></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation continue-update-rollback --stack-name WebInfra \
    --resources-to-skip myCustom WebInfra-Compute-Asg.myAsg WebInfra-Compute-LB.myLoadBalancer WebInfra-Storage.DB</code></code></pre>
    <p><code class="code"><code class="replaceable">NestedStackName</code>.<code class="replaceable">ResourceLogicalID</code></code> 형식을 사용하여 중첩 스택의 리소스를 지정했지만, 루트 스택의 리소스(예: <em>myCustom</em>)에 대해서는 논리적 ID만 지정했습니다.</p>
    <p><b>중첩 스택의 스택 이름 찾기</b></p>
    <p>스택 ID 또는 Amazon 리소스 이름(ARN)에서 하위 스택의 이름을 찾을 수 있습니다. 다음 예에서 스택 이름은 <em>WebInfra-Storage-Z2VKC706XKXT</em>입니다.</p>
    <p><code class="code">arn:aws:cloudformation:us-east-1:123456789012:stack/WebInfra-Storage-Z2VKC706XKXT/ea9e7f90-54f7-11e6-a032-028f3d2330bd</code></p>  
    <p><b>중첩 스택의 논리적 ID 찾기</b></p>
    <p>상위 스택의 템플릿 정의에서 하위 스택의 논리적 ID를 찾을 수 있습니다. 다이어그램에서 <code class="code">WebInfra-Storage-DB</code> 하위 스택의 <code class="code">LogicalId</code>는 상위 <code class="code">WebInfra-Storage</code>의 <em>DB</em>입니다.</p>
    <p>CloudFormation 콘솔의 <b>Resources</b>(리소스) 또는 <b>Events</b>(이벤트) 탭에 있는 스택 리소스에 대한 <b>Logical ID</b>(논리적 ID) 열에서 논리적 ID를 찾을 수도 있습니다.</p>
<awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="주의" /> <strong>javascript가 브라우저에서 비활성화되거나 사용이 불가합니다.</strong></p><p>AWS 설명서를 사용하려면 Javascript가 활성화되어야 합니다. 지침을 보려면 브라우저의 도움말 페이지를 참조하십시오.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">문서 규칙</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./protect-stack-resources.html">스택 리소스에 대한 업데이트 방지</div><div id="next" class="next-link" accesskey="n" href="./using-cfn-stack-drift.html">스택 및 리소스에 대한 비관리형 구성 변경 감지</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 예</div><div class="content"><p>칭찬해 주셔서 감사합니다!</p><p>잠깐 시간을 내어 좋았던 부분을 알려 주시면 더 열심히 만들어 보겠습니다.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 아니요</div><div class="content"><p>이 페이지에 작업이 필요하다는 점을 알려 주셔서 감사합니다. 실망시켜 드려 죄송합니다.</p><p>잠깐 시간을 내어 설명서를 향상시킬 수 있는 방법에 대해 말씀해 주십시오.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>