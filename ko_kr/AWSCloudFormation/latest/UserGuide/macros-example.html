<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ko-KR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>매크로 예제: 매크로 생성 및 사용 - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="macros-example" /><meta name="default_state" content="macros-example" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html" /><meta name="description" content="다음 예제는 템플릿에서 매크로를 정의하는 것부터 매크로에 대한 Lambda 함수를 생성하고 템플릿에 있는 매크로를 사용하는 것에 이르기까지 매크로 사용 프로세스를 연습합니다." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="사용자 가이드" /><meta name="abstract" content="이 사용 설명서와 AWS CloudFormation을 사용하여 AWS 인프라 배포를 예상한 대로 반복해서 생성 및 관리합니다." /><meta name="guide-locale" content="ko_kr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/macros-example.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="사용자 가이드" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="사용자 가이드" /><meta id="panorama-serviceConsolePage" value="매크로 예제: 매크로 생성 및 사용" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>매크로 예제: 매크로 생성 및 사용 - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,리소스 프로비저닝,리소스 구성,인프라 관리,CloudFormer,CloudFormation 스택,CloudFormation stackset,CloudFormation 템플릿,변경 세트" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "사용자 가이드",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS CloudFormation 템플릿 사용",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS CloudFormation 매크로를 사용하여 템플릿에 사용자 지정 처리 수행",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "매크로 예제: 매크로 생성 및 사용",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">aws-documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">사용자 가이드</a></div><div id="page-toc-src"><a href="#macros-example-definiton">매크로 예제: 매크로 정의 템플릿 </a><a href="#macros-example-usage">매크로 예제: 매크로 사용 템플릿 </a><a href="#macros-example-request">매크로 예제: 이벤트 매핑 요청 </a><a href="#macros-example-function">매크로 예제: Lambda 함수 코드</a><a href="#macros-example-response">매크로 예제: Lambda 함수 응답</a><a href="#macros-example-processed">매크로 예제: 처리된 템플릿 결과</a><a href="#template-macros-examples-awslabs">추가 매크로 예제</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="macros-example">매크로 예제: 매크로 생성 및 사용</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>다음 예제는 템플릿에서 매크로를 정의하는 것부터 매크로에 대한 Lambda 함수를 생성하고 템플릿에 있는 매크로를 사용하는 것에 이르기까지 매크로 사용 프로세스를 연습합니다.</p><p>이 예제에서 지정된 문자열을 처리된 콘텐츠의 지정된 대상 콘텐츠를 대신하여 삽입하는 단순한 매크로를 생성합니다. 또한 이를 사용하여 처리된 템플릿의 지정된 위치에 빈 <code class="code">WaitHandleCondition</code>을 삽입합니다.</p>
            <h2 id="macros-example-definiton">매크로 예제: 매크로 정의 템플릿 </h2>
            <p>매크로를 사용하기 전에 2가지를 완료해야 합니다. 원하는 템플릿 처리를 수행하는 Lambda 함수를 생성하고, 매크로 정의를 생성함으로써 CloudFormation에서 Lambda 함수를 사용할 수 있도록 합니다.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>이 주제에서 Lambda 함수에 대한 실제 코드를 살펴보겠습니다.</p></div></div>
            <p>다음 샘플 템플릿에는 예제 매크로에 대한 정의가 포함되어 있습니다. 특정 CloudFormation 계정에서 매크로를 사용할 수 있도록 하려면 템플릿에서 스택을 생성합니다. 매크로 정의는 매크로 이름, 간단한 설명을 지정하고, 이 매크로가 템플릿에서 사용될 때 CloudFormation에서 호출하는 Lambda 함수의 ARN을 참조합니다. (오류 로깅을 위해 <b>LogGroupName</b> 또는 <b>LogRoleARN</b> 속성을 포함하지 않았습니다.) 자세한 내용은 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a>를 참조하십시오.</p>
            <p>이 예제에서는 이 템플릿에서 생성된 스택의 이름이 <b>JavaMacroFunc</b>이라고 가정합니다. 매크로 <code class="code">Name</code> 속성이 스택 이름으로 설정되었기 때문에 결과로 나오는 매크로 이름은 <b>JavaMacroFunc</b>입니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
  Resources:
    Macro:
      Type: AWS::CloudFormation::Macro
      Properties:
        Name: <code class="replaceable">!Sub '$<span>{</span>AWS::StackName}'</code>
        Description: <code class="replaceable">Adds a blank WaitConditionHandle named 'WaitHandle'</code>
        FunctionName: <code class="replaceable">"arn:aws:lambda:us-east-1:012345678910:function:JavaMacroFunc"</code></code></pre>
         
            <h2 id="macros-example-usage">매크로 예제: 매크로 사용 템플릿 </h2>
            <p>이 경우 매크로를 사용하려면 <a href="./intrinsic-function-reference-transform.html">Fn::Transform</a> 내장 함수를 사용하여 이를 템플릿에 포함합니다.</p>
            <p>아래 템플릿을 사용하여 스택을 생성할 때 CloudFormation에서 예제 매크로를 호출합니다. 기본 Lambda 함수는 지정된 문자열을 다른 지정된 문자열로 바꿉니다. 이 경우에는 결과적으로 빈 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-waitconditionhandle.html">AWS::CloudFormation::WaitConditionHandle</a>이 처리된 템플릿으로 삽입됩니다.</p>
            <p>다음을 참조합니다.</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>호출할 매크로는 <b>JavaMacroFunc</b>으로 지정됩니다. 이는 이전 매크로 정의 예제에서 온 것입니다.</p>
                </li><li class="listitem">
                    <p>매크로는 전달되는 2개의 파라미터로, <code class="code">target</code> 및 <code class="code">replacement</code>입니다. 대상 문자열과 원하는 대체 값을 나타냅니다.</p>
                </li><li class="listitem"><p>매크로는 <code class="code">Type</code> 노드의 콘텐츠를 처리할 수 있는데, <code class="code">Type</code>이 매크로를 참조하는 <code class="code">Fn::Transform</code> 함수의 형제이기 때문입니다.</p></li><li class="listitem"><p>결과적으로 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-waitconditionhandle.html">AWS::CloudFormation::WaitConditionHandle</a>의 이름은 <code class="code">2a</code>입니다.</p></li><li class="listitem"><p>템플릿에는 또한 템플릿 파라미터인 <code class="code">ExampleParameter</code>가 포함되어 있습니다. 매크로에서 여기에 액세스할 수 있습니다(단, 이 경우 사용하지 않음).</p></li></ul></div>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  ExampleParameter:
    Type: String
    Default: 'SampleMacro'

Resources:
  2a:
    Fn::Transform:
      Name: "JavaMacroFunc"
      Parameters:
        replacement: 'AWS::CloudFormation::WaitConditionHandle'
        target: '$$REPLACEMENT$$'
    Type: '$$REPLACEMENT$$'</code></pre>
         
            <h2 id="macros-example-request">매크로 예제: 이벤트 매핑 요청 </h2>
            <p>CloudFormation에서 스택 생성 도중 예제 템플릿을 처리할 때 다음 이벤트 매핑을 <b>JavaMacroFunc</b> 매크로 정의에서 참조되는 Lambda 함수에 전달합니다.</p>
            <p><code class="code">fragment</code>에는 매크로에서 처리할 수 있는 템플릿 조각을 나타내는 JSON이 포함되어 있습니다. 이 조각에는 <code class="code">Fn::Transform</code> 함수 호출의 형제가 포함되어 있지만 함수 호출 자체가 포함되어 있지는 않습니다. 또한 <code class="code">params</code>에는 매크로 파라미터를 나타내는 JSON이 포함되어 있습니다. 이 경우 대체 및 대상입니다. 비슷하게 <code class="code">templateParameterValues</code>에는 전체적으로 템플릿에 지정된 파라미터를 나타내는 JSON이 포함되어 있습니다.</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><code class="code">region</code></p><p><code class="code">us-east-1</code></p></li><li class="listitem"><p><code class="code">accountId</code></p><p><code class="code">012345678910</code></p></li><li class="listitem"><p><code class="code">fragment</code></p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type": "$$REPLACEMENT$$"
}</code></pre>
                </li><li class="listitem"><p><code class="code">transformId</code></p><p><code class="code">012345678910::JavaMacroFunc</code></p></li><li class="listitem"><p><code class="code">params</code></p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "replacement": "AWS::CloudFormation::WaitConditionHandle",
    "target": "$$REPLACEMENT$$"
}</code></pre>
                </li><li class="listitem"><p><code class="code">requestId</code></p><p><code class="code">5dba79b5-f117-4de0-9ce4-d40363bfb6ab</code></p></li><li class="listitem"><p><code class="code">templateParameterValues</code></p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "ExampleParameter": "SampleMacro"
}</code></pre>
                </li></ul></div>
         
            <h2 id="macros-example-function">매크로 예제: Lambda 함수 코드</h2>
            <p>다음은 기본 <b>JavaMacroFunc</b> 예제 매크로의 Lambda 함수에 대한 실제 코드입니다. 응답에 포함된 템플릿 조각(문자열, 목록 또는 맵 형식)을 반복하여 지정된 대상 문자열을 찾습니다. 지정된 대상 문자열을 찾으면 Lambda 함수에서 대상 문자열을 지정된 대체 문자열로 바꿉니다. 그렇지 않은 경우 함수에서 템플릿 조각을 변경하지 않은 채로 둡니다. 그런 다음 함수에서 아래 세부 정보에서 논의하는 예상 속성의 맵을 CloudFormation에 반환합니다.</p>
            <div class="minimized-block" data-minimized="true"><div class="minimized-content">
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">package com.macroexample.lambda.demo;

import java.util.List;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import com.amazonaws.services.lambda.runtime.Context;
import com.amazonaws.services.lambda.runtime.RequestHandler;

public class LambdaFunctionHandler implements RequestHandler&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt; <span>{</span>

	private static final String REPLACEMENT = "replacement";
	private static final String TARGET = "target";
	private static final String PARAMS = "params";
	private static final String FRAGMENT = "fragment";
	private static final String REQUESTID = "requestId";
	private static final String STATUS = "status";
	private static final String SUCCESS = "SUCCESS";
	private static final String FAILURE = "FAILURE";
    @Override
    public Map&lt;String, Object&gt; handleRequest(Map&lt;String, Object&gt; event, Context context) <span>{</span>
        // TODO: implement your handler
    	final Map&lt;String, Object&gt; responseMap = new HashMap&lt;String, Object&gt;();
        responseMap.put(REQUESTID, event.get(REQUESTID));
        responseMap.put(STATUS, FAILURE);
    	try <span>{</span>
	        if (!event.containsKey(PARAMS)) <span>{</span>
	        	throw new RuntimeException("Params are required");
	        }
	    	
	        final Map&lt;String, Object&gt; params = (Map&lt;String, Object&gt;) event.get(PARAMS);
	        if (!params.containsKey(REPLACEMENT) || !params.containsKey(TARGET)) <span>{</span>
	        	throw new RuntimeException("replacement or target under Params are required");
	        }
	    	
	    	final String replacement = (String) params.get(REPLACEMENT);
	    	final String target = (String) params.get(TARGET);
	    	final Object fragment = event.getOrDefault(FRAGMENT, new HashMap&lt;String, Object&gt;());
	    	final Object retFragment;
	    	if (fragment instanceof String) <span>{</span>
	    		retFragment = iterateAndReplace(replacement, target, (String) fragment);
	    	} else if (fragment instanceof List) <span>{</span>
	    		retFragment = iterateAndReplace(replacement, target, (List&lt;Object&gt;) fragment);
	    	} else if (fragment instanceof Map) <span>{</span>
	    		retFragment = iterateAndReplace(replacement, target, (Map&lt;String, Object&gt;) fragment);
	    	} else <span>{</span>
	    		retFragment = fragment;
	    	}
	        responseMap.put(STATUS, SUCCESS);
	        responseMap.put(FRAGMENT, retFragment);
	        return responseMap;
    	} catch (Exception e) <span>{</span>
    		e.printStackTrace();
    		context.getLogger().log(e.getMessage());
    		return responseMap;
    	}
    }
    
    private Map&lt;String, Object&gt; iterateAndReplace(final String replacement, final String target, final Map&lt;String, Object&gt; fragment) <span>{</span>
    	final Map&lt;String, Object&gt; retFragment = new HashMap&lt;String, Object&gt;();
    	final List&lt;String&gt; replacementKeys = new ArrayList&lt;&gt;();
    	fragment.forEach((k, v) -&gt; <span>{</span>
    		if (v instanceof String) <span>{</span>
    			retFragment.put(k, iterateAndReplace(replacement, target, (String)v));
    		} else if (v instanceof List) <span>{</span>
    			retFragment.put(k, iterateAndReplace(replacement, target, (List&lt;Object&gt;)v));
    		} else if (v instanceof Map ) <span>{</span>
    			retFragment.put(k, iterateAndReplace(replacement, target, (Map&lt;String, Object&gt;) v));
    		} else <span>{</span>
    			retFragment.put(k, v);
    		}
    	});
    	return retFragment;
    }

    private List&lt;Object&gt; iterateAndReplace(final String replacement, final String target, final List&lt;Object&gt; fragment) <span>{</span>
    	final List&lt;Object&gt; retFragment = new ArrayList&lt;&gt;();
    	fragment.forEach(o -&gt; <span>{</span>
    		if (o instanceof String) <span>{</span>
    			retFragment.add(iterateAndReplace(replacement, target, (String) o));
    		} else if (o instanceof List) <span>{</span>
    			retFragment.add(iterateAndReplace(replacement, target, (List&lt;Object&gt;) o));
    		} else if (o instanceof Map) <span>{</span>
    			retFragment.add(iterateAndReplace(replacement, target, (Map&lt;String, Object&gt;) o));
    		} else <span>{</span>
    			retFragment.add(o);
    		}
    	});
    	return retFragment;
    }
    
    private String iterateAndReplace(final String replacement, final String target, final String fragment) <span>{</span>
    	System.out.println(replacement + " == " + target + " == " + fragment );
    	if (fragment != null AND_AND fragment.equals(target))
    		return replacement;
    	return fragment;
    }
}</code></pre>
            <div class="minimized-fader"></div></div><div class="show-more-btn"><a href="#"><awsui-icon class="show-more-text" variant="link" name="caret-right-filled"></awsui-icon><span class="show-more-text">더보기</span><awsui-icon class="show-less-text" variant="link" name="caret-up-filled"></awsui-icon><span class="show-less-text">간략히 보기</span></a></div></div>
         
            <h2 id="macros-example-response">매크로 예제: Lambda 함수 응답</h2>
            <p>다음은 Lambda 함수에서 처리를 위해 AWS CloudFormation으로 반환하는 매핑입니다. <code class="code">requestId</code>가 CloudFormation에서 전송된 것과 일치하는 경우 <code class="code">status</code>의 <code class="code">SUCCESS</code>는 Lambda 함수가 요청에 포함된 템플릿 조각을 처리했음을 의미합니다. 이 응답에서 <code class="code">fragment</code>에는 기존 템플릿 조각을 대신하여 처리된 템플릿에 삽입할 콘텐츠를 나타내는 JSON이 포함되어 있습니다.</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><code class="code">requestId</code></p><p><code class="code">5dba79b5-f117-4de0-9ce4-d40363bfb6ab</code></p></li><li class="listitem"><p><code class="code">status</code></p><p><code class="code">SUCCESS</code></p></li><li class="listitem"><p><code class="code">fragment</code></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type": "AWS::CloudFormation::WaitConditionHandle"
}</code></pre>
                </li></ul></div>
         
            <h2 id="macros-example-processed">매크로 예제: 처리된 템플릿 결과</h2>
            <p>CloudFormation에서 Lambda 함수로부터 성공적인 응답을 수신한 이후 반환된 템플릿 조각을 처리된 템플릿에 삽입합니다.</p>
            <p>아래는 예제에 해당하는 처리된 템플릿 결과입니다. <b>JavaMacroFunc</b> 매크로를 참조하는 <code class="code">Fn::Transform</code> 내장 함수는 더 이상 포함되지 않습니다. Lambda 함수에서 반환하는 템플릿 조각은 적절한 위치에 포함되며, 결과적으로 콘텐츠 <code class="code">"Type": "$$REPLACEMENT$$"</code>는 <code class="code">"Type":
                "AWS::CloudFormation::WaitConditionHandle"</code>로 변경되었습니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Parameters": <span>{</span>
        "ExampleParameter": <span>{</span>
            "Default": "SampleMacro",
            "Type": "String"
        }
    },
    "Resources": <span>{</span>
        "2a": <span>{</span>
            "Type": "AWS::CloudFormation::WaitConditionHandle"
        }
    }
}</code></pre>
         
            <h2 id="template-macros-examples-awslabs">추가 매크로 예제</h2>
            <p>이 설명서에 있는 이 연습에 추가로 GitHub의 <a href="https://github.com/awslabs" rel="noopener noreferrer" target="_blank"><span>Amazon Web Services - Labs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 리포지토리의 <a href="https://github.com/awslabs/aws-cloudformation-templates/tree/master/aws/services/CloudFormation/MacrosExamples/" rel="noopener noreferrer" target="_blank"><span>매크로 예제</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 섹션에서 소스 코드 및 템플릿을 포함한 예제 매크로를 확인할 수 있습니다. 이러한 예제는 교육용으로 있는 그대로 제공됩니다.</p>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="주의" /> <strong>javascript가 브라우저에서 비활성화되거나 사용이 불가합니다.</strong></p><p>AWS 설명서를 사용하려면 Javascript가 활성화되어야 합니다. 지침을 보려면 브라우저의 도움말 페이지를 참조하십시오.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">문서 규칙</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./template-macros.html">템플릿 매크로</div><div id="next" class="next-link" accesskey="n" href="./modules.html">모듈 사용</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 예</div><div class="content"><p>칭찬해 주셔서 감사합니다!</p><p>잠깐 시간을 내어 좋았던 부분을 알려 주시면 더 열심히 만들어 보겠습니다.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 아니요</div><div class="content"><p>이 페이지에 작업이 필요하다는 점을 알려 주셔서 감사합니다. 실망시켜 드려 죄송합니다.</p><p>잠깐 시간을 내어 설명서를 향상시킬 수 있는 방법에 대해 말씀해 주십시오.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/macros-example.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>