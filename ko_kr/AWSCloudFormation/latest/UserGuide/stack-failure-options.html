<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ko-KR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>스택 실패 옵션 - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="stack-failure-options" /><meta name="default_state" content="stack-failure-options" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" /><meta name="description" content="프로비저닝 실패가 발생한 경우 성공적으로 프로비저닝된 리소스를 롤백하지 않고 실패 지점부터 시작하여 애플리케이션을 반복적으로 개발합니다." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="사용자 가이드" /><meta name="abstract" content="이 사용 설명서와 AWS CloudFormation을 사용하여 AWS 인프라 배포를 예상한 대로 반복해서 생성 및 관리합니다." /><meta name="guide-locale" content="ko_kr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="사용자 가이드" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="사용자 가이드" /><meta id="panorama-serviceConsolePage" value="스택 실패 옵션" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>스택 실패 옵션 - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,리소스 프로비저닝,리소스 구성,인프라 관리,CloudFormer,CloudFormation 스택,CloudFormation stackset,CloudFormation 템플릿,변경 세트" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "사용자 가이드",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "스택 작업",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "스택 실패 옵션",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacks.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">aws-documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">사용자 가이드</a></div><div id="page-toc-src"><a href="#stack-failure-options-overview">스택 실패 옵션 개요</a><a href="#stack-failure-options-conditions">스택 롤백을 일시 중지하는 조건</a><a href="#stack-failure-options-console">성공적으로 프로비저닝된 리소스 보존(콘솔)</a><a href="#stack-failure-options-cli">성공적으로 프로비저닝된 리소스 보존(AWS CLI)</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="stack-failure-options">스택 실패 옵션</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>프로비저닝 실패가 발생한 경우 성공적으로 프로비저닝된 리소스를 롤백하지 않고 실패 지점부터 시작하여 애플리케이션을 반복적으로 개발할 수 있습니다. 스택 실패 옵션을 지정하여 <code class="code">CREATE_FAILED</code> 또는 <code class="code">UPDATE_FAILED</code> 상태의 리소스 문제를 해결할 수 있습니다. 모든 스택 배포 및 변경 세트 작업에 대한 실패 옵션을 프로비저닝할 수 있습니다.</p><div class="itemizedlist">
   
   
  
 <ul class="itemizedlist"><li class="listitem">
   <p><b>Preserve successfully provisioned resources</b>(성공적으로 프로비저닝된 리소스 보존)로 설정된 작업 생성은 성공한 리소스의 상태를 유지하는 반면 실패한 리소스는 다음 업데이트 작업이 수행될 때까지 실패 상태로 유지됩니다.</p>
  </li><li class="listitem">
   <p><b>Preserve successfully provisioned resources</b>(성공적으로 프로비저닝된 리소스 보존)로 설정된 업데이트 및 변경 세트 작업은 성공한 리소스의 상태를 유지하는 동시에 실패한 리소스를 마지막으로 알려진 안정 상태로 롤백합니다. 실패한 리소스는 <code class="code">UPDATE_FAILED</code> 상태가 됩니다. 마지막으로 알려진 안정 상태가 없는 리소스는 다음 스택 작업 시 삭제됩니다.</p>
  </li></ul></div><p>실패한 리소스의 롤백 일시 중지에 대한 자세한 내용을 알아보려면 다음 섹션을 참조하세요.</p><div class="itemizedlist">
   
   
   
   
 <ul class="itemizedlist"><li class="listitem">
   <p><a href="#stack-failure-options-overview">스택 실패 옵션 개요</a></p>
  </li><li class="listitem">
   <p><a href="#stack-failure-options-conditions">스택 롤백을 일시 중지하는 조건</a></p>
  </li><li class="listitem">
   <p><a href="#stack-failure-options-console">성공적으로 프로비저닝된 리소스 보존(콘솔)</a></p>
  </li><li class="listitem">
   <p><a href="#stack-failure-options-cli">성공적으로 프로비저닝된 리소스 보존(AWS CLI)</a></p>
  </li></ul></div>
  <h2 id="stack-failure-options-overview">스택 실패 옵션 개요</h2>
  <p>AWS CloudFormation 콘솔, API 또는 AWS Command Line Interface(AWS CLI)에서 작업을 실행하기 전에 프로비저닝된 리소스 실패에 대한 동작을 지정합니다. 그런 다음 다른 수정 없이 리소스 배포 프로세스를 진행합니다. 운영 실패가 발생하면 CloudFormation은 각 독립 프로비저닝 경로의 첫 번째 실패 시 중지합니다. CloudFormation은 리소스 간의 종속 항목을 식별하여 독립 프로비저닝 작업을 병렬화합니다. 그런 다음 실패가 발생할 때까지 각 독립 프로비저닝 경로에서 리소스 프로비저닝을 진행합니다. 한 경로의 실패는 다른 프로비저닝 경로에 영향을 주지 않습니다. CloudFormation은 완료될 때까지 리소스를 계속 프로비저닝하거나 다른 실패 시 중지됩니다.</p>
  <p>배포 프로세스를 계속하려면 문제를 수정합니다. CloudFormation은 이전에 성공적으로 프로비저닝할 수 없었던 리소스에 대한 프로비저닝 작업을 재시도하기 전에 필요한 업데이트를 수행합니다. <b>Retry</b>(재시도), <b>Update</b>(업데이트) 또는 <b>Roll back</b>(롤백) 작업을 제출하여 문제를 해결합니다. 예를 들어 Amazon EC2 인스턴스를 프로비저닝하고 EC2 인스턴스가 생성 작업 중 실패하는 경우 실패한 리소스를 즉시 롤백하는 대신 오류를 조사할 수 있습니다. 시스템 상태 확인 및 인스턴스 상태 확인을 검토한 다음 문제가 해결되면 <b>Retry</b>(재시도) 작업을 선택할 수 있습니다.</p>
  
  
  <p>스택 작업이 실패하고 <b>Stack failure options</b>(스택 실패 옵션) 메뉴에서 <b>Preserve successfully provisioned resources</b>(성공적으로 프로비저닝된 리소스 보존)를 지정한 경우 다음 옵션을 선택할 수 있습니다.</p>
  <div class="itemizedlist">
    
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p><b>Retry</b>(재시도) – 실패한 리소스에 대한 프로비저닝 작업을 재시도하고 스택 작업이 성공적으로 완료되거나 다음 오류가 발생할 때까지 템플릿 프로비저닝을 계속합니다. AWS Identity and Access Management(IAM) 권한과 같이 템플릿 수정이 필요하지 않은 문제로 인해 리소스 프로비저닝에 실패한 경우 이 옵션을 선택합니다.</p>
   </li><li class="listitem">
    <p><b>Update</b>(업데이트) – 프로비저닝된 리소스는 템플릿 업데이트 시 업데이트됩니다. 생성 또는 업데이트에 실패한 리소스는 재시도됩니다. 템플릿 오류로 인해 리소스 프로비저닝에 실패하고 템플릿을 수정한 경우 이 옵션을 선택합니다. <code class="code">FAILED</code> 상태인 스택을 업데이트할 때 스택 업데이트를 계속하려면 <b>Stack failure options</b>(스택 실패 옵션)에 대해 <b>Preserve successfully provisioned resources</b>(성공적으로 프로비저닝된 리소스 보존)를 선택해야 합니다.</p>
   </li><li class="listitem">
    <p><b>Roll back</b>(롤백) – CloudFormation은 스택을 마지막으로 알려진 안정 상태로 롤백합니다.</p>
   </li></ul></div>

 
  
  <h2 id="stack-failure-options-conditions">스택 롤백을 일시 중지하는 조건</h2>
  <p>스택에서 실패한 리소스의 롤백을 일시 중지하려면 다음 조건을 충족해야 합니다.</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>스택 작업 중 <b>Preserve successfully provisioned resources</b>(성공적으로 프로비저닝된 리소스 보존) 파라미터를 지정해야 합니다. 롤백 동작에 대한 자세한 내용을 알아보려면 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-add-tags.html#rollback">AWS CloudFormation 스택 옵션 설정</a>을 참조하세요.</p>
   </li><li class="listitem">
    <p>스택 작업은 스택 상태가 <code class="code">CREATE_FAILED</code> 또는 <code class="code">UPDATE_FAILED</code>여야 합니다. 스택 상태에 대한 자세한 내용을 알아보려면 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-describing-stacks.html#w2ab1c23c15c17c11">스택 상태 코드</a>를 참조하세요.</p>
   </li></ul></div>
  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>변경할 수 없는 업데이트 유형은 지원되지 않습니다.</p></div></div>
  
  <h2 id="stack-failure-options-console">성공적으로 프로비저닝된 리소스 보존(콘솔)</h2>
  <awsdocs-tabs><dl style="display: none">
   <dt>Create stack</dt><dd tab-id="create-stack">
     <div class="procedure"><h6>스택 생성 작업 중 성공적으로 프로비저닝된 리소스 보존</h6><ol><li><p>AWS Management Console에 로그인하여 <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>에서 AWS CloudFormation 콘솔을 엽니다.</p></li><li>
       <p><b>Create stack</b>(스택 생성)을 선택한 다음 <b>With new resources (standard)</b>(새 리소스 사용(표준))를 선택합니다.</p>
      </li><li>
       <p><b>Specify template(템플릿 지정)</b> 페이지에서 다음 옵션 중 하나를 사용하여 스택 템플릿을 선택합니다.</p>
       <div class="itemizedlist">
         
         
         
       <ul class="itemizedlist"><li class="listitem">
         <p><b>템플릿 준비 완료</b></p>
        </li><li class="listitem">
         <p><b>샘플 템플릿 사용</b></p>
        </li><li class="listitem">
         <p><b>Create template in Designer(Designer에서 템플릿 생성)</b></p>
        </li></ul></div>
       <p>설정을 수락하고 <b>Next</b>(다음)를 선택합니다.</p>
      </li><li>
       <p><b>Specify stack details</b>(스택 세부 정보 지정) 페이지의 <b>Stack name</b>(스택 이름) 상자에 스택 이름을 입력합니다.</p>
      </li><li>
       <p><b>Parameters</b>(파라미터) 섹션에서 스택 템플릿에 정의된 파라미터를 지정합니다.</p>
       <p>기본값을 사용하여 파라미터를 사용하거나 변경할 수 있습니다.</p>
      </li><li>
       <p>파라미터 값에 만족하면 <b>Next</b>(다음)를 선택합니다.</p>
      </li><li>
       <p><b>Configure stack options</b>(스택 옵션 구성) 페이지에서 스택에 대한 추가 옵션을 설정할 수 있습니다.</p>
      </li><li>
       <p><b>Stack failure options</b>(스택 실패 옵션)에서 <b>Preserve successfully provisioned resources</b>(성공적으로 프로비저닝된 리소스 보존)를 선택합니다.</p>
      </li><li>
       <p>스택 옵션에 만족하면 <b>Next</b>(다음)를 선택합니다.</p>
      </li><li>
       <p><b>Review</b>(검토) 페이지에서 스택을 검토하고 <b>Create stack</b>(스택 생성)을 선택합니다.</p>
      </li></ol></div>
     <p><em>결과</em>: 생성에 실패한 리소스는 스택 작업이 실패할 때 스택이 롤백되지 않도록 스택 상태를 <code class="code">CREATE_FAILED</code>로 전환합니다. 성공적으로 프로비저닝된 리소스는 <code class="code">CREATE_COMPLETE</code> 상태입니다. <b>Stack events</b>(스택 이벤트) 탭에서 스택을 모니터링할 수 있습니다.</p>
    </dd>
   <dt>Update stack</dt><dd tab-id="update-stack">
     <div class="procedure"><h6>스택 업데이트 작업 중 성공적으로 프로비저닝된 리소스 보존</h6><ol><li><p>AWS Management Console에 로그인하여 <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>에서 AWS CloudFormation 콘솔을 엽니다.</p></li><li>
       <p>업데이트할 스택을 선택하고 <b>Update</b>(업데이트)를 선택합니다.</p>
      </li><li>
       <p><b>Update stack</b>(스택 지정) 페이지에서 다음 옵션 중 하나를 사용하여 스택 템플릿을 선택합니다.</p>
       <div class="itemizedlist">
         
         
         
       <ul class="itemizedlist"><li class="listitem">
         <p><b>Use current template</b>(현재 템플릿 사용)</p>
        </li><li class="listitem">
         <p><b>Replace current template</b>(현재 템플릿 교체)</p>
        </li><li class="listitem">
         <p><b>Edit template in designer</b>(Designer에서 템플릿 편집)</p>
        </li></ul></div>
       <p>설정을 수락하고 <b>Next</b>(다음)를 선택합니다.</p>
      </li><li>
       <p><b>Specify stack details</b>(스택 세부 정보 지정) 페이지에서 스택 템플릿에 정의된 파라미터를 지정합니다.</p>
       <p>기본값을 사용하여 파라미터를 사용하거나 변경할 수 있습니다.</p>
      </li><li>
       <p>파라미터 값에 만족하면 <b>Next</b>(다음)를 선택합니다.</p>
      </li><li>
       <p><b>Configure stack options</b>(스택 옵션 구성) 페이지에서 스택에 대한 추가 옵션을 설정할 수 있습니다.</p>
      </li><li>
       <p><b>Behavior on provisioning failure</b>(프로비저닝 실패에 대한 동작)에서 <b>Preserve successfully provisioned resources</b>(성공적으로 프로비저닝된 리소스 보존)를 선택합니다.</p>
      </li><li>
       <p>스택 옵션에 만족하면 <b>Next</b>(다음)를 선택합니다.</p>
      </li><li>
       <p><b>Review</b>(검토) 페이지에서 스택을 검토하고 <b>Update stack</b>(스택 업데이트)을 선택합니다.</p>
      </li></ol></div>
     <p><em>결과</em>: 업데이트에 실패한 리소스는 스택 상태를 <code class="code">UPDATE_FAILED</code>로 전환하고 마지막으로 알려진 안정 상태로 롤백합니다. 마지막으로 알려진 안정 상태가 없는 리소스는 다음 스택 작업 시 CloudFormation에 의해 삭제됩니다. 성공적으로 프로비저닝된 리소스는 <code class="code">CREATE_COMPLETE</code> 또는 <code class="code">UPDATE_COMPLETE</code> 상태입니다. <b>Stack events</b>(스택 이벤트) 탭에서 스택을 모니터링할 수 있습니다.</p>
    </dd>
   <dt>Change set</dt><dd tab-id="change-set">
     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p><code class="code">CREATE_FAILED</code> 또는 <code class="code">UPDATE_FAILED</code> 상태의 스택에 대해 변경 세트를 시작할 수 있지만 <code class="code">UPDATE_ROLLBACK_FAILED</code> 상태의 스택에 대해 변경 세트를 시작할 수 없습니다.</p></div></div>
     <div class="procedure"><h6>변경 세트 작업 중 성공적으로 프로비저닝된 리소스 보존</h6><ol><li><p>AWS Management Console에 로그인하여 <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>에서 AWS CloudFormation 콘솔을 엽니다.</p></li><li>
       <p>시작하려는 변경 세트가 포함된 스택을 선택한 다음 <b>Change sets</b>(변경 세트) 탭을 선택합니다.</p>
      </li><li>
       <p>변경 세트를 선택한 다음 <b>Execute</b>(실행)를 선택합니다.</p>
      </li><li>
       <p><b>Execute change set</b>(변경 세트 실행)에서 <b>Preserve successfully provisioned resources</b>(성공적으로 프로비저닝된 리소스 보존) 옵션을 선택합니다.</p>
      </li><li>
       <p><b>Execute change set</b>(변경 세트 실행)를 선택합니다.</p>
      </li></ol></div>
     <p><em>결과</em>: 업데이트에 실패한 리소스는 스택 상태를 <code class="code">UPDATE_FAILED</code>로 전환하고 마지막으로 알려진 안정 상태로 롤백합니다. 마지막으로 알려진 안정 상태가 없는 리소스는 다음 스택 작업 시 CloudFormation에 의해 삭제됩니다. 성공적으로 프로비저닝된 리소스는 <code class="code">CREATE_COMPLETE</code> 또는 <code class="code">UPDATE_COMPLETE</code> 상태입니다. <b>Stack events</b>(스택 이벤트) 탭에서 스택을 모니터링할 수 있습니다.</p>
    </dd>
  </dl></awsdocs-tabs>
  
  <h2 id="stack-failure-options-cli">성공적으로 프로비저닝된 리소스 보존(AWS CLI)</h2>
  <awsdocs-tabs><dl style="display: none">
   <dt>Create stack</dt><dd tab-id="create-stack">
     <div class="procedure"><h6>스택 생성 작업 중 성공적으로 프로비저닝된 리소스 보존</h6><p><a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/create-stack.html">create-stack</a> 작업 중 <code class="code">disable-rollback</code> 옵션이나 <code class="code">on-failure DO_NOTHING</code> 열거를 선택합니다.</p><ol><li>
       <p><code class="code">disable-rollback</code> 옵션을 사용하여 <code class="code">create-stack</code> 명령에 스택 이름과 템플릿을 제공합니다.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation create-stack --stack-name <code class="code" copy="true">myteststack</code> --template-body <code class="replaceable">file://DOC-EXAMPLE-BUCKET.json</code> --disable-rollback</code></pre>
       <p>명령은 다음 출력을 반환합니다.</p>
       <pre class="screen"><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}</pre>
      </li><li>
       <p><code class="code">describe-stacks</code> 옵션을 사용하여 스택의 상태를 설명합니다.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation describe-stacks --stack-name <code class="replaceable">myteststack</code></code></pre>
       <p>명령은 다음 출력을 반환합니다.</p>
       <pre class="screen"><span>{</span>
    "Stacks":  [
        <span>{</span>
            "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896",
            "Description": "AWS CloudFormation Sample Template",
            "Tags": [],
            "Outputs": [],
            "StackStatusReason": “The following resource(s) failed to create: [MyBucket]”,
            "CreationTime": "2013-08-23T01:02:15.422Z",
            "Capabilities": [],
            "StackName": "myteststack",
            "StackStatus": "CREATE_FAILED",
            "DisableRollback": true
        }
    ]
}</pre>
      </li></ol></div>
    </dd>
   <dt>Update stack</dt><dd tab-id="update-stack">
     <div class="procedure"><h6>스택 업데이트 작업 중 성공적으로 프로비저닝된 리소스 보존</h6><ol><li>
       <p><code class="code">disable-rollback</code> 옵션을 사용하여 <code class="code">update-stack</code> 명령에 기존 스택 이름과 템플릿을 제공합니다.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation update-stack --stack-name <code class="replaceable">myteststack</code> --template-url <code class="replaceable">DOC-EXAMPLE-BUCKET.template</code> --disable-rollback</code></pre>
       <p>명령은 다음 출력을 반환합니다.</p>
       <pre class="screen"><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}</pre>
      </li><li>
       <p><code class="code">describe-stacks</code> 또는 <code class="code">describe-stack-events</code> 옵션을 사용하여 스택의 상태를 설명합니다.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation describe-stacks --stack-name <code class="replaceable">myteststack</code></code></pre>
       <p>명령은 다음 출력을 반환합니다.</p>
       <pre class="screen"><span>{</span>
    "Stacks":  [
        <span>{</span>
            "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896",
            "Description": "AWS CloudFormation Sample Template",
            "Tags": [],
            "Outputs": [],
            "CreationTime": "2013-08-23T01:02:15.422Z",
            "Capabilities": [],
            "StackName": "myteststack",
            "StackStatus": "UPDATE_COMPLETE",
            "DisableRollback": true
        }
    ]
}</pre>
      </li></ol></div>
    </dd>
   <dt>Change set</dt><dd tab-id="change-set">
     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p><code class="code">CREATE_FAILED</code> 또는 <code class="code">UPDATE_FAILED</code> 상태의 스택에 대해 변경 세트를 시작할 수 있지만 <code class="code">UPDATE_ROLLBACK_FAILED</code> 상태의 스택에 대해 변경 세트를 시작할 수 없습니다.</p></div></div>
     <div class="procedure"><h6>변경 세트 작업 중 성공적으로 프로비저닝된 리소스 보존</h6><p><a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/execute-change-set.html">execute-change-set</a> 작업 중 <code class="code">disable-rollback</code> 옵션을 지정합니다.</p><ol><li>
       <p><code class="code">disable-rollback</code> 옵션을 사용하여 <code class="code">execute-change-set</code> 명령에 스택 이름과 템플릿을 제공합니다.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation execute-change-set --stack-name <code class="replaceable">myteststack</code> --change-set-name <code class="replaceable">my-change-set</code> --template-body file://template.yaml</code></pre>
       <p>명령은 다음 출력을 반환합니다.</p>
       <pre class="screen"><span>{</span>
 "Id": "arn:aws:cloudformation:us-east-1:123456789012:changeSet/my-change-set/bc9555ba-a949-xmpl-bfb8-f41d04ec5784",
 "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}</pre>
      </li><li>
       <p><code class="code">disable-rollback</code> 옵션으로 변경 세트를 시작합니다.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation execute-change-set --stack-name <code class="replaceable">myteststack</code> --change-set-name <code class="replaceable">my-change-set</code> -–disable-rollback</code></pre>
      </li><li>
       <p><code class="code">describe-stacks</code> 또는 <code class="code">describe-stack-events</code> 옵션을 사용하여 스택의 상태를 결정합니다.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "StackEvents": [
     <span>{</span>
        "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896",
        "EventId": "49c966a0-7b74-11ea-8071-024244bb0672",
        "StackName": "myteststack",
        "LogicalResourceId": " MyBucket",
        "PhysicalResourceId": "MyBucket",
        "ResourceType": "AWS::S3::Bucket",
        "Timestamp": "2020-04-10T21:43:17.015Z",
        "ResourceStatus": "UPDATE_FAILED"
        "ResourceStatusReason": "User XYZ is not allowed to perform S3::UpdateBucket on MyBucket"
     }
}</code></pre>
      </li><li>
       <p>권한 오류를 수정하고 작업을 다시 시도합니다.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation update-stack --stack-name <code class="replaceable">myteststack</code> --use-previous-template --disable-rollback</code></pre>
       <p>명령은 다음 출력을 반환합니다.</p>
       <pre class="screen"><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}</pre>
      </li><li>
       <p><code class="code">describe-stacks</code> 또는 <code class="code">describe-stack-events</code> 옵션을 사용하여 스택의 상태를 설명합니다.</p>
       <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation describe-stacks --stack-name <code class="replaceable">myteststack</code></code></pre>
       <p>명령은 다음 출력을 반환합니다.</p>
       <pre class="screen"><span>{</span>
    "Stacks":  [
        <span>{</span>
            "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896",
            "Description": "AWS CloudFormation Sample Template",
            "Tags": [],
            "Outputs": [],
            "CreationTime": "2013-08-23T01:02:15.422Z",
            "Capabilities": [],
            "StackName": "myteststack",
            "StackStatus": "UPDATE_COMPLETE",
            "DisableRollback": true
        }
    ]
}</pre>
      </li></ol></div>
    </dd>
  </dl></awsdocs-tabs>
  
   
   <h3 id="roll-back-stack-cli">스택 롤백</h3>
   
   <div class="procedure"><h6>CREATE_FAILED 또는 UPDATE_FAILED 스택 상태에서 스택 롤백</h6><p>스택을 마지막 안정 상태로 롤백하려면 <code class="code">rollback-stack</code> 작업을 지정합니다.</p><ul><li>
     <p><code class="code">rollback-stack</code> 작업으로 롤백을 시작하고 스택 이름을 지정합니다.</p>
     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation rollback-stack --stack-name <code class="replaceable">myteststack</code></code></pre>
     <p>명령은 다음 출력을 반환합니다.</p>
     <pre class="screen"><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}</pre>
    </li></ul></div>
   <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p><code class="code">rollback-stack</code> 작업은 마지막으로 알려진 안정 상태가 없는 스택을 삭제합니다.</p></div></div>
   
  
 <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="주의" /> <strong>javascript가 브라우저에서 비활성화되거나 사용이 불가합니다.</strong></p><p>AWS 설명서를 사용하려면 Javascript가 활성화되어야 합니다. 지침을 보려면 브라우저의 도움말 페이지를 참조하십시오.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">문서 규칙</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./stack-resource-configuration-complete.html">스택 배포</div><div id="next" class="next-link" accesskey="n" href="./refactor-stacks.html">스택 간 리소스 이동</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 예</div><div class="content"><p>칭찬해 주셔서 감사합니다!</p><p>잠깐 시간을 내어 좋았던 부분을 알려 주시면 더 열심히 만들어 보겠습니다.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 아니요</div><div class="content"><p>이 페이지에 작업이 필요하다는 점을 알려 주셔서 감사합니다. 실망시켜 드려 죄송합니다.</p><p>잠깐 시간을 내어 설명서를 향상시킬 수 있는 방법에 대해 말씀해 주십시오.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stack-failure-options.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>