<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ko-KR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS CloudFormation 매크로를 사용하여 템플릿에 사용자 지정 처리 수행 - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="template-macros" /><meta name="default_state" content="template-macros" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="description" content="매크로를 사용하여 찾기 및 바꾸기 작업 같은 간단한 작업부터 전체 템플릿 변형과 같은 작업까지 템플릿에 대한 사용자 지정 처리를 수행할 수 있습니다." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="사용자 가이드" /><meta name="abstract" content="이 사용 설명서와 AWS CloudFormation을 사용하여 AWS 인프라 배포를 예상한 대로 반복해서 생성 및 관리합니다." /><meta name="guide-locale" content="ko_kr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="사용자 가이드" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="사용자 가이드" /><meta id="panorama-serviceConsolePage" value="AWS CloudFormation 매크로를 사용하여 템플릿에 사용자 지정 처리 수행" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS CloudFormation 매크로를 사용하여 템플릿에 사용자 지정 처리 수행 - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,리소스 프로비저닝,리소스 구성,인프라 관리,CloudFormer,CloudFormation 스택,CloudFormation stackset,CloudFormation 템플릿,변경 세트" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "사용자 가이드",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS CloudFormation 템플릿 사용",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS CloudFormation 매크로를 사용하여 템플릿에 사용자 지정 처리 수행",
        "item" : "https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-guide.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">aws-documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">사용자 가이드</a></div><div id="page-toc-src"><a href="#template-macros-overview">AWS CloudFormation 매크로의 작동 방식</a><a href="#template-macros-author">AWS CloudFormation 매크로 정의 생성</a><a href="#template-macros-use">템플릿에서 AWS CloudFormation 매크로 사용</a><a href="#template-macros-examples-list">매크로 예제</a><a href="#template-macros-seealso">다음 사항도 참조하십시오.</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="template-macros">AWS CloudFormation 매크로를 사용하여 템플릿에 사용자 지정 처리 수행</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>매크로를 통해 찾기 및 바꾸기 작업 같은 간단한 작업부터 전체 템플릿 변형과 같은 작업까지 템플릿에 대한 사용자 지정 처리를 수행할 수 있습니다.</p><p>가능성의 폭에 대한 아이디어를 얻으려면 <code class="code">AWS::Include</code> 및 <code class="code">AWS::Serverless</code> 변형을 고려하십시오. AWS CloudFormation에 의해 호스팅되는 매크로입니다.</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p><code class="code"><a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">AWS::Include 변환</a></code> 사용을 통해 보일러플레이트 템플릿 코드 조각을 템플릿에 삽입할 수 있습니다.</p>
        </li><li class="listitem">
            <p><code class="code"><a href="./transform-aws-serverless.html">AWS::Serverless 변환</a></code>에서는 AWS Serverless Application Model(AWS SAM) 구문에서 작성된 전체 템플릿을 가져온 다음 이를 변형 후 규정 준수 AWS CloudFormation 템플릿으로 확장합니다. (서버리스 애플리케이션 및 AWS SAM에 대한 자세한 내용을 알아보려면 <em>AWS Lambda 개발자 안내서</em>의<a href="https://docs.aws.amazon.com/lambda/latest/dg/deploying-lambda-apps.html"> Lambda 기반 애플리케이션 배포</a>를 참조하세요.)</p>
        </li></ul></div><h2 id="template-macros-overview">AWS CloudFormation 매크로의 작동 방식</h2><p>매크로를 사용한 템플릿 처리에 대한 두 가지 주요 단계가 있습니다. 매크로 자체의 <em>생성</em>과 매크로 <em>사용</em>을 통한 템플릿의 처리 수행입니다.</p><p>매크로 정의를 생성하려면 다음을 생성해야 합니다.</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>템플릿 처리를 수행하는 AWS Lambda 함수. 이 Lambda 함수는 코드 조각 또는 전체 템플릿 및 정의하는 추가 파라미터를 수락합니다. 응답으로 처리된 템플릿 코드 조각 또는 전체 템플릿을 반환합니다.</p>
        </li><li class="listitem">
            <p><code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></code> 유형의 리소스로, 이를 통해 사용자는 AWS CloudFormation 템플릿 내부에서 Lambda 함수를 호출할 수 있습니다. 이 리소스는 Lambda 함수의 ARN을 지정하여 이 매크로를 호출하고, 추가 선택적 속성을 지정하여 디버깅을 지원합니다. 계정 내에서 이 리소스를 생성하려면 <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></code> 리소스를 포함시키는 템플릿을 작성한 다음 템플릿에서 자체 관리 권한이 있는 스택 또는 스택 세트를 생성합니다. AWS CloudFormation StackSets는 현재 매크로를 참조하는 템플릿에서 서비스 관리형 권한으로 스택 세트를 생성하거나 업데이트하는 것을 지원하지 않습니다.</p>
        </li></ul></div><p>매크로를 사용하려면 템플릿에서 매크로를 참조합니다.</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>템플릿의 섹션 또는 <em>코드 조각</em>을 처리하려면 변환하려는 템플릿과 관련된 위치에 있는 <code class="code"><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></code> 함수의 매크로를 참조합니다. <code class="code">Fn::Transform</code> 사용 시 필요한 지정된 파라미터를 전달할 수 있습니다.</p>
        </li><li class="listitem">
            <p>전체 템플릿을 처리하려면 템플릿의 <a href="./transform-section-structure.html">변환</a> 섹션에 있는 매크로를 참조합니다.</p>
        </li></ul></div><p>그런 다음 변경 세트를 생성하고 실행하십시오. (매크로 처리 시 알지 못할 수도 있는 여러 리소스가 추가될 수 있습니다. 매크로가 수행하는 모든 변경을 인식하려면 변경 세트를 사용합니다.) AWS CloudFormation은 추가로 지정된 파라미터와 함께 지정된 템플릿 콘텐츠를 매크로 리소스에 지정된 Lambda 함수로 전달합니다. Lambda 함수는 처리된 템플릿 콘텐츠를 반환하며, 이는 코드 조각 또는 전체 템플릿입니다.</p><p>템플릿의 모든 매크로가 호출된 이후 AWS CloudFormation에서 처리된 템플릿 콘텐츠를 포함시키는 변경 세트를 생성합니다. 변경 세트를 검토한 후 실행하여 해당 변경 내용을 적용합니다.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>중요</h6></div><div class="awsdocs-note-text"><p>스택 세트 템플릿에서 하나 이상의 매크로를 참조하는 경우 먼저 변경 세트의 결과 변경 사항을 먼저 검토하지 않고 처리된 템플릿에서 직접 스택 세트를 생성해야 합니다. 스택 세트를 직접 생성하거나 업데이트하려면 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> 또는 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> 작업을 사용하고 <code class="code">CAPABILITY_AUTO_EXPAND</code> 기능을 지정해야 합니다. 매크로를 직접 참조하는 템플릿에서 스택 세트를 생성 또는 업데이트하기 전에 매크로가 수행하는 처리 작업을 알고 있어야 합니다.</p></div></div><div class="mediaobject">
         
            
            <img src="images/template-macro-use.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;            Fn::Transform 내장 함수 또는 템플릿의 Transform 섹션을 사용하여 템플릿 콘텐츠 및 관련 파라미터를 매크로의 기본 Lambda 함수를 전달합니다. 여기서 처리된 템플릿 콘텐츠가 반환됩니다.&#xA;        " style="max-width:100%" />
         
         
    </div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>변경 세트에 제시된 변경을 먼저 검토하지 않고 처리된 템플릿에서 직접 스택을 생성하거나 업데이트하는 것이 편할 경우 <code class="code">CreateStack</code> 또는 <code class="code">UpdateStack</code> 요청 중 <code class="code">CAPABILITY_AUTO_EXPAND</code> 기능을 지정하여 그렇게 할 수 있습니다. 매크로가 수행하는 처리를 알고 있을 경우에만 매크로를 참조하는 템플릿에서 직접 스택을 생성해야 합니다.</p><p>자세한 내용을 알아보려면 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html">AWS CloudFormation API 참조</a>의 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html">CreateStack</a> 또는 <em>UpdateStack</em>을 참조하세요.</p></div></div><h2 id="template-macros-author">AWS CloudFormation 매크로 정의 생성</h2>
        <p>매크로 정의를 생성할 때 매크로 정의에서 지정된 계정의 기본 Lambda 함수를 사용할 수 있도록 하여 AWS CloudFormation에서 이를 호출하고 템플릿을 처리할 수 있습니다.</p>
        
        <h3 id="template-macros-lambda-interface">AWS CloudFormation 매크로 함수 인터페이스</h3>
            <p>매크로의 경우 AWS CloudFormation에서 다음 이벤트 매핑과 함께 기본 Lambda 함수를 호출합니다. AWS CloudFormation에서 JSON 형식으로 요청을 전송하고, 함수 응답 또한 JSON 형식일 것으로 예측합니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "region" : "<code class="replaceable">us-east-1</code>",
    "accountId" : "<code class="replaceable">$ACCOUNT_ID</code>",
    "fragment" : <span>{</span> <code class="replaceable">...</code> },
    "transformId" : "<code class="replaceable">$TRANSFORM_ID</code>",
    "params" : <span>{</span> <code class="replaceable">...</code> },
    "requestId" : "<code class="replaceable">$REQUEST_ID</code>",
    "templateParameterValues" : <span>{</span> <code class="replaceable">...</code> }
}</code></pre>

            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><b>region</b></p>
                    <p>매크로가 상주하는 리전입니다.</p>
                </li><li class="listitem"><p><b>accountId</b></p>
                    <p>매크로가 Lambda 함수를 호출하는 계정의 계정 ID입니다.</p>
                </li><li class="listitem"><p><b>fragment</b></p>
                    <p>사용자 지정 처리 사용이 가능한 템플릿 콘텐츠로 JSON 형식입니다.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem"><p><code class="code">Transform</code> 템플릿 섹션에 포함된 매크로의 경우 <code class="code">Transform</code> 섹션을 제외한 전체 템플릿입니다.</p></li><li class="listitem"><p><code class="code">Fn::Transform</code> 내장 함수 호출에 포함된 매크로의 경우 템플릿 내에 있는 내장 함수의 위치를 기반으로 한 모든 형제(및 하위) 노드가 포함됩니다. 단, <code class="code">Fn::Transform</code> 함수는 예외입니다. 자세한 내용은 <a href="#template-macros-scope">AWS CloudFormation 매크로 범위</a> 단원을 참조하십시오.</p></li></ul></div>
                </li><li class="listitem"><p><b>transformId</b></p>
                    <p>이 함수를 호출하는 매크로의 이름입니다.</p>
                </li><li class="listitem"><p><b>params</b></p>
                    <p><code class="code">Fn::Transform</code> 함수 호출의 경우 함수에 대한 지정된 모든 파라미터입니다. AWS CloudFormation에서는 함수로 전달하기 전에 이러한 파라미터를 평가하지 않습니다.</p>
                    <p><code class="code">Transform</code> 템플릿 섹션에 포함된 매크로의 경우 이 섹션은 비어 있습니다.</p>
                </li><li class="listitem"><p><b>requestId</b></p>
                    <p>이 함수를 호출하는 요청의 ID입니다.</p>
                </li><li class="listitem"><p><b>templateParameterValues</b></p>
                    <p>템플릿의 <a href="./parameters-section-structure.html">파라미터</a> 섹션에 지정된 파라미터입니다. AWS CloudFormation에서는 함수로 전달하기 전에 이러한 파라미터를 평가합니다.</p>
                </li></ul></div>
            <p>AWS CloudFormation에서는 기본 함수가 다음 JSON 형식의 응답을 반환할 것으로 예측합니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "requestId" : "<code class="replaceable">$REQUEST_ID</code>",
    "status" : "<code class="replaceable">$STATUS</code>",
    "fragment" : <span>{</span> <code class="replaceable">...</code> }
    "errorMessage": "optional error message for failures"
}</code></pre>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><b>requestId</b></p>
                    <p>이 함수를 호출하는 요청의 ID입니다. 함수 호출 시 AWS CloudFormation에서 제공하는 요청 ID와 일치해야 합니다.</p>
                </li><li class="listitem"><p><b>상태</b></p>
                    <p>요청의 상태입니다(대/소문자를 구분하지 않음). AWS CloudFormation로 설정되어야 합니다. <code class="code">success</code>에서 다른 모든 응답을 failure로 처리합니다.</p>
                </li><li class="listitem"><p><b>fragment</b></p>
                    <p>형제를 포함하여 처리된 템플릿에 포함시킬 AWS CloudFormation에 대한 처리된 템플릿 콘텐츠입니다. AWS CloudFormation에서는 Lambda 함수로 전달된 템플릿 콘텐츠를 Lambda 응답에서 수신한 템플릿 조각으로 대체합니다.</p>
                    <p>처리된 템플릿 콘텐츠는 유효한 JSON이어야 하고, 처리된 템플릿에 포함된 사항은 유효한 템플릿이 되어야 합니다.</p>
                    <p>함수가 AWS CloudFormation에서 전달하는 템플릿 콘텐츠를 실제로 변경하지 않지만 이러한 콘텐츠를 처리된 템플릿에 포함시켜야 하는 경우 함수가 해당 템플릿 콘텐츠를 AWS CloudFormation으로 반환해야 합니다.</p>
                </li><li class="listitem">
                    <p><b>errorMessage</b></p>
                    <p>변환이 실패한 이유를 설명하는 오류 메시지입니다. CloudFormation은 스택에 대한 <b>Stack details</b>(스택 세부 정보) 페이지의 <b>Events</b>(이벤트) 창에 이 오류 메시지를 표시합니다.</p>
                    <p>예를 들어, ‘Error creating change set: Transform account number::macro name failed with: error message string(변경 세트 생성 오류: <code class="replaceable">error message string</code>으로 인해 <code class="replaceable">AWS 계정 account number</code>::<code class="replaceable">macro name</code> 변환 실패)’이 표시됩니다.</p>
                </li></ul></div>
            <p>매크로 생성 시 고려 사항에 대한 자세한 내용은 <a href="#template-macros-considerations">AWS CloudFormation 매크로 정의 생성 시 고려 사항</a> 단원을 참조하십시오.</p>
         
        
        <h3 id="template-macros-permissions">AWS CloudFormation 매크로 계정 범위 및 권한</h3>
            <p>리소스로 생성된 계정에서만 매크로를 사용할 수 있습니다. 매크로의 이름은 해당 계정 내에서 고유해야 합니다. 하지만 기본 Lambda 함수에서 교차 계정 액세스를 활성화하고 여러 계정에서 해당 함수를 참조하는 매크로 정의를 생성함으로써 여러 계정에서 동일한 기능을 사용할 수 있도록 할 수 있습니다. 아래 예제에서는 3개의 계정에 동일한 Lambda 함수를 가리키는 매크로 정의가 포함되어 있습니다.</p>
            <div class="mediaobject">
                 
                    <img src="images/template-macro-accounts.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                    Lambda 함수에서 크로스 계정 액세스를 허용함으로써 AWS에서 사용자가 해당 함수를 참조하는 여러 계정에서 매크로를 생성할 수 있도록 합니다.&#xA;                " style="max-width:100%" />
                 
                 
            </div>
            <p>자세한 내용을 알아보려면 <em>AWS Lambda 개발자 안내서</em>의 <a href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-overview.html">AWS Lambda 리소스에 대한 액세스 권한 관리 개요</a>를 참조하세요.</p>
            <p>매크로 정의를 생성하려면 사용자에게 지정된 계정 내에서 스택 또는 스택 세트를 생성할 수 있는 권한이 있어야 합니다.</p>
            <p>AWS CloudFormation에서 템플릿에 포함된 매크로를 실행하려면 사용자가 기본 Lambda 함수에 대해 <code class="code">Invoke</code> 권한을 보유해야 합니다. 잠재적인 권한 상승을 방지하도록 AWS CloudFormation에서는 매크로 실행 도중 사용자를 가장합니다. 자세한 내용을 알아보려면 <em>AWS Lambda 개발자 안내서</em>의 <a href="https://docs.aws.amazon.com/lambda/latest/dg/intro-permission-model.html">Lambda 권한 모델</a>과 <em>IAM 사용 설명서</em>의 <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/list_lambda.html">AWS Lambda에 사용되는 작업 및 조건 컨텍스트 키</a>를 참조하세요.</p>
            <p><a href="./transform-aws-serverless.html">AWS::Serverless 변환</a> 및 <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">AWS::Include 변환</a> 변형은 AWS CloudFormation에서 호스팅하는 매크로입니다. 이를 사용하는 데 필요한 특별한 권한은 없으며, AWS CloudFormation의 모든 계정 내에서 사용할 수 있습니다.</p>
          
        <h3 id="template-macros-debug">AWS CloudFormation 매크로 디버깅</h3>
            <p>디버깅을 돕기 위해 매크로에 대한 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a> 리소스 유형 생성 시 <code class="code">LogGroupName</code> 및 <code class="code">LogRoleArn</code> 속성을 지정할 수 있습니다. 이러한 속성을 통해 매크로의 기본 AWS Lambda 함수 호출 시 AWS CloudFormation에서 오류 로깅 정보를 전송하는 CloudWatch 로그 그룹을 지정할 수 있으며, 로그 항목을 로그로 전송할 때 AWS CloudFormation에서 수임해야 하는 역할을 지정할 수 있습니다.</p>
          
        <h3 id="template-macros-billing">결제</h3>
            <p>매크로가 실행 중일 때 Lambda 함수의 소유자에게 해당 함수의 실행과 관련한 요금이 청구됩니다.</p>
            <p><a href="./transform-aws-serverless.html">AWS::Serverless 변환</a> 및 <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">AWS::Include 변환</a> 변형은 AWS CloudFormation에서 호스팅하는 매크로입니다. 사용에 대해 부과되는 요금은 없습니다.</p>
         
        <h3 id="template-macros-considerations">AWS CloudFormation 매크로 정의 생성 시 고려 사항</h3>
            <p>매크로 정의 생성 시 다음 사항을 염두에 두십시오.</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                
                 
                 
                 
                
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p>매크로는 AWS Lambda 사용이 가능한 AWS 리전에서만 지원됩니다. Lambda를 사용할 수 있는 리전 목록을 알아보려면 <a href="https://docs.aws.amazon.com/general/latest/gr/lambda-service.html">AWS Lambda 엔드포인트 및 할당량</a>을 참조하세요.</p></li><li class="listitem"><p>처리된 템플릿 조각은 유효한  JSON이어야 합니다.</p></li><li class="listitem"><p>모든 처리된 템플릿 조각은 스택 생성, 스택 업데이트, 스택 세트 생성 또는 스택 세트 업데이트 작업에 대한 검증 확인을 전달해야 합니다.</p></li><li class="listitem"><p>AWS CloudFormation은 매크로를 먼저 확인하고 템플릿을 처리합니다. 결과 템플릿은 유효한 JSON 또는 이어야 하며 템플릿 크기 제한을 초과해서는 안 됩니다.</p></li><li class="listitem"><p>CloudFormation이 템플릿에서 요소를 처리하는 순서가 있기 때문에 매크로는 CloudFormation에 반환하는 처리된 템플릿 콘텐츠에 모듈을 포함할 수 없습니다. 모듈에 대한 자세한 내용을 알아보려면 <em>CloudFormation CLI User Guide</em>(CloudFormation CLI 사용 설명서)의 <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/modules.html">Developing modules</a>(모듈 개발)를 참조하세요.</p></li><li class="listitem"><p>업데이트 롤백 기능을 사용하면 AWS CloudFormation은 원본 템플릿의 사본을 사용합니다. 포함된 코드 조각이 변경된 경우에도 원본 템플릿으로 롤백됩니다.</p></li><li class="listitem"><p>매크로 내에 매크로를 포함시키는 것은 매크로를 반복적으로 처리하지 않으므로 작동하지 않습니다.</p></li><li class="listitem"><p>현재 매크로에서 <code class="code">Fn::ImportValue</code> 내장 함수를 지원하지 않습니다.</p></li><li class="listitem"><p>템플릿에 포함된 내장 함수는 모든 매크로 이후 평가됩니다. 따라서 매크로가 반환하는 처리된 템플릿 콘텐츠에는 내장 함수에 대한 호출이 포함될 수 있고, 이는 평소와 같이 평가됩니다.</p></li><li class="listitem"><p>StackSets는 현재 AWS CloudFormation 매크로를 참조하는 템플릿에서 서비스 관리형 권한으로 스택 세트를 생성하거나 업데이트하는 것을 지원하지 않습니다.</p></li><li class="listitem"><p>스택 세트 템플릿에서 하나 이상의 매크로를 참조하는 경우 먼저 변경 세트의 결과 변경 사항을 먼저 검토하지 않고 처리된 템플릿에서 직접 스택 세트를 생성하거나 업데이트해야 합니다. 스택 세트를 직접 생성하거나 업데이트하려면 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> 또는 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> 작업을 사용하고 <code class="code">CAPABILITY_AUTO_EXPAND</code> 기능을 지정합니다. 매크로 처리 시 알지 못할 수도 있는 여러 리소스가 추가될 수 있습니다. 매크로를 직접 참조하는 템플릿에서 스택 세트를 생성 또는 업데이트하기 전에 매크로가 수행하는 처리 작업을 알고 있어야 합니다.</p></li><li class="listitem">
                    
                    <p>변경 세트는 현재 중첩 스택을 지원하지 않습니다. 매크로를 <em>참조하고</em> 중첩 스택을 포함하는 템플릿을 사용하여 스택을 생성 또는 업데이트하고자 하는 경우 스택을 직접 생성 또는 업데이트해야 합니다. 이를 수행하려면 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html"><code class="code">CreateStack</code></a> 또는 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html"><code class="code">UpdateStack</code></a> 작업을 사용하고 <code class="code">CAPABILITY_AUTO_EXPAND</code> 기능을 지정합니다.</p>
                </li></ul></div>
         
        <div class="procedure"><h6>AWS CloudFormation 매크로 정의를 생성하려면:</h6><ol><li>
                <p>AWS CloudFormation 템플릿을 처리하는 <a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-app.html">AWS Lambda 함수를 빌드</a>합니다.</p>
                <p>빌드한 Lambda 함수는 템플릿 콘텐츠의 처리를 수행합니다. 함수가 템플릿의 일부분부터 전체 템플릿까지 처리할 수 있습니다. 함수에서 준수해야 하는 이벤트 매핑에 대한 자세한 내용은 <a href="#template-macros-lambda-interface">AWS CloudFormation 매크로 함수 인터페이스</a> 단원을 참조하십시오. 매크로 생성 시 고려 사항에 대한 자세한 내용은 <a href="#template-macros-considerations">AWS CloudFormation 매크로 정의 생성 시 고려 사항</a> 단원을 참조하십시오.</p>
            </li><li>
                <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a> 리소스 유형을 포함하는 <a href="./template-guide.html">템플릿을 생성</a>합니다.</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem"><p><code class="code">Name</code> 및 <code class="code">FunctionName</code> 속성을 지정해야 합니다. <code class="code">FunctionName</code> 속성은 AWS CloudFormation에서 매크로 실행 시 호출할 Lambda 함수의 ARN을 지정합니다.</p></li><li class="listitem"><p>디버깅을 돕기 위해 <code class="code">LogGroupName</code> 및 <code class="code">LogRoleArn</code> 속성을 지정할 수도 있습니다.</p></li></ul></div>
            </li><li>
                <p>원하는 계정의 매크로를 포함하는 템플릿에서 <a href="./cfn-console-create-stack.html">스택을 생성</a>하거나 관리자 계정의 매크로를 참조하는 템플릿에서 <a href="./stacksets-getting-started-create.html#stacksets-getting-started-create-self-managed">자체 관리형 권한을 사용하여 스택 세트를 생성</a>한 다음 원하는 대상 계정에 스택 인스턴스를 생성합니다.</p>
                <p>AWS CloudFormation에서 매크로 정의가 포함된 스택을 생성한 이후 매크로는 해당 계정 내에서 사용 가능합니다.</p>
            </li></ol></div>


    <h2 id="template-macros-use">템플릿에서 AWS CloudFormation 매크로 사용</h2>
        <p>AWS CloudFormation에서 매크로 정의가 포함된 스택을 생성한 이후 매크로는 해당 계정 내에서 사용 가능합니다. 처리하고자 하는 템플릿 콘텐츠와 관련이 있는 적절한 위치에서 템플릿을 참조하여 매크로를 사용합니다.</p>
        <h3 id="template-macros-order">AWS CloudFormation 매크로 평가 순서</h3>
            <p><a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">AWS::Include 변환</a> 및 <a href="./transform-aws-serverless.html">AWS::Serverless 변환</a> 등과 같이 AWS CloudFormation에서 호스팅되는 변형을 포함하여 해당 템플릿의 여러 매크로를 참조할 수 있습니다.</p>
            <p>매크로는 템플릿에서의 위치를 기준으로 가장 깊이 중첩된 외부부터 가장 일반적인 순서로 평가됩니다. 템플릿의 동일한 위치에 있는 매크로는 나열된 순서를 기준으로 순차적으로 평가됩니다.</p>
            <p><code class="code">AWS::Include</code> 및 <code class="code">AWS::Transform</code>과 같은 변형은 작업 순서 및 범위 측면에서 다른 매크로와 동일하게 취급됩니다.</p>
            <p>예를 들어 아래의 템플릿 샘플에서 AWS CloudFormation은 템플릿에서 가장 깊이 중첩된 매크로인 <code class="code">PolicyAdder</code> 매크로를 먼저 평가합니다. 그런 다음 AWS CloudFormation은 <code class="code">MyMacro</code>를 평가한 후 <code class="code">Transform</code> 섹션의 <code class="code">AWS::Serverless</code> 앞에 나열된 <code class="code">AWS::Serverless</code>를 평가합니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
 Transform: [MyMacro, AWS::Serverless]
 Resources:
    WaitCondition:
      Type: AWS::CloudFormation::WaitCondition
    MyBucket:
      Type: 'AWS::S3::Bucket'
      Properties:
        BucketName: MyBucket
        Tags: [<span>{</span>"key":"value"}]
        'Fn::Transform':
          - Name: PolicyAdder
        CorsConfiguration:[]
    MyEc2Instance:
      Type: 'AWS::EC2::Instance'
      Properties:
        ImageID: "ami-123"</code></pre>
          
        
        <h3 id="template-macros-scope">AWS CloudFormation 매크로 범위</h3>
            <p>템플릿의 <code class="code">Transform</code> 섹션에서 참조되는 매크로는 해당 템플릿의 전체 콘텐츠를 처리할 수 있습니다.</p>
            <p><code class="code">Fn::Transform</code> 함수에서 참조되는 매크로는 템플릿의 <code class="code">Fn::Transform</code> 함수에 대한 형제 요소(하위 요소 포함)의 콘텐츠를 처리할 수 있습니다.</p>
            <p>예를 들어 아래 템플릿 샘플에서 <code class="code">AWS::Include</code>는 <code class="code">Fn::Transform</code> 함수의 위치를 기준으로 <code class="code">MyBucket</code> 속성을 모두 처리할 수 있습니다. <code class="code">MyMacro</code>는 <code class="code">Transform</code> 섹션에 포함되어 있으므로 전체 템플릿의 콘텐츠를 처리할 수 있습니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">
// Start of processable content for MyMacro
AWSTemplateFormatVersion: 2010-09-09 
 Transform: [MyMacro]
 Resources:
    WaitCondition:
      Type: AWS::CloudFormation::WaitCondition
    MyBucket:
      Type: 'AWS::S3::Bucket'  //Start of processable content for AWS::Include
      Properties:
        BucketName: MyBucket 
        Tags: [<span>{</span>"key":"value"}] 
        'Fn::Transform':
          - Name: 'AWS::Include'
              Parameters:
                Location: s3://<code class="replaceable">DOC-EXAMPLE-BUCKET</code>/MyFileName.yaml
        CorsConfiguration:[]   //End of processable content for AWS::Include
    MyEc2Instance:
      Type: 'AWS::EC2::Instance' 
      Properties:
        ImageID: "ami-123"
// End of processable content for MyMacro         </code></pre>
          
        
         
         <h3 id="template-macros-change-sets">변경 세트 및 AWS CloudFormation 매크로</h3>
            <p>매크로를 참조하는 템플릿을 사용하여 스택을 생성하거나 업데이트하려면 일반적으로 변경 세트를 생성하고 나서 실행하십시오. 변경 세트는 처리된 템플릿에 기초하여 CloudFormation에서 수행할 작업을 설명합니다. 매크로 처리 시 알지 못할 수도 있는 여러 리소스가 추가될 수 있습니다. 매크로가 수행하는 모든 변경을 항상 파악하려면 변경 세트를 사용합니다. 변경 세트를 검토한 후 실행하여 변경을 적용할 수 있습니다.</p>
            <p>매크로는 IAM 리소스를 템플릿에 추가할 수 있습니다. 이러한 리소스의 경우 AWS CloudFormation에서는 <a href="./using-iam-template.html#using-iam-capabilities">해당 기능을 승인</a>해야 합니다. 템플릿을 처리하기 전에는 AWS CloudFormation에서 추가되는 리소스를 알 수 없으므로 참조되는 매크로가 IAM 리소스를 포함하는지 여부에 따라 변경 세트를 생성할 때 IAM 기능을 승인해야 할 수도 있습니다. 즉, 변경 세트를 실행할 경우 AWS CloudFormation은 IAM 리소스 생성 시 필요한 기능을 갖추게 됩니다.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>중요</h6></div><div class="awsdocs-note-text"><p>스택 세트 템플릿에서 하나 이상의 매크로를 참조하는 경우 먼저 변경 세트의 결과 변경 사항을 먼저 검토하지 않고 처리된 템플릿에서 직접 스택 세트를 생성해야 합니다. 스택 세트를 직접 생성하거나 업데이트하려면 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> 또는 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> 작업을 사용하고 <code class="code">CAPABILITY_AUTO_EXPAND</code> 기능을 지정해야 합니다. 매크로를 직접 참조하는 템플릿에서 스택 세트를 생성 또는 업데이트하기 전에 매크로가 수행하는 처리 작업을 알고 있어야 합니다.</p></div></div>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>변경 세트에 제시된 변경을 먼저 검토하지 않고 처리된 템플릿에서 직접 스택을 생성하거나 업데이트하는 것이 편할 경우 <code class="code">CreateStack</code> 또는 <code class="code">UpdateStack</code> 요청 중 <code class="code">CAPABILITY_AUTO_EXPAND</code> 기능을 지정하여 그렇게 할 수 있습니다. 매크로가 수행하는 처리를 알고 있을 경우에만 매크로를 포함하는 스택 템플릿에서 직접 스택을 생성해야 합니다. 스택 세트 매크로에는 변경 세트를 사용할 수 없습니다. 스택 세트를 직접 업데이트해야 합니다.</p><p>자세한 내용은 <em>AWS CloudFormation API 참조</em>의 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html"><code class="code">CreateStack</code></a> 또는 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html"><code class="code">UpdateStack</code></a> 섹션을 참조하세요.</p></div></div>
            <p>AWS CLI를 사용하는 경우 <code class="code">package</code> 및 <code class="code">deploy</code> 명령을 사용하여 매크로를 참조하는 템플릿에서 스택 시작에 필요한 단계 수를 줄일 수 있습니다. 자세한 내용을 알아보려면 <em>AWS Lambda 개발자 안내서</em>의 <a href="https://docs.aws.amazon.com/lambda/latest/dg/deploying-lambda-apps.html">Lambda 기반 애플리케이션 배포</a>를 참조하세요.</p>
         
   
        <h3 id="template-macros-template-stage">템플릿 스테이지와 CloudFormation 매크로</h3>
            <p>템플릿의 <em>단계</em>는 템플릿이 사용자가 제출한 원본 템플릿인지 아니면 AWS CloudFormation에서 매크로를 처리한 템플릿인지를 나타냅니다.</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><code class="code">Original</code>: 사용자가 스택 또는 스택 세트를 생성하거나 업데이트하기 위해 최초로 제출한 템플릿입니다.</p></li><li class="listitem"><p><code class="code">Processed</code>: AWS CloudFormation에서 참조된 매크로 처리 이후 스택 또는 스택 생성을 생성하거나 업데이트할 때 사용하는 템플릿입니다. 원본 템플릿이 YAML 형식인 경우에도 처리된 템플릿은 JSON 형식입니다.</p></li></ul></div>
            <p>스택 문제 해결 시 처리된 템플릿을 사용합니다. 템플릿이 매크로를 참조하지 않는 경우 원본 템플릿과 처리된 템플릿이 동일합니다.</p>
            <p>AWS CloudFormation <a href="./cfn-console-view-stack-data-resources.html">콘솔</a> 또는 <a href="./using-cfn-get-template.html">AWS CLI</a>를 사용하여 스택 템플릿의 스테이지를 볼 수 있습니다.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p><code class="code">CreateStack</code>, <code class="code">UpdateStack</code> 또는 <code class="code">ValidateTemplate</code>으로 직접 전달될 경우 처리되는 스택 템플릿의 최대 크기는 51,200바이트이고, Amazon S3 템플릿 URL을 사용하여 S3 객체로 처리될 경우에는 1MB입니다. 그러나 처리 중 CloudFormation은 템플릿에 포함된 매크로를 연속적으로 처리할 때 템플릿의 임시 상태를 업데이트합니다. 이 때문에 <em>처리 중</em> 템플릿의 크기가 전체 처리된 템플릿의 허용 크기를 일시적으로 초과할 수 있습니다. CloudFormation은 이러한 프로세스 내 템플릿에 대한 일부 버퍼를 허용합니다. 그러나 처리되는 스택 템플릿의 최대 허용 크기를 고려하여 템플릿과 매크로를 설계해야 합니다.</p><p>템플릿을 처리할 때 CloudFormation이 <code class="code">Transformation data limit exceeded</code> 오류를 반환할 경우, CloudFormation이 처리 중 허용하는 최대 템플릿 크기를 초과한 것입니다.</p><p>이 문제를 해결하려면 다음과 같이 해 보십시오.</p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem"><p>템플릿을 여러 개의 템플릿으로 재구성하여 처리 과정의 템플릿에 대한 최대 크기를 넘지 않도록 하십시오. 예제:</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem"><p>중첩 스택 템플릿을 사용하여 템플릿의 부분을 캡슐화합니다. 자세한 내용은 <a href="./using-cfn-nested-stacks.html">중첩 스택 작업</a> 단원을 참조하십시오.</p></li><li class="listitem"><p>여러 개의 스택을 생성하고 교차 스택 참조를 사용하여 스택 간에 정보를 교환합니다. 자세한 내용은 <a href="./walkthrough-crossstackref.html">연습: 다른 AWS CloudFormation 스택의 리소스 출력 참조</a> 단원을 참조하십시오.</p></li></ul></div>
                    </li><li class="listitem"><p>특정 매크로가 반환하는 템플릿 조각의 크기를 줄입니다. CloudFormation은 매크로가 반환한 조각의 내용을 변경하지 않습니다.</p></li></ul></div></div></div>
         
        
        <div class="procedure"><h6>템플릿에서 AWS CloudFormation 매크로를 사용하려면</h6><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>AWS CloudFormation에서 템플릿에 참조된 매크로를 실행하려면 사용자가 기본 Lambda 함수에 대해 <code class="code">Invoke</code> 권한을 보유해야 합니다. 자세한 내용을 알아보려면 <em>AWS Lambda 개발자 안내서</em>의 <a href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-overview.html">AWS Lambda 리소스에 대한 액세스 권한 관리 개요</a>를 참조하세요.</p></div></div><ol><li>
                <p>참조를 템플릿의 매크로에 포함시킵니다.</p>
                <div class="itemizedlist">
                     
                      
                <ul class="itemizedlist"><li class="listitem">
                        <p>템플릿 조각을 처리하려면 처리하고자 하는 템플릿 콘텐츠과 관련이 있는 위치에 있는 <code class="code"><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></code> 함수의 매크로를 참조합니다.</p>
                    </li><li class="listitem">
                        <p>전체 템플릿을 처리하려면 템플릿의 <a href="./transform-section-structure.html">변환</a> 섹션에 있는 매크로를 참조합니다.</p>
                    </li></ul></div>
            </li><li>
                <p>템플릿을 사용하여 <a href="./using-cfn-updating-stacks-changesets-create.html">변경 세트를 생성</a>합니다.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>중요</h6></div><div class="awsdocs-note-text"><p>스택 세트 템플릿에서 하나 이상의 매크로를 참조하는 경우 먼저 변경 세트의 결과 변경 사항을 먼저 검토하지 않고 처리된 템플릿에서 직접 스택 세트를 생성해야 합니다. 스택 세트를 직접 생성하거나 업데이트하려면 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> 또는 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> 작업을 사용하고 <code class="code">CAPABILITY_AUTO_EXPAND</code> 기능을 지정해야 합니다. 매크로를 직접 참조하는 템플릿에서 스택 세트를 생성 또는 업데이트하기 전에 매크로가 수행하는 처리 작업을 알고 있어야 합니다.</p></div></div>
            </li><li>
                <p><a href="./using-cfn-updating-stacks-changesets-execute.html">변경 세트를 검토 후 실행합니다</a>.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>중요</h6></div><div class="awsdocs-note-text"><p>스택 세트 템플릿에서 하나 이상의 매크로를 참조하는 경우 먼저 변경 세트의 결과 변경 사항을 먼저 검토하지 않고 처리된 템플릿에서 직접 스택 세트를 생성해야 합니다. 스택 세트를 직접 생성하거나 업데이트하려면 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> 또는 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> 작업을 사용하고 <code class="code">CAPABILITY_AUTO_EXPAND</code> 기능을 지정해야 합니다. 매크로를 직접 참조하는 템플릿에서 스택 세트를 생성 또는 업데이트하기 전에 매크로가 수행하는 처리 작업을 알고 있어야 합니다.</p></div></div>
            </li></ol></div>

     
        <h2 id="template-macros-examples-list">매크로 예제</h2>
        <p>이 설명서에 있는 <a href="./macros-example.html">매크로 예제: 매크로 생성 및 사용</a> 연습에 추가로 GitHub의 <a href="https://github.com/awslabs" rel="noopener noreferrer" target="_blank"><span>Amazon Web Services - Labs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 리포지토리의 <a href="https://github.com/awslabs/aws-cloudformation-templates/tree/master/aws/services/CloudFormation/MacrosExamples/" rel="noopener noreferrer" target="_blank"><span>매크로 예제</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 섹션에서 소스 코드 및 템플릿을 포함한 예제 매크로를 확인할 수 있습니다. 이러한 예제는 교육용으로 있는 그대로 제공됩니다.</p>
    <h2 id="template-macros-seealso">다음 사항도 참조하십시오.</h2>
        <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></p>

        <p><a href="./transform-section-structure.html">변환</a></p>
        <p><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></p>
        
        <p><a href="./transform-aws-serverless.html">AWS::Serverless 변환</a></p>
        <p><a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">AWS::Include 변환</a></p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="주의" /> <strong>javascript가 브라우저에서 비활성화되거나 사용이 불가합니다.</strong></p><p>AWS 설명서를 사용하려면 Javascript가 활성화되어야 합니다. 지침을 보려면 브라우저의 도움말 페이지를 참조하십시오.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">문서 규칙</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./crpg-ref-requesttypes-update.html">업데이트</div><div id="next" class="next-link" accesskey="n" href="./macros-example.html">매크로 예제: 매크로 생성 및 사용</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 예</div><div class="content"><p>칭찬해 주셔서 감사합니다!</p><p>잠깐 시간을 내어 좋았던 부분을 알려 주시면 더 열심히 만들어 보겠습니다.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 아니요</div><div class="content"><p>이 페이지에 작업이 필요하다는 점을 알려 주셔서 감사합니다. 실망시켜 드려 죄송합니다.</p><p>잠깐 시간을 내어 설명서를 향상시킬 수 있는 방법에 대해 말씀해 주십시오.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>