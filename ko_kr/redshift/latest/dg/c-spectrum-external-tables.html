<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ko-KR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Redshift Spectrum용 외부 테이블 생성 - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-spectrum-external-tables" /><meta name="default_state" content="c-spectrum-external-tables" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html" /><meta name="description" content="외부 스키마에서 외부 테이블을 생성합니다. 외부 테이블을 생성하려면 외부 스키마의 소유자이거나 수퍼유저여야 합니다. 외부 스키마의 소유권을 이전하려면 를 사용해 소유자를 변경합니다. 다음 예에서는 spectrum_schema 스키마의 소유자를 newowner 로 바꿉니다." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="데이터베이스 개발자 안내서" /><meta name="abstract" content="페타바이트 규모의 엔터프라이즈급 완전관리형 데이터 웨어하우징 서비스인 Amazon Redshift로 데이터 웨어하우스를 생성하고 관리합니다." /><meta name="guide-locale" content="ko_kr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-tables.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="데이터베이스 개발자 안내서" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="데이터베이스 개발자 안내서" /><meta id="panorama-serviceConsolePage" value="Redshift Spectrum용 외부 테이블 생성" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Redshift Spectrum용 외부 테이블 생성 - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c-spectrum-external-tables" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,데이터 웨어하우스,샘플 데이터,데이터베이스,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "데이터베이스 개발자 안내서",
        "item" : "https://docs.aws.amazon.com/ko_kr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon Redshift Spectrum을 사용하여 외부 데이터 쿼리",
        "item" : "https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Redshift Spectrum용 외부 테이블 생성",
        "item" : "https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c-spectrum-external-tables" target="_blank" rel="noopener noreferrer" title="pdf-tooltip"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">aws-documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">데이터베이스 개발자 안내서</a></div><div id="page-toc-src"><a href="#c-spectrum-external-tables-pseudocolumns">가상 열</a><a href="#c-spectrum-external-tables-partitioning">Redshift Spectrum 외부 테이블 파티셔닝</a><a href="#c-spectrum-column-mapping-orc">ORC 열에 매핑</a><a href="#c-spectrum-column-mapping-hudi">Hudi에서 관리되는 데이터에 대한 외부 테이블 생성</a><a href="#c-spectrum-column-mapping-delta">Delta Lake 데이터에 대한 외부 테이블 생성</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c-spectrum-external-tables">Redshift Spectrum용 외부 테이블 생성</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p></p><p>외부 스키마에서 외부 테이블을 생성합니다. 외부 테이블을 생성하려면 외부 스키마의 소유자이거나 수퍼유저여야 합니다. 외부 스키마의 소유권을 이전하려면 <a href="./r_ALTER_SCHEMA.html">ALTER SCHEMA</a>를 사용해 소유자를 변경합니다. 다음 예에서는<code class="code">spectrum_schema</code> 스키마의 소유자를 <code class="code">newowner</code>로 바꿉니다.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">alter schema spectrum_schema owner to newowner;</code></pre><p>Redshift Spectrum 쿼리를 실행하는 데 필요한 권한은 다음과 같습니다.</p><div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>스키마에 대한 사용 권한 </p>
         </li><li class="listitem">
            <p>현재 데이터베이스에서 임시 테이블을 생성할 수 있는 권한 </p>
         </li></ul></div><p>다음 예에서는 <code class="code">spectrum_schema</code> 스키마에 대한 사용 권한을 <code class="code">spectrumusers</code> 사용자 그룹에 부여합니다.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">grant usage on schema spectrum_schema to group spectrumusers;</code></pre><p>다음 예에서는 <code class="code">spectrumdb</code> 데이터베이스에 대한 임시 권한을 <code class="code">spectrumusers</code> 사용자 그룹에 부여합니다.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">grant temp on database spectrumdb to group spectrumusers;</code></pre><p>외부 테이블은 Amazon Redshift, AWS Glue, Amazon Athena 또는 Apache Hive 메타스토어에서 생성할 수 있습니다. 자세한 내용은 <em>AWS Glue Developer Guide</em>의 <a href="https://docs.aws.amazon.com/glue/latest/dg/getting-started.html">Getting Started Using AWS Glue</a>, <em>Amazon Athena User Guide</em>의 <a href="https://docs.aws.amazon.com/athena/latest/ug/getting-started.html">Getting Started</a> 또는 <em>Amazon EMR Developer Guide</em>의 <a href="https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-hive.html">Apache Hive</a> 섹션을 참조하세요.</p><p>외부 테이블이 AWS Glue, Athena 또는 Hive 메타스토어에서 정의된 경우 먼저 외부 데이터베이스를 참조하는 외부 스키마를 생성합니다. 그러면 Amazon Redshift에서 테이블을 생성할 필요 없이 테이블 이름에 스키마 이름을 접두사로 사용하여 SELECT 문에서 외부 테이블을 참조할 수 있습니다. 자세한 내용은 <a href="./c-spectrum-external-schemas.html">Amazon Redshift Spectrum용 외부 스키마 생성</a> 섹션을 참조하세요.</p><p>Amazon Redshift가 AWS Glue Data Catalog의 테이블을 볼 수 있도록 하려면 Amazon Redshift IAM 역할에 <code class="code">glue:GetTable</code>을 추가합니다. 그렇지 않은 경우 다음과 같은 오류가 발생할 수 있습니다.</p><pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">RedshiftIamRoleSession is not authorized to perform: glue:GetTable on resource: *;</code></pre><p>예를 들어 Athena 외부 카탈로그에서 정의된 <code class="code">lineitem_athena</code>라는 외부 테이블이 있다고 가정해 봅시다. 이 경우, 이름이 <code class="code">athena_schema</code>인 외부 테이블을 정의한 후 다음 SELECT 문을 사용해 테이블을 쿼리할 수 있습니다.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select count(*) from athena_schema.lineitem_athena;</code></pre><p>Amazon Redshift에서 외부 테이블을 정의하려면 <a href="./r_CREATE_EXTERNAL_TABLE.html">CREATE EXTERNAL TABLE</a> 명령을 사용합니다. 외부 테이블 문은 테이블 열, 데이터 파일 형식, Amazon S3에서의 데이터 위치를 정의합니다. Redshift Spectrum은 지정된 폴더에 있는 파일과 하위 폴더를 모두 스캔합니다. Redshift Spectrum은 숨겨진 파일과 마침표, 밑줄 또는 해시 표시( . , _, 또는 #)로 시작하거나 물결표(~)로 끝나는 파일은 무시합니다.</p><p>다음 예에서는 <code class="code">spectrum</code>이라는 Amazon Redshift 외부 스키마에서 SALES로 명명된 테이블을 생성합니다. 데이터는 탭으로 구분된 텍스트 파일입니다.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external table spectrum.sales(
salesid integer,
listid integer,
sellerid integer,
buyerid integer,
eventid integer,
dateid smallint,
qtysold smallint,
pricepaid decimal(8,2),
commission decimal(8,2),
saletime timestamp)
row format delimited
fields terminated by '\t'
stored as textfile
location 's3://redshift-downloads/tickit/spectrum/sales/'
table properties ('numRows'='172000');</code></pre><p>외부 테이블을 보려면 <a href="./r_SVV_EXTERNAL_TABLES.html">SVV_EXTERNAL_TABLES</a> 시스템 뷰를 쿼리하십시오.</p>
         <h2 id="c-spectrum-external-tables-pseudocolumns">가상 열</h2>

         
         <p>기본적으로 Amazon Redshift에서는 가상 열 <code class="code">$path</code>, <code class="code">$size</code> 및 <code class="code">$spectrum_oid</code>가 있는 외부 테이블을 생성합니다. <code class="code">$path</code> 열을 선택하면 Amazon S3에 있는 데이터 파일 경로를 확인하고 <code class="code">$size</code> 열을 선택하여 쿼리에서 반환한 각 행에 대한 데이터 파일의 크기를 확인할 수 있습니다. <code class="code">$spectrum_oid</code> 열은 Redshift Spectrum으로 상관 쿼리를 수행하는 기능을 제공합니다. 예시는 <a href="./c_performing-correlated-subqueries-spectrum.html">예: Redshift Spectrum에서 상관 하위 쿼리 수행</a>에서 확인하십시오. <code class="code">$path</code>, <code class="code">$size</code> 및 <code class="code">$spectrum_oid</code> 열 이름은 큰따옴표로 구분해야 합니다. SELECT * 절은 가상 열을 반환하지 않습니다. 다음 예와 같이 쿼리에 <code class="code">$path</code>, <code class="code">$size</code> 및 <code class="code">$spectrum_oid</code> 열 이름을 명시적으로 포함해야 합니다.</p>
         
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="SQL ">select "$path", "$size", "$spectrum_oid"
from spectrum.sales_part where saledate = '2008-12-01';</code></pre>
         
         <p><code class="code">spectrum_enable_pseudo_columns</code> 구성 파라미터를 <code class="code">false</code>로 설정하여 세션에 대해 가상 열 생성을 비활성화할 수 있습니다. 자세한 내용은 <a href="./r_spectrum_enable_pseudo_columns.html">spectrum_enable_pseudo_columns</a> 섹션을 참조하세요. <code class="code">enable_spectrum_oid</code>를 <code class="code">false</code>로 설정하여 <code class="code">$spectrum_oid</code> 가상 열만 비활성화할 수도 있습니다. 자세한 내용은 <a href="./r_spectrum_enable_spectrum_oid.html">enable_spectrum_oid</a> 섹션을 참조하세요. 그러나 <code class="code">$spectrum_oid</code> 가상 열을 비활성화하면 Redshift Spectrum과의 상관 쿼리에 대한 지원도 비활성화됩니다.</p>
         <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>중요</h6></div><div class="awsdocs-note-text"><p><code class="code">$size</code>, <code class="code">$path</code> 또는 <code class="code">$spectrum_oid</code>를 선택하면 Redshift Spectrum이 Amazon S3의 데이터 파일을 스캔해 결과 집합의 크기를 결정하기 때문에 요금이 발생합니다. 자세한 내용은 <a href="https://aws.amazon.com/redshift/pricing/" rel="noopener noreferrer" target="_blank"><span>Amazon Redshift 요금</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 섹션을 참조하세요.</p></div></div>
          
            <h3 id="c-spectrum-external-tables-pseudocolumns-example">가상 열 예제</h3>

            <p>다음은 외부 테이블의 관련 데이터 파일의 총 크기를 반환하는 예입니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select distinct "$path", "$size"
from spectrum.sales_part;

 $path                                                                    | $size
--------------------------------------------------------------------------+-------
s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-01/ |  1616
s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-02/ |  1444
s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-03/ |  1644</code></pre>
          
       
         <h2 id="c-spectrum-external-tables-partitioning">Redshift Spectrum 외부 테이블 파티셔닝</h2>

         <p>데이터를 파티셔닝할 때 파티션 키를 기준으로 필터링하여 Redshift가 스캔하는 데이터 양을 제한할 수 있습니다. 어떤 키를 기준으로도 데이터를 분할할 수 있습니다.</p>
         <p>일반적인 관행은 시간을 기준으로 데이터를 파티셔닝하는 것입니다. 예를 들어 연, 월, 일, 시를 기준으로 파티셔닝할 수 있습니다. 데이터가 여러 원본에서 오는 경우, 데이터 원본 식별자와 날짜를 기준으로 파티셔닝할 수 있습니다.</p>
         <p>다음 절차에서는 데이터를 파티셔닝하는 방법에 대해 설명합니다.</p>
         <div class="procedure"><h6>데이터를 파티셔닝하려면</h6><ol><li>
               <p>파티션 키에 따라 Amazon S3의 폴더에 데이터를 저장합니다.</p>
               <p>파티션 값마다 폴더를 하나씩 만들고 파티션 키와 값을 사용하여 폴더 이름을 지정합니다. 예를 들어 날짜를 기준으로 파티셔닝하는 경우, 폴더의 이름은 <code class="code">saledate=2017-04-01</code>, <code class="code">saledate=2017-04-02</code> 등이 될 수 있습니다. Redshift Spectrum은 파티션 폴더에 있는 파일과 하위 폴더를 모두 스캔합니다. Redshift Spectrum은 숨겨진 파일과 마침표, 밑줄 또는 해시 표시( . , _, 또는 #)로 시작하거나 물결표(~)로 끝나는 파일은 무시합니다.</p>

            </li><li>
               <p>외부 테이블을 만들고 PARTITIONED BY 절에서 파티션 키를 지정합니다.</p>
               <p>파티션 키가 테이블 열의 이름이어서는 안 됩니다. 데이터 형식은 SMALLINT, INTEGER, BIGINT, DECIMAL, REAL, DOUBLE PRECISION, BOOLEAN, CHAR, VARCHAR, DATE 또는 TIMESTAMP 데이터 형식일 수 있습니다.</p>
            </li><li>
               <p>파티션을 추가합니다.</p>
               <p><a href="./r_ALTER_TABLE.html">ALTER TABLE</a> … ADD PARTITION을 사용하여 각 파티션을 추가하고 파티션 열 및 키 값과 Amazon S3에서의 파티션 폴더 위치를 지정합니다. 단일 ALTER TABLE … ADD 문을 사용하여 여러 파티션을 추가할 수 있습니다. 다음 예는 <code class="code">'2008-01'</code> 및 <code class="code">'2008-03'</code>에 대한 파티션을 추가합니다.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">alter table spectrum.sales_part add
partition(saledate='2008-01-01') 
location 's3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-01/'
partition(saledate='2008-03-01') 
location 's3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-03/';</code></pre>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>AWS Glue 카탈로그를 사용하는 경우 단일 ALTER TABLE 문을 사용하여 파티션을 최대 100개까지 추가할 수 있습니다.</p></div></div>
            </li></ol></div>

          
            <h3 id="c-spectrum-external-tables-partitioning-example">데이터 파티셔닝 예제</h3>


            <p>이 예에서는 하나의 파티션 키로 분할된 외부 테이블 하나와 두 개의 파티션 키로 분할된 외부 테이블 하나를 생성합니다.</p>

            <p>이 예의 샘플 데이터는 인증된 모든 AWS 사용자에게 읽기 권한을 부여하는 Amazon S3 버킷에 위치합니다. 클러스터와 외부 데이터 파일은 같은 AWS 리전에 있어야 합니다. 샘플 데이터 버킷은 미국 동부(버지니아 북부) 리전(us-east-1)에 있습니다. Redshift Spectrum을 사용하여 데이터에 액세스하려면 클러스터도 us-east-1에 있어야 합니다. Amazon S3에서 폴더를 나열하려면 다음 명령을 실행합니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws s3 ls s3://redshift-downloads/tickit/spectrum/sales_partition/</code></pre>
            <pre class="screen">PRE saledate=2008-01/
PRE saledate=2008-03/
PRE saledate=2008-04/
PRE saledate=2008-05/
PRE saledate=2008-06/
PRE saledate=2008-12/</pre>
            <p>아직 외부 스키마가 없는 경우에는 다음 명령을 실행합니다. AWS Identity and Access Management(IAM) 역할의 Amazon 리소스 이름(ARN)을 대체합니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum
from data catalog
database 'spectrumdb'
iam_role 'arn:aws:iam::123456789012:role/myspectrumrole'
create external database if not exists;</code></pre>
             
               <h4 id="c-spectrum-external-tables-single-partition-example">예 1: 단일 파티션 키로 분할</h4>
               <p>이 다음 예에서는 월 기준으로 분할된 외부 테이블을 만듭니다.</p>
               <p>월 기준으로 분할된 외부 테이블을 만들려면 다음 명령을 실행합니다.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external table spectrum.sales_part(
salesid integer,
listid integer,
sellerid integer,
buyerid integer,
eventid integer,
dateid smallint,
qtysold smallint,
pricepaid decimal(8,2),
commission decimal(8,2),
saletime timestamp)
partitioned by (saledate char(10))
row format delimited
fields terminated by '|'
stored as textfile
location 's3://redshift-downloads/tickit/spectrum/sales_partition/'
table properties ('numRows'='172000');</code></pre>
               <p>파티션을 추가하려면 다음 ALTER TABLE 명령을 실행합니다.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">alter table spectrum.sales_part add
partition(saledate='2008-01') 
location 's3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-01/'

partition(saledate='2008-03') 
location 's3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-03/'

partition(saledate='2008-04') 
location 's3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-04/';</code></pre>
               <p>파티셔닝된 테이블에서 데이터를 선택하려면 다음 쿼리를 실행합니다.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select top 5 spectrum.sales_part.eventid, sum(spectrum.sales_part.pricepaid) 
from spectrum.sales_part, event
where spectrum.sales_part.eventid = event.eventid
  and spectrum.sales_part.pricepaid &gt; 30
  and saledate = '2008-01'
group by spectrum.sales_part.eventid
order by 2 desc;</code></pre>

               <pre class="screen">eventid | sum     
--------+---------
   4124 | 21179.00
   1924 | 20569.00
   2294 | 18830.00
   2260 | 17669.00
   6032 | 17265.00</pre>
               <p>외부 테이블 파티션을 보려면 <a href="./r_SVV_EXTERNAL_PARTITIONS.html">SVV_EXTERNAL_PARTITIONS</a> 시스템 뷰를 쿼리하십시오.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select schemaname, tablename, values, location from svv_external_partitions
where tablename = 'sales_part';</code></pre>

               <pre class="screen">schemaname | tablename  | values      | location                                                                
-----------+------------+-------------+-------------------------------------------------------------------------
spectrum   | sales_part | ["2008-01"] | s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-01
spectrum   | sales_part | ["2008-03"] | s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-03
spectrum   | sales_part | ["2008-04"] | s3://redshift-downloads/tickit/spectrum/sales_partition/saledate=2008-04</pre>
             
             
               <h4 id="c-spectrum-external-tables-multi-partition-example">예 2: 여러 파티션 키로 분할</h4>

               <p><code class="code">date</code> 및 <code class="code">eventid</code>로 분할된 외부 테이블을 만들려면 다음 명령을 실행합니다.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external table spectrum.sales_event(
salesid integer,
listid integer,
sellerid integer,
buyerid integer,
eventid integer,
dateid smallint,
qtysold smallint,
pricepaid decimal(8,2),
commission decimal(8,2),
saletime timestamp)
partitioned by (salesmonth char(10), event integer)
row format delimited
fields terminated by '|'
stored as textfile
location 's3://redshift-downloads/tickit/spectrum/salesevent/'
table properties ('numRows'='172000');</code></pre>
               <p>파티션을 추가하려면 다음 ALTER TABLE 명령을 실행합니다.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">alter table spectrum.sales_event add
partition(salesmonth='2008-01', event='101') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-01/event=101/'

partition(salesmonth='2008-01', event='102') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-01/event=102/'

partition(salesmonth='2008-01', event='103') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-01/event=103/'

partition(salesmonth='2008-02', event='101') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-02/event=101/'

partition(salesmonth='2008-02', event='102') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-02/event=102/'

partition(salesmonth='2008-02', event='103') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-02/event=103/'

partition(salesmonth='2008-03', event='101') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-03/event=101/'

partition(salesmonth='2008-03', event='102') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-03/event=102/'

partition(salesmonth='2008-03', event='103') 
location 's3://redshift-downloads/tickit/spectrum/salesevent/salesmonth=2008-03/event=103/';</code></pre>
               <p>다음 쿼리를 실행하여 파티셔닝된 테이블에서 데이터를 선택합니다.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select spectrum.sales_event.salesmonth, event.eventname, sum(spectrum.sales_event.pricepaid) 
from spectrum.sales_event, event
where spectrum.sales_event.eventid = event.eventid
  and salesmonth = '2008-02'
	and (event = '101'
	or event = '102'
	or event = '103')
group by event.eventname, spectrum.sales_event.salesmonth
order by 3 desc;</code></pre>
               <pre class="screen">salesmonth | eventname       | sum    
-----------+-----------------+--------
2008-02    | The Magic Flute | 5062.00
2008-02    | La Sonnambula   | 3498.00
2008-02    | Die Walkure     |  534.00</pre>
             
          
       
         <h2 id="c-spectrum-column-mapping-orc">외부 테이블 열을 ORC 열에 매핑</h2>
         <p>Amazon Redshift Spectrum은 외부 테이블을 사용하여 ORC 형식의 파일에서 데이터를 쿼리합니다. ORC(Optimized Row Columnar) 형식은 중첩된 데이터 구조를 지원하는 컬럼 방식 스토리지 파일 형식입니다. 중첩 데이터 쿼리에 대한 자세한 내용은 <a href="./tutorial-query-nested-data.html#tutorial-nested-data-overview">Amazon Redshift Spectrum을 사용한 중첩 데이터에 대한 쿼리</a> 섹션을 참조하세요.</p>
         <p>ORC 파일의 데이터를 참조하는 외부 테이블을 만드는 경우 외부 테이블의 각 열을 ORC 데이터의 열에 매핑합니다. 이렇게 하려면 다음 방법 중 하나를 사용하십시오.</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p><a href="#orc-mapping-by-position">위치별 매핑</a></p>
            </li><li class="listitem">
               <p><a href="#orc-mapping-by-name">열 이름별 매핑</a> </p>
            </li></ul></div>
         <p>기본값은 열 이름별 매핑입니다.</p>
          
            <h3 id="orc-mapping-by-position">위치별 매핑</h3>
            <p>위치별 매핑을 사용하면 외부 테이블에 정의된 첫 번째 열이 ORC 데이터 파일의 첫 번째 열에 매핑되고 두 번째 열은 두 번째 열에 매핑됩니다. 위치별 매핑을 사용하려면 외부 테이블과 ORC 파일의 열 순서가 일치해야 합니다. 열의 순서가 일치하지 않으면 열을 이름별로 매핑할 수 있습니다.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>중요</h6></div><div class="awsdocs-note-text"><p>이전 릴리스에서는 기본적으로 위치별 매핑을 사용했습니다. 기존 테이블에 대해 위치별 매핑을 계속 사용해야 하는 경우, 다음 예와 같이 테이블 속성 <code class="code">orc.schema.resolution</code>을 <code class="code">position</code>으로 설정합니다.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">alter table spectrum.orc_example 
set table properties('orc.schema.resolution'='position'); </code></pre></div></div>
            <p>예를 들어 <code class="code">SPECTRUM.ORC_EXAMPLE</code> 테이블은 다음과 같이 정의됩니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external table spectrum.orc_example(
int_col int,
float_col float,
nested_col struct&lt;
  "int_col" : int,
  "map_col" : map&lt;int, array&lt;float &gt;&gt;
   &gt;
) stored as orc
location 's3://example/orc/files/';</code></pre>
            <p>이 테이블 구조는 다음과 같이 추상화될 수 있습니다.</p>
            <pre class="screen">• 'int_col' : int
• 'float_col' : float
• 'nested_col' : struct
   o 'int_col' : int
   o 'map_col' : map
      - key : int
      - value : array
         - value : float</pre>
            <p>기본 ORC 파일의 파일 구조는 다음과 같습니다.</p>
            <pre class="screen">• ORC file root(id = 0)
   o 'int_col' : int (id = 1)
   o 'float_col' : float (id = 2)
   o 'nested_col' : struct (id = 3)
      - 'int_col' : int (id = 4)
      - 'map_col' : map (id = 5)
         - key : int (id = 6)
         - value : array (id = 7)
            - value : float (id = 8)</pre>
            <p>이 예에서는 외부 테이블의 각 열을 위치별로 ORC 파일의 열에 정확하게 매핑할 수 있습니다. 다음은 매핑을 보여줍니다.</p>

            <div class="table-container"><div class="table-contents"><table id="w319aac29c19c45c11c21"><thead>
                     <tr>
                        <th>외부 테이블 열 이름</th>
                        <th>ORC 열 ID</th>
                        <th>ORC 열 이름</th>
                     </tr>
                  </thead>
                     <tr>
                        <td tabindex="-1">int_col</td>
                        <td tabindex="-1">1</td>
                        <td tabindex="-1">int_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">float_col</td>
                        <td tabindex="-1">2</td>
                        <td tabindex="-1">float_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col</td>
                        <td tabindex="-1">3</td>
                        <td tabindex="-1">nested_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col.int_col</td>
                        <td tabindex="-1">4</td>
                        <td tabindex="-1">int_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col.map_col</td>
                        <td tabindex="-1">5</td>
                        <td tabindex="-1">map_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col.map_col.key</td>
                        <td tabindex="-1">6</td>
                        <td tabindex="-1">NA</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col.map_col.value</td>
                        <td tabindex="-1">7</td>
                        <td tabindex="-1">NA</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col.map_col.value.item</td>
                        <td tabindex="-1">8</td>
                        <td tabindex="-1">NA</td>
                     </tr>
                  </table></div></div>
          
          
            <h3 id="orc-mapping-by-name">열 이름별 매핑</h3>
            <p>이름 매핑을 사용하면 동일한 레벨에 있는 ORC 파일에서 같은 이름으로 명명된 열에 외부 테이블의 열을 매핑할 수 있습니다.</p>
            <p>예를 들어, 앞의 예인 <code class="code">SPECTRUM.ORC_EXAMPLE</code>의 테이블을 다음 파일 구조를 사용하는 ORC 파일과 매핑하려고 한다고 가정합니다.</p>
            <pre class="screen">• ORC file root(id = 0)
   o 'nested_col' : struct (id = 1)
      - 'map_col' : map (id = 2)
         - key : int (id = 3)
         - value : array (id = 4)
            - value : float (id = 5)
      - 'int_col' : int (id = 6)
   o 'int_col' : int (id = 7)
   o 'float_col' : float (id = 8)</pre>

            <p>Redshift Spectrum은 위치 매핑을 사용하여 다음과 같은 매핑을 시도합니다.</p>
            <div class="table-container"><div class="table-contents"><table id="w319aac29c19c45c13c11"><thead>
                     <tr>
                        <th>외부 테이블 열 이름</th>
                        <th>ORC 열 ID</th>
                        <th>ORC 열 이름</th>
                     </tr>
                  </thead>
                     <tr>
                        <td tabindex="-1">int_col</td>
                        <td tabindex="-1">1</td>
                        <td tabindex="-1">struct</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">float_col</td>
                        <td tabindex="-1">7</td>
                        <td tabindex="-1">int_col</td>
                     </tr>
                     <tr>
                        <td tabindex="-1">nested_col</td>
                        <td tabindex="-1">8</td>
                        <td tabindex="-1">float_col</td>
                     </tr>
                  </table></div></div>
            <p>앞의 위치 매핑을 사용하여 테이블을 쿼리할 경우 구조가 다르기 때문에 유형 검증 시 SELECT 명령이 실패합니다.</p>
            <p>열 이름 매핑을 사용하여 이전 예에 표시된 두 파일 구조에 동일한 외부 테이블을 매핑할 수 있습니다. 테이블 열 <code class="code">int_col</code>, <code class="code">float_col</code> 및 <code class="code">nested_col</code>은 열 이름별 매핑을 통해 ORC 파일에서 같은 이름을 가진 열에 매핑됩니다. 외부 테이블의 <code class="code">nested_col</code> 열은 <code class="code">map_col</code> 및 <code class="code">int_col</code> 하위 열이 있는 <code class="code">struct</code> 열입니다. 또한 하위 열은 열 이름별로 ORC 파일의 해당 열과 올바르게 매핑됩니다.</p>

          
       
      <h2 id="c-spectrum-column-mapping-hudi">Apache Hudi에서 관리되는 데이터에 대한 외부 테이블 생성</h2>
      <p>Apache Hudi CoW(쓸 때 복사) 형식으로 데이터를 쿼리하려면 Amazon Redshift Spectrum 외부 테이블을 사용합니다. Hudi Copy On Write 테이블은 Amazon S3에 저장된 Apache Parquet 파일의 모음입니다. 삽입, 삭제, upsert 쓰기 작업으로 생성 및 수정된 Apache Hudi 버전 0.5.2, 0.6.0, 0.7.0, 0.8.0, 0.9.0, 0.10.0, 0.10.1, 0.11.0, 0.11.1에서 쓸 때 복사(CoW) 테이블을 읽을 수 있습니다. 예를 들어 부트스트랩 테이블은 지원되지 않습니다. 자세한 내용은 오픈 소스 Apache Hudi 설명서의 <a href="https://hudi.apache.org/docs/next/table_types#copy-on-write-table" rel="noopener noreferrer" target="_blank"><span>Copy On Write Table</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 섹션을 참조하세요.</p>
      <p>Hudi CoW 형식의 데이터를 참조하는 외부 테이블을 생성하는 경우 외부 테이블의 각 열을 Hudi 데이터의 열에 매핑합니다. 매핑은 열별로 수행됩니다.</p>

      <p>분할 및 분할되지 않은 Hudi 테이블에 대한 데이터 정의 언어(DDL) 문은 다른 Apache Parquet 파일 형식에 대한 문과 유사합니다. Hudi 테이블의 경우 <code class="code">INPUTFORMAT</code>을 <code class="code">org.apache.hudi.hadoop.HoodieParquetInputFormat</code>으로 정의합니다. <code class="code">LOCATION</code> 파라미터는 Hudi 커밋 타임라인을 설정하는 데 필요한 <code class="code">.hoodie</code> 폴더가 포함된 Hudi 테이블 기본 폴더를 가리켜야 합니다. 경우에 따라 Hudi 테이블에 대한 SELECT 작업이 실패하고 [<strong class="errortext"><code>유효한 Hudi 커밋 타임라인 없음(No valid Hudi commit timeline found)</code></strong>] 메시지가 표시될 수 있습니다. 이러한 경우 <code class="code">.hoodie</code> 폴더가 올바른 위치에 있고 유효한 Hudi 커밋 타임라인이 포함되어 있는지 확인합니다.</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>Apache Hudi 형식은 AWS Glue Data Catalog를 사용할 때만 지원됩니다. Apache Hive 메타스토어를 외부 카탈로그로 사용할 때는 지원되지 않습니다.</p></div></div>
      <p>분할되지 않은 테이블을 정의하는 DDL의 형식은 다음과 같습니다.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE EXTERNAL TABLE <em>tbl_name</em> (<em>columns</em>)
ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
STORED AS
INPUTFORMAT 'org.apache.hudi.hadoop.HoodieParquetInputFormat'
OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat'
LOCATION 's3://<em>s3-bucket</em>/<em>prefix</em>'</code></pre>
      <p>분할된 테이블을 정의하는 DDL의 형식은 다음과 같습니다.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE EXTERNAL TABLE <em>tbl_name</em> (<em>columns</em>)
PARTITIONED BY(<em>pcolumn1</em> <em>pcolumn1-type</em>[,...])
ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
STORED AS
INPUTFORMAT 'org.apache.hudi.hadoop.HoodieParquetInputFormat'
OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat'
LOCATION 's3://<em>s3-bucket</em>/<em>prefix</em>'</code></pre>
      <p>분할된 Hudi 테이블에 파티션을 추가하려면 ALTER TABLE ADD PARTITION 명령을 실행합니다. 여기서 <code class="code">LOCATION</code> 파라미터는 파티션에 속한 파일이 있는 Amazon S3 하위 폴더를 가리킵니다.</p>
      <p>파티션을 추가하는 DDL의 형식은 다음과 같습니다.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">ALTER TABLE <em>tbl_name</em>
ADD IF NOT EXISTS PARTITION(<em>pcolumn1</em>=<em>pvalue1</em>[,...])
LOCATION 's3://<em>s3-bucket</em>/<em>prefix</em>/<em>partition-path</em>'</code></pre>
    
      <h2 id="c-spectrum-column-mapping-delta">Delta Lake에서 관리되는 데이터에 대한 외부 테이블 생성</h2>
      <p>Delta Lake 테이블의 데이터를 쿼리하려면 Amazon Redshift Spectrum 외부 테이블을 사용합니다.</p>
         <p>Redshift Spectrum에서 Delta Lake 테이블에 액세스하려면 쿼리 전에 매니페스트를 생성합니다. Delta Lake <em>매니페스트</em>에는 Delta Lake 테이블의 일관된 스냅샷을 구성하는 파일 목록이 들어 있습니다. 분할된 테이블에는 파티션당 하나의 매니페스트가 있습니다. Delta Lake 테이블은 Amazon S3에 저장된 Apache Parquet 파일의 모음입니다. 자세한 내용은 오픈 소스 Delta Lake 설명서의 <a href="https://delta.io" rel="noopener noreferrer" target="_blank"><span>Delta Lake</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 섹션을 참조하세요.</p>
      <p>Delta Lake 테이블의 데이터를 참조하는 외부 테이블을 생성하는 경우 외부 테이블의 각 열을 Delta Lake 테이블의 열에 매핑합니다. 매핑은 열 이름별로 수행됩니다.</p>
      
      <p>분할 및 분할되지 않은 Delta Lake 테이블의 DDL은 다른 Apache Parquet 파일 형식의 DDL과 유사합니다. Delta Lake 테이블에 대해 <code class="code">INPUTFORMAT</code>을 <code class="code">org.apache.hadoop.hive.ql.io.SymlinkTextInputFormat</code>으로, <code class="code">OUTPUTFORMAT</code>을 <code class="code">org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat</code>으로 정의합니다. <code class="code">LOCATION</code> 파라미터는 테이블 기본 폴더의 매니페스트 폴더를 가리켜야 합니다. Delta Lake 테이블에서 SELECT 작업이 실패하는 경우 가능한 이유는 <a href="#c-spectrum-column-mapping-delta-limitations">Delta Lake 테이블에 대한 제한 사항 및 문제 해결</a> 섹션을 참조하세요.</p>
      <p>분할되지 않은 테이블을 정의하는 DDL의 형식은 다음과 같습니다.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE EXTERNAL TABLE <em>tbl_name</em> (<em>columns</em>)
ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
STORED AS
INPUTFORMAT 'org.apache.hadoop.hive.ql.io.SymlinkTextInputFormat'
OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'
LOCATION 's3://<em>s3-bucket</em>/<em>prefix</em>/_symlink_format_manifest'</code></pre>
      <p>분할된 테이블을 정의하는 DDL의 형식은 다음과 같습니다.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE EXTERNAL TABLE <em>tbl_name</em> (<em>columns</em>)
PARTITIONED BY(<em>pcolumn1</em> <em>pcolumn1-type</em>[,...])
ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
STORED AS
INPUTFORMAT 'org.apache.hadoop.hive.ql.io.SymlinkTextInputFormat'
OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'
LOCATION 's3://<em>s3-bucket</em>&gt;/<em>prefix</em>/_symlink_format_manifest'</code></pre>
      <p>분할된 Delta Lake 테이블에 파티션을 추가하려면 ALTER TABLE ADD PARTITION 명령을 실행합니다. 여기서 <code class="code">LOCATION</code> 파라미터는 파티션의 매니페스트가 들어 있는 Amazon S3 하위 폴더를 가리킵니다.</p>
      <p>파티션을 추가하는 DDL의 형식은 다음과 같습니다.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">ALTER TABLE <em>tbl_name</em>
ADD IF NOT EXISTS PARTITION(<em>pcolumn1</em>=<em>pvalue1</em>[,...])
LOCATION
's3://<em>s3-bucket</em>/<em>prefix</em>/_symlink_format_manifest/<em>partition-path</em>'</code></pre>
      <p>또는 Delta Lake 매니페스트 파일을 직접 가리키는 DDL을 실행합니다.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">ALTER TABLE <em>tbl_name</em>
ADD IF NOT EXISTS PARTITION(<em>pcolumn1</em>=<em>pvalue1</em>[,...])
LOCATION
's3://<em>s3-bucket</em>/<em>prefix</em>/_symlink_format_manifest/<em>partition-path</em>/manifest'</code></pre>
      
       
         <h3 id="c-spectrum-column-mapping-delta-limitations">Delta Lake 테이블에 대한 제한 사항 및 문제 해결</h3>
       
      <p>Redshift Spectrum에서 Delta Lake 테이블을 쿼리할 때 다음 사항을 고려하세요.</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem"><p>매니페스트가 더 이상 존재하지 않는 스냅샷이나 파티션을 가리키는 경우 유효한 새 매니페스트가 생성될 때까지 쿼리가 실패합니다. 예를 들어 이는 기본 테이블에 대한 VACUUM 작업의 결과일 수 있습니다.</p></li><li class="listitem"><p>Delta Lake 매니페스트는 파티션 수준의 일관성만 제공합니다.</p></li></ul></div>
      <p>다음 표에서는 Delta Lake 테이블을 쿼리할 때 특정 오류에 대한 몇 가지 잠재적인 원인을 설명합니다.</p>
      <div class="table-container"><div class="table-contents"><table id="w319aac29c19c49c37"><thead>
               <tr>
                  <th>오류 메시지</th>
                  <th>가능한 원인</th>
               </tr>
            </thead>
               
               
               <tr>
                  <td tabindex="-1"><p><strong class="errortext"><code>버킷 <em>s3-bucket-1</em>의 Delta Lake 매니페스트는 버킷 <em>s3-bucket-2</em>의 항목을 포함할 수 없습니다.</code></strong></p></td>
                  <td tabindex="-1"><p>매니페스트 항목은 지정된 버킷과 다른 Amazon S3 버킷에 있는 파일을 가리킵니다.</p></td>
               </tr>
               <tr>
                  <td tabindex="-1"><p><strong class="errortext"><code>Delta Lake 파일은 동일한 폴더에 있어야 합니다.</code></strong></p></td>
                  <td tabindex="-1"><p>매니페스트 항목은 지정된 접두사와 다른 Amazon S3 접두사를 가진 파일을 가리킵니다.</p></td>
               </tr>
               <tr>
                  <td tabindex="-1"><p><strong class="errortext"><code>Delta Lake 매니페스트 <em>manifest-path</em>에 나열된 파일 <em>filename</em>을 찾을 수 없습니다.</code></strong></p></td>
                  <td tabindex="-1"><p>매니페스트에 나열된 파일을 Amazon S3에서 찾을 수 없습니다.</p></td>
               </tr>
               <tr>
                  <td tabindex="-1"><p><strong class="errortext"><code>Delta Lake 매니페스트를 가져오는 중 오류가 발생했습니다.</code></strong></p></td>
                  <td tabindex="-1"><p>Amazon S3에서 매니페스트를 찾을 수 없습니다.</p></td>
               </tr>
               <tr>
                  <td tabindex="-1"><p><strong class="errortext"><code>유효하지 않은 S3 경로입니다.</code></strong></p></td>
                  <td tabindex="-1"><p>매니페스트 파일의 항목이 유효한 Amazon S3 경로가 아니거나 매니페스트 파일이 손상되었습니다.</p></td>
               </tr>

            </table></div></div>
      
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="주의" /> <strong>javascript가 브라우저에서 비활성화되거나 사용이 불가합니다.</strong></p><p>AWS 설명서를 사용하려면 Javascript가 활성화되어야 합니다. 지침을 보려면 브라우저의 도움말 페이지를 참조하십시오.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">문서 규칙</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-spectrum-external-schemas.html">외부 스키마 생성</div><div id="next" class="next-link" accesskey="n" href="./querying-iceberg.html">Apache Iceberg 테이블 사용</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 예</div><div class="content"><p>칭찬해 주셔서 감사합니다!</p><p>잠깐 시간을 내어 좋았던 부분을 알려 주시면 더 열심히 만들어 보겠습니다.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 아니요</div><div class="content"><p>이 페이지에 작업이 필요하다는 점을 알려 주셔서 감사합니다. 실망시켜 드려 죄송합니다.</p><p>잠깐 시간을 내어 설명서를 향상시킬 수 있는 방법에 대해 말씀해 주십시오.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-tables.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>