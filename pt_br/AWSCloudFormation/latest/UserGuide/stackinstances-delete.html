<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Excluir instâncias da pilha do conjunto de pilhas - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="stackinstances-delete" /><meta name="default_state" content="stackinstances-delete" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" /><meta name="description" content="Você pode excluir instâncias de pilha de um conjunto de pilhas no AWS Management Console ou usando os comandos do AWS CloudFormation na AWS CLI. Neste procedimento, excluiremos todas as pilhas." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Excluir instâncias da pilha do conjunto de pilhas" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Excluir instâncias da pilha do conjunto de pilhas - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabalhar com o AWS CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Conceitos básicos do AWS CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-getting-started.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Excluir instâncias da pilha do conjunto de pilhas",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-getting-started.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#stackinstances-delete-console">Excluir instâncias de pilha usando o AWS Management Console</a><a href="#stackinstances-delete-cli">Excluir instâncias de pilha usando o AWS CLI</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="stackinstances-delete">Excluir instâncias da pilha do conjunto de pilhas</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Você pode excluir instâncias de pilha de um conjunto de pilhas no AWS Management Console ou usando os comandos do AWS CloudFormation na AWS CLI. Neste procedimento, excluiremos todas as pilhas.</p><p>Para um conjunto de pilhas com permissões gerenciadas pelo serviço, se você excluir instâncias de pilha de uma unidade organizacional (OU) de nível superior, a OU será removida como um destino do conjunto de pilhas.</p><div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#stackinstances-delete-console">Excluir instâncias de pilha usando o AWS Management Console</a></li><li><a href="#stackinstances-delete-cli">Excluir instâncias de pilha usando o AWS CLI</a></li></ul></div>
            <h2 id="stackinstances-delete-console">Excluir instâncias de pilha usando o AWS Management Console</h2>
            <div class="procedure"><ol><li><p>Abra o console do AWS CloudFormation em <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
                    <p>No painel de navegação, escolha <b>StackSets</b>. Na página StackSets, selecione o conjunto de pilhas criado em <a href="./stacksets-getting-started-create.html">Criar um conjunto de pilhas</a>.</p>
                </li><li>
                    <p>Com o conjunto de pilhas selecionado, escolha <b>Delete stacks from StackSet (Excluir pilhas do StackSet)</b> no menu <b>Actions (Ações)</b>.</p>
                    <div class="mediaobject">
                         
                            <img src="images/console-stacksets-action-delete-stacks.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                            Escolher Excluir pilhas do StackSet no menu Ações.&#xA;                        " style="max-width:100%" />
                         
                         
                    </div>
                </li><li>
                    <p>Na página <b>Set deployment options (Definir opções de implantação)</b> escolha as contas das quais excluir instâncias de pilha.</p>
                    <ol><li>
                            <p>[Permissões autogerenciadas] Em <b>Accounts (Contas)</b>, escolha <b>Deploy stacks in accounts (Implantar pilhas em contas)</b>. Cole os números da sua conta de destino na caixa de texto, separando-os com vírgulas.</p>
                            <p>[Permissões gerenciadas pelo serviço] Em <b>Accounts (Contas)</b>, escolha <b>Deploy stacks in organizational units (Implantar pilhas em unidades organizacionais)</b>. Cole os IDs das OUs que o conjunto de pilhas tem como destino.</p>
                            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>O StackSets também exclui instâncias de pilha de qualquer OU filha das OUs de destino especificadas.</p></div></div>
                            <div class="mediaobject">
                                 
                                    <img src="images/console-stackset-delete-stack-instances-in-ous.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                    Selecione as unidades organizacionais das quais excluir instâncias de pilha.&#xA;                                " style="max-width:100%" />
                                 
                                 
                            </div>
                        </li><li>
                            <p>Em <b>Deployment regions (Regiões de implantação)</b>, escolha as regiões das quais você deseja excluir instâncias de pilha. Neste caso, Leste dos EUA (Norte da Virgínia)  Região e Região Oeste dos EUA (Oregon).</p>
                        </li><li>
                            <p>Em <b>Deployment options (Opções de implantação)</b>:</p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>Em <b>Maximum concurrent accounts (Máximo de contas concorrentes)</b>, mantenha os valores padrão de <b>Number (Número)</b> e <b>1</b>.</p>
                                </li><li class="listitem">
                                    <p>Em <b>Failure tolerance (Tolerância a falhas)</b>, mantenha os padrões de <b>Number (Número)</b> e <b>0</b>.</p>
                                </li></ul></div>
                            

                            <p>Na área <b>Retain stacks (Reter pilhas)</b>, mantenha a configuração padrão de desabilitado.</p>
                            <p>Ao excluir pilhas de um conjunto de pilhas, a opção <b>Reter pilhas</b> permite que você escolha remover as instâncias de pilhas do seu conjunto de pilhas, mas salvar as pilhas e os recursos associados. Ao salvar pilhas de um conjunto de pilhas escolhendo a opção <b>Reter pilhas</b>, os recursos da pilha permanecem no estado atual, mas a pilha deixa de fazer parte do conjunto de pilhas. Para voltar a associar uma pilha ou adicionar uma pilha existente a um conjunto de pilhas, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-import.html">Importação de uma pilha para o AWS CloudFormation StackSets</a>.</p>
                            <p>Escolha <b>Next</b> (Próximo).</p>
                        </li></ol>
                </li><li>
                    <p>Na página <b>Review (Revisar)</b>, reveja suas escolhas e selecione <b>Submit (Enviar)</b>.</p>
                </li><li>
                    <p>Depois que a exclusão da pilha for concluída, é possível verificar se as instâncias da pilha foram excluídas do conjunto de pilhas na página de detalhes do StackSet, na guia <b>Stack instances (Instâncias da pilha)</b>.</p>
                    <div class="mediaobject">
                         
                            <img src="images/console-stackset-detail-stack-instances.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                            Use a guia Stack instances (Instâncias da pilha) da página de detalhes do conjunto de pilhas para visualizar informações sobre suas instâncias de pilha.&#xA;                        " style="max-width:100%" />
                         
                         
                    </div>
                </li></ol></div>
         
            <h2 id="stackinstances-delete-cli">Excluir instâncias de pilha usando o AWS CLI</h2>

            <p>Ao atuar como administrador delegado, você deve definir o parâmetro <code class="code">--call-as</code> como <code class="code">DELEGATED_ADMIN</code> todas as vezes que executar um comando StackSets.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">--call-as <code class="replaceable">DELEGATED_ADMIN</code></code></pre>

            <div class="procedure"><ol><li>
                    <p>Execute o comando <code class="code">delete-stack-instances</code>. Para <code class="code">--stack-set-name</code>, especifique o nome do conjunto de pilhas <code class="code">my-awsconfig-stackset</code>.</p>
                    <p>Configure a tolerância a falhas e o máximo de contas concorrentes definindo <code class="code">FailureToleranceCount</code> como <code class="code">0</code> e <code class="code">MaxConcurrentCount</code> como <code class="code">1</code> no parâmetro <code class="code">--operation-preferences</code>, como mostrado no exemplo a seguir. Para aplicar porcentagens, use <code class="code">FailureTolerancePercentage</code> ou <code class="code">MaxConcurrentPercentage</code>. Para a finalidade deste passo-a-passo, usaremos conta, e não porcentagem.</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>O valor de <code class="code">MaxConcurrentCount</code> depende do valor de <code class="code">FailureToleranceCount</code>. <code class="code">MaxConcurrentCount</code> é, no máximo, um a mais do que <code class="code">MaxConcurrentCount</code>.</p></div></div>
                    <p>Como <code class="code">--retain-stacks</code> é um parâmetro obrigatório de <code class="code">delete-stack-instances</code>, se você não quiser reter (salvar) pilhas, adicione <code class="code">--no-retain-stacks</code>. Nesta demonstração, adicionaremos o parâmetro <code class="code">--no-retain-stacks</code>, já que não reteremos nenhuma pilha.</p>
                    <p>[Permissões autogerenciadas] Substitua <code class="replaceable">account_ID</code> pelas contas que você usou ao criar o conjunto de pilhas em <a href="./stacksets-getting-started-create.html">Criar um conjunto de pilhas</a>.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation delete-stack-instances --stack-set-name my-awsconfig-stackset --accounts '["<code class="replaceable">0123456789012</code>"]' --regions '["<code class="replaceable">eu-west-1</code>"]' --operation-preferences FailureToleranceCount=0,MaxConcurrentCount=1 --no-retain-stacks</code></pre>
                    <p>[Permissões gerenciadas pelo serviço] Para <code class="code">--deployment-targets</code>, especifique o ID da organização (raiz) ou os IDs das OUs em que você criou instâncias de pilha.</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>O StackSets também exclui instâncias de pilha de qualquer OU filha das OUs de destino especificadas.</p></div></div>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation delete-stack-instances --stack-set-name my-awsconfig-stackset --deployment-targets OrganizationalUnitIds='["<code class="replaceable">ou-rcuk-1x5jlwo</code>", "<code class="replaceable">ou-rcuk-slr5lh0a</code>"]' --regions '["eu-west-1"]' --no-retain-stacks</code></pre>
                </li><li>
                    <p>Opcionalmente, depois que a exclusão da pilha for concluída, verifique se as instâncias de pilha foram excluídas do conjunto de pilhas executando o comando <code class="code">describe-stack-set-operation</code> para mostrar o status e os resultados da operação de exclusão de pilhas. Para <code class="code">--operation-id</code>, use o ID de operação retornado pelo comando <code class="code">delete-stack-instances</code>.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation describe-stack-set-operation --stack-set-name <code class="replaceable">stackSetName</code> --operation-id <code class="replaceable">ddf16f54-ad62-4d9b-b0ab-3ed8e9example</code></code></pre>
                    
                </li></ol></div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./stackinstances-override.html">Substituir parâmetros em instâncias de pilha</div><div id="next" class="next-link" accesskey="n" href="./stacksets-delete.html">Excluir um conjunto de pilhas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>