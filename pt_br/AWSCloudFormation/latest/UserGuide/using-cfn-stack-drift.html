<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Detectar alterações de configuração não gerenciadas em pilhas e recursos - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-cfn-stack-drift" /><meta name="default_state" content="using-cfn-stack-drift" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" /><meta name="description" content="A detecção de desvio permite detectar se a configuração real de uma pilha difere ou se desviou da configuração esperada." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Detectar alterações de configuração não gerenciadas em pilhas e recursos" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Detectar alterações de configuração não gerenciadas em pilhas e recursos - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Como trabalhar com pilhas",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Detectar alterações de configuração não gerenciadas em pilhas e recursos",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacks.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#what-is-drift">O que é desvio?</a><a href="#drift-status-codes">Códigos de status de detecção de desvio</a><a href="#drift-considerations">Considerações ao detectar o desvio</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-cfn-stack-drift">Detectar alterações de configuração não gerenciadas em pilhas e recursos</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Mesmo que você gerencie seus recursos com o CloudFormation, os usuários podem alterá-los <em>fora</em> do CloudFormation. Os usuários podem editar recursos diretamente usando o serviço subjacente que os criou. Por exemplo, você pode usar o console do Amazon EC2 para atualizar uma instância de servidor que foi criada como parte de uma pilha do CloudFormation. Algumas mudanças podem ser acidentais e algumas podem ser feitas intencionalmente para responder a eventos operacionais sensíveis ao tempo. Independentemente disso, as alterações feitas fora do CloudFormation podem complicar as operações de atualização ou exclusão de pilha. Você pode usar a detecção de desvio para identificar recursos de pilha para os quais alterações de configuração foram feitas fora do gerenciamento do CloudFormation. Depois, é possível tomar medidas corretivas para que seus recursos de pilha estejam novamente em sincronia com suas definições no modelo de pilha, como atualizar os recursos desviados diretamente para que eles correspondam à definição do modelo. Resolver o desvio ajuda a garantir a consistência da configuração e operações de pilha bem-sucedidas.</p><div class="highlights"><h6>Tópicos</h6><ul><li><a href="#what-is-drift">O que é desvio?</a></li><li><a href="#drift-status-codes">Códigos de status de detecção de desvio</a></li><li><a href="#drift-considerations">Considerações ao detectar o desvio</a></li><li><a href="./detect-drift-stack.html">Detectar desvio em uma pilha inteira do CloudFormation</a></li><li><a href="./detect-drift-resource.html">Detectar desvios em recursos de pilha individuais</a></li><li><a href="./resource-import-resolve-drift.html">Resolver o desvio com uma operação de importação</a></li></ul></div>
        <h2 id="what-is-drift">O que é desvio?</h2>
        <p>A detecção de desvio permite detectar se a configuração real de uma pilha difere ou se <em>desviou</em> da configuração esperada. Use o CloudFormation para detectar desvios em uma pilha inteira ou em recursos individuais dentro da pilha. Considera-se que um recurso foi desviado se algum dos seus valores de propriedade reais for diferente dos valores de propriedade esperados. Isso inclui se a propriedade ou o recurso foi excluído. Considera-se que uma pilha foi desviada se um ou mais de seus recursos foram desviados.</p>
        <p>Para determinar se um recurso foi desviado, o CloudFormation determina os valores de propriedades de recursos esperados, conforme definido no modelo de pilha, e quaisquer valores especificados como parâmetros de modelo. Em seguida, o CloudFormation compara esses valores esperados com os valores reais dessas propriedades de recursos existentes atualmente na pilha. Considera-se que um recurso foi desviado quando uma ou mais de suas propriedades foi excluídas ou teve seu valor alterado.</p>
        <p>O CloudFormation gera informações detalhadas sobre cada recurso na pilha que se desviou.</p>
        <p>O CloudFormation detecta desvios nos recursos da AWS que suportam a detecção de desvios. Recursos sem suporte para a detecção de desvio recebem um status de desvio de NOT_CHECKED. Para obter uma lista de recursos da AWS que oferecem suporte à detecção de desvios, consulte <a href="./resource-import-supported-resources.html">Suporte a tipos de recursos</a>.</p>
        <p>Além disso, o CloudFormation é compatível com a detecção de desvios em tipos de recursos privados <em>provisionáveis</em>, ou seja, com tipo de provisionamento <code class="code">FULLY_MUTABLE</code> ou <code class="code">IMMUTABLE</code>. Para realizar a detecção de desvios em um recurso de tipo privado, a versão padrão do tipo de recurso <em>que você registrou em sua conta</em> deve ser provisionável. Para obter mais informações sobre o tipo de provisão de recursos, consulte o parâmetro <code class="code">ProvisioningType</code> da ação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeType.html"><code class="code">DescribeType</code></a> na Referência de APIs do AWS CloudFormation e o comando <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/describe-type.html"><code class="code">DescribeType</code></a>, na Referência de comandos da AWS CLI. Para obter mais informações sobre recursos privados, consulte <a href="./registry.html">Como usar o registro do AWS CloudFormation</a>.</p>
        <p>Você pode realizar a detecção de desvio em pilhas com os seguintes status: <code class="code">CREATE_COMPLETE</code>, <code class="code">UPDATE_COMPLETE</code>, <code class="code">UPDATE_ROLLBACK_COMPLETE</code> e <code class="code">UPDATE_ROLLBACK_FAILED</code>.</p>
        <p>Ao detectar o desvio em uma pilha, o CloudFormation não detecta desvios em nenhuma pilha aninhada que pertença a essa pilha. Para ter mais informações, consulte <a href="./using-cfn-nested-stacks.html">Trabalhar com pilhas aninhadas</a>. Em vez disso, você pode iniciar uma operação de detecção de desvio diretamente na pilha aninhada.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>O CloudFormation determina apenas o desvio para valores de propriedade explicitamente definidos, seja por meio do modelo de pilha ou especificando parâmetros de modelo. Isso não inclui valores padrão para propriedades de recursos. Para que o CloudFormation controle uma propriedade de recurso para fins de determinação de desvio, defina explicitamente o valor da propriedade, mesmo que você a esteja está definindo com o valor padrão.</p></div></div>
     
        <h2 id="drift-status-codes">Códigos de status de detecção de desvio</h2>
        <p>As tabelas nesta seção descrevem os vários tipos de status usados com a detecção de desvio:</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Status da operação de detecção de desvio</b> descreve o estado atual da operação de desvio.</p>
            </li><li class="listitem">
                <p><b>Status do desvio</b> </p>
                <p>Em <em>conjuntos de pilhas</em>, isso descreve o status do desvio do conjunto de pilhas como um todo, com base no status do desvio das instâncias de pilha que pertencem a ele.</p>
                <p>Em <em>instâncias de pilha</em>, isso descreve o status do desvio da instância de pilha, com base no status do desvio da pilha associada.</p>
                <p>Em <em>pilhas</em>, isso descreve o status do desvio da pilha como um todo, com base no status do desvio dos recursos.</p>
            </li><li class="listitem">
                <p><b> Status de desvio de recursos </b> descreve o status de desvio de um recurso individual.</p>
            </li></ul></div>
        <p>A tabela a seguir lista os códigos de status que o CloudFormation atribui a operações de detecção de desvio de pilha.</p>
        <div class="table-container"><div class="table-contents"><table id="w1348aac19c21c11b9"><thead>
                    <tr>
                        <th>Status da operação de detecção de desvio</th>
                        <th>Descrição</th>
                    </tr>
                </thead>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">DETECTION_COMPLETE</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>A operação de detecção de desvio de pilha foi concluída com êxito para todos os recursos na pilha compatível com a detecção de desvio.</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">DETECTION_FAILED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>A operação de detecção de desvio de pilha falhou para pelo menos um recurso na pilha. Os resultados estarão disponíveis para recursos nos quais o CloudFormation concluiu com êxito a detecção de desvio.</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">DETECTION_IN_PROGRESS</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>A operação de detecção de desvio de pilha está em andamento.</p>
                        </td>
                    </tr>
                </table></div></div>
        <p>A tabela a seguir lista os códigos de status de desvio doCloudFormation atribuídos a pilhas.</p>
        <div class="table-container"><div class="table-contents"><table id="w1348aac19c21c11c13"><thead>
                    <tr>
                        <th>Status do desvio</th>
                        <th>Descrição</th>
                    </tr>
                </thead>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">DRIFTED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>Em pilhas: a pilha é diferente, ou foi <em>desviada</em> de sua configuração de modelo esperada. Considera-se que uma pilha foi desviada se um ou mais de seus recursos foram desviados.</p>
                            <p>Em instâncias de pilha: uma instância de pilha é considerada com desvio se a pilha associada a ela tiver desviado.</p>
                            <p>Em conjuntos de pilhas: um conjunto de pilhas é considerado com desvio se uma ou mais instâncias de pilha tiverem desviado.</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">NOT_CHECKED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>O CloudFormation não verificou se a pilha, o conjunto de pilha ou a instância de pilha difere da configuração de modelo esperada.</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">IN_SYNC</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>A configuração atual de cada recurso compatível corresponde à sua configuração de modelo esperada. Uma pilha, um conjunto de pilha ou uma instância de pilha sem recursos que ofereçam suporte à detecção de desvio também terá um status de IN_SYNC.</p>
                        </td>
                    </tr>
                </table></div></div>
        <p>A tabela a seguir lista os códigos de status de desvio que o CloudFormation atribui a recursos de pilha.</p>
        <div class="table-container"><div class="table-contents"><table id="w1348aac19c21c11c17"><thead>
                    <tr>
                        <th>Status de desvio do recurso</th>
                        <th>Descrição</th>
                    </tr>
                </thead>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">DELETED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>O recurso difere de sua configuração de modelo esperada porque o recurso foi excluído.</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">MODIFIED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>O recurso difere de sua configuração de modelo esperada.</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">NOT_CHECKED</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>O CloudFormation não verificou se o recurso é diferente da configuração de modelo esperada.</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">IN_SYNC</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>A configuração atual do recurso corresponde à configuração do modelo esperada.</p>
                        </td>
                    </tr>
                </table></div></div>
        <p>A tabela a seguir lista os códigos de status de tipos de diferença que o CloudFormation atribui às propriedades do recurso que diferem de configurações de modelo esperadas.</p>
        <div class="table-container"><div class="table-contents"><table id="w1348aac19c21c11c21"><thead>
                    <tr>
                        <th>Tipos de diferenças de propriedades</th>
                        <th>Descrição</th>
                    </tr>
                </thead>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">ADD</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>Um valor foi adicionado a uma propriedade de recurso que é um tipo de dados de matriz ou lista.  </p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">REMOVE</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>A propriedade foi removida da configuração atual do recurso.</p>
                        </td>
                    </tr>
                    <tr>
                        <td tabindex="-1">
                            <p><code class="code">NOT_EQUAL</code></p>
                        </td>
                        <td tabindex="-1">
                            <p>O valor da propriedade atual difere de seu valor esperado, conforme definido no modelo de pilha.</p>
                        </td>
                    </tr>
                </table></div></div>
     
        <h2 id="drift-considerations">Considerações ao detectar o desvio</h2>
        <p>Para realizar com êxito a detecção de desvio em uma pilha, um usuário deve ter as seguintes permissões:</p>
        <div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Permissão de leitura para cada recurso compatível com a detecção de desvio incluída na pilha. Por exemplo, se a pilha inclui um recurso <code class="code">AWS::EC2::Instance</code>, você deverá ter a permissão <code class="code">ec2:DescribeInstances</code> para realizar a detecção de desvio na pilha.</p>
            </li><li class="listitem">
                <p><code class="code">cloudformation:DetectStackDrift</code></p>
            </li><li class="listitem">
                <p><code class="code">cloudformation:DetectStackResourceDrift</code></p>
            </li><li class="listitem">
                <p><code class="code">cloudformation:BatchDescribeTypeConfigurations</code></p>
            </li></ul></div>
        <p>Para obter mais informações sobre a configuração de permissões no CloudFormation, consulte <a href="./using-iam-template.html">Controlar o acesso com o AWS Identity and Access Management</a>.</p>

        <p>Em certos casos de ponto, o CloudFormationpode não ser capaz de sempre retornar resultados precisos de desvio. Você deve estar ciente desses casos de ponto para interpretar corretamente seus resultados de detecção de desvio.</p>
        <div class="itemizedlist">
             

             

             

             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Em certos casos, os objetos contidos em matrizes de propriedades serão relatados como desvios, quando, na verdade, são valores padrão fornecidos à propriedade a partir do serviço subjacente responsável pelo recurso.</p>
            </li><li class="listitem">
                <p>Certos recursos têm <em> relacionamentos de anexo</em> com recursos relacionados, de modo que um recurso pode realmente anexar ou remover valores de propriedade de outro recurso, definidos no mesmo modelo ou em outro. Por exemplo, os recursos <code class="code">AWS::EC2::SecurityGroupIngress</code> e <code class="code">AWS::EC2::SecurityGroupEgress</code> podem ser usados para prender e remover valores de recursos <code class="code">AWS::EC2::SecurityGroup</code>. Nesses casos, o CloudFormation analisa o modelo de pilha de anexos antes de realizar a comparação de desvio. No entanto, o CloudFormation não pode executar essa análise entre as pilhas e, portanto, pode não retornar resultados precisos de desvio quando os recursos anexados residem em pilhas diferentes.</p>
                <p>Recursos compatível com a detecção de desvio e que permitem ou exigem anexos de outros recursos incluem:</p>
                <div class="table-container"><div class="table-contents"><table id="w1348aac19c21c13c11b3b5"><thead>
                            <tr>
                                <th>Tipo de recurso</th>
                                <th>Tipo de recurso de anexo</th>
                            </tr>
                        </thead>
                            <tr>
                                <td tabindex="-1">
         <p><code class="code">AWS::SNS::Topic</code></p>
        </td>
                                <td tabindex="-1">
         <p><code class="code">AWS::SNS::Subscription</code></p>
        </td>
                            </tr>
                            <tr>
                                <td tabindex="-1">
         <p><code class="code">AWS::IAM::User</code></p>
        </td>
                                <td tabindex="-1">
         <p><code class="code">AWS::IAM::UserToGroupAddition</code></p>
        </td>
                            </tr>
                            <tr>
                                <td tabindex="-1">
         <p><code class="code">AWS::IAM::Group</code></p>
         <p><code class="code">AWS::IAM::Role</code></p>
         <p><code class="code">AWS::IAM::User</code></p>
        </td>
                                <td tabindex="-1"><p><code class="code">AWS::IAM::Policy</code></p><p><code class="code">AWS::IAM::ManagedPolicy</code></p></td>
                            </tr>
                            <tr>
                                <td tabindex="-1">
         <p><code class="code">AWS::ElasticLoadBalancingV2::Listener</code></p>
        </td>
                                <td tabindex="-1">
         <p><code class="code">AWS::ElasticLoadBalancingV2::ListenerCertificate</code></p>
        </td>
                            </tr>
                            <tr>
                                <td tabindex="-1">
         <p><code class="code">AWS::EC2::SecurityGroup</code></p>
        </td>
                                <td tabindex="-1"><p><code class="code">AWS::EC2::SecurityGroupEgress</code></p><p><code class="code">AWS::EC2::SecurityGroupIngress</code></p></td>
                            </tr>
                        </table></div></div>
            </li><li class="listitem">
                <p>O CloudFormation não realiza a detecção de desvio na propriedade <code class="code">KMSKeyId</code> de recursos. Como chaves do AWS KMS podem ser referenciadas por vários aliases, o CloudFormation não pode garantir resultados de desvio consistentemente precisos para essa propriedade.</p>
            </li><li class="listitem">
                <p>Há certas propriedades de recurso que você pode especificar em seu modelo de pilha que, pela própria natureza, o CloudFormation não será capaz de comparar com as propriedades nos recursos de pilha resultantes. Portanto, essas propriedades não podem ser incluídas nos resultados da detecção de desvio. Essas propriedades se dividem em duas grandes categorias:</p>
                <div class="itemizedlist">
                     
                     
                     

                <ul class="itemizedlist"><li class="listitem">
                        <p>Valores de propriedade que o CloudFormation não pode mapear de volta para o valor de propriedade de recurso inicial no modelo de pilha.</p>
                        <p>Por exemplo, o CloudFormation não pode mapear o código-fonte de uma função do Lambda de volta ao tipo de propriedade <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-lambda-function-code.html"><code class="code">Code</code></a> do recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html"><code class="code">AWS::Lambda::Function</code></a> e, portanto, o CloudFormation não pode incluí-lo em resultados de detecção de desvio. </p>
                    </li><li class="listitem">
                        <p>Os valores de propriedades que o serviço responsável pelo recurso não retorna.</p>
                        <p>Há determinados valores de propriedades que, por natureza, nunca são retornados pelo serviço ao qual o recurso pertence. Eles tendem a conter informações confidenciais, como senhas ou outros dados confidenciais que não devem ser expostos. Por exemplo, o serviço do IAM nunca retornará o valor da propriedade <code class="code">Password</code> do tipo de propriedade <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user-loginprofile.html">IAM User LoginProfile</a>, e, portanto, o CloudFormation não poderá incluí-lo em resultados de detecção de desvio.</p>
                    </li><li class="listitem">
                        <p>Objetos em uma matriz podem ser, na verdade, padrões de serviço, e não desvios adicionados manualmente.</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p>Se você encontrar algum falso positivo, envie seus comentários usando o link de feedback no console do CloudFormation ou entre em contato conosco em <a href="https://forums.aws.amazon.com/" rel="noopener noreferrer" target="_blank"><span>AWS re:Post</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
            </li><li class="listitem">
                <p>Algumas propriedades podem ter valores de entrada equivalentes, mas não idênticos. Para evitar falsos positivos, você deve garantir que a configuração esperada corresponda à configuração real.</p>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Por exemplo, a configuração esperada da propriedade do recurso pode ser 1024 MB e a configuração real da mesma propriedade de recurso pode ser 1 GB. 1024 MB e 1 GB são equivalentes, mas não idênticos.</p>
                        <p>Quando a detecção de desvio é executada nessa propriedade de recurso, ela sinaliza resultados com desvios.</p>
                        <p>Para evitar esse falso positivo, altere a configuração esperada da propriedade do recurso para 1024 MB e depois execute a detecção de desvio.</p>
                    </li></ul></div>

            </li></ul></div>




    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./using-cfn-updating-stacks-continueupdaterollback.html">Continuar revertendo uma atualização</div><div id="next" class="next-link" accesskey="n" href="./detect-drift-stack.html">Detectar desvio em uma pilha inteira do CloudFormation</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-stack-drift.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>