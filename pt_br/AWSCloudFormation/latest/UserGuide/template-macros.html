<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Usar macros do AWS CloudFormation para realizar processamento personalizado em modelos - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="template-macros" /><meta name="default_state" content="template-macros" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="description" content="Use macros para executar o processamento personalizado em modelos, desde ações simples, como operações de localizar e substituir, até transformações extensas de modelos inteiros." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Usar macros do AWS CloudFormation para realizar processamento personalizado em modelos" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Usar macros do AWS CloudFormation para realizar processamento personalizado em modelos - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabalhar com modelos do AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Usar macros do AWS CloudFormation para realizar processamento personalizado em modelos",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-guide.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#template-macros-overview">Como funcionam as macros do AWS CloudFormation</a><a href="#template-macros-author">Criar uma definição de macros do AWS CloudFormation</a><a href="#template-macros-use">Usar macros do AWS CloudFormation em seus modelos</a><a href="#template-macros-examples-list">Exemplos de macro</a><a href="#template-macros-seealso">Consulte também</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="template-macros">Usar macros do AWS CloudFormation para realizar processamento personalizado em modelos</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Macros permitem realizar o processamento personalizado em modelos, desde ações simples, como operações de localizar e substituir, até transformações extensas de modelos inteiros.</p><p>Para ter uma ideia das possibilidades, considere as transformações <code class="code">AWS::Include</code> e <code class="code">AWS::Serverless</code>, que são macros hospedadas pelo AWS CloudFormation:</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p><code class="code"><a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Transformação AWS::Include</a></code> permite que você insira trechos de modelo de clichê em seus modelos.</p>
        </li><li class="listitem">
            <p>O <code class="code"><a href="./transform-aws-serverless.html">Transformação AWS::Serverless</a></code> usa um modelo inteiro escrito na sintaxe do AWS Serverless Application Model (AWS SAM) e o transforma e expande em um modelo compatível com o AWS CloudFormation.  (Para obter mais informações sobre aplicações sem servidor e o AWS SAM, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/deploying-lambda-apps.html">Implantar aplicações baseadas no Lambda</a>, no <em>Guia do desenvolvedor do AWS Lambda</em>).</p>
        </li></ul></div><h2 id="template-macros-overview">Como funcionam as macros do AWS CloudFormation</h2><p>Há duas etapas principais para processar modelos usando macros: <em>criar</em> a macro propriamente dita e, em seguida, <em>usar</em> essa macro para realizar o processamento nos seus modelos.</p><p>Para criar uma definição de macro, você precisa criar o seguinte:</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>Uma função AWS Lambda para realizar o processamento do modelo. Essa função Lambda aceita um trecho inteiro ou um modelo inteiro e quaisquer parâmetros adicionais que você definir. Ele retorna o trecho de modelo processado ou todo o modelo como uma resposta.</p>
        </li><li class="listitem">
            <p>Um recurso do tipo <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></code>, que permite que os usuários chamem a função do Lambda de dentro de modelos do AWS CloudFormation. Esse recurso especifica o ARN da função Lambda a ser chamada para esta macro, além de propriedades opcionais adicionais para ajudar na depuração. Para criar esse recurso dentro de uma conta, crie um modelo de pilha que inclua um recurso <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></code> e, em seguida, crie uma pilha ou um conjunto de pilhas com permissões autogerenciadas a partir do modelo. AWS No momento, o CloudFormation StackSets não oferece suporte para a criação ou a atualização de conjuntos de pilhas com permissões gerenciadas por serviço de modelos que fazem referência a macros.</p>
        </li></ul></div><p>Para usar uma macro, faça referência a ela no seu modelo:</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>Para processar uma seção ou um <em>trecho</em>, de um modelo, faça referência à macro em uma função <code class="code"><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></code> localizada em relação ao conteúdo do modelo que você deseja transformar. Ao usar <code class="code">Fn::Transform</code>, você também pode transmitir os parâmetros especificados.</p>
        </li><li class="listitem">
            <p>Para processar um modelo inteiro, faça referência à macro na seção <a href="./transform-section-structure.html">Transformação</a> do modelo.</p>
        </li></ul></div><p>Depois, normalmente você cria um conjunto de alterações e o executa. (O processamento de macros pode adicionar vários recursos dos quais você pode não estar ciente. Para garantir que você saiba todas as alterações apresentadas pelas macros, é altamente recomendável que você use conjuntos de alterações.) O AWS CloudFormation transmite o conteúdo do modelo especificado, além de qualquer outro parâmetro especificado, para a função do Lambda especificada no recurso de macro. A função Lambda retorna o conteúdo do modelo processado, seja um trecho ou um modelo inteiro.</p><p>Depois que todas as macros do modelo tiverem sido chamadas, o AWS CloudFormation gerará um conjunto de alterações que inclui o conteúdo do modelo processado. Após revisar o conjunto de alterações, execute-o para aplicar as alterações.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Se o modelo do conjunto de pilhas fizer referência a uma ou mais macros, você deverá criar o conjunto de pilhas diretamente do modelo processado, sem primeiro revisar as alterações resultantes em um conjunto de alterações. Para criar ou atualizar o conjunto de pilhas diretamente, é necessário usar a ação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> ou <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> e especificar o recurso <code class="code">CAPABILITY_AUTO_EXPAND</code>. Antes de criar ou atualizar um conjunto de pilhas de um modelo que faça referência a macros diretamente, certifique-se de saber qual processamento as macros executam.</p></div></div><div class="mediaobject">
         
            
            <img src="images/template-macro-use.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;            Use a função intrínseca Fn::Transform ou a seção Transform do modelo para transmitir o conteúdo do modelo e os parâmetros associados para a função do Lambda subjacente da macro, que retorna o conteúdo do modelo processado.&#xA;        " style="max-width:100%" />
         
         
    </div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se você estiver certo de criar ou atualizar uma pilha diretamente de um modelo processado, sem primeiro analisar as alterações propostas em um conjunto de alterações, será possível fazer isso especificando o recurso <code class="code">CAPABILITY_AUTO_EXPAND</code> durante uma solicitação <code class="code">UpdateStack</code> ou <code class="code">CreateStack</code>. Você só deve criar pilhas diretamente de um modelo que faz referência a macros se souber qual processamento as macros executam.</p><p>Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html">CreateStack</a> ou <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html">UpdateStack</a>, na <em>Referência a APIs do AWS CloudFormation</em>.</p></div></div><h2 id="template-macros-author">Criar uma definição de macros do AWS CloudFormation</h2>
        <p>Quando você cria uma definição de macro, ela disponibiliza a função do Lambda subjacente na conta especificada, para que o AWS CloudFormation possa invocá-la para processar os modelos.</p>
        
        <h3 id="template-macros-lambda-interface">Interface de funções de macro do AWS CloudFormation</h3>
            <p>Para macros, o AWS CloudFormation invoca as funções do Lambda subjacentes com o seguinte mapeamento de eventos. O AWS CloudFormation envia sua solicitação no formato JSON e espera que a resposta da função seja formatada como JSON também.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "region" : "<code class="replaceable">us-east-1</code>",
    "accountId" : "<code class="replaceable">$ACCOUNT_ID</code>",
    "fragment" : <span>{</span> <code class="replaceable">...</code> },
    "transformId" : "<code class="replaceable">$TRANSFORM_ID</code>",
    "params" : <span>{</span> <code class="replaceable">...</code> },
    "requestId" : "<code class="replaceable">$REQUEST_ID</code>",
    "templateParameterValues" : <span>{</span> <code class="replaceable">...</code> }
}</code></pre>

            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><b>região</b></p>
                    <p>A região na qual a macro reside.</p>
                </li><li class="listitem"><p><b>accountId</b></p>
                    <p>O ID de conta da conta da qual a macro está invocando a função Lambda.</p>
                </li><li class="listitem"><p><b>fragment</b></p>
                    <p>O conteúdo do modelo disponível para processamento personalizado, no formato JSON.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem"><p>Para macros incluídas no modelo <code class="code">Transform</code>, essa seção é o modelo inteiro, exceto pela seção <code class="code">Transform</code>.</p></li><li class="listitem"><p>Para macros incluídas em uma chamada de função intrínseca <code class="code">Fn::Transform</code>, isso inclui todos os nós irmãos (e os filhos deles) com base na localização da função intrínseca no modelo, exceto pela função <code class="code">Fn::Transform</code>. Para ter mais informações, consulte <a href="#template-macros-scope">Escopo de macros do AWS CloudFormation</a>.</p></li></ul></div>
                </li><li class="listitem"><p><b>transformId</b></p>
                    <p>O nome da macro que invoca essa função.</p>
                </li><li class="listitem"><p><b>params</b></p>
                    <p>Para chamadas de função <code class="code">Fn::Transform</code>, quaisquer parâmetros especificados para a função. O AWS CloudFormation não avalia esses parâmetros antes de os transmitir à função.</p>
                    <p>Para macros incluídas na seção do modelo <code class="code">Transform</code>, essa seção é vazia.</p>
                </li><li class="listitem"><p><b>requestId</b></p>
                    <p>O ID da solicitação que invoca essa função.</p>
                </li><li class="listitem"><p><b>templateParameterValues</b></p>
                    <p>Quaisquer parâmetros especificados na seção <a href="./parameters-section-structure.html">Parâmetros</a> do modelo. O AWS CloudFormation avalia esses parâmetros antes de os transmitir à função.</p>
                </li></ul></div>
            <p>O AWS CloudFormation espera que a função subjacente retorne uma resposta no seguinte formato JSON:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "requestId" : "<code class="replaceable">$REQUEST_ID</code>",
    "status" : "<code class="replaceable">$STATUS</code>",
    "fragment" : <span>{</span> <code class="replaceable">...</code> }
    "errorMessage": "optional error message for failures"
}</code></pre>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><b>requestId</b></p>
                    <p>O ID da solicitação que invoca essa função. Isso deve corresponder ao ID de solicitação fornecido pelo AWS CloudFormation ao invocar a função.</p>
                </li><li class="listitem"><p><b>status</b></p>
                    <p>O status da solicitação (não diferencia maiúsculas de minúsculas). Deve ser definido como <code class="code">success</code>. O AWS CloudFormation trata qualquer outra resposta como uma falha.</p>
                </li><li class="listitem"><p><b>fragment</b></p>
                    <p>O conteúdo de modelo processado para o AWS CloudFormation incluir no modelo processado, incluindo irmãos. O AWS CloudFormation substitui o conteúdo do modelo que é transmitido para a função do Lambda pelo fragmento de modelo que ele recebe na resposta do Lambda.</p>
                    <p>O conteúdo do modelo processado deve ser um JSON válido, e sua inclusão no modelo processado deve resultar em um modelo válido.</p>
                    <p>Se a função não chegar a alterar o conteúdo do modelo que o AWS CloudFormation transmite a ela, mas você ainda precisar incluir esse conteúdo no modelo processado, sua função precisará retornar conteúdo de modelo ao AWS CloudFormation em sua resposta.</p>
                </li><li class="listitem">
                    <p><b>errorMessage</b></p>
                    <p>A mensagem de erro que explica por que a transformação falhou. O CloudFormation exibe a mensagem de erro no painel <b>Events</b> (Eventos) da página <b>Stack details</b> (Detalhes da pilha) para sua nova pilha.</p>
                    <p>Por exemplo, um erro ao criar conjunto de alterações: a transformação <code class="replaceable">número da conta da Conta da AWS</code>::<code class="replaceable">nome da macro</code> em falha com: <code class="replaceable">string da mensagem de erro</code>.</p>
                </li></ul></div>
            <p>Para obter informações sobre considerações adicionais ao criar macros, consulte <a href="#template-macros-considerations">Considerações ao criar definições de macro do AWS CloudFormation</a>.</p>
         
        
        <h3 id="template-macros-permissions">Escopo e permissões de conta de macros do AWS CloudFormation</h3>
            <p>Você pode usar macros apenas na conta em que elas foram criadas como um recurso. O nome da macro deve ser exclusivo dentro de uma conta especificada. No entanto, você pode disponibilizar a mesma funcionalidade em várias contas, ativando o acesso entre contas na função Lambda subjacente e, em seguida, criando definições de macro que fazem referência a essa função em várias contas. No exemplo abaixo, três contas contêm definições de macro, cada uma apontando para a mesma função Lambda.</p>
            <div class="mediaobject">
                 
                    <img src="images/template-macro-accounts.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                    Ao permitir o acesso entre contas na função do Lambda, a AWS permite que você crie macros em várias contas que fazem referência a essa função.&#xA;                " style="max-width:100%" />
                 
                 
            </div>
            <p>Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-overview.html">Visão geral do gerenciamento de permissões de acesso aos recursos do AWS Lambda</a>, no <em>Guia do desenvolvedor do AWS Lambda</em>.</p>
            <p>Para criar uma definição de macro, o usuário deve ter permissões para criar uma pilha ou um conjunto de pilhas dentro da conta especificada.</p>
            <p>Para o AWS CloudFormation executar com êxito uma macro incluída em um modelo, o usuário deve ter permissões <code class="code">Invoke</code> para a função do Lambda subjacente. Para evitar possível dimensionamento de permissões, o AWS CloudFormation personifica o usuário ao executar a macro. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/intro-permission-model.html">Modelo de permissões do Lambda</a>, no <em>Guia do desenvolvedor do AWS Lambda</em>, e <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/list_lambda.html">Ações e chaves de contexto de condição para o AWS Lambda</a>, no <em>Guia do usuário do IAM</em>.</p>
            <p>As transformações <a href="./transform-aws-serverless.html">Transformação AWS::Serverless</a> e <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Transformação AWS::Include</a> são macros hospedadas pelo AWS CloudFormation. Não são necessárias permissões especiais para usá-las, e elas estão disponíveis em qualquer conta no AWS CloudFormation.</p>
          
        <h3 id="template-macros-debug">Depurar macros do AWS CloudFormation</h3>
            <p>Para ajudar na depuração, você também pode especificar as propriedades <code class="code">LogRoleArn</code> e <code class="code">LogGroupName</code> ao criar o tipo de recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a> para a sua macro. Essas propriedades permitem que você especifique o grupo de logs do CloudWatch ao qual o AWS CloudFormation envia informações de registro de erros ao invocar a função do AWS Lambda subjacente da macro e a função que o AWS CloudFormation deve assumir ao enviar entradas de log para esses logs.</p>
          
        <h3 id="template-macros-billing">Faturamento</h3>
            <p>Quando uma macro é executada, o proprietário da função Lambda é cobrado por todos os custos relacionados à execução dessa função.</p>
            <p>As transformações <a href="./transform-aws-serverless.html">Transformação AWS::Serverless</a> e <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Transformação AWS::Include</a> são macros hospedadas pelo AWS CloudFormation. Não há custo pelo uso desses recursos.</p>
         
        <h3 id="template-macros-considerations">Considerações ao criar definições de macro do AWS CloudFormation</h3>
            <p>Ao criar definições de macro, lembre-se do seguinte:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                
                 
                 
                 
                
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p>Macros têm suporte apenas em Regiões da AWS nas quais o AWS Lambda está disponível. Para obter uma lista de regiões em que o Lambda está disponível, consulte <a href="https://docs.aws.amazon.com/general/latest/gr/lambda-service.html">Endpoints e cotas do AWS Lambda</a>.</p></li><li class="listitem"><p>Todos os trechos do modelo processado deve ser um JSON válido.</p></li><li class="listitem"><p>Quaisquer trechos de modelo processados devem passar por verificações de validação para uma operação de criação de pilha, atualização de pilha, criação de conjunto de pilhas ou atualização de conjunto de pilhas.</p></li><li class="listitem"><p>O AWS CloudFormationresolve as macros primeiro e depois processa o modelo. O modelo resultante deve ser um JSON válido e não deve exceder o limite de tamanho do modelo.</p></li><li class="listitem"><p>Devido à ordem na qual o CloudFormation processa elementos em um modelo, uma macro não pode incluir módulos no conteúdo do modelo processado que ela retorna ao CloudFormation. Para mais informações sobre módulos, consulte <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/modules.html">Desenvolver módulos</a>, no <em>Guia do usuário da CLI do CloudFormation</em>.</p></li><li class="listitem"><p>Ao usar o recurso de reversão de atualização, o AWS CloudFormation utiliza uma cópia do modelo original. Ele reverterá para o modelo original, mesmo se o trecho incluído tiver sido alterado.</p></li><li class="listitem"><p>A inclusão de macros em macros não funciona, já que não os processamos de modo iterativo.</p></li><li class="listitem"><p>No momento, a função intrínseca <code class="code">Fn::ImportValue</code> não é compatível em macros.</p></li><li class="listitem"><p>As funções intrínsecas incluídas no modelo são avaliadas depois de quaisquer macros. Portanto, o conteúdo do modelo processado retornado pela macro pode incluir chamadas para funções intrínsecas, e estas são avaliadas como de costume.</p></li><li class="listitem"><p>No momento, o StackSets não suporta a criação ou atualização de conjuntos de pilhas com permissões gerenciadas por serviço de modelos que fazem referência a macros do AWS CloudFormation.</p></li><li class="listitem"><p>Se o modelo do conjunto de pilhas fizer referência a uma ou mais macros, você deverá criar ou atualizar o conjunto de pilhas diretamente do modelo processado, sem primeiro revisar as alterações resultantes em um conjunto de alterações. Para criar ou atualizar o conjunto de pilhas diretamente, use a ação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> ou <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> e especifique o recurso <code class="code">CAPABILITY_AUTO_EXPAND</code>. O processamento de macros pode adicionar vários recursos dos quais você não tem conhecimento. Antes de criar ou atualizar um conjunto de pilhas de um modelo que faça referência a macros diretamente, certifique-se de saber qual processamento as macros executam.</p></li><li class="listitem">
                    
                    <p>Conjuntos de alterações atualmente não dão suporte a pilhas aninhadas. Se quiser criar ou atualizar uma pilha usando um modelo que faz referência a macros <em>e</em> contém pilhas aninhadas, crie ou atualize a pilha diretamente. Para fazer isso, use a ação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html"><code class="code">CreateStack</code></a> ou <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html"><code class="code">UpdateStack</code></a> e especifique o recurso <code class="code">CAPABILITY_AUTO_EXPAND</code>.</p>
                </li></ul></div>
         
        <div class="procedure"><h6>Para criar uma definição de macro do AWS CloudFormation</h6><ol><li>
                <p><a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-app.html"> Crie uma função AWS Lambda</a> que processe modelos do AWS CloudFormation.</p>
                <p>A função Lambda que você criar realizará o processamento do conteúdo do modelo. Sua função pode processar qualquer parte de um modelo, até o modelo inteiro. Para obter informações sobre o mapeamento de eventos que a sua função deve seguir, consulte <a href="#template-macros-lambda-interface">Interface de funções de macro do AWS CloudFormation</a>. Para obter informações sobre considerações adicionais ao criar macros, consulte <a href="#template-macros-considerations">Considerações ao criar definições de macro do AWS CloudFormation</a>.</p>
            </li><li>
                <p><a href="./template-guide.html">Crie um modelo</a> que contenha um tipo de recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a>.</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem"><p>É necessário especificar as propriedades <code class="code">Name</code> e <code class="code">FunctionName</code>. A propriedade <code class="code">FunctionName</code> especifica o ARN da função do Lambda a ser chamada quando o AWS CloudFormation executa a macro.</p></li><li class="listitem"><p>Para ajudar na depuração, você também pode especificar as propriedades <code class="code">LogRoleArn</code> e <code class="code">LogGroupName</code>.</p></li></ul></div>
            </li><li>
                <p><a href="./cfn-console-create-stack.html">Crie uma pilha</a> com base no modelo que contém a macro na conta desejada ou <a href="./stacksets-getting-started-create.html#stacksets-getting-started-create-self-managed">crie um conjunto de pilhas com permissões autogerenciadas</a> com base no modelo que faz referência à macro na conta de administrador e, em seguida, crie instâncias de pilha nas contas de destino desejadas.</p>
                <p>Depois que o AWS CloudFormation criar com êxito as pilhas que contêm a definição da macro, a macro estará disponível para uso nessas contas.</p>
            </li></ol></div>


    <h2 id="template-macros-use">Usar macros do AWS CloudFormation em seus modelos</h2>
        <p>Depois que o AWS CloudFormation criar com êxito as pilhas que contêm a definição da macro, a macro estará disponível para uso nessas contas. Você usa uma macro fazendo referência a ela em um modelo, no local apropriado relevante para o conteúdo do modelo que você deseja processar.</p>
        <h3 id="template-macros-order">Ordem de avaliação de macros do AWS CloudFormation</h3>
            <p>Você pode fazer referência a várias macros em um determinado modelo, incluindo transformações hospedadas pelo AWS CloudFormation, como <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Transformação AWS::Include</a> e <a href="./transform-aws-serverless.html">Transformação AWS::Serverless</a>.</p>
            <p>As macros são avaliadas em ordem, com base na sua localização no modelo, da mais profundamente aninhada até a mais genérica. Macros no mesmo local do modelo são avaliadas em série com base na ordem em que estão listadas.</p>
            <p>Transformações como <code class="code">AWS::Include</code> e <code class="code">AWS::Transform</code> são tratadas como qualquer outra macro em termos de ordem e escopo de ação.</p>
            <p>Por exemplo, no modelo de exemplo abaixo, o AWS CloudFormation avalia primeiro a macro <code class="code">PolicyAdder</code>, pois ela é a macro mais profundamente aninhada no modelo. O AWS CloudFormation em seguida avalia a <code class="code">MyMacro</code> antes de avaliar <code class="code">AWS::Serverless</code> porque ela está listada antes de <code class="code">AWS::Serverless</code> na seção <code class="code">Transform</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
 Transform: [MyMacro, AWS::Serverless]
 Resources:
    WaitCondition:
      Type: AWS::CloudFormation::WaitCondition
    MyBucket:
      Type: 'AWS::S3::Bucket'
      Properties:
        BucketName: MyBucket
        Tags: [<span>{</span>"key":"value"}]
        'Fn::Transform':
          - Name: PolicyAdder
        CorsConfiguration:[]
    MyEc2Instance:
      Type: 'AWS::EC2::Instance'
      Properties:
        ImageID: "ami-123"</code></pre>
          
        
        <h3 id="template-macros-scope">Escopo de macros do AWS CloudFormation</h3>
            <p>Macros referenciadas na seção <code class="code">Transform</code> de um modelo podem processar todo o conteúdo desse modelo.</p>
            <p>Macros referenciadas em uma função <code class="code">Fn::Transform</code> podem processar o conteúdo de qualquer um dos elementos irmãos (incluindo filhos) dessa função <code class="code">Fn::Transform</code> no modelo.</p>
            <p>Por exemplo, no modelo de exemplo abaixo, <code class="code">AWS::Include</code> pode processar todas as propriedades <code class="code">MyBucket</code> com base na localização da função <code class="code">Fn::Transform</code> que o contém. <code class="code">MyMacro</code> pode processar o conteúdo de todo o modelo devido à sua inclusão na seção <code class="code">Transform</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">
// Start of processable content for MyMacro
AWSTemplateFormatVersion: 2010-09-09 
 Transform: [MyMacro]
 Resources:
    WaitCondition:
      Type: AWS::CloudFormation::WaitCondition
    MyBucket:
      Type: 'AWS::S3::Bucket'  //Start of processable content for AWS::Include
      Properties:
        BucketName: MyBucket 
        Tags: [<span>{</span>"key":"value"}] 
        'Fn::Transform':
          - Name: 'AWS::Include'
              Parameters:
                Location: s3://<code class="replaceable">DOC-EXAMPLE-BUCKET</code>/MyFileName.yaml
        CorsConfiguration:[]   //End of processable content for AWS::Include
    MyEc2Instance:
      Type: 'AWS::EC2::Instance' 
      Properties:
        ImageID: "ami-123"
// End of processable content for MyMacro         </code></pre>
          
        
         
         <h3 id="template-macros-change-sets">Conjuntos de alterações e macros do AWS CloudFormation</h3>
            <p>Para criar ou atualizar uma pilha usando um modelo que faz referência a macros, normalmente você cria um conjunto de alterações e o executa. Um conjunto de alterações descreve as ações que o CloudFormation executará com base no modelo processado. O processamento de macros pode adicionar vários recursos dos quais você não tem conhecimento. Para garantir que você esteja ciente de todas as alterações apresentadas pelas macros, sugerimos o uso de conjuntos de alterações. Após revisar o conjunto de alterações, você poderá executá-lo para realmente aplicar as alterações.</p>
            <p>Uma macro pode adicionar recursos do IAM a seu modelo. Para esses recursos, o AWS CloudFormation requer que você <a href="./using-iam-template.html#using-iam-capabilities">confirme suas funcionalidades</a>. Como o AWS CloudFormation não pode saber quais recursos são adicionados antes de processar seu modelo, pode ser necessário confirmar as funcionalidades do IAM ao criar o conjunto de alterações, dependendo de as macros referenciadas incluírem ou não recursos do IAM. Dessa forma, quando você executar o conjunto de alterações, o AWS CloudFormation terá os recursos necessários ao criar recursos do IAM.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Se o modelo do conjunto de pilhas fizer referência a uma ou mais macros, você deverá criar o conjunto de pilhas diretamente do modelo processado, sem primeiro revisar as alterações resultantes em um conjunto de alterações. Para criar ou atualizar o conjunto de pilhas diretamente, é necessário usar a ação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> ou <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> e especificar o recurso <code class="code">CAPABILITY_AUTO_EXPAND</code>. Antes de criar ou atualizar um conjunto de pilhas de um modelo que faça referência a macros diretamente, certifique-se de saber qual processamento as macros executam.</p></div></div>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se você estiver certo de criar ou atualizar uma pilha diretamente de um modelo processado, sem primeiro analisar as alterações propostas em um conjunto de alterações, será possível fazer isso especificando o recurso <code class="code">CAPABILITY_AUTO_EXPAND</code> durante uma solicitação <code class="code">UpdateStack</code> ou <code class="code">CreateStack</code>. Você só deverá criar pilhas diretamente de um modelo de pilha que contém macros se souber o que o processamento da macro executa. Você não pode usar conjuntos de alterações com macros de conjunto de pilhas e deve atualizar seu conjunto de pilhas diretamente.</p><p>Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html"><code class="code">CreateStack</code></a> ou <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html"><code class="code">UpdateStack</code></a> na <em>Referência de APIs do AWS CloudFormation</em>.</p></div></div>
            <p>Se usar a AWS CLI, você poderá usar os comandos <code class="code">package</code> e <code class="code">deploy</code> para reduzir o número de etapas para iniciar pilhas com base em modelos que fazem referência a macros. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/deploying-lambda-apps.html">Implantar aplicações baseadas no Lambda</a>, no <em>AWS Lambda Developer Guide</em>.</p>
         
   
        <h3 id="template-macros-template-stage">Etapa do modelo e macros do CloudFormation</h3>
            <p>A <em>etapa</em> de um modelo indica se ele é o modelo original enviado pelo usuário ou um modelo em que o AWS CloudFormation processou as macros.</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><code class="code">Original</code>: o modelo que o usuário enviou originalmente para criar ou atualizar a pilha ou o conjunto de pilhas.</p></li><li class="listitem"><p><code class="code">Processed</code>: o modelo que o AWS CloudFormation usou para criar ou atualizar a pilha ou o conjunto de pilhas após o processamento de todas as macros referenciadas. O modelo processado é formatado como JSON, mesmo que o modelo original tenha sido formatado como YAML.</p></li></ul></div>
            <p>Use o modelo processado para solucionar problemas de pilhas. Se um modelo não referenciar macros, os modelos original e processado serão idênticos.</p>
            <p>Você pode usar o <a href="./cfn-console-view-stack-data-resources.html">console</a> do AWS CloudFormation ou a <a href="./using-cfn-get-template.html">AWS CLI</a> para ver a etapa de um modelo de pilha.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>O tamanho máximo de um modelo de pilha processado é de 51.200 bytes quando transmitido diretamente em uma solicitação <code class="code">CreateStack</code>, <code class="code">UpdateStack</code> ou <code class="code">ValidateTemplate</code>, ou 1 MB quando transmitido como um objeto do S3 usando um URL do modelo do Amazon S3. No entanto, durante o processamento, o CloudFormation atualiza o estado temporário do modelo enquanto ele processa serialmente as macros contidas no modelo. Por causa disso, o tamanho do modelo <em>durante o processamento</em> pode temporariamente exceder o tamanho permitido de um modelo totalmente processado. O CloudFormation permite um buffer para esses modelos em processamento. No entanto, você deve projetar modelos e macros tendo em mente o tamanho máximo permitido para um modelo de pilha processado.</p><p>Se o CloudFormation retornar um erro <code class="code">Transformation data limit exceeded</code> ao processar seu modelo, é porque ele excedeu o tamanho máximo de modelo que o CloudFormation permite durante o processamento.</p><p>Para resolver esse problema, considere o seguinte:</p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem"><p>Reestruture o modelo em vários modelos para evitar exceder o tamanho máximo de modelos em andamento. Por exemplo:</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem"><p>Use os modelos de pilha aninhada para encapsular partes do modelo. Para ter mais informações, consulte <a href="./using-cfn-nested-stacks.html">Trabalhar com pilhas aninhadas</a>.</p></li><li class="listitem"><p>Crie várias pilhas e use referências entre pilhas para trocar informações entre elas. Para ter mais informações, consulte <a href="./walkthrough-crossstackref.html">Demonstração: Consultar saídas de recurso em outra pilha do AWS CloudFormation</a>.</p></li></ul></div>
                    </li><li class="listitem"><p>Reduza o tamanho do fragmento do modelo retornado por determinada macro. O CloudFormation não interfere no conteúdo de fragmentos retornados por macros.</p></li></ul></div></div></div>
         
        
        <div class="procedure"><h6>Como usar uma macro do AWS CloudFormation no seu modelo</h6><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Para o AWS CloudFormation executar com êxito uma macro referenciada em um modelo, o usuário deve ter permissões <code class="code">Invoke</code> para a função do Lambda subjacente. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-overview.html">Visão geral do gerenciamento de permissões de acesso aos recursos do AWS Lambda</a>, no <em>Guia do desenvolvedor do AWS Lambda</em>.</p></div></div><ol><li>
                <p>Inclua uma referência à macro no seu modelo.</p>
                <div class="itemizedlist">
                     
                      
                <ul class="itemizedlist"><li class="listitem">
                        <p>Para processar um trecho de sessão, faça referência à macro em uma função <code class="code"><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></code> localizada em relação ao conteúdo do modelo que você deseja processar.</p>
                    </li><li class="listitem">
                        <p>Para processar o modelo inteiro, faça referência à macro na seção <a href="./transform-section-structure.html">Transformação</a> do modelo.</p>
                    </li></ul></div>
            </li><li>
                <p><a href="./using-cfn-updating-stacks-changesets-create.html">Crie um conjunto de alterações</a> usando o modelo.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Se o modelo do conjunto de pilhas fizer referência a uma ou mais macros, você deverá criar o conjunto de pilhas diretamente do modelo processado, sem primeiro revisar as alterações resultantes em um conjunto de alterações. Para criar ou atualizar o conjunto de pilhas diretamente, é necessário usar a ação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> ou <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> e especificar o recurso <code class="code">CAPABILITY_AUTO_EXPAND</code>. Antes de criar ou atualizar um conjunto de pilhas de um modelo que faça referência a macros diretamente, certifique-se de saber qual processamento as macros executam.</p></div></div>
            </li><li>
                <p>Revise e <a href="./using-cfn-updating-stacks-changesets-execute.html">execute o conjunto de alterações</a>.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Se o modelo do conjunto de pilhas fizer referência a uma ou mais macros, você deverá criar o conjunto de pilhas diretamente do modelo processado, sem primeiro revisar as alterações resultantes em um conjunto de alterações. Para criar ou atualizar o conjunto de pilhas diretamente, é necessário usar a ação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a> ou <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a> e especificar o recurso <code class="code">CAPABILITY_AUTO_EXPAND</code>. Antes de criar ou atualizar um conjunto de pilhas de um modelo que faça referência a macros diretamente, certifique-se de saber qual processamento as macros executam.</p></div></div>
            </li></ol></div>

     
        <h2 id="template-macros-examples-list">Exemplos de macro</h2>
        <p>Além da demonstração <a href="./macros-example.html">Exemplo de macro: criar e usar uma macro</a> neste guia, é possível encontrar exemplos de macros, incluindo código-fonte e modelos, na seção <a href="https://github.com/awslabs/aws-cloudformation-templates/tree/master/aws/services/CloudFormation/MacrosExamples/" rel="noopener noreferrer" target="_blank"><span>Exemplos de macros</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> do repositório <a href="https://github.com/awslabs" rel="noopener noreferrer" target="_blank"><span>Amazon Web Services - Labs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> no GitHub. Esses exemplos são fornecidos "como estão" para fins de instrução.</p>
    <h2 id="template-macros-seealso">Consulte também</h2>
        <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></p>

        <p><a href="./transform-section-structure.html">Transformação</a></p>
        <p><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></p>
        
        <p><a href="./transform-aws-serverless.html">Transformação AWS::Serverless</a></p>
        <p><a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Transformação AWS::Include</a></p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./crpg-ref-requesttypes-update.html">Atualizar</div><div id="next" class="next-link" accesskey="n" href="./macros-example.html">Exemplo de macro: criar e usar uma macro</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>