<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Conceitos básicos - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="GettingStarted.Walkthrough" /><meta name="default_state" content="GettingStarted.Walkthrough" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" /><meta name="description" content="Faça o passo a passo de um modelo para declarar recursos e, em seguida, use-o para criar uma pilha com o AWS CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Conceitos básicos" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Conceitos básicos - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Conceitos básicos do AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Conceitos básicos",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#GettingStarted.Walkthrough.PickTemplate">Etapa 1: Selecionar um modelo</a><a href="#GettingStarted.Walkthrough.prep">Etapa 2: Verificar se você preparou todos os itens necessários para a pilha</a><a href="#GettingStarted.Walkthrough.createstack">Etapa 3: Criar a pilha</a><a href="#GettingStarted.Walkthrough.monitor">Etapa 4: Monitorar o andamento da criação da pilha</a><a href="#GettingStarted.Walkthrough.viewapp">Etapa 5: Usar os recursos da pilha</a><a href="#GettingStarted.Walkthrough.cleanup">Etapa 6: limpar</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="GettingStarted.Walkthrough">Conceitos básicos</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Com o modelo adequado, você pode implantar de uma só vez todos os recursos da AWS necessários para um aplicativo. Nesta seção, você irá examinar um modelo que declara os recursos para um blog WordPress, cria um blog WordPress como uma pilha, monitora o processo de criação da pilha, examina os recursos na pilha e, em seguida, exclui a pilha. Você usa o AWS Management Console para concluir essas tarefas.</p>
      <h2 id="GettingStarted.Walkthrough.PickTemplate">Etapa 1: Selecionar um modelo</h2>

      <p>Primeiro, você precisa de um modelo que especifique os recursos que você deseja em sua pilha. Nesta etapa, você usa um modelo de exemplo que já está preparado. O modelo de exemplo cria um blog WordPress básico que usa uma única instância Amazon EC2 com um banco de dados MySQL local para storage. O modelo também cria um security group do Amazon EC2 para controlar as configurações de firewall para a instância do Amazon EC2.</p>
      <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>O AWS CloudFormation é gratuito, mas os recursos da AWS que o CloudFormation cria são em ambiente de produção (e não em execução em uma sandbox). Você incorrerá nas taxas de uso padrão para esses recursos até que os encerre na última tarefa deste tutorial. O total de cobranças será mínimo. Para obter informações sobre como você pode minimizar qualquer cobrança, consulte <a href="https://aws.amazon.com/free/" rel="noopener noreferrer" target="_blank"><span>http://aws.amazon.com/free/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
      <div class="procedure"><h6>Para visualizar o modelo</h6><ul><li>
            <p>Você pode visualizar o modelo do exemplo WordPress <a href="https://s3.us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.template" rel="noopener noreferrer" target="_blank"><span>JSON</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> ou <a href="https://s3.us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.yaml" rel="noopener noreferrer" target="_blank"><span>YAML</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Você não precisa fazer download porque usará o URL do modelo mais adiante neste guia. Para obter mais informações sobre os formatos de modelos, consulte <a href="./template-formats.html">Formatos de modelo do AWS CloudFormation</a>.</p>
         </li></ul></div>

      <p>Um modelo é um arquivo de texto JSON ou YAML que contém as informações da configuração dos recursos da AWS que você deseja criar na pilha. Para este passo a passo, o modelo de exemplo inclui seis seções de nível superior: <code class="code">AWSTemplateFormatVersion</code>, <code class="code">Description</code>, <code class="code">Parameters</code>, <code class="code">Mappings</code>, <code class="code">Resources</code>, e <code class="code">Outputs</code>. No entanto, somente a seção <code class="code">Resources</code> é necessária.</p>
      <p>A seção Resources contém as definições dos recursos da AWS que você deseja criar com o modelo. Cada recurso é listado separadamente e especifica as propriedades que são necessárias para a criação do recurso específico. A declaração de recurso a seguir é a configuração da instância EC2, que neste exemplo tem o nome lógico de <code class="code">WebServer</code>:</p>
      <div class="example"><h6>exemplo JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Resources" : <span>{</span>
  ...    
  "WebServer": <span>{</span>
    "Type" : "AWS::EC2::Instance",
    "Properties": <span>{</span>
      "ImageId" : <span>{</span> "Fn::FindInMap" : [ "AWSRegionArch2AMI", <span>{</span> "Ref" : "AWS::Region" },
                        <span>{</span> "Fn::FindInMap" : [ "AWSInstanceType2Arch", <span>{</span> "Ref" : "InstanceType" }, "Arch" ] } ] },
      "InstanceType"   : <span>{</span> "Ref" : "InstanceType" },
      "SecurityGroups" : [ <span>{</span>"Ref" : "WebServerSecurityGroup"} ],
      "KeyName"        : <span>{</span> "Ref" : "KeyName" },
      "UserData" : <span>{</span> "Fn::Base64" : <span>{</span> "Fn::Join" : ["", [
                     "#!/bin/bash -xe\n",
                     "yum update -y aws-cfn-bootstrap\n",

                     "/opt/aws/bin/cfn-init -v ",
                     "         --stack ", <span>{</span> "Ref" : "AWS::StackName" },
                     "         --resource WebServer ",
                     "         --configsets wordpress_install ",
                     "         --region ", <span>{</span> "Ref" : "AWS::Region" }, "\n",

                     "/opt/aws/bin/cfn-signal -e $? ",
                     "         --stack ", <span>{</span> "Ref" : "AWS::StackName" },
                     "         --resource WebServer ",
                     "         --region ", <span>{</span> "Ref" : "AWS::Region" }, "\n"
      ]]}}
    },
    ...
  },
  ...  
  "WebServerSecurityGroup" : <span>{</span>
    "Type" : "AWS::EC2::SecurityGroup",
    "Properties" : <span>{</span>
      "GroupDescription" : "Enable HTTP access via port 80 locked down to the load balancer + SSH access",
      "SecurityGroupIngress" : [
        <span>{</span>"IpProtocol" : "tcp", "FromPort" : 80, "ToPort" : 80, "CidrIp" : "0.0.0.0/0"},
        <span>{</span>"IpProtocol" : "tcp", "FromPort" : 22, "ToPort" : 22, "CidrIp" : <span>{</span> "Ref" : "SSHLocation"}}
      ]
    }
  },
  ...    
},</code></pre></div></div>
      <div class="example"><h6>exemplo YAML</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources: 
  ...    
  WebServer:
    Type: AWS::EC2::Instance
    Properties:
      ImageId: !FindInMap [AWSRegionArch2AMI, !Ref 'AWS::Region', !FindInMap [AWSInstanceType2Arch, !Ref InstanceType, Arch]]      
      InstanceType:
        Ref: InstanceType
      KeyName:
        Ref: KeyName
      SecurityGroups:
      - Ref: WebServerSecurityGroup
      UserData:
        Fn::Base64: !Sub |
           #!/bin/bash -xe
           yum update -y aws-cfn-bootstrap
           /opt/aws/bin/cfn-init -v --stack $<span>{</span>AWS::StackId} --resource WebServer --configsets wordpress_install --region $<span>{</span>AWS::Region}
           /opt/aws/bin/cfn-signal -e $? --stack $<span>{</span>AWS::StackId} --resource WebServer --region $<span>{</span>AWS::Region}
    ...
  ...
  
  WebServerSecurityGroup:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: "Enable HTTP access via port 80 locked down to the load balancer + SSH access"
      SecurityGroupIngress:
      - CidrIp: 0.0.0.0/0
        FromPort: 80
        IpProtocol: tcp
        ToPort: 80
      - CidrIp: !Ref SSHLocation
        FromPort: 22
        IpProtocol: tcp
        ToPort: 22
  ...    </code></pre></div></div>
      <p>Se tiver criado instâncias EC2 anteriormente, você poderá reconhecer propriedades, como <code class="code">ImageId</code>, <code class="code">InstanceType</code> e <code class="code">KeyName</code>, que determinam a configuração da instância. As declarações de recursos são uma maneira eficiente de especificar todas essas definições da configuração de uma só vez. Quando você coloca declarações de recursos em um modelo, você pode criar e configurar todos os recursos declarados usando o modelo para criar uma pilha. Crie uma nova pilha que use o mesmo modelo para iniciar a mesma configuração dos recursos.</p>
      <p>A declaração do recurso começa com uma sequência que especifica o nome lógico do recurso. Como você verá, o nome lógico pode ser usado para fazer referência a recursos no modelo.</p>
      <p>Você usa a seção <em>Parameters</em> para declarar valores que podem ser passados para o modelo quando você cria a pilha. Um parâmetro é uma forma eficiente de especificar informações confidenciais, como nomes de usuário e senhas, que você não deseja armazenar no próprio modelo. Essa também é uma maneira de especificar informações que podem ser exclusivas ao aplicativo específico ou à configuração que você está implantando, por exemplo, um nome de domínio ou tipo de instância. Quando você criar a pilha do WordPress posteriormente nesta seção, você verá o conjunto de parâmetros declarados no modelo aparecer na página <b>Especificar detalhes</b> do assistente <b>Criar pilha</b>, onde você pode especificar os parâmetros antes de criar a pilha.</p>
      <p>Os parâmetros a seguir são usados no modelo para especificar os valores que são usados em propriedades da instância EC2:</p>
      <div class="example"><h6>exemplo JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Parameters" : <span>{</span>
  ...      
  "KeyName": <span>{</span>
    "Description" : "Name of an existing EC2 KeyPair to enable SSH access to the instances",
    "Type": "AWS::EC2::KeyPair::KeyName",
    "ConstraintDescription" : "must be the name of an existing EC2 KeyPair."
  },

  "InstanceType" : <span>{</span>
    "Description" : "WebServer EC2 instance type",
    "Type" : "String",
    "Default" : "t2.small",
       "AllowedValues": [
        "t1.micro",
        "t2.nano",
        "t2.micro",
        "t2.small",
        "t2.medium",
        "t2.large",
        "m1.small",
        "m1.medium",
        "m1.large",
        "m1.xlarge",
        "m2.xlarge",
        "m2.2xlarge",
        "m2.4xlarge",
        "m3.medium",
        "m3.large",
        "m3.xlarge",
        "m3.2xlarge",
        "m4.large",
        "m4.xlarge",
        "m4.2xlarge",
        "m4.4xlarge",
        "m4.10xlarge",
        "c1.medium",
        "c1.xlarge",
        "c3.large",
        "c3.xlarge",
        "c3.2xlarge",
        "c3.4xlarge",
        "c3.8xlarge",
        "c4.large",
        "c4.xlarge",
        "c4.2xlarge",
        "c4.4xlarge",
        "c4.8xlarge",
        "g2.2xlarge",
        "g2.8xlarge",
        "r3.large",
        "r3.xlarge",
        "r3.2xlarge",
        "r3.4xlarge",
        "r3.8xlarge",
        "i2.xlarge",
        "i2.2xlarge",
        "i2.4xlarge",
        "i2.8xlarge",
        "d2.xlarge",
        "d2.2xlarge",
        "d2.4xlarge",
        "d2.8xlarge",
        "hi1.4xlarge",
        "hs1.8xlarge",
        "cr1.8xlarge",
        "cc2.8xlarge",
        "cg1.4xlarge"
       ],
    "ConstraintDescription" : "must be a valid EC2 instance type."
  },
...</code></pre></div></div>
      <div class="example"><h6>exemplo YAML</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  ...      
  KeyName:
    ConstraintDescription: must be the name of an existing EC2 KeyPair.
    Description: Name of an existing EC2 KeyPair to enable SSH access to the instances
    Type: AWS::EC2::KeyPair::KeyName
  InstanceType:
    AllowedValues:
    - t1.micro
    - t2.nano
    - t2.micro
    - t2.small
    - t2.medium
    - t2.large
    - m1.small
    - m1.medium
    - m1.large
    - m1.xlarge
    - m2.xlarge
    - m2.2xlarge
    - m2.4xlarge
    - m3.medium
    - m3.large
    - m3.xlarge
    - m3.2xlarge
    - m4.large
    - m4.xlarge
    - m4.2xlarge
    - m4.4xlarge
    - m4.10xlarge
    - c1.medium
    - c1.xlarge
    - c3.large
    - c3.xlarge
    - c3.2xlarge
    - c3.4xlarge
    - c3.8xlarge
    - c4.large
    - c4.xlarge
    - c4.2xlarge
    - c4.4xlarge
    - c4.8xlarge
    - g2.2xlarge
    - g2.8xlarge
    - r3.large
    - r3.xlarge
    - r3.2xlarge
    - r3.4xlarge
    - r3.8xlarge
    - i2.xlarge
    - i2.2xlarge
    - i2.4xlarge
    - i2.8xlarge
    - d2.xlarge
    - d2.2xlarge
    - d2.4xlarge
    - d2.8xlarge
    - hi1.4xlarge
    - hs1.8xlarge
    - cr1.8xlarge
    - cc2.8xlarge
    - cg1.4xlarge
    ConstraintDescription: must be a valid EC2 instance type.
    Default: t2.small
    Description: WebServer EC2 instance type
    Type: String
...</code></pre></div></div>
      <p>Na declaração de recurso <code class="code">WebServer</code>, você vê a propriedade <code class="code">KeyName</code> especificada com o parâmetro <code class="code">KeyName</code>:</p>
      <div class="example"><h6>exemplo JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"WebServer" : <span>{</span>
  "Type": "AWS::EC2::Instance",
  "Properties": <span>{</span>
    "KeyName" : <span>{</span> "Ref" : "KeyName" },
    ...
  }
},</code></pre></div></div>
      <div class="example"><h6>exemplo YAML</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">WebServer:
  Type: AWS::EC2::Instance
  Properties:
    KeyName:
      Ref: KeyName
    ...</code></pre></div></div>
      <p>As chaves contêm uma chamada para a função <a href="./intrinsic-function-reference-ref.html">Ref</a> com <code class="code">KeyName</code> como sua entrada. A função Ref retorna o valor do objeto a que se refere. Nesse caso, a função Ref define a propriedade <code class="code">KeyName</code> como o valor que foi especificado para <code class="code">KeyName</code> quando a pilha foi criada.</p>
      <p>A função Ref também pode definir uma propriedade do recurso como o valor de outro recurso. Por exemplo, a declaração de recurso <code class="code">WebServer</code> contém a seguinte declaração de propriedade:</p>
      <div class="example"><h6>exemplo JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"WebServer" : <span>{</span>
  "Type": "AWS::EC2::Instance",
  "Properties": <span>{</span>
    ...
    "SecurityGroups" : [ <span>{</span>"Ref" : "WebServerSecurityGroup"} ],
    ...
  }
},</code></pre></div></div>
      <div class="example"><h6>exemplo YAML</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">WebServer:
  Type: AWS::EC2::Instance
  Properties:
    SecurityGroups:
    - Ref: WebServerSecurityGroup
    ...</code></pre></div></div>
      <p>A propriedade <code class="code">SecurityGroups</code> usa uma lista de security groups do EC2. A função Ref tem uma entrada de <code class="code">WebServerSecurityGroup</code>, que é o nome lógico de um security group no modelo e adiciona o nome de <code class="code">WebServerSecurityGroup</code> à propriedade <code class="code">SecurityGroups</code>.</p>
      <p>No modelo, você também encontrará uma seção <em>Mappings</em>. Você usa mapeamentos para declarar valores condicionais que são avaliados de maneira semelhante a uma instrução de tabela de pesquisa. O modelo usa mapeamentos para selecionar a Imagem de máquina da Amazon (AMI) correta para a região e o tipo de arquitetura para o tipo de instância. <em>As saídas</em> definem valores personalizados que são retornados pelo comando <code class="code">aws cloudformation describe-stacks</code> na guia <b>Saídas</b> do console do CloudFormation depois da criação da pilha. Você pode usar os valores de saída para retornar informações dos recursos na pilha, como o URL de um site que foi criado no modelo. Abordamos mapeamentos, saídas e outros tópicos sobre modelos em mais detalhes em <a href="./gettingstarted.templatebasics.html">Saiba mais sobre noções básicas de modelo</a>.</p>
      <p>Isso é o suficiente sobre modelos por enquanto. Vamos começar a criar uma pilha.</p>
    
      <h2 id="GettingStarted.Walkthrough.prep">Etapa 2: Verificar se você preparou todos os itens necessários para a pilha</h2>


      <p>Antes de criar uma pilha a partir de um modelo, você deve garantir que todos os recursos dependentes de que o modelo precisa estejam disponíveis. Um modelo pode usar ou fazer referência aos recursos da AWS existentes e aos recursos declarados no próprio modelo. O CloudFormation cuida da verificação de referências a recursos no modelo e também verifica referências a recursos existentes para garantir que eles existam na região em que você está criando a pilha. Se seu modelo fizer referência a um recurso dependente que não existe, haverá falha na criação da pilha.</p>

      <p>O modelo do exemplo WordPress contém um parâmetro de entrada, <code class="code">KeyName</code>, que especifica o par de chaves usadas para a instância do Amazon EC2 que é declarada no modelo. O modelo depende do usuário que cria uma pilha a partir do modelo para fornecer um par de chaves válido do Amazon EC2 para o parâmetro <code class="code">KeyName</code>. Se você fornecer um nome de par de chaves válido, a pilha será criada com êxito. Se você não fornecer um nome do par de chaves válido, a pilha será revertida.</p>

      <p>Verifique se você tem um par de chaves do Amazon EC2 válido e registre o nome do par de chaves antes de criar a pilha.</p>
      <p>Para ver seus pares de chaves, abra o console do Amazon EC2 e em seguida clique em <b>Pares de chaves</b> no painel de navegação.</p>

      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se não tiver um par de chaves do Amazon EC2, você deverá o par de chaves na mesma região em que está criando a pilha. Para obter informações sobre como criar um par de chaves, consulte <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair">Obter um par de chaves SSH</a> no <em>Guia do usuário do Amazon EC2 para instâncias do Linux</em>.</p></div></div>

      <p>Agora que você tem um par de chaves, vamos usar o modelo do WordPress para criar uma pilha.</p>

    
      <h2 id="GettingStarted.Walkthrough.createstack">Etapa 3: Criar a pilha</h2>

      <p>Você criará a pilha com base no arquivo <em>WordPress-1.0.0</em> discutido anteriormente. O modelo contém vários recursos da AWS, como uma instância EC2.</p>
      <div class="procedure"><h6>Para criar a pilha do WordPress</h6><ol><li><p>Faça login no AWS Management Console e abra o console AWS CloudFormation em <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
            <p>Selecione <b>Create Stack</b> (Criar pilha).</p>
         </li><li>
            <p>Na seção <b>Specify template</b> (Especificar modelo), selecione <b>Amazon S3 Template URL</b> (URL do modelo do Amazon S3) para digitar ou copiar e colar o URL do modelo de amostra do WordPress e, em seguida, clique em <b>Next</b> (Próximo):</p>
            <p><code class="code">https://s3.us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.template</code></p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Os modelos do AWS CloudFormation que estão armazenados em um bucket do S3 devem estar acessíveis ao usuário que está criando a pilha e devem estar localizados na <em>mesma região</em> da pilha que está sendo criada. Portanto, se o bucket do S3 estiver localizado na região <span>us-east-2</span>, a pilha também deverá ser criada em <span>us-east-2</span>.</p></div></div>
         </li><li>
            <p>Na seção <b>Specify stack details</b> (Especificar detalhes da tarefa), insira o nome de uma pilha no campo <b>Stack name</b> (Nome da pilha). Neste exemplo, use <code class="userinput">MyWPTestStack</code>. O nome da pilha não pode conter espaços.</p>
         </li><li>
            <p>Na seção <b>Parameters</b> (Parâmetros ), é necessário fornecer valores para todos os parâmetros que não tenham valores padrão, entre eles <b>DBUser</b>, <b>DBPassword</b>, <b>DBRootPassword</b> e <b>KeyName</b>. No campo <b>KeyName</b>, insira o nome de um par válido do Amazon EC2 na mesma região em que você está criando a pilha.</p>
         </li><li>
            <p>Escolha <b>Próximo</b>.</p>
         </li><li>
            <p>Neste cenário, não vamos adicionar tags. Escolha <b>Próximo</b>. As tags, que são pares de chave/valor, podem ajudar você a identificar suas pilhas. Para mais informações, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-add-tags.html"> Adicionar tags à pilha do CloudFormation</a>.</p>
         </li><li>
            <p>Revise as informações da pilha. Quando estiver satisfeito com as configurações, clique em <b>Submit (Enviar)</b>.</p>
         </li></ol></div>
      <p>Sua pilha pode demorar vários minutos para ser criada, mas você provavelmente não vai querer ficar sentado esperando. Se você for como nós, você desejará saber como está o andamento da criação da pilha.</p>
    
      <h2 id="GettingStarted.Walkthrough.monitor">Etapa 4: Monitorar o andamento da criação da pilha</h2>

      <p>Depois de concluir o Assistente de <b>criação de pilha</b>, o CloudFormation começa a criar os recursos que são especificados no modelo. Sua nova pilha, <code class="code">MyWPTestStack</code>, aparecerá na lista na parte superior do console do <b>CloudFormation</b>. O status deve ser CREATE_IN_PROGRESS. Você pode ver o status detalhado de uma pilha visualizando seus eventos.</p>
      <div class="procedure"><h6>Para visualizar os eventos da pilha</h6><ol><li>
            <p>No console do CloudFormation, selecione a pilha <code class="code">MyWPTestStack</code> na lista.</p>
         </li><li>
            <p>No painel de detalhes da pilha, clique na guia <b>Eventos</b>.</p>
            <p>O console atualiza automaticamente a lista de eventos com os eventos mais recentes a cada 60 segundos.</p>
         </li></ol></div>
      <p>A guia <b>Events</b> (Eventos) exibe cada etapa principal da criação da pilha classificada pelo tempo de cada evento, com os eventos mais recentes na parte superior.</p>
      <p>O primeiro evento (na parte inferior da lista de eventos) é o início do processo de criação da pilha:</p>
      <p><code class="code">2013-04-24 18:54 UTC-7 CREATE_IN_PROGRESS AWS::CloudFormation::Stack MyWPTestStack
            User initiated</code></p>
      <p>Em seguida, estão os eventos que marcam o início e a conclusão da criação de cada recurso. Por exemplo, a criação da instância EC2 resulta nas seguintes entradas:</p>
      <p><code class="code">2013-04-24 18:59 UTC-7 CREATE_COMPLETE AWS::EC2::Instance...</code></p>
      <p><code class="code">2013-04-24 18:54 UTC-7 CREATE_IN_PROGRESS AWS::EC2::Instance...</code></p>
      <p>O evento <code class="code">CREATE_IN_PROGRESS</code> é registrado quando o CloudFormation relata que começou a criar o recurso. O evento <code class="code">CREATE_COMPLETE</code> é registrado em log quando o recurso é criado com êxito.</p>
      <p>Quando o CloudFormation tiver criado a pilha com êxito, você verá o seguinte evento na parte superior da guia <b>Eventos</b>:</p>
      <p><code class="code">2013-04-24 19:17 UTC-7 CREATE_COMPLETE AWS::CloudFormation::Stack
            MyWPTestStack</code></p>

      <p>Se não puder criar um recurso, o CloudFormation relatará um evento <code class="code">CREATE_FAILED</code> e, por padrão, reverterá a pilha e excluirá todos os recursos que foram criados. A coluna <b>Status Reason</b> (Motivo do status) exibe o problema que provocou a falha.</p>

    
      <h2 id="GettingStarted.Walkthrough.viewapp">Etapa 5: Usar os recursos da pilha</h2>

      <p>Quando a pilha <code class="code">MyWPTestStack</code> tiver um status <code class="code">CREATE_COMPLETE</code>, o CloudFormation terá concluído a criação da pilha, e você poderá começar a usar os recursos dela.</p>
      <p>O exemplo da pilha WordPress cria um site WordPress. Você pode continuar com a configuração do WordPress executando o script de instalação do WordPress.</p>
      <div class="procedure"><h6>Para concluir a instalação do WordPress</h6><ol><li>
            <p>Na guia <b>Saídas</b>, na linha <b>WebsiteURL</b>, escolha o link na coluna <b>Valor</b>.</p>
            <p>O valor da saída de <code class="code">WebsiteURL</code> é o URL do script de instalação do site WordPress que você criou com a pilha.</p>
         </li><li>
            <p>Na página da web da instalação do WordPress, siga as instruções da tela para concluir a instalação do WordPress. Para obter mais informações sobre como instalar o WordPress, consulte <a href="https://wordpress.org/support/article/how-to-install-wordpress/" rel="noopener noreferrer" target="_blank"><span>https://wordpress.org/support/article/how-to-install-wordpress/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
            <p>Depois de concluir a instalação e fazer login, você é direcionado para o painel no qual você pode definir opções adicionais para seu blog WordPress. Em seguida, você poderá começar a escrever posts no blog que você criou com êxito usando um modelo do CloudFormation.</p>
         </li></ol></div>
    
      <h2 id="GettingStarted.Walkthrough.cleanup">Etapa 6: limpar</h2>

      <p>Você concluiu as tarefas de conceitos básicos do CloudFormation. Para ter certeza de que você não será cobrado por qualquer serviço não desejado, poderá fazer uma limpeza excluindo a pilha e os recursos dela.</p>
      <div class="procedure"><h6>Para excluir a pilha e seus recursos</h6><ol><li>
            <p>No console do CloudFormation, selecione a pilha <code class="code">MyWPTestStack</code>.</p>
         </li><li>
            <p>Escolha <b>Delete Stack</b>.</p>

         </li><li>
            <p>Na mensagem de confirmação exibida, escolha <b>Yes, Delete</b> (Sim, excluir).</p>
         </li></ol></div>
      <p>O status de <code class="code">MyWPTestStack</code> é alterado para <code class="code">DELETE_IN_PROGRESS</code>. Da mesma forma que você monitorou a criação da pilha, você pode monitorar sua exclusão usando a guia <b>Evento</b>. Quando o CloudFormation conclui a exclusão da pilha, ela é removida da lista.</p>
      <p>Parabéns! Você selecionou um modelo com êxito, criou uma pilha, visualizou e usou seus recursos e excluiu a pilha e seus recursos. Além disso, você pôde configurar um blog do WordPress usando um modelo do CloudFormation. Você pode encontrar outros modelos na <a href="https://aws.amazon.com/cloudformation/aws-cloudformation-templates/" rel="noopener noreferrer" target="_blank"><span>Biblioteca de modelos de exemplo do AWS CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
      <p>Agora está na hora de aprender mais sobre modelos para que você possa modificar modelos existentes ou criar seus próprios modelos: <a href="./gettingstarted.templatebasics.html">Saiba mais sobre noções básicas de modelo</a>.</p>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./GettingStarted.html">Conceitos básicos</div><div id="next" class="next-link" accesskey="n" href="./gettingstarted.templatebasics.html">Saiba mais sobre noções básicas de modelo</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>