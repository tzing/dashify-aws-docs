<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Como usar o registro do AWS CloudFormation - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="registry" /><meta name="default_state" content="registry" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/registry.html" /><meta name="description" content="O registro do CloudFormation permite gerenciar as extensões, privadas e públicas, que estão disponíveis para uso na sua conta do CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/registry.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/registry.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Como usar o registro do AWS CloudFormation" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Como usar o registro do AWS CloudFormation - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/registry.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/registry.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/registry.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Como usar o registro do AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/registry.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#registry-public-private">Extensões públicas e privadas</a><a href="#registry-view">Gerenciar extensões por meio do registro do CloudFormation</a><a href="#registry-config-record">Registrar tipos de recursos em AWS Config</a><a href="#cross-service-confused-deputy-prevention">Confused deputy</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="registry">Como usar o registro do AWS CloudFormation</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>O registro do CloudFormation permite gerenciar extensões, públicas e privadas, como recursos, módulos e hooks que estão disponíveis para uso na sua Conta da AWS. No momento, é possível utilizar os seguintes tipos de extensões no registro da AWS: <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-types.html">tipos de recursos</a>, <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/modules.html">módulos</a> e <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/hooks-userguide/what-is-cloudformation-hooks.html">hooks</a>. O registro facilita a descoberta e o provisionamento de extensões nos seus modelos do AWS CloudFormation da mesma maneira que você usa recursos fornecidos pela AWS.</p>
        <h2 id="registry-public-private">Extensões públicas e privadas</h2>
        <p>Tipos de extensões são registrados como públicas ou privadas. Atualmente, o registro oferece os seguintes tipos de extensões:</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><em><a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-types.html">Tipos de recursos</a></em>: modelam e provisionam a lógica personalizada como um recurso utilizando pilhas no CloudFormation.</p>
            </li><li class="listitem">
                <p><em><a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/modules.html">Módulos</a></em>: empacotam configurações de recursos para inclusão entre modelos de pilhas, de maneira transparente, gerenciável e repetível.</p>
            </li><li class="listitem">
                <p><em><a href="https://docs.aws.amazon.com/cloudformation-cli/latest/hooks-userguide/what-is-cloudformation-hooks.html">Hooks</a></em>: inspecionam proativamente a configuração dos seus recursos da AWS antes do provisionamento.</p>
            </li></ul></div>
         
            <h3 id="registry-public-extensions">Tipos de extensões públicas</h3>
            <p>Extensões <em>públicas</em> são aquelas publicadas publicamente no registro para uso por todos os usuários do CloudFormation. Isso inclui extensões publicadas pela AWS e por editores de extensões de terceiros.</p>
            <p>Existem dois tipos de extensões públicas:</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><em>Extensões públicas da AWS</em>: extensões publicadas pela AWS são sempre públicas e estão ativadas por padrão. Dessa forma, você não precisa tomar nenhuma medida antes de utilizá-los em sua conta. Além disso, a AWS controla o versionamento da extensão, para que você esteja sempre utilizando a versão mais recente disponível.</p>
                </li><li class="listitem">
                    <p><em>Extensões públicas de terceiros</em>: são extensões disponibilizadas para uso geral por editores diferentes da AWS.</p>

                </li></ul></div>
            <p>Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/registry-public.html">Usar extensões públicas</a>.</p>
         
         
            <h3 id="registry-private-extensions">Tipos de extensões privadas</h3>
            <p>Extensões <em>privadas</em> são as extensões de terceiros que você ativou explicitamente para uso na sua Conta da AWS.</p>
            <p>Existem dois tipos de extensões privadas:</p>
            <div class="itemizedlist">
                 
                 

            <ul class="itemizedlist"><li class="listitem">
                    <p><em>Extensões privadas ativadas</em>: são cópias locais de extensões de terceiros que você ativou para a sua conta e região. Quando você ativa uma extensão pública de terceiros, o CloudFormation cria uma cópia local dela no registro da sua conta.</p>
                </li><li class="listitem">
                    <p><em>Extensões privadas registradas</em>: também é possível ativar extensões privadas que não estão listadas no registro público do CloudFormation. Estas podem ser extensões que você mesmo criou ou extensões que foram compartilhadas com você pela sua organização ou por terceiros. Para utilizar uma extensão privada na sua conta, primeiro é preciso registrá-la. O registro da extensão carrega uma cópia dela no registro do CloudFormation na sua conta e a ativa.</p>
                </li></ul></div>
            <p>Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/registry-private.html">Usar extensões privadas</a>.</p>

         


     
        <h2 id="registry-view">Gerenciar extensões por meio do registro do CloudFormation</h2>
        <p>Use o registro do CloudFormation para gerenciar as extensões em sua conta, incluindo:</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Visualizar as extensões disponíveis e ativadas.</p>
            </li><li class="listitem">
                <p>Registrar extensões privadas.</p>
            </li><li class="listitem">
                <p>Ativar extensões públicas.</p>
            </li></ul></div>
         
            <h3 id="registry-view-procedure">Para visualizar extensões no console do CloudFormation</h3>
         
        <div class="procedure"><ol><li><p>Faça login no AWS Management Console e abra o console AWS CloudFormation em <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
                <p>No painel de navegação do <b>CloudFormation</b>, em <b>Registry</b> (Registro), selecione a categoria da extensão que você deseja visualizar:</p>
                <div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><b>Public extensions</b> (Extensões públicas) exibe as extensões públicas disponíveis na sua conta.</p>
                        <div class="orderedlist">
                             
                             
                             
                        <ol><li>
                                <p>Escolha o tipo de extensão: <b>Tipos de recursos</b> ,<b>Módulos</b> ou <b>Hooks</b>.</p>
                            </li><li>
                                <p>Escolha seu editor: <b>AWS</b> ou <b>Third party</b> (Terceiros).</p>
                            </li><li>
                                <p>Use as opções em <b>Filter</b> (Filtro) para selecionar mais extensões a serem visualizadas.</p>
                            </li></ol></div>
                    </li><li class="listitem">
                        <p><b>Activated extensions</b> (Extensões ativadas) exibe extensões públicas e privadas ativadas na sua conta.</p>
                        <div class="orderedlist">
                             
                             
                        <ol><li>
                                <p>Escolha o tipo de extensão: <b>Resource types</b> (Tipos de recursos) ,<b>Modules</b> (Módulos) ou <b>Hooks</b> (Ganchos).</p>
                            </li><li>
                                <p>Use o menu suspenso <b>Filter</b> (Filtro) para selecionar mais extensões a serem visualizadas:</p>
                                <div class="itemizedlist">
                                     
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p><b>AWS</b>: lista extensões publicadas pela AWS. Extensões publicadas pela AWS são ativadas por padrão.</p>
                                    </li><li class="listitem">
                                        <p><b>Third-party</b> (Terceiros): lista todas as extensões públicas de editores diferentes da AWS que você ativou nesta conta.</p>
                                    </li><li class="listitem">
                                        <p><b>Registered</b> (Registradas): lista todas as extensões privadas que você ativou nesta conta.</p>
                                    </li></ul></div>
                            </li></ol></div>


                    </li><li class="listitem">
                        <p><b>Publisher</b> (Editor): exibe todas as extensões públicas que você publicou utilizando essa conta. Para saber mais, consulte <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/publish-extension.html">Publicar extensões</a>, no <em>Guia do usuário para desenvolvimento de extensões</em>.</p>
                    </li></ul></div>
            </li><li>
                <p>Pesquise ou selecione o nome da extensão para ver seus detalhes.</p>
            </li></ol></div>
     
        <h2 id="registry-config-record">Registrar tipos de recursos em AWS Config</h2>
        <p>Você pode especificar que o AWS Config rastreie automaticamente seus tipos de recursos privados e registre alterações nesses recursos como <em>itens de configuração</em>. Isso permite visualizar o histórico de configuração desses tipos de recursos privados, bem como gravar regras do Regras do AWS Config para verificar as práticas recomendadas de configuração. O AWS Config é necessário para a extensão de hooks.</p>
        <p>Para que o AWS Config rastreie automaticamente seus tipos de recursos privados:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Gerencie os recursos por meio do CloudFormation. Isso inclui a execução de todas as operações de criação, atualização e exclusão de recursos por meio do CloudFormation.</p>
                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se você usar uma função do IAM para executar suas operações de pilha, ela deverá ter permissão para chamar as seguintes ações do AWS Config:</p><div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p><a href="https://docs.aws.amazon.com/config/latest/APIReference/API_PutResourceConfig.html">PutResourceConfig</a></p>
                        </li><li class="listitem">
                            <p><a href="https://docs.aws.amazon.com/config/latest/APIReference/API_DeleteResourceConfig.html">DeleteResourceConfig</a></p>
                        </li></ul></div></div></div>
            </li><li class="listitem">
                <p>Configure o AWS Config para registrar todos os tipos de recursos. Para mais informações, consulte <a href="https://docs.aws.amazon.com/config/latest/developerguide/customresources.html">Registrar configurações para recursos de terceiros</a> no <em>Guia do desenvolvedor do AWS Config</em>.</p>
                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>O AWS Config não oferece suporte ao registro de recursos privados que contém propriedades definidas como obrigatórias <em>e</em> somente gravação.</p><p>Por design, as propriedades de recurso definidas como somente gravação não são retornadas no esquema usado para criar o item de configuração do AWS Config. Devido a isso, incluir uma propriedade definida como somente gravação e como necessária fará com que a criação do item de configuração falhe, uma vez que uma propriedade necessária não estará presente. Para visualizar o esquema que será usado para criar o item de configuração, você pode revisar a propriedade <code class="code">schema</code> da ação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeType.html"><code class="code">DescribeType</code></a>.</p></div></div>
            </li></ul></div>
        <p>Para mais informações sobre itens de configuração, consulte <a href="https://docs.aws.amazon.com/config/latest/developerguide/config-concepts.html#config-items">Itens de configuração</a> no <em>Guia do desenvolvedor do AWS Config</em>.</p>
         
            <h3 id="registry-config-record-sensitive">Impedir que propriedades confidenciais sejam registradas em um item de configuração</h3>
            <p>Seu tipo de recurso pode conter propriedades que você considere informações confidenciais, como senhas, segredos ou outros dados confidenciais, e que não queira registrar como parte do item de configuração. Para impedir que uma propriedade seja registrada no item de configuração, inclua essa propriedade na lista <code class="code">writeOnlyproperties</code> no esquema de tipo de recurso. Propriedades de recurso listadas como <code class="code">writeOnlyproperties</code> podem ser especificadas pelo usuário, mas não serão retornadas por uma solicitação <code class="code">read</code> ou <code class="code">list</code>.</p>
            <p>Para mais informações, consulte <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-type-schema.html#schema-properties-writeonlyproperties">Esquema do provedor de recursos</a> no <em>Guia do usuário da interface de linha de comando do CloudFormation</em>.</p>
         
     
    <h2 id="cross-service-confused-deputy-prevention">Prevenção contra representante confuso</h2>
    <p>‘Confused deputy’ é um problema de segurança em que uma entidade que não tem permissão para executar uma ação pode coagir uma entidade com mais privilégios a executá-la. Na AWS, a personificação entre serviços pode resultar no problema do ‘confused deputy’. A imitação entre serviços pode ocorrer quando um serviço (o <em>serviço de chamada</em>) chama outro serviço (o <em>serviço chamado</em>). O serviço de chamada pode ser manipulado de modo a usar suas permissões para atuar nos recursos de outro cliente de uma forma na qual ele não deveria ter permissão para acessar. Para evitar isso, a AWS fornece ferramentas que ajudam você a proteger seus dados para todos os serviços com entidades principais de serviço que receberam acesso aos recursos em sua conta.</p>
    <p>Recomendamos o uso das chaves de contexto de condição global <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html#condition-keys-sourcearn"><code class="code">aws:SourceArn</code></a> e <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html#condition-keys-sourceaccount"><code class="code">aws:SourceAccount</code></a> em políticas de recursos para limitar as permissões que o AWS CloudFormation concede a outro serviço no recurso para a extensão. Se o valor <code class="code">aws:SourceArn</code> não contiver o ID da conta, como um nome do recurso da Amazon (ARN) do bucket do Amazon S3, você deverá usar ambas as chaves de contexto de condição global para limitar as permissões. Se você utilizar ambas as chaves de contexto de condição global e o valor de <code class="code">aws:SourceArn</code> contiver o ID da conta, o valor de <code class="code">aws:SourceAccount</code> e a conta no valor de <code class="code">aws:SourceArn</code> deverão utilizar o mesmo ID de conta quando utilizados na mesma declaração da política. Utilize <code class="code">aws:SourceArn</code> se quiser que apenas um recurso seja associado ao acesso entre serviços. Use <code class="code">aws:SourceAccount</code> se quiser permitir que qualquer recurso nessa conta seja associado ao uso entre serviços.</p>
    <p>O valor de <code class="code">aws:SourceArn</code> deve utilizar o ARN da extensão.</p>
    <p>A maneira mais eficaz de se proteger contra o problema do substituto confuso é usar a chave de contexto de condição global <code class="code">aws:SourceArn</code> com o ARN completo do recurso. Se você não souber o ARN completo da extensão ou estiver especificando várias extensões, use a chave de condição de contexto global <code class="code">aws:SourceArn</code> com curingas (<code class="code">*</code>) para as partes desconhecidas do ARN. Por exemplo, <code class="code">arn:aws:<code class="replaceable">cloudformation</code>:*:<code class="replaceable">123456789012</code>:*</code>.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Para serviços de registro, o CloudFormation faz chamadas para AWS Security Token Service (AWS STS) para assumir uma função na sua conta. Este perfil é configurado para <code class="code">ExecutionRoleArn</code> na operação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_RegisterType.html"><code class="code">RegisterType</code></a> e definido como <code class="code">LogRoleArn</code> na operação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_LoggingConfig.html"><code class="code">LoggingConfig</code></a>.</p></div></div>
    <p>O exemplo a seguir mostra como é possível usar as chaves de contexto de condição globais <code class="code">aws:SourceArn</code> e <code class="code">aws:SourceAccount</code> no AWS CloudFormation para evitar o problema confused deputy.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Principal": <span>{</span>
        "Service": [
          "resources.cloudformation.amazonaws.com"
        ]
      },
      "Action": "sts:AssumeRole",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:SourceAccount": "<code class="replaceable">123456789012</code>"
        },
        "StringLike": <span>{</span>
          "aws:SourceArn": "arn:aws:cloudformation:<code class="replaceable">us-east-1:123456789012</code>:type/resource/Organization-Service-Resource/*"
        }
      }
    }
  ]
}</code></pre>
<awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./git-sync-status.html">Painel de status</div><div id="next" class="next-link" accesskey="n" href="./registry-private.html">Usar extensões privadas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/registry.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/registry.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>