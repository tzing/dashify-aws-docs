<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Gerar modelos para recursos existentes - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="generate-IaC" /><meta name="default_state" content="generate-IaC" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html" /><meta name="description" content="Gere modelos de infraestrutura como código (IaC) com base em tipos de recursos da AWS implantados em sua conta que não são gerenciados pelo CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/generate-IaC.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Gerar modelos para recursos existentes" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Gerar modelos para recursos existentes - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações,Gerador de IaC,Gerador de IaC do AWS CloudFormation" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabalhar com modelos do AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Gerar modelos para recursos existentes",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-guide.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#generate-template-considerations">Considerações</a><a href="#generate-template-console">Gerar um modelo (console)</a><a href="#generate-template-cli">Gerar um modelo (AWS CLI)</a><a href="#generate-IaC-cdk-migrate">Gere e gerencie modelos com o AWS CDK</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="generate-IaC">Gerar modelos para recursos existentes</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Com o <em>gerador de IaC</em> (gerador de infraestrutura como código) do AWS CloudFormation, é possível gerar um modelo usando recursos da AWS provisionados em sua conta que ainda não são gerenciados pelo CloudFormation. Use o modelo para importar recursos para o CloudFormation ou replicar recursos em uma nova conta ou região.</p><p>O processo de geração de IaC consiste em várias etapas:</p><div class="orderedlist">
   
   
   
   
 <ol><li>
   <p>Inicie uma varredura da sua conta.</p>
  </li><li>
   <p>Crie um modelo do zero ou usando o modelo de uma pilha existente como ponto de partida.</p>
  </li><li>
   <p>Adicione recursos digitalizados e recursos relacionados ao modelo usando o <em>assistente de adição de recursos</em>.</p>
  </li><li>
   <p>Importe os recursos a serem gerenciados pelo CloudFormation como uma pilha ou migre-os para uma aplicação do AWS CDK.</p>
  </li></ol></div><p>O recurso de gerador de IaC está disponível em todas as regiões comerciais e oferece suporte a muitos tipos de recursos comuns da AWS. Para obter uma lista completa, consulte <a href="./resource-import-supported-resources.html">Suporte a tipos de recursos</a>.</p><div class="highlights"><h6>Tópicos</h6><ul><li><a href="#generate-template-considerations">Considerações</a></li><li><a href="#generate-template-console">Gerar um modelo (console)</a></li><li><a href="#generate-template-cli">Gerar um modelo (AWS CLI)</a></li><li><a href="#generate-IaC-cdk-migrate">Gere e gerencie modelos com o AWS CDK</a></li><li><a href="./generate-IaC-write-only-properties.html">Gerador de IaC e propriedades somente gravação</a></li><li><a href="./generate-IaC-lambda-function.html">Atualizar recursos AWS::Lambda::Function</a></li><li><a href="./generate-IaC-apigateway-restapi.html">Atualizar recursos AWS::ApiGateway::RestAPI</a></li></ul></div>
  <h2 id="generate-template-considerations">Considerações</h2>
  <p>É possível gerar modelos <code class="code">JSON</code> ou <code class="code">YAML</code> para recursos da AWS publicados no registro do CloudFormation para os quais você tem permissões de leitura. Os modelos do recurso de gerador de IaC preparam recursos de nuvem de forma confiável e rápida, sem que seja necessário descrever um recurso propriedade por propriedade.</p>
  <p>A tabela a seguir lista as cotas disponíveis para o recurso de geração de IaC.</p>
  <div class="table-container"><div class="table-contents"><table id="w1348aac17c25c15b7"><thead>
     <tr>
      <th>Nome</th>
      <th>Valor</th>
     </tr>
    </thead>
     <tr>
      <td tabindex="-1">
       <p>Número máximo de usuários que podem ser processados em uma varredura de conta</p>
      </td>
      <td tabindex="-1">
       <p>100000</p>
      </td>
     </tr>
     <tr>
      <td tabindex="-1">
       <p>Número de varreduras por dia (para contas com menos de 10.000 recursos)</p>
      </td>
      <td tabindex="-1">
       <p>3</p>
      </td>
     </tr>
     <tr>
      <td tabindex="-1">
       <p>Número de varreduras por dia (para contas com mais de 10.000 recursos)</p>
      </td>
      <td tabindex="-1">
       <p>1</p>
      </td>
     </tr>
     <tr>
      <td tabindex="-1">
       <p>Número simultâneo de modelos gerados por conta</p>
      </td>
      <td tabindex="-1">
       <p>5</p>
      </td>
     </tr>
     <tr>
      <td tabindex="-1">
       <p>Número simultâneo de recursos modelados para uma geração de modelo.</p>
      </td>
      <td tabindex="-1">
       <p>5</p>
      </td>
     </tr>
     <tr>
      <td tabindex="-1">
       <p>Número total de recursos que podem ser modelados em um modelo</p>
      </td>
      <td tabindex="-1">
       <p>500</p>
      </td>
     </tr>
    </table></div></div>
  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>O gerador de IaC só é compatível com recursos compatíveis com a API do Cloud Control na sua região. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/cloudcontrolapi/latest/userguide/resource-types.html#resource-types-determine-support">Como determinar se um tipo de recurso é compatível com o Cloud Control API</a> no <em>Guia do usuário do Cloud Control API</em></p></div></div>
  
  <h2 id="generate-template-console">Gerar um modelo (console)</h2>
  <p>Esta seção descreve como criar um modelo, adicionar recursos ao seu modelo e importar recursos do modelo para uma pilha usando o recurso de gerador de IaC.</p>
  
  <div class="procedure"><h6>Para abrir um novo modelo usando o gerador de IaC</h6><ol><li><p>Faça login no AWS Management Console e abra o console AWS CloudFormation em <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
    <p>Na página de navegação, escolha <b>Gerador de IaC</b>.</p>
    <div class="mediaobject">
      
      <img src="images/IaC-generator.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Página do console do gerador de IaC&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li><li>
    <p>No painel <b>Varreduras</b>, escolha <b>Iniciar nova varredura</b>. As varreduras descobrem os recursos provisionados em sua conta e a relação entre os recursos. Quanto mais recursos houver em sua conta na região, maior será a duração da varredura.</p>
    <div class="mediaobject">
      
      <img src="images/IaC-generator-scans.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Painel Varredura da página do console do gerador de IaC&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li><li>
    <p>No painel <b>Modelos</b>, escolha <b>Criar modelo</b>.</p>
    <div class="mediaobject">
      
      <img src="images/IaC-generator-specify-template-details.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Especifique a página de detalhes do modelo do gerador de IaC&#xA;     " style="max-width:100%" />
      
      
    </div>
    <ol><li>
      <p>Selecione <b>Iniciar com um modelo novo</b>.</p>
     </li><li>
      <p>No painel <b>Nome do modelo</b>, insira um nome para o seu modelo gerado.</p>
     </li><li>
      <p>(Opcional) Configure sua <b>Política de exclusão</b> e a <b>Política de substituição de atualização</b>.</p>
     </li><li>
      <p>Escolha <b>Próximo</b> para adicionar recursos encontrados pela varredura ao modelo.</p>
     </li></ol>
   </li></ol></div>
  
  <div class="procedure"><h6>Para adicionar recursos encontrados pela varredura a um modelo</h6><ol><li>
    <p>Navegue pela lista de recursos encontrados pela varredura. É possível filtrar os recursos por identificador, tipo de recurso ou tags. Os filtros são mutuamente inclusivos.</p>
    <div class="mediaobject">
      
      <img src="images/IaC-generator-add-scanned-resources.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Painel Adicionar recursos encontrados pela varredura do gerador de IaC&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li><li>
    <p>Selecione os recursos que deseja adicionar.</p>
    <p>Repita as etapas 1 e 2 até adicionar todos os recursos necessários ao seu modelo.</p>
    <div class="mediaobject">
      
      <img src="images/IaC-generator-add-scanned-selected-resources.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Selecionar Adicionar recursos encontrados pela varredura do gerador de IaC&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li><li>
    <p>Escolha <b>Próximo</b> para sair da página <b>Adicionar recursos encontrados pela varredura</b> e prossiga para a página <b>Adicionar recursos relacionados</b>.</p>
   </li><li>
    <p>Revise uma lista recomendada de recursos relacionados. Recursos relacionados, como instâncias do Amazon EC2 e grupos de segurança, são interdependentes e normalmente pertencem à mesma workload. Selecione os usuários relacionados que deseja incluir no modelo gerado.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Sugerimos adicionar todos os recursos relacionados a esse modelo.</p></div></div>
    <div class="mediaobject">
      
      <img src="images/IaC-generator-add-related-resources.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Adicionar recursos relacionados no gerador de IaC&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li><li>
    <p>Revise os detalhes do modelo, recursos encontrados pela varredura e recursos relacionados. Escolha <b>Editar</b> para fazer quaisquer alterações.</p>
   </li><li>
    <p>Escolha <b>Criar modelo</b> para sair da página <b>Revisar e criar</b> e criar o modelo.</p>
    <div class="mediaobject">
      
      <img src="images/IaC-generator-review-and-create.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Revisar e criar um modelo no gerador de IaC&#xA;     " style="max-width:100%" />
      
      
    </div>
   </li></ol></div>
  <p><em>Resultados</em>: você iniciou a criação do modelo do CloudFormation e adicionou seus recursos encontrados pela varredura e relacionados.</p>
  <div class="procedure"><h6>Para importar os recursos a serem gerenciados pelo CloudFormation como uma pilha</h6><ol><li>
    
    <p>Escolha <b>Importar para pilha</b> e, em seguida, <b>Próximo</b>.</p>
   </li><li>
    <p>Insira o nome da sua pilha no painel <b>Especificar pilha</b> da página <b>Especificar detalhes da pilha</b>. Escolha <b>Próximo</b>.</p>
   </li><li>
    <p>Revise e insira os <a href="./parameters-section-structure.html">parâmetros</a> da pilha. Escolha <b>Próximo</b>.</p>
    
   </li><li>
    <p>Revise suas opções na página <b>Revisar alterações</b> e escolha <b>Próximo</b>.</p>
   </li><li>
    <p>Revise seus detalhes na página <b>Revisar e importar</b> e escolha <b>Importar recursos</b>.</p>
   </li></ol></div>
  <p><em>Resultados</em>: todos os recursos adicionados ao seu modelo com o gerador de IaC são importados para uma pilha do CloudFormation.</p>
  
  <h2 id="generate-template-cli">Gerar um modelo (AWS CLI)</h2>
  <p>Esta seção descreve como procurar recursos com uma varredura, criar modelos, adicionar recursos ao seu modelo e atualizá-lo e excluir um modelo usando o AWS CLI.</p>
  <div class="procedure"><h6>Para procurar recursos em sua conta</h6><ul><li>
    <p>Para fazer uma varredura de recursos em sua conta na região selecionada, use a operação <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/start-resource-scan.html">start-resource-scan</a>.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation start-resource-scan</code></code></pre>
    <p>O comando retorna o seguinte:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "ResourceScanId": \
      "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:resourceScan/<code class="replaceable">0a699f15-489c-43ca-a3ef-3e6ecfa5da60</code>"
}</code></pre>
   </li></ul></div>
  <div class="procedure"><h6>Para descrever a varredura de recursos da conta</h6><ul><li>
    <p>Para descrever a varredura de recursos em sua conta, use a operação <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/describe-resource-scan.html">describe-resource-scan</a>.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation describe-resource-scan \
  --resource-scan-id \
    "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:resourceScan/<code class="replaceable">0a699f15-489c-43ca-a3ef-3e6ecfa5da60</code>"</code></code></pre>
    <p>O comando retorna o seguinte:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "ResourceScanId" : \
      "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:resourceScan/<code class="replaceable">0a699f15-489c-43ca-a3ef-3e6ecfa5da60</code>",
    "Status": "complete",
    "StartTime": "2023-08-21T03:10:38.485000+00:00",
    "EndTime": "2023-08-21T03:20:28.485000+00:00",
    "PercentageCompleted": 100.0,
    "ResourceTypes": [
        "AWS::EKS::Cluster",
        "AWS::S3::Bucket"
    ],
}</code></pre>
   </li></ul></div>
  <div class="procedure"><h6>Para listar todos os recursos encontrados pela varredura</h6><ul><li>
    <p>Para listar os recursos encontrados na varredura, use a operação <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/list-resource-scan-resources.html">list-resource-scan-resources</a>. A resposta inclui uma coluna que indica se o CloudFormation já está gerenciando o recurso.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation list-resource-scan-resources \
  --resource-scan-id \
    "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:resourceScan/<code class="replaceable">0a699f15-489c-43ca-a3ef-3e6ecfa5da60</code>" \
  --resource-identifier exampleResource</code></code></pre>
    <p>O comando retorna o seguinte:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": [
        <span>{</span>
            "ResourceType": "AWS::EKS::Cluster",
            "ResourceIdentifier": <span>{</span>
                "ClusterName": "exampleResourceCluster"
            }
        },
            "ManagedByStack": false
        <span>{</span>
            "ResourceType": "AWS::S3::Bucket",
            "ResourceIdentifier": <span>{</span>
                "BucketName": "exampleResourceBucket"
            },
            "ManagedByStack": false
        }
    ]
}</code></pre>
    <p>Neste exemplo, suponha que a saída de <code class="code">list-resource-scan-resources</code> seja salva em um arquivo JSON chamado <code class="code">resources.json</code>.</p>
   </li></ul></div>
  <div class="procedure"><h6>Para listar todos os recursos relacionados aos recursos examinados pela varredura</h6><ul><li>
    <p>Para listar os recursos relacionados aos examinados pela varredura, crie lotes de até 100 recursos da varredura e use a operação <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/list-resource-scan-related-resources.html">list-resource-scan-related-resources</a> para cada lote. Tenha em mente que a saída pode conter recursos duplicados na lista.</p>
    <p>A resposta inclui uma coluna que informa se o CloudFormation já está gerenciando o recurso. Recomenda-se adicionar todos os recursos relacionados ao modelo.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation list-resource-scan-related-resources \
  --resource-scan-id \
    "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:resourceScan/<code class="replaceable">0a699f15-489c-43ca-a3ef-3e6ecfa5da60</code>" \
  --resources file://<code class="replaceable">resources</code>.json</code></code></pre>
    <p>O comando retorna o seguinte:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "RelatedResources": [
        <span>{</span>
            "ResourceType": "AWS::EKS::Nodegroup",
            "ResourceIdentifier": <span>{</span>
                "NodegroupName": "exampleNodegroup"
            },
            "ManagedByStack": false
        },
        <span>{</span>
            "ResourceType": "AWS::IAM::Role",
            "ResourceIdentifier": <span>{</span>
                "RoleId": "arn:aws::iam::<code class="replaceable">123456789012</code>:role/S3Access"
            },
            "ManagedByStack": false
        }
    ]
}</code></pre>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>A lista de entrada de recursos não pode exceder um tamanho de 100. Para listar recursos relacionados para mais de 100 recursos, execute a operação em lotes de 100 e consolide os resultados.</p></div></div>
    <p>Suponha que a saída de <code class="code">list-resource-scan-related-resources</code> também seja adicionada ao arquivo JSON chamado <code class="code">resources.json</code>.</p>
   </li></ul></div>
  <div class="procedure"><h6>Para gerar um modelo</h6><ul><li>
    <p>Para gerar um novo modelo sem recursos, use a operação <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/create-generated-template.html">create-generated-template</a> e especifique o nome do modelo.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation create-generated-template \
  --generated-template-name <code class="replaceable">TemplateName</code></code></code></pre>
    <p>O comando <code class="code">create-generated-template</code> retorna o seguinte:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Arn": \
    "arn:aws:cloudformation:<code class="replaceable">us-east-1</code>:<code class="replaceable">123456789012</code>:generatedtemplate/<code class="replaceable">7fc8512c-d8cb-4e02-b266-d39c48344e48</code>",
  "Name": "<code class="replaceable">TemplateName</code>"
}</code></pre>
   </li></ul></div>
  <div class="procedure"><h6>Para atualizar o modelo gerado com recursos</h6><ul><li>
    <p>Para atualizar o seu modelo recém-criado, é possível especificar uma lista de usuários que deseja adicionar. Neste exemplo, usamos o arquivo <code class="code">resources.json</code>. O arquivo de texto JSON para <code class="code">resources.json</code> é o seguinte:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">[
    <span>{</span>
        "ResourceType": "AWS::EKS::Cluster",
        "LogicalResourceId":"Cluster",
        "ResourceIdentifier": <span>{</span>
            "ClusterName": "exampleResourceCluster"
        }
    },
    <span>{</span>
        "ResourceType": "AWS::S3::Bucket",
        "LogicalResourceId":"Bucket",
        "ResourceIdentifier": <span>{</span>
            "BucketName": "exampleResourceBucket"
        }
    },
    <span>{</span>
        "ResourceType": "AWS::EKS::Nodegroup",
        "LogicalResourceId":"Nodegroup",
        "ResourceIdentifier": <span>{</span>
            "NodegroupName": "exampleNodegroup"
        }
    },
    <span>{</span>
        "ResourceType": "AWS::IAM::Role",
        "LogicalResourceId":"Role",
        "ResourceIdentifier": <span>{</span>
            "RoleId": "arn:aws::iam::<code class="replaceable">123456789012</code>:role/S3Access"
        }
    }
]</code></pre>
    <p>Para atualizar seu modelo, use a operação <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/update-generated-template.html">update-generated-template</a>, especifique o nome da pilha e especifique seu arquivo de texto para adicionar recursos ao seu modelo. A opção <code class="code">--cloud-formation-template-configuration</code> não está incluída, então as políticas <code class="code">UpdateReplacePolicy</code> e <code class="code">DeletionPolicy</code> são definidas como <code class="code">Retain</code> por padrão.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation update-generated-template \
  --generated-template-name <code class="replaceable">TemplateName</code> \
  --add-resources file://<code class="replaceable">resources.json</code></code></code></pre>
    <p>O comando <code class="code">update-generated-template</code> retorna o seguinte:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span> 
  "Arn": "arn:aws:cloudformation:us-east-1:123456789012:template/equipment-sorter",
  "Name": "<code class="replaceable">TemplateName</code>"
}</code></pre>
   </li></ul></div>
  <div class="procedure"><h6>Para excluir o modelo especificado pelo nome da pilha</h6><ul><li>
    <p>Para excluir o modelo gerado, use a operação <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/delete-generated-template.html">delete-generated-template</a> e especifique o nome da geração do modelo ou o ARN da geração do modelo.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation delete-generated-template \
  --generated-template-name <code class="replaceable">TemplateName</code></code></code></pre>
   </li></ul></div>
  
  
  <h2 id="generate-IaC-cdk-migrate">Gere e gerencie modelos com o AWS CDK</h2>
  <p>O AWS Cloud Development Kit (AWS CDK) é um framework de desenvolvimento de software de código aberto que você pode usar para desenvolver, gerenciar e implantar recursos do AWS CloudFormation usando linguagens de programação conhecidas.</p>
  <p>A CLI do AWS CDK fornece uma integração com o gerador de IaC. Use o comando <code class="code">cdk migrate</code> da CLI do AWS CDK para gerar um modelo do AWS CloudFormation e criar uma nova aplicação do CDK que contenha seus recursos. Em seguida, é possível usar o AWS CDK para gerenciar seus recursos e implantar no AWS CloudFormation.</p>
  <p>Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/cdk/v2/guide/migrate.html">Migrar para o AWS CDK</a> no <em>Guia do desenvolvedor do AWS Cloud Development Kit (AWS CDK)</em>.</p>
 <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./scenario-sqs-queue.html">Amazon SQS</div><div id="next" class="next-link" accesskey="n" href="./generate-IaC-write-only-properties.html">Propriedades somente gravação</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/generate-IaC.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>