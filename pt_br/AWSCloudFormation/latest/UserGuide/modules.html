<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Como usar módulos para encapsular e reutilizar configurações de recursos - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="modules" /><meta name="default_state" content="modules" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html" /><meta name="description" content="Aprenda a usar módulos para incluir configurações de recursos que incorporem práticas recomendadas, conhecimento especializado em áreas específicas e diretrizes aceitas aos seus modelos, sem precisar adquirir conhecimento profundo sobre as complexidades da implementação de recursos." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/modules.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Como usar módulos para encapsular e reutilizar configurações de recursos" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Como usar módulos para encapsular e reutilizar configurações de recursos - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabalhar com modelos do AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Como usar módulos para encapsular e reutilizar configurações de recursos",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-guide.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#modules-using">Como usar módulos em um modelo</a><a href="#module-using-params">Como usar parâmetros para especificar valores de módulo</a><a href="#module-ref-resources">Como fazer referência a recursos em um módulo</a><a href="#module-considerations">Considerações sobre o uso de módulos</a><a href="#module-versioning">Cadastro e versionamento de módulo</a><a href="#module-enabling">Ativar módulos públicos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="modules">Como usar módulos para encapsular e reutilizar configurações de recursos</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Os <em>módulo</em>s são uma maneira de empacotar configurações de recursos para inclusão entre modelos de pilha, de modo transparente, gerenciável e repetível. Os módulos podem encapsular configurações comuns de serviço e práticas recomendadas como blocos de construção modulares e personalizáveis para você incluir em seus modelos de pilha. Os módulos permitem que você inclua configurações de recursos que incorporem práticas recomendadas, conhecimento especializado em áreas específicas e diretrizes aceitas (para áreas como segurança, conformidade, governança e regulamentações setoriais) aos seus modelos, sem precisar adquirir conhecimento profundo sobre as complexidades da implementação de recursos.</p><p>Por exemplo, um especialista na área de rede pode criar um módulo que contenha grupos de segurança integrados e regras de entrada/saída que sigam as diretrizes de segurança. Em seguida, você pode incluir esse módulo em seu modelo para provisionar infraestrutura de rede segura em sua pilha, sem precisar gastar tempo entendendo o funcionamento de VPCs, sub-redes, grupos de segurança e gateways. Além disso, como os módulos têm versionamento, se houver mudança nas diretrizes de segurança ao longo do tempo, o autor do módulo pode criar uma nova versão do módulo que incorpore essas alterações.</p><p>As características do uso de módulos em seus modelos incluem:</p><div class="itemizedlist">
   
   
   
   
 <ul class="itemizedlist"><li class="listitem">
   <p><em>Previsibilidade</em>: um módulo precisa aderir ao esquema no qual ele tenha sido registrado no registro do CloudFormation. Dessa maneira, você sabe para quais recursos ele pode resolver após incluí-lo em seu modelo.</p>
  </li><li class="listitem">
   <p><em>Reutilização</em>: você pode usar o mesmo módulo em vários modelos e contas.</p>
  </li><li class="listitem">
   <p><em>Rastreabilidade</em>: o CloudFormation retém o conhecimento sobre quais recursos em uma pilha foram provisionados com base em um módulo, permitindo que você entenda facilmente a origem das alterações de recursos.</p>
  </li><li class="listitem">
   <p><em>Capacidade de gerenciamento</em>: após registrar um módulo, você pode gerenciá-lo por meio do registro do CloudFormation, incluindo versionamento e disponibilidade de conta e região.</p>
  </li></ul></div><p>Um módulo pode conter:</p><div class="itemizedlist">
   
   
 <ul class="itemizedlist"><li class="listitem">
   <p>Um ou mais recursos a serem provisionados com base no módulo, juntamente com quaisquer dados associados, como saídas ou condições.</p>
  </li><li class="listitem">
   <p>Qualquer <em>parâmetro de módulo</em>, permitindo que você especifique valores personalizados sempre que o módulo for usado.</p>
  </li></ul></div><p>Para informações sobre como desenvolver tipos de módulo, consulte <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/modules-develop.html">Como desenvolver tipos de módulo</a> no <em>Guia do usuário da interface de linhas de comando do CloudFormation</em>.</p>
  <h2 id="modules-using">Como usar módulos em um modelo</h2>
  <p>Para usar um módulo, verifique se ele está registrado na conta e região nas quais deseja usá-lo. Para ter mais informações, consulte <a href="./registry.html#registry-public-private">Extensões públicas e privadas</a>. Você registra módulos no registro do CloudFormation como extensões privadas. Portanto, trate-o como faria com um recurso individual:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>Inclua-o na seção <code class="code"><a href="./resources-section-structure.html">Recursos</a></code> do seu modelo.</p>
   </li><li class="listitem">
    <p>Especifique qualquer propriedade necessária para o módulo.</p>
   </li></ul></div>
  <p>Quando você inicia uma operação de pilha, o CloudFormation gera um modelo processado que resolve todos os módulos incluídos nos recursos apropriados. Use conjuntos de alterações para visualizar os recursos a serem adicionados ou atualizados antes de realmente executar a operação de pilha. Para ter mais informações, consulte <a href="./using-cfn-updating-stacks-changesets.html">Atualizar pilhas usando conjuntos de alterações</a>.</p>
  <p>Considere o exemplo a seguir: você tem um modelo que contém recursos e módulos. O modelo contém um recurso individual, <b>ResourceA</b>, bem como um módulo, <b>ModuleParent</b>. Esse módulo contém dois recursos, <b>ResourceB</b> e <b>ResourceC</b>, bem como um módulo aninhado, <b>ModuleChild</b>. <b>ModuleChild</b> contém um único recurso, <b>ResourceD</b>. Se você criar uma pilha com base nesse modelo, o CloudFormation o processará e resolverá os módulos para os recursos apropriados. A pilha resultante tem quatro recursos: <b>ResourceA</b>, <b>ResourceB</b>, <b>ResourceC</b> e <b>ResourceD</b>.</p>
  <div class="mediaobject">
    
    <img src="images/modules-resource-inclusion.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;    Durante uma operação de pilha, o CloudFormation resolve os dois módulos incluídos no modelo de pilha nos quatro recursos adequados.&#xA;   " style="max-width:100%" />
    
    
  </div>
  <p>O CloudFormation acompanha quais recursos em uma pilha foram criados com base em módulos. Você pode visualizar essas informações nas guias <b>Events</b> (Eventos), <b>Resources</b> (Recursos) e <b>Drifts</b> (Desvios) de uma determinada pilha. Elas também estão incluídas nas visualizações do conjunto de alterações.</p>
  <p>É possível fazer a distinção entre módulos e recursos em um modelo porque eles aderem à seguinte convenção de nomenclatura com quatro partes, em contraste com a convenção habitual de três partes usada por recursos:</p>
  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="text "><code class="replaceable">organization</code>::<code class="replaceable">service</code>::<code class="replaceable">use-case</code>::MODULE</code></pre>
  
  <h2 id="module-using-params">Como usar parâmetros para especificar valores de módulo</h2>
  <p>Os módulos podem incluir parâmetros de módulo. Assim como os parâmetros de modelo, os parâmetros de módulo permitem que você insira valores personalizados para o módulo com base no modelo (ou módulo) que o contém. Assim, o módulo pode usar esses valores para definir as propriedades dos recursos contidos nele.</p>
  <p>Você também pode definir parâmetros de modelo que, por sua vez, definem as propriedades de módulo, para que os usuários possam inserir valores que são passados para o módulo no momento da operação de pilha. Para obter mais informações sobre a definição de parâmetros do modelo, consulte <a href="./parameters-section-structure.html">Parâmetros</a>.</p>
  <p>Da mesma forma, se um módulo contiver um módulo aninhado que inclua parâmetros de módulo, você pode:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>Especificar os valores para os parâmetros do módulo aninhado diretamente no módulo pai.</p>
   </li><li class="listitem">
    <p>Definir os parâmetros correspondentes do módulo no módulo pai que permitem que os parâmetros do módulo aninhado sejam definidos pelo modelo (ou módulo) no qual o módulo pai está contido.</p>
   </li></ul></div>
   
   <h3 id="module-using-params-example-1">Como usar parâmetros de modelo para especificar valores de parâmetro de módulo</h3>
   <p>O exemplo a seguir mostra como definir parâmetros de modelo que repassam valores para um módulo.</p>
   <p>Aqui, o modelo que contém <code class="code">My::S3::SampleBucket::MODULE</code> define um parâmetro de modelo, <code class="code">BucketName</code>, que permite que o usuário especifique um nome de bucket do S3 durante a operação de pilha.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">// Template containing My::S3::SampleBucket::MODULE
<span>{</span>
  "Parameters": <span>{</span>
    "<b>BucketName</b>": <span>{</span>
      "Description": "Name for your sample bucket",
      "Type": "String"
    }
  },
  "Resources": <span>{</span>
    "MyBucket": <span>{</span>
      "Type": "<b>My::S3::SampleBucket::MODULE</b>",
      "Properties": <span>{</span>
        "<b>BucketName</b>": <span>{</span>
          "Ref": "BucketName"
        }
      }
    }
  }
}</code></pre>
   
   
   <h3 id="module-using-params-example-2">Como especificar propriedades em recursos em um módulo filho com base no módulo pai</h3>
   <p>O exemplo a seguir ilustra como especificar valores de parâmetro em um módulo que esteja aninhado dentro de outro módulo.</p>
   <p>Este primeiro módulo, <code class="code">My::S3::SampleBucketPrivate::MODULE</code>, será o módulo filho. Ele define dois parâmetros: <code class="code">BucketName</code> e <code class="code">AccessControl</code>. Os valores especificados para esses parâmetros são usados para especificar as propriedades <code class="code">BucketName</code> e <code class="code">AccessControl</code> do recurso <code class="code">AWS::S3::Bucket</code> que o módulo contém. Abaixo apresentamos o fragmento de modelo para <code class="code">My::S3::SampleBucketPrivate::MODULE</code>.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">// My::S3::SampleBucketPrivate::MODULE
<span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "A sample S3 Bucket with Versioning and DeletionPolicy.",
    "Parameters": <span>{</span>
        "<b>BucketName</b>": <span>{</span>
            "Description": "Name for the bucket",
            "Type": "String"
        },
        "<b>AccessControl</b>": <span>{</span>
            "Description": "AccessControl for the bucket",
            "Type": "String"
        }
    },
    "Resources": <span>{</span>
        "S3Bucket": <span>{</span>
            "Type": "AWS::S3::Bucket",
            "Properties": <span>{</span>
                "<b>BucketName</b>": <span>{</span>
                    "Ref": "BucketName"
                },
                "<b>AccessControl</b>": <span>{</span>
                    "Ref": "AccessControl"
                },
                "DeletionPolicy": "Retain",
                "VersioningConfiguration": <span>{</span>
                    "Status": "Enabled"
                }
            }
        }
    }
}</code></pre>
   <p>Em seguida, o módulo anterior é aninhado em um módulo pai, <code class="code">My::S3::SampleBucket::MODULE</code>. O módulo pai, <code class="code">My::S3::SampleBucket::MODULE</code>, define os parâmetros do módulo filho das seguintes maneiras:</p>
   <div class="itemizedlist">
     
     
   <ul class="itemizedlist"><li class="listitem">
     <p>Ele define o parâmetro <code class="code">AccessControl</code> de <code class="code">My::S3::SampleBucketPrivate::MODULE</code> para <code class="code">Private</code>.</p>
    </li><li class="listitem">
     <p>Para <code class="code">BucketName</code>, ele define um parâmetro de módulo, que permitirá que o nome do bucket seja especificado no modelo (ou módulo) que contém <code class="code">My::S3::SampleBucket::MODULE</code>.</p>
    </li></ul></div>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">// My::S3::SampleBucket::MODULE
<span>{</span>
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "A sample S3 Bucket. With Private AccessControl.",
  "Parameters": <span>{</span>
    "<b>BucketName</b>": <span>{</span>
      "Description": "Name for your sample bucket",
      "Type": "String"
    }
  },
  "Resources": <span>{</span>
    "MyBucket": <span>{</span>
      "Type": "<b>My::S3::SampleBucketPrivate::MODULE</b>",
      "Properties": <span>{</span>
        "<b>BucketName</b>": <span>{</span>
          "Ref": "BucketName"
        },
        "<b>AccessControl</b>" : "Private"
      }
    }
  }
}</code></pre>
   
   
   <h3 id="modules-using-parameters-constraints">Como especificar restrições para parâmetros de módulo</h3>
   <p>Os parâmetros de módulo não são compatíveis com a imposição de restrições. Para ter mais informações, consulte <a href="./parameters-section-structure.html#parameters-section-structure-properties">Propriedades</a>. Para executar a verificação de restrição em um parâmetro de módulo, crie um parâmetro de modelo com as restrições desejadas e faça referência a esse parâmetro de modelo no parâmetro do seu módulo.</p>
   
  
  <h2 id="module-ref-resources">Como fazer referência a recursos em um módulo</h2>
  <p>É possível fazer referência aos recursos em um módulo por nome lógico. É possível construir o nome lógico totalmente qualificado de um recurso contido em um módulo combinando:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>O nome lógico especificado para o módulo no modelo que o contém (ou no módulo que o contém).</p>
   </li><li class="listitem">
    <p>O nome lógico do recurso, especificado no módulo.</p>
   </li></ul></div>
  <p>O nome lógico totalmente qualificado para o recurso pode ser especificado com ou sem o uso de um período como delimitador. Por exemplo, ambos os nomes lógicos abaixo são válidos e funcionalmente equivalentes:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p><code class="code"><code class="replaceable">ModuleLogicalName</code>.<code class="replaceable">ResourceLogicalName</code></code></p>
   </li><li class="listitem">
    <p><code class="code"><code class="replaceable">ModuleLogicalNameResourceLogicalName</code></code></p>
   </li></ul></div>
  <p>Dessa forma, você pode usar funções intrínsecas <code class="code">GetAtt</code> e <code class="code">Ref</code> para acessar valores de propriedade em recursos do módulo.</p>
  <p>No exemplo a seguir, o modelo faz referência a uma propriedade em um módulo para definir uma propriedade correspondente em um recurso no próprio modelo.</p>
  <p>Suponha que o módulo <code class="code">My::S3::SampleBucket::MODULE</code> contenha um recurso <code class="code">AWS::S3::Bucket</code> com o nome lógico de <code class="code">S3Bucket</code>. Para fazer referência ao nome do bucket desse recurso usando a função intrínseca <code class="code">Ref</code>, combine o nome lógico dado ao módulo no modelo, <code class="code">MyBucket</code>, com o nome lógico do recurso no módulo, <code class="code">S3Bucket</code>, para obter o nome lógico totalmente qualificado do recurso: <code class="code">MyBucket.S3Bucket</code> ou <code class="code">MyBucketS3Bucket</code>.</p>
  <p>Os nomes lógicos dos recursos contidos em um módulo são especificados no esquema do módulo. Você pode acessar esse esquema das seguintes maneiras:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>Encontrando o módulo no registro do CloudFormation. A guia <b>Schema</b> (Esquema) exibe o esquema do módulo.</p>
   </li><li class="listitem">
    <p>Usando a operação <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeType.html"><code class="code">DescribeType</code></a> para retornar os detalhes do módulo, que incluem o esquema.</p>
   </li></ul></div>

  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">// Template that uses My::S3::SampleBucket::MODULE
<span>{</span>
  "Parameters": <span>{</span>
    "BucketName": <span>{</span>
      "Description": "Name for your sample bucket",
      "Type": "String"
   }
 },
  "Resources": <span>{</span>
    "MyBucket": <span>{</span>
      "Type": "My::S3::SampleBucket::MODULE",
      "Properties": <span>{</span>
          "BucketName": <span>{</span>
            "Ref": "BucketName"
         }
      }
    },
    "exampleQueue": <span>{</span>
      "Type": "AWS::SQS::Queue",
      "Properties": <span>{</span>
          "QueueName": <span>{</span>
            "Ref": "<b>MyBucket.S3Bucket</b>"
          }
      }
    }
},
"Outputs": <span>{</span>
  "BucketArn": <span>{</span>
      "Value": <span>{</span>
          "Fn::GetAtt": [
             "<b>MyBucket</b>",
             "<b>S3Bucket.Arn</b>"
          ]
      }
    }
  }
}</code></pre>
  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  BucketName:
    Description: Name for your sample bucket
    Type: String
Resources:
  MyBucket:
    Type: My::S3::SampleBucket::MODULE
    Properties:
      BucketName: !Ref BucketName
  exampleQueue:
    Type: AWS::SQS::Queue
    Properties:
      QueueName: !Ref <b>MyBucket.S3Bucket</b>
Outputs:
  BucketArn:
    Value: !<b>GetAtt MyBucket.S3Bucket.Arn</b></code></pre>
  
  <h2 id="module-considerations">Considerações sobre o uso de módulos</h2>
  <div class="itemizedlist">
    
    
    
    
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>Não há cobrança adicional pelo uso de módulos. Você paga apenas pelos recursos para os quais os módulos resolvem em suas pilhas.</p>
   </li><li class="listitem">
    <p>As cotas do CloudFormation, como o número máximo de recursos permitidos em uma pilha ou o tamanho máximo do corpo do modelo, aplicam-se ao modelo processado independentemente de os recursos incluídos nesse modelo serem ou não provenientes de módulos. Para ter mais informações, consulte <a href="./cloudformation-limits.html">Cotas do AWS CloudFormation</a>.</p>
   </li><li class="listitem">
    <p>As tags especificadas para a <em>pilha</em> são atribuídas aos recursos individuais derivados do módulo.</p>
   </li><li class="listitem">
    <p>Scripts auxiliares especificados no módulo não se propagam para os recursos individuais contidos no módulo quando o CloudFormation processa o modelo.</p>
   </li><li class="listitem">
    <p>As saídas especificadas no módulo são propagadas para saídas no modelo.</p>
    <p>Cada saída receberá um ID lógico que é uma concatenação do nome lógico do módulo e o nome de saída, conforme definido no módulo. Para obter mais informações sobre saídas, consulte <a href="./outputs-section-structure.html">Outputs</a>.</p>
   </li><li class="listitem">
    <p>Os parâmetros especificados no módulo não são propagados para parâmetros no nível do modelo.</p>
    <p>No entanto, você pode criar parâmetros no âmbito de modelos que fazem referência a parâmetros de módulo. Para ter mais informações, consulte <a href="#module-using-params">Como usar parâmetros para especificar valores de módulo</a>.</p>
   </li></ul></div>
  
  <h2 id="module-versioning">Cadastro e versionamento de módulo</h2>
  <p>Você registra e gerencia os módulos em sua conta e região usando o registro do CloudFormation. Para ter mais informações, consulte <a href="./registry.html">Como usar o registro do AWS CloudFormation</a>.</p>
  <p>Você pode registrar várias versões do mesmo módulo em uma determinada conta e região. Lembre-se dos seguintes fatores:</p>
  <div class="itemizedlist">
    
    
    
    
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>Um módulo deve ser registrado na conta e na região nas quais você deseja usá-lo.</p>
   </li><li class="listitem">
    <p>Durante operações de pilha, o CloudFormation usa a versão do módulo que estiver registrada atualmente como padrão <em>na conta e região nas quais a operação de pilha está sendo executada</em>. Isso inclui módulos que estejam aninhados a outros módulos.</p>
    <p>Portanto, não esqueça que se tiver versões diferentes do mesmo módulo registradas como a versão padrão em diferentes contas ou regiões, o uso do mesmo modelo pode gerar resultados diferentes.</p>
    <p>Para ter mais informações, consulte <a href="./registry-private.html#registry-set-version">Especificar uma versão de uma extensão privada para usar com a AWS CLI</a>.</p>
   </li><li class="listitem">
    <p>Durante operações de pilha, o CloudFormation usa a versão do <em>recurso</em> que estiver registrada como a versão padrão na conta e região nas quais a operação de pilha está sendo executada. Isso inclui os recursos gerados pela inclusão de módulos.</p>
   </li><li class="listitem">
    <p>A alteração da versão padrão de um módulo não inicia nenhuma operação de atualização de pilha. No entanto, na próxima vez que você executar uma operação de pilha com qualquer modelo contendo o respectivo módulo, como uma atualização de pilha, o CloudFormation usará a nova versão padrão na operação.</p>
    <p>A única exceção a isso é a execução de uma atualização de pilha com a opção <b>usar modelo anterior</b> especificada, conforme descrito abaixo.</p>
   </li><li class="listitem">
    <p>Para operações de atualização de pilha, se você especificar a opção <b>usar modelo anterior</b>, o CloudFormation usará o modelo processado anteriormente para a atualização de pilha e não reprocessará o módulo para nenhuma alteração que você possa ter feito nele.</p>
   </li><li class="listitem">
    <p>Para garantir resultados uniformes, se estiver incluindo módulos em um modelo de pilha para uso com conjuntos de pilha, certifique-se de que a mesma versão do módulo esteja definida como a versão padrão em todas as contas e regiões nas quais você está planejando implantar suas instâncias de pilha. Isso inclui módulos que estejam aninhados a outros módulos. Para obter mais informações sobre conjuntos de pilhas, consulte <a href="./what-is-cfnstacksets.html">Trabalhar com o AWS CloudFormation StackSets</a>.</p>
   </li></ul></div>
  <p>Para obter mais informações sobre como registrar novas versões de um módulo, ou alterar a versão padrão de um módulo, consulte <a href="./registry.html">Como usar o registro do AWS CloudFormation</a>.</p>
  
  <h2 id="module-enabling">Ativar módulos públicos para uso na sua conta</h2>
  <p>Para ativar com êxito um módulo público na sua conta e região, o seguinte deve ser verdadeiro para cada extensão pública de terceiros (recurso ou módulo) incluída nesse módulo:</p>
  <div class="itemizedlist">
    
    
  <ul class="itemizedlist"><li class="listitem">
    <p>A extensão já deve estar ativada na sua conta e região.</p>
    <p>Se a extensão no módulo utilizar um alias de nome de tipo, ela deverá ser registrada na sua conta e região utilizando o mesmo alias de nome de tipo. Para ter mais informações, consulte <a href="./registry-public.html#registry-public-enable-alias">Especificar aliases para fazer referência a extensões</a>.</p>
   </li><li class="listitem">
    <p>A versão da extensão atualmente ativada deve ser uma das principais versões com suporte dessa extensão especificada no módulo. Para saber mais, consulte <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/modules-structure.html#modules-structure-publishing-prereqs">Requisitos de módulos para publicar um módulo público</a>, no <em>Guia do usuário da CLI do CloudFormation</em>.</p>
   </li></ul></div>
  <p>Se você não tiver as extensões públicas de terceiros corretas e versões de extensão ativadas, o CloudFormation falhará na operação com um erro listando as extensões e/ou versões que precisam ser ativadas antes que o módulo possa ser ativado com êxito.</p>
 <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./macros-example.html">Exemplo de macro: criar e usar uma macro</div><div id="next" class="next-link" accesskey="n" href="./blue-green.html">Executar implantações azul/verde do ECS</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/modules.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>