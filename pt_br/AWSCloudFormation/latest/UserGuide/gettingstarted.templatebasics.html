<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Saiba mais sobre noções básicas de modelo - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="gettingstarted.templatebasics" /><meta name="default_state" content="gettingstarted.templatebasics" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="description" content="Saiba mais sobre as noções básicas do modelo de uso de recursos, parâmetros e outros componentes de modelos e como eles funcionam em conjunto." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Saiba mais sobre noções básicas de modelo" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Saiba mais sobre noções básicas de modelo - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Conceitos básicos do AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Saiba mais sobre noções básicas de modelo",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#gettingstarted.templatebasics.what">O que é um modelo do AWS CloudFormation?</a><a href="#gettingstarted.templatebasics.simple">Resources: Hello Bucket!</a><a href="#gettingstarted.templatebasics.multiple">Propriedades de recurso e uso de recursos em conjunto</a><a href="#gettingstarted.templatebasics.parameters">Receber entrada do usuário usando parâmetros de entrada</a><a href="#gettingstarted.templatebasics.mappings">Especificar valores condicionais usando mapeamentos</a><a href="#gettingstarted.templatebasics.outputs">Valores construídos e valores de saída</a><a href="#gettingstarted.templatebasics.learnmore">Próximas etapas</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="gettingstarted.templatebasics">Saiba mais sobre noções básicas de modelo</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#gettingstarted.templatebasics.what">O que é um modelo do AWS CloudFormation?</a></li><li><a href="#gettingstarted.templatebasics.simple">Resources: Hello Bucket!</a></li><li><a href="#gettingstarted.templatebasics.multiple">Propriedades de recurso e uso de recursos em conjunto</a></li><li><a href="#gettingstarted.templatebasics.parameters">Receber entrada do usuário usando parâmetros de entrada</a></li><li><a href="#gettingstarted.templatebasics.mappings">Especificar valores condicionais usando mapeamentos</a></li><li><a href="#gettingstarted.templatebasics.outputs">Valores construídos e valores de saída</a></li><li><a href="#gettingstarted.templatebasics.learnmore">Próximas etapas</a></li></ul></div><p>Em <a href="./GettingStarted.Walkthrough.html">Conceitos básicos</a>, você aprendeu a usar um modelo para criar uma pilha. Você viu recursos declarados em um modelo e como eles mapeiam os recursos na pilha. Também abordamos parâmetros de entrada e como eles permitem que você passe em valores específicos ao criar uma pilha a partir de um modelo. Nesta seção, vamos detalhar os recursos e os parâmetros. Também abordaremos os outros componentes de modelos para que você saiba como usar esses componentes em conjunto e criar modelos que produzem os recursos da AWS que você deseja.</p>
    <h2 id="gettingstarted.templatebasics.what">O que é um modelo do AWS CloudFormation?</h2>

    <p>Um modelo é uma declaração de recursos da AWS que compõem uma pilha. O modelo é armazenado como um arquivo de texto cujo formato está em conformidade com o JavaScript Object Notation (JSON) ou YAML padrão. Como são apenas arquivos de texto, você pode criar e editá-los em qualquer editor de texto e gerenciá-los em seu sistema de controle de fonte com o restante do seu código-fonte. Para obter mais informações sobre os formatos de modelos, consulte <a href="./template-formats.html">Formatos de modelo do AWS CloudFormation</a>.</p>
    <p>No modelo, você declara os recursos da AWS que deseja criar e configurar. Você pode declarar um objeto como um par nome/valor ou um par de um nome com um conjunto de objetos filho incluído. A sintaxe depende do formato que você usa. Para obter mais informações, consulte a <a href="./template-anatomy.html">Anatomia do modelo</a>. O único objeto de nível superior necessário é o objeto Resources, que deve declarar pelo menos um recurso. Vamos começar com o modelo mais básico que contém apenas um objeto Resources, o qual apresenta uma única declaração de recurso.</p>
   
    <h2 id="gettingstarted.templatebasics.simple">Resources: Hello Bucket!</h2>
    <p>O objeto Resources contém uma lista de objetos de recurso. Uma declaração de recursos contém os atributos do recurso, que são declarados como objetos filho. Um recurso deve ter um atributo <code class="code">Type</code>, que define o tipo de recurso da AWS que você deseja criar. O atributo <code class="code">Type</code> tem um formato especial:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">AWS::<code class="replaceable">ProductIdentifier</code>::<code class="replaceable">ResourceType</code></code></pre>
    <p>Por exemplo, o tipo de recurso para um bucket do Amazon S3 é <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::Bucket</a>. Para conhecer uma lista completa de tipos de recursos, consulte <a href="./template-reference.html">Referência do modelo</a>.</p>
    <p>Vamos dar uma olhada em um modelo básico. O modelo a seguir declara um único recurso do tipo <code class="code">AWS::S3::Bucket:</code> com o nome HelloBucket.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.simple.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket"&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.simple.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
</code></pre>
    </div>
    <p>Se você usar esse modelo para criar uma pilha, o AWS CloudFormation criará um bucket do Amazon S3. A criação de um bucket é simples, pois o CloudFormation pode criar um bucket com configurações padrão. Para outros recursos, como um grupo do Amazon EC2 Auto Scaling ou instância EC2, o CloudFormation requer mais informações. As declarações do recurso usam um atributo <code class="code">Properties</code> para especificar as informações usadas para criar um recurso.</p>
    <p>Dependendo do tipo de recurso, algumas propriedades são necessárias, como a propriedade ImageId para um recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a> e outras são opcionais. Algumas propriedades têm valores padrão, como a propriedade AccessControl do recurso <code class="code">AWS::S3::Bucket</code>, portanto, especificar um valor para essas propriedades é opcional. Outras propriedades não são necessárias, mas você poderá adicionar as funcionalidades desejadas, como a propriedade <code class="code">WebsiteConfiguration</code> do recurso <code class="code">AWS::S3::Bucket</code>. Especificar um valor para essas propriedades é totalmente opcional e com base em suas necessidades. No exemplo acima, como o recurso <code class="code">AWS::S3::Bucket</code> tem apenas propriedades opcionais e nós não precisamos de qualquer um dos recursos opcionais, podemos aceitar os padrões e omitir o atributo Properties.</p>
    <p>Para visualizar as propriedades de cada tipo de recurso, consulte os tópicos em <a href="./aws-template-resource-type-ref.html">Referência de tipos de propriedades e recursos da AWS</a>.</p>
   
    <h2 id="gettingstarted.templatebasics.multiple">Propriedades de recurso e uso de recursos em conjunto</h2>

    <p>Em geral, uma propriedade para um recurso é simplesmente um valor de string. Por exemplo, o modelo a seguir especifica uma ACL (PublicRead) pré-configurada para a propriedade AccessControl do bucket.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket",&#xD;
            "Properties": <span>{</span>&#xD;
                "AccessControl": "PublicRead"&#xD;
            }&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
    Properties:&#xD;
      AccessControl: PublicRead&#xD;
</code></pre>
    </div>
    <p>Alguns recursos podem ter várias propriedades e algumas propriedades podem ter uma ou mais subpropriedades. Por exemplo, o recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::Bucket</a> tem duas propriedades, AccessControl e WebsiteConfiguration. A propriedade WebsiteConfiguration tem duas subpropriedades, IndexDocuments e ErrorDocument. O modelo a seguir mostra nosso recurso do bucket original com as propriedades adicionais.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json2">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket",&#xD;
            "Properties": <span>{</span>&#xD;
                "AccessControl": "PublicRead",&#xD;
                "WebsiteConfiguration": <span>{</span>&#xD;
                    "IndexDocument": "index.html",&#xD;
                    "ErrorDocument": "error.html"&#xD;
                }&#xD;
            }&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml2">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
    Properties:&#xD;
      AccessControl: PublicRead&#xD;
      WebsiteConfiguration:&#xD;
        IndexDocument: index.html&#xD;
        ErrorDocument: error.html&#xD;
</code></pre>
    </div>
    <p>Um dos maiores benefícios de modelos e do CloudFormation é a capacidade de criar um conjunto de recursos que funcionam em conjunto para criar um aplicativo ou uma solução. O nome usado para um recurso no modelo é um nome lógico. Quando o CloudFormation cria o recurso, ele gera um nome físico baseado na combinação do nome lógico, no nome da pilha e em um ID exclusivo.</p>

    <p>Você está provavelmente pensando em como você definir as propriedades em um recurso baseado no nome ou na propriedade de outro recurso. <span>Por exemplo, você pode criar <span>uma distribuição do CloudFront com suporte de um bucket S3 ou </span> uma instância do EC2 que usa grupos de segurança do EC2, e todos esses recursos podem ser criados no mesmo modelo.</span> O CloudFormation tem uma série de funções intrínsecas que você pode usar para fazer referência a outros recursos e suas propriedades. Você pode usar a <a href="./intrinsic-function-reference-ref.html">função Ref</a> para fazer referência a uma propriedade de identificação de um recurso. Frequentemente, este é o nome físico do recurso; no entanto, às vezes pode ser um identificador, como o endereço IP para um recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-eip.html">AWS::EC2::EIP</a> ou um Nome de recurso da Amazon (ARN) para um tópico do Amazon SNS. Para obter uma lista de valores retornados pela função Ref, consulte <a href="./intrinsic-function-reference-ref.html">Função Ref</a>. O modelo a seguir contém o recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>. A propriedade SecurityGroups do recurso chama a função Ref para fazer referência a InstanceSecurityGroup do recurso <code class="code">AWS::EC2::SecurityGroup</code>.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json3">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "Ec2Instance": <span>{</span>
            "Type": "AWS::EC2::Instance",
            "Properties": <span>{</span>
                "SecurityGroups": [
                    <span>{</span>
                        "Ref": "InstanceSecurityGroup"
                    }
                ],
                "KeyName": "mykey",
                "ImageId": ""
            }
        },
        "InstanceSecurityGroup": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "GroupDescription": "Enable SSH access via port 22",
                "SecurityGroupIngress": [
                    <span>{</span>
                        "IpProtocol": "tcp",
                        "FromPort": 22,
                        "ToPort": 22,
                        "CidrIp": "0.0.0.0/0"
                    }
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml3">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
      KeyName: mykey
      ImageId: ''
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>A propriedade SecurityGroups é uma lista de security groups e, no exemplo anterior, temos somente um item na lista. O modelo a seguir tem um item adicional na lista de propriedades SecurityGroups.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json4">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "Ec2Instance": <span>{</span>
            "Type": "AWS::EC2::Instance",
            "Properties": <span>{</span>
                "SecurityGroups": [
                    <span>{</span>
                        "Ref": "InstanceSecurityGroup"
                    },
                    "MyExistingSecurityGroup"
                ],
                "KeyName": "mykey",
                "ImageId": "ami-7a11e213"
            }
        },
        "InstanceSecurityGroup": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "GroupDescription": "Enable SSH access via port 22",
                "SecurityGroupIngress": [
                    <span>{</span>
                        "IpProtocol": "tcp",
                        "FromPort": 22,
                        "ToPort": 22,
                        "CidrIp": "0.0.0.0/0"
                    }
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml4">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
        - MyExistingSecurityGroup
      KeyName: mykey
      ImageId: ami-7a11e213
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>MyExistingSecurityGroup é uma string que se refere a um security group EC2 já existente em vez de um security group declarado em um modelo. Você pode usar strings literais para fazer referência a recursos da AWS existentes.</p>
    <p>No exemplo acima, a propriedade KeyName de <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a> é a string literal mykey. Isso significa que um par de chaves com o nome mykey deve existir na região em que a pilha está sendo criada; caso contrário, a criação da pilha falhará porque o par de chaves não existe. O par de chaves que você usa pode variar de acordo com a região em que você está criando a pilha, ou você pode compartilhar o modelo com outra pessoa para que ela possa usá-lo com a conta da AWS. Se esse for o caso, você poderá usar um parâmetro de entrada para que o nome do par de chaves possa ser especificado quando a pilha for criada. A função Ref pode fazer referência a parâmetros de entrada especificados no momento de criação da pilha. O modelo a seguir adiciona o objeto Parâmetros que contém o parâmetro KeyName, que é usado para especificar a propriedade KeyName para o recurso <code class="code">AWS::EC2::Instance</code>. O tipo de parâmetro é <code class="code">AWS::EC2::KeyPair::KeyName</code>, o que garante a um usuário especificar um nome válido de par de chaves em sua conta e na região em que a pilha está sendo criada.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json5">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description": "The EC2 Key Pair to allow SSH access to the instance",
      "Type": "AWS::EC2::KeyPair::KeyName"
    }
  },
  "Resources": <span>{</span>
    "Ec2Instance": <span>{</span>
      "Type": "AWS::EC2::Instance",
      "Properties": <span>{</span>
        "SecurityGroups": [
          <span>{</span>
            "Ref": "InstanceSecurityGroup"
          },
          "MyExistingSecurityGroup"
        ],
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "ImageId": "ami-7a11e213"
      }
    },
    "InstanceSecurityGroup": <span>{</span>
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": <span>{</span>
        "GroupDescription": "Enable SSH access via port 22",
        "SecurityGroupIngress": [
          <span>{</span>
            "IpProtocol": "tcp",
            "FromPort": 22,
            "ToPort": 22,
            "CidrIp": "0.0.0.0/0"
          }
        ]
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml5">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: The EC2 Key Pair to allow SSH access to the instance
    Type: 'AWS::EC2::KeyPair::KeyName'
Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
        - MyExistingSecurityGroup
      KeyName: !Ref KeyName
      ImageId: ami-7a11e213
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>A função Ref é útil se o parâmetro ou o valor retornado para um recurso é exatamente o que você deseja; no entanto, você pode precisar de outros atributos de um recurso. Por exemplo, se você deseja criar uma distribuição do CloudFront com uma origem do S3, especifique o local do bucket usando um endereço no estilo de DNS. Diversos recursos têm atributos adicionais cujos valores você pode usar em seu modelo. Para obter esses atributos, você deve usar a função <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a>. O modelo a seguir cria um recurso de distribuição do CloudFront que especifica o nome DNS de um recurso do bucket S3 usando a função Fn::GetAtt função para obter o atributo DomainName do bucket.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json6">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Resources": <span>{</span>
    "myBucket": <span>{</span>
      "Type": "AWS::S3::Bucket"
    },
    "myDistribution": <span>{</span>
      "Type": "AWS::CloudFront::Distribution",
      "Properties": <span>{</span>
        "DistributionConfig": <span>{</span>
          "Origins": [
            <span>{</span>
              "DomainName": <span>{</span>
                "Fn::GetAtt": [
                  "myBucket",
                  "DomainName"
                ]
              },
              "Id": "myS3Origin",
              "S3OriginConfig": <span>{</span>}
            }
          ],
          "Enabled": "true",
          "DefaultCacheBehavior": <span>{</span>
            "TargetOriginId": "myS3Origin",
            "ForwardedValues": <span>{</span>
              "QueryString": "false"
            },
            "ViewerProtocolPolicy": "allow-all"
          }
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml6">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  myBucket:
    Type: 'AWS::S3::Bucket'
  myDistribution:
    Type: 'AWS::CloudFront::Distribution'
    Properties:
      DistributionConfig:
        Origins:
          - DomainName: !GetAtt 
              - myBucket
              - DomainName
            Id: myS3Origin
            S3OriginConfig: <span>{</span>}
        Enabled: 'true'
        DefaultCacheBehavior:
          TargetOriginId: myS3Origin
          ForwardedValues:
            QueryString: 'false'
          ViewerProtocolPolicy: allow-all</code></pre>
    </div>
    <p>A função Fn::GetAtt utiliza dois parâmetros, o nome lógico do recurso e o nome do atributo para ser recuperado. Para obter uma lista completa de atributos disponíveis para recursos, consulte <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a>. Você verá que a função Fn::GetAtt lista os dois parâmetros em uma matriz. Para as funções que usam vários parâmetros, você deve usar uma matriz para especificá-los.</p>
   
    <h2 id="gettingstarted.templatebasics.parameters">Receber entrada do usuário usando parâmetros de entrada</h2>

    <p>Até agora, você aprendeu sobre recursos e um pouco sobre como usá-los juntos em um modelo. Você aprendeu como consultar fazer referência a parâmetros de entrada, mas ainda não analisamos como definir os próprios parâmetros de entrada. Vamos dar uma olhada em declarações de parâmetros e como você pode restringir e validar a entrada do usuário.</p>
    <p>Você deve declarar parâmetros em um objeto Parâmetros do modelo. Um parâmetro contém uma lista de atributos que definir o valor e as restrições em relação ao seu valor. O único atributo obrigatório é Type, que pode ser string, número ou um tipo específico da AWS. Você também pode adicionar um atributo Descrição que informa a um usuário sobre que tipo de valor ele deve especificar. O nome e a descrição do parâmetro são exibidos na página Especificar parâmetros quando um usuário usa o modelo no assistente de criação de pilha.</p>
    <p>O modelo de estilhaço a seguir é um objeto Parâmetros que declara os parâmetros usados na página Especificar parâmetros acima.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.parameters.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description" : "Name of an existing EC2 KeyPair to enable SSH access into the WordPress web server",
      "Type": "AWS::EC2::KeyPair::KeyName"
    },
    "WordPressUser": <span>{</span>
      "Default": "admin",
      "NoEcho": "true",
      "Description" : "The WordPress database admin account user name",
      "Type": "String",
      "MinLength": "1",
      "MaxLength": "16",
      "AllowedPattern" : "[a-zA-Z][a-zA-Z0-9]*"
    },
    "WebServerPort": <span>{</span>
      "Default": "8888",
      "Description" : "TCP/IP port for the WordPress web server",
      "Type": "Number",
      "MinValue": "1",
      "MaxValue": "65535"
    }
  }</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.parameters.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: Name of an existing EC2 KeyPair to enable SSH access into the WordPress web server
    Type: AWS::EC2::KeyPair::KeyName
  WordPressUser:
    Default: admin
    NoEcho: true
    Description: The WordPress database admin account user name
    Type: String
    MinLength: 1
    MaxLength: 16
    AllowedPattern: "[a-zA-Z][a-zA-Z0-9]*"
  WebServerPort:
    Default: 8888
    Description: TCP/IP port for the WordPress web server
    Type: Number
    MinValue: 1
    MaxValue: 65535</code></pre>
    </div>
    <p>Para parâmetros com valores padrão, o CloudFormation usa os valores padrão, a menos que os usuários especifiquem outro valor. Se você omitir o atributo padrão, os usuários devem especificar um valor para esse parâmetro; no entanto, exigir que o usuário insira um valor não garante que o valor seja válido. Para validar o valor de um parâmetro, você pode declarar restrições ou especificar um tipo de parâmetro específico da AWS.</p>
    <p>Você verá que o parâmetro <code class="code">KeyName</code> não tem nenhum atributo <code class="code">Default</code> e os outros parâmetros têm. Por exemplo, o parâmetro <code class="code">WordPressUser</code> tem o atributo <code class="code">Default: admin</code>, mas o parâmetro <code class="code">KeyName</code> não tem nenhum. Os usuários devem especificar o valor do nome de uma chave na criação da pilha. Se não eles não o fizerem, o CloudFormation falhará ao criar a pilha e lançará uma exceção: <code class="code">Parameters: [KeyName] must have
        values</code>.</p>
    <p>Para os tipos de parâmetros específicos da AWS, o CloudFormation valida os valores de entrada em relação aos valores já existentes na conta da AWS do usuário e na região em que ele está criando a pilha <em>antes</em> de criar quaisquer recursos de pilha. No modelo de amostra, o parâmetro <code class="code">KeyName</code> é um tipo de parâmetro específico da AWS de <code class="code">AWS::EC2::KeyPair::KeyName</code>.  O CloudFormation verifica se os usuários especificaram um nome válido para o par de chaves EC2 antes de criar a pilha. Outro exemplo de um tipo de parâmetro específico da AWS é <code class="code">AWS::EC2::VPC::Id</code>, que requer que os usuários especifiquem um ID de VPC válido. Além da validação inicial, o console da AWS mostra uma lista suspensa de valores válidos para tipos de parâmetros específicos da AWS, como, por exemplo, nomes válidos de pares de chave do EC2 ou IDs de VPC, quando os usuários usam o assistente de criação de pilha.</p>
    <p>Para o tipo <code class="code">String</code>, você pode usar os seguintes atributos para declarar restrições: <code class="code">MinLength</code>, <code class="code">MaxLength</code>, <code class="code">Default</code>, <code class="code">AllowedValues</code> e <code class="code">AllowedPattern</code>. No exemplo acima, o parâmetro <code class="code">WordPressUser</code> tem três restrições: o valor de parâmetro deve ter de 1 a 16 caracteres (<code class="code">MinLength</code>, <code class="code">MaxLength</code>) e deve começar com uma letra seguida por qualquer combinação de letras e números (<code class="code">AllowedPattern</code>).</p>
    <p>Para o tipo <code class="code">Number</code>, você pode declarar as seguintes restrições: <code class="code">MinValue</code>, <code class="code">MaxValue</code>, <code class="code">Default</code> e <code class="code">AllowedValues</code>. O número pode ser um número inteiro ou um valor flutuante. No exemplo acima, o parâmetro <code class="code">WebServerPort</code> deve ser um número entre 1 e 65535 inclusive (<code class="code">MinValue</code>, <code class="code">MaxValue</code>).</p>
    <p>Anteriormente nesta seção, mencionamos que os parâmetros são uma boa maneira de especificar dados confidenciais ou específicos para implementação, como senhas ou nomes de usuário, que você precisa usar, mas não deseja incorporar no modelo. Se você definir o atributo <code class="code">NoEcho</code> como <code class="code">true</code>, o CloudFormation retornará o valor do parâmetro mascarado como asteriscos (*****) para qualquer chamada que descreva a pilha ou os eventos de pilha, exceto informações armazenadas nos locais especificados abaixo. No exemplo acima, o valor do parâmetro <code class="code">WordPressUser</code> não está visível para qualquer pessoa que visualize as configurações da pilha e seu valor é retornado como asteriscos.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>O uso do atributo <code class="code">NoEcho</code> não mascara informações armazenadas no seguinte:</p><div class="itemizedlist">
           
           
           
         <ul class="itemizedlist"><li class="listitem">
           <p>A seção de modelo de <code class="code">Metadata</code>. O CloudFormation não transforma, modifica nem edita nenhuma informação incluída na seção <code class="code">Metadata</code>. Para ter mais informações, consulte <a href="./metadata-section-structure.html">Metadados</a>.</p>
          </li><li class="listitem">
           <p>A seção de modelo de <code class="code">Outputs</code>. Para ter mais informações, consulte <a href="./outputs-section-structure.html">Outputs</a>.</p>
          </li><li class="listitem">
           <p>O atributo <code class="code">Metadata</code> de uma definição de recurso. Para ter mais informações, consulte <a href="./aws-attribute-metadata.html">Atributo Metadata</a>.</p>
          </li></ul></div><p>É altamente recomendável não usar esses mecanismos para incluir informações confidenciais, como senhas ou segredos.</p></div></div>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Em vez de incorporar informações confidenciais diretamente em modelos do CloudFormation, recomendamos usar os parâmetros dinâmicos no modelo da pilha para fazer referência a informações confidenciais que são armazenadas e gerenciadas de forma externa ao CloudFormation, como no AWS Systems Manager Parameter Store ou no AWS Secrets Manager.</p><p>Para obter mais informações, consulte as práticas recomendadas do <a href="./security-best-practices.html#creds">Não incorporar credenciais em seus modelos</a>.</p></div></div>
   
    <h2 id="gettingstarted.templatebasics.mappings">Especificar valores condicionais usando mapeamentos</h2>

    <p>Os parâmetros são uma ótima maneira de permitir que os usuários especifiquem valores confidenciais ou exclusivos para uso em propriedades de recursos de pilha. No entanto, pode haver configurações dependentes de região ou um pouco complexas para os usuários descobrirem devido a outras condições ou dependências. Nesses casos, é possível colocar alguma lógica no modelo em si, de modo que os usuários possam especificar valores mais simples (ou não) para obter os resultados desejados. Em um exemplo anterior, nós codificamos o ID da AMI para a propriedade ImageId de nossa instância do EC2. <span>Isso funciona bem na região leste dos EUA, onde representa a AMI que desejamos. No entanto, se o usuário tentar construir a pilha em uma região diferente, obterá o AMI errado ou nenhum AMI. (IDs de AMI são exclusivos para uma região, de modo que o mesmo ID de AMI em uma região diferente pode não representar qualquer AMI ou, então, uma AMI completamente diferente.)</span> </p>
    <p>Para evitar esse problema, você precisa de uma maneira de especificar o ID da AMI com base em uma entrada condicional (neste exemplo, a região em que a pilha é criada). Há dois recursos de modelo que podem ajudar: o objetos Mapeamentos e o pseudoparâmetro <code class="code">AWS::Region</code>.</p>
    <p>O pseudoparâmetro <code class="code">AWS::Region</code> é um valor que o CloudFormation resolve como a região em que a pilha é criada. Os pseudoparâmetros são resolvidos pelo CloudFormation quando você cria a pilha. Os mapeamentos permitem que você use um valor de entrada como uma condição que determina outro valor. Semelhante a uma declaração de troca, um mapeamento associa um conjunto de valores a outro. Usando o parâmetro <code class="code">AWS::Region</code> juntamente com um mapeamento, você pode garantir que um ID da AMI apropriada para a região seja especificada. <span>O modelo a seguir contém um objeto Mapeamentos com um mapeamento denominado RegionMap que é usado para mapear um ID da AMI para a região apropriada.</span></p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.mappings.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description": "Name of an existing EC2 KeyPair to enable SSH access to the instance",
      "Type": "String"
    }
  },
  "Mappings": <span>{</span>
    "RegionMap": <span>{</span>
      "us-east-1": <span>{</span>
        "AMI": "ami-76f0061f"
      },
      "us-west-1": <span>{</span>
        "AMI": "ami-655a0a20"
      },
      "eu-west-1": <span>{</span>
        "AMI": "ami-7fd4e10b"
      },
      "ap-southeast-1": <span>{</span>
        "AMI": "ami-72621c20"
      },
      "ap-northeast-1": <span>{</span>
        "AMI": "ami-8e08a38f"
      }
    }
  },
  "Resources": <span>{</span>
    "Ec2Instance": <span>{</span>
      "Type": "AWS::EC2::Instance",
      "Properties": <span>{</span>
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "ImageId": <span>{</span>
          "Fn::FindInMap": [
            "RegionMap",
            <span>{</span>
              "Ref": "AWS::Region"
            },
            "AMI"
          ]
        },
        "UserData": <span>{</span>
          "Fn::Base64": "80"
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.mappings.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: Name of an existing EC2 KeyPair to enable SSH access to the instance
    Type: String
Mappings:
  RegionMap:
    us-east-1:
      AMI: ami-76f0061f
    us-west-1:
      AMI: ami-655a0a20
    eu-west-1:
      AMI: ami-7fd4e10b
    ap-southeast-1:
      AMI: ami-72621c20
    ap-northeast-1:
      AMI: ami-8e08a38f
Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      KeyName: !Ref KeyName
      ImageId: !FindInMap 
        - RegionMap
        - !Ref 'AWS::Region'
        - AMI
      UserData: !Base64 '80'</code></pre>
    </div>
    <p>No RegionMap, cada região é mapeado para um par de nome/valor. O par de nome/valor é um rótulo e o valor para mapear. No RegionMap, a AMI é o rótulo e o ID da AMI é o valor. Para usar um mapa para retornar um valor, use a função <a href="./intrinsic-function-reference-findinmap.html">Fn::FindInMap</a>, transmitindo o nome do mapa, o valor usado para localizar o valor mapeado e o rótulo do valor mapeado que você deseja retornar.<span> No exemplo acima, a propriedade ImageId do recurso Ec2Instance usa a função Fn::FindInMap para determinar seu valor especificando RegionMap como o mapa a ser usado, AWS::Region como o valor de entrada para mapear e AMI como o rótulo para identificar o valor para mapear. Por exemplo, se esse modelo foi usado para criar uma pilha na região Oeste dos EUA (N. da Califórnia), <code class="code">ImageId</code> seria definido como <code class="code">ami-655a0a20</code>.</span> </p>
    <div class="awsdocs-note awsdocs-tip"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>dica</h6></div><div class="awsdocs-note-text"><p>O pseudoparâmetro <code class="code">AWS::Region</code> permite que você obtenha a região em que a pilha é criada. Alguns recursos, como <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">a AWS::EC2::Instance</a>, <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-group.html">AWS::AutoScaling::AutoScalingGroup</a>e <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-elb.html">AWS::ElasticLoadBalancing::LoadBalancer</a>, têm uma propriedade que especifica as zonas de disponibilidade. Você pode usar a <a href="./intrinsic-function-reference-getavailabilityzones.html">função Fn::GetAZs</a> para obter a lista de todas as zonas de disponibilidade em uma região.</p></div></div>
   
    <h2 id="gettingstarted.templatebasics.outputs">Valores construídos e valores de saída</h2>

    <p>Parâmetros e mapeamentos são uma excelente maneira de transmitir ou determinar valores específicos no momento de criação da pilha, mas pode haver situações em que o valor de um parâmetro ou outro atributo de recurso é apenas uma parte do valor de que você precisa. Por exemplo, no seguinte estilhaço do modelo WordPress, a função Fn::Join cria a subpropriedade <code class="code">Target</code> da propriedade <code class="code">HealthCheck</code> do recurso <code class="code">ElasticLoadBalancer</code>, concatenando o parâmetro <code class="code">WebServerPort</code> com outras strings literais para formar o valor necessário.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Resources": <span>{</span>
    "ElasticLoadBalancer": <span>{</span>
      "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
      "Properties": <span>{</span>
        "AvailabilityZones": <span>{</span>
          "Fn::GetAZs": ""
        },
        "Instances": [
          <span>{</span>
            "Ref": "Ec2Instance1"
          },
          <span>{</span>
            "Ref": "Ec2Instance2"
          }
        ],
        "Listeners": [
          <span>{</span>
            "LoadBalancerPort": "80",
            "InstancePort": <span>{</span>
              "Ref": "WebServerPort"
            },
            "Protocol": "HTTP"
          }
        ],
        "HealthCheck": <span>{</span>
          "Target": <span>{</span>
            "Fn::Join": [
              "",
              [
                "HTTP:",
                <span>{</span>
                  "Ref": "WebServerPort"
                },
                "/"
              ]
            ]
          },
          "HealthyThreshold": "3",
          "UnhealthyThreshold": "5",
          "Interval": "30",
          "Timeout": "5"
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  ElasticLoadBalancer:
    Type: 'AWS::ElasticLoadBalancing::LoadBalancer'
    Properties:
      AvailabilityZones: !GetAZs ''
      Instances:
        - !Ref Ec2Instance1
        - !Ref Ec2Instance2
      Listeners:
        - LoadBalancerPort: '80'
          InstancePort: !Ref WebServerPort
          Protocol: HTTP
      HealthCheck:
        Target: !Join 
          - ''
          - - 'HTTP:'
            - !Ref WebServerPort
            - /
        HealthyThreshold: '3'
        UnhealthyThreshold: '5'
        Interval: '30'
        Timeout: '5'</code></pre>
    </div>
    <p>A função Fn:Join usa dois parâmetros; um delimitador que separa os valores que você deseja concatenar e uma matriz de valores na ordem desejada para exibição. No exemplo acima, a função Fn::Join especifica uma string vazia como o delimitador e HTTP:, o valor do parâmetro WebServerPort e um caractere / como os valores para concatenar. Se WebServerPort tinha um valor de 8888, a propriedade Destino seria definido com o seguinte valor:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">HTTP:8888/</code></pre>
    <p>A função Fn::Join também é útil para declarar valores de saída para a pilha. O objeto Saídas no modelo contém declarações para os valores que você deseja ter disponíveis depois que a pilha for criada. Uma saída é uma forma conveniente de coletar informações importantes sobre os recursos ou parâmetros de entrada. Por exemplo, no modelo WordPress, declaramos o objeto Saídas a seguir.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.json2">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Outputs": <span>{</span>
        "InstallURL": <span>{</span>
            "Value": <span>{</span>
                "Fn::Join": [
                    "",
                    [
                        "http://",
                        <span>{</span>
                            "Fn::GetAtt": [
                                "ElasticLoadBalancer",
                                "DNSName"
                            ]
                        },
                        "/wp-admin/install.php"
                    ]
                ]
            },
            "Description": "Installation URL of the WordPress website"
        },
        "WebsiteURL": <span>{</span>
            "Value": <span>{</span>
                "Fn::Join": [
                    "",
                    [
                        "http://",
                        <span>{</span>
                            "Fn::GetAtt": [
                                "ElasticLoadBalancer",
                                "DNSName"
                            ]
                        }
                    ]
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.yaml2">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Outputs:
  InstallURL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - ElasticLoadBalancer
          - DNSName
        - /wp-admin/install.php
    Description: Installation URL of the WordPress website
  WebsiteURL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - ElasticLoadBalancer
          - DNSName</code></pre>
    </div>
    <p>Cada valor de saída tem um nome, um atributo Valor que contém declaração do valor retornado como o valor de saída e, opcionalmente, uma descrição do valor. No exemplo anterior, InstallURL é a string retornada por uma chamada da função Fn::Join que concatena http://, o nome DNS do recurso ElasticLoadBalancer e /wp-admin/install.php. O valor de saída seria semelhante ao seguinte:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">http://mywptests-elasticl-1gb51l6sl8y5v-206169572.<span>us-east-2</span>.elb.amazonaws.com/wp-admin/install.php</code></pre>
    <p>No tutorial de Conceitos básicos, usamos esse link para acessar a página de instalação de forma conveniente para o blog WordPress que criamos.  O CloudFormation gera os valores de saída após o término de criação da pilha. Você pode visualizar os valores de saída na guia Outputs do console do CloudFormation ou usando o comando <code class="code">aws cloudformation describe-stacks</code>.</p>
   
    <h2 id="gettingstarted.templatebasics.learnmore">Próximas etapas</h2>

    <p>Nós apenas que descrevemos as partes básicas de um modelo e como usá-las. Você aprendeu o seguinte sobre os modelos:</p>
    <div class="itemizedlist">
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>Declaração de recursos e suas propriedades.</p>
      </li><li class="listitem">
        <p>Referência a outros recursos com a função Ref e os atributos do recurso usando a função Fn::GetAtt.</p>
      </li><li class="listitem">
        <p>Uso de parâmetros para permitir que os usuários especifiquem valores no momento de criação da pilha e uso de restrições para validar a entrada de parâmetros.</p>
      </li><li class="listitem">
        <p>Uso de mapeamentos para determinar valores condicionais.</p>
      </li><li class="listitem">
        <p>Uso da função Fn::Join para construir valores com base em parâmetros, atributos de recursos e outras strings.</p>
      </li><li class="listitem">
        <p>Uso de valores de saída para capturar informações sobre os recursos da pilha.</p>
      </li></ul></div>
    <p>Não vamos abordar dois objetos de nível superior em um modelo: AWSTemplateFormatVersion e Descrição. AWSTemplateFormatVersion é simplesmente a versão do formato de modelo. Se você não a especificar, o CloudFormation usará a versão mais recente.</p>
    <p>Descrição é qualquer string JSON ou YAML válida. Essa descrição é exibida na página Especificar parâmetros do assistente de criação de pilha. Para obter mais informações, consulte <a href="./format-version-structure.html">Versão do formato</a> e <a href="./template-description-structure.html">Descrição</a>.</p>

    <p>É claro que há mais recursos avançados de modelo e pilha. Veja aqui uma lista com alguns recursos importantes sobre os quais você precisará saber mais:</p>
    <p><em>Atributos opcionais</em> que podem ser usados com qualquer recurso:</p>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><a href="./aws-attribute-dependson.html">Atributo DependsOn</a> permite especificar que um recurso deve ser criado após outro.</p>
      </li><li class="listitem">
        <p>O <a href="./aws-attribute-deletionpolicy.html">Atributo DeletionPolicy</a> permite especificar como o CloudFormation deve lidar com a exclusão de um recurso.</p>
      </li><li class="listitem">
        <p>O atributo <a href="./aws-attribute-metadata.html">Metadata</a> permite que você especifique dados estruturados com um recurso.</p>
      </li></ul></div>
    <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-stack.html"><em>AWS::CloudFormation::Stack</em></a> permite aninhar outra pilha como um recurso em seu modelo.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./GettingStarted.Walkthrough.html">Conceitos básicos</div><div id="next" class="next-link" accesskey="n" href="./updating.stacks.walkthrough.html">Demonstração: Atualizar uma pilha</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>