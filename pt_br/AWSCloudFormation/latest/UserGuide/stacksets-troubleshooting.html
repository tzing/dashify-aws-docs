<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Solução de problemas de AWS CloudFormation StackSets - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="stacksets-troubleshooting" /><meta name="default_state" content="stacksets-troubleshooting" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" /><meta name="description" content="Este tópico contém alguns problemas comuns do AWS CloudFormation StackSets e soluções sugeridas para esses problemas." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Solução de problemas de AWS CloudFormation StackSets" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Solução de problemas de AWS CloudFormation StackSets - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabalhar com o AWS CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Solução de problemas de AWS CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#common-reasons-for-stack-operation-failure">Motivos comuns de falha na operação da pilha</a><a href="#retrying-failed-stack-creation-or-update-operations">Realizar novamente operações de criação ou atualização de pilha com falha</a><a href="#stack-instance-delete-fails">Falha de exclusão de instância de pilha</a><a href="#stack-import-fails">Falha na operação de importação de pilhas</a><a href="#stack-instance-failure-count-for-stackset-operations">Contagem de falhas de instâncias de pilha para operações do StackSets</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="stacksets-troubleshooting">Solução de problemas de AWS CloudFormation StackSets</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Este tópico contém alguns problemas comuns do AWS CloudFormation StackSets e soluções sugeridas para esses problemas.</p><div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#common-reasons-for-stack-operation-failure">Motivos comuns de falha na operação da pilha</a></li><li><a href="#retrying-failed-stack-creation-or-update-operations">Realizar novamente operações de criação ou atualização de pilha com falha</a></li><li><a href="#stack-instance-delete-fails">Falha de exclusão de instância de pilha</a></li><li><a href="#stack-import-fails">Falha na operação de importação de pilhas</a></li><li><a href="#stack-instance-failure-count-for-stackset-operations">Contagem de falhas de instâncias de pilha para operações do StackSets</a></li></ul></div>
        <h2 id="common-reasons-for-stack-operation-failure">Motivos comuns de falha na operação da pilha</h2>

        <p><b>Problema:</b> uma operação de pilha falhou, e o status da instância de pilha é <code class="code">OUTDATED</code>.</p>
        <p><b>Causa:</b> pode haver várias causas comuns para a falha na operação da pilha.</p>
        <div class="itemizedlist">
             
             
             
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Permissões insuficientes em uma conta de destino para criar recursos especificados no seu modelo.</p>
            </li><li class="listitem">
                <p>O modelo do AWS CloudFormation pode conter erros. Valide o modelo no AWS CloudFormation e corrija os erros antes de tentar criar seu conjunto de pilhas.</p>
            </li><li class="listitem">
                <p>O modelo pode estar tentando criar recursos globais que precisam ser únicos, mas não são. Por exemplo, os buckets do S3.</p>
            </li><li class="listitem">
                <p>Não existe um número de conta de destino especificado. Verifique os números da conta de destino que você especificou na página <b>Definir opções de implantação</b> do assistente.</p>
            </li><li class="listitem">
                <p>A conta de administrador não possui uma relação de confiança com a conta de destino.</p>
            </li><li class="listitem">
                <p>A quantidade máxima especificada para um recurso no seu modelo já existe na sua conta de destino. Por exemplo, você pode ter atingido o limite de permitido de funções IAM em uma conta de destino, mas o modelo cria mais funções IAM.</p>
            </li><li class="listitem">
                <p>Você atingiu a quantidade máxima permitida de pilhas em um conjunto de pilhas. Consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cloudformation-limits.html">Limites do AWS CloudFormation</a> para saber o número máximo de pilhas por conjunto de pilhas.</p>
            </li></ul></div>
        <p><b>Solução:</b> Para obter mais informações sobre as permissões necessárias das contas de destino e administrador antes de criar conjuntos de pilhas, consulte <a href="./stacksets-prereqs-self-managed.html#stacksets-prereqs-accountsetup">Definir permissões básicas para operações de conjuntos de pilhas</a>.</p>
     
        <h2 id="retrying-failed-stack-creation-or-update-operations">Realizar novamente operações de criação ou atualização de pilha com falha</h2>

        <p><b>Problema:</b> uma operação de criação ou atualização de pilha falhou, e o status da instância de pilha é <code class="code">OUTDATED</code>. Para saber o motivo da falha de uma tentativa de criação ou atualização de pilha, abra o console do AWS CloudFormation e veja os eventos da pilha, que terão um status <code class="code">DELETED</code> (para operações de criação com falha) ou <code class="code">FAILED</code> (para operações de atualização com falha). Navegue pelos eventos de pilha e localize a coluna <b>Motivo do status</b>. O valor de <b>Motivo do status</b> explica o motivo da falha na operação.</p>
        <p>Depois de corrigir a causa subjacente da falha na criação da pilha, você poderá tentar realizar a criação da pilha novamente. Para isso, execute as etapas a seguir.</p>
        <p><b>Solução:</b> execute as seguintes etapas para tentar realizar a operação da pilha novamente.</p>
        <div class="procedure"><ol><li>
                <p>No console, selecione o conjunto de pilhas que contém a pilha na qual a operação falhou.</p>
            </li><li>
                <p>No menu <b>Actions (Ações)</b>, escolha <b>Edit StackSet details (Editar detalhes do StackSet)</b> para tentar criar ou atualizar as pilhas novamente.</p>
            </li><li>
                <p>Na página <b>Specify template (Especificar modelo)</b>, mantenha a opção padrão <b>Use current template (Usar modelo atual)</b> para usar o mesmo modelo do AWS CloudFormation. Se sua operação de pilha falhou porque o modelo necessário foi alterado e você deseja enviar um modelo revisado, escolha <b>Carregar um modelo no Amazon S3</b> e, em seguida, <b>Procurar</b> para selecionar o modelo atualizado. Quando você terminar de carregar do modelo revisado, escolha <b>Próximo</b>.</p>
            </li><li>
                <p>Na página <b>Especificar detalhes</b>, escolha <b>Próximo</b> se você não estiver alterando nenhum parâmetro específico do seu modelo.</p>
            </li><li>
                <p>Na página <b>Definir opções de implantação</b>, altere os padrões para <b>Máximo de contas simultâneas</b> e <b>Tolerância a falhas</b>, se desejar. Para ter mais informações sobre essas configurações, consulte <a href="./stacksets-concepts.html#stackset-ops-options">Opções de operação do conjunto de pilhas</a>.</p>
            </li><li>
                <p>Na página <b>Revisão</b>, revise suas seleções e marque a caixa de seleção para confirmar os recursos do IAM necessários. Selecione <b>Enviar</b>.</p>
            </li><li>
                <p>Se sua pilha não for atualizada com êxito, repita este procedimento depois de ter resolvido todos os problemas subjacentes que estejam impedindo a criação de pilhas.</p>
            </li></ol></div>
     
        <h2 id="stack-instance-delete-fails">Falha de exclusão de instância de pilha</h2>
        <p><b>Problema:</b> houve uma falha de exclusão de pilha.</p>
        <p><b>Causa:</b> a exclusão de pilha falhará para as pilhas em que a proteção contra encerramento foi ativada.</p>
        <p><b>Solução:</b> determine se a proteção contra encerramento foi ativada para a pilha. Caso tenha sido, desative a proteção contra encerramento e, em seguida, execute a exclusão de instância de pilha novamente.</p>
     
        <h2 id="stack-import-fails">Falha na operação de importação de pilhas</h2>
        <p><b>Problema:</b> uma operação de importação de pilhas falha ao importar pilhas existentes para conjuntos de pilhas novos ou existentes. A instância da pilha está em um status <code class="code">INOPERABLE</code>.</p>
        <p><b>Solução:</b> reverta a operação de importação de pilhas, concluindo as seguintes tarefas.</p>
        <div class="orderedlist">
             
             
             
            <ol><li>
                <p>Use a opção <b>Delete Stacks from StackSets</b> (Excluir pilhas do StackSets), habilite <b>RetainStacks</b> durante a configuração e depois exclua instâncias de pilha do seu conjunto de pilhas. Para saber mais, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-delete.html">Excluir instâncias de pilhas do seu conjunto de pilhas</a>.</p>
            </li><li>
                <p>Você verá que a instância da pilha do Stackset é atualizada para remover a instância da pilha <code class="code">INOPERABLE</code>.</p>
            </li><li>
                <p>Corrija as instâncias da pilha de acordo com o erro de falha na importação e repita a operação de importação da pilha.</p>
            </li></ol></div>
     
        <h2 id="stack-instance-failure-count-for-stackset-operations">Contagem de falhas de instâncias de pilha para operações do StackSets</h2>
        <p>A contagem de falhas de instâncias de pilha alerta você se houver falha no provisionamento ou na atualização de instâncias de pilha. Essas instâncias da pilha não foram implantados por um ou mais dos seguintes motivos:</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Recursos existentes com uma configuração semelhante</p>
            </li><li class="listitem">
                <p>Dependências ausentes, como perfis do AWS Identity and Access Management (IAM)</p>
            </li><li class="listitem">
                <p>Outros fatores conflitantes</p>
            </li></ul></div>
        <p>Se você quiser implantar com o máximo de simultaneidade, a contagem máxima de simultaneidade é uma mais do que a contagem de tolerância a falhas. Por exemplo, se a contagem de tolerância a falhas for 9, a contagem máxima de simultaneidade não poderá ser maior que 10. Isso fará com que a operação retorne <code class="code">SUCCEEDED</code> mesmo se houver falha algumas na atualização de algumas instâncias de pilha. A nova contagem de falhas de instâncias de pilha permite que você determine se a operação só foi bem-sucedida condicionalmente porque a contagem de tolerância a falhas está definida para permitir todas as falhas.</p>
        <p>Você pode usar o AWS Management Console, o AWS SDK ou a AWS CLI para obter a contagem de falhas e filtrar as instâncias de pilha para determinar quais instâncias precisam ser reimplantadas.</p>
         
            <h3 id="stack-instance-failure-count-for-stackset-operations-console-examples">Usar o console</h3>
            <div class="procedure"><h6>Para ver o número de instâncias de pilha em que houve falha:</h6><ol><li>
                    <p>Abra o <a href="https://console.aws.amazon.com/cloudformation" rel="noopener noreferrer" target="_blank"><span>console do AWS CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> e escolha <b>StackSets</b>.</p>
                </li><li>
                    <p>Escolha o StackSet e depois a guia <b>Operations</b> (Operações).</p>
                </li><li>
                    <p>Escolha um status na coluna <b>Status</b> para visualizar detalhes do status. Você encontrará o número de instâncias de pilha em que houve falha para uma determinada operação nos detalhes do status.</p>
                </li></ol></div>
            <div class="procedure"><h6>Para visualizar a conta, a região e o status das instâncias de pilha para a operação:</h6><ol><li>
                    <p>Nos detalhes do status, escolha a contagem das instâncias de pilha em que houve falha. <em>Exemplo:</em> <b>instâncias de pilha: <code class="code">&lt;number of failed stack
                                instances&gt;</code></b>.</p>
                </li><li>
                    <p>Expanda o painel lateral escolhendo o cabeçalho do painel. Os resultados no painel lateral são os status das instâncias de pilha após a conclusão da operação selecionada.</p>
                </li></ol></div>
            <div class="procedure"><h6>Para ver os detalhes da instância de pilha atual para uma operação:</h6><ol><li>
                    <p>Escolha a guia <b>Stack Instances</b> (Instâncias de pilha).</p>
                </li><li>
                    <p>Filtre por <b>Last operation ID</b> (ID da última operação). Os resultados são os status atuais e os motivos dos status da última operação a modificar a instância. É possível usar esse filtro em combinação com <b>Conta da AWS</b>, <b>Região da AWS</b>, <b>Status detalhado</b> e <b>Status de desvio</b> para refinar ainda mais os resultados da pesquisa.</p>
                </li></ol></div>
         
         
            <h3 id="stack-instance-failure-count-for-stackset-operations-cli-examples">Usando a AWS CLI</h3>
            <p>Para obter o número de instâncias de pilha em que houve falha, chame <code class="code">describe-stack-set-operation</code> ou <code class="code">list-stack-set-operations</code> e consulte <code class="code">StatusDetails</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code>aws cloudformation describe-stack-set-operation --stack-set-name ss1 \
    --operation-id 5550e62f-c822-4331-88fa-21c1d7bafc60</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "StackSetOperation": <span>{</span>
        "OperationId": "5550e62f-c822-4331-88fa-21c1d7bafc60",
        "StackSetId": "ss1:9101ca57-49fc-4a61-a5a6-4c97b8adb08f",
        "Action": "CREATE",
        "Status": "SUCCEEDED",
        "OperationPreferences": <span>{</span>
            "RegionOrder": [],
            "FailureToleranceCount": 10,
            "MaxConcurrentCount": 10
        },
        "AdministrationRoleARN": "arn:aws:iam::123456789012:role/AWSCloudFormationStackSetAdministrationRole",
        "ExecutionRoleName": "AWSCloudFormationStackSetExecutionRole",
        "CreationTimestamp": "2022-10-26T17:18:53.947000+00:00",
        "EndTimestamp": "2022-10-26T17:19:35.304000+00:00",
        "StatusDetails": <span>{</span>
            "FailedStackInstancesCount": 3
        }
    }
}</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation list-stack-set-operations --stack-set-name ss1</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Summaries": [
        <span>{</span>
            "OperationId": "5550e62f-c822-4331-88fa-21c1d7bafc60",
            "Action": "CREATE",
            "Status": "SUCCEEDED",
            "CreationTimestamp": "2022-10-26T17:18:53.947000+00:00",
            "EndTimestamp": "2022-10-26T17:19:35.304000+00:00",
            "StatusDetails": <span>{</span>
                "FailedStackInstancesCount": 3
            },
            "OperationPreferences": <span>{</span>
                "RegionOrder": [],
                "FailureToleranceCount": 10,
                "MaxConcurrentCount": 10
            }
        }
    ]
}</code></pre>
            <p>Para obter uma visão geral histórica de uma determinada operação, use <code class="code">list-stack-set-operation-results</code> para visualizar o status e o motivo do status de cada instância de pilha após a conclusão da operação. Veja <code class="code">Status</code> e <code class="code">StatusReason</code> no seguinte exemplo:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation list-stack-set-operation-results --stack-set-name ss1 --operation-id 5550e62f-c822-4331-88fa-21c1d7bafc60 --filters Name=OPERATION_RESULT_STATUS,Values=FAILED</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Summaries": [
        <span>{</span>
            "Account": "123456789012",
            "Region": "us-west-2",
            "Status": "FAILED",
            "StatusReason": "Account 123456789012 should have 'AWSCloudFormationStackSetExecutionRole' role with trust relationship to Role 'AWSCloudFormationStackSetAdministrationRole'.",
            "AccountGateResult": <span>{</span>
                "Status": "SKIPPED",
                "StatusReason": "Account 123456789012 should have 'AWSCloudFormationStackSetExecutionRole' role with trust relationship to Role 'AWSCloudFormationStackSetAdministrationRole'."
            },
            "OrganizationalUnitId": ""
        },
        <span>{</span>
            "Account": "123456789012",
            "Region": "us-west-1",
            "Status": "FAILED",
            "StatusReason": "Account 123456789012 should have 'AWSCloudFormationStackSetExecutionRole' role with trust relationship to Role 'AWSCloudFormationStackSetAdministrationRole'.",
            "AccountGateResult": <span>{</span>
                "Status": "SKIPPED",
                "StatusReason": "Account 123456789012 should have 'AWSCloudFormationStackSetExecutionRole' role with trust relationship to Role 'AWSCloudFormationStackSetAdministrationRole'."
            },
            "OrganizationalUnitId": ""
        },
        <span>{</span>
            "Account": "123456789012",
            "Region": "us-east-1",
            "Status": "FAILED",
            "StatusReason": "Account 123456789012 should have 'AWSCloudFormationStackSetExecutionRole' role with trust relationship to Role 'AWSCloudFormationStackSetAdministrationRole'.",
            "AccountGateResult": <span>{</span>
                "Status": "SKIPPED",
                "StatusReason": "Account 123456789012 should have 'AWSCloudFormationStackSetExecutionRole' role with trust relationship to Role 'AWSCloudFormationStackSetAdministrationRole'."
            },
            "OrganizationalUnitId": ""
        }
    ]
}</code></pre>
            <p>Use <code class="code">list-stack-instances</code> com os filtros <code class="code">DETAILED_STATUS</code> e <code class="code">LAST_OPERATION_ID</code> para obter uma lista das instâncias de pilha em que houve falha na última operação que tentou implantar a instância de pilha. Veja o sinalizador <code class="code">--filters</code> no exemplo com <code class="code">DETAILED_STATUS</code> e <code class="code">LAST_OPERATION_ID</code>:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation list-stack-instances --stack-set-name ss1 --filters Name=DETAILED_STATUS,Values=FAILED Name=LAST_OPERATION_ID,Values=5550e62f-c822-4331-88fa-21c1d7bafc60</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Summaries": [
        <span>{</span>
            "StackSetId": "ss1:9101ca57-49fc-4a61-a5a6-4c97b8adb08f",
            "Region": "us-east-1",
            "Account": "123456789012",
            "Status": "OUTDATED",
            "StatusReason": "Account 123456789012 should have 'AWSCloudFormationStackSetExecutionRole' role with trust relationship to Role 'AWSCloudFormationStackSetAdministrationRole'.",
            "StackInstanceStatus": <span>{</span>
                "DetailedStatus": "FAILED"
            },
            "OrganizationalUnitId": "",
            "DriftStatus": "NOT_CHECKED",
            "LastOperationId": "5550e62f-c822-4331-88fa-21c1d7bafc60"
        },
        <span>{</span>
            "StackSetId": "ss1:9101ca57-49fc-4a61-a5a6-4c97b8adb08f",
            "Region": "us-west-1",
            "Account": "123456789012",
            "Status": "OUTDATED",
            "StatusReason": "Account 123456789012 should have 'AWSCloudFormationStackSetExecutionRole' role with trust relationship to Role 'AWSCloudFormationStackSetAdministrationRole'.",
            "StackInstanceStatus": <span>{</span>
                "DetailedStatus": "FAILED"
            },
            "OrganizationalUnitId": "",
            "DriftStatus": "NOT_CHECKED",
            "LastOperationId": "5550e62f-c822-4331-88fa-21c1d7bafc60"
        },
        <span>{</span>
            "StackSetId": "ss1:9101ca57-49fc-4a61-a5a6-4c97b8adb08f",
            "Region": "us-west-2",
            "Account": "123456789012",
            "Status": "OUTDATED",
            "StatusReason": "Account 123456789012 should have 'AWSCloudFormationStackSetExecutionRole' role with trust relationship to Role 'AWSCloudFormationStackSetAdministrationRole'.",
            "StackInstanceStatus": <span>{</span>
                "DetailedStatus": "FAILED"
            },
            "OrganizationalUnitId": "",
            "DriftStatus": "NOT_CHECKED",
            "LastOperationId": "5550e62f-c822-4331-88fa-21c1d7bafc60"
        }
    ]
}</code></pre>
            <p>Para encontrar o ID da última operação para modificar uma instância de pilha, use <code class="code">list-stack-instances</code> ou <code class="code">describe-stack-instance</code> para obter o <code class="code">LastOperationId</code>:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh ">aws cloudformation describe-stack-instance --stack-set-name ss1 --stack-instance-account 123456789012 --stack-instance-region us-east-2</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "StackInstance": <span>{</span>
        "StackSetId": "ss1:9101ca57-49fc-4a61-a5a6-4c97b8adb08f",
        "Region": "us-west-2",
        "Account": "123456789012",
        "ParameterOverrides": [],
        "Status": "OUTDATED",
        "StackInstanceStatus": <span>{</span>
            "DetailedStatus": "FAILED"
        },
        "StatusReason": "Account 123456789012 should have 'AWSCloudFormationStackSetExecutionRole' role with trust relationship to Role 'AWSCloudFormationStackSetAdministrationRole'.",
        "OrganizationalUnitId": "",
        "DriftStatus": "NOT_CHECKED",
        "LastOperationId": "5550e62f-c822-4331-88fa-21c1d7bafc60"
    }
}</code></pre>
         
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./stacksets-sampletemplates.html">Modelos de exemplo</div><div id="next" class="next-link" accesskey="n" href="./git-sync.html">Como trabalhar com o Git Sync</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stacksets-troubleshooting.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>