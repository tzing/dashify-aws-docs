<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Solução de problemas do CloudFormation - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="troubleshooting" /><meta name="default_state" content="troubleshooting" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html" /><meta name="description" content="Solucione problemas que podem ocorrer ao criar, atualizar ou excluir uma pilha do AWS CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Solução de problemas do CloudFormation" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Solução de problemas do CloudFormation - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Solução de problemas do CloudFormation",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#basic-ts-guide">Guia de solução de problemas</a><a href="#troubleshooting-errors">Solucionar de problemas de erros</a><a href="#contacting-support">Como entrar em contato com o suporte do </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="troubleshooting">Solução de problemas do CloudFormation</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Ao usar o AWS CloudFormation, você pode encontrar problemas ao criar, atualizar ou excluir pilhas do CloudFormation. As seções a seguir podem ajudar a solucionar alguns problemas comuns que você pode encontrar.</p><p>Para perguntas gerais sobre o CloudFormation, consulte as <a href="https://aws.amazon.com/cloudformation/faqs/" rel="noopener noreferrer" target="_blank"><span>Perguntas frequentes sobre o AWS CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Também é possível pesquisar respostas e postar perguntas no <a href="https://forums.aws.amazon.com/forum.jspa?forumID=92" rel="noopener noreferrer" target="_blank"><span>Fóruns do AWS CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p><div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#basic-ts-guide">Guia de solução de problemas</a></li><li><a href="#troubleshooting-errors">Solucionar de problemas de erros</a></li><li><a href="#contacting-support">Como entrar em contato com o suporte do </a></li></ul></div>
        <h2 id="basic-ts-guide">Guia de solução de problemas</h2>

        <p>Se houver falha no AWS CloudFormation ao criar, atualizar ou excluir a pilha, você pode visualizar mensagens de erro ou logs para ajudar a saber mais sobre o problema. As tarefas a seguir descrevem métodos gerais para a solução de um problema do CloudFormation. Para obter mais informações sobre erros específicos e soluções, consulte a seção <a href="#troubleshooting-errors">Solucionar de problemas de erros</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Use o console do <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> para visualizar o status da pilha. No console, você pode visualizar uma lista de eventos de pilha enquanto sua pilha está sendo criada, atualizada ou excluída. Nessa lista, encontre o evento de falha e, em seguida, visualize o motivo do status desse evento. O motivo do status pode conter uma mensagem de erro do AWS CloudFormation ou de um serviço específico que pode ajudá-lo a resolver o problema. Para obter mais informações sobre a visualização de eventos de pilha, consulte <a href="./cfn-console-view-stack-data-resources.html">Visualizar dados e recursos da pilha do AWS CloudFormation no AWS Management Console</a>.</p>
            </li><li class="listitem">
                <p>Para problemas do Amazon EC2, visualize os logs do cfn e do cloud-init. Esses logs são publicados na instância do Amazon EC2, no diretório <code>/var/log/</code>. Esses logs capturam processos e saídas de comandos enquanto o AWS CloudFormation está configurando sua instância. No Windows, visualize o serviço EC2Configure em <code>%ProgramFiles%\Amazon\EC2ConfigService</code>, EC2 Launch em <code>%ProgramData%\Amazon\EC2-Windows\Launch\Logs</code>, EC2 Launch v2 em <code>%ProgramData%\Amazon\EC2Launch\log</code> e os logs do cfn em <code>C:\cfn\log</code>.</p>
                <p>Você também pode configurar o modelo do AWS CloudFormation para que os logs sejam publicados no Amazon CloudWatch que exibe os logs no AWS Management Console para que você não precise se conectar à sua instância do Amazon EC2. Para obter mais informações, consulte <a href="https://aws.amazon.com/blogs/devops/view-cloudformation-logs-in-the-console/" rel="noopener noreferrer" target="_blank"><span>Visualizar logs do CloudFormation no console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> no blog de gerenciamento de aplicações.</p>
            </li></ul></div>
     
        <h2 id="troubleshooting-errors">Solucionar de problemas de erros</h2>

        <p>Ao encontrar os seguintes erros na pilha do AWS CloudFormation, você pode usar as seguintes soluções para ajudá-lo a encontrar a origem dos problemas e corrigi-los.</p>
        <div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#troubleshooting-errors-delete-stack-fails">Falha na exclusão da pilha</a></li><li><a href="#troubleshooting-errors-dependency-error">Erro de dependência</a></li><li><a href="#troubleshooting-errors-error-parsing-parameter-when-passing-a-list">Erro ao analisar parâmetros ao passar uma lista</a></li><li><a href="#troubleshooting-errors-insufficient-iam-permissions">Permissões insuficientes do IAM</a></li><li><a href="#troubleshooting-errors-invalid-value-or-unsupported-resource-property">Valor inválido ou propriedade de recurso sem suporte</a></li><li><a href="#troubleshooting-errors-limit-exceeded">Cota excedida</a></li><li><a href="#troubleshooting-errors-nested-stacks-are-stuck">As pilhas aninhadas estão paralisadas em UPDATE_COMPLETE_CLEANUP_IN_PROGRESS, UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS ou UPDATE_ROLLBACK_IN_PROGRESS</a></li><li><a href="#troubleshooting-errors-no-updates-to-perform">Nenhuma atualização a ser executada</a></li><li><a href="#troubleshooting-resource-did-not-stabilize">Falha ao estabilizar recurso durante uma operação de criação, atualização ou exclusão de pilha</a></li><li><a href="#troubleshooting-errors-security-group-does-not-exist-in-vpc">O Grupo de segurança não existe na VPC</a></li><li><a href="#troubleshooting-errors-update-rollback-failed">Falha na reversão da atualização</a></li><li><a href="#troubleshooting-errors-wait-condition-didnt-receive-the-required-number-of-signals">A condição de espera não recebeu o número necessário de sinais de uma instância do Amazon EC2</a></li><li><a href="#troubleshooting-errors-resource-removed-not-deleted">Recurso removido da pilha, mas não excluído</a></li></ul></div>
         
            <h3 id="troubleshooting-errors-delete-stack-fails">Falha na exclusão da pilha</h3>

            <p>Para resolver essa situação, tente o seguinte:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                     
            <ul class="itemizedlist"><li class="listitem">
                    <p>Alguns recursos devem estar vazios para que possam ser excluídos. Por exemplo, você deve excluir todos os objetos de um bucket do Amazon S3 ou remover todas as instâncias de um grupo de segurança do Amazon EC2 para poder excluir o bucket ou o grupo de segurança.</p>
                </li><li class="listitem">
                    <p>Certifique-se de que você tem as permissões necessárias do IAM para excluir os recursos da pilha. Além das permissões do AWS CloudFormation, você deve ter permissão para usar os serviços subjacentes, como o Amazon S3 ou o Amazon EC2.</p>
                </li><li class="listitem">
                    <p>Quando as pilhas estiverem no estado <code class="code">DELETE_FAILED</code> porque o AWS CloudFormation não pôde excluir um recurso, execute novamente a exclusão com o parâmetro <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DeleteStack.html"><code class="code">RetainResources</code></a> e especifique o recurso que o AWS CloudFormation não pode excluir. O AWS CloudFormation exclui a pilha sem excluir o recurso retido. A retenção de recursos é útil quando você não pode excluir um recurso, como um bucket do S3 que contém objetos que você deseja manter, mas você ainda deseja excluir a pilha.</p>
                    <p>Depois de excluir a pilha, você pode excluir os recursos retidos manualmente usando o produto da AWS associado a eles.</p>
                </li><li class="listitem">
                    <p>Você não pode excluir pilhas que têm a proteção contra encerramento ativada. Se você tentar excluir uma pilha com proteção contra encerramento ativada, a exclusão falhará e a pilha, incluindo seu status, permanecerá inalterada. Desative a proteção contra encerramento na pilha e, em seguida, execute a operação de exclusão novamente.</p>
                    <p>Isso inclui <a href="./using-cfn-nested-stacks.html">pilhas aninhadas</a> cujas pilhas raiz têm proteção contra encerramento ativada. Desative a proteção contra encerramento na pilha raiz e, em seguida, execute a operação de exclusão novamente. É altamente recomendável que você não exclua pilhas aninhadas diretamente, mas as exclua apenas como parte da exclusão da pilha raiz e de todos os recursos dela.</p>
                    <p>Para ter mais informações, consulte <a href="./using-cfn-protect-stacks.html">Proteger uma pilha contra exclusão</a>.</p>
                </li><li class="listitem">
                        <p>Para todos os outros problemas, se você tiver AWS Support, poderá criar um caso de AWS Support. Consulte <a href="#contacting-support">Como entrar em contato com o suporte do </a>.</p>
                </li></ul></div>
         
         
            <h3 id="troubleshooting-errors-dependency-error">Erro de dependência</h3>

            <p>Para resolver um erro de dependência, adicione um atributo <code class="code">DependsOn</code> aos recursos que dependem de outros recursos em seu modelo. Em alguns casos, você deve declarar dependências explicitamente para que o AWS CloudFormation possa criar ou excluir recursos na ordem correta. Por exemplo, se você criar um IP elástico e uma VPC com um Internet gateway na mesma pilha, o IP elástico deverá depender do anexo do Internet Gateway. Para obter informações adicionais, consulte <a href="./aws-attribute-dependson.html">Atributo DependsOn</a>.</p>
         
         
            <h3 id="troubleshooting-errors-error-parsing-parameter-when-passing-a-list">Erro ao analisar parâmetros ao passar uma lista</h3>

            <p>Ao usar a AWS Command Line Interface ou o AWS CloudFormation para passar uma lista, adicione o caractere de escape (<code class="code">\</code>) antes de cada vírgula. O exemplo a seguir mostra como você especifica um parâmetro de entrada ao usar a AWS CLI.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">ParameterKey=CIDR,ParameterValue='10.10.0.0/16\,10.10.0.0/24\,10.10.1.0/24'</code></pre>
         
         
            <h3 id="troubleshooting-errors-insufficient-iam-permissions">Permissões insuficientes do IAM</h3>

            <p>Ao trabalhar com uma pilha do AWS CloudFormation, você não precisa só de permissões para usar o AWS CloudFormation, você também deve ter permissão para usar os serviços subjacentes que são descritos em seu modelo. Por exemplo, se estiver criando um bucket do Amazon S3 ou iniciando uma instância do Amazon EC2, você precisa de permissões para o Amazon S3 ou para o Amazon EC2. Revise sua política do IAM e verifique se você tem as permissões necessárias antes de trabalhar com pilhas do AWS CloudFormation. Para obter mais informações, consulte <a href="./using-iam-template.html">Controlar o acesso com o AWS Identity and Access Management</a>.</p>
         
         
            <h3 id="troubleshooting-errors-invalid-value-or-unsupported-resource-property">Valor inválido ou propriedade de recurso sem suporte</h3>

            <p>Ao criar ou atualizar uma pilha do AWS CloudFormation, pode haver uma falha em sua pilha devido a parâmetros de entrada inválidos, nomes de propriedades de recursos sem suporte ou valores de propriedades de recursos sem suporte. Para parâmetros de entrada, verifique se o recurso existe. Por exemplo, quando você especifica um par de chaves do Amazon EC2 ou um ID de VPC, o recurso deve existir em sua conta e na região na qual você está criando ou atualizando a pilha. Você pode usar <a href="./parameters-section-structure.html#parameters-section-structure-syntax">tipos de parâmetros</a> específicos da AWS para garantir o uso de valores válidos.</p>
            <p>Para nomes e valores de propriedades de recursos, atualize seu modelo para usar nomes e valores válidos. Para obter uma lista de todos os recursos e seus nomes de propriedades, consulte <a href="./aws-template-resource-type-ref.html">Referência de tipos de propriedades e recursos da AWS</a>.</p>
         
         
            <h3 id="troubleshooting-errors-limit-exceeded">Cota excedida</h3>

            <p>Verifique se você não atingiu a cota de um recurso. Por exemplo, o número máximo padrão de instâncias do Amazon EC2 On-Demand que você pode executar é 5. Se tentar criar mais instâncias sob demanda do Amazon EC2 que a cota da sua conta, haverá falha na criação da instância e você receberá o erro <code class="code">Status=start_failed</code>. Para visualizar as cotas padrão da AWS por serviço, consulte <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html">Cotas de serviço da AWS</a>, no <em>Referência geral da AWS</em>.</p>
            <p>Para obter as cotas e estratégias de ajuste do AWS CloudFormation, consulte <a href="./cloudformation-limits.html">Cotas do AWS CloudFormation</a>.</p>
            <p>Além disso, durante uma atualização, se um recurso for substituído, o AWS CloudFormation criará um novo recurso antes de excluir o antigo. Essa substituição pode colocar sua conta acima da quota de recursos, o que provoca uma falha na atualização. Você pode excluir o excesso de recursos ou solicitar um <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html">aumento de cota</a>.</p>
         
         
            <h3 id="troubleshooting-errors-nested-stacks-are-stuck">As pilhas aninhadas estão paralisadas em <code class="code">UPDATE_COMPLETE_CLEANUP_IN_PROGRESS</code>, <code class="code">UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS</code> ou <code class="code">UPDATE_ROLLBACK_IN_PROGRESS</code></h3>

            <p>Falha na reversão de uma pilha aninhada. Devido às potenciais dependências de recursos entre pilhas aninhadas, o AWS CloudFormation não inicia a limpeza de recursos de pilhas aninhadas até que todas as pilhas aninhadas tenham sido atualizadas ou revertidas. Quando há falha na reversão de uma pilha aninhada, o AWS CloudFormation cancela todas as operações, independentemente do estado em que as outras pilhas aninhadas estão. Uma pilha aninhada que concluiu a atualização ou a reversão, mas não recebeu um sinal do AWS CloudFormation para iniciar a limpeza porque houve uma falha na reversão de outras pilhas aninhadas, está em um estado <code class="code">UPDATE_COMPLETE_CLEANUP_IN_PROGRESS</code> ou <code class="code">UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS</code>. Uma pilha aninhada que não pôde ser atualizada, mas não recebeu um sinal para iniciar a reversão, está em um estado <code class="code">UPDATE_ROLLBACK_IN_PROGRESS</code>.</p>
            <p>Uma pilha aninhada pode não ser revertida devido a alterações que foram feitas fora do AWS CloudFormation, quando o modelo da pilha não refletir precisamente o estado da pilha. Uma pilha aninhada também pode falhar se um grupo de Auto Scaling tinha tempo limite insuficiente para sinal de recurso quando o grupo foi criado ou atualizado.</p>
            <p>Para corrigir a pilha, entre em contato com o <a href="#contacting-support">AWS Support</a>.</p>
         
         
            <h3 id="troubleshooting-errors-no-updates-to-perform">Nenhuma atualização a ser executada</h3>

            <p>Para atualizar uma pilha do AWS CloudFormation, você deve enviar as alterações do modelo ou do valor do parâmetro ao AWS CloudFormation. No entanto, o AWS CloudFormation não reconhece algumas alterações de modelo como uma atualização, como alterações em uma política de exclusão, política de atualização, declaração de condição ou declaração de saída. Se você precisar fazer essas alterações sem fazer nenhuma outra alteração, você poderá adicionar ou modificar um atributo <a href="./aws-attribute-metadata.html">metadata</a> de qualquer um de seus recursos.</p>
            <p>Para obter mais informações sobre como modificar modelos durante uma atualização, consulte <a href="./using-cfn-updating-stacks-get-template.html">Modificar um modelo de pilha</a>.</p>
         
         
            <h3 id="troubleshooting-resource-did-not-stabilize">Falha ao estabilizar recurso durante uma operação de criação, atualização ou exclusão de pilha</h3>


            <p>Um recurso não respondeu porque a operação excedeu o tempo limite do AWS CloudFormation ou um produto da AWS foi interrompido. Para interrupções de serviços, <a href="https://status.aws.amazon.com/" rel="noopener noreferrer" target="_blank"><span>verifique</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> se o produto relevante da AWS está em execução e tente novamente a operação de pilha.</p>
            <p>Se os produtos da AWS forem executados com êxito, verifique se sua pilha contém um dos seguintes recursos:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><code class="code">AWS::AutoScaling::AutoScalingGroup</code> para criar, atualizar e excluir operações</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::CertificateManager::Certificate</code> para criar operações</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::CloudFormation::Stack</code> para criar, atualizar e excluir operações</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::ElasticSearch::Domain</code> para atualizar operações</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::RDS::DBCluster</code> para criar e atualizar operações</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::RDS::DBInstance</code> para criar, atualizar e excluir operações</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::Redshift::Cluster</code> para atualizar operações</p>
                </li></ul></div>

            <p>As operações para esses recursos podem demorar mais tempo que o tempo limite padrão. O tempo limite depende do recurso e das credenciais que você usa. Para estender o tempo limite, especifique uma <a href="./using-iam-servicerole.html">função de serviço</a> ao executar a operação de pilha. Se já estiver usando uma função de serviço, ou se a pilha contiver um recurso que não está listado, entre em contato com o <a href="#contacting-support">AWS Support</a>.</p>
            <p>Se a sua pilha estiver no estado <code class="code">UPDATE_ROLLBACK_FAILED</code>, consulte <a href="#troubleshooting-errors-update-rollback-failed">Falha na reversão da atualização</a>.</p>

         
         
            <h3 id="troubleshooting-errors-security-group-does-not-exist-in-vpc">O Grupo de segurança não existe na VPC</h3>

            <p>Verifique se o security group existe na VPC especificada. Se o security group existir, especifique o ID do security group e não o nome do security group. Por exemplo, o recurso <code class="code">AWS::EC2::SecurityGroupIngress</code> tem as propriedades <code class="code">SourceSecurityGroupName</code> e <code class="code">SourceSecurityGroupId</code>. Para os security groups da VPC, você deve usar a propriedade <code class="code">SourceSecurityGroupId</code> e especificar o ID do security group.</p>
         
         
            <h3 id="troubleshooting-errors-update-rollback-failed">Falha na reversão da atualização</h3>

            <p>Um recurso dependente não pode retornar para o estado original, provocando falha na reversão (estado <code class="code">UPDATE_ROLLBACK_FAILED</code>). Por exemplo, você pode ter uma pilha que está sendo revertida para uma instância de banco de dados antiga que foi excluída fora do AWS CloudFormation. Como o AWS CloudFormation não sabe que o banco de dados foi excluído, ele pressupõe que a instância de banco de dados ainda existe e tenta reverter, provocando falha na reversão da atualização.</p>
            <p>Dependendo da causa da falha, você poderá corrigir o erro manualmente e continuar a reversão. Ao continuar a reversão, você pode retornar sua pilha para o estado de funcionamento (o estado <code class="code">UPDATE_ROLLBACK_COMPLETE</code>) e, em seguida, tentar atualizar a pilha novamente. A lista a seguir descreve as soluções de erros comuns que provocam falhas na reversão da atualização:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">Falha ao receber o número necessário de sinais</span></dt>
                            <dd>
                                <p>Use o comando <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/signal-resource.html">signal-resource</a> para enviar manualmente o número necessário de sinais de êxito ao recurso que está esperando por eles e, em seguida, continue revertendo a atualização. Por exemplo, durante uma reversão de atualização, as instâncias em um grupo de Auto Scaling podem ter uma falha ao sinalizar êxito dentro do tempo limite especificado. Envie sinais de êxito manualmente ao grupo de Auto Scaling. Quando você continuar a reversão da atualização, o AWS CloudFormation verá seus sinais e continuará com a reversão.</p>
                            </dd>
                        </dl></div>
                </li><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">As alterações em um recurso foram feitas fora do AWS CloudFormation</span></dt>
                            <dd>
                                <p>Sincronize os recursos manualmente para que eles correspondam ao modelo da pilha original e continue a reversão da atualização. Por exemplo, se tiver excluído manualmente um recurso que o AWS CloudFormation está tentando reverter, você deverá criar esse recurso manualmente com o mesmo nome e propriedades na pilha original.</p>
                            </dd>
                        </dl></div>
                </li><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">Permissões insuficientes</span></dt>
                            <dd>
                                <p>Verifique se você tem permissões suficientes do IAM para modificar os recursos e continue a reversão da atualização. Por exemplo, sua política de IAM pode permitir que você crie um bucket do S3, mas não que modifique o bucket. Adicione ações de modificação à sua política.</p>
                            </dd>
                        </dl></div>
                </li><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">Token de segurança inválido</span></dt>
                            <dd>
                                <p>O AWS CloudFormation requer um novo conjunto de credenciais. Nenhuma alteração é necessária. Continue a reversão da atualização, o que atualiza as credenciais.</p>
                            </dd>
                        </dl></div>
                </li><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">Erro de limitação</span></dt>
                            <dd>
                                <p>Exclua recursos de que você não precisa ou solicite um <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html">aumento da quota</a> e, em seguida, continue a reversão da atualização. Por exemplo, se a cota do número de instâncias sob demanda do EC2 da sua conta for 5 e a reversão da atualização exceder essa cota, haverá uma falha.</p>
                            </dd>
                        </dl></div>
                </li><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">O recurso não estabilizou</span></dt>
                            <dd>
                                <p>Um recurso não respondeu porque a operação excedeu o tempo limite do AWS CloudFormation ou porque um produto da AWS pode ter sido interrompido. Nenhuma alteração é necessária. Depois que operação do recurso for concluída ou que o produto da AWS entrar em operação novamente, continue revertendo a atualização.</p>
                            </dd>
                        </dl></div>
                </li></ul></div>
            <p>Para continuar a reversão de uma atualização, você pode usar o console do AWS CloudFormation ou a interface de linhas de comando (AWS CLI) da AWS. Para ter mais informações, consulte <a href="./using-cfn-updating-stacks-continueupdaterollback.html">Continuar revertendo uma atualização</a>.</p>
            <p>Se nenhuma dessas soluções funcionar, você poderá ignorar os recursos que o AWS CloudFormation não pode reverter com êxito. Para obter mais informações, consulte o parâmetro <code class="code">ResourcesToSkip</code> da operação da API <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_ContinueUpdateRollback.html"><code class="code">ContinueUpdateRollback</code></a> na <em>Referência de APIs do AWS CloudFormation</em>. O AWS CloudFormation define o status dos recursos especificados como <code class="code">UPDATE_COMPLETE</code> e continua a reverter a pilha. Após a reversão ser concluída, o estado dos recursos ignorados será inconsistente com o estado dos recursos no modelo de pilha. Antes de executar outra atualização da pilha, você deve modificar os recursos ou atualizar a pilha para estarem consistentes entre si. Caso contrário poderá haver falha em atualizações subsequentes da pilha, e a pilha poderá se tornar irrecuperável.</p>
         
         
            <h3 id="troubleshooting-errors-wait-condition-didnt-receive-the-required-number-of-signals">A condição de espera não recebeu o número necessário de sinais de uma instância do Amazon EC2</h3>

            <p>Para resolver essa situação, tente o seguinte:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Verifique se a AMI que você está usando tem os scripts auxiliares do AWS CloudFormation instalados. Se a AMI não incluir os scripts auxiliares, você também poderá baixá-los em sua instância. Para ter mais informações, consulte <a href="./cfn-helper-scripts-reference.html">CloudFormation referência de scripts auxiliares</a>.</p>
                </li><li class="listitem">
                    <p>Verifique se o comando <code class="code">cfn-signal</code> foi executado com êxito na instância. Você pode visualizar os logs, por exemplo, <code>/var/log/cloud-init.log</code> ou <code>/var/log/cfn-init.log</code>, para ajudá-lo a depurar a execução da instância. Você pode recuperar os logs fazendo login em sua instância, mas você deve <a href="./cfn-console-add-tags.html">desabilitar a reversão em caso de falha</a> ou o AWS CloudFormation excluirá a instância depois que houver falha na criação da pilha. Você também pode <a href="https://aws.amazon.com/blogs/devops/view-cloudformation-logs-in-the-console/" rel="noopener noreferrer" target="_blank"><span>publicar os logs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> no Amazon CloudWatch. No Windows, você pode visualizar os logs do cfn em <code>C:\cfn\log</code> e os logs do serviço EC2Config em <code>%ProgramFiles%\Amazon\EC2ConfigService</code>.</p>
                </li><li class="listitem">
                    <p>Verifique se a instância tem uma conexão com a Internet. Se estiver em uma VPC, a instância deverá poder se conectar à Internet por meio de um dispositivo NAT se ela estiver em uma sub-rede privada ou por meio de um Internet gateway se estiver em uma sub-rede pública. Para testar a conexão da instância com a Internet, tente acessar uma página da web pública, como <code class="code">http://aws.amazon.com</code>. Por exemplo, você pode executar o seguinte comando na instância. Ele deve retornar um código de status HTTP 200.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">curl -I https://aws.amazon.com</code></code></pre>
                    <p>Para obter informações sobre como configurar um dispositivo NAT, consulte <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat.html">NAT</a> no <em>Guia do usuário da Amazon VPC</em>.</p>
                </li></ul></div>
         
         
            <h3 id="troubleshooting-errors-resource-removed-not-deleted">Recurso removido da pilha, mas não excluído</h3>
            <p>Durante uma atualização de pilha, o CloudFormation removeu um recurso de uma pilha, mas não excluiu o recurso. O recurso ainda existe, mas não é mais acessível por meio do CloudFormation. Isso pode ocorrer durante atualizações de pilha nas quais:</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>O CloudFormation precisa substituir um recurso existente, então primeiramente ele cria um novo recurso e, em seguida, tenta excluir o recurso antigo.</p>
                </li><li class="listitem">
                    <p>Você removeu o recurso do modelo de pilha, portanto, o CloudFormation tentará excluir o recurso da pilha.</p>
                </li></ul></div>
            <p>No entanto, pode haver casos em que o CloudFormation não poderá excluir o recurso. Por exemplo, se o usuário não tiver permissões para excluir um recurso de um determinado tipo.</p>
            <p>O CloudFormation tentará excluir o recurso antigo três vezes. Se o CloudFormation não puder excluir o recurso antigo, ele removerá o recurso antigo da pilha e continuará a atualizá-la. Quando a atualização da pilha estiver concluída, o CloudFormation emitirá um evento de pilha <code class="code">UPDATE_COMPLETE</code>, mas incluirá um <code class="code">StatusReason</code> que declarará que não foi possível excluir um ou mais recursos. O CloudFormation também emite um evento <code class="code">DELETE_FAILED</code> para o recurso específico, com um <code class="code">StatusReason</code> correspondente fornecendo mais detalhes sobre o motivo pelo qual o CloudFormation não conseguiu excluir o recurso.</p>
            <p>Para solucionar essa situação, exclua o recurso diretamente usando o console ou a API do serviço em questão.</p>
         
     
        <h2 id="contacting-support">Como entrar em contato com o suporte do </h2>

        <p>Se você tiver AWS Support, poderá criar um caso de suporte técnico em <a href="https://console.aws.amazon.com/support/home#/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/support/home#/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Antes de entrar em contato com o suporte, reúna as seguintes informações:</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>O ID da pilha. Você pode encontrar o ID da pilha na guia <b>Visão geral</b> do <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>console do AWS CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Para ter mais informações, consulte <a href="./cfn-console-view-stack-data-resources.html">Visualizar dados e recursos da pilha do AWS CloudFormation no AWS Management Console</a>.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Não faça alterações na pilha fora do AWS CloudFormation. Fazer alterações na pilha fora do AWS CloudFormation pode colocar a pilha em um estado irrecuperável.</p></div></div>
            </li><li class="listitem">
                <p>Todas as mensagens de erro da pilha. Para obter informações sobre como visualizar as mensagens de erro da pilha, consulte a seção <a href="#basic-ts-guide">Guia de solução de problemas</a>.</p>
            </li><li class="listitem">
                <p>Para problemas do Amazon EC2, reúna os logs do cfn e cloud-init. Esses logs são publicados na instância do Amazon EC2, no diretório <code>/var/log/</code>. Esses logs capturam processos e saídas de comandos enquanto sua instância está sendo configurada. No Windows, colete os logs do serviço EC2Configure e do cfn em <code>%ProgramFiles%\Amazon\EC2ConfigService</code> e <code>C:\cfn\log</code>.</p>
            </li></ul></div>
        <p>Também é possível pesquisar respostas e postar perguntas no <a href="https://forums.aws.amazon.com/forum.jspa?forumID=92" rel="noopener noreferrer" target="_blank"><span>Fóruns do AWS CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./example_cross_ApiGatewayDataTracker_section.html">Criar uma API REST para monitorar dados da COVID-19</div><div id="next" class="next-link" accesskey="n" href="./ReleaseHistory.html">Histórico de versões</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>