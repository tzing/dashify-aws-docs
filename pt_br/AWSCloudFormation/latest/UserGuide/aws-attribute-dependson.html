<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Atributo DependsOn - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-attribute-dependson" /><meta name="default_state" content="aws-attribute-dependson" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="description" content="Especifique que a criação de um recurso em particular depende de outro recurso no CloudFormation com o atributo DependsOn." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Atributo DependsOn" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Atributo DependsOn - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referência do modelo",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Referência de atributos de recursos",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-product-attribute-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Atributo DependsOn",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-product-attribute-reference.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#aws-attribute-dependson-syntax">Sintaxe</a><a href="#aws-attribute-dependson-example">Exemplo</a><a href="#gatewayattachment">Quando um atributo DependsOn é obrigatório</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-attribute-dependson">Atributo <code class="code">DependsOn</code></h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Com o atributo <code class="code">DependsOn</code>, você pode especificar que a criação de um recurso específico segue outro. Quando você adiciona um atributo <code class="code">DependsOn</code> a um recurso, esse recurso é criado apenas após a criação do recurso especificado no atributo <code class="code">DependsOn</code>.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Pilhas dependentes também têm dependências implícitas na forma de propriedades de destino <code class="code">!Ref</code>, <code class="code">!GetAtt</code> e <code class="code">!Sub</code>. Por exemplo, as seguintes regras serão aplicadas se as propriedades do recurso A usarem um <code class="code">!Ref</code> para o recurso B:</p><div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>O recurso B é criado antes do recurso A.</p>
            </li><li class="listitem">
                <p>O recurso A é excluído antes do recurso B.</p>
            </li><li class="listitem">
                <p>O recurso B é atualizado antes do recurso A.</p>
            </li></ul></div></div></div><p>Você pode usar o atributo <code class="code">DependsOn</code> com qualquer recurso. Estes são alguns usos típicos:</p><div class="itemizedlist">
         
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>Determinar quando uma condição de espera entra em vigor. Para ter mais informações, consulte <a href="./using-cfn-waitcondition.html">Criar condições de espera em um modelo</a>.</p>
        </li><li class="listitem">
            <p>Declarar dependências para recursos que devem ser criados ou excluídos em uma ordem específica. Por exemplo, você deve declarar explicitamente dependências de anexos de gateway para alguns recursos em uma VPC. Para ter mais informações, consulte <a href="#gatewayattachment">Quando um atributo DependsOn é obrigatório</a>.</p>
        </li><li class="listitem">
            <p>Substituir o paralelismo padrão ao criar, atualizar ou excluir recursos. O AWS CloudFormation cria, atualiza e exclui recursos em paralelo até o máximo possível. Ele determina automaticamente quais recursos em um modelo podem ser paralelizados e quais têm dependências que exigem que outras operações encerrem primeiro. Você pode usar <code class="code">DependsOn</code> para especificar explicitamente dependências, o que substitui o paralelismo padrão e instrui CloudFormation a operar nesses recursos em uma ordem específica.</p>
        </li></ul></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Durante a atualização de uma pilha, os recursos que dependem de recursos atualizados são atualizados automaticamente. O CloudFormation não faz alterações nos recursos atualizados automaticamente, mas, se uma política de pilha estiver associada a esses recursos, sua conta deverá ter as permissões para atualizá-los.</p></div></div>
        <h2 id="aws-attribute-dependson-syntax">Sintaxe</h2>

        <p>O atributo <code class="code">DependsOn</code> pode usar uma única sequência ou uma lista de sequências.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"DependsOn" : [ <code class="replaceable">String, ...</code> ]</code></pre>
     
        <h2 id="aws-attribute-dependson-example">Exemplo</h2>

        <p>O modelo a seguir contém um recurso <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a> com um atributo <code class="code">DependsOn</code> que especifica myDB, um <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-rds-database-instance.html">AWS::RDS::DBInstance</a>. Quando o CloudFormation cria essa pilha, ele primeiro cria o myDB e, em seguida, cria a Ec2Instance.</p>
        <div id="JSON" name="JSON" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-1.json">JSON</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion" : "2010-09-09",
    "Mappings" : <span>{</span>
        "RegionMap" : <span>{</span>
            "us-east-1" : <span>{</span> 
                "AMI" : "ami-0ff8a91507f77f867" 
            },
            "us-west-1" : <span>{</span> 
                "AMI" : "ami-0bdb828fd58c52235" 
            },
            "eu-west-1" : <span>{</span> 
                "AMI" : "ami-047bb4163c506cd98" 
            },
            "ap-northeast-1" : <span>{</span> 
                "AMI" : "ami-06cd52961ce9f0d85" 
            },
            "ap-southeast-1" : <span>{</span> 
                "AMI" : "ami-08569b978cc4dfa10" 
            }
        }
    },
    "Resources" : <span>{</span>
        "Ec2Instance" : <span>{</span>
            "Type" : "AWS::EC2::Instance",
            "Properties" : <span>{</span>
                "ImageId": <span>{</span>
                    "Fn::FindInMap": [
                        "RegionMap",
                        <span>{</span>
                            "Ref": "AWS::Region"
                        },
                        "AMI"
                    ]
                }
            },
            "DependsOn" : "myDB"
        },
        "myDB" : <span>{</span>
            "Type" : "AWS::RDS::DBInstance",
            "Properties" : <span>{</span>
               "AllocatedStorage" : "5",
               "DBInstanceClass" : "db.t2.small",
               "Engine" : "MySQL",
               "EngineVersion" : "5.5",
               "MasterUsername" : "MyName",
               "MasterUserPassword" : "MyPassword"
            }
        }
    }
}     </code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-1.yaml">YAML</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Mappings:
  RegionMap:
    us-east-1:
      AMI: ami-0ff8a91507f77f867
    us-west-1:
      AMI: ami-0bdb828fd58c52235
    eu-west-1:
      AMI: ami-047bb4163c506cd98
    ap-northeast-1:
      AMI: ami-06cd52961ce9f0d85
    ap-southeast-1:
      AMI: ami-08569b978cc4dfa10
Resources:
  Ec2Instance:
    Type: AWS::EC2::Instance
    Properties:
      ImageId:
        Fn::FindInMap:
        - RegionMap
        - Ref: AWS::Region
        - AMI
    DependsOn: myDB
  myDB:
    Type: AWS::RDS::DBInstance
    Properties:
      AllocatedStorage: '5'
      DBInstanceClass: db.t2.small
      Engine: MySQL
      EngineVersion: '5.5'
      MasterUsername: MyName
      MasterUserPassword: MyPassword
</code></pre>
        </div>
     
        <h2 id="gatewayattachment">Quando um atributo <code class="code">DependsOn</code> é obrigatório</h2>

        <p>Anexo de gateway de VPC</p>
        <p>Alguns recursos em uma VPC exigem um gateway (um gateway de VPN ou de Internet). Se o modelo do CloudFormation definir uma VPC, um gateway e um anexo de gateway, todos os recursos que requeiram o gateway dependerão do anexo de gateway. Por exemplo, uma instância de Amazon EC2 com um endereço IP público será dependente do anexo de gateway de VPC se os recursos <code class="code">VPC</code> e <code class="code">InternetGateway</code> também forem declarados no mesmo modelo.</p>
        <p>Atualmente, os seguintes recursos dependem de um anexo de gateway de VPC quando tiverem um endereço IP público associado e estiverem em uma VPC.</p>
        <div class="itemizedlist">
             
             
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Grupos do Auto Scaling</p>
            </li><li class="listitem">
                <p>Instâncias do Amazon EC2</p>
            </li><li class="listitem">
                <p>Load balancers Elastic Load Balancing</p>
            </li><li class="listitem">
                <p>Endereços IP elásticos</p>
            </li><li class="listitem">
                <p>Instâncias de bancos de dados Amazon RDS</p>
            </li><li class="listitem">
                <p>Rotas da Amazon VPC que incluem o Internet gateway</p>
            </li></ul></div>
        <p>A propagação de uma rota de gateway de VPN depende de um anexo de gateway de VPC quando você tem um gateway de VPN.</p>
        <p>O trecho a seguir mostra um anexo de gateway de exemplo e uma instância Amazon EC2 que depende de um anexo de gateway:</p>
        <div id="JSON" name="JSON" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-2.json">JSON</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"GatewayToInternet" : <span>{</span>
  "Type" : "AWS::EC2::VPCGatewayAttachment",
  "Properties" : <span>{</span>
    "VpcId" : <span>{</span> 
      "Ref" : "VPC" 
    },
    "InternetGatewayId" : <span>{</span> 
      "Ref" : "InternetGateway" 
    }
  }
},

"EC2Host" : <span>{</span>
  "Type" : "AWS::EC2::Instance",
  "DependsOn" : "GatewayToInternet",
  "Properties" : <span>{</span>
    "InstanceType" : <span>{</span> 
      "Ref" : "EC2InstanceType" 
    },
    "KeyName"  : <span>{</span> 
      "Ref" : "KeyName" 
    },
    "ImageId": <span>{</span>
      "Fn::FindInMap": [
        "AWSRegionArch2AMI",
        <span>{</span>
          "Ref": "AWS::Region"
        },
        <span>{</span>
          "Fn::FindInMap": [
            "AWSInstanceType2Arch",
            <span>{</span>
              "Ref": "EC2InstanceType"
            },
            "Arch"
          ]
        }
      ]
    },
    "NetworkInterfaces" : [
      <span>{</span>
        "GroupSet" : [
          <span>{</span> 
            "Ref" : "EC2SecurityGroup" 
          }
        ],
        "AssociatePublicIpAddress" : "true",
        "DeviceIndex" : "0",
        "DeleteOnTermination" : "true",
        "SubnetId" : <span>{</span> 
          "Ref" : "PublicSubnet" 
        }
      }
    ]
  }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-2.yaml">YAML</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">GatewayToInternet:
  Type: AWS::EC2::VPCGatewayAttachment
  Properties:
    VpcId:
      Ref: VPC
    InternetGatewayId:
      Ref: InternetGateway
EC2Host:
  Type: AWS::EC2::Instance
  DependsOn: GatewayToInternet
  Properties:
    InstanceType:
      Ref: EC2InstanceType
    KeyName:
      Ref: KeyName
    ImageId:
      Fn::FindInMap:
      - AWSRegionArch2AMI
      - Ref: AWS::Region
      - Fn::FindInMap:
        - AWSInstanceType2Arch
        - Ref: EC2InstanceType
        - Arch
    NetworkInterfaces:
    - GroupSet:
      - Ref: EC2SecurityGroup
      AssociatePublicIpAddress: 'true'
      DeviceIndex: '0'
      DeleteOnTermination: 'true'
      SubnetId:
        Ref: PublicSubnet</code></pre>
        </div>
         
            <h3 id="w9aac34c23c15c17c19">Serviço Amazon ECS e grupo do Auto Scaling</h3>

            <p>Quando você usa o Auto Scaling ou Amazon Elastic Compute Cloud (Amazon EC2) para criar instâncias de contêiner para um cluster de Amazon ECS o recurso do serviço de Amazon ECS deve ter uma dependência do grupo de Auto Scaling ou de instâncias de Amazon EC2 conforme mostrado no trecho a seguir. Dessa forma, as instâncias de contêiner estão disponíveis e associadas ao cluster de Amazon ECS antes do CloudFormation criar o serviço de Amazon ECS.</p>
            <div id="JSON" name="JSON" class="section langfilter">
                <h4 id="aws-attribute-dependson-example-3.json">JSON</h4>

                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"service": <span>{</span>
  "Type": "AWS::ECS::Service",
  "DependsOn": [
    "ECSAutoScalingGroup"
  ],
  "Properties" : <span>{</span>
    "Cluster": <span>{</span>
      "Ref": "ECSCluster"
    },
    "DesiredCount": "1",
    "LoadBalancers": [
      <span>{</span>
        "ContainerName": "simple-app",
        "ContainerPort": "80",
        "LoadBalancerName" : <span>{</span> 
          "Ref" : "EcsElasticLoadBalancer" 
        }
      }
    ],
    "Role" : <span>{</span>
      "Ref":"ECSServiceRole"
    },
    "TaskDefinition" : <span>{</span>
      "Ref":"taskdefinition"
    }
  }
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
                <h4 id="aws-attribute-dependson-example-3.yaml">YAML</h4>

                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">service:
  Type: AWS::ECS::Service
  DependsOn:
  - ECSAutoScalingGroup
  Properties:
    Cluster:
      Ref: ECSCluster
    DesiredCount: 1
    LoadBalancers:
    - ContainerName: simple-app
      ContainerPort: 80
      LoadBalancerName:
        Ref: EcsElasticLoadBalancer
    Role:
      Ref: ECSServiceRole
    TaskDefinition:
      Ref: taskdefinition</code></pre>
            </div>
         
         
            <h3 id="w9aac34c23c15c17c21">Política de perfil do IAM</h3>

            <p>Os recursos que fazem chamadas adicionais para a AWS exigem uma função de serviço, o que permite que um serviço faça chamadas para a AWS em seu nome. Por exemplo, o recurso <code class="code">AWS::CodeDeploy::DeploymentGroup</code> exige uma função de serviço para que o CodeDeploy tenha permissões para implantar aplicações em suas instâncias. Quando você tiver um único modelo que define uma função de serviço, a política de função (usando o recurso <code class="code">AWS::IAM::Policy</code> ou <code class="code">AWS::IAM::ManagedPolicy</code>) e um recurso que usa a função, adicione uma dependência para que o recurso dependa da política de função. Essa dependência garante que a política esteja disponível durante todo o ciclo de vida do recurso.</p>
            <p>Por exemplo, imagine que você tem um modelo com um recurso de grupo de implantação, uma função de serviço e a política da função. Quando você cria uma pilha, o CloudFormation não cria o grupo de implantação até que a política de função seja criada. Sem a dependência, o CloudFormation pode criar o recurso de grupo de implantação antes de criar a política da função. Se isso acontecer, o grupo de implantação não poderá ser criado devido a permissões insuficientes.</p>
            <p>Se a função tiver uma política inserida, não especifique uma dependência. O CloudFormation cria a função e sua política ao mesmo tempo.</p>
         
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-attribute-deletionpolicy.html">DeletionPolicy</div><div id="next" class="next-link" accesskey="n" href="./aws-attribute-metadata.html">Metadata</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>