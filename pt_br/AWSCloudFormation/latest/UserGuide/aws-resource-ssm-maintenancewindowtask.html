<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::SSM::MaintenanceWindowTask - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-ssm-maintenancewindowtask" /><meta name="default_state" content="aws-resource-ssm-maintenancewindowtask" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" /><meta name="description" content="Use the AWS CloudFormation AWS::SSM::MaintenanceWindowTask resource for SSM." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_SSM.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" hreflang="x-default" /><meta name="feedback-item" content="Systems Manager" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::SSM::MaintenanceWindowTask" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::SSM::MaintenanceWindowTask - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Systems%20Manager&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS Systems Manager resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_SSM.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::SSM::MaintenanceWindowTask",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_SSM.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_SSM.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-ssm-maintenancewindowtask-syntax">Syntax</a><a href="#aws-resource-ssm-maintenancewindowtask-properties">Properties</a><a href="#aws-resource-ssm-maintenancewindowtask-return-values">Return values</a><a href="#aws-resource-ssm-maintenancewindowtask--examples">Examples</a><a href="#aws-resource-ssm-maintenancewindowtask--seealso">See also</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-ssm-maintenancewindowtask">AWS::SSM::MaintenanceWindowTask</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The <code class="code">AWS::SSM::MaintenanceWindowTask</code> resource defines information about a
         task for an AWS Systems Manager maintenance window. For more information, see 
          <a href="https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_RegisterTaskWithMaintenanceWindow.html">RegisterTaskWithMaintenanceWindow</a> 
          in the <em>AWS Systems Manager API Reference</em>.</p><h2 id="aws-resource-ssm-maintenancewindowtask-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-ssm-maintenancewindowtask-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::SSM::MaintenanceWindowTask",
  "Properties" : <span>{</span>
      "<a href="#cfn-ssm-maintenancewindowtask-cutoffbehavior">CutoffBehavior</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-description">Description</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-logginginfo">LoggingInfo</a>" : <code class="replaceable"><a href="./aws-properties-ssm-maintenancewindowtask-logginginfo.html">LoggingInfo</a></code>,
      "<a href="#cfn-ssm-maintenancewindowtask-maxconcurrency">MaxConcurrency</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-maxerrors">MaxErrors</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-name">Name</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-priority">Priority</a>" : <code class="replaceable">Integer</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-servicerolearn">ServiceRoleArn</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-targets">Targets</a>" : <code class="replaceable">[ <a href="./aws-properties-ssm-maintenancewindowtask-target.html">Target</a>, ... ]</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-taskarn">TaskArn</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-taskinvocationparameters">TaskInvocationParameters</a>" : <code class="replaceable"><a href="./aws-properties-ssm-maintenancewindowtask-taskinvocationparameters.html">TaskInvocationParameters</a></code>,
      "<a href="#cfn-ssm-maintenancewindowtask-taskparameters">TaskParameters</a>" : <code class="replaceable">Json</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-tasktype">TaskType</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-ssm-maintenancewindowtask-windowid">WindowId</a>" : <code class="replaceable">String</code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-ssm-maintenancewindowtask-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::SSM::MaintenanceWindowTask
Properties:
  <a href="#cfn-ssm-maintenancewindowtask-cutoffbehavior">CutoffBehavior</a>: <code class="replaceable">String</code>
  <a href="#cfn-ssm-maintenancewindowtask-description">Description</a>: <code class="replaceable">String</code>
  <a href="#cfn-ssm-maintenancewindowtask-logginginfo">LoggingInfo</a>: <code class="replaceable">
    <a href="./aws-properties-ssm-maintenancewindowtask-logginginfo.html">LoggingInfo</a></code>
  <a href="#cfn-ssm-maintenancewindowtask-maxconcurrency">MaxConcurrency</a>: <code class="replaceable">String</code>
  <a href="#cfn-ssm-maintenancewindowtask-maxerrors">MaxErrors</a>: <code class="replaceable">String</code>
  <a href="#cfn-ssm-maintenancewindowtask-name">Name</a>: <code class="replaceable">String</code>
  <a href="#cfn-ssm-maintenancewindowtask-priority">Priority</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-ssm-maintenancewindowtask-servicerolearn">ServiceRoleArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-ssm-maintenancewindowtask-targets">Targets</a>: <code class="replaceable">
    - <a href="./aws-properties-ssm-maintenancewindowtask-target.html">Target</a></code>
  <a href="#cfn-ssm-maintenancewindowtask-taskarn">TaskArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-ssm-maintenancewindowtask-taskinvocationparameters">TaskInvocationParameters</a>: <code class="replaceable">
    <a href="./aws-properties-ssm-maintenancewindowtask-taskinvocationparameters.html">TaskInvocationParameters</a></code>
  <a href="#cfn-ssm-maintenancewindowtask-taskparameters">TaskParameters</a>: <code class="replaceable">Json</code>
  <a href="#cfn-ssm-maintenancewindowtask-tasktype">TaskType</a>: <code class="replaceable">String</code>
  <a href="#cfn-ssm-maintenancewindowtask-windowid">WindowId</a>: <code class="replaceable">String</code>
</code></pre></div><h2 id="aws-resource-ssm-maintenancewindowtask-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-ssm-maintenancewindowtask-cutoffbehavior"><span class="term"><code class="code">CutoffBehavior</code></span></dt><dd>
         <p>The specification for whether tasks should continue to run after the cutoff time specified
   in the maintenance windows is reached. </p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">CONTINUE_TASK | CANCEL_TASK</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-description"><span class="term"><code class="code">Description</code></span></dt><dd>
         <p>A description of the task.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">128</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-logginginfo"><span class="term"><code class="code">LoggingInfo</code></span></dt><dd>
      <p>Information about an Amazon S3 bucket to write Run Command task-level logs to.</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
            <code class="code">LoggingInfo</code> has been deprecated. To specify an Amazon S3 bucket to contain logs for Run Command tasks,
            instead use the <code class="code">OutputS3BucketName</code> and <code class="code">OutputS3KeyPrefix</code>
            options in the <code class="code">TaskInvocationParameters</code> structure. For information about
            how Systems Manager handles these options for the supported maintenance window task
            types, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ssm-maintenancewindowtask-maintenancewindowruncommandparameters.html">AWS::SSM::MaintenanceWindowTask MaintenanceWindowRunCommandParameters</a>.</p></div></div>
   <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-ssm-maintenancewindowtask-logginginfo.html">LoggingInfo</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-maxconcurrency"><span class="term"><code class="code">MaxConcurrency</code></span></dt><dd>
         <p>The maximum number of targets this task can be run for, in parallel.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Although this element is listed as "Required: No", a value can be omitted only when you are
    registering or updating a <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/maintenance-windows-targetless-tasks.html">targetless
     task</a> You must provide a value in all other cases.</p><p>For maintenance window tasks without a target specified, you can't supply a value for this
    option. Instead, the system inserts a placeholder value of <code class="code">1</code>. This value doesn't
    affect the running of your task.</p></div></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">^([1-9][0-9]*|[1-9][0-9]%|[1-9]%|100%)$</code></p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">7</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-maxerrors"><span class="term"><code class="code">MaxErrors</code></span></dt><dd>
         <p>The maximum number of errors allowed before this task stops being scheduled.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Although this element is listed as "Required: No", a value can be omitted only when you are
    registering or updating a <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/maintenance-windows-targetless-tasks.html">targetless
     task</a> You must provide a value in all other cases.</p><p>For maintenance window tasks without a target specified, you can't supply a value for this
    option. Instead, the system inserts a placeholder value of <code class="code">1</code>. This value doesn't
    affect the running of your task.</p></div></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">^([1-9][0-9]*|[0]|[1-9][0-9]%|[0-9]%|100%)$</code></p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">7</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-name"><span class="term"><code class="code">Name</code></span></dt><dd>
         <p>The task name.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">^[a-zA-Z0-9_\-.]<span>{</span>3,128}$</code></p><p><em>Minimum</em>: <code class="code">3</code></p><p><em>Maximum</em>: <code class="code">128</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-priority"><span class="term"><code class="code">Priority</code></span></dt><dd>
         <p>The priority of the task in the maintenance window. The lower the number, the higher the
   priority. Tasks that have the same priority are scheduled in parallel.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: Integer</p><p><em>Minimum</em>: <code class="code">0</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-servicerolearn"><span class="term"><code class="code">ServiceRoleArn</code></span></dt><dd>
         <p>The Amazon Resource Name (ARN) of the AWS Identity and Access Management (IAM) service role to use to publish Amazon Simple Notification Service 
(Amazon SNS) notifications for maintenance window Run Command tasks.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-targets"><span class="term"><code class="code">Targets</code></span></dt><dd>
    <p>The targets, either instances or window target IDs.</p>
    <div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>Specify instances using <code class="code">Key=InstanceIds,Values=<b>instanceid1</b>,<b>instanceid2</b>
          </code>.</p>
      </li><li class="listitem">
        <p>Specify window target IDs using <code class="code">Key=WindowTargetIds,Values=<b>window-target-id-1</b>,<b>window-target-id-2</b></code>.</p>
      </li></ul></div>
  <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-ssm-maintenancewindowtask-target.html">Target</a></p><p><em>Minimum</em>: <code class="code">0</code></p><p><em>Maximum</em>: <code class="code">5</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-taskarn"><span class="term"><code class="code">TaskArn</code></span></dt><dd>
    <p>The resource that the task uses during execution.</p>
    <p>For <code class="code">RUN_COMMAND</code> and <code class="code">AUTOMATION</code> task types, <code class="code">TaskArn</code>
      is the SSM document name or Amazon Resource Name (ARN).</p>
    <p>For <code class="code">LAMBDA</code> tasks, <code class="code">TaskArn</code> is the function name or ARN.</p>
    <p>For <code class="code">STEP_FUNCTIONS</code> tasks, <code class="code">TaskArn</code> is the state machine
      ARN.</p>
  <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">1600</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-taskinvocationparameters"><span class="term"><code class="code">TaskInvocationParameters</code></span></dt><dd>
    <p>The parameters to pass to the task when it runs. Populate only the fields that match the
      task type. All other fields should be empty. </p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>When you update a maintenance window task that has options specified in
          <code class="code">TaskInvocationParameters</code>, you must provide again all the
          <code class="code">TaskInvocationParameters</code> values that you want to retain. The values you do
        not specify again are removed. For example, suppose that when you registered a Run Command
        task, you specified <code class="code">TaskInvocationParameters</code> values for <code class="code">Comment</code>,
          <code class="code">NotificationConfig</code>, and <code class="code">OutputS3BucketName</code>. If you update the
        maintenance window task and specify only a different <code class="code">OutputS3BucketName</code> value,
        the values for <code class="code">Comment</code> and <code class="code">NotificationConfig</code> are removed.</p></div></div>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-ssm-maintenancewindowtask-taskinvocationparameters.html">TaskInvocationParameters</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-taskparameters"><span class="term"><code class="code">TaskParameters</code></span></dt><dd>
      <p>The parameters to pass to the task when it runs.</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
            <code class="code">TaskParameters</code> has been deprecated. To specify parameters to pass to a task
            when it runs, instead use the <code class="code">Parameters</code> option in the
               <code class="code">TaskInvocationParameters</code> structure. For information about how Systems Manager
            handles these options for the supported maintenance window task types, see
               <a href="https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_MaintenanceWindowTaskInvocationParameters.html">MaintenanceWindowTaskInvocationParameters</a>.</p></div></div>
   <p><em>Required</em>: No</p><p><em>Type</em>: Json</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-tasktype"><span class="term"><code class="code">TaskType</code></span></dt><dd>
      <p>The type of task. Valid values: <code class="code">RUN_COMMAND</code>, <code class="code">AUTOMATION</code>,
            <code class="code">LAMBDA</code>, <code class="code">STEP_FUNCTIONS</code>.</p>
   <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">RUN_COMMAND | AUTOMATION | STEP_FUNCTIONS | LAMBDA</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-ssm-maintenancewindowtask-windowid"><span class="term"><code class="code">WindowId</code></span></dt><dd>
         <p>The ID of the maintenance window where the task is registered.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">^mw-[0-9a-f]<span>{</span>17}$</code></p><p><em>Minimum</em>: <code class="code">20</code></p><p><em>Maximum</em>: <code class="code">20</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd></dl></div><h2 id="aws-resource-ssm-maintenancewindowtask-return-values">Return values</h2><h3 id="aws-resource-ssm-maintenancewindowtask-return-values-ref">Ref</h3><p>
         When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the maintenance window task ID, such as
            <code class="code">12a345b6-bbb7-4bb6-90b0-8c9577a2d2b9</code>.</p><p>For more information about using the <code class="code">Ref</code> function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html"><code class="code">Ref</code></a>.</p><h3 id="aws-resource-ssm-maintenancewindowtask-return-values-fn--getatt">Fn::GetAtt</h3><h2 id="aws-resource-ssm-maintenancewindowtask--examples">Examples</h2><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_targets_instances_using_a_resource_group_name">Create a Run Command task that targets instances using a resource group name</a></li><li><a href="#aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_targets_instances_using_a_maintenance_window_target_ID">Create a Run Command task that targets instances using a maintenance window target ID</a></li><li><a href="#aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_runs_a_PowerShell_script">Create a Run Command task that runs a PowerShell script</a></li><li><a href="#aws-resource-ssm-maintenancewindowtask--examples--Create_a_task_that_runs_an_Automation_runbook">Create a task that runs an Automation runbook</a></li><li><a href="#aws-resource-ssm-maintenancewindowtask--examples--Create_a_Step_Functions_task_that_targets_a_maintenance_window_target_ID">Create a Step Functions task that targets a maintenance window target ID</a></li><li><a href="#aws-resource-ssm-maintenancewindowtask--examples--Create_a_Step_Functions_task_that_targets_an_instance_ID">Create a Step Functions task that targets an instance ID</a></li><li><a href="#aws-resource-ssm-maintenancewindowtask--examples--Create_a_task_that_runs_an_function">Create a task that runs an AWS Lambda function</a></li></ul></div><h3 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_targets_instances_using_a_resource_group_name">Create a Run Command task that targets instances using a resource group name</h3><p>The following example creates a maintenance window Run Command task that installs
          patches on instances using a using a resource group name as the target.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_targets_instances_using_a_resource_group_name--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "PatchTask": <span>{</span>
            "Type": "AWS::SSM::MaintenanceWindowTask",
            "Properties": <span>{</span>
                "Description": "Apply OS patches on instances in target",
                "MaxConcurrency": 1,
                "MaxErrors": 1,
                "Priority": 0,
                "TaskType": "RUN_COMMAND",
                "WindowId": <span>{</span>
                    "Ref": "MaintenanceWindow"
                },
                "TaskArn": "AWS-RunPatchBaseline",
                "TaskInvocationParameters": <span>{</span>
                    "MaintenanceWindowRunCommandParameters": <span>{</span>
                        "Parameters": <span>{</span>
                            "Operation": [
                                "Install"
                            ],
                            "RebootOption": [
                                "NoReboot"
                            ]
                        }
                    }
                },
                "Targets": [
                    <span>{</span>
                        "Key": "WindowTargetIds",
                        "Values": [
                            <span>{</span>
                                "Ref": "MaintenanceWindowTarget"
                            }
                        ]
                    }
                ]
            }
        },
        "MaintenanceWindow": <span>{</span>
            "Type": "AWS::SSM::MaintenanceWindow",
            "Properties": <span>{</span>
                "Name": "MaintenanceWindow",
                "AllowUnassociatedTargets": true,
                "Cutoff": 0,
                "Description": "Maintenance window for instances",
                "Duration": 1,
                "Schedule": "cron(20 17 ? * MON-FRI *)"
            }
        },
        "MaintenanceWindowTarget": <span>{</span>
            "Type": "AWS::SSM::MaintenanceWindowTarget",
            "Properties": <span>{</span>
                "ResourceType": "RESOURCE_GROUP",
                "Targets": [
                    <span>{</span>
                        "Key": "resource-groups:Name",
                        "Values": [
                            "TestResourceGroup"
                        ]
                    }
                ],
                "WindowId": <span>{</span>
                    "Ref": "MaintenanceWindow"
                }
            }
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_targets_instances_using_a_resource_group_name--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">---
Resources:
  PatchTask:
    Type: AWS::SSM::MaintenanceWindowTask
    Properties:
      Description: Apply OS patches on instances in target
      MaxConcurrency: 1
      MaxErrors: 1
      Priority: 0
      TaskType: RUN_COMMAND
      WindowId:
        Ref: MaintenanceWindow
      TaskArn: AWS-RunPatchBaseline
      TaskInvocationParameters:
        MaintenanceWindowRunCommandParameters:
          Parameters:
            Operation:
            - Install
            RebootOption:
            - NoReboot
      Targets:
      - Key: WindowTargetIds
        Values:
        - Ref: MaintenanceWindowTarget
  MaintenanceWindow:
    Type: AWS::SSM::MaintenanceWindow
    Properties:
      Name: MaintenanceWindow
      AllowUnassociatedTargets: true
      Cutoff: 0
      Description: Maintenance window for instances
      Duration: 1
      Schedule: cron(20 17 ? * MON-FRI *)
  MaintenanceWindowTarget:
    Type: AWS::SSM::MaintenanceWindowTarget
    Properties:
      ResourceType: RESOURCE_GROUP
      Targets:
      - Key: resource-groups:Name
        Values:
        - TestResourceGroup
      WindowId:
        Ref: MaintenanceWindow
</code></pre></div><h3 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_targets_instances_using_a_maintenance_window_target_ID">Create a Run Command task that targets instances using a maintenance window target ID</h3><p>The following example creates a maintenance window Run Command task that installs
          patches on instances but does not reboot them. The maintenance window task targets managed
          instances using a maintenance window target ID.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_targets_instances_using_a_maintenance_window_target_ID--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "MaintenanceWindowRunCommandTask": <span>{</span>
            "Type": "AWS::SSM::MaintenanceWindowTask",
            "Properties": <span>{</span>
                "WindowId": "MaintenanceWindow",
                "Targets": [
                    <span>{</span>
                        "Key": "WindowTargetIds",
                        "Values": [
                            "MaintenanceWindowTarget"
                        ]
                    }
                ],
                "TaskType": "RUN_COMMAND",
                "TaskArn": "AWS-RunPatchBaseline",
                "TaskInvocationParameters": <span>{</span>
                    "MaintenanceWindowRunCommandParameters": <span>{</span>
                        "Parameters": <span>{</span>
                            "Operation": [
                                "Install"
                            ],
                            "RebootOption": [
                                "NoReboot"
                            ]
                        }
                    },
                    "MaxConcurrency": 7,
                    "MaxErrors": 7,
                    "Priority": 5
                },
                "DependsOn": "MaintenanceWindowTarget"
            }
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_targets_instances_using_a_maintenance_window_target_ID--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">---
Resources:
  MaintenanceWindowRunCommandTask:
    Type: AWS::SSM::MaintenanceWindowTask
    Properties:
      WindowId: MaintenanceWindow
      Targets:
      - Key: WindowTargetIds
        Values:
        - MaintenanceWindowTarget
      TaskType: RUN_COMMAND
      TaskArn: AWS-RunPatchBaseline
      TaskInvocationParameters:
        MaintenanceWindowRunCommandParameters:
          Parameters:
            Operation:
            - Install
            RebootOption:
            - NoReboot
      MaxConcurrency: 7
      MaxErrors: 7
      Priority: 5
      DependsOn: MaintenanceWindowTarget</code></pre></div><h3 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_runs_a_PowerShell_script">Create a Run Command task that runs a PowerShell script</h3><p>The following example demonstrates running a command with <code class="code">AWS-RunPowerShellScript</code>.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_runs_a_PowerShell_script--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "MaintenanceWindowRunCommandTask": <span>{</span>
            "Type": "AWS::SSM::MaintenanceWindowTask",
            "Properties": <span>{</span>
                "WindowId": <span>{</span>
                    "Ref": "MaintenanceWindow"
                },
                "Targets": [
                    <span>{</span>
                        "Key": "WindowTargetIds",
                        "Values": [
                            "MaintenanceWindowTarget"
                        ]
                    }
                ],
                "TaskType": "RUN_COMMAND",
                "TaskArn": "AWS-RunPowerShellScript",
                "TaskInvocationParameters": <span>{</span>
                    "MaintenanceWindowRunCommandParameters": <span>{</span>
                        "Comment": "This is a comment",
                        "CloudWatchOutputConfig": <span>{</span>
                            "CloudWatchLogGroupName": "MyLogGroupName",
                            "CloudWatchOutputEnabled": true
                        },
                        "Parameters": <span>{</span>
                            "executionTimeout": [
                                "3600"
                            ],
                            "commands": [
                                "Get-Service myImportantService | Restart-Service\nGet-ExecutionPolicy -List\nSet-ExecutionPolicy -Scope Process AllSigned\n"
                            ]
                        }
                    }
                },
                "MaxConcurrency": 7,
                "MaxErrors": 7,
                "Priority": 5
            },
            "DependsOn": "MaintenanceWindowTarget"
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Run_Command_task_that_runs_a_PowerShell_script--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">---
Resources:
  MaintenanceWindowRunCommandTask:
    Type: 'AWS::SSM::MaintenanceWindowTask'
    Properties:
      WindowId: !Ref MaintenanceWindow
      Targets:
        - Key: WindowTargetIds
          Values:
            - MaintenanceWindowTarget
      TaskType: RUN_COMMAND
      TaskArn: AWS-RunPowerShellScript
      TaskInvocationParameters:
        MaintenanceWindowRunCommandParameters:
          Comment: This is a comment
          CloudWatchOutputConfig:
            CloudWatchLogGroupName: MyLogGroupName
            CloudWatchOutputEnabled: true
          Parameters:
            executionTimeout:
              - '3600'
            commands:
              - Get-Service myImportantService | Restart-Service
              - Get-ExecutionPolicy -List
              - Set-ExecutionPolicy -Scope Process AllSigned
      MaxConcurrency: 7
      MaxErrors: 7
      Priority: 5
    DependsOn: MaintenanceWindowTarget
</code></pre></div><h3 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_task_that_runs_an_Automation_runbook">Create a task that runs an Automation runbook</h3><p>The following example creates a Systems Manager maintenance window task that uses the runbook
		<code class="code">AWS-PatchInstanceWithRollback</code> to patch instances.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_task_that_runs_an_Automation_runbook--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "MaintenanceWindowStepFunctionsTask": <span>{</span>
            "Type": "AWS::SSM::MaintenanceWindowTask",
            "Properties": <span>{</span>
                "WindowId": "MaintenanceWindow",
                "Targets": [
                    <span>{</span>
                        "Key": "WindowTargetIds",
                        "Values": [
                            "MaintenanceWindowTarget"
                        ]
                    }
                ],
                "TaskArn": "AWS-PatchInstanceWithRollback",
                "ServiceRoleArn": "AutomationRole.Arn",
                "TaskType": "AUTOMATION",
                "TaskInvocationParameters": <span>{</span>
                    "MaintenanceWindowAutomationParameters": <span>{</span>
                        "DocumentVersion": "1",
                        "Parameters": <span>{</span>
                            "InstanceId": [
                                "<span>{</span><span>{</span>RESOURCE_ID}}"
                            ]
                        }
                    }
                },
                "Priority": 1,
                "MaxConcurrency": 5,
                "MaxErrors": 5,
                "Name": "AutomationTask"
            },
            "DependsOn": "MaintenanceWindowTarget"
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_task_that_runs_an_Automation_runbook--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">---
Resources:
  MaintenanceWindowStepFunctionsTask:
    Type: AWS::SSM::MaintenanceWindowTask
    Properties:
      WindowId: MaintenanceWindow
      Targets:
      - Key: WindowTargetIds
        Values:
        - MaintenanceWindowTarget
      TaskArn: AWS-PatchInstanceWithRollback
      ServiceRoleArn: AutomationRole.Arn
      TaskType: AUTOMATION
      TaskInvocationParameters:
        MaintenanceWindowAutomationParameters:
          DocumentVersion: 1
          Parameters:
            InstanceId:
              - '<span>{</span><span>{</span>RESOURCE_ID}}'
      Priority: 1
      MaxConcurrency: 5
      MaxErrors: 5
      Name: AutomationTask
    DependsOn: MaintenanceWindowTarget</code></pre></div><h3 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Step_Functions_task_that_targets_a_maintenance_window_target_ID">Create a Step Functions task that targets a maintenance window target ID</h3><p>The following example creates a Systems Manager maintenance window task that runs the
          specified Step Function. The maintenance window task targets managed instances using a
          maintenance window target ID.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Step_Functions_task_that_targets_a_maintenance_window_target_ID--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "MaintenanceWindowStepFunctionsTask": <span>{</span>
            "Type": "AWS::SSM::MaintenanceWindowTask",
            "Properties": <span>{</span>
                "WindowId": "MaintenanceWindow",
                "Targets": [
                    <span>{</span>
                        "Key": "WindowTargetIds",
                        "Values": [
                            "MaintenanceWindowTarget"
                        ]
                    }
                ],
                "TaskArn": "SSMStepFunctionDemo",
                "ServiceRoleArn": "StepFunctionRole.Arn",
                "TaskType": "STEP_FUNCTIONS",
                "TaskInvocationParameters": <span>{</span>
                    "MaintenanceWindowStepFunctionsParameters": <span>{</span>
                        "Input": "<span>{</span>\"instanceId\":\"<span>{</span><span>{</span>TARGET_ID}}\", \"wait_time\": 20}",
                        "Name": "<span>{</span><span>{</span>INVOCATION_ID}}"
                    }
                },
                "Priority": 1,
                "MaxConcurrency": 5,
                "MaxErrors": 5,
                "Name": "StepFunctionsTask"
            },
            "DependsOn": "MaintenanceWindowTarget"
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Step_Functions_task_that_targets_a_maintenance_window_target_ID--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">---
Resources:
  MaintenanceWindowStepFunctionsTask:
    Type: AWS::SSM::MaintenanceWindowTask
    Properties:
      WindowId: MaintenanceWindow
      Targets:
      - Key: WindowTargetIds
        Values:
        - MaintenanceWindowTarget
      TaskArn: SSMStepFunctionDemo
      ServiceRoleArn: StepFunctionRole.Arn
      TaskType: STEP_FUNCTIONS
      TaskInvocationParameters:
        MaintenanceWindowStepFunctionsParameters:
          Input: '<span>{</span>"instanceId":"<span>{</span><span>{</span>TARGET_ID}}", "wait_time": 20}'
          Name: "<span>{</span><span>{</span>INVOCATION_ID}}"
      Priority: 1
      MaxConcurrency: 5
      MaxErrors: 5
      Name: StepFunctionsTask
    DependsOn: MaintenanceWindowTarget</code></pre></div><h3 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Step_Functions_task_that_targets_an_instance_ID">Create a Step Functions task that targets an instance ID</h3><p>The following example creates a Systems Manager maintenance window task that runs the
          specified Step Function. The maintenance window task targets the specified instance
          IDs.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Step_Functions_task_that_targets_an_instance_ID--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "StepFunctionsTask": <span>{</span>
            "Type": "AWS::SSM::MaintenanceWindowTask",
            "Properties": <span>{</span>
                "WindowId": "MaintenanceWindow",
                "Targets": [
                    <span>{</span>
                        "Key": "InstanceIds",
                        "Values": [
                            "i-012345678912345678"
                        ]
                    }
                ],
                "TaskArn": "SSMStepFunctionDemo",
                "ServiceRoleArn": "StepFunctionRole.Arn",
                "TaskType": "STEP_FUNCTIONS",
                "TaskInvocationParameters": <span>{</span>
                    "MaintenanceWindowStepFunctionsParameters": <span>{</span>
                        "Input": "<span>{</span>\"instanceId\":\"<span>{</span><span>{</span>TARGET_ID}}\", \"wait_time\": 20}",
                        "Name": "<span>{</span><span>{</span>INVOCATION_ID}}"
                    }
                },
                "Priority": 1,
                "MaxConcurrency": 5,
                "MaxErrors": 5,
                "Name": "StepFunctionsTask"
            },
            "DependsOn": "MaintenanceWindowTarget"
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_Step_Functions_task_that_targets_an_instance_ID--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">---
Resources:
  StepFunctionsTask:
    Type: 'AWS::SSM::MaintenanceWindowTask'
    Properties:
      WindowId: MaintenanceWindow
      Targets:
      - Key: InstanceIds
        Values:
        - i-012345678912345678
      TaskArn: SSMStepFunctionDemo
      ServiceRoleArn: StepFunctionRole.Arn
      TaskType: STEP_FUNCTIONS
      TaskInvocationParameters:
        MaintenanceWindowStepFunctionsParameters:
          Input: '<span>{</span>"instanceId":"<span>{</span><span>{</span>TARGET_ID}}", "wait_time": 20}'
          Name: "<span>{</span><span>{</span>INVOCATION_ID}}"
      Priority: 1
      MaxConcurrency: 5
      MaxErrors: 5
      Name: StepFunctionsTask
    DependsOn: MaintenanceWindowTarget</code></pre></div><h3 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_task_that_runs_an_function">Create a task that runs an AWS Lambda function</h3><p>The following example runs an AWS Lambda function to restart instances.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The value for <code class="code">Payload</code> in <code class="code">MaintenanceWindowLambdaParameters</code>
        must be formatted as a Base64-encoded binary data object.</p></div></div><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_task_that_runs_an_function--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Resources": <span>{</span>
      "LambdaTask": <span>{</span>
         "Type": "AWS::SSM::MaintenanceWindowTask",
         "Properties": <span>{</span>
            "WindowId": "mw-04fd6f19dfEXAMPLE",
            "TaskArn": "arn:aws:lambda:us-east-2:111222333444:function:MyLambdaTaskArn",
            "ServiceRoleArn": "arn:aws:iam::111222333444:role/aws-service-role/ssm.amazonaws.com/AWSServiceRoleForAmazonSSM",
            "TaskType": "LAMBDA",
            "TaskInvocationParameters": <span>{</span>
               "MaintenanceWindowLambdaParameters": <span>{</span>
                  "ClientContext": "eyJ0ZXN0Q29udGV4dCI6Ik5vdGhp==trucated==EXAMPLE",
                  "Qualifier": "$LATEST",
                  "Payload": "eyJJbnN0YW5jZUlkIjoie3tSRVNPVVJDRV9JRH19IiwidGFyZ2V0VHlwZSI6Int7VEFSR0VUX1RZUEV9fSJ9"
               }
            },
            "Priority": 1,
            "Name": "UpdateLambdaTaskEXAMPLE"
         }
      }
   }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-ssm-maintenancewindowtask--examples--Create_a_task_that_runs_an_function--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">---
Resources:
  LambdaTask:
    Type: 'AWS::SSM::MaintenanceWindowTask'
    Properties:
      WindowId: mw-04fd6f19dfEXAMPLE
      TaskArn: &gt;-
        arn:aws:lambda:us-east-2:111222333444:function:MyLambdaTaskArn
      ServiceRoleArn: &gt;-
        arn:aws:iam::111222333444:role/aws-service-role/ssm.amazonaws.com/AWSServiceRoleForAmazonSSM
      TaskType: LAMBDA
      TaskInvocationParameters:
        MaintenanceWindowLambdaParameters:
          ClientContext: eyJ0ZXN0Q29udGV4dCI6Ik5vdGhp==trucated==EXAMPLE
          Qualifier: $LATEST
          Payload: &gt;-
            eyJJbnN0YW5jZUlkIjoie3tSRVNPVVJDRV9JRH19IiwidGFyZ2V0VHlwZSI6Int7VEFSR0VUX1RZUEV9fSJ9
      Priority: 1
      Name: UpdateLambdaTaskEXAMPLE</code></pre></div><h2 id="aws-resource-ssm-maintenancewindowtask--seealso">See also</h2><div class="itemizedlist">
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindow.html">AWS::SSM::MaintenanceWindow</a>
          </p>
        </li><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtarget.html">AWS::SSM::MaintenanceWindowTarget</a>
          </p>
        </li><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_RegisterTaskWithMaintenanceWindow.html">RegisterTaskWithMaintenanceWindow</a> in the <em>AWS Systems Manager API
              Reference</em>.</p>
        </li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-properties-ssm-maintenancewindowtarget-targets.html">Targets</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-ssm-maintenancewindowtask-cloudwatchoutputconfig.html">CloudWatchOutputConfig</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Systems Manager&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Systems Manager&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-ssm-maintenancewindowtask.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>