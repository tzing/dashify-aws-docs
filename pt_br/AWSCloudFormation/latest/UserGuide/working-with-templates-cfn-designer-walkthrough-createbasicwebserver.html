<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Apresentação: usar o AWS CloudFormation Designer para criar um servidor da Web básico - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="working-with-templates-cfn-designer-walkthrough-createbasicwebserver" /><meta name="default_state" content="working-with-templates-cfn-designer-walkthrough-createbasicwebserver" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="description" content="Use o AWS CloudFormation Designer para criar um servidor da Web básico." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Crie e gerencie implantações da infraestrutura da AWS de maneira previsível e que pode ser repetida usando o AWS CloudFormation com este Guia do usuário." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Apresentação: usar o AWS CloudFormation Designer para criar um servidor da Web básico" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Apresentação: usar o AWS CloudFormation Designer para criar um servidor da Web básico - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionamento de recursos,configuração de recursos,gerenciamento da infraestrutura,CloudFormer,Pilha do CloudFormation,Stackset do CloudFormation,Modelo do CloudFormation,conjunto de alterações" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Trabalhar com modelos do AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Demonstrações",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/CHAP_Using.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Apresentação: usar o AWS CloudFormation Designer para criar um servidor da Web básico",
        "item" : "https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/CHAP_Using.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">Etapa 1: Adicionar e conectar recursos</a><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">Etapa 2: Adicionar parâmetros, mapeamentos e saídas</a><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">Etapa 3: Especificar propriedades do recurso</a><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">Etapa 4: Provisionar recursos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver">Apresentação: usar o AWS CloudFormation Designer para criar um servidor da Web básico</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>O AWS CloudFormation Designer representa graficamente seus modelos para ajudar você a ver os recursos no modelo e como eles estão conectados.  O editor de JSON e YAML integrado facilita a modificação de modelos diretamente no console do AWS CloudFormation. Para demonstrar como usar ambos os componentes, usaremos o AWS CloudFormation Designer para criar um servidor da Web básico em uma VPC.  Depois, salvaremos o modelo e o usaremos para criar uma pilha do CloudFormation.</p><p>Na demonstração, você concluirá as etapas a seguir:</p><div class="orderedlist">
     
     
     
     
  <ol><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">Adicione e conecte recursos.</a></p>
      <p>Ao abrir primeiro o AWS CloudFormation Designer, você começará com um modelo em branco.  Usaremos o AWS CloudFormation Designer para começar a preencher o modelo arrastando recursos, como uma VPC e uma instância do EC2 para o seu modelo.  Também criaremos links entre eles. Por exemplo, usaremos o AWS CloudFormation Designer para criar uma conexão entre o gateway da Internet e a VPC.</p>
    </li><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">Adicione parâmetros do modelo, mapeamentos e saídas.</a></p>
      <p>Usaremos editor integrado do AWS CloudFormation Designer para adicionar outros componentes do modelo e tornar o modelo mais útil. Por exemplo, adicionaremos parâmetros ao modelo, de modo que você possa especificar os valores de entrada ao criar uma pilha. Assim, você não precisará editar constantemente o modelo para valores de propriedade que você pode normalmente altera.</p>
    </li><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">Especifique as propriedades de recurso.</a></p>
      <p>Usaremos o editor integrado novamente para especificar as definições de configuração para nossos recursos.</p>
    </li><li>
      <p><a href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">Provisionar recursos</a></p>
      <p>Nenhum dos seus recursos de modelo estarão prontos e em execução até que você crie uma pilha. Usaremos o modelo recém-criado para iniciar uma pilha, do CloudFormation que provisionará todos os recursos que são definidos no seu modelo.</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Embora o CloudFormation seja um serviço gratuito, você será cobrado pelos recursos da AWS que incluir nas pilhas na taxa atual para cada um deles. Para obter mais informações sobre o preço da AWS, consulte a página de detalhes de cada produto em <a href="https://aws.amazon.com/" rel="noopener noreferrer" target="_blank"><span>http://aws.amazon.com</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
    </li></ol></div><p>Pré-requisitos</p><p>Esta demonstração pressupõe que você tenha um conhecimento prático da Amazon Virtual Private Cloud (Amazon VPC), Amazon Elastic Compute Cloud (Amazon EC2) e do CloudFormation. Para contexto, cada procedimento fornece algumas informações básicas sobre cada recurso.</p><p>Além disso, antes de começar, verifique se você tem um par de chaves do Amazon EC2 na região em que você está criando a pilha. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">Pares de chaves do Amazon EC2</a> no <em>Guia do usuário do Amazon EC2 para instâncias do Linux</em>.</p><h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">Etapa 1: Adicionar e conectar recursos</h2>

    <p>Usaremos a interface de arrastar e soltar do AWS CloudFormation Designer para adicionar uma instância do Amazon EC2 e recursos de rede, como uma VPC, uma sub-rede, um gateway de Internet e uma tabela de rotas. Após a adição de todos os recursos, criaremos conexões entre eles. Por exemplo, associaremos o gateway de Internet com uma VPC.</p>
    <div class="procedure"><h6>Para adicionar recursos a um modelo</h6><ol><li>
        <p>Abra o AWS CloudFormation Designer em <a href="https://console.aws.amazon.com/cloudformation/designer" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation/designer</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
      </li><li>
        <p>No editor integrado, na parte inferior da página, escolha <b>Edit (Editar)</b> (<span class="inlinemediaobject">
             
              <img src="images/designer-edit-icon.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
             
          </span>).</p>
      </li><li>
        <p>Altere o nome do modelo para <code class="code">BasicWebServerInVPC</code> e, em seguida, pressione <b>Enter</b>.</p>
        <p>No momento, temos um modelo em branco que não é válido. Nas próximas etapas, adicionaremos recursos para torná-lo válido.</p>
      </li><li>
        <p>No painel <b>Tipos de recursos</b>, na categoria <b>EC2</b>, arraste um tipo de recurso de <b>VPC</b> para o painel <b>Tela</b>.</p>
        <p>Os recursos são organizados por categorias de recursos. Todos os recursos que estamos adicionando estão na categoria <b>EC2</b>.</p>
        <p>O AWS CloudFormation Designer modifica imediatamente seu modelo para incluir um recurso da VPC, com os resultados semelhantes ao seguinte snippet JSON.</p>
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">  "Resources": <span>{</span>
    "VPC431KO": <span>{</span>
      "Type": "AWS::EC2::VPC",
      "Properties": <span>{</span>},
      "Metadata": <span>{</span>
        "AWS::CloudFormation::Designer": <span>{</span>
          "id": "445730ea-0d11-45ba-b6ac-12345EXAMPLE"
        }
      }
    }
  }</code></pre>

        <p>O snippet YAML é semelhante ao seguinte.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  VPC431KO:
    Type: 'AWS::EC2::VPC'
    Properties: <span>{</span>}
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 9430b008-7a03-41ed-b63e-12345EXAMPLE</code></pre>

        <p>Observe que ainda precisamos especificar as propriedades da VPC, como o bloco CIDR da VPC. Faremos isso posteriormente. Isto é verdadeiro para todos os recursos que adicionaremos.</p>
      </li><li>
        <p>Renomeie a VPC.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Quando você renomear um recurso, renomeie o ID lógico dele, que é o nome mencionado no modelo (não o nome atribuído quando o CloudFormation cria o recurso). Para ter mais informações, consulte <a href="./resources-section-structure.html">Recursos</a>.</p></div></div>
        <ol><li>
            <p>Escolha o recurso da VPC.</p>
          </li><li>
            <p>No editor integrado, escolha o ícone <b>Edit (Editar)</b> (<span class="inlinemediaobject">
                 
                  <img src="images/designer-edit-icon.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                 
              </span>).</p>
          </li><li>
            <p>Altere o nome para <code class="code">VPC</code> e, em seguida, escolha <b>Enter</b>.</p>
          </li></ol>
        <p>Em seguida, adicionaremos recursos à VPC.</p>
      </li><li>
        <p>Arraste um canto do recurso da VPC para expandi-lo para que seja grande o suficiente para caber mais recursos.</p>
        <p>É necessário adicionar uma sub-rede, pois você não pode adicionar uma instância do EC2, que hospeda o site, diretamente às instâncias da VPC; que devem estar localizadas em uma sub-rede.</p>
      </li><li>
        <p>Adicione um tipo de recurso de <b>Sub-rede</b> dentro da VPC e renomeie-o como <code class="code">PublicSubnet</code>.</p>
        <p>Usaremos a sub-rede para alocar um intervalo de endereços IP da VPC que você pode associar a outros recursos da AWS, como uma instância do Amazon EC2.</p>
        <p>Quando você adiciona a sub-rede dentro da VPC, o AWS CloudFormation Designer automaticamente associa a sub-rede à VPC.  Essa associação é um modelo de contêiner, no qual os recursos dentro do contêiner são automaticamente associados ao recurso de contêiner.</p>
      </li><li>
        <p>Adicione um tipo de recurso de <b>Instância</b> dentro do recurso <code class="code">PublicSubnet</code> e renomeie-o como <code class="code">WebServerInstance</code>.</p>
        <p>A instância é um ambiente de computação virtual no qual você hospedará um site básico. Da mesma maneira que ocorreu com a sub-rede e a VPC, a adição da instância na sub-rede associa automaticamente a instância à sub-rede.</p>
      </li><li>
        <p>Adicione um tipo de recurso de <b>SecurityGroup</b> dentro da VPC e renomeie-o como <code class="code">WebServerSecurityGroup</code>.</p>
        <p>O security group é um firewall virtual que controla o tráfego de entrada e saída da instância de servidor da Web. Também é necessário para instâncias em uma VPC. Precisaremos associar a instância de servidor da Web com esse security group, que faremos mais tarde ao especificar as propriedades da instância.</p>
      </li><li>
        <p>Adicione um tipo de recurso de <b>InternetGateway</b> em qualquer lugar fora da VPC e renomeie-o como <code class="code">InternetGateway</code>.</p>
        <p>O gateway de Internet permite a comunicação entre a instância que está dentro da VPC e a Internet. Sem o gateway de Internet, ninguém pode acessar seu site.</p>
        <p>Embora você possa arrastar o gateway de Internet para dentro da VPC, isso não criará uma associação com a VPC. O gateway de Internet não segue o modelo de contêiner; em vez disso, você deve arrastar uma conexão do gateway de Internet para a VPC, como descrito na próxima etapa.</p>
      </li><li>
        <p>Crie uma conexão entre o recurso <code class="code">InternetGateway</code> e o recurso <code class="code">VPC</code>.</p>
        <ol><li>
            <p>No recurso <code class="code">InternetGateway</code>, passe o mouse sobre o anexo do gateway de Internet (<code class="code">AWS::EC2::VPCGatewayAttachment</code>).</p>
          </li><li>
            <p>Arraste uma conexão para a VPC.</p>
            <p>A borda dos recursos de destino válidos muda de cor. Neste caso, a VPC é o único recurso de destino válido. Esta conexão cria um recurso de anexo que associa o gateway de Internet à VPC.</p>
          </li></ol>
      </li><li>
        <p>Em seguida, precisamos adicionar uma tabela de rota e rotear para especificar como direcionar o tráfego de rede de dentro de uma sub-rede. Adicione um <b>RouteTable</b> dentro da VPC e renomeie-o como <code class="code">PublicRouteTable</code>.</p>
        <p>Isso associa uma nova tabela de rota à VPC.</p>
      </li><li>
        <p>Para adicionar uma regra de roteamento à tabela de rotas, adicione um tipo de recurso de <b>Rota</b> dentro do recurso <code class="code">PublicRouteTable</code> e renomeie-o como <code class="code">PublicRoute</code>.</p>
        <p>Usaremos a rota para especificar para onde direcionar o tráfego.</p>
      </li><li>
        <p>Para a rota pública, queremos que o gateway de Internet seja o objetivo de destino. Use <code class="code">GatewayId</code> para criar uma conexão do recurso <code class="code">PublicRoute</code> com o gateway de Internet, semelhante à forma como você criou uma conexão entre o gateway de Internet e a VPC.</p>
        <p>O CloudFormation não pode associar uma rota com um gateway da Internet até que você associe o gateway de Internet com a VPC. Isso significa que é necessário criar uma dependência explícita no anexo do gateway de Internet-VPC conforme descrito na próxima etapa. Para ter mais informações, consulte <a href="./aws-attribute-dependson.html">Atributo DependsOn</a>.</p>
      </li><li>
        <p>Crie uma dependência explícita entre o recurso <code class="code">PublicRoute</code> e o anexo de gateway de Internet-VPC.</p>
        <ol><li>
            <p>No recurso <code class="code">PublicRoute</code>, passe o mouse sobre o ponto <b>DependsOn</b>.</p>
          </li><li>
            <p>Arraste uma conexão para o anexo de gateway de Internet-VPC (<code class="code">AWS::EC2::VPCGatewayAttachment</code>).</p>
            <p>Com as conexões <code class="code">DependsOn</code>, o AWS CloudFormation Designer cria uma dependência (um atributo <code class="code">DependsOn</code>) na qual o recurso de origem depende do recurso de destino.  Neste caso, o AWS CloudFormation Designer adiciona um atributo <code class="code">DependsOn</code> para o recurso <code class="code">PublicRoute</code> e especifica o anexo de gateway-VPC como uma dependência.</p>
          </li></ol>
      </li><li>
        <p>Crie outra dependência do recurso <code class="code">WebServerInstance</code> para o recurso <code class="code">PublicRoute</code>.</p>
        <p>O recurso <code class="code">WebServerInstance</code> depende da rota pública para rotear o tráfego para a Internet. Sem a rota pública, a instância não pode enviar um sinal (usando o script de ajuda cfn-signal) para notificar o CloudFormation quando a configuração da instância e as implementações de aplicativo estiverem concluídas.</p>
      </li><li>
        <p>Arraste uma conexão do recurso <code class="code">PublicRouteTable</code> para o recurso <code class="code">PublicSubnet</code> para associar a tabela de rota e a sub-rede.</p>
        <p>Agora, a sub-rede pública usará a tabela de rota pública para direcionar o tráfego.</p>
      </li><li>
        <p>Na barra de ferramentas do AWS CloudFormation Designer, salve o modelo localmente usando o menu <b>File</b> (Arquivo) (o ícone de arquivo).</p>
        <p>O AWS CloudFormation Designer salva seu modelo no disco rígido.  Você pode usar o modelo mais tarde para criar uma pilha. Recomendamos que você salve o modelo regularmente para evitar a perda de alterações.</p>
      </li></ol></div>
    <p>Nesta etapa, adicionamos sete recursos ao seu modelo e renomeamos seus IDs lógicos com nomes acessíveis. Além disso, estabelecemos conexões visuais com a maioria dos recursos para criar associações e uma dependência. No entanto, antes de criar uma pilha com este modelo, é necessário criar mais algumas conexões (por exemplo, associando a instância com o security group) e especificar as propriedades de cada recurso. Na próxima etapa, apresentaremos a modificação de outros componentes do seu modelo, como parâmetros de entrada, usando o editor integrado do AWS CloudFormation Designer.</p>
  <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">Etapa 2: Adicionar parâmetros, mapeamentos e saídas</h2>
    
    <p>Antes de especificar as propriedades de recurso, precisamos adicionar outros componentes do modelo para tornar o modelo reutilizável em vários ambientes com mais facilidade. Nesta etapa, usaremos o editor integrado do AWS CloudFormation Designer para adicionar parâmetros, mapeamentos e saídas. Em seguida, você pode consultar esses parâmetros e mapeamentos ao especificar as propriedades de recurso. A apresentação fornece JSON e YAML de amostra que você pode usar para copiar e colar no editor integrado.</p>
    <div class="procedure"><h6>Para adicionar parâmetros</h6><p>Os parâmetros são os valores de entrada que você especifica ao criar uma pilha. Eles são úteis para transmitir valores para que você não tenha valores codificados em modelos. Por exemplo, você não precisa codificar o tipo de instância de servidor Web em seu modelo; em vez disso, você pode usar um parâmetro para especificar o tipo de instância ao criar uma pilha. Assim, você pode usar o mesmo modelo para criar vários servidores da Web com diferentes tipos de instância. Para ter mais informações, consulte <a href="./parameters-section-structure.html">Parâmetros</a>.</p><ol><li>
        <p>Clique em uma área aberta na tela do AWS CloudFormation Designer.</p>
        <p>Dependendo do que você selecionou, o editor integrado mostra os componentes de nível de modelo ou de recurso que você pode editar. No nível de modelo, você pode editar todas as outras seções de um modelo, como parâmetros de modelo, mapeamentos e saídas, exceto para a seção Recursos. No nível de recurso, você pode editar as propriedades e os atributos de recursos.</p>
        <p>Clicar em uma área aberta na tela permite que você edite componentes de nível de modelo. Para editar componentes no nível de recurso, selecione um recurso.</p>
      </li><li>
        <p>No painel do editor integrado, escolha a guia <b>Parameters</b> (Parâmetros) na visualização <b>Components</b> (Componentes).</p>
      </li><li>
        <p>Copie os parâmetros no seguinte snippet e cole-os no editor integrado.</p>
        <p>O seguinte snippet JSON adiciona parâmetros para a especificação do tipo de instância servidor da Web, um nome do par de chaves do Amazon EC2 para acesso ao servidor da Web e o intervalo de endereço IP que podem ser usados para acessar o servidor da Web usando o SSH.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "InstanceType" : <span>{</span>
      "Description" : "WebServer EC2 instance type",
      "Type" : "String",
      "Default" : "t2.small",
      "AllowedValues" : [ 
        "t1.micro", 
        "t2.nano", 
        "t2.micro", 
        "t2.small", 
        "t2.medium", 
        "t2.large", 
        "m1.small", 
        "m1.medium", 
        "m1.large", 
        "m1.xlarge", 
        "m2.xlarge", 
        "m2.2xlarge", 
        "m2.4xlarge", 
        "m3.medium", 
        "m3.large", 
        "m3.xlarge", 
        "m3.2xlarge", 
        "m4.large", 
        "m4.xlarge", 
        "m4.2xlarge", 
        "m4.4xlarge", 
        "m4.10xlarge", 
        "c1.medium", 
        "c1.xlarge", 
        "c3.large", 
        "c3.xlarge", 
        "c3.2xlarge", 
        "c3.4xlarge", 
        "c3.8xlarge", 
        "c4.large", 
        "c4.xlarge", 
        "c4.2xlarge", 
        "c4.4xlarge", 
        "c4.8xlarge", 
        "g2.2xlarge", 
        "g2.8xlarge", 
        "r3.large", 
        "r3.xlarge", 
        "r3.2xlarge", 
        "r3.4xlarge", 
        "r3.8xlarge", 
        "i2.xlarge", 
        "i2.2xlarge", 
        "i2.4xlarge", 
        "i2.8xlarge", 
        "d2.xlarge", 
        "d2.2xlarge", 
        "d2.4xlarge", 
        "d2.8xlarge", 
        "hi1.4xlarge", 
        "hs1.8xlarge", 
        "cr1.8xlarge", 
        "cc2.8xlarge", 
        "cg1.4xlarge"
      ],
      "ConstraintDescription" : "must be a valid EC2 instance type."
    },
    "KeyName": <span>{</span>
      "Description": "Name of an EC2 KeyPair to enable SSH access to the instance.",
      "Type": "AWS::EC2::KeyPair::KeyName",
      "ConstraintDescription": "must be the name of an existing EC2 KeyPair."
    },
    "SSHLocation": <span>{</span>
      "Description": " The IP address range that can be used to access the web server using SSH.",
      "Type": "String",
      "MinLength": "9",
      "MaxLength": "18",
      "Default": "0.0.0.0/0",
      "AllowedPattern": "(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})\\.(\\d<span>{</span>1,3})/(\\d<span>{</span>1,2})",
      "ConstraintDescription": "must be a valid IP CIDR range of the form x.x.x.x/x."
    }
  }
}</code></pre>

        <p>Este é o mesmo snippet em YAML.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  InstanceType:
    Description: WebServer EC2 instance type
    Type: String
    Default: t2.small
    AllowedValues:
      - t1.micro
      - t2.nano
      - t2.micro
      - t2.small
      - t2.medium
      - t2.large
      - m1.small
      - m1.medium
      - m1.large
      - m1.xlarge
      - m2.xlarge
      - m2.2xlarge
      - m2.4xlarge
      - m3.medium
      - m3.large
      - m3.xlarge
      - m3.2xlarge
      - m4.large
      - m4.xlarge
      - m4.2xlarge
      - m4.4xlarge
      - m4.10xlarge
      - c1.medium
      - c1.xlarge
      - c3.large
      - c3.xlarge
      - c3.2xlarge
      - c3.4xlarge
      - c3.8xlarge
      - c4.large
      - c4.xlarge
      - c4.2xlarge
      - c4.4xlarge
      - c4.8xlarge
      - g2.2xlarge
      - g2.8xlarge
      - r3.large
      - r3.xlarge
      - r3.2xlarge
      - r3.4xlarge
      - r3.8xlarge
      - i2.xlarge
      - i2.2xlarge
      - i2.4xlarge
      - i2.8xlarge
      - d2.xlarge
      - d2.2xlarge
      - d2.4xlarge
      - d2.8xlarge
      - hi1.4xlarge
      - hs1.8xlarge
      - cr1.8xlarge
      - cc2.8xlarge
      - cg1.4xlarge
    ConstraintDescription: must be a valid EC2 instance type.
  KeyName:
    Description: Name of an EC2 KeyPair to enable SSH access to the instance.
    Type: 'AWS::EC2::KeyPair::KeyName'
    ConstraintDescription: must be the name of an existing EC2 KeyPair.
  SSHLocation:
    Description: ' The IP address range that can be used to access the web server using SSH.'
    Type: String
    MinLength: '9'
    MaxLength: '18'
    Default: 0.0.0.0/0
    AllowedPattern: '(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})\.(\d<span>{</span>1,3})/(\d<span>{</span>1,2})'
    ConstraintDescription: must be a valid IP CIDR range of the form x.x.x.x/x.</code></pre>
      </li></ol></div>
    <div class="procedure"><h6>Para adicionar mapeamentos</h6><p>Os mapeamentos são um conjunto de chaves que são associados a um conjunto de pares de nome-valor. Eles são úteis para especificar valores com base em um valor de parâmetro de entrada. Para esta descrição, usaremos um mapeamento para especificar um ID de AMI para uma instância do EC2 com base no tipo de instância e na região na qual você criará a pilha. Para ter mais informações, consulte <a href="./mappings-section-structure.html">Mapeamentos</a>.</p><ol><li>
        <p>No painel do editor integrado, escolha a guia <b>Mappings (Mapeamentos)</b>.</p>
      </li><li>
        <p>Copie os seguintes mapeamentos JSON e cole-os no editor integrado.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>      
  "Mappings" : <span>{</span>
    "AWSInstanceType2Arch" : <span>{</span>
      "t1.micro"    : <span>{</span> "Arch" : "HVM64"  },
      "t2.nano"     : <span>{</span> "Arch" : "HVM64"  },
      "t2.micro"    : <span>{</span> "Arch" : "HVM64"  },
      "t2.small"    : <span>{</span> "Arch" : "HVM64"  },
      "t2.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "t2.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m1.small"    : <span>{</span> "Arch" : "HVM64"  },
      "m1.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "m1.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m1.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m2.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m2.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m2.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m3.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "m3.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m3.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m3.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m4.large"    : <span>{</span> "Arch" : "HVM64"  },
      "m4.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "m4.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m4.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "m4.10xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "c1.medium"   : <span>{</span> "Arch" : "HVM64"  },
      "c1.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "c3.large"    : <span>{</span> "Arch" : "HVM64"  },
      "c3.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "c3.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c3.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c3.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c4.large"    : <span>{</span> "Arch" : "HVM64"  },
      "c4.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "c4.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c4.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "c4.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "g2.2xlarge"  : <span>{</span> "Arch" : "HVMG2"  },
      "g2.8xlarge"  : <span>{</span> "Arch" : "HVMG2"  },
      "r3.large"    : <span>{</span> "Arch" : "HVM64"  },
      "r3.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "r3.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "r3.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "r3.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "i2.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "i2.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "i2.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "i2.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "d2.xlarge"   : <span>{</span> "Arch" : "HVM64"  },
      "d2.2xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "d2.4xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "d2.8xlarge"  : <span>{</span> "Arch" : "HVM64"  },
      "hi1.4xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "hs1.8xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "cr1.8xlarge" : <span>{</span> "Arch" : "HVM64"  },
      "cc2.8xlarge" : <span>{</span> "Arch" : "HVM64"  }
    },
    "AWSRegionArch2AMI" : <span>{</span>
      "us-east-1"        : <span>{</span>"HVM64" : "ami-0ff8a91507f77f867", "HVMG2" : "ami-0a584ac55a7631c0c"},
      "us-west-2"        : <span>{</span>"HVM64" : "ami-a0cfeed8", "HVMG2" : "ami-0e09505bc235aa82d"},
      "us-west-1"        : <span>{</span>"HVM64" : "ami-0bdb828fd58c52235", "HVMG2" : "ami-066ee5fd4a9ef77f1"},
      "eu-west-1"        : <span>{</span>"HVM64" : "ami-047bb4163c506cd98", "HVMG2" : "ami-0a7c483d527806435"},
      "eu-west-2"        : <span>{</span>"HVM64" : "ami-f976839e", "HVMG2" : "NOT_SUPPORTED"},
      "eu-west-3"        : <span>{</span>"HVM64" : "ami-0ebc281c20e89ba4b", "HVMG2" : "NOT_SUPPORTED"},
      "eu-central-1"     : <span>{</span>"HVM64" : "ami-0233214e13e500f77", "HVMG2" : "ami-06223d46a6d0661c7"},
      "ap-northeast-1"   : <span>{</span>"HVM64" : "ami-06cd52961ce9f0d85", "HVMG2" : "ami-053cdd503598e4a9d"},
      "ap-northeast-2"   : <span>{</span>"HVM64" : "ami-0a10b2721688ce9d2", "HVMG2" : "NOT_SUPPORTED"},
      "ap-northeast-3"   : <span>{</span>"HVM64" : "ami-0d98120a9fb693f07", "HVMG2" : "NOT_SUPPORTED"},
      "ap-southeast-1"   : <span>{</span>"HVM64" : "ami-08569b978cc4dfa10", "HVMG2" : "ami-0be9df32ae9f92309"},
      "ap-southeast-2"   : <span>{</span>"HVM64" : "ami-09b42976632b27e9b", "HVMG2" : "ami-0a9ce9fecc3d1daf8"},
      "ap-south-1"       : <span>{</span>"HVM64" : "ami-0912f71e06545ad88", "HVMG2" : "ami-097b15e89dbdcfcf4"},
      "us-east-2"        : <span>{</span>"HVM64" : "ami-0b59bfac6be064b78", "HVMG2" : "NOT_SUPPORTED"},
      "ca-central-1"     : <span>{</span>"HVM64" : "ami-0b18956f", "HVMG2" : "NOT_SUPPORTED"},
      "sa-east-1"        : <span>{</span>"HVM64" : "ami-07b14488da8ea02a0", "HVMG2" : "NOT_SUPPORTED"},
      "cn-north-1"       : <span>{</span>"HVM64" : "ami-0a4eaf6c4454eda75", "HVMG2" : "NOT_SUPPORTED"},
      "cn-northwest-1"   : <span>{</span>"HVM64" : "ami-6b6a7d09", "HVMG2" : "NOT_SUPPORTED"}
    }
  }
}</code></pre>

        <p>Estes são os mesmos mapeamentos em YAML.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Mappings:
  AWSInstanceType2Arch:
    t1.micro:
      Arch: HVM64
    t2.nano:
      Arch: HVM64
    t2.micro:
      Arch: HVM64
    t2.small:
      Arch: HVM64
    t2.medium:
      Arch: HVM64
    t2.large:
      Arch: HVM64
    m1.small:
      Arch: HVM64
    m1.medium:
      Arch: HVM64
    m1.large:
      Arch: HVM64
    m1.xlarge:
      Arch: HVM64
    m2.xlarge:
      Arch: HVM64
    m2.2xlarge:
      Arch: HVM64
    m2.4xlarge:
      Arch: HVM64
    m3.medium:
      Arch: HVM64
    m3.large:
      Arch: HVM64
    m3.xlarge:
      Arch: HVM64
    m3.2xlarge:
      Arch: HVM64
    m4.large:
      Arch: HVM64
    m4.xlarge:
      Arch: HVM64
    m4.2xlarge:
      Arch: HVM64
    m4.4xlarge:
      Arch: HVM64
    m4.10xlarge:
      Arch: HVM64
    c1.medium:
      Arch: HVM64
    c1.xlarge:
      Arch: HVM64
    c3.large:
      Arch: HVM64
    c3.xlarge:
      Arch: HVM64
    c3.2xlarge:
      Arch: HVM64
    c3.4xlarge:
      Arch: HVM64
    c3.8xlarge:
      Arch: HVM64
    c4.large:
      Arch: HVM64
    c4.xlarge:
      Arch: HVM64
    c4.2xlarge:
      Arch: HVM64
    c4.4xlarge:
      Arch: HVM64
    c4.8xlarge:
      Arch: HVM64
    g2.2xlarge:
      Arch: HVMG2
    g2.8xlarge:
      Arch: HVMG2
    r3.large:
      Arch: HVM64
    r3.xlarge:
      Arch: HVM64
    r3.2xlarge:
      Arch: HVM64
    r3.4xlarge:
      Arch: HVM64
    r3.8xlarge:
      Arch: HVM64
    i2.xlarge:
      Arch: HVM64
    i2.2xlarge:
      Arch: HVM64
    i2.4xlarge:
      Arch: HVM64
    i2.8xlarge:
      Arch: HVM64
    d2.xlarge:
      Arch: HVM64
    d2.2xlarge:
      Arch: HVM64
    d2.4xlarge:
      Arch: HVM64
    d2.8xlarge:
      Arch: HVM64
    hi1.4xlarge:
      Arch: HVM64
    hs1.8xlarge:
      Arch: HVM64
    cr1.8xlarge:
      Arch: HVM64
    cc2.8xlarge:
      Arch: HVM64
  AWSRegionArch2AMI:
    us-east-1:
      HVM64: ami-0ff8a91507f77f867
      HVMG2: ami-0a584ac55a7631c0c
    us-west-2:
      HVM64: ami-a0cfeed8
      HVMG2: ami-0e09505bc235aa82d
    us-west-1:
      HVM64: ami-0bdb828fd58c52235
      HVMG2: ami-066ee5fd4a9ef77f1
    eu-west-1:
      HVM64: ami-047bb4163c506cd98
      HVMG2: ami-0a7c483d527806435
    eu-west-2:
      HVM64: ami-f976839e
      HVMG2: NOT_SUPPORTED
    eu-west-3:
      HVM64: ami-0ebc281c20e89ba4b
      HVMG2: NOT_SUPPORTED
    eu-central-1:
      HVM64: ami-0233214e13e500f77
      HVMG2: ami-06223d46a6d0661c7
    ap-northeast-1:
      HVM64: ami-06cd52961ce9f0d85
      HVMG2: ami-053cdd503598e4a9d
    ap-northeast-2:
      HVM64: ami-0a10b2721688ce9d2
      HVMG2: NOT_SUPPORTED
    ap-northeast-3:
      HVM64: ami-0d98120a9fb693f07
      HVMG2: NOT_SUPPORTED
    ap-southeast-1:
      HVM64: ami-08569b978cc4dfa10
      HVMG2: ami-0be9df32ae9f92309
    ap-southeast-2:
      HVM64: ami-09b42976632b27e9b
      HVMG2: ami-0a9ce9fecc3d1daf8
    ap-south-1:
      HVM64: ami-0912f71e06545ad88
      HVMG2: ami-097b15e89dbdcfcf4
    us-east-2:
      HVM64: ami-0b59bfac6be064b78
      HVMG2: NOT_SUPPORTED
    ca-central-1:
      HVM64: ami-0b18956f
      HVMG2: NOT_SUPPORTED
    sa-east-1:
      HVM64: ami-07b14488da8ea02a0
      HVMG2: NOT_SUPPORTED
    cn-north-1:
      HVM64: ami-0a4eaf6c4454eda75
      HVMG2: NOT_SUPPORTED
    cn-northwest-1:
      HVM64: ami-6b6a7d09
      HVMG2: NOT_SUPPORTED</code></pre>
      </li></ol></div>
    <div class="procedure"><h6>Para adicionar saídas</h6><p>As saídas declaram os valores que você deseja disponibilizar para uma chamada de API de <code class="code">describe
          stacks</code> ou por meio da guia <b>Outputs</b> da pilha do console do CloudFormation. Para esta apresentação, mostraremos o URL do site para que você possa visualizar facilmente o site depois que criá-lo. Para ter mais informações, consulte <a href="./outputs-section-structure.html">Outputs</a>.</p><ol><li>
        <p>No painel do editor integrado, selecione a guia <b>Outputs (Saídas)</b>.</p>
      </li><li>
        <p>Copie a seguinte saída JSON e cole no editor integrado.</p>
        <p>A saída usa uma função intrínseca <code class="code">Fn::GetAtt</code> para obter o IP público da instância de servidor da Web.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Outputs": <span>{</span>
    "URL": <span>{</span>
      "Value": <span>{</span>
        "Fn::Join": [
          "",
          [
            "http://",
            <span>{</span>
              "Fn::GetAtt": [
                "WebServerInstance",
                "PublicIp"
              ]
            }
          ]
        ]
      },
      "Description": "Newly created application URL"
    }
  }
}</code></pre>

        <p>Esta é a mesma saída em YAML.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Outputs:
  URL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - WebServerInstance
          - PublicIp
    Description: Newly created application URL</code></pre>
      </li><li>
        <p>Salve seu modelo novamente para que você não perca as alterações. Você pode seguramente salvar as alterações no mesmo arquivo criado na seção anterior.</p>
      </li></ol></div>
    <p>Agora que os parâmetros do modelo, mapeamentos e saídas estão implementados, é possível especificar as propriedades do recurso.</p>
  <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">Etapa 3: Especificar propriedades do recurso</h2>
    
    <p>Muitos recursos têm propriedades necessárias que definem suas configurações ou definições, como o tipo de instância usada para o servidor da Web. Semelhante ao que fizemos na etapa anterior, usaremos o editor integrado do AWS CloudFormation Designer para especificar as propriedades do recurso. Fornecemos YAML e JSON de amostra que você pode copiar e colar no editor integrado.</p>
    <div class="procedure"><h6>Para especificar as propriedades de recurso</h6><ol><li>
        <p>Na tela do AWS CloudFormation Designer, selecione o recurso <code class="code">VPC</code>.</p>
        <p>O editor integrado mostra os componentes de nível de recurso que você pode editar, como as propriedades e atributos do recurso.</p>
      </li><li>
        <p>No painel do editor integrado, escolha a guia <b>Properties (Propriedades)</b>.</p>
      </li><li>
        <p>Copie o seguinte trecho de JSON e cole-o no editor integrado entre as chaves (<code class="code"><span>{</span>}</code>) de <b>Properties (Propriedades)</b>.</p>
        <p>Esse snippet especifica as definições de DNS e o bloco CIDR da VPC.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "EnableDnsSupport": "true",
        "EnableDnsHostnames": "true",
        "CidrBlock": "10.0.0.0/16"</code></pre>
        <p>Para YAML, digite uma nova linha após <code class="code">Properties:</code> e cole o seguinte snippet.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      EnableDnsSupport: 'true'
      EnableDnsHostnames: 'true'
      CidrBlock: 10.0.0.0/16</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Para eficiência, fornecemos snippets de JSON e YAML que você pode copiar e colar. Observe, no entanto, que o editor tem um recurso de preenchimento automático que você pode usar para especificar manualmente cada propriedade. Para ter mais informações, consulte <a href="./working-with-templates-cfn-designer-json-editor.html">Editor de JSON e YAML integrado</a>.</p></div></div>
      </li><li>
        <p>Repita este processo para os recursos a seguir.</p><div class="variablelist">
             
             
             
             
          <dl>
              <dt><span class="term"><code class="code">PublicSubnet</code></span></dt>
              <dd>
                <p>Adicione o seguinte propriedade de bloco do CIDR depois da propriedade do ID da VPC. AWS CloudFormation  O Designer adicionou automaticamente a propriedade de ID da VPC quando você arrastou a sub-rede dentro da VPC.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Você verá algumas outras associações que o AWS CloudFormation Designer criou automaticamente para você.  Adicione apenas as novas propriedades que estão em negrito.</p></div></div>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "VpcId": <span>{</span>
          "Ref": "VPC"
        },
        <b>"CidrBlock": "10.0.0.0/24"</b></code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      VpcId: !Ref VPC
      <b>CidrBlock: 10.0.0.0/24</b></code></pre>
              </dd>
             
              <dt><span class="term"><code class="code">PublicRoute</code></span></dt>
              <dd>
                <p>Adicione propriedade de bloco CIDR de destino a seguir, que direciona todo o tráfego para o gateway de Internet:</p>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">        <b>"DestinationCidrBlock": "0.0.0.0/0",</b>
        "RouteTableId": <span>{</span>
          "Ref": "PublicRouteTable"
        },        
        "GatewayId": <span>{</span>
          "Ref": "InternetGateway"
        }</code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      <b>DestinationCidrBlock: 0.0.0.0/0</b>
      RouteTableId: !Ref PublicRouteTable
      GatewayId: !Ref InternetGateway</code></pre>
              </dd>
             
              <dt><span class="term"><code class="code">WebServerSecurityGroup</code></span></dt>
              <dd>
                <p>Adicione as seguintes regras de entrada que determinam qual tráfego acessar a instância de servidor da Web. As regras permitem todos os tráfegos HTTP e determinados SSH que você especifica como um valor de parâmetro ao criar uma pilha.</p>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "VpcId": <span>{</span>
          "Ref": "VPC"
        }<b>,
        "GroupDescription" : "Allow access from HTTP and SSH traffic",
        "SecurityGroupIngress": [
          <span>{</span>
            "IpProtocol": "tcp",
            "FromPort": 80,
            "ToPort": 80,
            "CidrIp": "0.0.0.0/0"
          },
          <span>{</span>
            "IpProtocol": "tcp",
            "FromPort": 22,
            "ToPort": 22,
            "CidrIp": <span>{</span>
              "Ref": "SSHLocation"
            }
          }
        ]</b></code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      VpcId: !Ref VPC
      <b>GroupDescription: Allow access from HTTP and SSH traffic
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 80
          ToPort: 80
          CidrIp: 0.0.0.0/0
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: !Ref SSHLocation</b></code></pre>
              </dd>
             
              <dt><span class="term"><code class="code">WebServerInstance</code></span></dt>
              <dd>
                <p>Você precisa especificar um número de propriedades de instância de servidor da Web, então, vamos destacar apenas alguns para fins de demonstração. As propriedades <code class="code">InstanceType</code> e <code class="code">ImageId</code> usam os valores de mapeamento e parâmetro especificados na seção anterior. Quando você cria uma pilha, você especifica o tipo de instância como um valor de parâmetro. O valor <code class="code">ImageId</code> é um mapeamento que é baseado na sua região da pilha e no tipo de instância que você especificou.</p>
                <p>A propriedade <code class="code">NetworkInterfaces</code> especifica as configurações de rede para a instância de servidor da Web. Essa propriedade nos permite associar o security group e a sub-rede com a instância. Embora o AWS CloudFormation Designer tenha usado a propriedade <code class="code">SubnetId</code> para associar a instância com a sub-rede, é necessário usar a propriedade <code class="code">NetworkInterfaces</code>, pois essa é a única forma para dar um IP público para o servidor da Web. Além disso, quando você especifica a propriedade <code class="code">NetworkInterfaces</code>, é necessário especificar a sub-rede e o security group dentro da propriedade.</p>
                <p>Na propriedade <code class="code">UserData</code>, especificamos os scripts de configuração que são executados depois que a instância está pronta e em execução. Todas as informações de configuração são definidas nos metadados da instância, que adicionaremos na próxima etapa.</p>
                <p>Substitua todas as propriedades com o snippet a seguir:</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Não anexe esse snippet às propriedades existentes.</p></div></div>
                <p>JSON</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><b>       "InstanceType": <span>{</span>
          "Ref": "InstanceType"
        },
        "ImageId": <span>{</span>
          "Fn::FindInMap": [
            "AWSRegionArch2AMI",
            <span>{</span>
              "Ref": "AWS::Region"
            },
            <span>{</span>
              "Fn::FindInMap": [
                "AWSInstanceType2Arch",
                <span>{</span>
                  "Ref": "InstanceType"
                },
                "Arch"
              ]
            }
          ]
        },
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "NetworkInterfaces": [
          <span>{</span>
            "GroupSet": [
              <span>{</span>
                "Ref": "WebServerSecurityGroup"
              }
            ],
            "AssociatePublicIpAddress": "true",
            "DeviceIndex": "0",
            "DeleteOnTermination": "true",
            "SubnetId": <span>{</span>
              "Ref": "PublicSubnet"
            }
          }
        ],
        "UserData": <span>{</span>
          "Fn::Base64": <span>{</span>
            "Fn::Join": [
              "",
              [
                "#!/bin/bash -xe\n",
                "yum install -y aws-cfn-bootstrap\n",
                "# Install the files and packages from the metadata\n",
                "/opt/aws/bin/cfn-init -v ",
                "         --stack ",
                <span>{</span>
                  "Ref": "AWS::StackName"
                },
                "         --resource WebServerInstance ",
                "         --configsets All ",
                "         --region ",
                <span>{</span>
                  "Ref": "AWS::Region"
                },
                "\n",
                "# Signal the status from cfn-init\n",
                "/opt/aws/bin/cfn-signal -e $? ",
                "         --stack ",
                <span>{</span>
                  "Ref": "AWS::StackName"
                },
                "         --resource WebServerInstance ",
                "         --region ",
                <span>{</span>
                  "Ref": "AWS::Region"
                },
                "\n"
              ]
            ]
          }
        }</b></code></pre>
                <p>YAML</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml "><b>      InstanceType: !Ref InstanceType
      ImageId: !FindInMap 
        - AWSRegionArch2AMI
        - !Ref 'AWS::Region'
        - !FindInMap 
          - AWSInstanceType2Arch
          - !Ref InstanceType
          - Arch
      KeyName: !Ref KeyName
      NetworkInterfaces:
        - GroupSet:
            - !Ref WebServerSecurityGroup
          AssociatePublicIpAddress: 'true'
          DeviceIndex: '0'
          DeleteOnTermination: 'true'
          SubnetId: !Ref PublicSubnet
      UserData: !Base64 
        'Fn::Join':
          - ''
          - - |
              #!/bin/bash -xe
            - |
              yum install -y aws-cfn-bootstrap
            - |
              # Install the files and packages from the metadata
            - '/opt/aws/bin/cfn-init -v '
            - '         --stack '
            - !Ref 'AWS::StackName'
            - '         --resource WebServerInstance '
            - '         --configsets All '
            - '         --region '
            - !Ref 'AWS::Region'
            - |+

            - |
              # Signal the status from cfn-init
            - '/opt/aws/bin/cfn-signal -e $? '
            - '         --stack '
            - !Ref 'AWS::StackName'
            - '         --resource WebServerInstance '
            - '         --region '
            - !Ref 'AWS::Region'
            - |+</b></code></pre>
              </dd>
            </dl></div>
      </li><li>
        <p>Adicione os metadados da configuração do servidor da Web para o recurso <code class="code">WebServerInstance</code>.</p>
        <ol><li>
            <p>Escolha o recurso <code class="code">WebServerInstance</code> e depois a guia <b>Metadata (Metadados)</b> no painel editor integrado.</p>
          </li><li>
            <p><em>Se você estiver criando seu modelo em JSON</em>: dentro das chaves <code class="code">Metadata</code> (<code class="code"><span>{</span>}</code>) e depois da chave de fechamento <code class="code">AWS::CloudFormation::Designer</code>, adicione uma vírgula (<code class="code">,</code>).</p>
          </li><li>
            <p>Depois da propriedade <code class="code">AWS::CloudFormation::Designer</code>, adicione o seguinte snippet, que instrui o script de ajuda do cfn-init para iniciar do servidor da Web e cria uma página da Web básica.</p>
            <p>JSON</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">        "AWS::CloudFormation::Init" : <span>{</span>
          "configSets" : <span>{</span>
            "All" : [ "ConfigureSampleApp" ]
          },
          "ConfigureSampleApp" : <span>{</span>
            "packages" : <span>{</span>
              "yum" : <span>{</span>
                "httpd" : []
              }
            },
            "files" : <span>{</span>
              "/var/www/html/index.html" : <span>{</span>
                "content" : <span>{</span> "Fn::Join" : ["\n", [
                  "&lt;h1&gt;Congratulations, you have successfully launched the AWS CloudFormation sample.&lt;/h1&gt;"
                ]]},
                "mode"    : "000644",
                "owner"   : "root",
                "group"   : "root"
              }
            },
            "services" : <span>{</span>
              "sysvinit" : <span>{</span>
                "httpd"    : <span>{</span> "enabled" : "true", "ensureRunning" : "true" }
              }
            }
          }
        }</code></pre>
            <p>YAML</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">      'AWS::CloudFormation::Init':
        configSets:
          All:
            - ConfigureSampleApp
        ConfigureSampleApp:
          packages:
            yum:
              httpd: []
          files:
            /var/www/html/index.html:
              content: !Join 
                - |+

                - - &gt;-
                    &lt;h1&gt;Congratulations, you have successfully launched the AWS
                    CloudFormation sample.&lt;/h1&gt;
              mode: '000644'
              owner: root
              group: root
          services:
            sysvinit:
              httpd:
                enabled: 'true'
                ensureRunning: 'true'</code></pre>
          </li></ol>
      </li><li>
        <p>Na barra de ferramentas do AWS CloudFormation Designer, escolha <b>Validate template</b> (Validar modelo) (<span class="inlinemediaobject">
               
                <img src="images/designer-validate-icon.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
               
            </span>) para verificar erros de sintaxe no seu modelo.</p>
        <p>Visualize e corrija os erros no painel <b>Mensagens</b> e, em seguida, valide o modelo novamente. Se você não visualizar erros, seu modelo é sintaticamente válido.</p>
      </li><li>
        <p>Salve o modelo concluído para manter todas as alterações feitas.</p>
      </li></ol></div>
    <p>Agora você tem um modelo de CloudFormation completo que pode ser usado para criar um servidor Web básico em uma VPC. Para criar o modelo, primeiro adicionamos e conectamos os recursos de modelo usando o painel da tela do AWS CloudFormation Designer. Em seguida, usamos o editor integrado para adicionar outros componentes de modelo e para especificar as propriedades de recurso. Na próxima etapa, usaremos este modelo para criar uma pilha.</p>
  <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">Etapa 4: Provisionar recursos</h2>
    
    <p>Para criar uma pilha, você pode iniciar o <b>Create Stack Wizard</b> (Assistente de criação de pilha) do CloudFormation no AWS CloudFormation Designer. Usaremos o modelo que criamos nas etapas anteriores para criar uma pilha do CloudFormation. Depois que o CloudFormation provisionar todos os seus recursos, você terá um site básico em funcionamento.</p>
    <div class="procedure"><h6>Para criar a pilha </h6><ol><li>
        <p>Na barra de ferramentas do AWS CloudFormation Designer, escolha <b>Create Stack</b> (Criar pilha) (o ícone de nuvem).</p>
        <p>O AWS CloudFormation Designer salva o modelo aberto em um bucket do S3 e, em seguida, inicia o <b>Create Stack Wizard</b> (Assistente de criação de pilha) do CloudFormation. O CloudFormation usa o mesmo bucket do S3 criado sempre que você carrega modelos.</p>
      </li><li>
        <p>O CloudFormation preenche automaticamente o URL do modelo; escolha <b>Next</b>.</p>
      </li><li>
        <p>Na seção <b>Especificar detalhes</b>, insira o nome de uma pilha no campo <b>Nome da pilha</b>. Neste exemplo, use <code class="userinput">BasicWebServerStack</code>.</p>
      </li><li>
        <p>Na seção <b>Parâmetros</b>, para o campo <b>KeyName</b>, insira o nome de um par de chaves válido do Amazon EC2 na mesma região em que você está criando a pilha.</p>
      </li><li>
        <p>Mantenha os outros valores de parâmetros padrão e escolha <b>Próximo</b>.</p>
      </li><li>
        <p>Para esta demonstração, você não precisa adicionar tags ou especificar configurações avançadas, portanto escolha <b>Próximo</b>.</p>
      </li><li>
        <p>Certifique-se de que o nome da pilha e o nome do par de chaves do Amazon EC2 estejam corretos e, em seguida, escolha <b>Create (Criar)</b>.</p>
      </li></ol></div>
    <p>Pode levar vários minutos para o AWS CloudFormation criar sua pilha. Para monitorar o progresso, visualize os eventos da pilha. Para obter mais informações sobre a visualização de eventos de pilha, consulte <a href="./cfn-console-view-stack-data-resources.html">Visualizar dados e recursos da pilha do AWS CloudFormation no AWS Management Console</a>. Após a criação da pilha, visualize as saídas doa pilha e vá para o URL do site de amostra para verificar se o site está em execução. Para ter mais informações, consulte <a href="./cfn-console-view-stack-data-resources.html">Visualizar dados e recursos da pilha do AWS CloudFormation no AWS Management Console</a>.</p>
    <p>Agora que você criou com êxito um modelo e iniciou uma pilha usando o AWS CloudFormation Designer, é possível usar a pilha nas seguintes apresentações: <a href="./working-with-templates-cfn-designer-walkthrough-updatebasicwebserver.html">Apresentação: usar o AWS CloudFormation Designer para modificar o modelo de uma pilha</a>, que modifica o modelo para criar um servidor da Web escalável.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./CHAP_Using.html">Demonstrações</div><div id="next" class="next-link" accesskey="n" href="./working-with-templates-cfn-designer-walkthrough-updatebasicwebserver.html">Utilizar o Designer para modificar um modelo</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>