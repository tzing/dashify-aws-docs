<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::SES::ReceiptRule S3Action - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-properties-ses-receiptrule-s3action" /><meta name="default_state" content="aws-properties-ses-receiptrule-s3action" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" /><meta name="description" content="When included in a receipt rule, this action saves the received message to an Amazon Simple Storage Service (Amazon S3) bucket and, optionally, publishes a notification to Amazon Simple Notification Service (Amazon SNS)." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_SES.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" hreflang="x-default" /><meta name="feedback-item" content="SES" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::SES::ReceiptRule S3Action" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::SES::ReceiptRule S3Action - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SES&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon Simple Email Service resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_SES.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::SES::ReceiptRule",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ses-receiptrule.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "AWS::SES::ReceiptRule S3Action",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ses-receiptrule.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_SES.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-properties-ses-receiptrule-s3action-syntax">Syntax</a><a href="#aws-properties-ses-receiptrule-s3action-properties">Properties</a><a href="#aws-properties-ses-receiptrule-s3action--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-properties-ses-receiptrule-s3action">AWS::SES::ReceiptRule S3Action</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>When included in a receipt rule, this action saves the received message to an Amazon Simple Storage Service
            (Amazon S3) bucket and, optionally, publishes a notification to Amazon Simple Notification Service (Amazon SNS).</p><p>To enable Amazon SES to write emails to your Amazon S3 bucket, use an AWS KMS key to encrypt
            your emails, or publish to an Amazon SNS topic of another account, Amazon SES must have permission
            to access those resources. For information about granting permissions, see the <a href="https://docs.aws.amazon.com/ses/latest/dg/receiving-email-permissions.html">Amazon SES
                Developer Guide</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>When you save your emails to an Amazon S3 bucket, the maximum email size (including
                headers) is 40 MB. Emails larger than that bounces.</p></div></div><p>For information about specifying Amazon S3 actions in receipt rules, see the <a href="https://docs.aws.amazon.com/ses/latest/dg/receiving-email-action-s3.html">Amazon SES
                Developer Guide</a>.</p><h2 id="aws-properties-ses-receiptrule-s3action-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-properties-ses-receiptrule-s3action-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "<a href="#cfn-ses-receiptrule-s3action-bucketname">BucketName</a>" : <code class="replaceable">String</code>,
  "<a href="#cfn-ses-receiptrule-s3action-kmskeyarn">KmsKeyArn</a>" : <code class="replaceable">String</code>,
  "<a href="#cfn-ses-receiptrule-s3action-objectkeyprefix">ObjectKeyPrefix</a>" : <code class="replaceable">String</code>,
  "<a href="#cfn-ses-receiptrule-s3action-topicarn">TopicArn</a>" : <code class="replaceable">String</code>
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-properties-ses-receiptrule-s3action-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">  <a href="#cfn-ses-receiptrule-s3action-bucketname">BucketName</a>: <code class="replaceable">String</code>
  <a href="#cfn-ses-receiptrule-s3action-kmskeyarn">KmsKeyArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-ses-receiptrule-s3action-objectkeyprefix">ObjectKeyPrefix</a>: <code class="replaceable">String</code>
  <a href="#cfn-ses-receiptrule-s3action-topicarn">TopicArn</a>: <code class="replaceable">String</code>
</code></pre></div><h2 id="aws-properties-ses-receiptrule-s3action-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-ses-receiptrule-s3action-bucketname"><span class="term"><code class="code">BucketName</code></span></dt><dd>
         <p>The name of the Amazon S3 bucket for incoming email.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ses-receiptrule-s3action-kmskeyarn"><span class="term"><code class="code">KmsKeyArn</code></span></dt><dd>
         <p>The customer master key that Amazon SES should use to encrypt your emails before saving
            them to the Amazon S3 bucket. You can use the default master key or a custom master key that
            you created in AWS KMS as follows:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>To use the default master key, provide an ARN in the form of
                        <code class="code">arn:aws:kms:REGION:ACCOUNT-ID-WITHOUT-HYPHENS:alias/aws/ses</code>.
                    For example, if your AWS account ID is 123456789012 and you want to use the
                    default master key in the US West (Oregon) Region, the ARN of the default master
                    key would be <code class="code">arn:aws:kms:us-west-2:123456789012:alias/aws/ses</code>. If
                    you use the default master key, you don't need to perform any extra steps to
                    give Amazon SES permission to use the key.</p>
            </li><li class="listitem">
               <p>To use a custom master key that you created in AWS KMS, provide the ARN of
                    the master key and ensure that you add a statement to your key's policy to give
                    Amazon SES permission to use it. For more information about giving permissions, see
                    the <a href="https://docs.aws.amazon.com/ses/latest/dg/receiving-email-permissions.html">Amazon SES Developer
                        Guide</a>.</p>
            </li></ul></div>
         <p>For more information about key policies, see the <a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html">AWS KMS Developer Guide</a>. If
            you do not specify a master key, Amazon SES does not encrypt your emails.</p>
         <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Your mail is encrypted by Amazon SES using the Amazon S3 encryption client before the mail
                is submitted to Amazon S3 for storage. It is not encrypted using Amazon S3 server-side
                encryption. This means that you must use the Amazon S3 encryption client to decrypt the
                email after retrieving it from Amazon S3, as the service has no access to use your
                AWS KMS keys for decryption. This encryption client is currently available with
                the <a href="https://aws.amazon.com/sdk-for-java/" rel="noopener noreferrer" target="_blank"><span>AWS SDK for Java</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and
                    <a href="https://aws.amazon.com/sdk-for-ruby/" rel="noopener noreferrer" target="_blank"><span>AWS SDK for Ruby</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> only. For
                more information about client-side encryption using AWS KMS master keys, see the
                    <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingClientSideEncryption.html">Amazon S3 Developer Guide</a>.</p></div></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ses-receiptrule-s3action-objectkeyprefix"><span class="term"><code class="code">ObjectKeyPrefix</code></span></dt><dd>
         <p>The key prefix of the Amazon S3 bucket. The key prefix is similar to a directory name that
            enables you to store similar data under the same directory in a bucket.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-ses-receiptrule-s3action-topicarn"><span class="term"><code class="code">TopicArn</code></span></dt><dd>
         <p>The ARN of the Amazon SNS topic to notify when the message is saved to the Amazon S3 bucket. You
            can find the ARN of a topic by using the <a href="https://docs.aws.amazon.com/sns/latest/api/API_ListTopics.html">ListTopics</a> operation in
            Amazon SNS.</p>
         <p>For more information about Amazon SNS topics, see the <a href="https://docs.aws.amazon.com/sns/latest/dg/CreateTopic.html">Amazon SNS Developer Guide</a>.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd></dl></div><h2 id="aws-properties-ses-receiptrule-s3action--examples">Examples</h2><h3 id="aws-properties-ses-receiptrule-s3action--examples--S3_Action_in_SES_RuleSet">S3 Action in SES RuleSet</h3><p>The following example creates an S3 Action in a SES RuleSet. </p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-properties-ses-receiptrule-s3action--examples--S3_Action_in_SES_RuleSet--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "SesRuleSet": <span>{</span>
        "Type": "AWS::SES::ReceiptRuleSet"
    },
    "SesRule": <span>{</span>
        "Type": "AWS::SES::ReceiptRule",
        "Properties": <span>{</span>
            "Rule": <span>{</span>
                "Recipients": [
                    "String"
                ],
                "Actions": [
                    <span>{</span>
                        "S3Action": <span>{</span>
                            "BucketName": <span>{</span>
                                "Ref": "Bucket"
                            }
                        }
                    }
                ],
                "Enabled": true,
                "ScanEnabled": true
            },
            "RuleSetName": <span>{</span>
                "Ref": "SesRuleSet"
            }
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-properties-ses-receiptrule-s3action--examples--S3_Action_in_SES_RuleSet--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">SesRuleSet:
  Type: 'AWS::SES::ReceiptRuleSet'
SesRule:
  Type: 'AWS::SES::ReceiptRule'
  Properties:
    Rule:
      Recipients:
        - String
      Actions:
        - S3Action:
            BucketName: !Ref Bucket
      Enabled: true
      ScanEnabled: true
    RuleSetName: !Ref SesRuleSet</code></pre></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-properties-ses-receiptrule-rule.html">Rule</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-ses-receiptrule-snsaction.html">SNSAction</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SES&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SES&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-properties-ses-receiptrule-s3action.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>