<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Consultar dados espaciais no Amazon Redshift - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="geospatial-overview" /><meta name="default_state" content="geospatial-overview" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html" /><meta name="description" content="Nesta seção, você pode encontrar uma introdução ao suporte espacial no Amazon Redshift." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/geospatial-overview.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/geospatial-overview.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/geospatial-overview.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/geospatial-overview.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/geospatial-overview.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/geospatial-overview.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/geospatial-overview.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/geospatial-overview.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/geospatial-overview.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/geospatial-overview.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/geospatial-overview.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/geospatial-overview.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/geospatial-overview.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/geospatial-overview.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/geospatial-overview.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/geospatial-overview.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/geospatial-overview.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/geospatial-overview.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/geospatial-overview.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Consultar dados espaciais no Amazon Redshift" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Consultar dados espaciais no Amazon Redshift - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#geospatial-overview" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Consultar dados espaciais no Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#geospatial-overview" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="geospatial-overview">Consultar dados espaciais no Amazon Redshift</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p><em>Dados espaciais</em> descrevem a posição e a forma de uma geometria em um espaço definido (um sistema de referência espacial). O Amazon Redshift oferece suporte a dados espaciais com os tipos de dados <code class="code">GEOMETRY</code> e <code class="code">GEOGRAPHY</code>, que contêm dados espaciais e, opcionalmente, o identificador do sistema de referência espacial (SRID) dos dados. </p><p>Os dados espaciais contêm dados geométricos que você pode usar para representar recursos geográficos. Entre os exemplos desse tipo de dados estão previsões do tempo, rotas em mapa, tweets com posições geográficas, locais de lojas e rotas aéreas. Os dados espaciais têm uma função importante na análise comercial, na geração de relatórios e na previsão. </p><p>É possível consultar dados espaciais com funções SQL do Amazon Redshift. Os dados espaciais contêm valores geométricos de um objeto. </p><p>As operações do tipo de dados <code class="code">GEOMETRY</code> funcionam no plano cartesiano. Embora o identificador do sistema de referência espacial (SRID) seja armazenado dentro do objeto, o SRID é meramente um identificador do sistema de coordenadas e não tem nenhuma função nos algoritmos usados para processar os objetos <code class="code">GEOMETRY</code>. Por outro lado, as operações do tipo de dados <code class="code">GEOGRAPHY</code> tratam as coordenadas dentro dos objetos como coordenadas esféricas em um esferoide. Esse esferoide é definido pelo SRID, que faz referência a um sistema de referência espacial geográfica. Por padrão, os tipos de dados <code class="code">GEOGRAPHY</code> são criados com referência espacial (SRID) 4326, referenciando o sistema geodésico mundial (WGS) 84. Para obter mais informações sobre SRIDs consulte <a href="https://en.wikipedia.org/wiki/Spatial_reference_system" rel="noopener noreferrer" target="_blank"><span>Sistema de referência espacial</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> na Wikipédia.</p><p>É possível usar a função ST_Transform para transformar as coordenadas de vários sistemas de referência espacial. Após concluir a transformação das coordenadas, você também pode usar um cast simples entre os dois, desde que a entrada <code class="code">GEOMETRY</code> esteja codificada com o SRID geográfico. Esse cast simplesmente copia coordenadas sem realizar nenhuma outra transformação. Por exemplo:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT ST_AsEWKT(ST_GeomFromEWKT('SRID=4326;POINT(10 20)')::geography);</code></pre><pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">st_asewkt
------------------------
 SRID=4326;POINT(10 20)</code></pre><p>Para entender melhor a diferença entre os tipos de dados <code class="code">GEOMETRY</code> e <code class="code">GEOGRAPHY</code>, calcule a distância entre o aeroporto de Berlim (BER) e o aeroporto de São Francisco (SFO) usando o sistema geodésico mundial (WGS) 84. Com o tipo de dados <code class="code">GEOGRAPHY</code>, o resultado é exibido em metros. Ao usar um tipo de dados <code class="code">GEOMETRY</code> com SRID 4326, o resultado é exibido em graus, que não pode ser convertido em metros porque a distância de um grau depende de onde as geometrias do globo estão localizadas.</p><p>Utilizam-se cálculos com o tipo de dados <code class="code">GEOGRAPHY</code> sobretudo para cálculos realistas de terra redonda, como a área exata de um país sem distorção. Mas a computação deles é muito mais cara. Portanto, o ST_Transform pode transformar suas coordenadas em um sistema de coordenadas projetado local adequado e fazer o cálculo com o tipo de dados <code class="code">GEOMETRY</code> mais rápido.</p><p>Usando dados espaciais, você pode executar consultas para fazer o seguinte:</p><div class="itemizedlist">
      
	   
       
   <ul class="itemizedlist"><li class="listitem"><p>Encontrar a distância entre dois pontos.</p></li><li class="listitem"><p>Verificar se uma área (polígono) contém outra.</p></li><li class="listitem"><p>Verificar se uma linestring intercepta outra linestring ou polígono.</p></li></ul></div><p>É possível usar o tipo de dados <code class="code">GEOMETRY</code> para manter os valores de dados espaciais. No Amazon Redshift, um valor <code class="code">GEOMETRY</code> pode definir tipos de dados primitivos de geometria bidimensionais (2D), tridimensionais (3DM), bidimensionais com uma medida (3DM) e quadridimensionais (4D):</p><div class="itemizedlist">
       
            
       
       
   <ul class="itemizedlist"><li class="listitem"><p>Uma geometria bidimensional (2D) é especificada por duas coordenadas cartesianas (x, y) em um plano.</p></li><li class="listitem"><p>Uma geometria tridimensional (3DZ) é especificada por três coordenadas cartesianas (x, y, z) no espaço.</p></li><li class="listitem"><p>Uma geometria bidimensional com medida (3DM) é especificada por três coordenadas (x, y, m), onde as duas primeiras são coordenadas cartesianas em um plano e a terceira é uma medida.</p></li><li class="listitem"><p>Uma geometria quadridimensional (4D) é especificada por quatro coordenadas (x, y, z, m), onde as três primeiras são coordenadas cartesianas em um espaço e a quarta é uma medida.</p></li></ul></div><p>Para obter mais informações sobre tipos de dados primitivos de geometria, consulte <a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry" rel="noopener noreferrer" target="_blank"><span>Well-known text representation of geometry</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> na Wikipedia. </p><p>É possível usar o tipo de dados <code class="code">GEOGRAPHY</code> para manter os valores de dados espaciais. No Amazon Redshift, um valor <code class="code">GEOGRAPHY</code> pode definir tipos de dados primitivos de geometria bidimensionais (2D), tridimensionais (3DM), bidimensionais com uma medida (3DM) e quadridimensionais (4D):</p><div class="itemizedlist">
       
            
       
       
   <ul class="itemizedlist"><li class="listitem"><p>Uma geometria bidimensional (2D) é especificada por coordenadas de longitude e latitude em um esferoide.</p></li><li class="listitem"><p>Uma geometria tridimensional (3DZ) é especificada por coordenadas de longitude, latitude e latitude em um esferoide.</p></li><li class="listitem"><p>Uma geometria bidimensional com medida (3DM) é especificada por três coordenadas (longitude, latitude e medida), em que as duas primeiras são coordenadas angulares em um plano e a terceira é uma medida.</p></li><li class="listitem"><p>Uma geometria quadridimensional (4D) é especificada por quatro coordenadas (longitude, latitude, altitude, medida), em que as três primeiras são longitude, latitude e altitude, e a quarta é uma medida.</p></li></ul></div><p>Para obter mais informações sobre os sistemas de coordenadas geográficas, consulte <a href="https://en.wikipedia.org/wiki/Geographic_coordinate_system" rel="noopener noreferrer" target="_blank"><span>Sistema das coordenadas geográficas</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> e <a href="https://en.wikipedia.org/wiki/Spherical_coordinate_system" rel="noopener noreferrer" target="_blank"><span>Sistema esférico de coordenadas</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> na Wikipédia. </p><p>Os tipos de dados <code class="code">GEOMETRY</code> e <code class="code">GEOGRAPHY</code> têm os seguintes subtipos: </p><div class="itemizedlist">
     
	  
	  
	  
	  
	  
	   
   <ul class="itemizedlist"><li class="listitem"><p><code class="code">POINT</code></p></li><li class="listitem"><p><code class="code">LINESTRING</code></p></li><li class="listitem"><p><code class="code">POLYGON</code></p></li><li class="listitem"><p><code class="code">MULTIPOINT</code></p></li><li class="listitem"><p><code class="code">MULTILINESTRING</code></p></li><li class="listitem"><p><code class="code">MULTIPOLYGON</code></p></li><li class="listitem"><p><code class="code">GEOMETRYCOLLECTION</code></p></li></ul></div><p>Existem funções SQL do Amazon Redshift que suportam as seguintes representações de dados geométricos:</p><div class="itemizedlist">
       
       
       
       
       

   <ul class="itemizedlist"><li class="listitem"><p>GeoJSON</p></li><li class="listitem"><p>Well-Known Text (WKT - texto bem-conhecido). </p></li><li class="listitem"><p>Extended well-known text (EWKT - texto bem-conhecido estendido)</p></li><li class="listitem"><p>Representação de Well-known binary (WKB - binário bem-conhecido) </p></li><li class="listitem"><p>Extended well-known binary (EWKB - binário bem-conhecido estendido)</p></li></ul></div><p>Você pode converter os tipos de dados <code class="code">GEOMETRY</code> e <code class="code">GEOGRAPHY</code>.</p><p>O SQL a seguir converte uma linestring de <code class="code">GEOMETRY</code> para <code class="code">GEOGRAPHY</code>. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT ST_AsEWKT(ST_GeomFromText('LINESTRING(110 40, 2 3, -10 80, -7 9)')::geography);</code></pre><pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 st_asewkt
----------------------------------------------
 SRID=4326;LINESTRING(110 40,2 3,-10 80,-7 9)
</code></pre><p>O SQL a seguir converte uma linestring de <code class="code">GEOGRAPHY</code> para <code class="code">GEOMETRY</code>. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT ST_AsEWKT(ST_GeogFromText('LINESTRING(110 40, 2 3, -10 80, -7 9)')::geometry);</code></pre><pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 st_asewkt
----------------------------------------------
 SRID=4326;LINESTRING(110 40,2 3,-10 80,-7 9)
</code></pre><p>O Amazon Redshift oferece muitas funções SQL para consultar dados espaciais. Exceto a função <code class="code">ST_IsValid</code>, funções espaciais que aceitam um objeto <code class="code">GEOMETRY</code> como um argumento esperam que este objeto <code class="code">GEOMETRY</code> seja uma geometria válida. Se o objeto <code class="code">GEOMETRY</code> ou <code class="code">GEOGRAPHY</code> não for válido, o comportamento da função espacial é indefinido. Para obter mais informações sobre validação, consulte <a href="./spatial-terminology.html#spatial-terminology-validity">Validade geométrica</a>. </p><p>Para obter detalhes sobre as funções SQL para consultar dados espaciais, consulte <a href="./geospatial-functions.html">Funções espaciais</a>. </p><p>Para obter detalhes sobre como carregar dados espaciais, consulte <a href="./copy-usage_notes-spatial-data.html">Carregar uma coluna do tipo de dados GEOMETRY ou GEOGRAPHY</a>. </p><div class="highlights"><h6>Tópicos</h6><ul><li><a href="./spatial-tutorial.html">Tutorial: Uso de funções SQL espaciais com Amazon Redshift</a></li><li><a href="./spatial-copy-shapefile.html">Carregar um shapefile no Amazon Redshift</a></li><li><a href="./spatial-terminology.html">Terminologia para dados espaciais do Amazon Redshift</a></li><li><a href="./spatial-limitations.html">Considerações ao usar dados espaciais no Amazon Redshift</a></li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./data-catalog-views-overview.html">Criação de exibições no Data Catalog (visualização)</div><div id="next" class="next-link" accesskey="n" href="./spatial-tutorial.html">Tutorial: Usando funções SQL espaciais</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>