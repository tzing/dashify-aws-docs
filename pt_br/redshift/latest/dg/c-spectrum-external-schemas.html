<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Criação de esquemas externos do Amazon Redshift Spectrum - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-spectrum-external-schemas" /><meta name="default_state" content="c-spectrum-external-schemas" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="description" content="Todas as tabelas externas devem ser criadas em um esquema externo, o qual você cria usando a instrução ." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Criação de esquemas externos do Amazon Redshift Spectrum" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Criação de esquemas externos do Amazon Redshift Spectrum - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c-spectrum-external-schemas" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Consultar dados externos usando o Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Criação de esquemas externos do Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c-spectrum-external-schemas" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#c-spectrum-external-catalogs">Trabalhar com catálogos externos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c-spectrum-external-schemas">Criação de esquemas externos do Amazon Redshift Spectrum</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Todas as tabelas externas devem ser criadas em um esquema externo, o qual você cria usando a instrução <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a>. </p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Alguns aplicativos usam os termos <em>banco de dados</em> e <em>esquema</em> de maneira intercambiável. No Amazon Redshift, usamos o termo <em>esquema</em>. </p></div></div><p>Um esquema externo do Amazon Redshift faz referência a um banco de dados externo em um catálogo de dados externo. Você pode criar o banco de dados externo no Amazon Redshift, no <a href="https://docs.aws.amazon.com/athena/latest/ug/catalog.html">Amazon Athena</a>, no <a href="https://docs.aws.amazon.com/glue/latest/dg/components-overview.html#data-catalog-intro">AWS Glue Data Catalog</a> ou em uma metastore do Apache Hive, como o <a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-what-is-emr.html">Amazon EMR</a>. Quando você cria um banco de dados externo no Amazon Redshift, o banco de dados reside no catálogo de dados do Athena. Para criar um banco de dados em uma metastore do Hive, é necessário criar o banco de dados na aplicação do Hive.</p><p>O Amazon Redshift precisa de autorização para acessar o catálogo de dados no Athena e os arquivos de dados no Amazon S3 em seu nome. Para fornecer essa autorização, crie primeiro uma função do AWS Identity and Access Management (IAM). Em seguida, anexe a função ao seu cluster e forneça o nome do recurso da Amazon (ARN) para a função na instrução <code class="code">CREATE EXTERNAL SCHEMA</code> do Amazon Redshift. Para obter mais informações sobre a autorização, consulte <a href="./c-spectrum-iam-policies.html">Políticas do IAM do Amazon Redshift Spectrum</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se você tiver tabelas externas do Redshift Spectrum no catálogo de dados do Athena, poderá migrar o catálogo de dados do Athena para um catálogo de dados do AWS Glue. Para usar o AWS Glue Data Catalog com o Redshift Spectrum, talvez seja necessário alterar as políticas do IAM. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/athena/latest/ug/glue-athena.html#glue-upgrade">Atualizar para o catálogo de dados do AWS Glue</a> no <em>Manual do usuário do Amazon Athena</em>.</p></div></div><p>Para criar um banco de dados externo ao mesmo tempo que o esquema externo é criado, especifique <code class="code">FROM DATA CATALOG</code> e inclua a cláusula <code class="code">CREATE EXTERNAL DATABASE</code> na instrução <code class="code">CREATE EXTERNAL SCHEMA</code>. </p><p>O exemplo a seguir cria um esquema externo denominado <code class="code">spectrum_schema</code> usando o banco de dados externo <code class="code">spectrum_db</code>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema from data catalog 
database 'spectrum_db' 
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole'
create external database if not exists;</code></pre><p>Se você gerencia o catálogo de dados usando o Athena, especifique o nome do banco de dados do Athena e a região da AWS na qual o catálogo de dados do Athena está localizado. </p><p>O exemplo a seguir cria um esquema externo usando o banco de dados padrão <code class="code">sampledb</code> no catálogo de dados do Athena.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema athena_schema from data catalog 
database 'sampledb' 
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole' 
region 'us-east-2';</code></pre><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>O parâmetro <code class="code">region</code> faz referência à região da AWS em que o catálogo de dados do Athena está localizado, e não à localização dos arquivos de dados no Amazon S3.</p></div></div><p>Se você gerencia o catálogo de dados usando uma metastore do Hive, como o Amazon EMR, seus grupos de segurança devem ser configurados para permitir o tráfego entre os clusters. </p><p>Na instrução CREATE EXTERNAL SCHEMA, especifique <code class="code">FROM HIVE METASTORE</code> e inclua o URI e o número da porta da metastore. O exemplo a seguir cria um esquema externo usando um banco de dados do metastore do Hive denominado <code class="code">hive_db</code>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema hive_schema
from hive metastore
database 'hive_db'
uri '172.10.10.10' port 99
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole'</code></pre><p>Para visualizar os esquemas externos do seu cluster, consulte a tabela do catálogo PG_EXTERNAL_SCHEMA ou a exibição SVV_EXTERNAL_SCHEMAS. O exemplo a seguir consulta a SVV_EXTERNAL_SCHEMAS, que une as tabelas PG_EXTERNAL_SCHEMA e PG_NAMESPACE.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from svv_external_schemas</code></pre><p>Para ver a sintaxe completa do comando e os exemplos, consulte <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a>.</p>
         <h2 id="c-spectrum-external-catalogs">Trabalhar com catálogos externos no Amazon Redshift Spectrum</h2>


         <p>Os metadados dos bancos de dados externos e as tabelas externas do Amazon Redshift Spectrum são armazenados em um catálogo de dados externos. Por padrão, os metadados do Redshift Spectrum são armazenados em um catálogo de dados do Athena. É possível visualizar e gerenciar os bancos de dados e as tabelas do Redshift Spectrum no console do Athena. </p>
         <p>Também é possível criar e gerenciar bancos de dados externos e tabelas externas usando a linguagem de definição de dados (DDL) do Hive por meio do Athena ou de uma metastore do Hive, como o Amazon EMR. </p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Recomendamos o uso do Amazon Redshift para criar e gerenciar os bancos de dados externos e as tabelas externas no Redshift Spectrum.</p></div></div>
          
            <h3 id="c-spectrum-athena-external-catalogs">Visualizar bancos de dados do Redshift Spectrum no Athena e no AWS Glue</h3>

            <p>Você pode criar um banco de dados externo incluindo a cláusula CREATE EXTERNAL DATABASE IF NOT EXISTS como parte da instrução CREATE EXTERNAL SCHEMA. Nesses casos, os metadados do banco de dados externo é armazenado em seu catálogo de dados. Os metadados das tabelas externas criadas que são qualificadas pelo esquema externo também são armazenados no catálogo de dados do . </p>
            
            <p>O Athena e o AWS Glue mantêm um catálogo de dados para cada Região da AWS compatível. Para exibir os metadados da tabela, faça login no Athena ou no console do AWS Glue. No Athena, escolha <b>Data sources</b> (Fontes de dados) e seu AWS Glue e visualize os detalhes do banco de dados. No AWS Glue, escolha <b>Databases</b> (Bancos de dados) e seu banco de dados externo e visualize os respectivos detalhes. </p>
               
            <p>Se você cria e gerencia suas tabelas externas usando o Athena, registre o banco de dados com CREATE EXTERNAL SCHEMA. Por exemplo, o comando a seguir registra o banco de dados do Athena denominado <code class="code">sampledb</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema athena_sample
from data catalog
database 'sampledb'
iam_role 'arn:aws:iam::123456789012:role/mySpectrumRole'
region 'us-east-1';</code></pre>
            <p>Ao consultar a exibição de sistema SVV_EXTERNAL_TABLES, você vê as tabelas no banco de dados <code class="code">sampledb</code> do Athena, além das tabelas que criou no Amazon Redshift.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from svv_external_tables;</code></pre>

            <pre class="screen">schemaname    | tablename        | location                                               
--------------+------------------+--------------------------------------------------------
athena_sample | elb_logs         | s3://athena-examples/elb/plaintext           
athena_sample | lineitem_1t_csv  | s3://myspectrum/tpch/1000/lineitem_csv                
athena_sample | lineitem_1t_part | s3://myspectrum/tpch/1000/lineitem_partition          
spectrum      | sales            | s3://redshift-downloads/tickit/spectrum/sales          
spectrum      | sales_part       | s3://redshift-downloads/tickit/spectrum/sales_part
</pre>
          
          
            <h3 id="c-spectrum-hive-metastore">Registro de um banco de dados da metastore do Apache Hive</h3>


            <p>Ao criar tabelas externas em uma metastore do Apache Hive, você pode usar CREATE EXTERNAL SCHEMA para registrar essas tabelas no Redshift Spectrum. </p>
            <p>Na instrução CREATE EXTERNAL SCHEMA, especifique a cláusula FROM HIVE METASTORE e forneça o URI e o número da porta da metastore do Hive. A função do IAM deve incluir uma permissão para acessar o Amazon S3, mas não precisa de nenhuma permissão para o Athena. O exemplo a seguir registra uma metastore do Hive. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema if not exists hive_schema
from hive metastore
database 'hive_database'
uri 'ip-10-0-111-111.us-west-2.compute.internal' port 9083 
iam_role 'arn:aws:iam::123456789012:role/mySpectrumRole';</code></pre>
          
          
            <h3 id="c-spectrum-enabling-emr-access">Ativar o cluster do Amazon Redshift para acessar o cluster do Amazon EMR</h3>


            <p>Se a metastore do Hive estiver no Amazon EMR, você deverá conceder ao cluster do Amazon Redshift acesso ao cluster do Amazon EMR. Para isso, crie um grupo de segurança do Amazon EC2. Depois, permita todo o tráfego de entrada para esse grupo de segurança do EC2 recebido do grupo de segurança do cluster do Amazon Redshift e do grupo de segurança do cluster do Amazon EMR. Em seguida, adicione a segurança do EC2 a ambos os clusters do Amazon Redshift e do Amazon EMR.</p>
            
            <div class="procedure"><h6>Visualizar o nome do grupo de segurança no cluster do Amazon Redshift</h6><p>Para exibir o grupo de segurança, faça o seguinte:</p><ol><li> <p>Faça login no AWS Management Console e abra o console do Amazon Redshift em <a href="https://console.aws.amazon.com/redshift/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/redshift/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p> 
               </li><li>
                     <p>No menu de navegação, escolha <b>Clusters</b>. Em seguida, escolha o cluster na lista para abrir os respectivos detalhes.</p>
                  </li><li>
                  <p>Escolha <b>Properties</b> (Propriedades) e visualize a seção <b>Network and security</b> (Rede e segurança). </p>
               </li><li>
                     <p>Encontre seu grupo de segurança em <b>VPC security group</b> (Grupo de segurança da VPC) e anote. </p>
                  </li></ol></div>
                                            
                       
         
 
                  <p><b></b></p>
                  
                  

                        
                                                                                                
            <div class="procedure"><h6>Visualizar o nome do grupo de segurança do nó principal do Amazon EMR</h6><ol><li><p>Abra o cluster do Amazon EMR. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-security-configurations.html">Usar configurações de segurança para definir a segurança do cluster</a> no <em>Guia de gerenciamento do Amazon EMR</em>.</p></li><li><p>Em <b>Security and access</b> (Segurança e acesso), anote o nome do grupo de segurança do nó principal do Amazon EMR.</p>
                  <div class="mediaobject">
                      
                        <img src="images/spectrum-emr-security-groups.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="Uma captura de tela realçando o nome do grupo de segurança do nó principal do Amazon EMR no console do Amazon EMR." />
                      
                      
                  </div>
               </li></ol></div>
            
            <div class="procedure"><h6>Para criar ou modificar um grupo de segurança do Amazon EC2 para permitir a conexão entre o Amazon Redshift e o Amazon EMR</h6><ol><li><p>No painel do Amazon EC2, escolha <b>Security Groups</b> (Grupos de segurança). Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-rules.html">Regras dos grupos de segurança</a> no <em>Guia do usuário do Amazon EC2 para instâncias do Linux</em> </p>
               </li><li><p>Escolha <b>Criar grupo de segurança</b>. </p>
               </li><li><p>Se estiver usando a VPC, escolha a VPC na qual os clusters do Amazon Redshift e do Amazon EMR se encontram. </p>
               </li><li><p>Adicione uma regra de entrada. </p>
               <div class="orderedlist">
                   
                   
                   
               <ol><li><p>Em <b>Type (Tipo)</b>, escolha <b>Custom TCP (TCP personalizada)</b>. </p>
                  </li><li><p>Em <b>Source</b>, escolha <b>Custom</b>. </p>
                  </li><li><p>Insira o nome de seu grupo de segurança do Amazon Redshift. </p></li></ol></div></li><li><p>Adicione uma outra regra de entrada. </p>
               <div class="orderedlist">
                   
                   
                                                      
               <ol><li><p>Para <b>Type</b>, escolha <b>TCP</b>. </p>
                  </li><li><p>Em <b>Port Range (Intervalo de portas)</b>, insira <b>9083</b>.</p>
                     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>A porta padrão para um HMS no EMR é 9083. Se o HMS usa uma porta diferente, especifique essa porta na regra de entrada e na definição do esquema externo. </p></div></div>
                  </li><li><p>Em <b>Source</b>, escolha <b>Custom</b>. </p>
                  </li></ol></div>
               </li><li><p>Insira o nome e a descrição do grupo de segurança. </p></li><li><p>Escolha <b>Criar grupo de segurança</b>. </p>                  
               </li></ol></div>
            
            <div class="procedure"><h6>Para adicionar o grupo de segurança do Amazon EC2 que você criou na etapa anterior ao cluster do Amazon Redshift e ao cluster do Amazon EMR</h6><ol><li><p>No Amazon Redshift, escolha seu cluster. </p></li><li><p>Escolha <b>Properties</b> (Propriedades). </p></li><li><p>Visualize a seção <b>Network and security</b> (Rede e segurança) e escolha <b>Edit</b> (Editar). </p></li><li><p>Em <b>VPC security group</b> (Grupo de segurança da VPC), escolha o novo nome do grupo de segurança. </p></li><li><p>Escolha <b>Save changes (Salvar alterações)</b>. </p></li></ol></div>
            
            <div class="procedure"><h6>Para adicionar o grupo de segurança do Amazon EC2 ao cluster do Amazon EMR</h6><ol><li><p>No Amazon EMR, escolha seu cluster. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-security-configurations.html">Usar configurações de segurança para definir a segurança do cluster</a> no <em>Guia de gerenciamento do Amazon EMR</em>.</p></li><li><p>Em <b>Hardware</b>, escolha o link para o nó principal. </p></li><li><p>Escolha o link na coluna <b>EC2 Instance ID</b> (ID da instância do EC2). </p>
                  <div class="mediaobject">
                      
                        <img src="images/spectrum-emr-add-security-group.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                        Uma captura de tela realçando um valor do ID de instância do Amazon EC2 no console do Amazon EMR.&#xA;                     " />
                      
                      
                  </div></li><li><p>Escolha <b>Actions</b> (Ações), <b>Security</b> (Segurança) e <b>Change security groups</b> (Alterar grupos de segurança). </p></li><li><p>Em <b>Associated sercurity groups</b> (Grupos de segurança associados), escolha o novo grupo de segurança e escolha <b>Add security group</b> (Adicionar grupo de segurança). </p></li><li><p>Escolha <b>Save</b> (Salvar). </p>
                  </li></ol></div>
          
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-spectrum-data-files.html">Criação de arquivos de dados para consultas no Amazon Redshift Spectrum</div><div id="next" class="next-link" accesskey="n" href="./c-spectrum-external-tables.html">Criar tabelas externas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>