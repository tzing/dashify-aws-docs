<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Usar a visualização SVL_QUERY_SUMMARY - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-SVL-Query-Summary" /><meta name="default_state" content="using-SVL-Query-Summary" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="description" content="Para analisar as informações de resumo de consultas por fluxo, faça o seguinte:" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Usar a visualização SVL_QUERY_SUMMARY" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Usar a visualização SVL_QUERY_SUMMARY - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#using-SVL-Query-Summary" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Ajustar a performance da consulta",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-optimizing-query-performance.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Analisar e melhorar as consultas",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-query-tuning.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Analisar o resumo da consulta",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-analyzing-the-query-summary.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Usar a visualização SVL_QUERY_SUMMARY",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-analyzing-the-query-summary.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#using-SVL-Query-Summary" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-SVL-Query-Summary">Usar a visualização SVL_QUERY_SUMMARY</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Para analisar as informações de resumo de consultas por fluxo, faça o seguinte:</p><div class="orderedlist">
                
                
                
                
                
                
                
                
            <ol><li>
                  <p>Execute a seguinte consulta para determinar o ID de sua consulta:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select query, elapsed, substring
from svl_qlog
order by query
desc limit 5;                     </code></pre>
                  <p>Examine o texto truncado da consulta no campo <code class="code">substring</code> para determinar qual valor de <code class="code">query</code> representa a sua consulta. Se você executou a consulta mais de uma vez, use o valor de <code class="code">query</code> da linha com o menor valor <code class="code">elapsed</code>. Esta é a linha para a versão compilada. Se você estiver executando várias consultas, poderá aumentar o valor usado pela cláusula LIMIT usada para certificar-se de que sua consulta seja incluída.</p>
               </li><li>
                  <p>Selecione linhas do SVL_QUERY_SUMMARY para sua consulta. Classifique os resultados por fluxo, segmento e etapa:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from svl_query_summary where query = MyQueryID order by stm, seg, step;</code></pre>
                  <div class="mediaobject">
                      
                        <img src="images/svl_query_summary_results.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                      
                  </div>
               </li><li>
                  <p>Mapeie as etapas às operações de consulta no plano de consulta usando as informações em <a href="./query-plan-summary-map.html">Mapeamento do plano de consulta para o resumo da consulta</a>. Elas devem ter aproximadamente os mesmos valores para linhas e bytes (linhas * largura do plano de consulta). Se elas não tiverem, consulte <a href="./query-performance-improvement-opportunities.html#table-statistics-missing-or-out-of-date">Estatísticas de tabela ausentes ou desatualizadas</a> para as soluções recomendadas.</p>
               </li><li>
                  <p>Verifique se o campo <code class="code">is_diskbased</code> tem um valor de <code class="code">t</code> (verdadeiro) para qualquer etapa. Os hash, agregados e classificações são operadores que provavelmente irão gravar dados em disco se o sistema não tiver memória suficiente alocada para o processamento de consulta.</p>
                  <p>Se <code class="code">is_diskbased</code> for verdadeiro, consulte <a href="./query-performance-improvement-opportunities.html#insufficient-memory-allocated-to-the-query">Memória insuficiente alocada para a consulta</a> para as soluções recomendadas.</p>
               </li><li>
                  <p>Revise os valores do campo <code class="code">label</code> e verifique se há uma sequência AGG-DIST-AGG em qualquer lugar das etapas. Sua presença indica a agregação em duas etapas, que é cara. Para corrigir isso, altere a cláusula GROUP BY para usar a chave de distribuição (a primeira chave, se houver várias).</p>
               </li><li>
                  <p>Revise o valor de <code class="code">maxtime</code> para cada segmento (ele é o mesmo para todas as etapas no segmento). Identifique um segmento com o maior valor de <code class="code">maxtime</code> e analise as etapas neste segmento quanto aos operadores a seguir.</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Um valor <code class="code">maxtime</code> alto não necessariamente indica um problema com o segmento. Independente de um valor alto, o segmento pode não ter levado muito tempo para processar. Todos os segmentos em um fluxo começam a ser cronometrados simultaneamente. No entanto, alguns segmentos downstream podem não ser executados até obterem dados dos segmentos upstream. Este efeito pode fazer parecer que eles tenham levado muito tempo, pois seus valores de <code class="code">maxtime</code> incluirão tanto seu tempo de espera quanto o tempo de processamento. </p></div></div>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p><b>BCAST ou DIST</b>: nesses casos, o valor <code class="code">maxtime</code> alto pode ser o resultado da redistribuição de um grande número linhas. Para soluções recomendadas, consulte <a href="./query-performance-improvement-opportunities.html#suboptimal-data-distribution">Distribuição de dados pouco satisfatória</a>.</p>
                     </li><li class="listitem">
                        <p><b>HJOIN (junção hash)</b>: Se a etapa em questão tem um valor muito elevado no campo de <code class="code">rows</code> em comparação ao valor de <code class="code">rows</code> na etapa final do RETURN da consulta, consulte <a href="./query-performance-improvement-opportunities.html#hash-join">Junção de hash</a> para as soluções recomendadas.</p>
                     </li><li class="listitem">
                        <p><b>SCAN/SORT</b>: procura uma sequência de etapas SCAN, SORT, SCAN, MERGE imediatamente antes de uma etapa de junção. Este padrão indica que os dados não classificados estão sendo varridos e, então, mesclados com a área classificada da tabela.</p>
                        <p>Verifique se o valor de linhas para a etapa SCAN tem um valor muito alto em comparação ao valor de linhas na etapa final de RETURN da consulta. Este padrão indica que o mecanismo de execução está fazendo a varredura de linhas que serão posteriormente rejeitadas, o que é ineficiente. Para soluções recomendadas, consulte <a href="./query-performance-improvement-opportunities.html#insufficiently-restrictive-predicate">Predicado insuficientemente restritivo</a>. </p>
                        <p>Se o valor de <code class="code">maxtime</code> para etapa SCAN é alto, consulte <a href="./query-performance-improvement-opportunities.html#suboptimal-WHERE-clause">Cláusula WHERE pouco satisfatória</a> para as soluções recomendadas.</p>
                        <p>Se o valor de <code class="code">rows</code> para a etapa SORT não for zero, consulte <a href="./query-performance-improvement-opportunities.html#unsorted-or-mis-sorted-rows">Linhas não classificadas ou mal classificadas</a> para as soluções recomendadas.</p>
                     </li></ul></div>
               </li><li>
                  <p>Revise os valores de <code class="code">rows</code> e <code class="code">bytes</code> para as etapas de 5 a 10 que precedem a etapa final RETURN para ter uma ideia da quantidade de dados que foi retornada ao cliente. Esse processo pode ser um tipo de arte.</p>
                  <p>Por exemplo, no seguinte resumo de consulta, você pode ver que a terceira etapa de PROJECT fornece um valor de <code class="code">rows</code> mas não um valor de <code class="code">bytes</code>. Ao procurar nas etapas anteriores por um com o mesmo valor de <code class="code">rows</code>, você encontra a etapa SCAN que fornece tanto as informações de linhas como as de bytes:</p>
                  <div class="mediaobject">
                      
                        <img src="images/rows_and_bytes.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                      
                  </div>
                  <p>Se você estiver retornando um volume de dados inusitadamente alto, consulte <a href="./query-performance-improvement-opportunities.html#very-large-result-set">Conjunto de resultados muito grande</a> para as soluções recomendadas.</p>
               </li><li>
                  <p>Verifique se o valor de <code class="code">bytes</code> é alto em relação ao valor de <code class="code">rows</code> para qualquer etapa, em comparação a outras etapas. Este padrão pode indicar que você está selecionando muitas colunas. Para soluções recomendadas, consulte <a href="./query-performance-improvement-opportunities.html#large-SELECT-list">Lista SELECT grande</a>.</p>
               </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-analyzing-the-query-summary.html">Analisar o resumo da consulta</div><div id="next" class="next-link" accesskey="n" href="./using-SVL-Query-Report.html">como usar a visualização SVL_QUERY_REPORT</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>