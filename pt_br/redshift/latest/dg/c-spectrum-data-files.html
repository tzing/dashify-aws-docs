<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Criação de arquivos de dados para consultas no Amazon Redshift Spectrum - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-spectrum-data-files" /><meta name="default_state" content="c-spectrum-data-files" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html" /><meta name="description" content="Os arquivos de dados que você usa para consultas no Amazon Redshift Spectrum geralmente são dos mesmos tipos dos arquivos usados para outras aplicações. Por exemplo, os mesmos tipos de arquivo são usados com o Amazon Athena, o Amazon EMR e o Amazon QuickSight. Você pode consultar os dados em seu formato original diretamente no Amazon S3. Para isso, os arquivos de dados devem estar em um formato compatível com o Redshift Spectrum e localizados em um bucket do Amazon S3 que possa ser acessado pelo cluster." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-data-files.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-data-files.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-data-files.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-data-files.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-data-files.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-data-files.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-data-files.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-data-files.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-data-files.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-data-files.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-data-files.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-data-files.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-data-files.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-data-files.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-data-files.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-data-files.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-data-files.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-data-files.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-data-files.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Criação de arquivos de dados para consultas no Amazon Redshift Spectrum" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Criação de arquivos de dados para consultas no Amazon Redshift Spectrum - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c-spectrum-data-files" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Consultar dados externos usando o Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Criação de arquivos de dados para consultas no Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c-spectrum-data-files" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#c-spectrum-data-files-formats">Formatos de dados do Redshift Spectrum </a><a href="#c-spectrum-data-files-compression">Tipos de compactação do Redshift Spectrum </a><a href="#c-spectrum-data-files-encryption">Encriptação do Redshift Spectrum </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c-spectrum-data-files">Criação de arquivos de dados para consultas no Amazon Redshift Spectrum</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Os arquivos de dados que você usa para consultas no Amazon Redshift Spectrum geralmente são dos mesmos tipos dos arquivos usados para outras aplicações. Por exemplo, os mesmos tipos de arquivo são usados com o Amazon Athena, o Amazon EMR e o Amazon QuickSight. Você pode consultar os dados em seu formato original diretamente no Amazon S3. Para isso, os arquivos de dados devem estar em um formato compatível com o Redshift Spectrum e localizados em um bucket do Amazon S3 que possa ser acessado pelo cluster. </p><p>O bucket do Amazon S3 com os arquivos de dados deve estar na mesma região da AWS do cluster do Amazon Redshift. Para obter informações sobre as regiões da AWS compatíveis, consulte <a href="./c-using-spectrum.html#c-spectrum-regions">Regiões do Amazon Redshift Spectrum</a>.</p>
         <h2 id="c-spectrum-data-files-formats">Formatos de dados do Redshift Spectrum </h2>
      <p>O Redshift Spectrum é compatível com os formatos de dados estruturados e semiestruturados a seguir.</p>

      <div class="table-container"><div class="table-contents"><table id="w319aac29c15b7b5"><thead>
               <tr>
                  <th>Formato do arquivo</th>
                  <th>Colunar</th>
                  <th>Suporte a leituras paralelas</th>
                  <th>Unidade dividida</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">Parquet</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Grupo de linhas</td>
               </tr>
               <tr>
                  <td tabindex="-1">ORC</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Stripe</td>
               </tr>
               <tr>
                  <td tabindex="-1">RCFile</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Grupo de linhas</td>
               </tr>
               <tr>
                  <td tabindex="-1">TextFile</td>
                  <td tabindex="-1">Não</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Linha</td>
               </tr>
               <tr>
                  <td tabindex="-1">SequenceFile</td>
                  <td tabindex="-1">Não</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Linha ou bloco</td>
               </tr>
               <tr>
                  <td tabindex="-1">RegexSerde</td>
                  <td tabindex="-1">Não</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Linha</td>
               </tr>
               <tr>
                  <td tabindex="-1">OpenCSV</td>
                  <td tabindex="-1">Não</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Linha</td>
               </tr>
               <tr>
                  <td tabindex="-1">AVRO</td>
                  <td tabindex="-1">Não</td>
                  <td tabindex="-1">Sim</td>
                  <td tabindex="-1">Bloquear</td>
               </tr>
               <tr>
                  <td tabindex="-1">Ion</td>
                  <td tabindex="-1">Não</td>
                  <td tabindex="-1">Não</td>
                  <td tabindex="-1">N/D</td>
               </tr>
               <tr>
                  <td tabindex="-1">JSON</td>
                  <td tabindex="-1">Não</td>
                  <td tabindex="-1">Não</td>
                  <td tabindex="-1">N/D</td>
               </tr>
            </table></div></div>

      <p>Na tabela anterior, os cabeçalhos indicam o seguinte:</p>
      <div class="itemizedlist">
          
          
          
      <ul class="itemizedlist"><li class="listitem">
                     <p><b>Colunar:</b> se o formato do arquivo armazena dados fisicamente em uma estrutura orientada em colunas, em vez de uma estrutura orientada em linhas.</p>

         </li><li class="listitem">
            <p><b>Suporte a leituras paralelas:</b> se o formato de arquivo oferece suporte à leitura de blocos individuais dentro do arquivo. A leitura de blocos individuais permite o processamento distribuído de um arquivo em várias solicitações independentes do Redshift Spectrum, em vez de ter de ler o arquivo completo em uma única solicitação.</p>
         </li><li class="listitem">
            <p><b>Unidade dividida:</b> para formatos de arquivo que podem ser lidos em paralelo, a unidade dividida é o menor bloco de dados que uma única solicitação do Redshift Spectrum consegue processar.</p>
      
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Os valores de data e hora nos arquivos de texto devem estar no formato <code class="code">yyyy-MM-dd HH:mm:ss.SSSSSS</code>, como mostra o seguinte valor de data e hora de exemplo: <code class="code">2017-05-01 11:30:59.000000</code>.</p></div></div>
      <p>Recomendamos usar um formato de arquivo colunar para o armazenamento, como o Apache Parquet. Com um formato de arquivo colunar para o armazenamento, é possível minimizar a transferência de dados do Amazon S3 selecionando apenas as colunas necessárias. </p></li></ul></div>
       
         <h2 id="c-spectrum-data-files-compression">Tipos de compactação do Redshift Spectrum </h2>

                  <p>Para reduzir o espaço de armazenamento, melhorar a performance e minimizar os custos, é altamente recomendável compactar os arquivos de dados. O Redshift Spectrum reconhece os tipos de compactação de arquivos com base na extensão de arquivo.</p>
      
      <p>O Redshift Spectrum é compatível com os tipos de compactação e extensões a seguir.</p>
      <div class="table-container"><div class="table-contents"><table id="w319aac29c15b9b7"><thead>
               <tr>
                  <th>Algoritmo de compactação</th>
                  <th>Extensão de arquivo</th>
                  <th>Suporte a leituras paralelas</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">Gzip</td>
                  <td tabindex="-1">.gz</td>
                  <td tabindex="-1">Não</td>
               </tr>
               <tr>
                  <td tabindex="-1">Bzip2</td>
                  <td tabindex="-1">.bz2</td>
                  <td tabindex="-1">Sim</td>
               </tr>
               <tr>
                  <td tabindex="-1">Snappy</td>
                  <td tabindex="-1">.snappy</td>
                  <td tabindex="-1">Não</td>
               </tr>
            </table></div></div>
      
  
      <p>Você pode aplicar compactação em diferentes níveis. O mais comum é compactar um arquivo inteiro ou blocos individuais dentro de um arquivo. A compactação de formatos colunares no nível do arquivo não gera benefícios de performance. </p>
         
      <p>Para que o Redshift Spectrum consiga ler um arquivo em paralelo, as seguintes afirmações devem ser verdadeiras:</p>
         <div class="itemizedlist">
          
          
         <ul class="itemizedlist"><li class="listitem">
            <p>O formato de arquivo oferece suporte a leituras paralelas.</p>
         </li><li class="listitem">
         <p>A compactação no nível do arquivo, se houver, oferece suporte a leituras paralelas.</p>
         </li></ul></div>

      <p>Não importa se as unidades divididas individuais dentro de um arquivo são compactadas usando um algoritmo de compactação que pode ser lido em paralelo, pois cada unidade dividida é processada por uma única solicitação do Redshift Spectrum. Um exemplo disso são os arquivos Parquet compactados por Snappy. Grupos de linhas individuais dentro do arquivo Parquet são compactados usando Snappy, mas a estrutura de nível superior do arquivo permanece descompactada. Nesse caso, o arquivo pode ser lido em paralelo, pois cada solicitação do Redshift Spectrum consegue ler e processar grupos de linhas individuais do Amazon S3.</p>

       
         <h2 id="c-spectrum-data-files-encryption">Encriptação do Redshift Spectrum </h2>

      <p>O Redshift Spectrum descriptografa os arquivos de dados de forma transparente usando as seguintes opções de criptografia:</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Criptografia no lado do servidor (SSE-S3) usando uma chave de criptografia AES-256 gerenciada pelo Amazon S3.</p>
         </li><li class="listitem">
            <p>Criptografia no lado do servidor com chaves gerenciadas pelo AWS Key Management Service (SSE-KMS). </p>
         </li></ul></div>
         <p>O Redshift Spectrum não é compatível com criptografia no lado do cliente no Amazon S3. Para obter mais informações sobre criptografia no lado do servidor, consulte <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/serv-side-encryption.html">Proteger dados usando criptografia no lado do servidor</a> no <em>Guia do usuário do Amazon Simple Storage Service</em>.</p>
      <p>O Amazon Redshift usa o processamento paralelo maciço (MPP) para executar com rapidez consultas complexas que operam com grandes quantidades de dados. O Redshift Spectrum amplia o mesmo princípio para as consultas com dados externos, usando várias instâncias do Redshift Spectrum para fazer a varredura de arquivos. Coloque os arquivos em uma pasta separada para cada tabela. </p>
      <p>Você pode otimizar os dados para o processamento em paralelo executando as seguintes ações:</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Se o formato de arquivo ou a compactação não oferecer suporte à leitura em paralelo, divida arquivos grandes em vários arquivos menores. Recomendamos o uso de tamanhos de arquivo entre 64 MB e 1 GB.</p>
         </li><li class="listitem">
            <p>Mantenha todos os arquivos com aproximadamente o mesmo tamanho. Se alguns arquivos forem muito maiores do que os outros, o Redshift Spectrum não poderá distribuir o workload uniformemente. </p>
         </li></ul></div>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./spectrum-lake-formation.html">Usar Redshift Spectrum com Lake Formation</div><div id="next" class="next-link" accesskey="n" href="./c-spectrum-external-schemas.html">Criação de esquemas externos</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>