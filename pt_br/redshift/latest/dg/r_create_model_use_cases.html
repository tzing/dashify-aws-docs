<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Casos de uso - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_create_model_use_cases" /><meta name="default_state" content="r_create_model_use_cases" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_create_model_use_cases.html" /><meta name="description" content="Informações sobre os vários casos de CREATE MODEL." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_create_model_use_cases.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_create_model_use_cases.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_create_model_use_cases.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_create_model_use_cases.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_create_model_use_cases.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_create_model_use_cases.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_create_model_use_cases.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_create_model_use_cases.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_create_model_use_cases.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_create_model_use_cases.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_create_model_use_cases.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_create_model_use_cases.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_create_model_use_cases.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_create_model_use_cases.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_create_model_use_cases.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_create_model_use_cases.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_create_model_use_cases.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_create_model_use_cases.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_create_model_use_cases.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_create_model_use_cases.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_create_model_use_cases.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_create_model_use_cases.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Casos de uso" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Casos de uso - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_create_model_use_cases" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_create_model_use_cases.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_create_model_use_cases.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_create_model_use_cases.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referência SQL",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Comandos SQL",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE MODEL",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_MODEL.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Casos de uso",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_MODEL.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_create_model_use_cases" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#r_simple_create_model">CREATE MODEL simples </a><a href="#r_user_guidance_create_model">CREATE MODEL com orientação do usuário</a><a href="#r_auto_off_create_model">Modelos CREATE XGBoost com AUTO OFF</a><a href="#r_byom_create_model">Traga seu próprio modelo (BYOM): inferência local</a><a href="#r_byom_create_model_remote">Traga seu próprio modelo (BYOM): inferência remota</a><a href="#r_k-means_create_model">CREATE MODEL com K-MEANS</a><a href="#r_forecast_model">CREATE MODEL com o Forecast</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_create_model_use_cases">Casos de uso</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Os casos de uso a seguir demonstram como usar CREATE MODEL para atender às suas necessidades.</p>
        <h2 id="r_simple_create_model">CREATE MODEL simples</h2>
        <p>A seguir o resumo das opções básicas da sintaxe CREATE MODEL.</p>

        

         
            <h3 id="r_simple-create-model-synposis">Sintaxe simples CREATE MODEL</h3>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE MODEL <em>model_name</em>
    FROM <span>{</span> <em>table_name</em> | ( <em>select_query</em> ) }
    TARGET <em>column_name</em>
    FUNCTION <em>prediction_function_name</em>
    IAM_ROLE <span>{</span> default }
    SETTINGS (
      S3_BUCKET <em>'bucket'</em>,
      [ MAX_CELLS integer ]
    )</code></pre>
         

         
            <h3 id="r_simple-create-model-parameters">Parâmetros simples CREATE MODEL</h3>
            <div class="variablelist">
                 
                 
                 
                 
                 
                 
                 
            <dl>
                    <dt><span class="term"> <em>model_name</em> </span></dt>
                    <dd>
                        <p>O nome do modelo. O nome do modelo em um esquema deve ser exclusivo.</p>
                    </dd>
                 
                    <dt><span class="term">FROM <span>{</span> <em>table_name</em> | ( <em>select_query</em> ) }</span></dt>
                    <dd>
                        <p>O table_name ou a consulta que especifica os dados de treinamento. Eles podem ser uma tabela existente no sistema ou uma consulta SELECT compatível com o Amazon RedShift entre parênteses, ou seja, (). Deve haver pelo menos duas colunas no resultado da consulta. </p>
                    </dd>
                 
                    <dt><span class="term">TARGET <em>column_name</em></span></dt>
                    <dd>
                        <p>O nome da coluna que se torna o alvo da previsão. A coluna deve existir na cláusula FROM. </p>
                    </dd>
                 
                    <dt><span class="term">FUNCTION <em>prediction_function_name</em> </span></dt>
                    <dd>
                        <p>Um valor que especifica o nome da função de Machine Learning do Amazon Redshift a ser gerada pelo CREATE MODEL e usada para fazer previsões usando esse modelo. A função é criada no mesmo esquema que o objeto modelo e pode ser sobrecarregada.</p>
                        <p>O Machine Learning do Amazon Redshift oferece suporte a modelos, como modelos Xtreme Gradient Boosted tree (XGBoost) para regressão e classificação.</p>
                    </dd>
                 
                   <dt><span class="term">IAM_ROLE <span>{</span> default | 'arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;' }</span></dt>
                    <dd>
                        <p> Use a palavra-chave padrão para que o Amazon Redshift use a função do IAM definida como padrão e associada ao cluster quando o comando CREAT MODEL for executado. Como alternativa, você pode especificar o ARN de um perfil do IAM para usar esse perfil.</p>
                    </dd>
                 
                    <dt><span class="term"> <em>S3_BUCKET <em>'bucket'</em></em> </span></dt>
                    <dd>
                        <p>O nome do bucket do Amazon S3 que você criou anteriormente usou para compartilhar dados de treinamento e artefatos entre o Amazon Redshift e o SageMaker. O Amazon Redshift cria uma subpasta neste bucket antes do descarregamento dos dados de treinamento. Quando o treinamento for concluído, o Amazon Redshift exclui a subpasta criada e seu conteúdo. </p>
                    </dd>
                 
                    <dt><span class="term">Inteiro MAX_CELLS </span></dt>
                    <dd>
                        <p>O número máximo de células a serem exportadas da cláusula FROM. O padrão é 1.000.000. </p>
                        <p>O número de células é o produto do número de linhas nos dados de treinamento (produzidos pela tabela ou consulta da cláusula FROM) vezes o número de colunas. Se o número de células nos dados de treinamento for maior do que o especificado pelo parâmetro max_cells, CREATE MODEL baixará os dados de treinamento da cláusula FROM para reduzir o tamanho do conjunto de treinamento abaixo de MAX_CELLS. Permitir conjuntos de dados de treinamento maiores pode produzir maior precisão, mas também pode significar que o modelo leva mais tempo para treinar e custa mais.</p>
                        <p>Para obter informações sobre os custos de uso do Amazon Redshift, consulte <a href="./cost.html">Custos para usar o Amazon Redshift ML</a>.</p>
                        <p>Para obter mais informações sobre os custos associados a vários números de celular e detalhes de avaliação gratuita, consulte <a href="https://aws.amazon.com/redshift/pricing" rel="noopener noreferrer" target="_blank"><span>Preços do Amazon Redshift</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                    </dd>
                </dl></div>
         
     
        <h2 id="r_user_guidance_create_model">CREATE MODEL com orientação do usuário</h2>
        <p>A seguir, você pode encontrar uma descrição das opções para CREATE MODEL, além das opções descritas em <a href="#r_simple_create_model">CREATE MODEL simples</a>.</p>
        <p>Por padrão, CREATE MODEL procura a melhor combinação de pré-processamento e modelo para seu conjunto de dados específico. Você pode querer controle adicional ou introduzir conhecimento de domínio adicional (como tipo de problema ou objetivo) sobre seu modelo. Em um cenário de rotatividade do cliente, se o resultado “cliente não está ativo” for raro, o objetivo de F1 geralmente é preferido ao objetivo de precisão. Como os modelos de alta precisão podem prever “o cliente está ativo” o tempo todo, isso resulta em alta precisão, mas pouco valor empresarial. Para obter informações sobre o objetivo F1, consulte <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_AutoMLJobObjective.html">AutoMLJobObjective</a> na <em>Referência da API do Amazon SageMaker</em>.</p>
        <p>Em seguida, o CREATE MODEL segue suas sugestões sobre os aspectos especificados, como o objetivo. Ao mesmo tempo, o CREATE MODEL descobre automaticamente os melhores pré-processadores e os melhores hiperparâmetros. </p>


         
            <h3 id="r_user_guidance-create-model-synposis">CREATE MODEL com sintaxe de orientação do usuário</h3>
            <p>CREATE MODEL oferece mais flexibilidade nos aspectos que você pode especificar e nos aspectos que o Amazon Redshift detecta automaticamente.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE MODEL <em>model_name</em>
    FROM <span>{</span> <em>table_name</em> | ( <em>select_statement</em> ) }
    TARGET <em>column_name</em>
    FUNCTION <em>function_name</em>
    IAM_ROLE <span>{</span> default }
    [ MODEL_TYPE <span>{</span> XGBOOST | MLP | LINEAR_LEARNER} ]
    [ PROBLEM_TYPE ( REGRESSION | BINARY_CLASSIFICATION | MULTICLASS_CLASSIFICATION ) ]
    [ OBJECTIVE ( 'MSE' | 'Accuracy' | 'F1' | 'F1Macro' | 'AUC') ]
    SETTINGS (
      S3_BUCKET 'bucket', |
      S3_GARBAGE_COLLECT <span>{</span> ON | OFF }, |
      KMS_KEY_ID 'kms_key_id', |
      MAX_CELLS integer, |
      MAX_RUNTIME integer (, ...)
    )   </code></pre>
         

         
            <h3 id="r_user_guidance-create-model-parameters">CREATE MODEL com parâmetros de orientação do usuário</h3>
            <div class="variablelist">
                 
                 
                 
                 
                 
                 
                 

                 
            <dl>
                    <dt><span class="term"> <em>MODEL_TYPE <span>{</span> XGBOOST | MLP | LINEAR_LEARNER }</em> </span></dt>
                    <dd>
                        <p>(Opcional) Especifica o tipo de modelo. Você pode especificar se deseja treinar um modelo de um tipo específico, como XGBoost, perceptron multicamada (MLP) ou Linear Learner, que são todos algoritmos compatíveis com o Amazon SageMaker Autopilot. Se você não especificar o parâmetro, todos os tipos de modelo aceitos serão pesquisados durante o treinamento para obter o melhor modelo.</p>
                    </dd>
                 
                    <dt><span class="term"> <em>PROBLEM_TYPE ( REGRESSION | BINARY_CLASSIFICATION | MULTICLASS_CLASSIFICATION )</em> </span></dt>
                    <dd>
                        <p>(Opcional) Especifica o tipo de problema. Se você souber o tipo de problema, pode restringir o Amazon Redshift a apenas pesquisar o melhor modelo desse tipo de modelo específico. Se você não especificar esse parâmetro, um tipo de problema será descoberto durante o treinamento com base em seus dados.</p>
                    </dd>
                 
                    <dt><span class="term">OBJECTIVE ( 'MSE' | 'Accuracy' | 'F1' | 'F1Macro' | 'AUC')</span></dt>
                    <dd>
                        <p>(Opcional) Especifica o nome da métrica objetiva usada para medir a qualidade preditiva de um sistema de Machine Learning. Essa métrica é otimizada durante o treinamento para fornecer a melhor estimativa dos valores dos parâmetros do modelo a partir dos dados. Se você não especificar uma métrica explicitamente, o comportamento padrão é usar automaticamente MSE: para regressão, F1: para classificação binária, Precisão: para classificação multiclass. Para obter informações sobre o objetivos, consulte <a href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_AutoMLJobObjective.html">AutoMLJobObjective</a> na <em>Referência da API do Amazon SageMaker</em>.</p>
                    </dd>
                 
                    <dt><span class="term">Inteiro MAX_CELLS </span></dt>
                    <dd>
                        <p>(Opcional) Especifica o número de células nos dados de treinamento. Esse valor é o produto do número de registros (na consulta de treinamento ou tabela) vezes o número de colunas. O padrão é 1.000.000.</p>
                    </dd>
                 
                    <dt><span class="term">Inteiro MAX_RUNTIME </span></dt>
                    <dd>
                        <p>(Opcional) Especifica a quantidade máxima de tempo para treinar. Os trabalhos de treinamento geralmente concluem mais cedo dependendo do tamanho do conjunto de dados. Isso especifica a quantidade máxima de tempo em que o treinamento deve levar. The default is 5.400 (90 minutos).</p>
                    </dd>
                 
                    <dt><span class="term">S3_GARBAGE_COLLECT <span>{</span> ON | OFF }</span></dt>
                    <dd>
                        <p>(Opcional) Especifica se o Amazon Redshift executa a coleta de lixo nos conjuntos de dados resultantes usados nos modelos e para treiná-los. Se definido como OFF, os conjuntos de dados resultantes usados para treinar modelos e os modelos permanecem no Amazon S3 e podem ser usados para outros fins. Se definido como ON, o Amazon Redshift excluirá os artefatos no Amazon S3 após a conclusão do treinamento. O padrão é ON.</p>
                    </dd>
                 
                    <dt><span class="term">KMS_KEY_ID 'kms_key_id'</span></dt>
                    <dd>
                        <p>(Opcional) Especifica se o Amazon Redshift usa criptografia do lado do servidor com uma chave AWS KMS para proteger dados em repouso. Os dados em trânsito são protegidos com Secure Sockets Layer (SSL). </p>
                    </dd>
                 
                    <dt><span class="term"> <em>PREPROCESSORS 'string' </em> </span></dt>
                    <dd>
                        <p>(Opcional) Especifica certas combinações de pré-processadores para determinados conjuntos de colunas. O formato é uma lista de columnSets e as transformações apropriadas a serem aplicadas a cada conjunto de colunas. O Amazon Redshift aplica todos os transformadores em uma lista de transformadores específica a todas as colunas no ColumnSet correspondente. Por exemplo, para aplicar OneHotEncoder com Imputer às colunas t1 e t2, use o comando de exemplo a seguir.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MODEL customer_churn
FROM customer_data
TARGET 'Churn'
FUNCTION predict_churn
IAM_ROLE <span>{</span> default | 'arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;' }
PROBLEM_TYPE BINARY_CLASSIFICATION
OBJECTIVE 'F1'
PREPROCESSORS '[
...
<span>{</span>"ColumnSet": [
    "t1",
    "t2"
  ],
  "Transformers": [
    "OneHotEncoder",
    "Imputer"
  ]
},
<span>{</span>"ColumnSet": [
    "t3"
  ],
  "Transformers": [
    "OneHotEncoder"
  ]
},
<span>{</span>"ColumnSet": [
    "temp"
  ],
  "Transformers": [
    "Imputer",
    "NumericPassthrough"
  ]
}
]'
SETTINGS (
S3_BUCKET 'bucket'
)</code></pre></dd></dl></div>
            <p>O Amazon Redshift oferece suporte aos seguintes transformadores:</p>
            <div class="itemizedlist">

                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p>OneHotEncoder — Normalmente usado para codificar um valor discreto em um vetor binário com um valor diferente de zero. Este transformador é adequado para muitos modelos de machine learning. </p></li><li class="listitem"><p>OrdinalEncoder — Codifica valores discretos em um único inteiro. Esse transformador é adequado para determinados modelos de machine learning, como MLP e Linear Learner. </p></li><li class="listitem"><p>NumericPassThrough — Passa a entrada como está no modelo.</p></li><li class="listitem"><p>Imputer — Preenche valores ausentes e valores não numéricos (NaN).</p></li><li class="listitem"><p>ImputerWithIndicator — Preenche valores ausentes e valores NaN. Este transformador também cria um indicador de se algum valor estava faltando e preenchido.</p></li><li class="listitem"><p>Normalizer — Normaliza valores, o que pode melhorar a performance de muitos algoritmos de Machine Learning.</p></li><li class="listitem"><p>DateTimeVectorizer — Cria uma incorporação vetorial, representando uma coluna do tipo de dados datetime que pode ser usada em modelos de Machine Learning.</p></li><li class="listitem"><p>PCA — Projeta os dados em um espaço dimensional mais baixo para reduzir o número de recursos e, ao mesmo tempo, manter o máximo de informações possível.</p></li><li class="listitem"><p>StandardScaler: padroniza os recursos removendo a média e a escalabilidade para a variância da unidade. </p></li><li class="listitem"><p>minMax: transforma recursos escalando cada recurso para um determinado intervalo.</p></li></ul></div>

            <p>O Amazon Redshift ML armazena os transformadores treinados e os aplica automaticamente como parte da consulta de previsão. Você não precisa especificá-los ao gerar previsões do seu modelo. </p>
         
     
        <h2 id="r_auto_off_create_model">Modelos CREATE XGBoost com AUTO OFF</h2>
        <p>O AUTO OFF CREATE MODEL tem geralmente objetivos diferentes do padrão CREATE MODEL.</p>
        <p>Como um usuário avançado que já conhece o tipo de modelo que você deseja e hiperparâmetros para usar ao treinar esses modelos, você pode usar CREATE MODEL com AUTO OFF para desativar a descoberta automática CREATE MODEL de pré-processadores e hiperparâmetros. Para fazer isso, especifique explicitamente o tipo de modelo. O XGBoost é atualmente o único tipo de modelo compatível quando AUTO é definido como OFF. Você pode especificar hiperparâmetros. O Amazon Redshift usa valores padrão para quaisquer hiperparâmetros especificados. </p>

         
            <h3 id="r_auto_off-create-model-synposis">Modelos CREATE XGBoost com sintaxe AUTO OFF</h3>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE MODEL model_name
    FROM <span>{</span> <em>table_name</em> | (<em>select_statement</em> ) }
    TARGET <em>column_name</em>
    FUNCTION <em>function_name</em>
    IAM_ROLE <span>{</span> default }
    AUTO OFF
    MODEL_TYPE XGBOOST
    OBJECTIVE <span>{</span> 'reg:squarederror' | 'reg:squaredlogerror' | 'reg:logistic' |
                'reg:pseudohubererror' | 'reg:tweedie' | 'binary:logistic' | 'binary:hinge' |
                'multi:softmax' | 'rank:pairwise' | 'rank:ndcg' }
    HYPERPARAMETERS DEFAULT EXCEPT (
        NUM_ROUND '10',
        ETA '0.2',
        NUM_CLASS '10',
        (, ...)
    )
    PREPROCESSORS 'none'
    SETTINGS (
      S3_BUCKET 'bucket', |
      S3_GARBAGE_COLLECT <span>{</span> ON | OFF }, |
      KMS_KEY_ID 'kms_key_id', |
      MAX_CELLS integer, |
      MAX_RUNTIME integer (, ...)
    )   </code></pre>
         

         
            <h3 id="r_auto_off-create-model-parameters">Modelos CREATE XGBoost com parâmetros AUTO OFF</h3>
            <div class="variablelist">
                 
                 
                 
                
                 
            <dl>
                    <dt><span class="term"> <em>AUTO OFF</em> </span></dt>
                    <dd>
                        <p>Desativa a descoberta automática de pré-processador, algoritmo e seleção de hiper-parâmetros do CREATE MODEL.</p>
                    </dd>
                 
                    <dt><span class="term">MODEL_TYPE XGBOOST</span></dt>
                    <dd>
                        <p>Especifica o uso do XGBOOST para treinar o modelo. </p>
                    </dd>
                 
                    <dt><span class="term">OBJECTIVE str</span></dt>
                    <dd>
                        <p>Especifica um objetivo reconhecido pelo algoritmo. O Amazon Redshift oferece suporte a reg:squarederror, reg:squaredlogerror, reg:logistic, reg:pseudohubererror, reg:tweedie, binary:logistic, binary:hinge e multi:softmax. Para obter mais informações sobre esses objetivos, consulte <a href="https://xgboost.readthedocs.io/en/latest/parameter.html#learning-task-parameters" rel="noopener noreferrer" target="_blank"><span>Aprendizado de parâmetros de tarefa</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> na documentação do XGBoost.</p>
                    </dd>
                 
                    <dt><span class="term">HYPERPARAMETERS <span>{</span> DEFAULT | DEFAULT EXCEPT ( key ‘value’ (,..) ) }</span></dt>
                    <dd>
                        <p>Especifica se os parâmetros padrão do XGBoost são usados ou substituídos por valores especificados pelo usuário. Os valores devem ser colocados entre aspas simples. A seguir estão exemplos de parâmetros para XGBoost e seus padrões.</p>
                        <div class="table-container"><div class="table-contents"><table id="w319aac47b9c93c17b9b9b3b7b3b3"><thead>
                                    <tr>
                                        <th>Nome do parâmetro</th>
                                        <th>Valor do parâmetro </th>
                                        <th>Valor padrão</th>
                                        <th>Observações</th>
                                    </tr>
                                </thead>
                                    <tr>
                                        <td tabindex="-1">
                                            <p>num_class</p>
                                        </td>
                                        <td tabindex="-1">Inteiro</td>
                                        <td tabindex="-1">
                                            <p>Necessário para a classificação Multiclass.</p>
                                        </td>
                                        <td tabindex="-1">N/D</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">
                                            <p>num_round</p>
                                        </td>
                                        <td tabindex="-1">Inteiro</td>
                                        <td tabindex="-1">
                                            <p>100</p>
                                        </td>
                                        <td tabindex="-1">N/D</td>
                                    </tr>
                                    
                                    <tr>
                                        <td tabindex="-1">
                                            <p>tree_method</p>
                                        </td>
                                        <td tabindex="-1">String</td>
                                        <td tabindex="-1">Auto</td>
                                        <td tabindex="-1">N/D</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">
                                            <p>max_depth</p>
                                        </td>
                                        <td tabindex="-1">Inteiro</td>
                                        <td tabindex="-1">6</td>
                                        <td tabindex="-1">[0, 10]</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">min_child_weight</td>
                                        <td tabindex="-1">Float</td>
                                        <td tabindex="-1">1</td>
                                        <td tabindex="-1">MinValue: 0, MaxValue: 120</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">subsample</td>
                                        <td tabindex="-1">Float</td>
                                        <td tabindex="-1">1</td>
                                        <td tabindex="-1">MinValue: 0.5, MaxValue: 1</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">gamma</td>
                                        <td tabindex="-1">Float</td>
                                        <td tabindex="-1">0</td>
                                        <td tabindex="-1">MinValue: 0, MaxValue: 5</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">alpha</td>
                                        <td tabindex="-1">Float</td>
                                        <td tabindex="-1">0</td>
                                        <td tabindex="-1">MinValue: 0, MaxValue: 1000</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">eta</td>
                                        <td tabindex="-1">Float</td>
                                        <td tabindex="-1">0.3</td>
                                        <td tabindex="-1">MinValue: 0.1, MaxValue: 0.5</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">colsample_byleve</td>
                                        <td tabindex="-1">Float</td>
                                        <td tabindex="-1">1</td>
                                        <td tabindex="-1">MinValue: 0.1, MaxValue: 1</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">colsample_bynode</td>
                                        <td tabindex="-1">Float</td>
                                        <td tabindex="-1">1</td>
                                        <td tabindex="-1">MinValue: 0.1, MaxValue: 1</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">colsample_bytree</td>
                                        <td tabindex="-1">Float</td>
                                        <td tabindex="-1">1</td>
                                        <td tabindex="-1">MinValue: 0.5, MaxValue: 1</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">lambda</td>
                                        <td tabindex="-1">Float</td>
                                        <td tabindex="-1">1</td>
                                        <td tabindex="-1">MinValue: 0, MaxValue: 1000</td>
                                    </tr>
                                    <tr>
                                        <td tabindex="-1">max_delta_step</td>
                                        <td tabindex="-1">Inteiro</td>
                                        <td tabindex="-1">0</td>
                                        <td tabindex="-1">[0, 10]</td>
                                    </tr>
                                </table></div></div>
                    </dd>
                </dl></div>

            <p>O exemplo a seguir prepara dados para XGBoost.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">DROP TABLE IF EXISTS abalone_xgb;

    CREATE TABLE abalone_xgb (
    length_val float,
    diameter float,
    height float,
    whole_weight float,
    shucked_weight float,
    viscera_weight float,
    shell_weight float,
    rings int,
    record_number int);

    COPY abalone_xgb
    FROM 's3://redshift-downloads/redshift-ml/abalone_xg/'
    REGION 'us-east-1'
    IAM_ROLE default
    IGNOREHEADER 1 CSV;</code></pre>
            <p>O exemplo a seguir cria um modelo XGBoost com opções avançadas especificadas, como MODEL_TYPE, OBJETIVE e PREPROCESSORS.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">DROP MODEL abalone_xgboost_multi_predict_age;

    CREATE MODEL abalone_xgboost_multi_predict_age
    FROM ( SELECT length_val,
                  diameter,
                  height,
                  whole_weight,
                  shucked_weight,
                  viscera_weight,
                  shell_weight,
                  rings
   FROM abalone_xgb WHERE record_number &lt; 2500 )
    TARGET rings FUNCTION ml_fn_abalone_xgboost_multi_predict_age
    IAM_ROLE default
    AUTO OFF
    MODEL_TYPE XGBOOST
    OBJECTIVE 'multi:softmax'
    PREPROCESSORS 'none'
    HYPERPARAMETERS DEFAULT EXCEPT (NUM_ROUND '100', NUM_CLASS '30')
    SETTINGS (S3_BUCKET 'your-bucket');</code></pre>
            <p>O exemplo a seguir usa uma consulta de inferência para prever a idade do peixe com um número de registro maior que 2.500. Ele usa a função ml_fn_abalone_xgboost_multi_predict_age criada a partir do comando acima. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select ml_fn_abalone_xgboost_multi_predict_age(length_val,
                                                   diameter,
                                                   height,
                                                   whole_weight,
                                                   shucked_weight,
                                                   viscera_weight,
                                                   shell_weight)+1.5 as age
from abalone_xgb where record_number &gt; 2500;</code></pre>
         
     
        <h2 id="r_byom_create_model">Traga seu próprio modelo (BYOM): inferência local</h2>
        <p>O Amazon Redshift ML é compatível com o uso de BYOM (traga seu próprio modelo) para inferência local.</p>
        <p>A seguir o resumo das opções básicas da sintaxe CREATE MODEL para BYOM. Você pode usar um modelo treinado fora do Amazon Redshift com o Amazon SageMaker para inferência no banco de dados localmente no Amazon Redshift.</p>

         
            <h3 id="r_local-create-model">Sintaxe CREATE MODEL para inferência local </h3>
            <p>A seguir é descrito a sintaxe CREATE MODEL para inferência local.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE MODEL <em>model_name</em>
    FROM (<em>'job_name'</em> | <em>'s3_path'</em> )
    FUNCTION <em>function_name</em> ( <em>data_type [, ...]</em> )
    RETURNS <em>data_type</em>
    IAM_ROLE <span>{</span> default }
    [ SETTINGS (
      S3_BUCKET <em>'bucket'</em>, | --required
      KMS_KEY_ID <em>'kms_string'</em>) --optional
    ];</code></pre>
            <p>Atualmente, o Amazon Redshift comporta apenas modelos XGBoost, MLP e Linear Learner pré-treinados para BYOM. Você pode importar o SageMaker Autopilot e modelos treinados diretamente no Amazon SageMaker para inferência local usando esse caminho. </p>

             
                <h4 id="r_local-create-model-parameters">Parâmetros CREATE MODEL para inferência local</h4>
                <div class="variablelist">
                     
                     
                     
                     
                     
                     
                <dl>
                        <dt><span class="term"> <em>model_name</em> </span></dt>
                        <dd>
                            <p>O nome do modelo. O nome do modelo em um esquema deve ser exclusivo.</p>
                        </dd>
                     
                        <dt><span class="term">FROM (<em>'job_name'</em> | <em>'s3_path'</em> )</span></dt>
                        <dd>
                            <p>O <em>job_name</em> usa um nome de trabalho do Amazon SageMaker como entrada. O nome de trabalho pode ser um nome de trabalho de treinamento do Amazon SageMaker ou um nome de trabalho do Amazon SageMaker Autopilot. O trabalho deve ser criado na mesma conta da AWS que possui o cluster do Amazon Redshift. Para encontrar o nome do trabalho, inicie o Amazon SageMaker. No menu suspenso <b>Training</b> (Treinamento), escolha <b>Training jobs</b> (Trabalhos de treinamento).</p>
                            <p>O <em>'s3_path'</em> especifica o local S3 do arquivo de artefatos de modelo .tar.gz que deve ser usado ao criar o modelo.</p>
                        </dd>
                     
                        <dt><span class="term">FUNCTION <em>function_name</em> ( <em>data_type</em> [, ...] )</span></dt>
                        <dd>
                            <p>O nome da função a ser criada e os tipos de dados dos argumentos de entrada. Você pode fornecer um nome de esquema.</p>
                        </dd>
                     
                        <dt><span class="term">RETURNS <em>tipo_dados</em></span></dt>
                        <dd>
                            <p>Tipo de dados do valor retornado pela função.</p>
                        </dd>
                     
                       <dt><span class="term">IAM_ROLE <span>{</span> default | 'arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;'}</span></dt>
                        <dd>
                            <p> Use a palavra-chave padrão para que o Amazon Redshift use a função do IAM definida como padrão e associada ao cluster quando o comando CREATE MODEL for executado.</p>
                            <p>Use o nome do recurso da Amazon (ARN) de uma função do IAM que seu cluster usa para autenticação e autorização. </p>
                        </dd>
                     
                        <dt><span class="term">SETTINGS ( S3_BUCKET <em>'bucket'</em>, | KMS_KEY_ID <em>'kms_string'</em>)</span></dt>
                        <dd>
                            <p>A cláusula S3_BUCKET especifica o local do Amazon S3 usado para armazenar resultados intermediários.</p>
                            <p>(Opcional) A cláusula KMS_KEY_ID especifica se o Amazon Redshift usa criptografia do lado do servidor com uma chave do AWS KMS para proteger dados em repouso. Os dados em trânsito são protegidos com Secure Sockets Layer (SSL).</p>
                            <p>Para obter mais informações, consulte <a href="#r_user_guidance_create_model">CREATE MODEL com orientação do usuário</a>.</p>
                        </dd>
                    </dl></div>

             

             
                <h4 id="r_local-create-model-example">CREATE MODEL para exemplo de inferências locais</h4>
                <p>O exemplo a seguir cria um modelo que foi treinado anteriormente no Amazon SageMaker, fora do Amazon Redshift. Como o tipo de modelo é compatível com o Amazon Redshift ML para inferência local, o seguinte CREATE MODEL cria uma função que pode ser usada localmente no Amazon Redshift. Você pode fornecer um nome de trabalho de treinamento do SageMaker.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE MODEL customer_churn
    FROM 'training-job-customer-churn-v4'
    FUNCTION customer_churn_predict (varchar, int, float, float)
    RETURNS int
    IAM_ROLE default
    SETTINGS (S3_BUCKET 'your-bucket');</code></pre>
                <p>Depois que o modelo é criado, você pode usar a função <em>customer_churn_predict</em> com os tipos de argumento especificados para fazer previsões.</p>
             
         
     
          <h2 id="r_byom_create_model_remote">Traga seu próprio modelo (BYOM): inferência remota</h2>
          <p>O Amazon Redshift ML também é compatível com o uso de BYOM (traga seu próprio modelo) para inferência remota.</p>
          <p>A seguir o resumo das opções básicas da sintaxe CREATE MODEL para BYOM.</p>
          <div class="awsdocs-note awsdocs-sticky-note awsdocs-warning"><div class="awsdocs-note-icon"><awsui-icon name="status-warning" variant="error"></awsui-icon></div><div class="awsdocs-note-text"><p><em><b>Esta é uma documentação de pré-lançamento do tipo de dados SUPER para entrada para modelos BYOM no Amazon Redshift ML, que está na versão de visualização. A documentação e o recurso estão sujeitos a alterações. Recomendamos que você use esse recurso apenas com clusters de teste e não em ambientes de produção. Para termos e condições de visualização, consulte <em>Beta and Previews</em> em <a href="https://aws.amazon.com/service-terms/" rel="noopener noreferrer" target="_blank"><span>AWS Service Terms</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </b></em> </p></div></div>
          
          <p>A especificação para usar o tipo de dados SUPER como dados de entrada e o tipo de dados retornado indica que você deseja criar um grande modelo de linguagem (LLM) hospedado no Amazon SageMaker JumpStart. Atualmente, a criação de LLMs só está disponível como um recurso de visualização. Essa visualização está disponível nas seguintes Regiões da AWS:</p>
          <div class="itemizedlist">
              
              
              
              
              
          <ul class="itemizedlist"><li class="listitem"><p>Leste dos EUA (Ohio) (us-east-2)</p></li><li class="listitem"><p>Leste dos EUA (Norte da Virgínia) (us-east-1)</p></li><li class="listitem"><p>Ásia Pacific (Tóquio) (ap-northeast-1)</p></li><li class="listitem"><p>Europa (Irlanda) (eu-west-1)</p></li><li class="listitem"><p>UE (Estocolmo) (eu-north-1)</p></li></ul></div>
          <p>Você pode criar um cluster do Amazon Redshift em <b>Preview</b> (Pré-visualização) para testar novos recursos do Amazon Redshift. Você não pode usar esses recursos em produção nem mover seu cluster de <b>Preview</b> (Pré-visualização) para um cluster de produção ou um cluster em outra faixa. Para conferir os termos e condições da pré-visualização, consulte <em>Betas e pré-visualizações</em> nos <a href="https://aws.amazon.com/service-terms/" rel="noopener noreferrer" target="_blank"><span>Termos de serviços da AWS</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>            
            <div class="procedure"><h6>Como criar um cluster em <b>Preview</b> (pré-visualização)</h6><ol><li><p>Faça login no AWS Management Console e abra o console do Amazon Redshift em <a href="https://console.aws.amazon.com/redshift/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/redshift/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p> </li><li><p>No menu de navegação, <b>Provisioned clusters dashboard</b> (Painel de clusters provisionados) e <b>Clusters</b>. Os clusters de sua conta na Região da AWS atual são listados. Um subconjunto de propriedades de cada cluster é exibido nas colunas na lista.</p></li><li><p>Um banner é exibido na página da lista <b>Clusters</b> que apresenta a pré-visualização. Escolha o botão <b>Create preview cluster</b> (Criar cluster de pré-visualização) para abrir a página de criação de cluster.</p></li><li><p>Insira as propriedades do cluster. Escolha a <b>Preview track</b> (Faixa de pré-visualização) que contém os recursos que deseja testar. Recomendamos inserir um nome que indique que o cluster está em uma faixa de pré-visualização. Escolha opções para o cluster, incluindo opções rotuladas como <b>-preview</b> (-pré-visualização), para os recursos que deseja testar. Para obter informações gerais sobre a criação de clusters, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-clusters-console.html#create-cluster">Criar um cluster</a> no <em>Guia de gerenciamento do Amazon Redshift</em>.</p></li><li><p>Escolha <b>Criar cluster</b> para criar um cluster em pré-visualização.</p>
                       <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>A faixa <code class="code">preview_2023</code> é a faixa de pré-visualização mais recente disponível. Essa faixa só dá suporte à criação de clusters com tipos de nó RA3. Os tipos de nó DC2 e DS2 e qualquer tipo de nó mais antigo não são compatíveis.</p></div></div></li><li><p>Quando seu cluster de pré-visualização estiver disponível, use seu cliente SQL para carregar e consultar dados.</p></li></ol></div>
          
          <p>Você também pode criar um grupo de trabalho de visualização para criar um LLM. Você não pode usar esses recursos em produção nem mover o grupo de trabalho para outro grupo de trabalho. Para termos e condições de visualização, consulte Beta and Previews em <a href="https://aws.amazon.com/service-terms/" rel="noopener noreferrer" target="_blank"><span>Termos de serviço da AWS</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Para obter instruções sobre como criar um grupo de trabalho de visualização, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-workgroup-preview.html">Creating a preview workgroup</a>.</p>
            
             
          
         
            <h3 id="r_remote-create-model">Sintaxe CREATE MODEL para inferência remota </h3>
            <p>A seguir é descrito a sintaxe CREATE MODEL para inferência remota.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE MODEL <em>model_name </em>
    FUNCTION <em>function_name</em> ( <em>data_type</em> [, ...] )
    RETURNS <em>data_type</em>
    SAGEMAKER <em>'endpoint_name'</em>[:<em>'model_name'</em>]
    IAM_ROLE <span>{</span> default | 'arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;' }</code></pre>


             
                <h4 id="r_remote-create-model-parameters">Parâmetros CREATE MODEL para inferência remota</h4>
                <div class="variablelist">
                     
                     
                     
                     
                     
                <dl>
                        <dt><span class="term"> <em>model_name</em> </span></dt>
                        <dd>
                            <p>O nome do modelo. O nome do modelo em um esquema deve ser exclusivo.</p>
                        </dd>
                     
                        <dt><span class="term">FUNCTION <em>fn_name</em> ( [<em>data_type</em>] [, ...] )</span></dt>
                        <dd>
                           <p>O nome da função e os tipos de dados dos argumentos de entrada. Consulte <a href="https://docs.aws.amazon.com/redshift/latest/dg/c_Supported_data_types.html">Tipos de dados</a> para obter todos os tipos de dados compatíveis. <code class="code">Geography</code>,<code class="code">geometry</code> e <code class="code">hllsketch</code> não são compatíveis. A especificação para usar o tipo de dados SUPER como dados de entrada e o tipo de dados retornado indica que você deseja criar um grande modelo de linguagem (LLM) hospedado no Amazon SageMaker JumpStart.</p>
                           <p>Como alternativa, é possível especificar o uso apenas do tipo de dados SUPER como os dados de entrada sem também usá-lo como o tipo de dados exibido. O uso do tipo de dados SUPER como entrada está disponível somente como um recurso de visualização.</p>
                           <p>Você também pode oferecer um nome de esquema, em vez de um nome da função.</p>
                        </dd>
                     
                        <dt><span class="term">RETURNS <em>tipo_dados</em></span></dt>
                        <dd>
                            <p>Tipo de dados do valor retornado pela função. Consulte <a href="https://docs.aws.amazon.com/redshift/latest/dg/c_Supported_data_types.html">Tipos de dados</a> para obter todos os tipos de dados compatíveis. <code class="code">Geography</code>,<code class="code">geometry</code> e <code class="code">hllsketch</code> não são compatíveis. A especificação para usar o tipo de dados SUPER como dados de entrada e o tipo de dados retornado indica que você deseja criar um grande modelo de linguagem (LLM) hospedado no Amazon SageMaker JumpStart.</p>
                           <p>Como alternativa, é possível especificar o uso apenas do tipo de dados SUPER como o tipo de dados exibido sem também usá-lo como dados de entrada.</p>
                        </dd>
                     
                        <dt><span class="term">SAGEMAKER <em>'endpoint_name'</em>[:<em>'model_name'</em>] </span></dt>
                        <dd>

                            <p>O nome do endpoint do Amazon SageMaker. Se o nome do endpoint apontar para um endpoint multimodelo, adicione o nome do modelo a ser usado. Os endpoints devem estar na mesma região da AWS que o cluster do Amazon Redshift. Para encontrar o endpoint, inicie o Amazon SageMaker. No menu suspenso <b>Inference</b> (Inferência), escolha <b>Endpoints</b>.</p>
                        </dd>
                     
                       <dt><span class="term">IAM_ROLE <span>{</span> default | 'arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;'}</span></dt>
                        <dd>
                            <p> Use a palavra-chave padrão para que o Amazon Redshift use a função do IAM definida como padrão e associada ao cluster quando o comando CREATE MODEL for executado. Como alternativa, você pode especificar o ARN de um perfil do IAM para usar esse perfil.</p>

                        </dd>
                    </dl></div>
                <p>Quando o modelo é implantado em um endpoint do SageMaker, o SageMaker cria as informações do modelo no Amazon Redshift. Em seguida, executa a inferência através da função externa. Você pode usar o comando SHOW MODEL para exibir as informações do modelo no cluster do Amazon Redshift.</p>
             
             
                <h4 id="r_remote-create-model-usage-notes">CREATE MODEL para observações de uso da inferência remota</h4>
                <p>Antes de usar CREATE MODEL para inferência remota, considere o seguinte:</p>
                <div class="itemizedlist">
                    
                     
   
                     
                     
                     
   
                     
                    
                    
                  
                   

                <ul class="itemizedlist"><li class="listitem">
                      <p>Os modelos BYOM só poderão dar suporte a um argumento se você estiver usando o tipo de dados SUPER como dados de entrada, e a saída retornada também deve ser do tipo de dados SUPER.</p>
                   </li><li class="listitem"><p>O modelo deve aceitar entradas no formato de valores separados por vírgulas (CSV) por meio de um tipo de conteúdo de texto/CSV no SageMaker. Só aplicável se você não estiver usando o tipo de dados SUPER como entrada.</p>
                    </li><li class="listitem">
                       <p>O endpoint deve ser hospedado na mesma conta da AWS que possui o cluster do Amazon Redshift.</p>
                    </li><li class="listitem">
                       <p>As saídas dos modelos devem ser um único valor do tipo especificado na criação da função, no formato de valores separados por vírgulas (CSV) por meio de um tipo de conteúdo de texto/CSV no SageMaker. Os tipos de dado varchar não devem estar entre aspas e cada saída precisa estar em uma nova linha. Só aplicável se você tiver especificado que o modelo não deve retornar o tipo de dados SUPER. </p>
                    </li><li class="listitem">
                       <p>Os modelos aceitam nulos como strings vazias.</p>
                    </li><li class="listitem">
                       <p>Certifique-se de que o endpoint do Amazon SageMaker tenha recursos suficientes para acomodar chamadas de inferência do Amazon Redshift ou que o endpoint do Amazon SageMaker possa ser escalado automaticamente.</p>
                    </li><li class="listitem">
                      <p>Quando o tipo retornado é SUPER, a saída do modelo deve ser JSON e o tipo de conteúdo <code class="code">application/jsonlines</code>.</p>
                   </li><li class="listitem">
                      <p>Quando os tipos de entrada e saída forem SUPER, o modelo deverá aceitar e retornar JSON por meio do tipo de conteúdo <code class="code">application/json</code>.</p>
                   </li></ul></div>
                 
                    <h5 id="r_remote-create-model-example">CREATE MODEL para exemplo de inferências remotas</h5>
                    <p>O exemplo a seguir cria um modelo que usa um endpoint do SageMaker para fazer previsões. Certifique-se de que o endpoint está em execução para fazer previsões e especifique seu nome no comando CREATE MODEL.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE MODEL remote_customer_churn
    FUNCTION remote_fn_customer_churn_predict (varchar, int, float, float)
    RETURNS int
    SAGEMAKER 'customer-churn-endpoint'
    IAM_ROLE default;</code></pre>
                   <p>O exemplo a seguir cria um grande modelo de linguagem (LLM) usando o tipo de dados SUPER como dados de entrada e produz o tipo de dados SUPER. Os LLMs são hospedados no SageMaker Jumpstart. </p>
                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MODEL sample_super_data_model
FUNCTION sample_super_data_model_predict(super)
RETURNS super
SAGEMAKER 'sample_super_data_model_endpoint'
IAM_ROLE default;</code></pre>
                 
             
         
     
        <h2 id="r_k-means_create_model">CREATE MODEL com K-MEANS</h2>
        <p>O Amazon Redshift oferece suporte ao algoritmo K-Means que agrupa dados que não são rotulados. Esse algoritmo resolve problemas de clusterização em que você deseja detectar agrupamentos nos dados. Os dados não classificados são agrupados e particionados de acordo com suas semelhanças e diferenças. </p>

         
            <h3 id="r_k-means-create-model-synposis">CREATE MODEL com sintaxe K-MEANS</h3>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE MODEL model_name
    FROM <span>{</span> <em>table_name</em> | ( <em>select_statement</em> ) }
    FUNCTION <em>function_name</em>
    IAM_ROLE <span>{</span> default | 'arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;' }
    AUTO OFF
    MODEL_TYPE KMEANS
    PREPROCESSORS 'string'
    HYPERPARAMETERS DEFAULT EXCEPT ( K 'val' [, ...] )
    SETTINGS (
      S3_BUCKET 'bucket',
      KMS_KEY_ID 'kms_string', |
        -- optional
      S3_GARBAGE_COLLECT on / off, |
        -- optional
      MAX_CELLS integer, |
        -- optional
      MAX_RUNTIME integer
        -- optional);</code></pre>

         
         
            <h3 id="r_k-means-create-model-parameters">CREATE MODEL com parâmetros K-MEANS</h3>
            <div class="variablelist">
                 
                 
                 
                 
            <dl>
                    <dt><span class="term"> <em>AUTO OFF</em> </span></dt>
                    <dd>
                        <p>Desativa a descoberta automática de pré-processador, algoritmo e seleção de hiper-parâmetros do CREATE MODEL.</p>
                    </dd>
                 
                    <dt><span class="term">MODEL_TYPE KMEANS</span></dt>
                    <dd>
                        <p>Especifica o uso do KMEANS para treinar o modelo. </p>
                    </dd>
                 
                    <dt><span class="term">PREPROCESSORS 'string'</span></dt>
                    <dd>
                        <p>Especifica certas combinações de pré-processadores para determinados conjuntos de colunas. O formato é uma lista de columnSets e as transformações apropriadas a serem aplicadas a cada conjunto de colunas. O Amazon Redshift oferece suporte a três pré-processadores K-Means: StandardScaler, MinMax e NumericPassThrough. Caso não queira aplicar nenhum pré-processamento para K-means, escolha NumericPassthrough explicitamente como um transformador. Para obter mais informações sobre os transformadores compatíveis, consulte <a href="#r_user_guidance-create-model-parameters">CREATE MODEL com parâmetros de orientação do usuário</a>.</p>
                        <p>O algoritmo K-Means usa a distância euclidiana para calcular a semelhança. O pré-processamento dos dados garante que os recursos do modelo permaneçam na mesma escala e produzam resultados confiáveis.</p>
                    </dd>
                 
                    <dt><span class="term">HYPERPARAMETERS DEFAULT EXCEPT ( K 'val' [, ...] )</span></dt>
                    <dd>
                        <p>Especifica se os parâmetros K-Means são usados. É necessário especificar o parâmetro <code class="code">K</code> ao usar o algoritmo K-Means. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/k-means-api-config.html">Hiperparâmetros do k-means</a> no <em>Guia do desenvolvedor do Amazon SageMaker</em></p>
                    </dd>
                </dl></div>

            <p>O exemplo a seguir prepara dados para K-Means.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MODEL customers_clusters
FROM customers
FUNCTION customers_cluster
IAM_ROLE default
AUTO OFF
MODEL_TYPE KMEANS
PREPROCESSORS '[
<span>{</span>
  "ColumnSet": [ "*" ],
  "Transformers": [ "NumericPassthrough" ]
}
]'
HYPERPARAMETERS DEFAULT EXCEPT ( K '5' )
SETTINGS (S3_BUCKET 'bucket');

select customer_id, customers_cluster(...) from customers;
customer_id | customers_cluster
--------------------
12345            1
12346            2
12347            4
12348            0</code></pre>

         
     
       <h2 id="r_forecast_model">CREATE MODEL com o Forecast</h2>
       <p>Os modelos de previsão no Redshift ML usam o Amazon Forecast para criar previsões precisas de séries temporais. Isso permite que você use dados históricos de um período para fazer previsões sobre eventos futuros. Os casos de uso comuns do Amazon Forecast incluem o uso de dados de produtos de varejo para decidir como definir os preços dos itens, dados de quantidade de fabricação para prever quanto de um item pedir e dados de tráfego da web para prever quanto tráfego um servidor da web pode receber. </p>
       <p> Os <a href="https://docs.aws.amazon.com/forecast/latest/dg/limits.html">limites de cota do Amazon Forecast</a> são aplicados nos modelos de previsão do Amazon Redshift. Por exemplo, o número máximo de previsões é 100, mas esse valor é ajustável. A eliminação de um modelo de previsão não exclui automaticamente os recursos associados no Amazon Forecast. Se você excluir um cluster do Redshift, todos os modelos associados também serão descartados. </p>
       <p>Observe que, no momento, os modelos do Forecast só estão disponíveis nas seguintes regiões:</p>
       <div class="itemizedlist">
           
           
           
          
           
           
           
           
           
          
           
           
       <ul class="itemizedlist"><li class="listitem"><p>Leste dos EUA (Ohio) (us-east-2)</p></li><li class="listitem"><p>Leste dos EUA (Norte da Virgínia) (us-east-1)</p></li><li class="listitem"><p>Oeste dos EUA (Oregon) (us-west-2)</p></li><li class="listitem"><p>Ásia-Pacífico (Mumbai) (ap-south-1)</p></li><li class="listitem"><p>Ásia-Pacífico (Seul) (ap-northeast-2)</p></li><li class="listitem"><p>Ásia-Pacífico (Singapura) (ap-southeast-1)</p></li><li class="listitem"><p>Ásia-Pacífico (Sydney) (ap-southeast-2)</p></li><li class="listitem"><p>Ásia Pacific (Tóquio) (ap-northeast-1)</p></li><li class="listitem"><p>Europa (Frankfurt) (eu-central-1)</p></li><li class="listitem"><p>Europa (Irlanda) (eu-west-1)</p></li></ul></div>
        
          <h3 id="r_forecast_model-synopsis">Sintaxe de CREATE MODEL com o Forecast</h3>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE [ OR REPLACE ] MODEL forecast_model_name 
FROM <span>{</span> table_name | ( select_query ) } 
TARGET column_name
IAM_ROLE <span>{</span> default | 'arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;'} 
AUTO ON
MODEL_TYPE FORECAST
SETTINGS (
  S3_BUCKET 'bucket',
  HORIZON integer,
  FREQUENCY forecast_frequency
  [PERCENTILES '0.1', '0.5', '0.9']</code></pre>
        
        
          <h3 id="r_forecast_model-parameters">Parâmetros de CREATE MODEL com o Forecast</h3>
          <div class="variablelist">
              
              
              
              
              
              
              
              
              
              
          <dl>
                <dt><span class="term"> <em>forecast_model_name</em> </span></dt>
                <dd>
                   <p>O nome do modelo. O nome do modelo deve ser exclusivo.</p>
                </dd>
              
                <dt><span class="term">FROM <span>{</span> table_name | ( select_query ) }</span></dt>
                <dd>
                   <p>O table_name ou a consulta que especifica os dados de treinamento. Isso pode ser uma tabela existente no sistema ou uma consulta SELECT compatível com o Amazon Redshift entre parênteses. O resultado da tabela ou consulta deve ter pelo menos três colunas: (1) uma coluna varchar que especifica o nome da série temporal (cada conjunto de dados pode ter várias séries temporais); (2) uma coluna de data e hora; e (3) a coluna de destino das previsões. Essa coluna de destino deve ser do tipo int ou float. Se você fornecer um conjunto de dados com mais de três colunas, o Amazon Redshift vai assumir que todas as colunas adicionais fazem parte de uma série temporal relacionada. Observe que as séries temporais relacionadas devem ser do tipo int ou float. Para obter mais informações sobre séries temporais relacionadas, consulte <a href="https://docs.aws.amazon.com/forecast/latest/dg/related-time-series-datasets.html">Usar conjuntos de dados de séries temporais relacionadas</a>.</p>
                </dd>
              
                <dt><span class="term">TARGET column_name</span></dt>
                <dd>
                   <p>O nome da coluna que se torna o alvo da previsão. A coluna deve existir na cláusula FROM.</p>
                </dd>
              
                <dt><span class="term">IAM_ROLE <span>{</span> default | 'arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;' }</span></dt>
                <dd>
                   <p>Use a palavra-chave padrão para que o Amazon Redshift use a função do IAM definida como padrão e associada ao cluster quando o comando CREAT MODEL for executado. Como alternativa, você pode especificar o ARN de um perfil do IAM para usar esse perfil. </p>
                </dd>
              
                <dt><span class="term">AUTO ON</span></dt>
                <dd>
                   <p>Ativa a descoberta automática da seleção de hiperparâmetros e algoritmo de CREATE MODEL. Especificar “on” ao criar um modelo do Forecast indica o uso de um Forecast AutoPredictor, em que o Amazon Forecast aplica as combinações ideais de algoritmos a cada série temporal em seu conjunto de dados.</p>
                </dd>
              
                <dt><span class="term">MODEL_TYPE FORECAST</span></dt>
                <dd>
                   <p>Especifica o uso de FORECAST para treinar o modelo.</p>
                </dd>
              
                <dt><span class="term">S3_BUCKET 'bucket'</span></dt>
                <dd>
                   <p>O nome do bucket do Amazon Simple Storage Service que você criou anteriormente e que é usado para compartilhar artefatos e dados de treinamento entre o Amazon Redshift e o Amazon Forecast. O Amazon Redshift cria uma subpasta neste bucket antes de descarregar os dados de treinamento. Quando o treinamento for concluído, o Amazon Redshift exclui a subpasta criada e seu conteúdo.</p>
                </dd>
              
                <dt><span class="term">HORIZON integer</span></dt>
                <dd>
                   <p>O número máximo de previsões que o modelo pode retornar. Depois que o modelo é treinado, não é possível alterar esse número inteiro.</p>
                </dd>
              
                <dt><span class="term">FREQUENCY forecast_frequency</span></dt>
                <dd>
                   <p>Especifica o nível de detalhamento que você deseja que as previsões tenham. As opções disponíveis são <code class="code">Y | M | W | D | H | 30min | 15min | 10min | 5min | 1min</code>. Obrigatório se você for treinar um modelo de previsão.</p>
                </dd>
              
                <dt><span class="term">PERCENTILES string</span></dt>
                <dd>
                   <p>Uma string delimitada por vírgula que especifica os tipos de previsão usados para treinar um previsor. Os tipos de previsão podem ser quantis de 0,01 a 0,99, em incrementos de 0,01 ou mais. Você também pode especificar a previsão média com mean. É possível especificar até cinco tipos de previsão.</p>
                </dd>
             </dl></div>
          <p>O exemplo a seguir demonstra como criar um modelo de previsão simples.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE MODEL forecast_example
FROM forecast_electricity_
TARGET target 
IAM_ROLE 'arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;'
AUTO ON 
MODEL_TYPE FORECAST
SETTINGS (S3_BUCKET 'redshift-ml-bucket',
          HORIZON 24,
          FREQUENCY 'H',
          PERCENTILES '0.25,0.50,0.75,mean',
          S3_GARBAGE_COLLECT OFF);</code></pre>
          
          <p>Depois de criar o modelo de previsão, você pode criar uma tabela com os dados da previsão.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE forecast_model_results as SELECT Forecast(forecast_example)</code></pre>
          
          <p>Em seguida, você pode consultar a nova tabela para obter previsões.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT * FROM forecast_model_results</code></pre>
        
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_create_model_usage_notes.html">Observações de uso</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_PROCEDURE.html">CREATE PROCEDURE</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_create_model_use_cases.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_create_model_use_cases.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>