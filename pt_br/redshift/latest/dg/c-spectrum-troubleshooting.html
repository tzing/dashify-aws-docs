<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Solucionar problemas de consultas no Amazon Redshift Spectrum - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-spectrum-troubleshooting" /><meta name="default_state" content="c-spectrum-troubleshooting" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html" /><meta name="description" content="Se o tempo limite de uma solicitação do Amazon Redshift Spectrum expira, a solicitação é cancelada e reenviada. Depois de cinco novas tentativas com erro, a consulta falha com o seguinte erro. Arquivos grandes (maiores do que 1 GB). Verifique o tamanho dos arquivos no Amazon S3 e procure por arquivos grandes e distorções no tamanho de um arquivo. Quebre os arquivos grandes em arquivos menores, entre 100 MB e 1 GB. Tente manter os arquivos com aproximadamente o mesmo tamanho." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-troubleshooting.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Solucionar problemas de consultas no Amazon Redshift Spectrum" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Solucionar problemas de consultas no Amazon Redshift Spectrum - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c-spectrum-troubleshooting" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Consultar dados externos usando o Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Solucionar problemas de consultas no Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c-spectrum-troubleshooting" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#spectrum-troubleshooting-retries-exceeded">Número de tentativas excedido</a><a href="#spectrum-troubleshooting-access-throttled">Acesso limitado</a><a href="#spectrum-troubleshooting-resource-limit-exceeded">Limite de recursos excedido</a><a href="#spectrum-troubleshooting-no-rows-partitioned-table">Nenhuma linha foi retornada para uma tabela particionada</a><a href="#spectrum-troubleshooting-not-authorized-error">Erro de falta de autorização</a><a href="#spectrum-troubleshooting-incompatible-data-format">Formatos de dados incompatíveis</a><a href="#spectrum-troubleshooting-syntax-error-using-hive-ddl">Erro de sintaxe ao usar a DDL do Hive no Amazon Redshift</a><a href="#spectrum-troubleshooting-permission-to-create-temp-tables">Permissão para criar tabelas temporárias</a><a href="#spectrum-troubleshooting-invalid-range">Intervalo inválido </a><a href="#spectrum-troubleshooting-invalid-parquet-version">Número da versão do Parquet inválida </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c-spectrum-troubleshooting">Solucionar problemas de consultas no Amazon Redshift Spectrum</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p></p><p>Veja a seguir uma referência rápida que identifica e resolve alguns problemas comuns que podem ser encontrados em consultas do Amazon Redshift Spectrum. Para visualizar os erros gerados pelas consultas do Redshift Spectrum, consulte a tabela do sistema <a href="./r_SVL_S3LOG.html">SVL_S3LOG</a>.</p><div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#spectrum-troubleshooting-retries-exceeded">Número de tentativas excedido</a></li><li><a href="#spectrum-troubleshooting-access-throttled">Acesso limitado</a></li><li><a href="#spectrum-troubleshooting-resource-limit-exceeded">Limite de recursos excedido</a></li><li><a href="#spectrum-troubleshooting-no-rows-partitioned-table">Nenhuma linha foi retornada para uma tabela particionada</a></li><li><a href="#spectrum-troubleshooting-not-authorized-error">Erro de falta de autorização</a></li><li><a href="#spectrum-troubleshooting-incompatible-data-format">Formatos de dados incompatíveis</a></li><li><a href="#spectrum-troubleshooting-syntax-error-using-hive-ddl">Erro de sintaxe ao usar a DDL do Hive no Amazon Redshift</a></li><li><a href="#spectrum-troubleshooting-permission-to-create-temp-tables">Permissão para criar tabelas temporárias</a></li><li><a href="#spectrum-troubleshooting-invalid-range">Intervalo inválido </a></li><li><a href="#spectrum-troubleshooting-invalid-parquet-version">Número da versão do Parquet inválida </a></li></ul></div>
         <h2 id="spectrum-troubleshooting-retries-exceeded">Número de tentativas excedido</h2>

         <p>Se o tempo limite de uma solicitação do Amazon Redshift Spectrum expira, a solicitação é cancelada e reenviada. Depois de cinco novas tentativas com erro, a consulta falha com o seguinte erro.</p>
         <pre class="screen">error:  Spectrum Scan Error: Retries exceeded</pre>
         <p>As possíveis causas incluem: </p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Arquivos grandes (maiores do que 1 GB). Verifique o tamanho dos arquivos no Amazon S3 e procure por arquivos grandes e distorções no tamanho de um arquivo. Quebre os arquivos grandes em arquivos menores, entre 100 MB e 1 GB. Tente manter os arquivos com aproximadamente o mesmo tamanho. </p>
            </li><li class="listitem">
               <p>A taxa de transferência na rede está lenta. Tente executar sua consulta mais tarde. </p>
            </li></ul></div>
       
         <h2 id="spectrum-troubleshooting-access-throttled">Acesso limitado</h2>
         <p>O Amazon Redshift Spectrum está sujeito às Service Quotas da AWS. Em alta utilização, poderá ser necessário desacelerar as solicitações do Redshift Spectrum, resultando no erro a seguir.</p>
         <pre class="screen">error:  Spectrum Scan Error: Access throttled</pre>
         <p>Pode ocorrer dois tipos de controle de utilização:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
            <p>Acesso limitado pelo Amazon S3.</p>
            </li><li class="listitem">
            <p>Acesso limitado pelo AWS KMS.</p>
            </li></ul></div>
         <p>O contexto do erro fornece mais detalhes sobre o tipo de controle de utilização. Veja a seguir causas e possíveis soluções para esse controle de utilização.</p>



          
            <h3 id="spectrum-troubleshooting-access-throttled-s3">Acesso limitado pelo Amazon S3</h3>
            
            <p>O Amazon S3 pode limitar uma solicitação do Redshift Spectrum se a taxa de solicitação de leitura em um <a href="https://docs.aws.amazon.com/glossary/latest/reference/glos-chap.html#keyprefix">prefixo</a> é muito alta. Para obter informações sobre uma taxa de solicitação GET/HEAD que você pode obter no Amazon S3, consulte <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/optimizing-performance.html">Otimizar a performance do Amazon S3</a> no <em>Guia do usuário do Amazon Simple Storage Service</em>. A taxa de solicitação GET/HEAD do Amazon S3 considera todas as solicitações GET/HEAD em um prefixo, portanto, aplicações diferentes que acessam o mesmo prefixo compartilham a taxa total de solicitações.</p>
            <p>Se as solicitações do Redshift Spectrum forem limitadas pelo Amazon S3 frequentemente, reduza o número de solicitações GET/HEAD do Amazon S3 que o Redshift Spectrum faz para o Amazon S3. Para isso, tente mesclar arquivos pequenos em arquivos maiores. Recomendamos usar tamanhos de arquivo de 64 MB ou maior.</p>
         <p>Considere também particionar as tabelas do Redshift Spectrum para se beneficiar da filtragem antecipada e reduzir o número de arquivos acessados no Amazon S3. Para obter mais informações, consulte <a href="./c-spectrum-external-tables.html#c-spectrum-external-tables-partitioning">Dividir as tabelas externas do Redshift Spectrum</a>. </p>
          
            
          
            <h3 id="spectrum-troubleshooting-access-throttled-kms">Acesso limitado pelo AWS KMS</h3>
         
            
            <p>Se você armazenar os dados no Amazon S3 usando criptografia no lado do servidor (SSE-S3 ou SSE-KMS), o Amazon S3 chamará uma operação de API ao AWS KMS para cada arquivo acessado pelo Redshift Spectrum. Essas solicitações são contabilizadas na sua cota de operações de criptografia. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/kms/latest/developerguide/requests-per-second.html">Cotas de solicitações do AWS KMS</a>. Para obter mais informações sobre SSE-S3 e SSE-KMS, consulte <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingServerSideEncryption.html">Proteger dados usando criptografia do lado do servidor</a> e <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingKMSEncryption.html">Proteger dados usando criptografia do lado do servidor com chaves KMS armazenadas no AWS KMS</a> no <em>Guia do usuário do Amazon Simple Storage Service</em>.</p>

            <p>A primeira etapa para reduzir o número de solicitações feitas pelo Redshift Spectrum ao AWS KMS é reduzir o número de arquivos acessados. Para isso, tente mesclar arquivos pequenos em arquivos maiores. Recomendamos usar tamanhos de arquivo de 64 MB ou maior.</p>
            <p>Se as solicitações do Redshift Spectrum são frequentemente limitadas pelo AWS KMS, considere solicitar um aumento de cota para a taxa de solicitações do AWS KMS para operações criptográficas. Para solicitar um aumento de cota, consulte <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html">Limites de serviço da AWS</a> na <em>Referência geral da Amazon Web Services</em>. </p>
          
       
         <h2 id="spectrum-troubleshooting-resource-limit-exceeded">Limite de recursos excedido</h2>
         <p>O Redshift Spectrum impõe um limite superior sobre a quantidade de memória que uma solicitação pode usar. Uma solicitação do Redshift Spectrum que requer mais memória falha, resultando no erro a seguir.</p>
         <pre class="screen">error:  Spectrum Scan Error: Resource limit exceeded</pre>
            <p>Há dois motivos comuns que podem fazer com que uma solicitação do Redshift Spectrum exceda a provisão de memória:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>O Redshift Spectrum processa um grande bloco de dados que não pode ser dividido em blocos menores.</p>
            </li><li class="listitem">
               <p>Uma grande etapa de agregação é processada pelo Redshift Spectrum.</p>
            </li></ul></div>

         <p>Recomendamos usar um formato de arquivo que ofereça suporte a leituras paralelas com tamanhos divididos de 128 MB ou menos. Consulte <a href="./c-spectrum-data-files.html">Criação de arquivos de dados para consultas no Amazon Redshift Spectrum</a> para obter os formatos de arquivo compatíveis e as diretrizes gerais para a criação de arquivos de dados. Ao usar formatos de arquivo ou algoritmos de compactação que não ofereçam suporte a leituras paralelas, recomendamos manter os tamanhos de arquivo entre 64 MB e 128 MB.</p>
       
         <h2 id="spectrum-troubleshooting-no-rows-partitioned-table">Nenhuma linha foi retornada para uma tabela particionada</h2>

         <p>Se a consulta não retornar nenhuma linha de uma tabela externa particionada, verifique se foi adicionada uma partição para essa tabela externa. O Redshift Spectrum só faz a varredura dos arquivos em um local do Amazon S3 que tenha sido explicitamente adicionado usando <code class="code">ALTER TABLE … ADD PARTITION</code>. Consulte a exibição <a href="./r_SVV_EXTERNAL_PARTITIONS.html">SVV_EXTERNAL_PARTITIONS</a> para encontrar partições existentes. Execute <code class="code">ALTER TABLE … ADD PARTITION</code> para cada partição ausente. </p>
       
         <h2 id="spectrum-troubleshooting-not-authorized-error">Erro de falta de autorização</h2>

         <p>Verifique se a função do IAM para o cluster permite o acesso aos objetos de arquivo do Amazon S3. Se o banco de dados externo estiver localizado no Amazon Athena, verifique se a função do IAM permite o acesso aos recursos do Athena. Para obter mais informações, consulte <a href="./c-spectrum-iam-policies.html">Políticas do IAM do Amazon Redshift Spectrum</a>.</p>
       
         <h2 id="spectrum-troubleshooting-incompatible-data-format">Formatos de dados incompatíveis</h2>

         <p>Para um formato de arquivo colunar, como o Parquet, o tipo de coluna é incorporado nos dados. O tipo de coluna da definição CREATE EXTERNAL TABLE deve corresponder ao tipo de coluna do arquivo de dados. Se não houver correspondência, você receberá um erro semelhante ao seguinte:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">File 'https://s3bucket/location/file has an incompatible Parquet schema
for column ‘s3://s3bucket/location.col1'. Column type: VARCHAR, Par</code></pre>
         <p>A mensagem de erro pode estar truncada devido ao limite de tamanho de mensagens. Para recuperar a mensagem de erro completa, incluindo o nome e o tipo da coluna, consulte de exibição do sistema <a href="./r_SVL_S3LOG.html">SVL_S3LOG</a>.</p>
         <p>O exemplo a seguir consulta a SVL_S3LOG para a última consulta concluída.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">select message 
from svl_s3log 
where query = pg_last_query_id() 
order by query,segment,slice;</code></pre>
         <p>O exemplo a seguir mostra uma mensagem de erro completa.</p>

         <pre class="screen">                            message
–––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––-
Spectrum Scan Error. File 'https://s3bucket/location/file has an incompatible
Parquet schema for column ' s3bucket/location.col1'. 
Column type: VARCHAR, Parquet schema:\noptional int64 l_orderkey [i:0 d:1 r:0]\n</pre>
         <p>Para corrigir o erro, modifique a tabela externa para usar o mesmo tipo de coluna do arquivo Parquet. </p>
       
         <h2 id="spectrum-troubleshooting-syntax-error-using-hive-ddl">Erro de sintaxe ao usar a DDL do Hive no Amazon Redshift</h2>

         <p>O Amazon Redshift é compatível com linguagem de definição de dados (DDL) para CREATE EXTERNAL TABLE, que é semelhante à DDL do Hive. Contudo, os dois tipos de DDL não são sempre exatamente iguais. Se você copiar a DDL do Hive para criar ou alterar as tabelas externas do Amazon Redshift, poderá encontrar erros de sintaxe. Os seguintes exemplos apresentam as diferenças entre as DDLs do Amazon Redshift e do Hive: </p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>O Amazon Redshift exige aspas simples ('), enquanto a DDL do Hive é compatível com aspas duplas (").</p>
            </li><li class="listitem">
               <p>O Amazon Redshift não é compatível com o tipo de dado STRING. Use o tipo VARCHAR em seu lugar.</p>
            </li></ul></div>
       
         <h2 id="spectrum-troubleshooting-permission-to-create-temp-tables">Permissão para criar tabelas temporárias</h2>
         <p>Para executar as consultas do Redshift Spectrum, o usuário do banco de dados precisa ter permissão para criar tabelas temporárias no banco de dados. O exemplo a seguir concede permissão temporária no banco de dados <code class="code">spectrumdb</code> para o grupo de usuários <code class="code">spectrumusers</code>. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">grant temp on database spectrumdb  to group spectrumusers;</code></pre>
         <p>Para obter mais informações, consulte <a href="./r_GRANT.html">GRANT</a>.</p>
       
      
      <h2 id="spectrum-troubleshooting-invalid-range">Intervalo inválido </h2>
      <p>O Redshift Spectrum espera que os arquivos no Amazon S3 pertencentes a uma tabela externa não sejam substituídos durante uma consulta. Se isso acontecer, o seguinte erro poderá ocorrer.</p>
      <pre class="screen">Error: HTTP response error code: 416 Message: InvalidRange The requested range is not satisfiable</pre>
      <p>Para evitar o erro, certifique-se de que os arquivos do Amazon S3 não sejam substituídos enquanto eles são consultados com o Redshift Spectrum.</p>    
    
         
         <h2 id="spectrum-troubleshooting-invalid-parquet-version">Número da versão do Parquet inválida </h2>
         <p>O Redshift Spectrum verifica os metadados de cada arquivo do Apache Parquet que ele acessa. Se a verificação falhar, isso pode resultar em um erro similar ao seguinte:</p>
         <pre class="screen">File 'https://s3.<code class="replaceable">region</code>.amazonaws.com/s3bucket/location/file has an invalid version number</pre>
         <p>Há dois motivos comuns que podem fazer com que a verificação falhe:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>O arquivo Parquet foi substituído durante a consulta (consulte <a href="#spectrum-troubleshooting-invalid-range">Intervalo inválido </a>).</p>
            </li><li class="listitem">
               <p>O arquivo Parquet está corrompido.</p>
            </li></ul></div>   
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-spectrum-metrics.html">Monitoramento de métricas</div><div id="next" class="next-link" accesskey="n" href="./tutorial-query-nested-data.html">Tutorial: Consultar dados aninhados com o Amazon Redshift Spectrum </div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-troubleshooting.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>