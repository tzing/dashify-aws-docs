<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>STV_BLOCKLIST - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_STV_BLOCKLIST" /><meta name="default_state" content="r_STV_BLOCKLIST" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_BLOCKLIST.html" /><meta name="description" content="Contém o número de blocos de disco de 1 MB que são usados por cada fatia, tabela ou coluna em um banco de dados." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_BLOCKLIST.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_BLOCKLIST.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="STV_BLOCKLIST" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>STV_BLOCKLIST - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_STV_BLOCKLIST" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_BLOCKLIST.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_BLOCKLIST.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_BLOCKLIST.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referência de visualizações e tabelas do sistema",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/cm_chap_system-tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Monitoramento do sistema (somente provisionado)",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_intro_system_views.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Tabelas STV para dados de snapshot",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_intro_STV_tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "STV_BLOCKLIST",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_intro_STV_tables.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_STV_BLOCKLIST" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#r_STV_BLOCKLIST-table-columns">Colunas da tabela</a><a href="#r_STV_BLOCKLIST-sample-queries">Consultas de exemplo</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_STV_BLOCKLIST">STV_BLOCKLIST</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>A tabela STV_BLOCKLIST contém o número de blocos de disco de 1 MB que são usados por cada fatia, tabela ou coluna em um banco de dados.</p><p>Use consultas agregadas com a STV_BLOCKLIST, como mostram os exemplos a seguir, para determinar o número de blocos de disco de 1 MB alocados por banco de dados, tabela, fatia ou coluna. Você também pode usar a <a href="./r_STV_PARTITIONS.html">STV_PARTITIONS</a> para visualizar informações resumidas sobre a utilização do disco.</p><p>STV_BLOCKLIST é visível somente aos superusuários. Para obter mais informações, consulte <a href="./cm_chap_system-tables.html#c_visibility-of-data">Visibilidade de dados em tabelas e visualizações de sistema</a>.</p>
            <h2 id="r_STV_BLOCKLIST-table-columns">Colunas da tabela</h2>


            <div class="table-container"><div class="table-contents"><table id="w319aac49c17c11b9b9b3"><thead>
                        <tr>
                            <th>Nome da coluna </th>
                            <th>Tipo de dados </th>
                            <th>Descrição </th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">slice </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Fatia do nó. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">col </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Um índice com base zero para a coluna. Toda tabela que é criada tem três colunas ocultas anexadas a ela: INSERT_XID, DELETE_XID e ROW_ID (OID). Uma tabela com 3 colunas definidas pelo usuário contém na realidade 6 colunas, e as colunas definidas pelo usuário são numeradas internamente com 0, 1 e 2. As colunas INSERT_XID, DELETE_XID e ROW_ID são numeradas com 3, 4 e 5, respectivamente, neste exemplo. </td>
                        </tr>

                        <tr>
                            <td tabindex="-1">tbl </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">ID da tabela para a tabela do banco de dados. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">blocknum </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">O ID do bloco de dados. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">num_values </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">O número de valores contidos no bloco. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">extended_limits </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Para uso interno.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">minvalue </td>
                            <td tabindex="-1">bigint </td>
                            <td tabindex="-1">O valor mínimo de um dado do bloco. Armazena os oito primeiros caracteres como inteiros de 64 bits para dados não numéricos. É usado para a varredura de discos. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">maxvalue </td>
                            <td tabindex="-1">bigint </td>
                            <td tabindex="-1">O valor máximo de um dado do bloco. Armazena os oito primeiros caracteres como inteiros de 64 bits para dados não numéricos. É usado para a varredura de discos. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">sb_pos </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Identificador interno do Amazon Redshift para a posição do superbloco no disco. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">pinned </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Se o bloco é fixado ou não na memória como parte do pré-carregamento. 0 = false; 1 = true. O padrão é falso. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">on_disk </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Se o bloco é ou não armazenado automaticamente no disco. 0 = false; 1 = true. O padrão é falso. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">modified </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Se o bloco foi modificado ou não. 0 = false; 1 = true. O padrão é falso. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">hdr_modified </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Se o cabeçalho do bloco foi modificado ou não. 0 = false; 1 = true. O padrão é falso. </td>
                        </tr>

                        <tr>
                            <td tabindex="-1">unsorted </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Se um bloco está ou não desordenado. 0 = false; 1 = true. O padrão é true (verdadeiro). </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">tombstone </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Para uso interno.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">preferred_diskno </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">O número do disco onde o bloco se encontra, a menos que o disco esteja com uma falha. Uma vez consertado o disco, o bloco voltará para ele. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">temporary </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Se o bloco contém ou não dados temporários, como de uma tabela temporária ou resultados de consulta intermediários. 0 = false; 1 = true. O padrão é falso. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">newblock </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Indica se um bloco é ou não novo (true) ou nunca foi confirmado no disco (false). 0 = false; 1 = true. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">num_readers </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">O número de referências em cada bloco. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">flags </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Sinalizadores internos do Amazon Redshift para o cabeçalho do bloco. </td>
                        </tr>
                    </table></div></div>
         
            <h2 id="r_STV_BLOCKLIST-sample-queries">Consultas de exemplo</h2>


            <p>A tabela STV_BLOCKLIST possui uma linha para cada bloco de disco alocado, de maneira que uma consulta que selecione todas as linhas pode retornar um número muito grande de linhas. Recomendamos usar somente consultas agregadas com a STV_BLOCKLIST.</p>
            <p>A exibição <a href="./r_SVV_DISKUSAGE.html">SVV_DISKUSAGE</a> fornece informações semelhantes em um formato mais fácil de usar. Entretanto, o exemplo a seguir demonstra uma forma de utilizar a tabela STV_BLOCKLIST.</p>
            <p>Para determinar o número de blocos de 1 MB usados para cada coluna na tabela VENUE, digite a seguinte consulta: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select col, count(*)
from stv_blocklist, stv_tbl_perm
where stv_blocklist.tbl = stv_tbl_perm.id
and stv_blocklist.slice = stv_tbl_perm.slice
and stv_tbl_perm.name = 'venue'
group by col
order by col;</code></pre>
            <p>Essa consulta retorna o número de blocos de 1 MB alocados para cada coluna na tabela VENUE, como mostram os seguintes dados de exemplo: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""> col | count
-----+-------
   0 |  4
   1 |  4
   2 |  4
   3 |  4
   4 |  4
   5 |  4
   7 |  4
   8 |  4
(8 rows)
</code></pre>
            <p>A consulta a seguir mostra se os dados da tabelas são distribuídos de fato por todas as fatias: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select trim(name) as table, stv_blocklist.slice, stv_tbl_perm.rows
from stv_blocklist,stv_tbl_perm
where stv_blocklist.tbl=stv_tbl_perm.id
and stv_tbl_perm.slice=stv_blocklist.slice
and stv_blocklist.id &gt; 10000 and name not like '%#m%'
and name not like 'systable%'
group by name, stv_blocklist.slice, stv_tbl_perm.rows
order by 3 desc;</code></pre>
            <p>Essa consulta produz os seguintes dados de saída como exemplo, mostrando a distribuição de dados uniforme para a tabela com o maior número de linhas: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
table   | slice | rows
----------+-------+-------
listing  |    13 | 10527
listing  |    14 | 10526
listing  |     8 | 10526
listing  |     9 | 10526
listing  |     7 | 10525
listing  |     4 | 10525
listing  |    17 | 10525
listing  |    11 | 10525
listing  |     5 | 10525
listing  |    18 | 10525
listing  |    12 | 10525
listing  |     3 | 10525
listing  |    10 | 10525
listing  |     2 | 10524
listing  |    15 | 10524
listing  |    16 | 10524
listing  |     6 | 10524
listing  |    19 | 10524
listing  |     1 | 10523
listing  |     0 | 10521
...
(180 rows)
</code></pre>
            <p>A consulta a seguir determina se um bloco com marca de exclusão está confirmado no disco: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select slice, col, tbl, blocknum, newblock
from stv_blocklist
where  tombstone &gt; 0;

slice | col |   tbl  | blocknum | newblock
-------+-----+--------+----------+----------
4     |  0  | 101285 |    0     |   1
4     |  2  | 101285 |    0     |   1
4     |  4  | 101285 |    1     |   1
5     |  2  | 101285 |    0     |   1
5     |  0  | 101285 |    0     |   1
5     |  1  | 101285 |    0     |   1
5     |  4  | 101285 |    1     |   1
...
(24 rows)</code></pre>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_STV_ACTIVE_CURSORS.html">STV_ACTIVE_CURSORS</div><div id="next" class="next-link" accesskey="n" href="./r_STV_CURSOR_CONFIGURATION.html">STV_CURSOR_CONFIGURATION</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_BLOCKLIST.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_BLOCKLIST.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>