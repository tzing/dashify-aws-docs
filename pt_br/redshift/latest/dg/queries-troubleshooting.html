<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Solução de problemas de consultas - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="queries-troubleshooting" /><meta name="default_state" content="queries-troubleshooting" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" /><meta name="description" content="Esta seção fornece uma referência rápida para identificar e resolver alguns dos problemas mais comuns e mais graves que você provavelmente encontrará nas consultas do Amazon Redshift." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/queries-troubleshooting.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/queries-troubleshooting.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/queries-troubleshooting.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/queries-troubleshooting.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/queries-troubleshooting.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/queries-troubleshooting.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/queries-troubleshooting.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/queries-troubleshooting.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/queries-troubleshooting.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/queries-troubleshooting.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/queries-troubleshooting.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/queries-troubleshooting.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/queries-troubleshooting.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/queries-troubleshooting.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/queries-troubleshooting.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Solução de problemas de consultas" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Solução de problemas de consultas - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#queries-troubleshooting" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Ajustar a performance da consulta",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-optimizing-query-performance.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Solução de problemas de consultas",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-optimizing-query-performance.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#queries-troubleshooting" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#queries-troubleshooting-connection-fails">Falhas na conexão</a><a href="#queries-troubleshooting-query-hangs">Consultas travadas</a><a href="#queries-troubleshooting-query-takes-too-long">A consulta leva muito tempo</a><a href="#queries-troubleshooting-load-fails">Falha do carregamento</a><a href="#queries-troubleshooting-load-takes-too-long">O carregamento leva muito tempo</a><a href="#queries-troubleshooting-load-data-incorrect">Os dados de carregamento estão incorretos</a><a href="#set-the-JDBC-fetch-size-parameter">Como configurar o parâmetro JDBC para o tamanho da busca</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="queries-troubleshooting">Solução de problemas de consultas</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Esta seção fornece uma referência rápida para identificar e resolver alguns dos problemas mais comuns e mais graves que você provavelmente encontrará nas consultas do Amazon Redshift.</p><div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#queries-troubleshooting-connection-fails">Falhas na conexão</a></li><li><a href="#queries-troubleshooting-query-hangs">Consultas travadas</a></li><li><a href="#queries-troubleshooting-query-takes-too-long">A consulta leva muito tempo</a></li><li><a href="#queries-troubleshooting-load-fails">Falha do carregamento</a></li><li><a href="#queries-troubleshooting-load-takes-too-long">O carregamento leva muito tempo</a></li><li><a href="#queries-troubleshooting-load-data-incorrect">Os dados de carregamento estão incorretos</a></li><li><a href="#set-the-JDBC-fetch-size-parameter">Como configurar o parâmetro JDBC para o tamanho da busca</a></li></ul></div><p>Essas sugestões fornecem um ponto inicial para a solução de problemas. Você também pode consultar os recursos a seguir para obter informações mais detalhadas.</p><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="https://docs.aws.amazon.com/redshift/latest/mgmt/using-rs-tools.html">Acessar clusters e bancos de dados do Amazon Redshift</a></p>
         </li></ul></div><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="./t_Creating_tables.html">Trabalhar com otimização automática de tabelas</a></p>
         </li></ul></div><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="./t_Loading_data.html">Carregamento de dados</a></p>
         </li></ul></div><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="./tutorial-loading-data.html">Tutorial: Carregar dados do Amazon S3</a></p>
         </li></ul></div><h2 id="queries-troubleshooting-connection-fails">Falhas na conexão</h2>
         
         <p>A conexão de sua consulta pode falhar pelos motivos a seguir; sugerimos as abordagens de solução de problemas que se seguem.</p>
          
            <h6>O cliente não pode conectar-se ao servidor</h6>
            <p>Se você estiver usando o SSL ou certificados de servidor, remova essa complexidade antes de tentar solucionar o problema de conexão. Então, adicione certificados SSL ou de servidor novamente quanto você tiver encontrado uma solução. Para obter mais informações, acesse “<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-ssl-support.html">Configurar as opções de segurança para conexões</a>” no <em>Guia de gerenciamento de clusters do Amazon Redshift</em>.</p>
          
          
            <h6>A conexão é recusada</h6>
            <p>Geralmente, quando você recebe uma mensagem de erro indicando que houve falha em estabelecer uma conexão, isso significa que há um problema com a permissão para acessar o cluster. Para obter mais informações, acesse “<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-refusal-failure-issues.html">A conexão é recusada ou falha</a>” no <em>Guia de gerenciamento de clusters do Amazon Redshift</em>. </p>
          
      <h2 id="queries-troubleshooting-query-hangs">Consultas travadas</h2>
         
         <p>Sua consulta pode travar ou parar de responder pelos motivos a seguir; sugerimos as abordagens de solução de problemas que se seguem.</p>
          
            <h6>A conexão com o banco de dados é interrompida</h6>
            <p>Reduza o tamanho da unidade de transmissão máxima (Maximum Transmission Unit, MTU). O tamanho de MTU determina o tamanho máximo, em bytes, de um pacote que pode ser transferido em um quadro Ethernet através de sua conexão de rede. Para obter mais informações, acesse “<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-drop-issues.html">As consultas parecem travar e, às vezes, não se comunicam com o cluster</a>” no <em>Guia de gerenciamento de clusters do Amazon Redshift</em>. </p>
          
          
            <h6>A conexão com o banco de dados atinge o tempo limite</h6>
            <p>A conexão do cliente com o banco de dados parece estar travada ou ter expirado por exceder o tempo limite ao executar consultas longas, como um comando COPY. Nesse caso, você pode observar que o console do Amazon Redshift exibe que a consulta foi concluída, mas a própria ferramenta do cliente ainda parece estar executando a consulta. Os resultados da consulta podem estar ausentes ou incompletos, dependendo de quando a conexão foi interrompida. Este efeito acontece quando conexões ociosas são encerradas por um componente intermediário de rede. Para obter mais informações, acesse “<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-firewall-guidance.html">Conexão de fora do Amazon EC2 - problema de tempo limite do firewall</a>” no <em>Guia de gerenciamento de clusters do Amazon Redshift</em>. </p>
          
          
            <h6>Erro de falta de memória no lado do cliente ocorre com ODBC</h6>
            <p>Se seu aplicativo cliente usa uma conexão ODBC e sua consulta cria um conjunto de resultados que é muito grande para caber na memória, você pode transmitir o conjunto de resultados para seu aplicativo cliente usando um cursor. Para obter mais informações, consulte <a href="./declare.html">DECLARE</a> e <a href="./declare.html#declare-performance">Considerações sobre a performance ao usar cursores</a>.</p>
          
          
            <h6>Erro de falta de memória no lado do cliente ocorre com JDBC</h6>
            <p>Quando você tenta recuperar grandes conjuntos de resultados através de uma conexão JDBC, pode encontrar erros de falta de memória por parte do cliente. Para obter mais informações, consulte <a href="#set-the-JDBC-fetch-size-parameter">Como configurar o parâmetro JDBC para o tamanho da busca</a>.</p>
          
          
            <h6>Há um deadlock em potencial </h6>
            <p>Se houver um deadlock em potencial, tente o seguinte:</p>
          
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Visualize as tabelas de sistema <a href="./r_STV_LOCKS.html">STV_LOCKS</a> e <a href="./r_STL_TR_CONFLICT.html">STL_TR_CONFLICT</a> para localizar conflitos envolvendo atualizações em mais de uma tabela.</p>
            </li><li class="listitem">
               <p>Use a função <a href="./PG_CANCEL_BACKEND.html">PG_CANCEL_BACKEND</a> para cancelar uma ou mais consultas em conflito.</p>
            </li><li class="listitem">
               <p>Use a função <a href="./PG_TERMINATE_BACKEND.html">PG_TERMINATE_BACKEND</a> para encerrar uma sessão, o que força todas as transações atualmente em execução na sessão encerrada a liberar todas as travas e reverter a transação.</p>
            </li><li class="listitem">
               <p>Programe operações de gravação simultâneas cuidadosamente. Para obter mais informações, consulte <a href="./c_Concurrent_writes.html">Gerenciamento de operações de gravação simultâneas</a>.</p>
            </li></ul></div>
      <h2 id="queries-troubleshooting-query-takes-too-long">A consulta leva muito tempo</h2>
         
         <p>Sua consulta pode demorar muito tempo pelos motivos a seguir, sugerimos as abordagens de solução de problemas que se seguem.</p>
          
            <h6>As tabelas não estão otimizadas</h6>
            <p>Defina a chave de classificação, estilo de distribuição e codificação de compactação das tabelas para aproveitar a vantagem completa do processamento paralelo. Para obter mais informações, consulte <a href="./t_Creating_tables.html">Trabalhar com otimização automática de tabelas</a>. </p>
          
          
            <h6>A consulta esta gravando em disco</h6>
            <p>Suas consultas podem estar gravando em disco para, pelo menos, parte da execução da consulta. Para obter mais informações, consulte <a href="./query-performance-improvement-opportunities.html">Melhoria do performance de consultas do </a>.</p>
          
          
            <h6>A consulta deve esperar a conclusão de outras consultas</h6>
            <p>Você pode melhorar a performance geral do sistema criando filas de consultas e atribuindo tipos de consultas diferentes para as filas adequadas. Para obter mais informações, consulte <a href="./cm-c-implementing-workload-management.html">Como implementar o gerenciamento do workload</a>. </p>
          
          
            <h6>As consultas não estão otimizadas</h6>
            <p>Analise o plano de explicação para encontrar oportunidades para reescrever consultas ou otimizar o banco de dados. Para obter mais informações, consulte <a href="./c-the-query-plan.html">Plano de consulta</a>.</p>
          
          
            <h6>A consulta precisa de mais memória para execução</h6>
            <p>Se uma consulta específica precisa de mais memória, você pode ampliar a memória disponível aumentando o <a href="./r_wlm_query_slot_count.html">wlm_query_slot_count</a>. </p>
          
          
            <h6>O banco de dados exige a execução de um comando VACUUM</h6>
            <p>Execute o comando VACUUM sempre que você adicionar, excluir ou modificar um grande número de linhas, a menos que carregue seus dados por ordem de chave de classificação. O comando VACUUM reorganiza seus dados para manter a ordem de classificação e restaurar a performance. Para obter mais informações, consulte <a href="./t_Reclaiming_storage_space202.html">Vacuum de tabelas</a>.</p>
          

         <h3 id="queries-troubleshooting-cross-refs">Recursos adicionais para solucionar problemas com consultas de longa duração</h3>
            <p>Veja a seguir os tópicos de visualização do sistema e outras seções da documentação que são úteis para o ajuste de consultas:</p>
            <div class="itemizedlist">
                
                
                
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p>A visualização do sistema <a href="./r_STV_INFLIGHT.html">STV_INFLIGHT</a> mostra quais consultas estão sendo executadas no cluster. Pode ser útil usá-la junto com <a href="./r_STV_RECENTS.html">STV_RECENTS</a> para determinar quais consultas estão em execução ou foram concluídas recentemente.</p></li><li class="listitem"><p><a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a> é útil para a solução de problemas. Ele mostra consultas DDL e DML com propriedades relevantes, como seu status atual (por exemplo, <code class="code">running</code> ou <code class="code">failed</code>), o tempo que cada uma levou para ser executada e se uma consulta foi executada em um cluster de escalabilidade simultânea.</p></li><li class="listitem"><p><a href="./r_STL_QUERYTEXT.html">STL_QUERYTEXT</a> captura o texto da consulta para os comandos SQL. Além disso, <a href="./r_SVV_QUERY_INFLIGHT.html">SVV_QUERY_INFLIGHT</a>, que une STL_QUERYTEXT a STV_INFLIGHT, mostra mais metadados de consulta.</p></li><li class="listitem"><p>Um conflito de bloqueio de transação pode ser uma possível fonte de problemas de performance da consulta. Para obter informações sobre transações que no momento mantêm bloqueios em tabelas, consulte <a href="./r_SVV_TRANSACTIONS.html">SVV_TRANSACTIONS</a>.</p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/redshift/latest/dg/diagnostic-queries-for-query-tuning.html#identify-queries-that-are-top-candidates-for-tuning">Identificar consultas que são os principais candidatos para ajuste</a> fornece uma consulta de solução de problemas que ajuda a determinar quais consultas executadas recentemente consumiram mais tempo. Isso pode ajudar você a concentrar seus esforços em questões que precisam ser melhoradas.</p></li><li class="listitem"><p>Se você quiser explorar mais o gerenciamento de consultas e entender como gerenciar filas de consultas, <a href="./cm-c-implementing-workload-management.html">Como implementar o gerenciamento do workload</a> mostra como fazer isso. O gerenciamento da workload é um atributo avançado, e recomendamos o gerenciamento automatizado da workload na maioria dos casos.</p></li></ul></div>
          
         
         
      <h2 id="queries-troubleshooting-load-fails">Falha do carregamento</h2>
         
         <p>Seu carregamento de dados pode falhar pelos motivos a seguir; sugerimos as abordagens de solução de problemas que se seguem.</p>
          
            <h6>A origem dos dados está em uma região d  AWS diferente</h6>
            <p>Por padrão, o bucket do Amazon S3 ou a tabela Amazon DynamoDB especificada no comando COPY deve estar na mesma região da AWS do cluster. Se os seus dados e seu cluster estiverem em regiões diferentes, você receberá um erro similar ao seguinte: </p>
          
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">The bucket you are attempting to access must be addressed using the specified endpoint.</code></pre>
         <p>Se possível, o cluster e a origem dos dados devem estar na mesma região. Você pode especificar uma região diferente usando a opção <a href="./copy-parameters-data-source-s3.html#copy-region">REGION</a> com o comando COPY. </p>
         
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se o seu cluster e sua fonte de dados estiverem em regiões diferentes da AWS, você terá custos de transferência de dados. Você também terá maior latência.</p></div></div>
          
            <h6>Falha do comando COPY</h6>
            <p>Consulte STL_LOAD_ERRORS para descobrir erros que ocorreram durante os carregamentos específicos. Para obter mais informações, consulte <a href="./r_STL_LOAD_ERRORS.html">STL_LOAD_ERRORS</a>.</p>
          
      <h2 id="queries-troubleshooting-load-takes-too-long">O carregamento leva muito tempo</h2>
         
         <p>Sua operação de carregamento pode levar muito tempo pelos motivos a seguir; sugerimos as abordagens de solução de problemas que se seguem.</p>
          
            <h6>COPY carrega dados de um único arquivo</h6>
            <p>Divida seus dados de carregamento em vários arquivos. Quando você carrega todos os dados de um único arquivo grande, o Amazon Redshift é forçado a executar um carregamento serializado, que é muito mais lento. O número de arquivos deve ser um múltiplo do número de fatias em seu cluster e os arquivos devem ter aproximadamente o mesmo tamanho, entre 1 MB e 1 GB após a compactação. Para obter mais informações, consulte <a href="./c_designing-queries-best-practices.html">Práticas recomendadas do Amazon Redshift para criar consultas</a>.</p>
          
          
            <h6>A operação de carregamento usa vários comandos COPY</h6>
            <p>Se você usar vários comandos COPY simultâneos para carregar uma tabela de vários arquivos, o Amazon Redshift é forçado a executar um carregamento serializado, que é muito mais lento. Nesse caso, use um único comando COPY.</p>
          
      <h2 id="queries-troubleshooting-load-data-incorrect">Os dados de carregamento estão incorretos</h2>
         
         <p>Sua operação COPY pode carregar dados incorretos das formas a seguir; sugerimos as abordagens de solução de problemas que se seguem.</p>
         
          
            <h6>Arquivos errados são carregados</h6>
            <p>O uso de um prefixo de objeto para especificar arquivos de dados pode causar a leitura de arquivos indesejados. Em vez disso, use um arquivo manifesto para especificar exatamente quais arquivos devem ser carregados. Para obter mais informações, consulte a opção <a href="./copy-parameters-data-source-s3.html#copy-manifest-file">copy_from_s3_manifest_file</a> para o comando COPY e <a href="./r_COPY_command_examples.html#copy-command-examples-manifest">Example: COPY from Amazon S3 using a manifest</a> nos exemplos de COPY.</p>
          
      <h2 id="set-the-JDBC-fetch-size-parameter">Como configurar o parâmetro JDBC para o tamanho da busca</h2>
         
         <p>Por padrão, o driver JDBC coleta todos os resultados de uma consulta ao mesmo tempo. Como resultado, quando você tenta recuperar um grande conjunto de resultados por meio de uma conexão JDBC, pode encontrar um erro de falta de memória por parte do cliente. Para habilitar seu cliente para recuperar conjuntos de resultados em lotes em vez de em uma única busca tudo ou nada, configure o parâmetro JDBC para o tamanho de busca em seu aplicativo cliente.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>O tamanho de busca não é compatível com ODBC.</p></div></div>
         <p>Para obter uma melhor performance, defina o tamanho de busca como o maior valor que não resulte em erros de falta de memória. Um valor menor de tamanho de busca resulta em mais viagens do servidor, o que prolonga os tempos de execução. O servidor reserva recursos, incluindo a vaga de consulta WLM e memória associada, até que o cliente recupere todo o conjunto de resultados ou até que a consulta seja cancelada. Quando você ajusta o tamanho de busca adequadamente, esses recursos são liberados mais rapidamente, disponibilizando-os para outras consultas.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se você precisar extrair grandes conjuntos de dados, recomendamos o uso de uma instrução <a href="./r_UNLOAD.html">UNLOAD</a> para transferir os dados para o Amazon S3. Quando você usa UNLOAD, os nós de computação funcionam em paralelo para acelerar a transferência de dados.</p></div></div>
         <p>Para obter mais informações sobre a configuração do parâmetro JDBC para o tamanho de busca, acesse <a href="https://jdbc.postgresql.org/documentation/query/#getting-results-based-on-a-cursor" rel="noopener noreferrer" target="_blank"><span>Obtenção de resultados com base em um cursor</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> na documentação do PostgreSQL.</p>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./diagnostic-queries-for-query-tuning.html">Consultas de diagnóstico para ajuste da consulta</div><div id="next" class="next-link" accesskey="n" href="./cm-c-implementing-workload-management.html">Como implementar o gerenciamento do workload</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>