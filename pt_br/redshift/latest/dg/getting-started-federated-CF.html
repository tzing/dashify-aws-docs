<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Conceitos básicos do uso de consultas federadas no PostgreSQL com o AWS CloudFormation - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="getting-started-federated-CF" /><meta name="default_state" content="getting-started-federated-CF" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-federated-CF.html" /><meta name="description" content="Automatize a configuração de consulta federada no Amazon Redshift usando uma pilha do AWS CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-federated-CF.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/getting-started-federated-CF.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/getting-started-federated-CF.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/getting-started-federated-CF.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/getting-started-federated-CF.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/getting-started-federated-CF.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/getting-started-federated-CF.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/getting-started-federated-CF.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/getting-started-federated-CF.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/getting-started-federated-CF.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/getting-started-federated-CF.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/getting-started-federated-CF.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/getting-started-federated-CF.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/getting-started-federated-CF.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/getting-started-federated-CF.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/getting-started-federated-CF.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/getting-started-federated-CF.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-federated-CF.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-federated-CF.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/getting-started-federated-CF.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/getting-started-federated-CF.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/getting-started-federated-CF.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Conceitos básicos do uso de consultas federadas no PostgreSQL com o AWS CloudFormation" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Conceitos básicos do uso de consultas federadas no PostgreSQL com o AWS CloudFormation - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#getting-started-federated-CF" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-federated-CF.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-federated-CF.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-federated-CF.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Consultar dados com consultas federadas no Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/federated-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Conceitos básicos do uso de consultas federadas no PostgreSQL com o AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/federated-overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#getting-started-federated-CF" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#getting-started-federated-CF-stack">Iniciar uma pilha do CloudFormation para consultas federadas do Redshift</a><a href="#getting-started-federated-CF-stack-query">Consultar dados do esquema externo</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="getting-started-federated-CF">Conceitos básicos do uso de consultas federadas no PostgreSQL com o AWS CloudFormation</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>É possível usar consultas federadas para consultar bancos de dados operacionais. Neste guia de conceitos básicos, você pode automatizar a configuração usando uma pilha de exemplo do AWS CloudFormation para habilitar uma consulta federada de um cluster do Amazon Redshift para um banco de dados sem servidor do Aurora PostgreSQL. Você pode iniciar a execução rapidamente sem precisar executar instruções SQL para provisionar seus recursos.</p><p>A pilha cria um esquema externo, referenciando sua instância do Aurora PostgreSQL, que inclui tabelas com amostra de dados. É possível consultar tabelas no esquema externo pelo cluster do Redshift.</p><p>Caso prefira começar a usar consultas federadas executando instruções SQL para configurar um esquema externo, sem usar o CloudFormation, consulte <a href="./getting-started-federated.html">Conceitos básicos do uso de consultas federadas no PostgreSQL</a>.</p><p>Antes de executar a pilha do CloudFormation para consultas federadas, certifique-se de ter um banco de dados sem servidor Amazon Aurora edição compatível com PostgreSQL com a API Data ativada. Ative a API Data nas propriedades do banco de dados. Se não conseguir encontrar a configuração, verifique se está executando uma instância sem servidor do Aurora PostgreSQL. Certifique-se também de que tem um cluster do Amazon Redshift que use nós RA3. Recomendamos que tanto o cluster do Redshift como a instância do Aurora PostgreSQL sem servidor estejam na mesma Virtual Private Cloud (VPC) e grupo de sub-rede. Dessa forma, você pode adicionar o grupo de segurança para o cluster Amazon Redshift às regras de entrada do grupo de segurança para sua instância de banco de dados do Aurora PostgreSQL.</p><p>Para obter mais informações sobre conceitos básicos da configuração de um cluster do Amazon Redshift, consulte <a href="https://docs.aws.amazon.com/redshift/latest/gsg/getting-started.html">Conceitos básicos do Amazon Redshift</a>. Para obter mais informações sobre configurar recursos com o CloudFormation, consulte <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html">O que é o AWS CloudFormation?</a>. Para obter mais informações sobre a configuração de um banco de dados do Aurora, consulte <a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-serverless.create.html">Criar um cluster de banco de dados do Aurora Serverless v1</a>.</p>
         <h2 id="getting-started-federated-CF-stack">Iniciar uma pilha do CloudFormation para consultas federadas do Redshift</h2>
         <p>Use o procedimento a seguir para iniciar a pilha do CloudFormation para o Amazon Redshift a fim de habilitar consultas federadas. Antes, certifique-se de que o cluster do Amazon Redshift e a instância do Aurora PostgreSQL sem servidor estão configurados.</p>
         
         
         <div class="procedure"><h6>Para iniciar uma pilha do CloudFormation para consultas federadas</h6><ol><li><p>Clique em <a href="https://console.aws.amazon.com/cloudformation/home?#/stacks/new?stackName=FederatedQuery&amp;templateURL=https://s3.amazonaws.com/redshift-downloads/docs-downloads/FederatedQuery.yml" rel="noopener noreferrer" target="_blank"><span><b>Launch CFN stack</b></span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> (Iniciar a pilha CFN) aqui para iniciar o serviço CloudFormation no AWS Management Console. </p>
               <p>Se for solicitado, faça login.</p>
               <p>Inicia-se o processo de criação de pilha, fazendo referência a um arquivo de template do CloudFormation, que é armazenado no Amazon S3. O <em>template</em> do CloudFormation é um arquivo de texto em formato JSON que declara os recursos da AWS que compõem uma pilha. </p></li><li><p>Selecione <b>Next</b> (Próximo) Para inserir os detalhes da pilha.</p></li><li>
               <p>Em <b>Parameters</b> (Parâmetros), para o cluster, insira o seguinte:</p>
               
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>O nome do cluster do Amazon Redshift, por exemplo <code class="userinput">ra3-consumer-cluster</code></p>
                  </li><li class="listitem">
                     <p>Um nome do banco de dados específico, por exemplo <code class="userinput">dev</code></p>
                  </li><li class="listitem">
                     <p>O nome de um usuário do banco de dados, por exemplo <code class="userinput">consumeruser</code></p>
                  </li></ul></div>
               <p>Insira também os parâmetros para o banco de dados do Aurora, inclusive usuário, o nome do banco de dados, a porta e o endpoint. Recomendamos usar um cluster de teste e testar o banco de dados sem servidor, pois a pilha criará vários objetos de banco de dados.</p>
               <p>Escolha <b>Next</b> (Próximo). </p>
               <p>São exibidas as opções de pilha. </p></li><li><p>Selecione <b>Next</b> (Próximo) para aceitar as configurações padrão.</p></li><li><p>Em <b>Capabilities</b> (Capacidades), escolha <b>I acknowledge that AWS CloudFormation might create IAM resources</b> (Estou ciente de que o pode criar recursos do IAM).</p></li><li><p>Selecione <b>Criar pilha</b>. </p></li></ol></div>

         <p>Selecione <b>Criar pilha</b>. O CloudFormation provisiona os recursos do template, o que leva cerca de 10 minutos, e cria um esquema externo.</p>
         
         
         <p>Se ocorrer um erro durante a criação da pilha, faça o seguinte:</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Acesse a guia <b>Events</b> (Eventos) do CloudFormation para obter informações que podem ajudar você a solucionar o erro.</p></li><li class="listitem"><p>Verifique se inseriu o nome correto, o nome do banco de dados e o nome de usuário do banco de dados do cluster do Redshift. Confira também os parâmetros para a instância do Aurora PostgreSQL.</p></li><li class="listitem"><p>Verifique se o cluster tem nós RA3.</p></li><li class="listitem"><p>Certifique-se de que o banco de dados e o cluster do Redshift estejam na mesma sub-rede e no mesmo grupo de segurança.</p></li></ul></div>
       
         <h2 id="getting-started-federated-CF-stack-query">Consultar dados do esquema externo</h2>
     
         <p>Para usar o procedimento a seguir, verifique se você tem as permissões necessárias para executar consultas no cluster e no banco de dados descrito.</p>
         
         <div class="procedure"><h6>Para consultar um banco de dados externo com consulta federada</h6><ol><li><p>Conecte-se ao banco de dados do Redshift que você inseriu ao criar a pilha, usando uma ferramenta cliente, como o editor de consultas do Redshift. </p></li><li><p>Realize a consulta para o esquema externo criado pela pilha.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from svv_external_schemas;</code></pre>
               <p>A visualização <a href="./r_SVV_EXTERNAL_SCHEMAS.html">SVV_EXTERNAL_SCHEMAS</a> retorna informações sobre esquemas externos disponíveis. Nesse caso, o esquema externo criado pela pilha é retornado, <code class="code">myfederated_schema</code>. Outros esquemas externos também poderão ser retornados, se houver alguma configuração. A visualização também retorna o banco de dados associado do esquema. O banco de dados é o banco de dados do Aurora que você inseriu ao criar a pilha. A pilha adiciona uma tabela ao banco de dados do Aurora, chamada <code class="code">category</code>, e outra tabela chamada <code class="code">sales</code>.</p>
            </li><li>
               <p>Execute consultas SQL em tabelas do esquema externo que referencia os bancos de dados do Aurora PostgreSQL. O exemplo a seguir mostra uma consulta.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT count(*) FROM myfederated_schema.category;</code></pre>
               <p>A tabela <code class="code">category</code> retorna vários registros. Também é possível retornar registros da tabela <code class="code">sales</code>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT count(*) FROM myfederated_schema.sales;</code></pre>
               <p>Para obter mais exemplos, consulte <a href="./federated_query_example.html">Exemplo de uso de uma consulta federada</a>.</p>
            </li></ol></div>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./getting-started-federated.html">Conceitos básicos do uso de consultas federadas no PostgreSQL</div><div id="next" class="next-link" accesskey="n" href="./getting-started-federated-mysql.html">Conceitos básicos do uso de consultas federadas no MySQL</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-federated-CF.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-federated-CF.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>