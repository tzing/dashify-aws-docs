<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE FUNCTION - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_FUNCTION" /><meta name="default_state" content="r_CREATE_FUNCTION" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="CREATE FUNCTION" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE FUNCTION - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_CREATE_FUNCTION" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referência SQL",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Comandos SQL",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE FUNCTION",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_CREATE_FUNCTION" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#r_CREATE_FUNCTION-privileges">Privilégios obrigatórios</a><a href="#r_CREATE_FUNCTION-synopsis">Sintaxe</a><a href="#r_CREATE_FUNCTION-parameters">Parâmetros</a><a href="#r_CREATE_FUNCTION-usage-notes">Observações de uso</a><a href="#r_CREATE_FUNCTION-examples">Exemplos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_CREATE_FUNCTION">CREATE FUNCTION</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p> </p><p>Crie uma nova função definida pelo usuário (UDF) escalar usando uma cláusula SQL SELECT ou um programa Python.</p><p>Para ter mais informações e exemplos, consulte <a href="./user-defined-functions.html">Criação de funções definidas pelo usuário</a>.</p>
         <h2 id="r_CREATE_FUNCTION-privileges">Privilégios obrigatórios</h2>
         <p>A seguir estão os privilégios obrigatórios para CREATE FUNCTION:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Para CREATE FUNCTION:</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>O superusuário pode usar linguagens confiáveis e não confiáveis para criar funções.</p></li><li class="listitem"><p>Usuários com o privilégio de CREATE [ OR REPLACE ] FUNCTION podem criar funções com linguagens confiáveis.</p></li></ul></div>
            </li><li class="listitem"><p>Para REPLACE FUNCTION:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>Superusuário</p></li><li class="listitem"><p>Usuários com o privilégio CREATE [ OR REPLACE ] FUNCTION</p></li><li class="listitem"><p>Proprietário da função</p></li></ul></div>
            </li></ul></div>
       
         <h2 id="r_CREATE_FUNCTION-synopsis">Sintaxe</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE [ OR REPLACE ] FUNCTION <em>f_function_name</em>
( <span>{</span> [<em>py_arg_name</em> <em> py_arg_data_type</em> |
<em>sql_arg_data_type</em> } [ , ... ] ] )
RETURNS <em>data_type</em>
<span>{</span> VOLATILE | STABLE | IMMUTABLE }
AS $$
  <span>{</span> <em>python_program</em> | <em>SELECT_clause</em> }
$$ LANGUAGE <span>{</span> plpythonu | sql }</code></pre>
       
         <h2 id="r_CREATE_FUNCTION-parameters">Parâmetros</h2>
         <div class="variablelist">
             
             
             
             
             
             
             
             
             
         <dl>
               <dt><span class="term">OR REPLACE</span></dt>
               <dd>
                  <p>Especifica que, se uma função com os mesmos tipos de dados de argumento de nome e entrada, ou <em>assinatura</em>, como esta já existir, a função existente será substituída. Você só pode substituir uma função por uma nova função que defina um conjunto idêntico de tipos de dados. É preciso ser um superusuário para substituir uma função.</p>
                  <p>Se uma função for definida com o mesmo nome que uma função existente mas com uma assinatura diferente, uma nova função será criada. Em outras palavras, o nome da função fica sobrecarregado. Para obter mais informações, consulte <a href="./udf-naming-udfs.html#udf-naming-overloading-function-names">Sobrecarga de nomes de função</a>.</p>
               </dd>
             
               <dt><span class="term"> <em>f_nome_função</em> </span></dt>
               <dd>
                  <p>Nome da função. Se você especificar um nome de esquema (como <code class="code">myschema.myfunction</code>), a função será criada usando o esquema especificado. Caso contrário, a função será criada no esquema atual. Para obter mais informações sobre nomes válidos, consulte <a href="./r_names.html">Nomes e identificadores</a>.</p>
                  <p>Recomendamos que você prefixe os nomes de todos os UDF com <code class="code">f_</code>. O Amazon Redshift reserva o prefixo <code class="code">f_</code> para nomes UDF, portanto, usando o prefixo <code class="code">f_</code>, você garante que seu nome UDF não entrará em conflito com nenhum nome de função SQL integrado do Amazon Redshift existente ou futuro. Para obter mais informações, consulte <a href="./udf-naming-udfs.html">Nomeação de UDFs</a>.</p>
                  <p>Você pode definir mais de uma função com o mesmo nome se os tipos de dados dos argumentos de entrada forem diferentes. Em outras palavras, o nome da função fica sobrecarregado. Para obter mais informações, consulte <a href="./udf-naming-udfs.html#udf-naming-overloading-function-names">Sobrecarga de nomes de função</a>.</p>
               </dd>
             
               <dt><span class="term"> <em>py_arg_name py_arg_data_type | sql_arg_data type</em> </span></dt>
               <dd>
                  <p>Para uma UDF Python, uma lista de nomes de argumento de entrada e tipos de dados. Para uma UDF SQL, uma lista de tipos de dados sem nomes de argumento. Em uma UDF Python, consulte argumentos usando nomes de argumento. Em uma UDF SQL, consulte argumentos usando $1, $2, etc. com base na ordem dos argumentos na lista de argumentos. </p>
                  <p>Para uma UDF SQL, os tipos de dados de entrada e de retorno podem ser qualquer tipo de dados padrão do Amazon Redshift. Para uma UDF Python, os tipos de dados de entrada e retorno podem ser SMALLINT, INTEGER, BIGINT, DECIMAL, REAL, DOUBLE PRECISION, BOOLEAN, CHAR, VARCHAR, DATE ou TIMESTAMP. Além disso, as funções definidas pelo usuário (UDFs) do Python são compatíveis com um tipo de dados ANYELEMENT. Ele é convertido automaticamente em um tipo de dados padrão com base no tipo de dados do argumento correspondente fornecido no tempo de execução. Se vários argumentos usarem ANYELEMENT, todos encontrarão o mesmo tipo de dados no tempo de execução, com base no primeiro argumento ANYELEMENT da lista. Para obter mais informações, consulte <a href="./udf-data-types.html">Tipos de dados da UDF Python</a> e <a href="./c_Supported_data_types.html">Tipos de dados</a>.</p>

                  <p>Você pode especificar um máximo de 32 argumentos.</p>
               </dd>
             
               <dt><span class="term"> RETURNS <em>tipo_dados</em> </span></dt>
               <dd>
                  <p>Tipo de dados do valor retornado pela função. O tipo de dados RETURNS pode ser qualquer tipo de dados padrão do Amazon Redshift. Além disso, as UDFs Python podem usar um tipo de dados ANYELEMENT, que é convertido automaticamente em um tipo de dados padrão com base no argumento fornecido no tempo de execução. Se você especificar ANYELEMENT para o tipo de dados de retorno, pelo menos um argumento deverá usar ANYELEMENT. O tipo de dados de retorno corresponde ao tipo de dados fornecido pelo argumento ANYELEMENT quando a função for chamada. Para obter mais informações, consulte <a href="./udf-data-types.html">Tipos de dados da UDF Python</a>.</p>
               </dd>
             
               <dt><span class="term"> VOLATILE | STABLE | IMMUTABLE </span></dt>
               <dd>
                  <p>Informa o otimizador de consulta sobre a volatilidade da função. </p>
                  <p>Você terá a melhor otimização se identificar sua função com a categoria mais restrita de volatilidade válida para ela. Entretanto, se a categoria for restrita demais, o otimizador poderá ignorar erroneamente algumas chamadas, o que resultará em um conjunto incorreto de resultados. Por ordem de nível de restrição, começando a partir da menos restrita, as categorias são:</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>VOLATILE</p>
                     </li><li class="listitem">
                        <p>STABLE</p>
                     </li><li class="listitem">
                        <p>IMMUTABLE</p>
                     </li></ul></div>
                  
                  <p>VOLATILE</p>
                  <p>Dados os mesmos argumentos, a função pode retornar resultados diferentes em chamadas sucessivas, mesmo para as linhas em uma única instrução. O otimizador de consulta não pode fazer suposições sobre o comportamento de uma função volátil, portanto, uma consulta que usa uma função volátil deve reavaliar a função para cada linha de entrada.</p>
                  <p>STABLE</p>
                  <p>Dados os mesmos argumentos, a função certamente retorna os mesmos resultados para todas as linhas processadas em uma única instrução. A função pode retornar resultados diferentes quando chamada em instruções diferentes. Esta categoria permite que o otimizador aperfeiçoe várias chamadas da função em uma única instrução para uma única chamada da instrução. </p>
                  <p>IMMUTABLE</p>
                  <p>Dados os mesmos argumentos, a função sempre retorna o mesmo resultado. Quando uma consulta chama uma função <code class="code">IMMUTABLE</code> com argumentos constantes, o otimizador faz uma avaliação prévia da função.</p>
               </dd>
             
               <dt><span class="term">AS $$ <em>instrução</em> $$</span></dt>
               <dd>
                  <p> Uma construção que delimita a instrução a ser executada. As palavras-chave literais <code class="code">AS $$</code> e <code class="code">$$</code> são obrigatórias. </p>
                  <p>O Amazon Redshift exige que você inclua a instrução na sua função usando um formato chamado cotação de dólar. Qualquer item incluído na instrução é aprovado exatamente como está. Não é preciso inserir caracteres de escape antes dos caracteres especiais, pois o conteúdo da string é gravado literalmente. </p>
                  <p> Com a <em>cotação de dólar</em>, um par de símbolos de cifrão ($$) deve ser usado no início e no final da instrução para que ela seja executada, conforme exibido no exemplo a seguir. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$$ <code class="replaceable">my statement</code> $$</code></pre>
                  <p> Como opção, entre cada par de símbolos de cifrão, você pode especificar uma string para ajudar a identificar a instrução. A string que você usa deve ser a mesma no início e no final dos pares de sinais. A sequência diferencia maiúsculas de minúsculas e segue as mesmas restrições de um identificador sem aspas, com a exceção de que não pode conter cifrões. O exemplo a seguir usa a string <code class="code">test</code>. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$test$ <code class="replaceable">my statement</code> $test$</code></pre>

                  <p>Para obter mais informações sobre o uso de símbolos de cifrão, consulte “Constantes de string entre símbolos de cifrão” em <a href="https://www.postgresql.org/docs/9.4/static/sql-syntax-lexical.html" rel="noopener noreferrer" target="_blank"><span>Estrutura lexical</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> na documentação do PostgreSQL. </p>
               </dd>
             
               <dt><span class="term"><em>programa_python</em> </span></dt>
               <dd>
                  <p>Programa executável válido em Python que retorna um valor. A instrução que você aprovar com a função deve estar em conformidade com os requisitos de recuo como especificado no <a href="https://www.python.org/dev/peps/pep-0008/#indentation" rel="noopener noreferrer" target="_blank"><span>Guia de estilo do código Python</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> no site do Python. Para obter mais informações, consulte <a href="./udf-python-language-support.html">Suporte da linguagem Python para UDFs</a>.</p>
               </dd>
             
               <dt><span class="term"><em>SQL_clause</em> </span></dt>
               <dd>
                  <p>Uma cláusula SQL SELECT.</p>
                  <p>A cláusula SELECT não pode conter estes tipos de cláusulas:</p>
                  <div class="itemizedlist">
                      
                      
                      
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>FROM</p>
                     </li><li class="listitem">
                        <p>INTO</p>
                     </li><li class="listitem">
                        <p>WHERE</p>
                     </li><li class="listitem">
                        <p>GROUP BY</p>
                     </li><li class="listitem">
                        <p>ORDER BY</p>
                     </li><li class="listitem">
                        <p>LIMIT</p>
                     </li></ul></div>
               </dd>
             
               <dt><span class="term">LANGUAGE <span>{</span> plpythonu | sql } </span></dt>
               <dd>
                  <p>Para Python, especifique <code class="code">plpythonu</code>. Para SQL, especifique <code class="code">sql</code>. Você deve ter permissão de uso na linguagem para SQL ou plpythonu. Para obter mais informações, consulte <a href="./udf-security-and-privileges.html">Segurança e privilégios de UDF</a>.</p>
               </dd>
            </dl></div>
       
         <h2 id="r_CREATE_FUNCTION-usage-notes">Observações de uso</h2>
          
            <h3 id="r_CREATE_FUNCTION-usage-notes-nested-functions">Funções aninhadas</h3>
            <p>Você pode chamar outra função definida pelo usuário (UDF) SQL a partir de uma UDF SQL. A função aninhada deve existir quando você executa o comando CREATE FUNCTION. O Amazon Redshift não rastreia as dependências das UDFs, portanto, se você remover a função aninhada, o Amazon Redshift não retornará um erro. Contudo, a UDF falhará se a função aninhada não existir. Por exemplo, a função a seguir chama a função <code class="code">f_sql_greater
               </code>na cláusula SELECT.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_sql_commission (float, float )
  returns float
stable
as $$
  select f_sql_greater ($1, $2)
$$ language sql;</code></pre>
          
          
            <h3 id="r_CREATE_FUNCTION-usage-notes-security-and-privileges">Segurança e privilégios de UDF</h3>
            <p>Para criar uma UDF, você deve ter permissão de uso na linguagem para SQL ou plpythonu (Python). Por padrão, USAGE ON LANGUAGE SQL é concedido para PUBLIC. No entanto, é necessário conceder explicitamente USAGE ON LANGUAGE PLPYTHONU a usuários ou grupos específicos. </p>
            <p>Para revogar o uso na SQL, revogue primeiro o uso em PUBLIC. Depois, conceda o uso na SQL somente a usuários ou grupos específicos que tenham permissão para criar UDFs SQL. O exemplo a seguir revoga o uso na SQL em PUBLIC e concede o uso ao grupo de usuários <code class="code">udf_devs</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">revoke usage on language sql from PUBLIC;
grant usage on language sql to group udf_devs;</code></pre>
            <p>Para executar uma UDF, é necessário ter permissão de execução em cada função. Por padrão, a permissão de execução de novas UDFs é concedida a PUBLIC. Para restringir o uso, revogue a execução da permissão de PUBLIC para a função. Depois, conceda o privilégio a pessoas ou grupos específicos. </p>
            <p>Este exemplo revoga a permissão de execução da função <code class="code">f_py_greater</code> em PUBLIC e concede o uso ao grupo de usuários <code class="code">udf_devs</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">revoke execute on function f_py_greater(a float, b float) from PUBLIC;
grant execute on function f_py_greater(a float, b float) to group udf_devs;</code></pre>
            <p>Os superusuários têm todos os privilégios por padrão. </p>
            <p>Para obter mais informações, consulte <a href="./r_GRANT.html">GRANT</a> e <a href="./r_REVOKE.html">REVOKE</a>.</p>
          
       
         <h2 id="r_CREATE_FUNCTION-examples">Exemplos</h2>
          
            <h3 id="r_CREATE_FUNCTION-python-example">Exemplo de UDF Python escalar</h3>
            <p>O exemplo a seguir cria uma UDF Python que compara dois inteiros e retorna o valor maior.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_py_greater (a float, b float)
  returns float
stable
as $$
  if a &gt; b:
    return a
  return b
$$ language plpythonu;</code></pre>
            <p>O exemplo a seguir consulta a tabela SALES e chama a nova função <code class="code">f_py_greater</code> para retornar COMMISSION ou 20% de PRICEPAID, o que for maior.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select f_py_greater (commission, pricepaid*0.20) from sales;</code></pre>
          
          
            <h3 id="r_CREATE_FUNCTION-sql-example">Exemplo de UDF SQL escalar</h3>
            <p>O seguinte exemplo cria uma função que compara dois números e retorna o maior valor. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_sql_greater (float, float)
  returns float
stable
as $$
  select case when $1 &gt; $2 then $1
    else $2
  end
$$ language sql;</code></pre>
            <p>A consulta a seguir chama a nova função <code class="code">f_sql_greater</code> para consultar a tabela SALES e retorna COMMISSION ou 20% de PRICEPAID, o que for maior.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select f_sql_greater (commission, pricepaid*0.20) from sales;</code></pre>
          
         
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_EXTERNAL_VIEW.html">CREATE EXTERNAL VIEW (visualização)</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_GROUP.html">CREATE GROUP</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>