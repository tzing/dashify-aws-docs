<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Compartilhar dados em uma Conta da AWS - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="within-account" /><meta name="default_state" content="within-account" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" /><meta name="description" content="Você pode compartilhar dados para fins de leitura em diferentes clusters do Amazon Redshift em uma Conta da AWS." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/within-account.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/within-account.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/within-account.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/within-account.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/within-account.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/within-account.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/within-account.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/within-account.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/within-account.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/within-account.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/within-account.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/within-account.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Compartilhar dados em uma Conta da AWS" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Compartilhar dados em uma Conta da AWS - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#within-account" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Compartilhar dados entre clusters no Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/datashare-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Gerenciamento de tarefas de compartilhamento de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-datashare.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Gerenciamento de compartilhamento de dados usando a interface do SQL",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-datashare-sql.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Compartilhar dados em uma Conta da AWS",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/getting-started-datashare-sql.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#within-account" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="within-account">Compartilhar dados em uma Conta da AWS</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Você pode compartilhar dados para fins de leitura em diferentes clusters do Amazon Redshift em uma Conta da AWS.</p><div class="procedure"><h6>Para compartilhar dados para fins de leitura como administrador de cluster de produtores ou proprietário de banco de dados</h6><ol><li><p>Crie datashares no seu cluster. Para obter mais informações, consulte <a href="./r_CREATE_DATASHARE.html">CREATE DATASHARE</a>.</p>
            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATASHARE salesshare;</code></pre>
            <p>Superusuário de cluster e proprietários de banco de dados podem criar conjuntos de dados. Cada datashare é associado a um banco de dados durante a criação. Somente objetos desse banco de dados podem ser compartilhados nesse datashare. Vários datashares podem ser criados no mesmo banco de dados com a mesma granularidade ou diferente de objetos. Não há limite para o número de datashares que um cluster pode criar.</p>
            <p>Também é possível usar o console do Amazon Redshift para criar datashares. Para obter mais informações, consulte <a href="./datashare-creation.html#create-datashare-console">Criar datashares</a>.</p>
      </li><li><p>Delegue permissões para operar no datashare. Para obter mais informações, consulte <a href="./r_GRANT.html">GRANT</a> ou <a href="./r_REVOKE.html">REVOKE</a>.</p>

            <p>O exemplo a seguir concede permissões para <code class="code">dbuser</code> em <code class="code">salesshare</code>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT ALTER, SHARE ON DATASHARE salesshare TO dbuser;</code></pre>

            <p>Os superusuários do cluster e os proprietários da unidade de compartilhamento de dados podem conceder ou revogar permissões de modificação na unidade de compartilhamento de dados para usuários adicionais.</p>
      </li><li><p>Adicione ou remova objetos do datashare. Para adicionar objetos a um datashare, adicione o esquema antes de adicionar objetos. Quando você adiciona um esquema, o Amazon Redshift não adiciona todos os objetos abaixo dele. Adicione esses dados explicitamente. Para obter mais informações, consulte <a href="./r_ALTER_DATASHARE.html">ALTER DATASHARE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare ADD SCHEMA PUBLIC;
ALTER DATASHARE salesshare ADD TABLE public.tickit_sales_redshift;
ALTER DATASHARE salesshare ADD ALL TABLES IN SCHEMA PUBLIC;</code></pre>
            
            <p>Você também pode adicionar visualizações a um datashare.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE VIEW public.sales_data_summary_view AS SELECT * FROM public.tickit_sales_redshift;
ALTER DATASHARE salesshare ADD TABLE public.sales_data_summary_view;</code></pre>

         
            <p>Use ALTER DATASHARE para compartilhar esquemas, tabelas, visualizações e funções em um determinado esquema. Os superusuários, os proprietários da unidade de compartilhamento de dados ou os usuários que têm a permissão ALTER ou ALL na unidade de compartilhamento de dados podem alterar a unidade de compartilhamento de dados para adicionar objetos ou remover objetos. Os usuários devem ter permissões para adicionar ou remover objetos da unidade de compartilhamento de dados. Os usuários também devem ser os proprietários dos objetos ou ter permissões SELECT, USAGE ou ALL nos objetos.</p>  

            <p>Use a cláusula INCLUDENEW para adicionar novas tabelas, visualizações ou funções definidas pelo usuário (UDFs) do SQL criadas em um esquema especificado ao datashare. Somente superusuários podem alterar essa propriedade para cada par datashare-esquema.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare ADD SCHEMA PUBLIC;
ALTER DATASHARE salesshare SET INCLUDENEW = TRUE FOR SCHEMA PUBLIC;</code></pre>

            <p>Também é possível usar o console do Amazon Redshift para adicionar ou remover objetos de datashare. Para obter mais informações, consulte <a href="./datashare-creation.html#add-datashare-object-console">Adicionando objetos do datashare a datashares</a>, <a href="./manage-datashare-existing-console.html#remove-datashare-object-console">Remover objetos do datashare de datashares</a> e <a href="./manage-datashare-existing-console.html#edit-datashare-console">Editar datashares criados em sua conta</a>.</p></li><li><p>Adicione consumidores ou remova consumidores de datashares. O exemplo a seguir adiciona o namespace de cluster de consumidor a <code class="code">salesshare</code>. O namespace é o identificador global exclusivo (GUID) do namespace do cluster de consumidor na conta. Para obter mais informações, consulte <a href="./r_GRANT.html">GRANT</a> ou <a href="./r_REVOKE.html">REVOKE</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATASHARE salesshare TO NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>Você só pode conceder permissões a um consumidor de unidade de compartilhamento de dados em uma instrução GRANT.</p>
            
            <p>Os superusuários de cluster e os proprietários de objetos da unidade de compartilhamento de dados ou os usuários que tenham a permissão SHARE nessa unidade podem adicionar a ou remover consumidores de uma unidade de compartilhamento de dados. Para fazer isso, eles usam GRANT USAGE ou REVOKE USE.</p>
            <p>Para localizar o namespace do cluster que você vê no momento, você pode usar o comando SELECT CURRENT_NAMESPACE. Para localizar o namespace de um cluster diferente dentro da mesma Conta da AWS, acesse a página de detalhes do cluster do console do Amazon Redshift. Nessa página, localize o campo de namespace recém-adicionado.</p>
            <p>Também é possível usar o console do Amazon Redshift para adicionar ou remover consumidores de dados de unidades de compartilhamento de dados. Para obter mais informações, consulte <a href="./datashare-creation.html#add-data-consumer-console">Adicionar consumidores de dados a datashares</a> e <a href="./manage-datashare-existing-console.html#remove-data-consumer-console">Remover consumidores de dados de datashares</a>.</p>
         </li><li><p>(Opcional) Adicione restrições de segurança ao datashare. O exemplo a seguir mostra que o cluster de consumidores com um acesso IP público tem permissão para ler o datashare. Para obter mais informações, consulte <a href="./r_ALTER_DATASHARE.html">ALTER DATASHARE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare SET PUBLICACCESSIBLE = TRUE;</code></pre>

            <p>Você pode modificar propriedades sobre o tipo de consumidores após a criação de datashare. Por exemplo, você pode definir que os clusters que desejam consumir dados de um dado datashare não podem ser acessíveis publicamente. Consultas de clusters de consumidores que não atendem às restrições de segurança especificadas na unidade de compartilhamento de dados são rejeitadas no tempo de execução da consulta.</p>
            <p>Também é possível usar o console do Amazon Redshift para editar datashares. Para obter mais informações, consulte <a href="./manage-datashare-existing-console.html#edit-datashare-console">Editar datashares criados em sua conta</a>.</p>
            
         </li><li><p>Liste os datashares criados no cluster e examine o conteúdo do datashare.</p>

            <p>O exemplo a seguir exibe as informações de uma unidade de compartilhamento de dados chamada <code class="code">salesshare</code>. Para obter mais informações, consulte <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> e <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DESC DATASHARE salesshare;

               
 producer_account  |          producer_namespace          | share_type | share_name | object_type |           object_name          |   include_new
-------------------+--------------------------------------+------------+------------+-------------+--------------------------------+-------------------
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_users_redshift   |   
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_venue_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_category_redshift|
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_date_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_event_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_listing_redshift |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_sales_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | schema      | public                         |  t
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | view        | public.sales_data_summary_view |</code></pre>
            
            <p>O exemplo a seguir exibe os datashares de saída em um cluster de produtores.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SHOW DATASHARES LIKE 'sales%';</code></pre>
            <p>A saída será semelhante à seguinte.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">share_name | share_owner  | source_database | consumer_database | share_type |     createdate      | is_publicaccessible  | share_acl | producer_account |          producer_namespace 
-----------+--------------+-----------------+-------------------+------------+---------------------+----------------------+-----------+------------------+---------------------------------------
salesshare |    100       | dev             |                   |  OUTBOUND  | 2020-12-09 02:27:08 |          True        |           |   123456789012   | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d </code></pre>
            <p>Para obter mais informações, consulte <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> e <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>. </p>
            <p>Você também pode usar <a href="./r_SVV_DATASHARES.html">SVV_DATASHARES</a>, <a href="./r_SVV_DATASHARE_CONSUMERS.html">SVV_DATASHARE_CONSUMERS</a> e <a href="./r_SVV_DATASHARE_OBJECTS.html">SVV_DATASHARE_OBJECTS</a> para exibir os datashares, os objetos dentro do datashare e os consumidores de datashare.</p>
         </li><li><p>Descarte datashares. Para obter mais informações, consulte <a href="./r_DROP_DATASHARE.html">DROP DATASHARE</a>.</p>
            <p>Você pode excluir os objetos do datashare a qualquer momento usando <a href="./r_DROP_DATASHARE.html">DROP DATASHARE</a>. Superusuários de cluster e proprietários de datashare podem descartar datashares.</p>

            <p>O exemplo a seguir descarta uma unidade de compartilhamento de dados chamada <code class="code">salesshare</code>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DROP DATASHARE salesshare;</code></pre>

            <p>Também é possível usar o console do Amazon Redshift para excluir datashares. Para obter mais informações, consulte <a href="./manage-datashare-existing-console.html#delete-datashare-console">Excluir unidades de compartilhamento de dados  criadas em sua conta</a>.</p>
         </li><li><p>Use ALTER DATASHARE para remover objetos de datashares em qualquer ponto do datashare. Use REVOKE USAGE ON para revogar permissões no datashare para determinados consumidores. Ele revoga as permissões USAGE em objetos dentro de uma unidade de compartilhamento de dados e interrompe instantaneamente o acesso a todos os clusters de consumidores. Listar conjuntos de dados e as consultas de metadados, como listar bancos de dados e tabelas, não retorna os objetos compartilhados depois que o acesso é revogado.</p>

            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare REMOVE TABLE public.tickit_sales_redshift;</code></pre>

            <p>Também é possível usar o console do Amazon Redshift para editar datashares. Para obter mais informações, consulte <a href="./manage-datashare-existing-console.html#edit-datashare-console">Editar datashares criados em sua conta</a>.</p>
         </li><li><p>Revogue o acesso ao datashare a partir de namespaces se você não quiser mais compartilhar os dados com os consumidores.</p>

            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">REVOKE USAGE ON DATASHARE salesshare FROM NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>Também é possível usar o console do Amazon Redshift para editar datashares. Para obter mais informações, consulte <a href="./manage-datashare-existing-console.html#edit-datashare-console">Editar datashares criados em sua conta</a>.</p>
         </li></ol></div><div class="procedure"><h6>Para compartilhar dados para fins de leitura como administrador de cluster de consumidores</h6><ol><li><p>Liste os datashares que são disponibilizados para você e visualize o conteúdo de datashares. Para obter mais informações, consulte <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> e <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>.</p>
            <p>O exemplo a seguir exibe as informações de datashares de entrada de um namespace de produtor especificado. Quando você executa o DESC DATASHARE como um administrador de cluster de consumidor, você deve especificar a opção NAMESPACE para exibir os datashares de entrada. </p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DESC DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';


 producer_account  |          producer_namespace          | share_type | share_name | object_type |           object_name           |   include_new
-------------------+--------------------------------------+------------+------------+-------------+---------------------------------+------------------
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_users_redshift    |     
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_venue_redshift    |     
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_category_redshift |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_date_redshift     |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_event_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_listing_redshift  |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_sales_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | schema      | public                          |    
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | view        | public.sales_data_summary_view  |   </code></pre>
            <p>Somente superusuários de cluster podem fazer isso. Você também pode usar SVV_DATASHARES para visualizar os datashares e SVV_DATAASHARE_OBJECTS para vsualizar os objetos dentro do datashare.</p>
            <p>O exemplo a seguir exibe os datashares de entrada em um cluster de consumidores.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SHOW DATASHARES LIKE 'sales%';


 share_name | share_owner | source_database | consumer_database | share_type | createdate | is_publicaccessible | share_acl | producer_account |          producer_namespace
------------+-------------+-----------------+-------------------+------------+------------+---------------------+-----------+------------------+--------------------------------------
 salesshare |             |                 |                   | INBOUND    |            |         t           |           |   123456789012   | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d</code></pre>
         </li><li><p>Como superusuário de banco de dados, você pode criar bancos de dados locais que façam referência às unidades de compartilhamento de dados. Para obter mais informações, consulte <a href="./r_CREATE_DATABASE.html">CREATE DATABASE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sales_db FROM DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>
            
            <p>Se você quiser um controle mais granular sobre o acesso aos objetos no banco de dados local, use a cláusula WITH PERMISSIONS ao criar o banco de dados. Isso permite a você conceder permissões no nível de objeto para objetos no banco de dados na etapa 4. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sales_db WITH PERMISSIONS FROM DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>Você pode ver os bancos de dados criados a partir do datashare consultando a visualização <a href="./r_SVV_REDSHIFT_DATABASES.html">SVV_REDSHIFT_DATABASES</a>. Você não pode se conectar a esses bancos de dados criados a partir de datashares; eles são somente leitura. No entanto, você pode se conectar a um banco de dados local em seu cluster de consumidores e executar uma consulta entre bancos de dados para consultar os dados dos bancos de dados criados a partir de datashares. Você não pode criar um datashare em cima de objetos de banco de dados criados a partir de um datashare existente. No entanto, você pode copiar os dados em uma tabela separada no cluster de consumidores, executar qualquer processamento necessário e, em seguida, compartilhar os novos objetos que foram criados.</p>
            <p>Também é possível usar o console do Amazon Redshift para criar bancos de dados a partir de datashares. Para obter mais informações, consulte <a href="./query-datashare-console.html#create-database-from-datashare-console">Criar bancos de dados a partir de datashares</a>.</p>

         </li><li><p>(Opcional) Crie esquemas externos para consultar e atribuir permissões granulares a esquemas específicos no banco de dados do consumidor importado no cluster de consumidores. Para obter mais informações, consulte <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA sales_schema FROM REDSHIFT DATABASE 'sales_db' SCHEMA 'public';</code></pre>

     

         </li><li><p>Conceda permissões em bancos de dados e referências de esquema criadas a partir das unidades de compartilhamento de dados para usuários e funções no cluster consumidor conforme necessário. Para obter mais informações, consulte <a href="./r_GRANT.html">GRANT</a> ou <a href="./r_REVOKE.html">REVOKE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATABASE sales_db TO Bob;</code></pre>
            
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON SCHEMA sales_schema TO ROLE Analyst_role;</code></pre>

            <p>Se tiver criado o banco de dados sem WITH PERMISSIONS, você só poderá atribuir permissões em todo o banco de dados criado a partir da unidade de compartilhamento de dados para usuários e funções. Em alguns casos, você precisa de controles refinados em um subconjunto de objetos de banco de dados criados a partir do datashare. Nesse caso, você pode criar uma referência de esquema externo que aponte para esquemas específicos no datashare (conforme descrito na etapa anterior) e fornecer permissões detalhadas no nível do esquema. </p>
                  <p>Você também pode criar exibições de vinculação tardia sobre objetos compartilhados e usá-las para atribuir permissões detalhadas. Você também pode considerar que os clusters de produtores criem conjuntos de dados adicionais para você com os detalhes necessários. </p>
            <p>Se tiver criado o banco de dados com WITH PERMISSIONS na etapa 2, você deverá atribuir permissões no nível de objeto para objetos no banco de dados compartilhado. Um usuário com apenas a permissão USAGE não poderá acessar nenhum objeto em um banco de dados criado com WITH PERMISSIONS até receber permissões adicionais no nível de objeto.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT SELECT ON sales_db.public.tickit_sales_redshift to Bob;</code></pre>

         </li><li><p>Consultar dados nos objetos compartilhados nos datashares.</p>
            <p>Usuários e funções com permissões em bancos de dados consumidores e esquemas em clusters consumidores podem explorar e navegar nos metadados de quaisquer objetos compartilhados. Eles também podem explorar e navegar por objetos locais em um cluster de consumidores. Para fazer isso, eles usam drivers JDBC ou ODBC ou visualizações SVV_ALL e SVV_REFISH.</p>
                  <p>Os clusters de produtores podem ter muitos esquemas no banco de dados, tabelas e visualizações dentro de cada esquema. Os usuários do lado do consumidor podem ver apenas o subconjunto de objetos que são disponibilizados através do datashare. Esses usuários não podem ver todos os metadados do cluster de produtores. Essa abordagem ajuda a fornecer controle de segurança de metadados detalhados com compartilhamento de dados.</p>
            <p>Você continua se conectando a bancos de dados de cluster locais. Mas agora, você também pode ler dos bancos de dados e esquemas que são criados a partir do datashare usando a notação database.schema.table de três partes. Você pode executar consultas que abrangem todos e todos os bancos de dados que são visíveis para você. Estes podem ser bancos de dados locais no cluster ou bancos de dados criados a partir dos datashares. Os clusters de consumidores não podem se conectar aos bancos de dados criados a partir dos datashares.</p>
            <p>Você pode acessar os dados usando a qualificação completa. Para obter mais informações, consulte <a href="./cross-database_example.html">Exemplos de uso de uma consulta entre bancos de dados</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT * FROM sales_db.public.tickit_sales_redshift ORDER BY 1,2 LIMIT 5;

 salesid | listid | sellerid | buyerid | eventid | dateid | qtysold | pricepaid | commission |      saletime
---------+--------+----------+---------+---------+--------+---------+-----------+------------+---------------------
       1 |      1 |    36861 |   21191 |    7872 |   1875 |       4 |    728.00 |     109.20 | 2008-02-18 02:36:48
       2 |      4 |     8117 |   11498 |    4337 |   1983 |       2 |     76.00 |      11.40 | 2008-06-06 05:00:16
       3 |      5 |     1616 |   17433 |    8647 |   1983 |       2 |    350.00 |      52.50 | 2008-06-06 08:26:17
       4 |      5 |     1616 |   19715 |    8647 |   1986 |       1 |    175.00 |      26.25 | 2008-06-09 08:38:52
       5 |      6 |    47402 |   14115 |    8240 |   2069 |       2 |    154.00 |      23.10 | 2008-08-31 09:17:02</code></pre>
            <p>Você só pode usar instruções SELECT em objetos compartilhados. No entanto, você pode criar tabelas no cluster de consumidores consultando os dados dos objetos compartilhados em um banco de dados local diferente.</p><p>Além das consultas, os consumidores podem criar visualizações em objetos compartilhados. Somente visualizações de vinculação tardia ou visualizações materializadas são aceitas. O Amazon Redshift não oferece suporte a visualizações regulares em dados compartilhados. As visualizações criadas pelos consumidores podem abranger vários bancos de dados locais ou bancos de dados criados a partir de conjuntos de dados. Para obter mais informações, consulte <a href="./r_CREATE_VIEW.html">CREATE VIEW</a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">// Connect to a local cluster database
               
// Create a view on shared objects and access it. 
CREATE VIEW sales_data 
AS SELECT * 
FROM sales_db.public.tickit_sales_redshift 
WITH NO SCHEMA BINDING;

SELECT * FROM sales_data;</code></pre>
         </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./getting-started-datashare-sql.html">Gerenciamento de compartilhamento de dados usando a interface do SQL</div><div id="next" class="next-link" accesskey="n" href="./across-account.html">Compartilhamento de dados entre Contas da AWS</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>