<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>VACUUM - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_VACUUM_command" /><meta name="default_state" content="r_VACUUM_command" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html" /><meta name="description" content="Reclassifica linhas e recupera espaço em qualquer tabela especificada ou em todas as tabelas no banco de dados atual." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_VACUUM_command.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_VACUUM_command.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_VACUUM_command.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_VACUUM_command.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_VACUUM_command.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_VACUUM_command.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_VACUUM_command.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_VACUUM_command.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_VACUUM_command.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_VACUUM_command.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_VACUUM_command.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_VACUUM_command.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_VACUUM_command.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_VACUUM_command.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_VACUUM_command.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_VACUUM_command.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_VACUUM_command.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="VACUUM" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>VACUUM - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_VACUUM_command" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referência SQL",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Comandos SQL",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "VACUUM",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_VACUUM_command" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#r_VACUUM_command-privileges">Privilégios obrigatórios</a><a href="#r_VACUUM_command-synopsis">Sintaxe</a><a href="#r_VACUUM_command-parameters">Parâmetros</a><a href="#r_VACUUM_usage_notes">Observações de uso</a><a href="#r_VACUUM_command-examples">Exemplos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_VACUUM_command">VACUUM</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Reclassifica linhas e recupera espaço em qualquer tabela especificada ou em todas as tabelas no banco de dados atual.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Somente usuários com as permissões de tabela necessárias podem efetivamente limpar uma tabela. Se VACUUM for executado sem as permissões necessárias de tabela, a operação será concluída com êxito, mas sem efeito. Para obter uma lista de permissões de tabela válidas para executar efetivamente VACUUM, consulte a seção Privilégios obrigatórios a seguir.</p></div></div><p>O Amazon Redshift classifica os dados automaticamente e executa VACUUM DELETE em segundo plano. Isso reduz a necessidade de executar o comando VACUUM. Para obter mais informações, consulte <a href="./t_Reclaiming_storage_space202.html">Vacuum de tabelas</a>. </p><p>Por padrão, VACUUM ignora a fase de classificação para qualquer tabela em que mais de 95 por cento das linhas da tabela já estejam classificadas. Ignorar a fase de classificação pode melhorar significativamente a performance de VACUUM. Para alterar ou excluir o limite de classificação padrão para uma única tabela, inclua o nome da tabela e o parâmetro TO <em>limite</em> PERCENT ao executar o comando VACUUM. </p><p>Os usuários podem acessar tabelas enquanto elas estão sendo limpas. É possível executar consultas e operações de gravação enquanto uma tabela está sendo limpa, mas quando comandos de linguagem de manipulação de dados (DML) e uma limpeza são executados simultaneamente, ambos podem levar mais tempo. Se você executar instruções UPDATE e DELETE durante uma limpeza, a performance do sistema pode ser reduzida. VACUUM DELETE bloqueia temporariamente operações de atualização e exclusão. </p><p>O Amazon Redshift executa automaticamente uma limpeza DELETE ONLY em segundo plano. A operação de limpeza automática é pausada quando os usuários executam operações de linguagem de definição de dados (DDL), como ALTER TABLE.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>A sintaxe e o comportamento do comando VACUUM no Amazon Redshift são substancialmente diferentes da operação VACUUM do PostgreSQL. Por exemplo, a operação VACUUM padrão no Amazon Redshift é VACUUM FULL. Ela recupera o espaço em disco e reclassifica todas as linhas. Por outro lado, a operação padrão VACUUM no PostgreSQL recupera somente o espaço e o disponibiliza para reutilização.</p></div></div><p>Para obter mais informações, consulte <a href="./t_Reclaiming_storage_space202.html">Vacuum de tabelas</a>.</p>
         <h2 id="r_VACUUM_command-privileges">Privilégios obrigatórios</h2>
         <p>A seguir estão os privilégios obrigatórios para VACUUM:</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Superusuário</p></li><li class="listitem"><p>Usuários com privilégio VACUUM</p></li><li class="listitem"><p>Proprietário da tabela</p></li><li class="listitem"><p>Proprietário do banco de dados com o qual a tabela é compartilhada</p></li></ul></div>
       
         <h2 id="r_VACUUM_command-synopsis">Sintaxe</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">VACUUM [ FULL | SORT ONLY | DELETE ONLY | REINDEX | RECLUSTER ]
[ [ <em>table_name</em> ] [ TO <em>threshold</em> PERCENT ] [ BOOST ] ]</code></pre>
       
         <h2 id="r_VACUUM_command-parameters">Parâmetros</h2>
         <div class="variablelist">
             
             
             
             
             

            
             
             

             
             
         <dl>
               <dt id="vacuum-full"><span class="term">FULL </span></dt>
               <dd>
                  <p>Classifica a tabela especificada (ou todas as tabelas no banco de dados atual) e recupera o espaço em disco ocupado por linhas que foram marcadas para exclusão pelas operações UPDATE e DELETE anteriores. VACUUM FULL é o valor padrão.</p>

                  <p>Uma limpeza total não executa uma reindexação de tabelas intercaladas. Para reindexar tabelas intercaladas acompanhadas por uma limpeza completa, use a opção <a href="#vacuum-reindex">VACUUM REINDEX</a>. </p>

                  <p>Por padrão, VACUUM FULL ignora a fase de classificação de qualquer tabela que já esteja pelo menos 95% classificada. Se VACUUM puder ignorar a fase de classificação, o comando executará DELETE ONLY e recuperará o espaço na fase de exclusão para que pelo menos 95% das linhas restantes não sejam marcadas para exclusão.  </p>
                  <p>Se o limite de classificação não for alcançado (por exemplo, se 90% das linhas forem classificadas) e VACUUM executar uma classificação completa, o comando também executará uma operação de exclusão completa, recuperando espaço de 100% das linhas excluídas. </p>
                  <p>Você pode alterar o limite de limpeza padrão apenas para uma única tabela. Para alterar o limite de limpeza padrão para uma única tabela, inclua o nome da tabela e o parâmetro TO <em>limite</em> PERCENT. </p>
               </dd>
             
               <dt id="vacuum-sort-only"><span class="term">SORT ONLY </span></dt>
               <dd>
                  <p>Classifica a tabela especificada (ou todas as tabelas no banco de dados atual) sem retomar espaço liberado pelas linhas excluídas. Essa opção é útil quando a recuperação de espaço em disco não é importante, mas sim a reclassificação de novas linhas. Uma limpeza do tipo SORT ONLY reduz o tempo decorrido para operações de limpeza quando a região não classificada não contém um grande número de linhas excluídas e não se estende por toda a região classificada. Aplicativos que não têm restrições de espaço em disco mas dependem de otimizações de consulta associadas à manutenção de linhas classificadas na tabela podem se beneficiar desse tipo de limpeza.</p>
                  <p>Por padrão, VACUUM SORT ONLY ignora qualquer tabela que esteja pelo menos 95% classificada. Para alterar o limite de classificação padrão para uma única tabela, inclua o nome da tabela e o parâmetro TO <em>limite</em> PERCENT ao executar o comando VACUUM. </p>
               </dd>
             
               <dt id="vacuum-delete-only"><span class="term">DELETE ONLY </span></dt>
               <dd>
                  <p>O Amazon Redshift executa automaticamente uma limpeza DELETE ONLY em segundo plano. Assim, você dificilmente precisará executar uma limpeza DELETE ONLY.</p>
                  <p>VACUUM DELETE solicita de volta o espaço em disco ocupado por linhas que foram marcadas para exclusão pelas operações UPDATE e DELETE anteriores, e compacta a tabela para liberar o espaço ocupado. Uma operação de limpeza DELETE ONLY não classifica dados da tabela. </p>
                  <p>Essa opção reduz o tempo decorrido para operações de vacuum quando é importante recuperar espaço em disco, mas reclassificar novas linhas não é. Essa opção também pode ser útil quando a performance da sua consulta já é ótimo, e reclassificar linhas para otimizar a performance da consulta não é uma necessidade.</p>
                  <p>Por padrão, VACUUM DELETE ONLY recupera o espaço, de maneira que pelo menos 95% das linhas restantes não sejam marcadas para exclusão. Para alterar o limite de exclusão padrão para uma única tabela, inclua o nome da tabela e o parâmetro TO <em>limite</em> PERCENT ao executar o comando VACUUM.  </p>
                  <p>Algumas operações, como <code class="code">ALTER TABLE APPEND</code>, podem fazer com que as tabelas sejam fragmentadas. Ao usar a cláusula <code class="code">DELETE ONLY</code>, a operação de limpeza solicitará de volta o espaço das tabelas fragmentadas. O mesmo valor limite de 95% se aplica à operação de desfragmentação. </p>
               </dd>
             
               <dt id="vacuum-reindex"><span class="term">REINDEX <em>tablename</em></span></dt>
               <dd>
                  <p>Analisa a distribuição dos valores nas colunas de chave de classificação intercaladas e executa uma operação VACUUM completa. Se REINDEX é usado, um nome de tabela é necessário.</p>
                  <p>VACUUM REINDEX é bem mais demorado do que VACUUM FULL porque inclui uma etapa adicional para analisar as chaves de classificação intercaladas. As operações de classificação e mesclagem podem levar mais tempo para tabelas intercaladas porque a classificação intercalada pode precisar reorganizar mais linhas do que uma classificação composta.</p>
                  <p>Se uma operação VACUUM REINDEX encerrar antes da conclusão, a próxima operação VACUUM retomará a reindexação antes de executar a operação de limpeza completa.</p>
                  <p>VACUUM REINDEX não é compatível com TO <em>threshold</em> PERCENT.  </p>
               </dd>
             
               <dt><span class="term"> <em>table_name</em> </span></dt>
               <dd>
                  <p>Nome de uma tabela a ser limpa. Se você não especificar um nome para a tabela, a operação de limpeza se aplicará a todas as tabelas no banco de dados atual. Você pode especificar qualquer tabela permanente ou temporária criada por usuário. O comando não é significativo para outros objetos, como exibições e tabelas de sistema.</p>
                  <p> Se você incluir o parâmetro TO <em>limite</em> PERCENT, será necessário um nome para a tabela.</p>
               </dd>
             
               <dt id="vacuum-recluster"><span class="term">RECLUSTER <em>tablename</em></span></dt>
               <dd>
                  <p>Classifica as partes da tabela que não são classificadas. Partes da tabela que já estão classificadas por classificação automática de tabela são deixadas intactas. Esse comando não mescla os dados recém-classificados com a região classificada. Ele também não recupera todo o espaço marcado para exclusão. Quando esse comando for concluído, a tabela pode não aparecer totalmente classificada, conforme indicado pelo campo <code class="code">unsorted</code> em SVV_TABLE_INFO. </p>
                  <p> Recomendamos que você use VACUUM RECLUSTER para tabelas grandes com ingestão frequente e consultas que acessam apenas os dados mais recentes. </p>
                  <p> VACUUM RECLUSTER não é compatível com o limite TO PERCENT. Se RECLUSTER for usado, um nome de tabela será necessário.</p>
                 <p>O VACUUM RECLUSTER não é compatível com tabelas com chaves de classificação intercaladas e tabelas com estilo de distribuição ALL.</p>
               </dd>
             
               <dt><span class="term"> <em>table_name</em> </span></dt>
               <dd>
                  <p>Nome de uma tabela a ser limpa. Você pode especificar qualquer tabela permanente ou temporária criada por usuário. O comando não é significativo para outros objetos, como exibições e tabelas de sistema.</p>
               </dd>
             
               <dt><span class="term"> TO <em>limite</em> PERCENT </span></dt>
               <dd>
                  <p>Cláusula que especifica o limite acima do qual VACUUM ignora a fase de classificação e o limite de destino para recuperar espaço na fase de exclusão. O <em>limite de classificação</em> é a porcentagem de linhas do total que já está classificada para a tabela especificada antes da limpeza.  O <em>delete threshold</em> é a porcentagem mínima do total de linhas não marcadas para exclusão após a limpeza. </p>
                  <p>Como o VACUUM reclassifica as linhas apenas quando a porcentagem de linhas classificadas em uma tabela é menor que o limite de classificação, o Amazon Redshift geralmente pode reduzir significativamente os tempos de VACUUM. De modo semelhante, quando VACUUM não é restrito a recuperar o espaço de 100% das linhas marcadas para exclusão, muitas vezes é capaz de regravar blocos que contêm somente algumas linhas excluídas.</p>
                  <p>Por exemplo, se você especificar 75 para o <em>limite</em>, VACUUM ignorará a fase de classificação se 75% ou mais das linhas da tabela já estiverem classificadas. Para a fase de exclusão, VACUUMS define um objetivo de recuperação de espaço em disco de forma que 75% das linhas da tabela não sejam marcadas para exclusão após a limpeza. O valor do <em>limite</em> deve ser um número inteiro entre 0 e 100. O padrão é 95. Se você especificar um valor de 100, VACUUM sempre classificará a tabela a menos que ela já esteja totalmente classificada e recuperará o espaço de todas as linhas marcadas para exclusão. Se você especificar um valor de 0, VACUUM nunca classificará a tabela e nunca recuperará espaço.</p>
                  <p>Se você incluir o parâmetro TO <em>limite</em> PERCENT, também deverá especificar um nome para a tabela. Se um nome para a tabela for omitido, VACUUM retorna uma falha. </p>
                  <p>Não é possível usar o parâmetro TO <em>threshold</em> PERCENT com REINDEX. </p>
               </dd>
             
               <dt><span class="term">BOOST</span></dt>
               <dd>
                  <p>Executa o comando VACUUM com recursos adicionais, como memória e espaço em disco, conforme estiverem disponíveis. Com a opção BOOST, VACUUM opera em uma janela e bloqueia exclusões e atualizações simultâneas durante a operação VACUUM. A execução com a opção BOOST compete com recursos do sistema, o que pode afetar a performance da consulta. Execute o VACUUM BOOST quando a carga no sistema for leve, como durante operações de manutenção. </p>
                  <p>Considere o seguinte ao usar a opção BOOST.</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Quando BOOST é especificado, o valor de <em>table-name</em> é necessário. </p>
                     </li><li class="listitem">
                        <p>BOOST não é compatível com REINDEX. </p>
                     </li><li class="listitem">
                        <p>BOOST é ignorado com DELETE ONLY. </p>
                     </li></ul></div>
               </dd>
            </dl></div>
       
         <h2 id="r_VACUUM_usage_notes">Observações de uso</h2>
         <p>Para a maioria das aplicações do Amazon Redshift, uma limpeza completa é recomendada. Para obter mais informações, consulte <a href="./t_Reclaiming_storage_space202.html">Vacuum de tabelas</a>.</p>
         <p>Para executar uma operação de limpeza, observe o seguinte comportamento: </p>
         <div class="itemizedlist">
             
             
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Não é possível executar o comando VACUUM em um bloco de transação (BEGIN ... END). Para obter mais informações sobre transações, consulte <a href="./c_serial_isolation.html">Isolamento serializável</a>. </p>
            </li><li class="listitem">
               <p>Você pode executar somente um comando VACUUM em um cluster por vez. Se você tentar executar várias operações de limpeza simultaneamente, o Amazon Redshift retornará um erro.</p>
            </li><li class="listitem">
               <p>As tabelas podem crescer quando são limpas. Esse comportamento é esperado quando não há linhas excluídas a serem recuperadas ou quando a nova ordem de classificação da tabela resulta em uma taxa mais baixa de compactação de dados.</p>
            </li><li class="listitem">
               <p>Durante operações de limpeza, qualquer grau de degradação de performance de consulta é esperado. A performance normal é retomada assim que a operação de limpeza é concluída.</p>
            </li><li class="listitem">
               <p>As operações de gravação simultâneas continuam durante as operações de limpeza, mas não recomendamos realizar operações de gravação durante a limpeza. É mais eficiente concluir operações de gravação antes de executar a limpeza. Além disso, todos os dados gravados após o início de uma operação de limpeza não podem ser eliminados por essa operação. Nesse caso, uma segunda operação de limpeza é necessária.</p>
            </li><li class="listitem">
               <p>Uma operação de limpeza pode não começar se uma operação de carregamento ou inserção já estiver em andamento. As operações de limpeza exigem temporariamente acesso exclusivo às tabelas para iniciar. Esse acesso exclusivo é necessário por pouco tempo para que as operações de limpeza não obstruam cargas e inserções simultâneas por qualquer período significativo.</p>
            </li><li class="listitem">
               <p>As operações de limpeza são ignoradas quando não há trabalho a fazer para uma tabela específica. No entanto, há algumas sobrecargas associadas à descoberta de que a operação pode ser ignorada. Se você sabe que uma tabela é limpa ou não atende ao limite de limpeza, não execute uma operação de limpeza nela.</p>
            </li><li class="listitem">
               <p>Uma operação de limpeza DELETE ONLY em uma tabela pequena pode não reduzir o número de blocos usados para armazenar dados, especialmente quando a tabela tem um grande número colunas ou o cluster usa um grande número fatias por nó. Essas operações de limpeza adicionam um bloco por coluna por fatia para contabilizar inserções simultâneas na tabela, e essa sobrecarga pode exceder a redução da contagem de blocos do espaço em disco recuperado. Por exemplo, se uma tabela de 10 colunas em um cluster de 8 nós ocupar 1000 blocos antes de uma limpeza, a limpeza não reduzirá a contagem de blocos real a não ser que mais de 80 blocos de espaço em disco sejam recuperados devido às linhas excluídas. (Cada bloco de dados usa 1 MB.)</p>
            </li></ul></div>
         <p>As operações de limpeza automáticas pausarão caso alguma destas condições não forem atendidas: </p>
         <div class="itemizedlist">
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Um usuário executa uma operação de linguagem de definição de dados (DDL), como ALTER TABLE, que precisa de um bloqueio exclusivo na tabela em que a limpeza automática está atuando. </p>
            </li><li class="listitem">
               <p>Um usuário acionar VACUUM em qualquer tabela do cluster (somente um VACUUM pode ser executado por vez). </p>
            </li><li class="listitem">
               <p>Um período de carga elevada no cluster.</p>
            </li></ul></div>
       
         <h2 id="r_VACUUM_command-examples">Exemplos</h2>
         <p>Recupere o espaço e o banco de dados e reclassifique as linhas em todas as tabelas com base no limite padrão de 95% de vacuum.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum;</code></pre>
         <p>Recupere espaço e reclassifique as linhas na tabela SALES com base no limite padrão de 95%. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum sales;</code></pre>
         <p>Sempre recupere espaço e reclassifique as linhas na tabela SALES. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum sales to 100 percent;</code></pre>
         <p>Reclassifique as linhas na tabela SALES somente se menos que 75% das linhas já estiverem organizadas. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""> vacuum sort only sales to 75 percent;</code></pre>
         <p>Recupere espaço na tabela SALES de maneira que pelo menos 75% das linhas restantes não sejam marcadas para exclusão depois da limpeza. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum delete only sales to 75 percent;</code></pre>
         <p>Reindexe e limpe a tabela LISTING. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum reindex listing;</code></pre>
         <p>O comando a seguir retorna um erro. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum reindex listing to 75 percent;</code></pre>
         
         
         <p>Reagrupe e limpe a tabela LISTING. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum recluster listing;</code></pre>
         <p>Reagrupe e limpe a tabela LISTING com a opção BOOST. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum recluster listing boost;</code></pre>
         
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c_Examples_of_UPDATE_statements.html">Exemplos da instrução UPDATE</div><div id="next" class="next-link" accesskey="n" href="./c_SQL_functions.html">Referência de funções SQL</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>