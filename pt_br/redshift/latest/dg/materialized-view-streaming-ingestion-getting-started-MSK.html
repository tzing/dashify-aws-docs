<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Conceitos básicos da ingestão de streaming do Amazon Managed Streaming para Apache Kafka - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="materialized-view-streaming-ingestion-getting-started-MSK" /><meta name="default_state" content="materialized-view-streaming-ingestion-getting-started-MSK" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" /><meta name="description" content="Saiba como configurar ingestão de streaming do Amazon Managed Streaming para Apache Kafka." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Conceitos básicos da ingestão de streaming do Amazon Managed Streaming para Apache Kafka" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Conceitos básicos da ingestão de streaming do Amazon Managed Streaming para Apache Kafka - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#materialized-view-streaming-ingestion-getting-started-MSK" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Criar visualizações materializadas no Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Ingestão de streaming",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Conceitos básicos da ingestão de streaming do Amazon Managed Streaming para Apache Kafka",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#materialized-view-streaming-ingestion-getting-started-MSK" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#materialized-view-streaming-ingestion-getting-started-MSK-setup">Configurar o IAM e realizar a ingestão de streaming do Kafka</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="materialized-view-streaming-ingestion-getting-started-MSK">Conceitos básicos da ingestão de streaming do Amazon Managed Streaming para Apache Kafka</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p> O objetivo da ingestão de streaming do Amazon Redshift é simplificar o processo de ingestão direta de dados de fluxo de um serviço de streaming no Amazon Redshift ou no Amazon Redshift sem servidor. Isso funciona com o Amazon MSK, o Amazon MSK Serverless e o Kinesis. A ingestão de streaming do Amazon Redshift elimina a necessidade de preparar um fluxo do Kinesis Data Streams ou um tópico do Amazon MSK no Amazon S3 antes de ingerir os dados do fluxo no Redshift.</p><p> Em nível técnico, a ingestão de streaming tanto do Amazon Kinesis Data Streams quanto do Amazon Managed Streaming para Apache Kafka fornece ingestão de dados de fluxo ou tópico de baixa latência e alta velocidade em uma visão materializada do Amazon Redshift. Após a configuração, usando a atualização de visão materializada, você pode absorver grandes volumes de dados. </p><p>Configure a ingestão de streaming do Amazon Redshift para o Amazon MSK executando as seguintes etapas:</p><div class="orderedlist">
                         
                         
                    <ol><li><p>Crie um esquema externo que seja mapeado para a fonte de dados de streaming.</p></li><li><p>Crie uma visão materializada que faça referência ao esquema externo.</p></li></ol></div><p>Você deve ter uma fonte do Amazon MSK disponível antes de configurar a ingestão de streaming do Amazon Redshift. Se não tiver uma fonte, siga as instruções em <a href="https://docs.aws.amazon.com/msk/latest/developerguide/getting-started.html">Conceitos básicos do Amazon MSK</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p><em>Ingestão de streaming e Amazon Redshift Serverless</em>: as etapas de configuração neste tópico se aplicam a clusters provisionados do Amazon Redshift e ao Amazon Redshift Serverless. Para obter mais informações, consulte <a href="./materialized-view-streaming-ingestion.html#materialized-view-streaming-ingestion-considerations">Considerações sobre a ingestão de streaming</a>.</p></div></div>
                        <h2 id="materialized-view-streaming-ingestion-getting-started-MSK-setup">Configurar o IAM e realizar a ingestão de streaming do Kafka</h2>
                        <p>Supondo que você tenha um cluster do Amazon MSK disponível, a primeira etapa é definir um esquema no Redshift com <code class="code">CREATE EXTERNAL SCHEMA</code> e fazer referência ao tópico do Kafka como fonte de dados. Depois disso, para acessar dados no tópico, defina <code class="code">STREAM</code> em uma visão materializada. Você pode armazenar registros de seu tópico no formato semiestruturado <code class="code">SUPER</code>, ou definir um esquema que resulte em dados convertidos em tipos de dados do Amazon Redshift. Quando você consulta a visão materializada, os registros retornados são uma exibição pontual do tópico.</p>
                        <div class="procedure"><ol><li><p>Crie um perfil do IAM com uma política de confiança que permita que o cluster do Amazon Redshift ou o Amazon Redshift sem servidor assuma o perfil. Para obter informações sobre como configurar a política de confiança da função do IAM, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html">Autorização do Amazon Redshift para acessar outros serviços da AWS em seu nome</a>. Após sua criação, a função deve ter a seguinte política do IAM, que fornece permissão para comunicação com o cluster do Amazon MSK. A política de que você precisa depende do método de autenticação usado em seu cluster, se você usa o Amazon MSK. Consulte <a href="https://docs.aws.amazon.com/msk/latest/developerguide/kafka_apis_iam.html">Autenticação e autorização para APIs do Apache Kafka</a> para ver os métodos de autenticação disponíveis no Amazon MSK.</p>
                                <p>Uma política do IAM para o Amazon MSK usando acesso não autenticado:</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "VisualEditor0",
            "Effect": "Allow",
            "Action": [
                "kafka:GetBootstrapBrokers"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
                                <p>Uma política do IAM para o Amazon MSK ao usar a autenticação do IAM:</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "MSKIAMpolicy",
            "Effect": "Allow",
            "Action": [
                "kafka-cluster:ReadData",
                "kafka-cluster:DescribeTopic",
                "kafka-cluster:Connect"
            ],
            "Resource": [
                "arn:aws:kafka:*:0123456789:cluster/*/*",
                "arn:aws:kafka:*:0123456789:topic/*/*/*"
            ]
        },
        <span>{</span>
            "Sid": "MSKPolicy",
            "Effect": "Allow",
            "Action": [
                "kafka:GetBootstrapBrokers"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
                            </li><li><p> Verifique sua VPC e verifique se seu cluster do Amazon Redshift ou Amazon Redshift sem servidor tem uma rota para chegar ao cluster do Amazon MSK. As regras do grupo de segurança de entrada para o cluster do Amazon MSK devem dar permissão ao grupo de segurança do cluster do Amazon Redshift ou ao grupo de trabalho do Amazon Redshift sem servidor. As portas que você especifica dependem do método de autenticação usado em seu cluster, ao usar o Amazon MSK. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/msk/latest/developerguide/port-info.html">Informações sobre portas</a> e <a href="https://docs.aws.amazon.com/msk/latest/developerguide/aws-access.html">Acesso de dentro da AWS, mas de fora da VPC</a>.</p>
                                
                                <p>A autenticação do cliente com mTLS não é compatível com ingestão de streaming. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion.html#materialized-view-streaming-ingestion-limitations">Limitações</a>.</p>
                            <p>A seguinte tabela mostra as opções de configuração complementares a serem definidas para a ingestão de streaming do Amazon MSK:</p>
                                <div class="table-container"><div class="table-contents"><table id="w319aac21c47c15c15b5b3b6"><thead>
                                            <tr>
                                                <th>Configuração do Amazon Redshift</th>
                                                <th>Configuração do Amazon MSK</th>
                                                <th>Porta a ser aberta entre o Redshift e o Amazon MSK</th>
                                            </tr>
                                        </thead>
                                            <tr>
                                                <td tabindex="-1"> AUTHENTICATION NONE </td>
                                                <td tabindex="-1"> Transporte TLS desabilitado </td>
                                                <td tabindex="-1">9092</td>
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> AUTHENTICATION NONE </td>
                                                <td tabindex="-1"> Transporte TLS habilitado </td>
                                                <td tabindex="-1">9094</td>
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> AUTHENTICATION IAM </td>
                                                <td tabindex="-1"> IAM </td>
                                                <td tabindex="-1">9098/9198</td>
                                            </tr>
                                        </table></div></div>
                                <p>A autenticação do Amazon Redshift é definida na instrução CREATE EXTERNAL SCHEMA.</p>
                                <p>Quando o cluster do Amazon MSK tiver a autenticação Mutual Transport Layer Security (mTLS) habilitada, a configuração do Amazon Redshift para usar AUTHENTICATION NONE o direcionará a usar a porta 9094 para acesso não autenticado. No entanto, isso apresentará falha, já que a porta está sendo usada pela autenticação mTLS. Por isso, recomendamos que você mude para AUTHENTICATION IAM ao usar mTLS.</p>    
                            </li><li><p>Habilite o roteamento de VPC avançado no cluster do Amazon Redshift ou no grupo de trabalho do Amazon Redshift sem servidor. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/enhanced-vpc-enabling-cluster.html">Habilitar o roteamento aprimorado de VPC</a>.</p>
                                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Para recuperar o URL dos agentes de bootstrap do Amazon MSK, o Amazon Redshift faz uma chamada de API <a href="https://docs.aws.amazon.com/msk/1.0/apireference/clusters-clusterarn-bootstrap-brokers.html#GetBootstrapBrokers">GetBootstrapBrokers</a> usando as permissões fornecidas pelo perfil do IAM anexado. Observe que, para que essa solicitação seja bem-sucedida quando o roteamento de VPC aprimorado estiver habilitado, a sub-rede do cluster provisionado do Amazon Redshift ou do grupo de trabalho do Amazon Redshift sem servidor deve ter um gateway NAT ou um gateway da Internet. Suas ACLs da rede e regras de saída de grupos de segurança para a sub-rede mencionada acima também devem permitir o acesso aos endpoints do serviço de API do Amazon MSK. Para ter mais informações, consulte <a href="https://docs.aws.amazon.com/general/latest/gr/msk.html">Amazon Managed Streaming for Apache Kafka endpoints and quotas</a>.</p></div></div>
                            </li><li><p>No Amazon Redshift, crie um esquema externo para mapear ao cluster do Amazon MSK. </p>
                                
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA MySchema
FROM MSK
IAM_ROLE <span>{</span> default | 'iam-role-arn' }
AUTHENTICATION <span>{</span> none | iam }
CLUSTER_ARN 'msk-cluster-arn';</code></pre>
                                
                                <p>Na cláusula <code class="code">FROM</code>, o Amazon MSK indica que o esquema mapeia dados dos Managed Kafka Services. </p> 
                                    <p> A ingestão de streaming para o Amazon MSK fornece os seguintes tipos de autenticação quando você cria o esquema externo: </p>
                                    <div class="itemizedlist">
                                         
                                         
                                    <ul class="itemizedlist"><li class="listitem"><p><b>nenhum</b>: especifica que não há nenhuma etapa de autenticação.</p></li><li class="listitem"><p><b>iam</b>: especifica a autenticação do IAM. Ao escolher isso, o perfil do IAM tem permissões para autenticação do IAM. </p></li></ul></div>
                                <p>Métodos adicionais de autenticação do Amazon MSK, como autenticação TLS ou nome de usuário e senha, não são compatíveis com a ingestão de streaming. </p>
                                <p> O <code class="code">CLUSTER_ARN</code> especifica o cluster Amazon MSK do qual você está transmitindo.</p>       
                            </li><li>
                                <p>Crie uma visão materializada para consumir os dados do tópico. O exemplo a seguir define uma exibição materializada com dados de origem JSON. Observe que a visão a seguir valida que os dados são um JSON válido e utf8. Nomes de tópico do Kafka diferenciam letras maiúsculas e minúsculas, podendo conter ambas. Para ingerir tópicos com nomes em letras maiúsculas, é possível definir a configuração <code class="code">enable_case_sensitive_identifier</code> para <code class="code">true</code> no nível do cluster. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_names.html">Nomes e identificadores</a> e <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_enable_case_sensitive_identifier.html">enable_case_sensitive_identifier</a>.</p>
                                
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW MyView AUTO REFRESH YES AS
SELECT kafka_partition, 
 kafka_offset, 
 kafka_timestamp_type, 
 kafka_timestamp, 
 kafka_key, 
 JSON_PARSE(kafka_value) as Data, 
 kafka_headers
FROM MySchema."mytopic"
WHERE CAN_JSON_PARSE(kafka_value);</code></pre>
                    <p>Para ativar a atualização automática, use <code class="code">AUTO REFRESH YES</code>. O comportamento padrão é atualização manual. </p>
                                <p>As colunas de metadados incluem o seguinte:</p>
                                <div class="table-container"><div class="table-contents"><table id="w319aac21c47c15c15b5b9b9"><thead>
                                            <tr>
                                                <th>Coluna de metadados</th>
                                                <th>Tipo de dados</th>
                                                <th>Descrição</th>
                                            </tr>
                                        </thead>
                                            <tr>
                                                <td tabindex="-1"> kafka_partition </td>
                                                <td tabindex="-1"> bigint </td>
                                                <td tabindex="-1"> ID de partição do registro do tópico do Kafka </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_offset </td>
                                                <td tabindex="-1"> bigint </td>
                                                <td tabindex="-1"> Deslocamento do registro no tópico do Kafka para determinada partição </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_timestamp_type </td>
                                                <td tabindex="-1"> char(1) </td>
                                                <td tabindex="-1">
                                                    <p>Tipo de time stamp usado no registro do Kafka:</p> 
                                                    <div class="itemizedlist">
                                                         
                                                         
                                                         
                                                    <ul class="itemizedlist"><li class="listitem"><p><em>C</em>: hora de criação do registro (CREATE_TIME) no lado do cliente</p></li><li class="listitem"><p><em>L</em>: hora de inclusão do registro (LOG_APPEND_TIME) no lado do servidor do Kafka </p></li><li class="listitem"><p><em>U</em>: a hora de criação do registro não está disponível (NO_TIMESTAMP_TYPE)</p></li></ul></div>
                                                </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_timestamp </td>
                                                <td tabindex="-1"> time stamp sem fuso horário </td>
                                                <td tabindex="-1"> O valor do time stamp para o registro </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_key </td>
                                                <td tabindex="-1"> varbyte </td>
                                                <td tabindex="-1"> A chave do registro do Kafka </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_value </td>
                                                <td tabindex="-1"> varbyte </td>
                                                <td tabindex="-1"> O registro recebido do Kafka </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_headers </td>
                                                <td tabindex="-1"> super </td>
                                                <td tabindex="-1"> O cabeçalho do registro recebido do Kafka </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> refresh_time </td>
                                                <td tabindex="-1"> time stamp sem fuso horário </td>
                                                <td tabindex="-1"> A hora de início da atualização </td>
                                            </tr>
                                        </table></div></div>
                                
                                <p>É importante observar que, se você tiver lógica de negócios na definição de visão materializada, erros de análise podem bloquear a ingestão de streaming em alguns casos. Isso pode fazer com que você precise descartar e recriar a visão materializada. Para evitar isso, recomendamos que você mantenha sua lógica de análise o mais simples possível e realize a maioria das verificações de lógica de negócios nos dados após a ingestão. O exemplo a seguir mostra como você pode usar <a href="./CAN_JSON_PARSE.html">Função CAN_JSON_PARSE</a> para se proteger contra erros e ingerir dados com maior sucesso.</p>
                                
                            </li><li><p>Atualize a visão, o que invoca o Amazon Redshift para ler o tópico e carregar dados na visão materializada.</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">REFRESH MATERIALIZED VIEW MyView;</code></pre>
                            </li><li><p>Consulte dados na exibição materializada.</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from MyView;</code></pre>
                                <p>A visão materializada é atualizada diretamente do tópico quando <code class="code">REFRESH</code> é executada. Você cria uma visão materializada que mapeia à fonte de dados do tópico do Kafka. Você pode executar filtragem e agregações nos dados como parte da definição de visão materializada. Sua visão materializada de ingestão de streaming (a visão materializada de base) pode fazer referência a apenas um tópico do Kafka, mas você pode criar visões materializadas adicionais que se unam à visão materializada de base e com outras visões materializadas ou tabelas.</p>
                            </li></ol></div>
                        <p>Para obter mais informações sobre as limitações da ingestão de streaming, consulte <a href="./materialized-view-streaming-ingestion.html#materialized-view-streaming-ingestion-limitations">Limitações</a>.</p>
                    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./materialized-view-streaming-ingestion-getting-started.html">Conceitos básicos da ingestão de streaming do Amazon Kinesis Data Streams</div><div id="next" class="next-link" accesskey="n" href="./materialized-view-streaming-ingestion-example-station-data.html">Tutorial de ingestão de streaming de dados de estação de veículos elétricos usando o Kinesis</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>