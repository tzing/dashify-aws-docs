<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Recomendações do Amazon Redshift Advisor - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="advisor-recommendations" /><meta name="default_state" content="advisor-recommendations" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" /><meta name="description" content="O Amazon Redshift Advisor oferece recomendações sobre como otimizar seu cluster Amazon Redshift para aumentar a performance e economizar nos custos operacionais. É possível encontrar explicações para cada recomendação no console, conforme descrito anteriormente. É possível encontrar mais detalhes sobre essas recomendações nas seções a seguir." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/advisor-recommendations.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/advisor-recommendations.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/advisor-recommendations.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/advisor-recommendations.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/advisor-recommendations.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/advisor-recommendations.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/advisor-recommendations.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/advisor-recommendations.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/advisor-recommendations.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/advisor-recommendations.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/advisor-recommendations.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/advisor-recommendations.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/advisor-recommendations.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/advisor-recommendations.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/advisor-recommendations.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Recomendações do Amazon Redshift Advisor" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Recomendações do Amazon Redshift Advisor - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#advisor-recommendations" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Práticas recomendadas do Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/best-practices.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Trabalhar com recomendações do Amazon Redshift Advisor",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Recomendações do Amazon Redshift Advisor",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#advisor-recommendations" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#cluster-compress-s3-recommendation">Compactar objetos de arquivo do Amazon S3 carregados por COPY</a><a href="#isolate-active-dbs-recommendation">Isolar vários bancos de dados ativos</a><a href="#reallocate-wlm-recommendation">Realocar a memória do Workload Management (WLM)</a><a href="#skip-compression-analysis-recommendation">Ignorar a análise de compactação durante o comando COPY</a><a href="#split-s3-objects-recommendation">Dividir objetos do Amazon S3 carregados por COPY</a><a href="#update-table-statistics-recommendation">Atualizar estatísticas da tabela</a><a href="#enable-sqa-recommendation">Habilitar a aceleração de consultas breves</a><a href="#alter-diststyle-distkey-recommendation">Alterar chaves de distribuição em tabelas</a><a href="#alter-sortkey-recommendation">Alterar as chaves de classificação em tabelas</a><a href="#alter-compression-encoding-recommendation">Alterar codificações de compactação em colunas</a><a href="#data-type-recommendation">Recomendações de tipo de dados</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="advisor-recommendations">Recomendações do Amazon Redshift Advisor</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>O Amazon Redshift Advisor oferece recomendações sobre como otimizar seu cluster Amazon Redshift para aumentar a performance e economizar nos custos operacionais. É possível encontrar explicações para cada recomendação no console, conforme descrito anteriormente. É possível encontrar mais detalhes sobre essas recomendações nas seções a seguir. </p><div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#cluster-compress-s3-recommendation">Compactar objetos de arquivo do Amazon S3 carregados por COPY</a></li><li><a href="#isolate-active-dbs-recommendation">Isolar vários bancos de dados ativos</a></li><li><a href="#reallocate-wlm-recommendation">Realocar a memória do Workload Management (WLM)</a></li><li><a href="#skip-compression-analysis-recommendation">Ignorar a análise de compactação durante o comando COPY</a></li><li><a href="#split-s3-objects-recommendation">Dividir objetos do Amazon S3 carregados por COPY</a></li><li><a href="#update-table-statistics-recommendation">Atualizar estatísticas da tabela</a></li><li><a href="#enable-sqa-recommendation">Habilitar a aceleração de consultas breves</a></li><li><a href="#alter-diststyle-distkey-recommendation">Alterar chaves de distribuição em tabelas</a></li><li><a href="#alter-sortkey-recommendation">Alterar as chaves de classificação em tabelas</a></li><li><a href="#alter-compression-encoding-recommendation">Alterar codificações de compactação em colunas</a></li><li><a href="#data-type-recommendation">Recomendações de tipo de dados</a></li></ul></div>
            <h2 id="cluster-compress-s3-recommendation">Compactar objetos de arquivo do Amazon S3 carregados por COPY</h2>
            <p>O comando COPY tira proveito da arquitetura de processamento paralelo maciço (MPP) no Amazon Redshift para ler e carregar dados em paralelo. Ele pode ler arquivos do Amazon S3, tabelas do DynamoDB e saída de texto de um ou mais hosts remotos. </p>
            <p>Ao carregar grandes quantidades de dados, é altamente recomendável usar o comando COPY para carregar arquivos de dados compactados do S3. A compactação de grandes conjuntos de dados economiza tempo no upload dos arquivos para o Amazon S3. COPY também pode agilizar o processo de carregamento ao descompactar os arquivos à medida que são lidos. </p>
            <p><b>Análise</b></p>
            <p>Comandos COPY de execução prolongada, que carregam grandes conjuntos de dados descompactados, geralmente têm a oportunidade de melhorar consideravelmente a performance. A análise do Advisor identifica comandos COPY que carregam grandes conjuntos de dados descompactados. Nesse caso, o Advisor gera uma recomendação para implementar a compactação nos arquivos de origem no Amazon S3. </p>


            <p><b>Recomendação</b></p>
            <p>Verifique se cada COPY que carrega uma quantidade significativa de dados, ou que é executado por um tempo significativo, ingere objetos de dados compactados do Amazon S3. É possível identificar os comandos COPY que carregam grandes conjuntos de dados descompactados do Amazon S3 executando o comando SQL a seguir como um superusuário.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT
    wq.userid, query, exec_start_time AS starttime, COUNT(*) num_files,
    ROUND(MAX(wq.total_exec_time/1000000.0),2) execution_secs,
    ROUND(SUM(transfer_size)/(1024.0*1024.0),2) total_mb,
    SUBSTRING(querytxt,1,60) copy_sql
FROM stl_s3client s
JOIN stl_query q USING (query)
JOIN stl_wlm_query wq USING (query)
WHERE s.userid&gt;1 AND http_method = 'GET'
    AND POSITION('COPY ANALYZE' IN querytxt) = 0
    AND aborted = 0 AND final_state='Completed'
GROUP BY 1, 2, 3, 7
HAVING SUM(transfer_size) = SUM(data_size) 
AND SUM(transfer_size)/(1024*1024) &gt;= 5
ORDER BY 6 DESC, 5 DESC;         
          </code></pre>
            <p>Se os dados preparados permanecerem no Amazon S3 depois de carregá-los, o que é comum em arquiteturas de data lake, armazenar esses dados em um formato compactado poderá reduzir os custos de armazenamento. </p>
            <p><b>Dicas de implementação</b></p>

            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>O tamanho ideal do objeto é de 1 a 128 MB após a compressão.</p>
               </li><li class="listitem">
                  <p>É possível compactar arquivos com o formato gzip, lzop ou bzip2.</p>
               </li></ul></div>

          
            <h2 id="isolate-active-dbs-recommendation">Isolar vários bancos de dados ativos</h2>
            <p>Como prática recomendada, recomendamos isolar os bancos de dados no Amazon Redshift uns dos outros. As consultas são executadas em um banco de dado específico e não podem acessar dados de qualquer outro banco de dados no cluster. No entanto, as consultas executadas em todos os bancos de dados de um cluster compartilham o mesmo espaço de armazenamento os recursos de computação do cluster subjacente. Quando um único cluster contém vários bancos de dados ativos, seus workloads geralmente não são relacionados.</p>
            <p><b>Análise</b></p>
            <p>A análise do Advisor analisa todos os bancos de dados do cluster para workloads ativos executados ao mesmo tempo. Se houver workloads ativos em execução ao mesmo tempo, o Advisor gera uma recomendação para considerar a migração de bancos de dados para clusters separados do Amazon Redshift.</p>

            <p><b>Recomendação</b></p>
            <p>Considere mover cada banco de dados consultado ativamente para um cluster dedicado separado. Usar um cluster separado pode reduzir contenção de recursos e melhorar a performance de consulta. Isso é possível, pois permite que você defina o tamanho de cada cluster para as necessidades de performance, custo e armazenamento de cada workload. Além disso, as workloads não relacionadas geralmente se beneficiam de diferentes configurações de gerenciamento da workload.</p>
            <p>Para identificar quais bancos de dados são usados ativamente, é possível executar este comando SQL como um superusuário.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT database,
  COUNT(*) as num_queries,
  AVG(DATEDIFF(sec,starttime,endtime)) avg_duration,
  MIN(starttime) as oldest_ts,
  MAX(endtime) as latest_ts
FROM stl_query
WHERE userid &gt; 1
GROUP BY database;            
         </code></pre>
            <p><b>Dicas de implementação</b></p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Como um usuário deve se conectar a cada banco de dados especificamente, e as consultas podem acessar somente um único banco de dados, mover bancos de dados para clusters separados tem um impacto mínimo para os usuários.</p>
               </li><li class="listitem">
                  <p>Uma opção para mover um banco de dados é realizar as seguintes etapas: </p>
                  <div class="orderedlist">
                      
                      
                      
                  <ol><li>
                        <p>Restaurar temporariamente um snapshot do cluster atual para um cluster do mesmo tamanho.</p>
                     </li><li>
                        <p>Excluir todos os bancos de dados do novo cluster, exceto o banco de dados de destino a ser movido.</p>
                     </li><li>
                        <p>Redimensionar o cluster para uma contagem e um tipo de nó apropriados para o workload do banco de dados.</p>
                     </li></ol></div>

               </li></ul></div>
          
            <h2 id="reallocate-wlm-recommendation">Realocar a memória do Workload Management (WLM)</h2>
            <p>O Amazon Redshift roteia consultas de usuário para <a href="./cm-c-defining-query-queues.html">Implementar o WLM manual</a> para processamento. O gerenciamento de workload (WLM) define como essas consultas são roteadas para as filas. O Amazon Redshift aloca a cada fila uma parte da memória disponível do cluster. A memória de uma fila é dividida entre os slots de consulta da fila. </p>
            <p>Quando uma fila é configurada com mais slot do que o necessário para o workload, a memória alocada para esses slots não utilizados é subutilizada. Reduzir os slots configurados para corresponder aos requisitos do workload de pico redistribui a memória subutilizada para slots ativos, e pode resultar na melhoria da performance de consulta. </p>
            <p><b>Análise</b></p>
            <p>A análise do Advisor analisa os requisitos de simultaneidade do workload para identificar filas de consulta com slots não utilizados. O Advisor gera uma recomendação para reduzir o número de slots em uma fila quando encontrar o seguinte:</p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Uma fila com slots completamente inativos durante toda a análise.</p>
               </li><li class="listitem">
                  <p>Uma fila com mais de quatro slots que tiveram pelo menos dois slots inativos durante toda a análise.</p>
               </li></ul></div>

            <p><b>Recomendação</b></p>
            <p>Reduzir os slots configurados para corresponder aos requisitos do workload de pico redistribui memória subutilizada para slots ativos. Considere reduzir a contagem de slots configurados para filas em que os slots nunca foram totalmente utilizados. Para identificar essas filas, é possível comparar os requisitos de slot por hora de pico para cada fila executando o seguinte comando SQL como um superusuário.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
WITH
 generate_dt_series AS (select sysdate - (n * interval '5 second') as dt from (select row_number() over () as n from stl_scan limit 17280)),
 apex AS (
     SELECT iq.dt, iq.service_class, iq.num_query_tasks, count(iq.slot_count) as service_class_queries, sum(iq.slot_count) as service_class_slots
     FROM
         (select gds.dt, wq.service_class, wscc.num_query_tasks, wq.slot_count
         FROM stl_wlm_query wq
         JOIN stv_wlm_service_class_config wscc ON (wscc.service_class = wq.service_class AND wscc.service_class &gt; 5)
         JOIN generate_dt_series gds ON (wq.service_class_start_time &lt;= gds.dt AND wq.service_class_end_time &gt; gds.dt)
         WHERE wq.userid &gt; 1 AND wq.service_class &gt; 5) iq
     GROUP BY iq.dt, iq.service_class, iq.num_query_tasks),
     maxes as (SELECT apex.service_class, trunc(apex.dt) as d, date_part(h,apex.dt) as dt_h, max(service_class_slots) max_service_class_slots
                     from apex group by apex.service_class, apex.dt, date_part(h,apex.dt))
SELECT apex.service_class - 5 AS queue, apex.service_class, apex.num_query_tasks AS max_wlm_concurrency, maxes.d AS day, maxes.dt_h || ':00 - ' || maxes.dt_h || ':59' as hour, MAX(apex.service_class_slots) as max_service_class_slots
FROM apex
JOIN maxes ON (apex.service_class = maxes.service_class AND apex.service_class_slots = maxes.max_service_class_slots)
GROUP BY  apex.service_class, apex.num_query_tasks, maxes.d, maxes.dt_h
ORDER BY apex.service_class, maxes.d, maxes.dt_h;            
         </code></pre>
            <p>A coluna <code class="code">max_service_class_slots</code> representa o número máximo de slots da consulta de WLM na fila de consulta para aquela hora. Se existirem filas subutilizadas, implemente a otimização de redução de slots <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-parameter-groups-console.html#parameter-group-modify">modificando um grupo de parâmetros</a>, conforme descrito no <em>Guia de gerenciamento de clusters do Amazon Redshift</em>.</p>
            <p><b>Dicas de implementação</b></p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Se o workload for altamente variável em volume, verifique se a análise capturou um período utilização de pico. Caso contrário, execute o SQL anterior repetidamente para monitorar os requisitos de simultaneidade de pico. </p>
               </li><li class="listitem">
                  <p>Para obter mais detalhes sobre a interpretação dos resultados das consultas do código SQL anterior, consulte o script <a href="https://github.com/awslabs/amazon-redshift-utils/blob/master/src/AdminScripts/wlm_apex_hourly.sql" rel="noopener noreferrer" target="_blank"><span>wlm_apex_hourly.sql script</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> no GitHub.</p>
               </li></ul></div>

          
            <h2 id="skip-compression-analysis-recommendation">Ignorar a análise de compactação durante o comando COPY</h2>
            <p>Quando você carrega dados em uma tabela vazia com codificação de compactação declarada com o comando COPY, o Amazon Redshift aplica compactação de armazenamento. Essa otimização garante que os dados no cluster sejam armazenados com eficiência, mesmo quando carregados por usuários finais. A análise necessária para a compactação pode levar um tempo significativo.</p>

            <p><b>Análise</b></p>
            <p>A análise do Advisor verifica operações COPY que foram atrasadas por análise de compactação automática. A análise determina as codificações de compactação com uma amostragem de dados durante o carregamento. Essa amostragem é semelhante àquela realizada pelo comando <a href="./r_ANALYZE_COMPRESSION.html">ANALYZE COMPRESSION</a>. </p>
            <p>Quando você carrega dados como parte de um processo estruturado, como em um lote noturno de extração, transformação e carregamento (ETL), é possível definir a compactação antecipadamente. Também é possível otimizar as definições de tabela para ignorar permanentemente essa fase sem nenhum impacto negativo.</p>
            <p><b>Recomendação</b></p>
            <p>Para melhorar a agilidade do comando COPY ignorando a fase de análise de compactação, implemente uma destas duas opções:</p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Use o parâmetro da coluna <code class="code">ENCODE</code> ao criar qualquer tabela carregada usando o comando COPY.</p>
               </li><li class="listitem">
                  <p>Desative a compactação por completo fornecendo o parâmetro <code class="code">COMPUPDATE OFF</code> no comando COPY.</p>
               </li></ul></div>
            <p>A melhor solução geralmente é usar a codificação de coluna durante a criação da tabela, pois essa abordagem também mantém o benefício de armazenar dados compactados em disco. É possível usar o comando ANALYZE COMPRESSION para sugerir codificações de compactação, mas é necessário recriar a tabela para aplicar essas codificações. Para automatizar esse processo, você pode usar o AWS<a href="https://github.com/awslabs/amazon-redshift-utils/tree/master/src/ColumnEncodingUtility" rel="noopener noreferrer" target="_blank"><span>ColumnEncodingUtility</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, encontrado no GitHub. </p>
            <p>Para identificar as operações COPY que acionam análise de compactação automática, execute o seguinte comando SQL.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
  WITH xids AS (
    SELECT xid FROM stl_query WHERE userid&gt;1 AND aborted=0 
    AND querytxt = 'analyze compression phase 1' GROUP BY xid
    INTERSECT SELECT xid FROM stl_commit_stats WHERE node=-1)
SELECT a.userid, a.query, a.xid, a.starttime, b.complyze_sec, 
    a.copy_sec, a.copy_sql
FROM (SELECT q.userid, q.query, q.xid, date_trunc('s',q.starttime) 
    starttime, substring(querytxt,1,100) as copy_sql, 
    ROUND(datediff(ms,starttime,endtime)::numeric / 1000.0, 2) copy_sec
    FROM stl_query q JOIN xids USING (xid)
    WHERE (querytxt ilike 'copy %from%' OR querytxt ilike '% copy %from%') 
    AND querytxt not like 'COPY ANALYZE %') a
LEFT JOIN (SELECT xid, 
    ROUND(sum(datediff(ms,starttime,endtime))::numeric / 1000.0,2) complyze_sec 
    FROM stl_query q JOIN xids USING (xid)
    WHERE (querytxt like 'COPY ANALYZE %' 
    OR querytxt like 'analyze compression phase %') 
    GROUP BY xid ) b ON a.xid = b.xid
WHERE b.complyze_sec IS NOT NULL ORDER BY a.copy_sql, a.starttime;
         </code></pre>
            <p><b>Dicas de implementação</b></p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Verifique se todas as tabelas de tamanho significativo criadas durante os processos de ETL (por exemplo, tabelas de preparação e tabelas temporárias) declaram uma codificação de compactação para todas as colunas, exceto a primeira chave de classificação.</p>
               </li><li class="listitem">
                  <p>Estime o tamanho esperado de vida útil da tabela que está sendo carregada para cada um dos comandos COPY identificados pelos comandos SQL anteriores. Se tiver certeza de que a tabela permanecerá muito pequena, desative a compactação por completo com o parâmetro <code class="code">COMPUPDATE OFF</code>. Caso contrário, crie a tabela com a compactação explícita antes de carregá-la com o comando COPY.</p>
               </li></ul></div>
          
            <h2 id="split-s3-objects-recommendation">Dividir objetos do Amazon S3 carregados por COPY</h2>
            <p>O comando COPY tira proveito da arquitetura de processamento paralelo massivo (MPP) no Amazon Redshift para ler e carregar dados de arquivos no Amazon S3. O comando COPY carrega os dados em paralelo a partir de vários arquivos, dividindo o workload entre os nós em seu cluster. Para atingir a taxa de transferência ideal, é altamente recomendável que você divida seus dados em vários arquivos para aproveitar o processamento paralelo. </p>
            <p><b>Análise</b></p>
            <p>A análise do Advisor identifica os comandos COPY que carregam grandes conjuntos de dados contidos em um pequeno número de arquivos preparados no Amazon S3. Comandos COPY de execução prolongada, que carregam grandes conjuntos de dados de poucos arquivos, geralmente têm a oportunidade de melhorar consideravelmente a performance. Quando o Advisor identifica que esses comandos COPY estão levando uma quantidade significativa de tempo, ele cria uma recomendação para aumentar o paralelismo dividindo os dados em arquivos adicionais no Amazon S3. </p>
            <p><b>Recomendação</b></p>
            <p>Nesse caso, recomendamos as seguintes ações, listada em ordem de prioridade:</p>
            <div class="orderedlist">
                
                
                
            <ol><li>
                  <p>Otimize os comandos COPY que carregam menos arquivos que o número de nós do cluster.</p>
               </li><li>
                  <p>Otimize os comandos COPY que carregam menos arquivos que o número de fatias do cluster. </p>
               </li><li>
                  <p>Otimize os comandos COPY em que o número de arquivos não seja um múltiplo do número de fatias do cluster.</p>
               </li></ol></div>
            <p>Certos comandos COPY carregam uma quantidade significativa de dados ou são executados por um período significativo. Para esses comandos, recomendamos que você carregue uma série de objetos de dados do Amazon S3 que seja equivalente a um múltiplo do número de fatias do cluster. Para identificar quantos objetos do S3 cada comando COPY carregou, execute o seguinte código SQL como um superusuário. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT
    query, COUNT(*) num_files,
    ROUND(MAX(wq.total_exec_time/1000000.0),2) execution_secs,
    ROUND(SUM(transfer_size)/(1024.0*1024.0),2) total_mb,
    SUBSTRING(querytxt,1,60) copy_sql
FROM stl_s3client s
JOIN stl_query q USING (query)
JOIN stl_wlm_query wq USING (query)
WHERE s.userid&gt;1 AND http_method = 'GET'
    AND POSITION('COPY ANALYZE' IN querytxt) = 0
    AND aborted = 0 AND final_state='Completed'
GROUP BY query, querytxt
HAVING (SUM(transfer_size)/(1024*1024))/COUNT(*) &gt;= 2
ORDER BY CASE
WHEN COUNT(*) &lt; (SELECT max(node)+1 FROM stv_slices) THEN 1
WHEN COUNT(*) &lt; (SELECT COUNT(*) FROM stv_slices WHERE node=0) THEN 2
ELSE 2+((COUNT(*) % (SELECT COUNT(*) FROM stv_slices))/(SELECT COUNT(*)::DECIMAL FROM stv_slices))
END, (SUM(transfer_size)/(1024.0*1024.0))/COUNT(*) DESC;   
            
         </code></pre>
            <p><b>Dicas de implementação</b></p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>O número de fatias em um nó depende do tamanho do nó do cluster. Para obter mais informações sobre o número de fatias nos vários tipos de nó, consulte “<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/working-with-clusters.html#rs-about-clusters-and-nodes">Clusters e nós no Amazon Redshift</a>” no <em>Guia de gerenciamento de clusters do Amazon Redshift</em>. </p>
               </li><li class="listitem">
                  <p>Você pode carregar vários arquivos especificando um prefixo comum ou prefixo de chave para o conjunto ou listando explicitamente os arquivos em um arquivo manifesto. Para obter mais informações o carregamento de arquivos, consulte <a href="./t_splitting-data-files.html">Carregar dados de arquivos compactados e não compactados</a>.</p>
               </li><li class="listitem">
                  <p>O Amazon Redshift não leva em conta o tamanho do arquivo ao dividir o workload. Divida seus arquivos de dados de carregamento para que os arquivos tenham o mesmo tamanho aproximado, entre 1 MB e 1 GB após a compactação. </p>
               </li></ul></div>
          
            <h2 id="update-table-statistics-recommendation">Atualizar estatísticas da tabela</h2>
            <p>O Amazon Redshift usa um otimizador de consulta baseado em custo para escolher o plano de execução ideal para consultas. As estimativas de custos são baseadas em estatísticas da tabela obtidas usando o comando ANALYZE. Quando as estatísticas estão desatualizadas ou ausentes, o banco de dados escolhe um plano menos eficiente para a execução de consulta, principalmente para consultas complexas. Manter estatísticas atuais ajuda que a execução de consultas complexas ocorra no mínimo tempo possível. </p>
            <p><b>Análise</b></p>
            <p>A análise do Advisor monitora tabelas cujas estatísticas estão desatualizadas ou ausentes. Ela revisa os metadados de acesso da tabela associados a consultas complexas. Se as tabelas que são geralmente acessadas com padrões complexos não tiverem estatísticas, o Advisor criará uma recomendação <b>crucial</b> para executar ANALYZE. Se as tabelas que são geralmente acessadas com padrões complexos tiverem estatísticas desatualizadas, o Advisor criará uma recomendação <b>sugerida</b> para executar ANALYZE.</p>

            <p><b>Recomendação</b></p>
            <p>Sempre que o conteúdo da tabela for alterado significativamente, atualize as estatísticas com ANALYZE. Recomendamos executar ANALYZE sempre que um número significativo de novas linhas de dados for carregado para uma tabela existente com os comandos COPY ou INSERT. Também recomendamos executar ANALYZE sempre que um número significativo de linhas for modificado com comandos UPDATE ou DELETE. Para identificar as tabelas com estatísticas ausentes ou atualizadas, execute o seguinte comando SQL como um superusuário. Os resultados são ordenados da tabela maior para a menor. </p>
            <p>Para identificar as tabelas com estatísticas ausentes ou atualizadas, execute o seguinte comando SQL como um superusuário. Os resultados são ordenados da tabela maior para a menor.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT
   ti.schema||'.'||ti."table" tablename,
   ti.size table_size_mb,
   ti.stats_off statistics_accuracy
 FROM svv_table_info ti
 WHERE ti.stats_off &gt; 5.00
 ORDER BY ti.size DESC;          
         </code></pre>
            <p><b>Dicas de implementação</b></p>
            
                  <p>O limite ANALYZE padrão é 10 por cento. Esse padrão significa que o comando ANALYZE ignorará uma determinada tabela se menos de 10 por cento das linhas que ela contém tiverem sofrido alterações desde o último ANALYZE. Como resultado, você pode escolher executar comandos ANALYZE ao final de cada processo de ETL. Optar por essa abordagem significa que o comando ANALYZE será ignorado frequentemente, mas também garante que ele seja executado quando for necessário.</p>
              
                  <p>As estatísticas do comando ANALYZE têm maior impacto para colunas usadas em junções (por exemplo, <code class="code">JOIN tbl_a ON col_b</code>) ou como predicados (por exemplo, <code class="code">WHERE col_b = 'xyz'</code>). Por padrão, o comando ANALYZE coleta estatísticas para todas as colunas na tabela especificada. Se necessário, é possível reduzir o tempo necessário para executar o comando ANALYZE executando-o somente para as colunas onde tem o maior impacto. É possível executar o seguinte comando SQL para identificar colunas usadas como predicados. Você também pode permitir que o Amazon Redshift escolha quais colunas analisar especificando <code class="code">ANALYZE PREDICATE COLUMNS</code>. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">WITH predicate_column_info as (
SELECT ns.nspname AS schema_name, c.relname AS table_name, a.attnum as col_num,  a.attname as col_name,
        CASE
            WHEN 10002 = s.stakind1 THEN array_to_string(stavalues1, '||') 
            WHEN 10002 = s.stakind2 THEN array_to_string(stavalues2, '||')
            WHEN 10002 = s.stakind3 THEN array_to_string(stavalues3, '||')
            WHEN 10002 = s.stakind4 THEN array_to_string(stavalues4, '||')
            ELSE NULL::varchar
        END AS pred_ts
   FROM pg_statistic s
   JOIN pg_class c ON c.oid = s.starelid
   JOIN pg_namespace ns ON c.relnamespace = ns.oid
   JOIN pg_attribute a ON c.oid = a.attrelid AND a.attnum = s.staattnum)
SELECT schema_name, table_name, col_num, col_name,
       pred_ts NOT LIKE '2000-01-01%' AS is_predicate,
       CASE WHEN pred_ts NOT LIKE '2000-01-01%' THEN (split_part(pred_ts, '||',1))::timestamp ELSE NULL::timestamp END as first_predicate_use,
       CASE WHEN pred_ts NOT LIKE '%||2000-01-01%' THEN (split_part(pred_ts, '||',2))::timestamp ELSE NULL::timestamp END as last_analyze
FROM predicate_column_info;</code></pre>
            <p>Para obter mais informações, consulte <a href="./t_Analyzing_tables.html">Análise de tabelas</a>.</p>
          
            <h2 id="enable-sqa-recommendation">Habilitar a aceleração de consultas breves</h2>
            <p>A aceleração de consultas breves (SQA) prioriza as consultas de curta execução sobre as consultas de execução demorada. A SQA executa consultas breves em um espaço dedicado, de maneira que as consultas SQA não sejam forçadas a esperar em filas atrás de consultas mais demoradas. O SQA apenas prioriza consultas que são de execução curta e estão em uma fila definida pelo usuário. Com a SQA, consultas breves são iniciadas com mais rapidez e os usuários veem os resultados mais cedo. </p>
            <p>Se você ativar a SQA, poderá reduzir ou eliminar as filas de gerenciamento de workload (WLM) que são dedicadas à execução de consultas breves. Além disso, as consultas demoradas não precisam disputar slots em uma fila com as consultas breves, e assim você pode configurar suas filas do WLM usando menos slots de consulta. Quando você usa um nível de simultaneidade menor, a taxa de transferência de consultas aumenta e a performance geral do sistema melhora na maioria dos workloads. Para obter mais informações, consulte <a href="./wlm-short-query-acceleration.html">Trabalhar com a aceleração de consulta breve</a>. </p>
            <p><b>Análise</b></p>
            <p>O Advisor verifica os padrões de workload e relata o número de consultas recentes em que a SQA reduziria a latência e o tempo de fila diário de consultas qualificadas para SQA.</p>
            <p><b>Recomendação</b></p>
            <p>Modificar a configuração de WLM para ativar a SQA. O Amazon Redshift usa um algoritmo de Machine Learning para analisar cada consulta qualificada. As previsões serão melhores, pois a SQA aprenderá com os padrões das suas consulta. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/workload-mgmt-config.html">Configurar filas do Workload Management</a>. </p>
            <p>Ao ativar a SQA, o WLM define o tempo máximo do ambiente de tempo de execução de consultas breves como dinâmico, por padrão. Recomendamos manter a configuração dinâmica para o tempo de execução máximo de SQA. </p>
            <p><b>Dicas de implementação</b></p>
            <p>Para conferir se a SQA está ativada, execute a consulta a seguir. Se a consulta retornar uma linha, a SQA está ativada.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from stv_wlm_service_class_config 
where service_class = 14;</code></pre>
            <p>Para obter mais informações, consulte <a href="./wlm-short-query-acceleration.html#wlm-monitoring-sqa">Monitoramento da SQA</a>. </p>
          
            <h2 id="alter-diststyle-distkey-recommendation">Alterar chaves de distribuição em tabelas</h2>
            <p>O Amazon Redshift distribui as linhas da tabela em todo o cluster de acordo com o estilo de distribuição da tabela. As tabelas com distribuição de CHAVE precisam de uma coluna como a chave de distribuição (DISTKEY). Uma linha da tabela é atribuída a uma fatia do nó de um cluster com base no valor da coluna DISTKEY. </p>
            <p>Uma DISTKEY apropriada coloca uma quantidade semelhante de linhas e cada fatia do nó e costuma ser mencionada em condições de união. Uma união otimizada ocorre quando as tabelas são unidas nas colunas DISTKEY, acelerando a performance da consulta.</p>
            
            <p><b>Análise</b></p>
            <p>O Advisor analisa o workload do cluster para identificar a chave de distribuição mais apropriada para as tabelas que podem se beneficiar significativamente de um estilo de distribuição de CHAVE. </p>
            
            <p><b>Recomendação</b></p>
            <p>O Advisor fornece instruções <a href="./r_ALTER_TABLE.html">ALTER TABLE</a> que alteram o DISTSTYLE e a DISTKEY de uma tabela com base em sua análise. Para obter um benefício de performance significativo, garanta a implementação de todas as instruções SQL em um grupo de recomendação. </p>
            <p>A redistribuição de uma tabela grande com ALTER TABLE consome recursos do cluster e requer bloqueios de tabela temporários em vários momentos. Implemente cada grupo de recomendação quando o outro workload do cluster for leve. Para ver mais detalhes sobre como otimizar as propriedades de distribuição da tabela, consulte o <a href="https://aws.amazon.com/blogs/big-data/amazon-redshift-engineerings-advanced-table-design-playbook-distribution-styles-and-distribution-keys/" rel="noopener noreferrer" target="_blank"><span>Manual de design de tabela avançada do Amazon Redshift Engineering: estilos de distribuição e chaves de distribuição</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>        
            <p>Para obter mais informações sobre ALTER DISTSYLE e DISTKEY, consulte <a href="./r_ALTER_TABLE.html">ALTER TABLE</a>. </p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se você não vir uma recomendação, não significa necessariamente que os estilos de distribuição atuais sejam os mais apropriados. O Advisor não fornece recomendações quando não há dados suficientes ou o benefício esperado da redistribuição é pequeno. </p><p>As recomendações do Advisor se aplicam a uma tabela específica e não necessariamente se aplicam a uma tabela que contém uma coluna com o mesmo nome. As tabelas que têm um nome de coluna em comum podem ter características diferentes para essas colunas, a não ser que os dados dentro das tabelas sejam os mesmos. </p><p>Se você vir recomendações para preparar tabelas que são criadas ou enviadas por tarefas ETL, modifique seus processos ETL para usar as chaves de distribuição recomendadas pelo Advisor. </p></div></div>

          
            <h2 id="alter-sortkey-recommendation">Alterar as chaves de classificação em tabelas</h2>
            <p>O Amazon Redshift classifica as linhas da tabela de acordo com a <a href="./t_Sorting_data.html">chave de classificação</a> da tabela. A classificação de linhas da tabela tem como base os valores da coluna da chave de classificação. </p>
            <p>Classificar uma tabela em uma chave de classificação apropriada pode acelerar a performance de consultas, especialmente aquelas com predicados restritos por intervalos, exigindo que menos blocos de tabela sejam lidos do disco. </p>
            
            <p><b>Análise</b></p>
            <p>O Advisor analisa a workload do cluster ao longo de vários dias para identificar uma chave de classificação que beneficie as suas tabelas. </p>
            
            <p><b>Recomendação</b></p>
            <p> O Advisor fornece dois grupos de instruções ALTER TABLE que alteram a chave de classificação de uma tabela com base na análise dele: </p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem"><p>Instruções que alteram uma tabela que atualmente não tem uma chave de classificação para adicionar uma chave de classificação COMPOUND.</p></li><li class="listitem"><p>Instruções que alteram uma chave de classificação de INTERLEAVED para COMPOUND ou nenhuma chave de classificação.</p>
                  <p>Utilizar chaves de classificação composta reduz consideravelmente a sobrecarga de manutenção. Tabelas com chaves de classificação compostas não precisam das caras operações VACUUM REINDEX que são necessárias para tipos intercalados. Na prática, as chaves de classificação compostas são mais eficazes do que as chaves de classificação intercaladas para a grande maioria dos workloads do Amazon Redshift. No entanto, se a tabela for pequena, é mais eficiente não ter uma chave de classificação para evitar sobrecarga de armazenamento de chaves de classificação.</p></li></ul></div>
            
            <p>Quando uma tabela grande é classificada com a instrução ALTER TABLE, são consumidos recursos de cluster e são necessários bloqueios de tabela em vários momentos. Implemente cada recomendação quando o workload de um cluster for moderado. Mais detalhes sobre como otimizar as configurações de chave de classificação de tabela podem ser encontrados no <a href="https://aws.amazon.com/blogs/big-data/amazon-redshift-engineerings-advanced-table-design-playbook-compound-and-interleaved-sort-keys/" rel="noopener noreferrer" target="_blank"><span>Manual de design de tabela avançada do Amazon Redshift Engineering: chaves de classificação compostas e intercaladas</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>        
            <p>Para obter mais informações sobre a ALTER SORTKEY, consulte <a href="./r_ALTER_TABLE.html">ALTER TABLE</a>. </p>
            
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se você não vir uma recomendação para uma tabela, não significa necessariamente que a configuração atual seja a melhor. O Advisor não fornece recomendações quando não há dados suficientes ou o benefício esperado da classificação é pequeno. </p><p>As recomendações do Advisor se aplicam a uma tabela específica e não necessariamente se aplicam a uma tabela que contém uma coluna com o mesmo nome ou tipo de dados. As tabelas que compartilham nomes de coluna podem ter recomendações diferentes com base nos dados nas tabelas e no workload. </p></div></div>
            
          
            <h2 id="alter-compression-encoding-recommendation">Alterar codificações de compactação em colunas</h2>
            <p>A compactação é uma operação em nível de coluna que reduz o tamanho dos dados quando são armazenados. A compactação é usada no Amazon Redshift para economizar espaço de armazenamento e melhorar a performance da consulta, reduzindo a quantidade de E/S de disco. Recomendamos uma codificação de compactação ideal para cada coluna com base em seu tipo de dados e em padrões de consulta. Com a compactação ideal, as consultas podem ser executadas de forma mais eficiente e o banco de dados pode ocupar espaço mínimo de armazenamento. </p>
            
            <p><b>Análise</b></p>
            <p>O Advisor realiza a análise do workload e do esquema de banco de dados do cluster continuamente para identificar a codificação de compactação ideal para cada coluna da tabela.</p>
            
            <p><b>Recomendação</b></p>
            <p>O Advisor fornece instruções ALTER TABLE que alteram a codificação de compactação de colunas específicas, com base na análise dele. </p>
            <p>Alterando codificações de compactação de coluna com <a href="./r_ALTER_TABLE.html">ALTER TABLE</a> consome recursos do cluster e requer bloqueios de tabela em vários momentos. É melhor implementar recomendações quando o workload do cluster for leve. </p>
            <p>Para referência, o <a href="./r_ALTER_TABLE_examples_basic.html">Exemplos de ALTER TABLE</a> mostra várias instruções que alteram a codificação de uma coluna.</p>        
            
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>O Advisor não fornece recomendações quando não há dados suficientes ou o benefício esperado de alterar a codificação é pequeno.</p></div></div>
            
          
            <h2 id="data-type-recommendation">Recomendações de tipo de dados</h2>
            <p>O Amazon Redshift tem uma biblioteca de tipos de dados SQL para vários casos de uso. Entre eles, incluem-se tipos inteiros, como <code class="code">INT</code>, e tipos para armazenar personagens, como <code class="code">VARCHAR</code>. O Redshift armazena tipos de modo otimizado para garantir acesso rápido e boa performance nas consultas. Além disso, o Redshift fornece funções para tipos específicos, que você pode usar para formatar ou executar cálculos usando resultados de consultas. </p>
            
            <p><b>Análise</b></p>
            <p>O Advisor realiza a análise da workload e do esquema de banco de dados do cluster continuamente para identificar as colunas que podem se beneficiar significativamente de uma alteração de tipo de dado.</p>
            
            <p><b>Recomendação</b></p>
            
            <p> O Advisor fornece uma instrução <code class="code">ALTER TABLE</code> que adiciona uma nova coluna com o tipo de dado sugerido. Uma instrução complementar <code class="code">UPDATE</code> copia os dados da coluna existente para a nova coluna. Depois de criar a nova coluna e carregar os dados, altere suas consultas e scripts de ingestão para acessar a nova coluna. Depois, aproveite os recursos e as funções especializadas para o novo tipo de dado, encontrados em <a href="./c_SQL_functions.html">Referência de funções SQL</a>. </p>
            <p> Copiar os dados existentes para a nova coluna pode levar algum tempo. Recomendamos que você implemente cada recomendação do Advisor quando a workload do cluster for leve. Consulte a lista de tipos de dados disponíveis em <a href="./c_Supported_data_types.html">Tipos de dados</a>. </p>
            <p> O Advisor não fornece recomendações quando não há dados suficientes ou quando o benefício esperado da alteração de tipo de dado é pequeno. </p>        
            
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access-advisor.html">Acessar o advisor</div><div id="next" class="next-link" accesskey="n" href="./tutorials-redshift.html">Tutoriais</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>