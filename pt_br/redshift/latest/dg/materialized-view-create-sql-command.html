<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE MATERIALIZED VIEW - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="materialized-view-create-sql-command" /><meta name="default_state" content="materialized-view-create-sql-command" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html" /><meta name="description" content="Cria uma visualização materializada." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-create-sql-command.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="CREATE MATERIALIZED VIEW" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE MATERIALIZED VIEW - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#materialized-view-create-sql-command" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referência SQL",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Comandos SQL",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE MATERIALIZED VIEW",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#materialized-view-create-sql-command" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#mv_CREATE_MATERIALIZED_VIEW-synopsis">Sintaxe</a><a href="#mv_CREATE_MATERIALIZED_VIEW-parameters">Parâmetros</a><a href="#mv_CREATE_MARTERIALIZED_VIEW_usage">Observações de uso</a><a href="#mv_CREATE_MARTERIALIZED_VIEW_datashare">Atualização incremental para visões materializadas em uma unidade de compartilhamento de dados</a><a href="#materialized-view-ddl">Atualizações em DDL para visualizações materializadas ou tabelas base</a><a href="#mv_CREATE_MATERIALIZED_VIEW-limitations">Limitações</a><a href="#mv_CREATE_MARTERIALIZED_VIEW_examples">Exemplos</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="materialized-view-create-sql-command">CREATE MATERIALIZED VIEW</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Cria uma visão materializada com base em uma ou mais tabelas do Amazon Redshift. Você também pode basear visões materializadas em tabelas externas criadas usando Spectrum ou consulta federada. Para obter informações sobre o Spectrum, consulte <a href="./c-using-spectrum.html">Consultar dados externos usando o Amazon Redshift Spectrum</a>. Para obter informações sobre consulta federada, consulte <a href="./federated-overview.html">Consultar dados com consultas federadas no Amazon Redshift</a>.</p>
         <h2 id="mv_CREATE_MATERIALIZED_VIEW-synopsis">Sintaxe</h2>
         <pre class="screen">CREATE MATERIALIZED VIEW mv_name
[ BACKUP <span>{</span> YES | NO } ]
[ table_attributes ]
[ AUTO REFRESH <span>{</span> YES | NO } ]
AS query </pre>
       
         <h2 id="mv_CREATE_MATERIALIZED_VIEW-parameters">Parâmetros</h2>
         <div class="variablelist">
             
             
             

            <dl>
               <dt><span class="term">BACKUP</span></dt>
               <dd>
                  <p>Uma cláusula que especifica se a visualização materializada é incluída em snapshots automatizados e manuais do cluster que são armazenados no Amazon S3.</p>
                  <p>O valor padrão para <code class="code">BACKUP</code> é <code class="code">YES</code>.</p>
                  <p>É possível especificar <code class="code">BACKUP NO</code>  para reduzir o tempo de processamento ao criar snapshots e restaurar de snapshots, e reduzir a quantidade de armazenamento necessário no Amazon S3.</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>A configuração <code class="code">BACKUP NO</code> não tem efeito ba replicação automática de dados para outros nós no cluster. Portanto, tabelas com <code class="code">BACKUP
                           NO</code> especificado são restauradas em uma falha do nó.</p></div></div>
               </dd>
             
               <dt><span class="term"> <em>table_attributes</em> </span></dt>
               <dd>
                  
                  <p>Uma cláusula que especifica como os dados na visualização materializada são distribuídos, incluindo o seguinte:</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p> O estilo de distribuição da visualização materializada, no formato <code class="code">DISTSTYLE <span>{</span> EVEN | ALL | KEY }</code>. Se você omitir essa cláusula, o estilo da distribuição será <code class="code">EVEN</code>. Para obter mais informações, consulte <a href="./c_choosing_dist_sort.html">Estilos de distribuição</a>.</p>
                     </li><li class="listitem">
                        <p>O código de distribuição da visualização materializada, no formato <code class="code">DISTKEY ( <em>distkey_identifier</em> )</code>. Para obter mais informações, consulte <a href="./t_designating_distribution_styles.html">Designação de estilos de distribuição</a>.</p>
                     </li><li class="listitem">
                        <p>A chave de classificação para a visualização materializada, no formato <code class="code">SORTKEY ( <em>column_name</em> [, ...] )</code>. Para obter mais informações, consulte <a href="./t_Sorting_data.html">Trabalhar com chaves de classificação</a>.</p>

                     </li></ul></div>
               </dd>
             
               <dt><span class="term">AS <em>query</em></span></dt>
               <dd>
                  <p>Uma instrução <code class="code">SELECT</code> válida que define a visualização materializada e seu conteúdo. O conjunto de resultados da consulta define as colunas e as linhas da visualização materializada. Para obter informações sobre limitações ao criar visualizações materializadas, consulte <a href="#mv_CREATE_MATERIALIZED_VIEW-limitations">Limitações</a>.</p>
                  <p>Além disso, os constructos de linguagem SQL específicos usados na consulta determinam se a visualização materializada pode ser atualizada de maneira incremental ou total. Para obter informações sobre o método de atualização, consulte <a href="./materialized-view-refresh-sql-command.html">REFRESH MATERIALIZED VIEW</a>. Para obter informações sobre as limitações da atualização incremental, consulte <a href="./materialized-view-refresh-sql-command.html#mv_REFRESH_MARTERIALIZED_VIEW_limitations">Limitações para atualização incremental</a>.</p>

                  <p>Se a consulta contiver um comando SQL incompatível com a atualização incremental, o Amazon Redshift exibirá uma mensagem indicando que a visualização materializada usará uma atualização total. A mensagem poderá ou não ser exibida dependendo da aplicação cliente SQL. Verifique a coluna <code class="code">state</code> do <a href="./r_STV_MV_INFO.html">STV_MV_INFO</a> para ver o tipo de atualização usado por uma visualização materializada.</p></dd>
               <dt><span class="term">AUTO REFRESH</span></dt>
               <dd>
                  <p>Uma cláusula que define se a visualização materializada deve ser atualizada automaticamente com as alterações mais recentes de suas tabelas base. O valor padrão é <code class="code">NO</code>. Para obter mais informações, consulte <a href="./materialized-view-refresh.html">Atualizar uma visualização materializada</a>.</p>

               </dd>
            </dl></div>
       
         <h2 id="mv_CREATE_MARTERIALIZED_VIEW_usage">Observações de uso</h2>
         <p>Para criar uma visualização materializada, você deve ter os seguintes privilégios:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Privilégios CREATE para um esquema.</p>
            </li><li class="listitem">
     
               <p>Privilégio SELECT por tabela ou coluna para as tabelas de base a fim de criar uma visão materializada. Se você tiver privilégios por coluna para colunas específicas, poderá criar uma visão materializada somente para essas colunas.</p>
            </li></ul></div>
       
         <h2 id="mv_CREATE_MARTERIALIZED_VIEW_datashare">Atualização incremental para visões materializadas em uma unidade de compartilhamento de dados</h2>
         <p> O Amazon Redshift oferece suporte à atualização automática e incremental de visões materializadas em uma unidade de compartilhamento de dados do consumidor quando as tabelas base são compartilhadas. A atualização incremental é uma operação em que o Amazon Redshift identifica alterações em uma ou mais tabelas base que ocorreram após a atualização anterior e atualiza somente os registros correspondentes na visão materializada. Ela é mais rápida do que uma atualização completa e melhora o desempenho da workload. Você não precisa alterar a definição de visão materializada para usar a atualização incremental. </p>
         <p>Há algumas limitações a serem observadas para usar a atualização incremental com uma visão materializada: </p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem"><p>A visão materializada deve fazer referência a um banco de dados apenas, seja local ou remoto. </p></li><li class="listitem"><p>A atualização incremental está disponível somente em novas visões materializadas. Portanto, você deve descartar as visões materializadas existentes e recriá-las para que ocorra a atualização incremental.</p></li></ul></div>
         <p>Para obter mais informações sobre a criação de visões materializadas em uma unidade de compartilhamento de dados, consulte <a href="https://docs.aws.amazon.com/redshift/latest/dg/share_datashare.html#datashare-views">Trabalhar com visualizações no compartilhamento de dados do Amazon Redshift</a>, que contém vários exemplos de consulta.</p>
       
         <h2 id="materialized-view-ddl">Atualizações em DDL para visualizações materializadas ou tabelas base</h2>
         <p>Ao usar visualizações materializadas no Amazon Redshift, siga estas observações de uso para atualizações em linguagem de definição de dados (DDL) para visualizações materializadas ou tabelas base.</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>É possível adicionar colunas a uma tabela base sem afetar as visualizações materializadas que fazem referência à tabela-base.</p>
            </li><li class="listitem">
               <p>Algumas operações podem deixar a visualização materializada em um estado que não pode ser atualizado de forma alguma. Entre os exemplos estão operações como renomeação ou descarte de uma coluna, alteração do tipo de uma coluna e alteração do nome de um esquema. Essas visualizações materializadas podem ser consultadas, mas não podem ser atualizadas. Nesse caso, você deve descartar e recriar a visualização materializada. </p>
            </li><li class="listitem">
               <p>Em geral, não é possível alterar a definição de uma visualização materializada (instrução SQL desta).</p>
            </li><li class="listitem">
               <p>Não é possível renomear uma visualização materializada. </p>
            </li></ul></div>
       
         <h2 id="mv_CREATE_MATERIALIZED_VIEW-limitations">Limitações</h2>
         <p>Você não pode definir uma visualização materializada que faça referência ou inclua o seguinte:</p>
         <div class="itemizedlist">
             
             
             
             
             
            
           
             
             
             
         
         <ul class="itemizedlist"><li class="listitem">
               <p>Exibições padrão ou tabelas e exibições do sistema.</p>
            </li><li class="listitem">
               <p>Tabelas temporárias.</p>
            </li><li class="listitem">
               <p>Funções definidas pelo usuário.</p>
            </li><li class="listitem">
               <p>A cláusula ORDER BY, LIMIT ou OFFSET.</p>
            </li><li class="listitem">
               <p>referências de vinculação tardia a tabelas base. Ou seja, todas as tabelas base ou colunas relacionadas referenciadas na definição da consulta SQL da visualização materializada devem existir e serem válidas. </p>
            </li><li class="listitem">
               <p>Funções somente de nó líder: CURRENT_SCHEMA, CURRENT_SCHEMAS, HAS_DATABASE_PRIVILEGE, HAS_SCHEMA_PRIVILEGE, HAS_TABLE_PRIVILEGE.</p>
            </li><li class="listitem"><p>Você não pode usar a opção AUTO REFRESH YES quando a definição de visualização materializada incluir funções mutáveis ou esquemas externos. Você também não pode usá-lo ao definir uma visão materializada em outra visualização materializada.</p></li><li class="listitem"><p>Não é necessário executar manualmente o <a href="./r_ANALYZE.html">ANALYZE</a> com visões materializadas. Atualmente, isso acontece apenas via AUTO ANALYZE. Para ter mais informações, consulte <a href="./t_Analyzing_tables.html">Análise de tabelas</a>.</p></li></ul></div>
         
         
       
         <h2 id="mv_CREATE_MARTERIALIZED_VIEW_examples">Exemplos</h2>
         <p>O exemplo a seguir cria uma visualização materializada de três tabelas base que são unidas e agregadas. Cada linha representa uma categoria com o número de bilhetes vendidos. Ao consultar a visualização materializada tickets_mv, os dados pré-calculados da visualização materializada tickets_mv são acessados diretamente.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW tickets_mv AS
    select   catgroup,
    sum(qtysold) as sold
    from     category c, event e, sales s
    where    c.catid = e.catid
    and      e.eventid = s.eventid
    group by catgroup;</code></pre>
         <p>O exemplo a seguir cria uma visualização materializada semelhante ao exemplo anterior e usa a função agregada MAX(). </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW tickets_mv_max AS
    select   catgroup,
    max(qtysold) as sold
    from     category c, event e, sales s
    where    c.catid = e.catid
    and      e.eventid = s.eventid
    group by catgroup;

SELECT name, state FROM STV_MV_INFO;</code></pre>

         <p>O exemplo a seguir usa uma cláusula UNION ALL para unir a tabela <code class="code">public_sales</code> do Amazon Redshift e a tabela <code class="code">spectrum.sales</code> do Redshift Spectrum para criar uma visualização materializada <code class="code">mv_sales_vw</code>. Para obter informações sobre o comando CREATE EXTERNAL TABLE para  Amazon Redshift Spectrum, consulte <a href="./r_CREATE_EXTERNAL_TABLE.html">CREATE EXTERNAL TABLE</a>. A tabela externa do Redshift Spectrum referencia os dados no Amazon S3.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW mv_sales_vw as
select salesid, qtysold, pricepaid, commission, saletime from public.sales
union all
select salesid, qtysold, pricepaid, commission, saletime from spectrum.sales
</code></pre>
         <p>O exemplo a seguir cria uma visualização materializada <code class="code">mv_fq</code> com base em uma tabela externa de consulta federada. Para obter informações sobre consulta federada, consulte <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW mv_fq as select firstname, lastname from apg.mv_fq_example;

select firstname, lastname from mv_fq;
 firstname | lastname
-----------+----------
 John      | Day
 Jane      | Doe
(2 rows)</code></pre>
         <p>O exemplo a seguir mostra a definição de uma visualização materializada.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT pg_catalog.pg_get_viewdef('mv_sales_vw'::regclass::oid, true);

pg_get_viewdef
---------------------------------------------------
create materialized view mv_sales_vw as select a from t;</code></pre>
         <p> O exemplo a seguir mostra como definir AUTO REFRESH na definição de visão materializada e também especifica um DISTSTYLE. Primeiro, crie uma tabela base simples. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE baseball_table (ball int, bat int);</code></pre>
         <p>Depois, crie uma visão materializada.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW mv_baseball DISTSTYLE ALL AUTO REFRESH YES AS SELECT ball AS baseball FROM baseball_table;</code></pre>
         <p>Agora você pode consultar a visão materializada de mv_baseball. Para verificar se a opção AUTO REFRESH está ativada para uma visão materializada, consulte <a href="./r_STV_MV_INFO.html">STV_MV_INFO</a>.</p>

         <p>O exemplo a seguir cria uma visão materializada que faz referência a uma tabela de origem em outro banco de dados. Ele assume que o banco de dados que contém a tabela de origem, database_A, está no mesmo cluster ou grupo de trabalho da visão materializada, que é criada em database_B. (Você pode usar seus próprios bancos de dados no exemplo.) Primeiro, crie uma tabela em database_A chamada <em>cities</em>, com uma coluna <em>cityname</em>. Defina o tipo de dado da coluna como VARCHAR. Depois de criar a tabela de origem, execute o seguinte comando em database_B para criar uma visão materializada cuja origem seja sua tabela <em>cities</em>. Especifique o banco de dados e o esquema da tabela de origem na cláusula FROM:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW cities_mv AS
SELECT  cityname
FROM    database_A.public.cities;</code></pre>
         <p>Consulte a visão materializada que você criou. A consulta recupera registros cuja fonte original é a tabela <em>cities</em> em database_A:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from cities_mv;</code></pre>
         <p>Quando você executa a instrução SELECT, <em>cities_mv</em> retorna os registros. Os registros são atualizados da tabela de origem somente quando uma instrução REFRESH é executada. Além disso, observe que não é possível atualizar registros diretamente na visão materializada. Para obter informações sobre como atualizar os dados em uma visão materializada, consulte <a href="./materialized-view-refresh-sql-command.html">REFRESH MATERIALIZED VIEW</a>.</p>
         
      


         <p>Para obter detalhes sobre a visão geral da visualização materializada e os comandos SQL usados para atualizar e descartar visualizações materializadas, consulte os seguintes tópicos:</p>

         <div class="itemizedlist">
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p><a href="./materialized-view-overview.html">Criar visualizações materializadas no Amazon Redshift</a></p>
            </li><li class="listitem">
               <p><a href="./materialized-view-refresh-sql-command.html">REFRESH MATERIALIZED VIEW</a></p>
            </li><li class="listitem">
               <p><a href="./materialized-view-drop-sql-command.html">DROP MATERIALIZED VIEW</a></p>
            </li></ul></div>
         
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_MASKING_POLICY.html">CREATE MASKING POLICY</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_MODEL.html">CREATE MODEL</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-create-sql-command.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>