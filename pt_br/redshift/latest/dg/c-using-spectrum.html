<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Consultar dados externos usando o Amazon Redshift Spectrum - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-using-spectrum" /><meta name="default_state" content="c-using-spectrum" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html" /><meta name="description" content="Use o Amazon Redshift Spectrum para executar consultas e recuperar dados de arquivos no Amazon S3 sem que seja necessário carregar os dados em tabelas do Amazon Redshift." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-using-spectrum.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-using-spectrum.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-using-spectrum.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-using-spectrum.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-using-spectrum.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-using-spectrum.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-using-spectrum.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-using-spectrum.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-using-spectrum.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-using-spectrum.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-using-spectrum.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-using-spectrum.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-using-spectrum.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-using-spectrum.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-using-spectrum.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-using-spectrum.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-using-spectrum.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-using-spectrum.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-using-spectrum.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Consultar dados externos usando o Amazon Redshift Spectrum" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Consultar dados externos usando o Amazon Redshift Spectrum - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c-using-spectrum" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Consultar dados externos usando o Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c-using-spectrum" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#c-spectrum-overview">Visão geral do Amazon Redshift Spectrum</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c-using-spectrum">Consultar dados externos usando o Amazon Redshift Spectrum</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Usando o Amazon Redshift Spectrum, é possível executar consultas e recuperar dados estruturados e semiestruturados dos arquivos no Amazon S3 com eficiência, sem a necessidade de carregar os dados em tabelas do Amazon Redshift. As consultas do Redshift Spectrum aplicam o paralelismo em massa para executar com muita rapidez grandes conjuntos de dados. Grande parte do processamento ocorre na camada do Redshift Spectrum e a maioria dos dados permanece no Amazon S3. Vários clusters podem consultar simultaneamente o mesmo conjunto de dados no Amazon S3 sem precisar criar cópias dos dados de cada cluster.</p><div class="highlights"><h6>Tópicos</h6><ul><li><a href="#c-spectrum-overview">Visão geral do Amazon Redshift Spectrum</a></li><li><a href="./c-getting-started-using-spectrum.html">Conceitos básicos do Amazon Redshift Spectrum</a></li><li><a href="./c-spectrum-iam-policies.html">Políticas do IAM do Amazon Redshift Spectrum</a></li><li><a href="./spectrum-lake-formation.html">Usar Redshift Spectrum com AWS Lake Formation</a></li><li><a href="./c-spectrum-data-files.html">Criação de arquivos de dados para consultas no Amazon Redshift Spectrum</a></li><li><a href="./c-spectrum-external-schemas.html">Criação de esquemas externos do Amazon Redshift Spectrum</a></li><li><a href="./c-spectrum-external-tables.html">Criar tabelas externas do Redshift Spectrum</a></li><li><a href="./querying-iceberg.html">Uso de tabelas do Apache Iceberg com o Amazon Redshift</a></li><li><a href="./c-spectrum-external-performance.html">Melhorar a performance de consulta do Amazon Redshift Spectrum</a></li><li><a href="./t_setting-data-handling-options.html">Definir opções de tratamento de dados</a></li><li><a href="./c_performing-correlated-subqueries-spectrum.html">Exemplo: Executar subconsultas correlacionadas no Redshift Spectrum</a></li><li><a href="./c-spectrum-metrics.html">Monitorar métricas no Amazon Redshift Spectrum</a></li><li><a href="./c-spectrum-troubleshooting.html">Solucionar problemas de consultas no Amazon Redshift Spectrum</a></li><li><a href="./tutorial-query-nested-data.html">Tutorial: Consultar dados aninhados com o Amazon Redshift Spectrum</a></li></ul></div>
      <h2 id="c-spectrum-overview">Visão geral do Amazon Redshift Spectrum</h2>

      <p>O Amazon Redshift Spectrum reside em servidores dedicados do Amazon Redshift que são independentes do seu cluster. O Amazon Redshift envia várias tarefas de computação intensiva para a camada do Redshift Spectrum, como a filtragem e a agregação de predicados. Por isso, as consultas do Redshift Spectrum utilizam muito menos a capacidade de processamento do seu cluster do que outras consultas. O Redshift Spectrum também dimensiona de forma inteligente. Com base nas demandas das consultas, o Redshift Spectrum pode usar milhares de instâncias para usufruir do processamento paralelo maciço.</p>
      <p>As tabelas do Redshift Spectrum são criadas por meio da definição da estrutura dos arquivos e do seu registro como tabelas em um catálogo de dados externos. O catálogo de dados externos pode ser AWS Glue, o catálogo de dados que vem com o Amazon Athena ou sua própria metastore do Apache Hive. É possível criar e gerenciar tabelas externas a partir do Amazon Redshift usando comandos da linguagem de definição de dados (DDL) ou qualquer outra ferramenta que se conecte ao catálogo de dados externos. As alterações feitas no catálogo de dados externos são disponibilizadas instantaneamente para todos os clusters do Amazon Redshift. </p>
      <p>Opcionalmente, você pode dividir as tabelas externas em partições de uma ou mais colunas. Definir partições como parte da tabela externa pode melhorar a performance. A melhora ocorre porque o otimizador de consultas do Amazon Redshift elimina as partições que não contêm dados para consulta. </p>
      <p>Após definir suas tabelas do Redshift Spectrum, você pode consultar e unir as tabelas da mesma forma como faz com qualquer outra tabela do Amazon Redshift. O Redshift Spectrum não é compatível com operações de atualização em tabelas externas. Você pode adicionar tabelas do Redshift Spectrum a vários clusters do Amazon Redshift e consultar os mesmos dados no Amazon S3 a partir de qualquer cluster na mesma região da AWS. Quando você atualiza os arquivos de dados do Amazon S3, os dados são disponibilizados instantaneamente para consulta a partir de qualquer um dos clusters do Amazon Redshift. </p>


      <p>O AWS Glue Data Catalog que você acessa pode ser criptografado para aumentar a segurança. Se o catálogo do AWS Glue estiver criptografado, você precisará da chave do AWS Key Management Service (AWS KMS) para o AWS Glue acessar o catálogo do AWS Glue. A criptografia do catálogo do AWS Glue não está disponível em todas as regiões da AWS. Para obter uma lista de regiões da AWS compatíveis, consulte <a href="https://docs.aws.amazon.com/glue/latest/dg/encryption-glue-resources.html">Criptografia e acesso seguro para AWS Glue</a> no <em><a href="https://docs.aws.amazon.com/glue/latest/dg/">AWS GlueGuia do desenvolvedor</a>. </em>Para obter mais informações sobre AWS GlueCriptografia do catálogo de dados, consulte <a href="https://docs.aws.amazon.com/glue/latest/dg/encrypt-glue-data-catalog.html">Criptografar seu AWS Glue Data Catalog</a> no <em><a href="https://docs.aws.amazon.com/glue/latest/dg/">AWS Glue Guia do desenvolvedor</a>. </em> </p>


      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Não é possível visualizar os detalhes das tabelas do Redshift Spectrum usando os mesmos recursos das tabelas padrão do Amazon Redshift, como <a href="./r_PG_TABLE_DEF.html">PG_TABLE_DEF</a>, <a href="./r_STV_TBL_PERM.html">STV_TBL_PERM</a>, PG_CLASS, ou information_schema. Caso sua ferramenta de business intelligence ou análise não reconheça as tabelas externas do Redshift Spectrum, configure sua aplicação para consultar <a href="./r_SVV_EXTERNAL_TABLES.html">SVV_EXTERNAL_TABLES</a> e <a href="./r_SVV_EXTERNAL_COLUMNS.html">SVV_EXTERNAL_COLUMNS</a>.</p></div></div>
       
         <h3 id="c-spectrum-regions">Regiões do Amazon Redshift Spectrum</h3>
         
         <p>O Redshift Spectrum está disponível nas Regiões da AWS onde o Amazon Redshift está disponível, a menos que especificado de outra forma na documentação específica da região. Para a disponibilidade de Região da AWS em regiões comerciais, consulte <a href="https://docs.aws.amazon.com/general/latest/gr/redshift-service.html#redshift_region">Endpoints de serviço</a> para a <b>API do Redshift</b> na <em>Referência geral da Amazon Web Services</em>. </p>
         
         
         
         
         
       
       
         <h3 id="c-spectrum-considerations">Regiões do Amazon Redshift Spectrum</h3>

         <p>Observe as seguintes considerações sobre o Amazon Redshift Spectrum:</p>
         <div class="itemizedlist">
             
             
             
             
            
             
             
            
             
            
             
            
            
         <ul class="itemizedlist"><li class="listitem">
               <p>O cluster do Amazon Redshift e o bucket do Amazon S3 devem estar na mesma região da AWS. </p>
            </li><li class="listitem">
               <p>O Redshift Spectrum não é compatível com roteamento aprimorado de VPC com clusters provisionados. Para acessar seus dados do Amazon S3, poderá ser necessário executar etapas de configuração adicionais. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/spectrum-enhanced-vpc.html">Redshift Spectrum e roteamento aprimorado de VPC</a> no <em>Guia de gerenciamento do Amazon Redshift</em>.</p>
            </li><li class="listitem"><p>O Redshift Spectrum é compatível com aliases de ponto de acesso do Amazon S3. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-points-alias.html">Usar um alias em estilo de bucket para seu ponto de acesso</a> no <em>Guia do usuário do Amazon Simple Storage Service</em>. Porém, o Redshift Spectrum não oferece suporte à VPC com aliases de ponto de acesso do Amazon S3. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/spectrum-enhanced-vpc.html">Redshift Spectrum e roteamento aprimorado de VPC</a> no <em>Guia de gerenciamento do Amazon Redshift</em>.</p>
            </li><li class="listitem">
               <p>Não é possível realizar operações de atualização ou exclusão em tabelas externas. Para criar uma nova tabela externa no esquema especificado, você pode usar CREATE EXTERNAL TABLE. Para obter mais informações sobre CREATE EXTERNAL TABLE AS, consulte <a href="./r_CREATE_EXTERNAL_TABLE.html">CREATE EXTERNAL TABLE</a>. Para inserir os resultados de uma consulta SELECT em tabelas externas existentes ou em catálogos externos, você pode usar INSERT (tabela externa). Para obter mais informações sobre INSERT (tabela externa), consulte <a href="./r_INSERT_external_table.html">INSERT (tabela externa)</a>.</p>
            </li><li class="listitem">
               <p>A não ser que você esteja usando um AWS Glue Data Catalog habilitado para AWS Lake Formation, não é possível controlar as permissões do usuário em uma tabela externa. Em vez disso, é possível conceder e revogar permissões no esquema externo. Para obter mais informações sobre como trabalhar com o AWS Lake Formation, consulte <a href="./spectrum-lake-formation.html">Usar Redshift Spectrum com AWS Lake Formation</a>.</p>
            </li><li class="listitem">
               <p>Para executar as consultas do Redshift Spectrum, o usuário do banco de dados precisa ter permissão para criar tabelas temporárias no banco de dados. O exemplo a seguir concede permissão temporária no banco de dados <code class="code">spectrumdb</code> para o grupo de usuários <code class="code">spectrumusers</code>. </p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">grant temp on database spectrumdb to group spectrumusers;</code></pre>
               <p>Para obter mais informações, consulte <a href="./r_GRANT.html">GRANT</a>.</p>
            </li><li class="listitem">
               <p>Ao usar o catálogo de dados do Athena ou do AWS Glue como um armazenamento de metadados, consulte “<a href="https://docs.aws.amazon.com/redshift/latest/mgmt/amazon-redshift-limits.html">Cotas e limites</a>” no <em>Guia de gerenciamento de clusters do Amazon Redshift.</em> </p>
               
            </li><li class="listitem">
               <p>O Redshift Spectrum não oferece suporte ao Amazon EMR com Kerberos.</p>
            </li></ul></div>
       
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./federated-limitations.html">Considerações</div><div id="next" class="next-link" accesskey="n" href="./c-getting-started-using-spectrum.html">Conceitos básicos do Amazon Redshift Spectrum</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-using-spectrum.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>