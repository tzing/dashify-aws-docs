<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>STV_INFLIGHT - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_STV_INFLIGHT" /><meta name="default_state" content="r_STV_INFLIGHT" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_INFLIGHT.html" /><meta name="description" content="Determina quais consultas estão sendo executadas no cluster no momento." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_INFLIGHT.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_INFLIGHT.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="STV_INFLIGHT" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>STV_INFLIGHT - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_STV_INFLIGHT" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_INFLIGHT.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_INFLIGHT.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_INFLIGHT.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referência de visualizações e tabelas do sistema",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/cm_chap_system-tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Monitoramento do sistema (somente provisionado)",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_intro_system_views.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Tabelas STV para dados de snapshot",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_intro_STV_tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "STV_INFLIGHT",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_intro_STV_tables.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_STV_INFLIGHT" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#r_STV_INFLIGHT_troubleshooting">Solução de problemas com STV_INFLIGHT</a><a href="#r_STV_INFLIGHT-table-columns">Colunas da tabela</a><a href="#r_STV_INFLIGHT-sample-queries">Consultas de exemplo</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_STV_INFLIGHT">STV_INFLIGHT</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Use a tabela STV_INFLIGHT para determinar quais consultas estão sendo executadas no cluster no momento. Se você estiver solucionando problemas, é útil verificar o status de consultas de longa duração. </p><p>A tabela STV_INFLIGHT não mostra as consultas executadas apenas nos nós de liderança. Para obter mais informações, consulte <a href="./c_SQL_functions_leader_node_only.html">Função de apenas nó líder</a>. STV_INFLIGHT é visível para todos os usuários. Os superusuários podem ver todas as linhas; usuários regulares podem ver somente seus próprios dados. Para obter mais informações, consulte <a href="./cm_chap_system-tables.html#c_visibility-of-data">Visibilidade de dados em tabelas e visualizações de sistema</a>.</p><p>Alguns ou todos os dados nessa tabela também podem ser encontrados na exibição de monitoramento SYS <a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a>. Os dados na exibição de monitoramento SYS são formatados para serem mais fáceis de usar e compreender. É recomendável usar a exibição de monitoramento SYS nas consultas.</p>
            <h2 id="r_STV_INFLIGHT_troubleshooting">Solução de problemas com STV_INFLIGHT</h2>
            <p>Se você usa STV_INFLIGHT para solucionar problemas de performance de uma consulta ou de uma coleção de consultas, observe o seguinte:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p>Transações abertas de longa duração geralmente aumentam a carga. Essas transações abertas podem resultar em tempos de execução mais longos para outras consultas.</p></li><li class="listitem"><p>Os trabalhos de COPY e ETL de longa duração podem afetar outras consultas em execução no cluster, caso estejam consumindo muitos recursos de computação. Na maioria dos casos, mover esses trabalhos de longa duração para períodos de baixo uso aumenta a performance das workloads de relatórios ou análises.</p></li><li class="listitem"><p>Há visualizações que fornecem informações relacionadas a STV_INFLIGHT. Isso inclui <a href="./r_STL_QUERYTEXT.html">STL_QUERYTEXT</a>, que captura o texto da consulta para comandos SQL, e <a href="./r_SVV_QUERY_INFLIGHT.html">SVV_QUERY_INFLIGHT</a>, que une STV_INFLIGHT a STL_QUERYTEXT. Você também pode usar <a href="./r_STV_RECENTS.html">STV_RECENTS</a> com STV_INFLIGHT para solução de problemas. Por exemplo, STV_RECENTS pode indicar se consultas específicas estão em um estado <em>Em execução</em> ou <em>Concluído</em>. A combinação dessas informações com os resultados de STV_INFLIGHT pode fornecer mais dados sobre as propriedades de uma consulta e o impacto nos recursos de computação. </p></li></ul></div>
            <p>Você também pode monitorar a execução de consultas usando o console do Amazon Redshift.</p>
         
            <h2 id="r_STV_INFLIGHT-table-columns">Colunas da tabela</h2>
            <div class="table-container"><div class="table-contents"><table id="w319aac49c17c11c17c11b3"><thead>
                        <tr>
                            <th>Nome da coluna </th>
                            <th>Tipo de dados </th>
                            <th>Descrição </th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">userid </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">O ID do usuário que gerou a entrada. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">slice </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">A fatia onde a consulta está sendo executada. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">consulta </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">ID da consulta. Ele pode ser usado para unir várias outras tabelas e exibições do sistema. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">label </td>
                            <td tabindex="-1">character(320) </td>
                            <td tabindex="-1"> O nome do arquivo usado para executar a consulta ou um rótulo definido com o comando SET QUERY_GROUP. Se a consulta não for baseada em arquivos ou o parâmetro QUERY_GROUP não estiver definido, o valor deste campo será branco. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">xid </td>
                            <td tabindex="-1">bigint </td>
                            <td tabindex="-1">ID da transação. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">pid </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">ID do processo. Todas as consultas em uma sessão são executadas no mesmo processo, portanto esse valor permanece constante se você executa uma série de consultas na mesma sessão. Use esta coluna para unir a tabela <a href="./r_STL_ERROR.html">STL_ERROR</a>. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">starttime </td>
                            <td tabindex="-1">timestamp </td>
                            <td tabindex="-1">O horário do início da consulta. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">text </td>
                            <td tabindex="-1">character(100) </td>
                            <td tabindex="-1">O texto da consulta, que é truncado após 100 caracteres se a instrução exceder esse limite. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">suspended </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Se a consulta está suspensa ou não. 0 = false; 1 = true. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">insert_pristine </td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1">Se as consultas de gravação são/puderam ser executadas enquanto a consulta atual está/estava em execução. 1 = nenhuma consulta de gravação permitida. 0 = consultas de gravação permitidas. Essa coluna deve ser usada na depuração. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">concurrency_scaling_status</td>
                            <td tabindex="-1">inteiro </td>
                            <td tabindex="-1"><p>Indica se a consulta foi executada no cluster principal ou em um cluster de escalabilidade da simultaneidade. Os valores possíveis são os seguintes: </p>
                                <p>0 - Executada no cluster principal </p>
                                <p>1 — Executada em um cluster de escalabilidade da simultaneidade </p>
                            </td>
                        </tr>
                    </table></div></div>
         
            <h2 id="r_STV_INFLIGHT-sample-queries">Consultas de exemplo</h2>


            <p>Para ver todas as consultas em execução no momento no banco de dados, digite a seguinte consulta: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from stv_inflight;</code></pre>
            <p>Os dados de saída de exemplo abaixo mostram que duas consultas estão em execução no momento, incluindo a própria consulta com a tabela STV_INFLIGHT e uma consulta que foi executada de um script chamado <code>avgwait.sql</code>: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select slice, query, trim(label) querylabel, pid,
starttime, substring(text,1,20) querytext
from stv_inflight;

slice|query|querylabel | pid |        starttime         |      querytext
-----+-----+-----------+-----+--------------------------+--------------------
1011 |  21 |           | 646 |2012-01-26 13:23:15.645503|select slice, query,
1011 |  20 |avgwait.sql| 499 |2012-01-26 13:23:14.159912|select avg(datediff(
(2 rows)</code></pre>
            
            <p>A consulta a seguir seleciona várias colunas, incluindo concurrency_scaling_status. Essa coluna indica se as consultas estão sendo enviadas ao cluster de escalabilidade simultânea. Se o valor for <code class="code">1</code> para alguns resultados, é uma indicação de que recursos de computação de escalabilidade simultânea estão sendo usados. Para obter mais informações, consulte <a href="./concurrency-scaling.html">Trabalhar com a escalabilidade de simultaneidade</a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select userid, 
query,
pid,
starttime,
text,
suspended,
concurrency_scaling_status
 from STV_INFLIGHT;</code></pre>
            <p>O exemplo de saída mostra uma consulta sendo enviada ao cluster de escalabilidade simultânea.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""> query  | pid     |        starttime           |   text                 | suspended     |  concurrency_scaling_status
--------+---------+----------------------------|------------------------|---------------|-------------------------------
1234567 | 123456  | 2012-01-26 13:23:15.645503 | select userid, query...  0                1
2345678 | 234567  | 2012-01-26 13:23:14.159912 | select avg(datediff(...  0                0
(2 rows)</code></pre>
        <p>Para obter mais dicas sobre como solucionar problemas de performance de consultas, consulte <a href="./queries-troubleshooting.html">Solução de problemas de consultas</a>.</p><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_STV_EXEC_STATE.html">STV_EXEC_STATE</div><div id="next" class="next-link" accesskey="n" href="./r_STV_LOAD_STATE.html">STV_LOAD_STATE</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_INFLIGHT.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_INFLIGHT.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>