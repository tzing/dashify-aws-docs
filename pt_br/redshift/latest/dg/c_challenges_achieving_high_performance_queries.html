<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Performance - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c_challenges_achieving_high_performance_queries" /><meta name="default_state" content="c_challenges_achieving_high_performance_queries" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" /><meta name="description" content="Descreve os recursos de performance que o Amazon Redshift usa para obter uma execução de consultas extremamente rápida." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guia do desenvolvedor de banco de dados" /><meta name="abstract" content="Crie e gerencie um data warehouse com o Amazon Redshift, um serviço de data warehouse totalmente gerenciado, em escala de petabyte e de nível empresarial." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guia do desenvolvedor de banco de dados" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor de banco de dados" /><meta id="panorama-serviceConsolePage" value="Performance" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Performance - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c_challenges_achieving_high_performance_queries" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,desenvolvedor,dados de amostra,banco de dados,desenvolvedor do banco de dados,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor de banco de dados",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Introdução",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/welcome.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Visão geral do sistema e da arquitetura",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_redshift_system_overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Performance",
        "item" : "https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_redshift_system_overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c_challenges_achieving_high_performance_queries" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guia do desenvolvedor de banco de dados</a></div><div id="page-toc-src"><a href="#massively-parallel-processing"> Processamento paralelo em massa </a><a href="#columnar-data-storage"> Armazenamento de dados colunar </a><a href="#data-compression"> Compactação de dados </a><a href="#query-optimizer">Otimizador de consultas </a><a href="#result-caching"> Armazenamento em cache dos resultados </a><a href="#compiled-code">Código compilado </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c_challenges_achieving_high_performance_queries">Performance</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>O Amazon Redshift alcança uma execução de consultas extremamente rápida ao empregar esses recursos de performance.</p><div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#massively-parallel-processing"> Processamento paralelo em massa </a></li><li><a href="#columnar-data-storage"> Armazenamento de dados colunar </a></li><li><a href="#data-compression"> Compactação de dados </a></li><li><a href="#query-optimizer">Otimizador de consultas </a></li><li><a href="#result-caching"> Armazenamento em cache dos resultados </a></li><li><a href="#compiled-code">Código compilado </a></li></ul></div> <h2 id="massively-parallel-processing"> Processamento paralelo em massa </h2>
        <p>O processamento paralelo em massa (MPP) permite a execução rápida das consultas mais complexas que utilizam grandes volumes de dados. Vários nós de computação fazem todo o processamento de consultas chegando à agregação do resultado final, com cada núcleo de cada nó executando os mesmos segmentos de consulta compilados em partes de todos os dados.</p>
        <p>O Amazon Redshift distribui as linhas de uma tabela para os nós de computação para que os dados possam ser processados em paralelo. Selecionando uma chave de distribuição apropriada para cada tabela, você pode otimizar a distribuição de dados para equilibrar o workload e minimizar o movimento de dados entre nós. Para obter mais informações, consulte <a href="./c_best-practices-best-dist-key.html">Escolha o melhor estilo de distribuição</a>.</p>
        <p>O carregamento de dados de arquivos simples aproveita o processamento paralelo, distribuindo o workload entre vários nós enquanto lê vários arquivos simultaneamente. Para obter mais informações sobre como carregar dados em tabelas, consulte <a href="./c_loading-data-best-practices.html">Práticas recomendadas do Amazon Redshift para carregamento de dados</a>.</p>        <h2 id="columnar-data-storage"> Armazenamento de dados colunar </h2>
        <p>O armazenamento colunar para tabelas de bancos de dados reduz drasticamente os requisitos de E/S de disco gerais e é um fator importante na otimização da performance de consulta analítica. Armazenar informações da tabela de bancos de dados de maneira colunar reduz o número de solicitações de E/S de disco e diminui o valor de dados que você precisa carregar do disco. Carregar menos dados na memória permite que o Amazon Redshift execute mais processamento na memória ao executar consultas. Consulte <a href="./c_columnar_storage_disk_mem_mgmnt.html">Armazenamento colunar</a> para obter uma explicação mais detalhada.</p>
        <p>Quando as colunas estão classificadas corretamente, o processador de consultas pode filtrar rapidamente um grande subconjunto de blocos de dados. Para obter mais informações, consulte <a href="./c_best-practices-sort-key.html">Escolha a melhor chave de classificação</a>.</p>  <h2 id="data-compression"> Compactação de dados </h2>
        <p>A compactação de dados reduz requisitos de armazenamento, o que diminui a E/S de disco, melhorando a performance da consulta. Quando você executa uma consulta, os dados compactados são lidos para a memória, depois são descompactados durante a execução da consulta. Carregar menos dados na memória permite que o Amazon Redshift aloque mais memória para analisar os dados. Como o armazenamento colunar armazena dados semelhantes sequencialmente, o Amazon Redshift é capaz de aplicar codificações de compressão adaptáveis especificamente vinculadas a tipos de dados colunares. A melhor maneira de habilitar a compactação de dados nas colunas da tabela é permitir que o Amazon Redshift aplique as codificações de compactação ideais ao carregar a tabela com dados. Para saber mais sobre como usar a compactação de dados automática, consulte <a href="./c_Loading_tables_auto_compress.html">Carregamento de tabelas com compactação automática</a>.</p>
            <h2 id="query-optimizer">Otimizador de consultas </h2>
            <p>O mecanismo de execução de consultas do Amazon Redshift incorpora um otimizador de consultas com reconhecimento de MPP e também aproveita o armazenamento de dados orientado por colunas. O otimizador de consulta Amazon Redshift implementa melhorias e extensões significativas para o processamento de consultas analíticas complexas que geralmente incluem junções de várias tabelas, subconsultas e agregação. Para saber mais sobre como otimizar consultas, consulte <a href="./c-optimizing-query-performance.html">Ajustar a performance da consulta</a>.</p>
         
            <h2 id="result-caching"> Armazenamento em cache dos resultados </h2>
            <p>Para reduzir o tempo de execução da consulta e melhorar a performance do sistema, o Amazon Redshift armazena em cache os resultados de certos tipos de consultas na memória no nó líder. Quando um usuário envia uma consulta, o Amazon Redshift verifica o cache de resultados em busca de uma cópia em cache válida dos resultados da consulta. Se for encontrada uma correspondência no cache de resultados, o Amazon Redshift usa os resultados armazenados em cache e não executa a consulta. O cache de resultados é transparente para o usuário.</p>
            <p>O armazenamento em cache de resultados é ativado por padrão. Para desativar o armazenamento em cache de resultados na sessão atual, defina o parâmetro <a href="./r_enable_result_cache_for_session.html">enable_result_cache_for_session</a> como <code class="code">off</code>.</p>
            <p>O Amazon Redshift usa resultados em cache para uma nova consulta quando todas as seguintes opções são verdadeiras:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>O usuário que envia a consulta possui permissão de acesso aos objetos usados ​​na consulta.</p>
                </li><li class="listitem">
                    <p>A tabela ou as exibições na consulta não foram modificadas.</p>
                </li><li class="listitem">
                    <p>A consulta não usa uma função que precisa ser avaliada cada vez que ela é executada, por exemplo, GETDATE.</p>
                </li><li class="listitem">
                    <p>A consulta não faz referência a tabelas externas do Amazon Redshift Spectrum.</p>
                </li><li class="listitem">
                    <p>Os parâmetros de configuração que podem afetar os resultados da consulta estão inalterados.</p>
                </li><li class="listitem">
                    <p>A consulta coincide sintaticamente com a consulta armazenada em cache.</p>
                </li></ul></div>
            <p>Para maximizar a eficácia do cache e da utilização dos recursos, o Amazon Redshift não armazena em cache alguns conjuntos grandes de resultados de consultas. O Amazon Redshift determina se os resultados da consulta serão ou não armazenados em cache. Esses fatores incluem o número de entradas no cache e o tipo de instância do seu cluster Amazon Redshift. </p>
            <p>Para determinar se uma consulta usou o cache de resultados, abra a visualização do sistema <a href="./r_SVL_QLOG.html">SVL_QLOG</a>. Se uma consulta utilizar o cache de resultados, a coluna source_query retornará o ID da consulta de origem. Se o cache de resultados não tiver sido utilizado, o valor da coluna source_query será NULL. </p>

            <p>O exemplo a seguir mostra que as consultas enviadas pelo userid 104 e o userid 102 utilizaram o cache de resultados das consultas realizadas pelo userid 100.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select userid, query, elapsed, source_query from svl_qlog 
where userid &gt; 1
order by query desc;

userid | query  | elapsed  | source_query
-------+--------+----------+-------------
   104 | 629035 |       27 |       628919
   104 | 629034 |       60 |       628900
   104 | 629033 |       23 |       628891
   102 | 629017 |  1229393 |             
   102 | 628942 |       28 |       628919
   102 | 628941 |       57 |       628900
   102 | 628940 |       26 |       628891
   100 | 628919 | 84295686 |             
   100 | 628900 | 87015637 |             
   100 | 628891 | 58808694 |             </code></pre>
            
            
         
            <h2 id="compiled-code">Código compilado </h2>
            <p>O nó líder distribui código compilado totalmente otimizado em todos os nós de um cluster. Compilar a consulta reduz os custos indiretos associados a um interpretador e, assim, aumenta a velocidade de execução, especialmente em consultas complexas. O código compilado é armazenado em cache e compartilhado entre sessões no mesmo cluster. Como resultado, as execuções futuras da mesma consulta serão mais rápidas, geralmente mesmo com parâmetros diferentes. </p>
            <p>Como o mecanismo de execução de consultas compila um código diferente para os protocolos de conexão JDBC e ODBC, dois clientes que usam protocolos diferentes incorrerão no custo inicial de compilar o código. No entanto, os clientes que usarem o mesmo protocolo se beneficiarão do compartilhamento do código armazenado em cache.</p>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c_high_level_system_architecture.html">Arquitetura de sistema do data warehouse</div><div id="next" class="next-link" accesskey="n" href="./c_columnar_storage_disk_mem_mgmnt.html">Armazenamento colunar</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>