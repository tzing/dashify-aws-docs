<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data format parameters - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="copy-parameters-data-format" /><meta name="default_state" content="copy-parameters-data-format" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-format.html" /><meta name="description" content="By default, the COPY command expects the source data to be character-delimited UTF-8 text. The default delimiter is a pipe character ( | ). If the source data is in another format, use the following parameters to specify the data format:" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-format.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/copy-parameters-data-format.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/copy-parameters-data-format.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/copy-parameters-data-format.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/copy-parameters-data-format.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-format.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-format.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/copy-parameters-data-format.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/copy-parameters-data-format.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/copy-parameters-data-format.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/copy-parameters-data-format.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/copy-parameters-data-format.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/copy-parameters-data-format.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/copy-parameters-data-format.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/copy-parameters-data-format.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/copy-parameters-data-format.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/copy-parameters-data-format.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/copy-parameters-data-format.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/copy-parameters-data-format.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-format.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Data format parameters" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Data format parameters - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#copy-parameters-data-format" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/copy-parameters-data-format.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/copy-parameters-data-format.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/copy-parameters-data-format.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL commands",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "COPY",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/r_COPY.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "COPY parameter reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/r_COPY-parameters.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Data format parameters",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/r_COPY-parameters.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#copy-parameters-data-format" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#copy-json-data-file">JSON data file</a><a href="#copy-json-jsonpaths">JSONPaths file</a><a href="#copy-json-jsonpath-expressions">JSONPath expressions</a><a href="#using-jsonpath-with-avro">Using JSONPaths with Avro Data</a><a href="#copy-parameters-columnar-data">Columnar data format
                  parameters</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="copy-parameters-data-format">Data format parameters</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>By default, the COPY command expects the source data to be character-delimited UTF-8
            text. The default delimiter is a pipe character ( | ). If the source data is in another
            format, use the following parameters to specify the data format: </p><div class="itemizedlist">
             
             
             

             
             
             
             
             
             
            
         <ul class="itemizedlist"><li class="listitem">
               <p><a href="#copy-format">FORMAT</a></p>
            </li><li class="listitem">
               <p><a href="#copy-csv">CSV</a></p>
            </li><li class="listitem">
               <p><a href="#copy-delimiter">DELIMITER</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-fixedwidth">FIXEDWIDTH</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-shapefile">SHAPEFILE</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-avro">AVRO</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-json">JSON</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-parquet">PARQUET</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-orc">ORC</a>
               </p>
            </li></ul></div><p>In addition to the standard data formats, COPY supports the following columnar data
            formats for COPY from Amazon S3: </p><div class="itemizedlist">
             
             
            
            
         <ul class="itemizedlist"><li class="listitem">
               <p><a href="#copy-orc">ORC</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-parquet">PARQUET</a>
               </p>
            </li></ul></div><p>COPY from columnar format is supported with certain restriction. For more
            information, see <a href="./copy-usage_notes-copy-from-columnar.html">COPY from columnar data
               formats</a>. </p><div class="variablelist">
            <h6>Data format parameters</h6>
             
              
             
             
            
             
            
             
            
             
         <dl>
               <dt id="copy-format"><span class="term">FORMAT [AS]</span></dt>
               <dd>
                  <p>(Optional) Identifies data format keywords. The FORMAT arguments are
                     described following.</p>
               </dd>
             
               <dt id="copy-csv"><span class="term">CSV [ QUOTE [AS] <em>'quote_character'</em> ]</span></dt>
               <dd>
                  <p>Enables use of CSV format in the input data. To automatically escape
                     delimiters, newline characters, and carriage returns, enclose the field in the
                     character specified by the QUOTE parameter. The default quotation mark character is a
                     double quotation mark ( " ). When the quotation mark character is used within a field,
                     escape the character with an additional quotation mark character. For example, if the
                     quotation mark character is a double quotation mark, to insert the string <code class="code">A
                        "quoted" word</code> the input file should include the string <code class="code">"A
                        ""quoted"" word"</code>. When the CSV parameter is used, the default
                     delimiter is a comma ( , ). You can specify a different delimiter by using the
                     DELIMITER parameter. </p>
                  <p>When a field is enclosed in quotation marks, white space between the delimiters and
                     the quotation mark characters is ignored. If the delimiter is a white space character,
                     such as a tab, the delimiter isn't treated as white space.</p>
                  <p>CSV can't be used with FIXEDWIDTH, REMOVEQUOTES, or ESCAPE. </p>
                  <div class="variablelist">
                      
                  <dl>
                        <dt id="copy-csv-quote"><span class="term">QUOTE [AS] <em>'quote_character'</em></span></dt>
                        <dd>
                           <p>Optional. Specifies the character to be used as the quotation mark character
                              when using the CSV parameter. The default is a double quotation mark (
                              " ). If you use the QUOTE parameter to define a quotation mark character other
                              than double quotation mark, you don't need to escape double quotation
                              marks within the field. The QUOTE parameter can be used only with the
                              CSV parameter. The AS keyword is optional.</p>
                        </dd>
                     </dl></div>
               </dd>
             
               <dt id="copy-delimiter"><span class="term">DELIMITER [AS] ['<em>delimiter_char</em>'] </span></dt>
               <dd>
                  <p>Specifies the single ASCII character that is used to separate fields in the
                     input file, such as a pipe character ( | ), a comma ( , ), or a tab ( \t ).
                     Non-printing ASCII characters are supported. ASCII characters can also be
                     represented in octal, using the format '\ddd', where 'd' is an octal digit
                     (0–7). The default delimiter is a pipe character ( | ), unless the CSV
                     parameter is used, in which case the default delimiter is a comma ( , ). The AS
                     keyword is optional. DELIMITER can't be used with FIXEDWIDTH.</p>
               </dd>
             
               <dt id="copy-fixedwidth"><span class="term">FIXEDWIDTH '<em>fixedwidth_spec</em>' </span></dt>
               <dd>
                  <p>Loads the data from a file where each column width is a fixed length, rather
                     than columns being separated by a delimiter. The
                        <em>fixedwidth_spec</em> is a string that specifies a
                     user-defined column label and column width. The column label can be either a
                     text string or an integer, depending on what the user chooses. The column label
                     has no relation to the column name. The order of the label/width pairs must
                     match the order of the table columns exactly. FIXEDWIDTH can't be used with
                     CSV or DELIMITER. In Amazon Redshift, the length of CHAR and VARCHAR columns is
                     expressed in bytes, so be sure that the column width that you specify
                     accommodates the binary length of multibyte characters when preparing the file
                     to be loaded. For more information, see <a href="./r_Character_types.html">Character types</a>. </p>
                  <p>The format for <em>fixedwidth_spec</em> is shown following: </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">'<em>colLabel1:colWidth1,colLabel:colWidth2, ...</em>'</code></pre>
               </dd>
             
               <dt id="copy-shapefile"><span class="term">SHAPEFILE [ SIMPLIFY [AUTO] [<em>'tolerance'</em>] ]</span></dt>
               <dd>
                  <p>Enables use of SHAPEFILE format in the input data. 
                     By default, the first column of the shapefile is either a <code class="code">GEOMETRY</code> or <code class="code">IDENTITY</code> column.  
                     All subsequent columns follow the order specified in the shapefile.</p>
                  <p>You can't use SHAPEFILE with FIXEDWIDTH, REMOVEQUOTES, or ESCAPE. </p>
                  <p>To use <code class="code">GEOGRAPHY</code> objects with <code class="code">COPY FROM SHAPEFILE</code>, first ingest into a <code class="code">GEOMETRY</code> column, 
                     and then cast the objects to <code class="code">GEOGRAPHY</code> objects.
                     .</p>
                  <div class="variablelist">
                      
                      
                  <dl>
                        <dt id="copy-shapefile-simplify"><span class="term">SIMPLIFY [<em>tolerance</em>]</span></dt>
                        <dd>
                           <p>(Optional) Simplifies all geometries during the ingestion process
                              using the Ramer-Douglas-Peucker algorithm and the given tolerance. </p>
                        </dd>
                      
                        <dt id="copy-shapefile-simplify"><span class="term">SIMPLIFY AUTO [<em>tolerance</em>]</span></dt>
                        <dd>
                           <p>(Optional) Simplifies only geometries that are larger than the
                              maximum geometry size. This simplification uses the
                              Ramer-Douglas-Peucker algorithm and the automatically calculated
                              tolerance if this doesn't exceed the specified tolerance. This
                              algorithm calculates the size to store objects within the tolerance
                              specified. The <em>tolerance</em> value is
                              optional.</p>
                        </dd>
                     </dl></div>
                  <p>For examples of loading shapefiles, see 
                     <a href="./r_COPY_command_examples.html#copy-example-spatial-copy-shapefile">Loading a shapefile into Amazon Redshift</a>.</p>
               </dd>
             
               <dt id="copy-avro"><span class="term">AVRO [AS] '<em>avro_option</em>'</span></dt>
               <dd>
                  <p>Specifies that the source data is in Avro format. </p>
                  <p>Avro format is supported for COPY from these services and protocols:</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon S3 </p>
                     </li><li class="listitem">
                        <p>Amazon EMR </p>
                     </li><li class="listitem">
                        <p>Remote hosts (SSH) </p>
                     </li></ul></div>
                  <p>Avro isn't supported for COPY from DynamoDB. </p>
                  <p>Avro is a data serialization protocol. An Avro source file includes a schema
                     that defines the structure of the data. The Avro schema type must be
                        <code class="code">record</code>. COPY accepts Avro files created using the default
                     uncompressed codec as well as the <code class="code">deflate</code> and <code class="code">snappy</code>
                     compression codecs. For more information about Avro, go to <a href="https://avro.apache.org/" rel="noopener noreferrer" target="_blank"><span>Apache Avro</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>
                  
                  <p>Valid values for <em>avro_option</em> are as follows:</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">'auto'</code></p>
                     </li><li class="listitem">
                        <p><code class="code">'auto ignorecase'</code></p>
                     </li><li class="listitem">
                        <p><code class="code">'s3://<code class="replaceable">jsonpaths_file</code>'</code> </p>
                     </li></ul></div>
                  <p>The default is <code class="code">'auto'</code>.</p>
                  <p>COPY automatically maps the data elements in the Avro source data to the
                     columns in the target table. It does so by matching field names in the Avro
                     schema to column names in the target table. The matching is case-sensitive for
                        <code class="code">'auto'</code> and isn't case-sensitive for <code class="code">'auto
                        ignorecase'</code>. </p>
                  <p>Column names in Amazon Redshift tables are always lowercase, so when you use the
                        <code class="code">'auto'</code> option, matching field names must also be lowercase. If
                     the field names aren't all lowercase, you can use the <code class="code">'auto
                        ignorecase'</code> option. With the default <code class="code">'auto'</code> argument,
                     COPY recognizes only the first level of fields, or <em>outer
                        fields</em>, in the structure. </p>
                  <p>To explicitly map column names to Avro field names, you can use a <a href="#copy-json-jsonpaths">JSONPaths file</a>. </p>
                  <p>By default, COPY attempts to match all columns in the target table to Avro
                     field names. To load a subset of the columns, you can optionally specify a
                     column list. If a column in the target table is omitted from the column list,
                     COPY loads the target column's <a href="./r_CREATE_TABLE_NEW.html#create-table-default">DEFAULT</a>
                     expression. If the target column doesn't have a default,  COPY attempts to
                     load NULL. If a column is included in the column list and COPY doesn't
                     find a matching field in the Avro data, COPY attempts to load NULL to the
                     column. </p>
                  <p>If COPY attempts to assign NULL to a column that is defined as NOT
                     NULL, the COPY command fails. </p>
                  
                  <p><b>Avro
                        Schema</b></p>
                  <p>An Avro source data file includes a schema that defines the structure of the
                     data. COPY reads the schema that is part of the Avro source data file to map
                     data elements to target table columns. The following example shows an Avro
                     schema. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "name": "person",
    "type": "record",
    "fields": [
        <span>{</span>"name": "id", "type": "int"},
        <span>{</span>"name": "guid", "type": "string"},
        <span>{</span>"name": "name", "type": "string"},
        <span>{</span>"name": "address", "type": "string"}]
}</code></pre>
                  <p>The Avro schema is defined using JSON format. The top-level JSON object
                     contains three name-value pairs with the names, or <em>keys</em>,
                        <code class="code">"name"</code>, <code class="code">"type"</code>, and <code class="code">"fields"</code>. </p>
                  <p>The <code class="code">"fields"</code> key pairs with an array of objects that define the
                     name and data type of each field in the data structure. By default, COPY
                     automatically matches the field names to column names. Column names are always
                     lowercase, so matching field names must also be lowercase, unless you specify the <code class="code">‘auto ignorecase’</code> option. Any field names that
                     don't match a column name are ignored. Order doesn't matter. In the previous
                     example, COPY maps to the column names <code class="code">id</code>, <code class="code">guid</code>,
                        <code class="code">name</code>, and <code class="code">address</code>. </p>
                  <p>With the default <code class="code">'auto'</code> argument, COPY matches only the
                     first-level objects to columns. To map to deeper levels in the schema, or if
                     field names and column names don't match, use a JSONPaths file to define the
                     mapping. For more information, see <a href="#copy-json-jsonpaths">JSONPaths file</a>. </p>
                  <p>If the value associated with a key is a complex Avro data type such as byte,
                     array, record, map, or link, COPY loads the value as a string. Here, the string
                     is the JSON representation of the data. COPY loads Avro enum data types as
                     strings, where the content is the name of the type. For an example, see <a href="./copy-usage_notes-copy-from-json.html">COPY from JSON format</a>.</p>
                  <p>The maximum size of the Avro file header, which includes the schema and file
                     metadata, is 1 MB.   </p>
                  <p>The maximum size of a single Avro data block is 4 MB. This is distinct from
                     the maximum row size. If the maximum size of a single Avro data block is
                     exceeded, even if the resulting row size is less than the 4 MB row-size limit,
                     the COPY command fails. </p>
                  <p>In calculating row size, Amazon Redshift internally counts pipe characters ( | ) twice.
                     If your input data contains a very large number of pipe characters, it is
                     possible for row size to exceed 4 MB even if the data block is less than 4
                     MB.</p>
               </dd>
             
               <dt id="copy-json"><span class="term">JSON [AS] '<em>json_option</em>'</span></dt>
               <dd>
                  <p>The source data is in JSON format. </p>
                  <p>JSON format is supported for COPY from these services and protocols:</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon S3</p>
                     </li><li class="listitem">
                        <p>COPY from Amazon EMR</p>
                     </li><li class="listitem">
                        <p>COPY from SSH</p>
                     </li></ul></div>
                  <p>JSON isn't supported for COPY from DynamoDB. </p>
                  <p>Valid values for <em>json_option</em> are as follows :</p>
                     <div class="itemizedlist">
                         
                         
                         
                        
                         
                     <ul class="itemizedlist"><li class="listitem">
                           <p><code class="code">'auto'</code></p>
                        </li><li class="listitem">
                           <p><code class="code">'auto ignorecase'</code></p>
                        </li><li class="listitem">
                           <p><code class="code">'s3://<code class="replaceable">jsonpaths_file</code>'</code>
                           </p>
                        </li><li class="listitem">
                           <p><code class="code">'noshred'</code>
                           </p>
                        </li></ul></div>
                  
                  <p>The default is <code class="code">'auto'</code>. Amazon Redshift doesn't shred the
                     attributes of JSON structures into multiple columns while loading a JSON
                     document.</p> 
                  <p>By default, COPY attempts to match all columns in the target table to JSON
                     field name keys. To load a subset of the columns, you can optionally specify a
                     column list. If the JSON field name keys aren't all lowercase, you can use
                     the <code class="code">'auto ignorecase'</code> option or a <a href="#copy-json-jsonpaths">JSONPaths file</a> to
                     explicitly map column names to JSON field name keys.</p>
                  <p>If a column in the target table is omitted from the column list, then COPY
                     loads the target column's <a href="./r_CREATE_TABLE_NEW.html#create-table-default">DEFAULT</a> expression. If
                     the target column doesn't have a default, COPY attempts to load NULL. If a
                     column is included in the column list and COPY doesn't find a matching
                     field in the JSON data, COPY attempts to load NULL to the column. </p>
                  <p>If COPY attempts to assign NULL to a column that is defined as NOT
                     NULL, the COPY command fails. </p>
                  <p>COPY maps the data elements in the JSON source data to the columns in the
                     target table. It does so by matching <em>object keys</em>, or
                     names, in the source name-value pairs to the names of columns in the target
                     table. </p>
 
                  <p>Refer to the following details about each <em>json_option</em>
                     value:</p>
                  <div class="variablelist">
                      
                     
                      
                     
                      
                     
                      
                     
                     
                     
                  <dl>
                        <dt id="copy-json-auto"><span class="term">'auto'</span></dt>
                        <dd>
                           <p>With this option, matching is case-sensitive. Column names in
                              Amazon Redshift tables are always lowercase, so when you use the
                                 <code class="code">'auto'</code> option, matching JSON field names must also be
                              lowercase.</p>
                          
                        </dd>
                      
                        <dt id="copy-json-auto-ignorecase"><span class="term">'auto ignorecase'</span></dt>
                        <dd>
                           <p>With this option, the matching isn't case-sensitive. Column names
                              in Amazon Redshift tables are always lowercase, so when you use the
                                 <code class="code">'auto ignorecase'</code> option, the corresponding JSON field
                              names can be lowercase, uppercase, or mixed case. </p>
                           
                        </dd>
                      
                        <dt id="copy-json-pathfile"><span class="term">'s3://<em>jsonpaths_file</em>'</span></dt>
                        <dd>
                           <p>With this option, COPY uses the named JSONPaths file to map the
                              data elements in the JSON source data to the columns in the target
                              table. The <em><code class="code">s3://jsonpaths_file</code></em>
                              argument must be an Amazon S3 object key that explicitly references a
                              single file. An example is <code class="code">'s3://mybucket/jsonpaths.txt</code>'.
                              The argument can't be a key prefix. For more information about
                              using a JSONPaths file, see <a href="#copy-json-jsonpaths">JSONPaths file</a>.</p>
                         
                           <p>In some cases, the file specified by <code class="code">jsonpaths_file</code>
                              has the same prefix as the path specified by
                                 <code class="code">copy_from_s3_objectpath</code> for the data files. If so,
                              COPY reads the JSONPaths file as a data file and returns errors. For
                              example, suppose that your data files use the object path
                                 <code class="code">s3://mybucket/my_data.json</code> and your JSONPaths file is
                                 <code class="code">s3://mybucket/my_data.jsonpaths</code>. In this case, COPY
                              attempts to load <code class="code">my_data.jsonpaths</code> as a data file.</p>
                           
                        </dd>
                      
                        <dt id="copy-json-noshred"><span class="term">'noshred'</span></dt>
                        <dd>
                           <p>With this option, Amazon Redshift doesn't shred the attributes of
                              JSON structures into multiple columns while loading a JSON
                              document.</p>
                           
                        </dd>
                     </dl></div>

               </dd>
            </dl></div>
            <h2 id="copy-json-data-file">JSON data file</h2>
            <p>The JSON data file contains a set of either objects or arrays. COPY loads each
               JSON object or array into one row in the target table. Each object or array
               corresponding to a row must be a stand-alone, root-level structure; that is, it must
               not be a member of another JSON structure.</p>

            <p>A JSON <em>object</em> begins and ends with braces  ( <span>{</span> } ) and
               contains an unordered collection of name-value pairs. Each paired name and value are
               separated by a colon, and the pairs are separated by commas. By default, the
                  <em>object key</em>, or name, in the name-value pairs must match the
               name of the corresponding column in the table. Column names in Amazon Redshift tables are always
               lowercase, so matching JSON field name keys must also be lowercase. If your column
               names and JSON keys don't match, use a <a href="#copy-json-jsonpaths">JSONPaths file</a> to
               explicitly map columns to keys. </p>
            <p>Order in a JSON object doesn't matter. Any names that don't match a column name
               are ignored. The following shows the structure of a simple JSON object.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "column1": "value1",
  "column2": value2,
  "notacolumn" : "ignore this value"
}</code></pre>
            <p>A JSON <em>array</em> begins and ends with brackets ( [  ] ), and
               contains an ordered collection of values separated by commas. If your data files use
               arrays, you must specify a JSONPaths file to match the values to columns. The
               following shows the structure of a simple JSON array. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">["value1", value2]</code></pre>
            <p>The JSON must be well-formed. For example, the objects or arrays can't be
               separated by commas or any other characters except white space. Strings must be
               enclosed in double quotation mark characters. Quote characters must be simple quotation marks
               (0x22), not slanted or "smart" quotation marks.</p>
            <p>The maximum size of a single JSON object or array, including braces or brackets,
               is 4 MB. This is distinct from the maximum row size. If the maximum size of a single
               JSON object or array is exceeded, even if the resulting row size is less than the 4
               MB row-size limit, the COPY command fails. </p>
            <p>In calculating row size, Amazon Redshift internally counts pipe characters ( | ) twice. If
               your input data contains a very large number of pipe characters, it is possible for
               row size to exceed 4 MB even if the object size is less than 4 MB.</p>
            <p>COPY loads <code class="code">\n</code> as a newline character and loads <code class="code">\t</code> as a
               tab character. To load a backslash, escape it with a backslash ( <code class="code">\\</code>
               ).</p>
            <p>COPY searches the specified JSON source for a well-formed, valid JSON object or
               array. If COPY encounters any non–white-space characters before locating a
               usable JSON structure, or between valid JSON objects or arrays, COPY returns an error
               for each instance. These errors count toward the MAXERROR error count. When the error
               count equals or exceeds MAXERROR, COPY fails. </p>
            <p>For each error, Amazon Redshift records a row in the STL_LOAD_ERRORS system table. The
               LINE_NUMBER column records the last line of the JSON object that caused the error. </p>
            <p>If IGNOREHEADER is specified, COPY ignores the specified number of lines in the
               JSON data. Newline characters in the JSON data are always counted for IGNOREHEADER
               calculations. </p>
            <p>COPY loads empty strings as empty fields by default. If EMPTYASNULL is specified,
               COPY loads empty strings for CHAR and VARCHAR fields as NULL. Empty strings for other
               data types, such as INT, are always loaded with NULL. </p>
            <p>The following options aren't supported with JSON: </p>
            <div class="itemizedlist">
                
                
                
                
                
                
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>CSV</p>
               </li><li class="listitem">
                  <p>DELIMITER </p>
               </li><li class="listitem">
                  <p>ESCAPE</p>
               </li><li class="listitem">
                  <p>FILLRECORD </p>
               </li><li class="listitem">
                  <p>FIXEDWIDTH</p>
               </li><li class="listitem">
                  <p>IGNOREBLANKLINES</p>
               </li><li class="listitem">
                  <p>NULL AS</p>
               </li><li class="listitem">
                  <p>READRATIO</p>
               </li><li class="listitem">
                  <p>REMOVEQUOTES </p>
               </li></ul></div>
            <p>For more information, see <a href="./copy-usage_notes-copy-from-json.html">COPY from JSON format</a>. For more information about JSON
               data structures, go to <a href="https://www.json.org/" rel="noopener noreferrer" target="_blank"><span>www.json.org</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
            </p>
          
            <h2 id="copy-json-jsonpaths">JSONPaths file</h2>
            <p>If you are loading from JSON-formatted or Avro source data, by default COPY maps
               the first-level data elements in the source data to the columns in the target table.
               It does so by matching each name, or object key, in a name-value pair to the name of
               a column in the target table. </p>

            <p>If your column names and object keys don't match, or to map to deeper levels in
               the data hierarchy, you can use a JSONPaths file to explicitly map JSON or Avro data
               elements to columns. The JSONPaths file maps JSON data elements to columns by
               matching the column order in the target table or column list.</p>
            <p>The JSONPaths file must contain only a single JSON object (not an array). The JSON
               object is a name-value pair. The <em>object key</em>, which is the name
               in the name-value pair, must be <code class="code">"jsonpaths"</code>. The
                  <em>value</em> in the name-value pair is an array of
                  <em>JSONPath expressions</em>. Each JSONPath expression references a
               single element in the JSON data hierarchy or Avro schema, similarly to how an XPath
               expression refers to elements in an XML document. For more information, see <a href="#copy-json-jsonpath-expressions">JSONPath expressions</a>.</p>
            <p>To use a JSONPaths file, add the JSON or AVRO keyword to the COPY command. Specify
               the S3 bucket name and object path of the JSONPaths file using the following
               format.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">COPY tablename 
FROM 'data_source' 
CREDENTIALS '<code class="replaceable">credentials-args</code>' 
FORMAT AS <span>{</span> AVRO | JSON } 's3://<em>jsonpaths_file</em>';</code></pre>
            <p>The <code class="code"><code class="code">s3://jsonpaths_file</code></code> value must be an Amazon S3 object key
               that explicitly references a single file, such as
                  <code class="code">'s3://mybucket/jsonpaths.txt'</code>. It can't be a key prefix. </p>
            <p>In some cases, if you're loading from Amazon S3 the file specified by
                  <code class="code">jsonpaths_file</code> has the same prefix as the path specified by
                  <code class="code">copy_from_s3_objectpath</code> for the data files. If so, COPY reads the
               JSONPaths file as a data file and returns errors. For example, suppose that your data
               files use the object path <code class="code">s3://mybucket/my_data.json</code> and your JSONPaths
               file is <code class="code">s3://mybucket/my_data.jsonpaths</code>. In this case, COPY attempts to
               load <code class="code">my_data.jsonpaths</code> as a data file.</p>
            <p> If the key name is any string other than <code class="code">"jsonpaths"</code>, the COPY
               command doesn't return an error, but it ignores
                  <em>jsonpaths_file</em> and uses the <code class="code">'auto'</code> argument
               instead. </p>
            <p>If any of the following occurs, the COPY command fails:</p>
            <div class="itemizedlist">
                
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>The JSON is malformed.</p>
               </li><li class="listitem">
                  <p>There is more than one JSON object.</p>
               </li><li class="listitem">
                  <p>Any characters except white space exist outside the object.</p>
               </li><li class="listitem">
                  <p>An array element is an empty string or isn't a string.</p>
               </li></ul></div>
            <p>MAXERROR doesn't apply to the JSONPaths file. </p>
            <p>The JSONPaths file must not be encrypted, even if the <a href="./copy-parameters-data-source-s3.html#copy-encrypted">ENCRYPTED</a> option is specified.</p>
            <p>For more information, see <a href="./copy-usage_notes-copy-from-json.html">COPY from JSON format</a>. </p>
          
            <h2 id="copy-json-jsonpath-expressions">JSONPath expressions</h2>
            <p>The JSONPaths file uses JSONPath expressions to map data fields to target columns.
               Each JSONPath expression corresponds to one column in the Amazon Redshift target table. The
               order of the JSONPath array elements must match the order of the columns in the
               target table or the column list, if a column list is used. </p>

            <p>The double quotation mark characters are required as shown, both for the field names and
               the values. The quotation mark characters must be simple quotation marks (0x22), not slanted
               or "smart" quotation marks.</p>
            <p>If an object element referenced by a JSONPath expression isn't found in the JSON
               data, COPY attempts to load a NULL value. If the referenced object is malformed, COPY
               returns a load error. </p>
            <p>If an array element referenced by a JSONPath expression isn't found in the JSON
               or Avro data, COPY fails with the following error: <code class="code">Invalid JSONPath format: Not
                  an array or index out of range.</code> Remove any array elements from the
               JSONPaths that don't exist in the source data and verify that the arrays in the
               source data are well formed.  </p>
            <p>The JSONPath expressions can use either bracket notation or dot notation, but you
               can't mix notations. The following example shows JSONPath expressions using bracket
               notation. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "jsonpaths": [
        "$['venuename']",
        "$['venuecity']",
        "$['venuestate']",
        "$['venueseats']"
    ]
}</code></pre>
            <p>The following example shows JSONPath expressions using dot notation. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "jsonpaths": [
        "$.venuename",
        "$.venuecity",
        "$.venuestate",
        "$.venueseats"
    ]
}</code></pre>
            <p>In the context of Amazon Redshift COPY syntax, a JSONPath expression must specify the
               explicit path to a single name element in a JSON or Avro hierarchical data structure.
               Amazon Redshift doesn't support any JSONPath elements, such as wildcard characters or
               filter expressions, that might resolve to an ambiguous path or multiple name
               elements.</p>
            <p>For more information, see <a href="./copy-usage_notes-copy-from-json.html">COPY from JSON format</a>. </p>
            
          
            <h2 id="using-jsonpath-with-avro">Using JSONPaths with Avro Data</h2>            
            <p>The following example shows an Avro schema with multiple levels.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "name": "person",
    "type": "record",
    "fields": [
        <span>{</span>"name": "id", "type": "int"},
        <span>{</span>"name": "guid", "type": "string"},
        <span>{</span>"name": "isActive", "type": "boolean"},
        <span>{</span>"name": "age", "type": "int"},
        <span>{</span>"name": "name", "type": "string"},
        <span>{</span>"name": "address", "type": "string"},
        <span>{</span>"name": "latitude", "type": "double"},
        <span>{</span>"name": "longitude", "type": "double"},
        <span>{</span>
            "name": "tags",
            "type": <span>{</span>
                        "type" : "array",
                        "name" : "inner_tags",
                        "items" : "string"
                    }
        },
        <span>{</span>
            "name": "friends",
            "type": <span>{</span>
                        "type" : "array",
                        "name" : "inner_friends",
                        "items" : <span>{</span>
                                    "name" : "friends_record",
                                    "type" : "record",
                                    "fields" : [
                                                 <span>{</span>"name" : "id", "type" : "int"},
                                                 <span>{</span>"name" : "name", "type" : "string"}
                                               ]
                                  }
                    }
        },
        <span>{</span>"name": "randomArrayItem", "type": "string"}
    ]
}</code></pre>
            <p>The following example shows a JSONPaths file that uses AvroPath expressions to
               reference the previous schema. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "jsonpaths": [
        "$.id",
        "$.guid",
        "$.address",
        "$.friends[0].id"
    ]
}</code></pre>
            <p>The JSONPaths example includes the following elements:</p>
            <div class="variablelist">
                
                
                
                
                
            <dl>
                  <dt><span class="term">jsonpaths</span></dt>
                  <dd>
                     <p>The name of the JSON object that contains the AvroPath
                        expressions.</p>
                  </dd>
                
                  <dt><span class="term">[ … ]</span></dt>
                  <dd>
                     <p>Brackets enclose the JSON array that contains the path elements.</p>
                  </dd>
                
                  <dt><span class="term">$</span></dt>
                  <dd>
                     <p>The dollar sign refers to the root element in the Avro schema, which is
                        the <code class="code">"fields"</code> array.</p>
                  </dd>
                
                  <dt><span class="term">"$.id",</span></dt>
                  <dd>
                     <p>The target of the AvroPath expression. In this instance, the target is
                        the element in the <code class="code">"fields"</code> array with the name
                           <code class="code">"id"</code>. The expressions are separated by commas.</p>
                  </dd>
                
                  <dt><span class="term">"$.friends[0].id"</span></dt>
                  <dd>
                     <p>Brackets indicate an array index. JSONPath expressions use zero-based
                        indexing, so this expression references the first element in the
                           <code class="code">"friends"</code> array with the name <code class="code">"id"</code>.</p>
                  </dd>
               </dl></div>
            <p>The Avro schema syntax requires using <em>inner fields</em> to define
               the structure of record and array data types. The inner fields are ignored by the
               AvroPath expressions. For example, the field <code class="code">"friends"</code> defines an array
               named <code class="code">"inner_friends"</code>, which in turn defines a record named
                  <code class="code">"friends_record"</code>. The AvroPath expression to reference the field
                  <code class="code">"id"</code> can ignore the extra fields to reference the target field
               directly. The following AvroPath expressions reference the two fields that belong to
               the <code class="code">"friends"</code> array.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"$.friends[0].id"
"$.friends[0].name"</code></pre>
          
            <h2 id="copy-parameters-columnar-data">Columnar data format
                  parameters</h2>
            <p>In addition to the standard data formats, COPY supports the following columnar
               data formats for COPY from Amazon S3. COPY from columnar format is supported with certain
               restrictions. For more information, see <a href="./copy-usage_notes-copy-from-columnar.html">COPY from columnar data
               formats</a>. </p>
            <div class="variablelist">
                
                
               
               
            <dl>
                  <dt id="copy-orc"><span class="term">ORC</span></dt>
                  <dd>
                     <p>Loads the data from a file that uses Optimized Row Columnar (ORC) file
                        format. </p>
                  </dd>
                
                  <dt id="copy-parquet"><span class="term">PARQUET</span></dt>
                  <dd>
                     <p>Loads the data from a file that uses Parquet file format. </p>
                  </dd>
               </dl></div>
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./copy-parameters-column-mapping.html">Column mapping options</div><div id="next" class="next-link" accesskey="n" href="./copy-parameters-file-compression.html">File compression
                  parameters</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/copy-parameters-data-format.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/copy-parameters-data-format.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>