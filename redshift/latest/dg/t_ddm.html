<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Dynamic data masking - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="t_ddm" /><meta name="default_state" content="t_ddm" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/t_ddm.html" /><meta name="description" content="Amazon Redshift uses dynamic data masking to obfuscate customer data at the time of SQL command runtime." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/t_ddm.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/t_ddm.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/t_ddm.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/t_ddm.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/t_ddm.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/t_ddm.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/t_ddm.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/t_ddm.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/t_ddm.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/t_ddm.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/t_ddm.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_ddm.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_ddm.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/t_ddm.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/t_ddm.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/t_ddm.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/t_ddm.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/t_ddm.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/t_ddm.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/t_ddm.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/t_ddm.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/t_ddm.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Dynamic data masking" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Dynamic data masking - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#t_ddm" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/t_ddm.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/t_ddm.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/t_ddm.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Managing database security",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/r_Database_objects.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Dynamic data masking",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/r_Database_objects.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#t_ddm" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#ddm-overview">Overview</a><a href="#ddm-example">End-to-end example</a><a href="#t_ddm-considerations">Considerations when using dynamic data masking</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="t_ddm">Dynamic data masking</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div>
         <h2 id="ddm-overview">Overview</h2>      
      <p>Using dynamic data masking (DDM) in Amazon Redshift, you can protect sensitive data in your data warehouse. 
         You can manipulate how Amazon Redshift shows sensitive data to the user at query time, without 
         transforming it in the database. You control access to data through masking policies that apply 
         custom obfuscation rules to a given user or role. In that way, you can respond to changing privacy 
         requirements without altering underlying data or editing SQL queries.</p> 
         
      <p>Dynamic data masking policies hide, obfuscate, or pseudonymize data that matches a given
            format. When attached to a table, the masking expression is applied to one or more of
            its columns. You can further modify masking policies to only apply them to certain
            users, or to user-defined roles that you can create with <a href="./t_Roles.html">Role-based access control (RBAC)</a>. Additionally, you can apply DDM on the cell level by using
            conditional columns when creating your masking policy. For more information about
            conditional masking, see <a href="./t_ddm-conditional.html">Conditional dynamic data masking</a>.</p>
      <p>You can apply multiple masking policies with varying levels of obfuscation to the same 
         column in a table and assign them to different roles. To avoid conflicts when you have 
         different roles with different policies applying to one column, you can set priorities 
         for each application. In that way, you can control what data a given user or role can 
         access. DDM policies can partially or completely redact data, or hash it by 
         using user-defined functions written in SQL, Python, or with AWS Lambda. 
         By masking data using hashes, you can apply joins on 
         this data without access to potentially sensitive information.</p>
       
         <h2 id="ddm-example">End-to-end example</h2>
         <p>The following is an end-to-end example showing how you can create and attach
            masking policies to a column. These policies let users access a column and see different
            values, depending on the degree of obfuscation in the policies attached to their
            roles. You must be a superuser or have the <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_roles-default.html"><code class="code">sys:secadmin</code></a> role to run this example.</p>
       
         <h3 id="ddm-example-create">Creating a masking policy</h3>
      <p>First, create a table and populate it with credit card values.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">--create the table         
CREATE TABLE credit_cards (
  customer_id INT,
  credit_card TEXT
);

--populate the table with sample values
INSERT INTO credit_cards
VALUES
  (100, '4532993817514842'),
  (100, '4716002041425888'),
  (102, '5243112427642649'),
  (102, '6011720771834675'),
  (102, '6011378662059710'),
  (103, '373611968625635')
;

--run GRANT to grant permission to use the SELECT statement on the table
GRANT SELECT ON credit_cards TO PUBLIC;

--create two users
CREATE USER regular_user WITH PASSWORD '1234Test!';

CREATE USER analytics_user WITH PASSWORD '1234Test!';

--create the analytics_role role and grant it to analytics_user
--regular_user does not have a role
CREATE ROLE analytics_role;

GRANT ROLE analytics_role TO analytics_user;</code></pre>
      <p>Next, create a masking policy to apply to the analytics role.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">--create a masking policy that fully masks the credit card number
CREATE MASKING POLICY mask_credit_card_full
WITH (credit_card VARCHAR(256))
USING ('000000XXXX0000'::TEXT);

--create a user-defined function that partially obfuscates credit card data
CREATE FUNCTION REDACT_CREDIT_CARD (credit_card TEXT)
RETURNS TEXT IMMUTABLE
AS $$
    import re
    regexp = re.compile("^([0-9]<span>{</span>6})[0-9]<span>{</span>5,6}([0-9]<span>{</span>4})")
 
    match = regexp.search(credit_card)
    if match != None:
        first = match.group(1)
        last = match.group(2)
    else:
        first = "000000"
        last = "0000"
    
    return "<span>{</span>}XXXXX<span>{</span>}".format(first, last)
$$ LANGUAGE plpythonu;

--create a masking policy that applies the REDACT_CREDIT_CARD function
CREATE MASKING POLICY mask_credit_card_partial
WITH (credit_card VARCHAR(256))
USING (REDACT_CREDIT_CARD(credit_card));

--confirm the masking policies using the associated system views
SELECT * FROM svv_masking_policy;

SELECT * FROM svv_attached_masking_policy;   </code></pre>
          
       
         <h3 id="ddm-example-attach">Attaching a masking policy</h3>
      <p>Attach the masking policies to the credit card table.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">--attach mask_credit_card_full to the credit card table as the default policy
--all users will see this masking policy unless a higher priority masking policy is attached to them or their role
ATTACH MASKING POLICY mask_credit_card_full
ON credit_cards(credit_card)
TO PUBLIC;

--attach mask_credit_card_partial to the analytics role
--users with the analytics role can see partial credit card information
ATTACH MASKING POLICY mask_credit_card_partial
ON credit_cards(credit_card)
TO ROLE analytics_role
PRIORITY 10;

--confirm the masking policies are applied to the table and role in the associated system view
SELECT * FROM svv_attached_masking_policy;

--confirm the full masking policy is in place for normal users by selecting from the credit card table as regular_user
SET SESSION AUTHORIZATION regular_user;

SELECT * FROM credit_cards;

--confirm the partial masking policy is in place for users with the analytics role by selecting from the credit card table as analytics_user
SET SESSION AUTHORIZATION analytics_user;

SELECT * FROM credit_cards;</code></pre>
       
         
          
            <h3 id="ddm-example-alter">Altering a masking policy</h3>
            <p>The following section shows how to alter a dynamic data masking policy.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">--reset session authorization to the default
RESET SESSION AUTHORIZATION;

--alter the mask_credit_card_full policy
ALTER MASKING POLICY mask_credit_card_full
USING ('00000000000000'::TEXT);	
	
--confirm the full masking policy is in place after altering the policy, and that results are altered from '000000XXXX0000' to '00000000000000'
SELECT * FROM credit_cards;</code></pre>
          
      
       
         <h3 id="ddm-example-detach">Detaching and dropping a masking policy</h3>
         <p>The following section shows how to detach and drop masking 
            policies by removing all dynamic data masking policies 
            from the table.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">--reset session authorization to the default
RESET SESSION AUTHORIZATION;

--detach both masking policies from the credit_cards table
DETACH MASKING POLICY mask_credit_card_full 
ON credit_cards(credit_card) 
FROM PUBLIC;

DETACH MASKING POLICY mask_credit_card_partial 
ON credit_cards(credit_card) 
FROM ROLE analytics_role;

--drop both masking policies
DROP MASKING POLICY mask_credit_card_full;

DROP MASKING POLICY mask_credit_card_partial; </code></pre>
       
       
         <h2 id="t_ddm-considerations">Considerations when using dynamic data masking</h2>
         <p>When using dynamic data masking, consider the following:
         </p>
         <div class="itemizedlist">
             
             
             
             
             
             
            
             
             
             
            
             
             
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p> When querying objects created from tables, such as views, users will see
                  results based on their own masking policies, not the policies of the user who
                  created the objects. For example, a user with the analyst role querying a view
                  created by a secadmin would see results with masking policies attached to the
                  analyst role. </p>
            </li><li class="listitem">
               <p> To prevent the EXPLAIN command from potentially exposing sensitive masking
                  policy filters, only users with the SYS_EXPLAIN_DDM permission can see masking
                  policies applied in EXPLAIN outputs. Users don't have the SYS_EXPLAIN_DDM
                  permission by default.</p>
               <p>The following is the syntax for granting the permission to a user or
                  role.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT EXPLAIN MASKING TO <span>{</span> username | ROLE rolename }</code></pre>
               <p> For more information about the EXPLAIN command, see <a href="./r_EXPLAIN.html">EXPLAIN</a>. </p>
            </li><li class="listitem">
               <p> Users with different roles can see differing results based on the filter
                  conditions or join conditions used. For example, running a SELECT command on a
                  table using a specific column value will fail if the user running the command has
                  a masking policy applied that obfuscates that column. </p>
            </li><li class="listitem">
               <p> DDM policies must be applied ahead of any predicate operations, or
                  projections. Masking polices can include the following:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>Low cost constant operations such as converting a value to null</p>
                  </li><li class="listitem">
                     <p>Moderate cost operations such as HMAC hashing</p>
                  </li><li class="listitem">
                     <p>High cost operations such as calls to external Lambda user defined
                        functions</p>
                  </li></ul></div>
               <p>As such, we recommend that you use simple masking expressions when possible.
               </p>
            </li><li class="listitem">
               <p> You can use DDM policies for roles with row-level security policies, but note
                  that RLS policies are applied before DDM. A dynamic data masking expression won't
                  be able to read a row that was protected by RLS. For more information about RLS,
                  see <a href="./t_rls.html">Row-level security</a>. </p>
            </li><li class="listitem">
               <p> When using the <a href="./r_COPY.html">COPY</a> command to copy
                  from parquet to protected target tables, you should explicitly specify columns in
                  the COPY statement. For more information about mapping columns with COPY, see
                     <a href="./copy-parameters-column-mapping.html">Column mapping options</a>. </p>
            </li><li class="listitem">
               <p> DDM policies can't attach to the following relations:</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p> System tables and catalogs </p>
                  </li><li class="listitem">
                     <p> External tables </p>
                  </li><li class="listitem">
                     <p> Datasharing tables </p>
                  </li><li class="listitem">
                     <p> Materialized views </p>
                  </li><li class="listitem">
                     <p> Cross-DB relations </p>
                  </li><li class="listitem">
                     <p> Temporary tables </p>
                  </li><li class="listitem">
                     <p> Correlated queries </p>
                  </li></ul></div>
            </li><li class="listitem">
               <p> DDM policies can contain lookup tables. Lookup tables can be present in the
                  USING clause. The following relation types can’t be used as lookup tables:</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p> System tables and catalogs </p>
                  </li><li class="listitem">
                     <p> External tables </p>
                  </li><li class="listitem">
                     <p> Datasharing tables </p>
                  </li><li class="listitem">
                     <p> Views, materialized views, and late-binding views </p>
                  </li><li class="listitem">
                     <p> Cross-DB relations </p>
                  </li><li class="listitem">
                     <p> Temporary tables </p>
                  </li><li class="listitem">
                     <p> Correlated queries </p>
                  </li></ul></div>
               <p>Following is an example of attaching a masking policy to a lookup table.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">--Create a masking policy referencing a lookup table
CREATE MASKING POLICY lookup_mask_credit_card WITH (credit_card TEXT) USING (
  CASE
    WHEN
      credit_card IN (SELECT credit_card_lookup FROM credit_cards_lookup)      
    THEN '000000XXXX0000'
    ELSE REDACT_CREDIT_CARD(credit_card)
    END
  ); 
  
--Provides access to the lookup table via a policy attached to a role
GRANT SELECT ON TABLE credit_cards_lookup TO MASKING POLICY lookup_mask_credit_card;</code></pre>
            </li><li class="listitem">
               <p> You can't attach a masking policy that would produce an output incompatible
                  with the target column's type and size. For example, you can’t attach a masking
                  policy that outputs a 12 character long string to a VARCHAR(10) column. Amazon Redshift
                  supports the following exceptions: </p>
               <div class="itemizedlist">
                  
                   
                   
                  
                  
               <ul class="itemizedlist"><li class="listitem">
                     <p> A masking policy with the input type INTN can be attached to a policy
                        with size INTM as long as M &lt; N. For example, a BIGINT (INT8) input
                        policy can be attached to a smallint (INT4) column. </p>
                  </li><li class="listitem">
                     <p> A masking policy with the input type NUMERIC or DECIMAL can always be
                        attached to a FLOAT column. </p>
                  </li></ul></div>
            </li><li class="listitem">
               <p> DDM policies can't be used with data sharing. If the datashare's data producer
                  attaches a DDM policy to a table in the datashare, the table becomes inaccessible
                  to users from the data consumer who are trying to query the table. Tables with DDM
                  policies attached can't be added to a datashare.</p>
            </li><li class="listitem">
               <p>You can't query relations that have attached DDM policies if your values for
                  any of the following configuration options don't match the default value of the
                  session:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>
                        <code class="code">enable_case_sensitive_super_attribute</code>
                     </p>
                  </li><li class="listitem">
                     <p>
                        <code class="code">enable_case_sensitive_identifier</code>
                     </p>
                  </li><li class="listitem">
                     <p>
                        <code class="code">downcase_delimited_identifier</code>
                     </p>
                  </li></ul></div>
               <p>Consider resetting your session’s configuration options if you attempt to query
                  a relation with a DDM policy attached and see the message "DDM protected relation
                  does not support session level config on case sensitivity being different from its
                  default value."</p>
            </li><li class="listitem">
               <p> When your provisioned cluster or serverless namespace has any dynamic data
                  masking policies, the following commands are blocked for regular users: </p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER &lt;current_user&gt; SET enable_case_sensitive_super_attribute/enable_case_sensitive_identifier/downcase_delimited_identifier</code></pre>
               <p>When you create DDM policies, we recommend that you change the default
                  configuration option settings for regular users to match the session’s
                  configuration option settings at the time the policy was created. Superusers and
                  users with the ALTER USER privilege can do this by using parameter group settings
                  or the ALTER USER command. For information about parameter groups, see <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/working-with-parameter-groups.html">Amazon Redshift parameter
                     groups</a> in the <em>Amazon Redshift Management Guide</em>. For information
                  about the ALTER USER command, see <a href="./r_ALTER_USER.html">ALTER USER</a>.</p>
            </li><li class="listitem">
               <p>Views and late-binding views with attached DDM policies can't be replaced by regular users
                  using the <a href="./r_CREATE_VIEW.html">CREATE VIEW</a> command.
                  To replace views or LBVs with DDM policies, first detach any DDM policies attached
                  to them, replace the views or LBVs, and reattach the policies. Superusers and users 
                  with the <code class="code">sys:secadmin</code> permission can use CREATE VIEW on views or
                  LBVs with DDM policies without detaching the policies.</p>
            </li><li class="listitem">
               <p>Views with attached DDM policies can't reference system tables and views. Late-binding
                  views can reference system tables and views.</p>
            </li><li class="listitem">
               <p>Late-binding views with attached DDM policies can't reference nested data in data
                  lakes, such as JSON documents.</p>
            </li><li class="listitem">
               <p> Late-binding views can't have DDM policies attached if that late-binding view
                  is referenced by any view.</p>
            </li><li class="listitem">
               <p> DDM policies attached to late-binding views are attached by column name. At
                  query time, Amazon Redshift validates that all masking policies attached to the
                  late-binding view have been applied successfully, and that the late-binding view's
                  output column type matches the types in the attached masking policies. If the
                  validation fails, Amazon Redshift returns an error for the query.</p>
            </li></ul></div>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./t_metadata_security.html">Metadata security</div><div id="next" class="next-link" accesskey="n" href="./r_ddm-procedures.html">Managing dynamic
               data masking policies</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/t_ddm.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/t_ddm.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>