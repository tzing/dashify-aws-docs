<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Sharing read access to data within an AWS account - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="within-account" /><meta name="default_state" content="within-account" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" /><meta name="description" content="You can share data for read purposes across different Amazon Redshift clusters within an AWS account." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/within-account.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/within-account.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/within-account.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/within-account.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/within-account.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/within-account.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/within-account.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/within-account.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/within-account.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/within-account.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/within-account.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/within-account.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Sharing read access to data within an AWS account" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Sharing read access to data within an AWS account - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#within-account" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/within-account.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/within-account.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/within-account.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Sharing data in Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/datashare-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Managing data sharing tasks",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/getting-started-datashare.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Managing data sharing using the SQL interface",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/getting-started-datashare-sql.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Sharing read access to data within an AWS account",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/getting-started-datashare-sql.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#within-account" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="within-account">Sharing read access to data within an AWS account</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can share data for read purposes across different Amazon Redshift clusters within an AWS account.</p><div class="procedure"><h6>To share data for read purposes as a producer cluster
                  administrator or database owner</h6><ol><li><p>Create datashares in your cluster. For more information, see <a href="./r_CREATE_DATASHARE.html">CREATE DATASHARE</a>.</p>
            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATASHARE salesshare;</code></pre>
            <p>Cluster superuser and database owners can create datashares. Each datashare is associated with a database during
                     creation. Only objects from that database can be shared in that datashare.
                     Multiple datashares can be created on the same database with the same or
                     different granularity of objects. There is no limit on the number of datashares
                     a cluster can create.</p>
            <p>You can also use the Amazon Redshift console to create datashares. For more information, see
                        <a href="./datashare-creation.html#create-datashare-console">Creating datashares</a>.</p>
      </li><li><p>Delegate permissions to operate on the datashare. For more information, see <a href="./r_GRANT.html">GRANT</a> or <a href="./r_REVOKE.html">REVOKE</a>.</p>

            <p>The following example grants permissions to <code class="code">dbuser</code> on
                        <code class="code">salesshare</code>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT ALTER, SHARE ON DATASHARE salesshare TO dbuser;</code></pre>

            <p>Cluster superusers and the owners of the datashare can grant or revoke
               modification permissions on the datashare to additional users.</p>
      </li><li><p>Add objects to or remove objects from datashares. To add objects to a datashare, add the
            schema before adding objects. When you add a schema, Amazon Redshift doesn't add all the objects under it. Make sure to add these explicitly. For more information, see <a href="./r_ALTER_DATASHARE.html">ALTER DATASHARE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare ADD SCHEMA PUBLIC;
ALTER DATASHARE salesshare ADD TABLE public.tickit_sales_redshift;
ALTER DATASHARE salesshare ADD ALL TABLES IN SCHEMA PUBLIC;</code></pre>
            
            <p>You can also add views to a datashare.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE VIEW public.sales_data_summary_view AS SELECT * FROM public.tickit_sales_redshift;
ALTER DATASHARE salesshare ADD TABLE public.sales_data_summary_view;</code></pre>

         
            <p>Use ALTER DATASHARE to share schemas, and tables, views, and functions in a given
                     schema. Superusers, datashare owners, or users who have ALTER or ALL permission
                     on the datashare can alter the datashare to add objects to or remove objects
                     from it. Users should have the permissions to add or remove objects from the
                     datashare. Users should also be the owners of the objects or have SELECT,
                     USAGE, or ALL permissions on the objects.</p>  
            <p>You can also use GRANT to add objects to the datashare. This example shows how:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT SELECT ON TABLE public.tickit_sales_redshift TO DATASHARE salesshare;</code></pre>
            <p>This syntax is functionally equivalent to <code class="code">ALTER DATASHARE salesshare ADD TABLE public.tickit_sales_redshift;</code>.</p>

            <p>Use the INCLUDENEW clause to add any new tables, views, or SQL user-defined functions (UDFs) created in a specified schema to the datashare. Only superusers can change this property for each datashare-schema pair.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare ADD SCHEMA PUBLIC;
ALTER DATASHARE salesshare SET INCLUDENEW = TRUE FOR SCHEMA PUBLIC;</code></pre>

            <p>You can also use the Amazon Redshift console to add or remove objects from datashares. For
                     more information, see <a href="./datashare-creation.html#add-datashare-object-console">Adding datashare objects to
                  datashares</a>, <a href="./manage-datashare-existing-console.html#remove-datashare-object-console">Removing datashare objects from datashares</a>, and <a href="./manage-datashare-existing-console.html#edit-datashare-console">Editing datashares created in your
                  account</a>.</p></li><li><p>Add consumers to or remove consumers from datashares. The following example adds the consumer

                     cluster namespace to <code class="code">salesshare</code>. The namespace is the namespace
                     globally unique identifier (GUID) of the consumer cluster in the account. For
                     more information, see <a href="./r_GRANT.html">GRANT</a> or
                        <a href="./r_REVOKE.html">REVOKE</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATASHARE salesshare TO NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>You can only grant permissions to one datashare consumer in a GRANT
                     statement.</p>
            
            <p>Cluster superusers and the owners of datashare objects or users that have SHARE
                     permission on the datashare can add consumers to or remove consumers from a
                     datashare. To do so, they use GRANT USAGE or REVOKE USAGE.</p>
            <p>To find the namespace of the cluster that you currently see, you can use the
                     SELECT CURRENT_NAMESPACE command. To find the namespace of a different cluster
                     within the same AWS account, go to the Amazon Redshift console cluster details page.
                     On that page, find the newly added namespace field.</p>
            <p>You can also use the Amazon Redshift console to add or remove data consumers for datashares.
                     For more information, see <a href="./datashare-creation.html#add-data-consumer-console">Adding data consumers to
                  datashares</a> and <a href="./manage-datashare-existing-console.html#remove-data-consumer-console">Removing data consumers from datashares</a>.</p>
         </li><li><p>(Optional) Add security restrictions to the datashare. The following example shows that the
                     consumer cluster with a public IP access is allowed to read the datashare. For
                     more information, see <a href="./r_ALTER_DATASHARE.html">ALTER DATASHARE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare SET PUBLICACCESSIBLE = TRUE;</code></pre>

            <p>You can modify properties about the type of consumers after datashare creation.
                     For example, you can define that clusters that want to consume data from a
                     given datashare can't be publicly accessible. Queries from consumer
                     clusters that don't meet security restrictions specified in datashare are
                     rejected at query runtime.</p>
            <p>You can also use the Amazon Redshift console to edit datashares. For more information, see
                        <a href="./manage-datashare-existing-console.html#edit-datashare-console">Editing datashares created in your
                  account</a>.</p>
            
         </li><li><p>List datashares created in the cluster and look into the contents of the datashare.</p>

            <p>The following example displays the information of a datashare named
                        <code class="code">salesshare</code>. For more information, see <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> and <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DESC DATASHARE salesshare;

               
 producer_account  |          producer_namespace          | share_type | share_name | object_type |           object_name          |   include_new
-------------------+--------------------------------------+------------+------------+-------------+--------------------------------+-------------------
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_users_redshift   |   
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_venue_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_category_redshift|
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_date_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_event_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_listing_redshift |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_sales_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | schema      | public                         |  t
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | view        | public.sales_data_summary_view |</code></pre>
            
            <p>The following example displays the outbound datashares in a producer
                     cluster.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SHOW DATASHARES LIKE 'sales%';</code></pre>
            <p>The output looks similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">share_name | share_owner  | source_database | consumer_database | share_type |     createdate      | is_publicaccessible  | share_acl | producer_account |          producer_namespace 
-----------+--------------+-----------------+-------------------+------------+---------------------+----------------------+-----------+------------------+---------------------------------------
salesshare |    100       | dev             |                   |  OUTBOUND  | 2020-12-09 02:27:08 |          True        |           |   123456789012   | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d </code></pre>
            <p>For more information, see <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> and <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>. </p>
            <p>You can also use <a href="./r_SVV_DATASHARES.html">SVV_DATASHARES</a>, <a href="./r_SVV_DATASHARE_CONSUMERS.html">SVV_DATASHARE_CONSUMERS</a>, and <a href="./r_SVV_DATASHARE_OBJECTS.html">SVV_DATASHARE_OBJECTS</a>
                     to view the datashares, the objects within the datashare, and the datashare
                     consumers.</p>
         </li><li><p>Drop datashares. For more information, see <a href="./r_DROP_DATASHARE.html">DROP DATASHARE</a>.</p>
            <p>You can delete the datashare objects at any point using <a href="./r_DROP_DATASHARE.html">DROP DATASHARE</a>. Cluster
                     superusers and owners of datashare can drop datashares.</p>

            <p>The following example drops a datashare named <code class="code">salesshare</code>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DROP DATASHARE salesshare;</code></pre>

            <p>You can also use the Amazon Redshift console to delete datashares. For more information, see
                        <a href="./manage-datashare-existing-console.html#delete-datashare-console">Deleting datashares created in your account</a>.</p>
         </li><li><p>Use ALTER DATASHARE to remove objects from datashares at any point from the datashare. Use
            REVOKE USAGE ON to revoke permissions on the datashare to certain consumers.
            It revokes USAGE permissions on objects within a datashare and instantly
            stops access to all consumer clusters. Listing datashares and the metadata
            queries, such as listing databases and tables, doesn't return the
            shared objects after access is revoked.</p>

            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare REMOVE TABLE public.tickit_sales_redshift;</code></pre>

            <p>You can also use the Amazon Redshift console to edit datashares. For more information, see
                        <a href="./manage-datashare-existing-console.html#edit-datashare-console">Editing datashares created in your
                  account</a>.</p>
         </li><li><p>Revoke access to the datashare from namespaces if you don't want to share the data with
                     the consumers anymore.</p>

            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">REVOKE USAGE ON DATASHARE salesshare FROM NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>You can also use the Amazon Redshift console to edit datashares. For more information, see
                        <a href="./manage-datashare-existing-console.html#edit-datashare-console">Editing datashares created in your
                  account</a>.</p>
         </li></ol></div><div class="procedure"><h6>To share data for read purposes as a consumer cluster administrator</h6><ol><li><p>List the datashares that are made available to you and view the content of datashares. For
                     more information, see <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> and <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>.</p>
            <p>The following example displays the information of inbound datashares of a
                     specified producer namespace. When you run DESC DATASHARE as a consumer cluster
                     administrator, you must specify the NAMESPACE option to view inbound
                     datashares. </p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DESC DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';


 producer_account  |          producer_namespace          | share_type | share_name | object_type |           object_name           |   include_new
-------------------+--------------------------------------+------------+------------+-------------+---------------------------------+------------------
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_users_redshift    |     
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_venue_redshift    |     
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_category_redshift |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_date_redshift     |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_event_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_listing_redshift  |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_sales_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | schema      | public                          |    
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | view        | public.sales_data_summary_view  |   </code></pre>
            <p>Only cluster superusers can do this. You can also use SVV_DATASHARES to view the
                     datashares and SVV_DATASHARE_OBJECTS to view the objects within the
                     datashare.</p>
            <p>The following example displays the inbound datashares in a consumer
                     cluster.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SHOW DATASHARES LIKE 'sales%';


 share_name | share_owner | source_database | consumer_database | share_type | createdate | is_publicaccessible | share_acl | producer_account |          producer_namespace
------------+-------------+-----------------+-------------------+------------+------------+---------------------+-----------+------------------+--------------------------------------
 salesshare |             |                 |                   | INBOUND    |            |         t           |           |   123456789012   | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d</code></pre>
         </li><li><p>As a database superuser, you can create local databases that reference to the datashares. For more information, see <a href="./r_CREATE_DATABASE.html">CREATE DATABASE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sales_db FROM DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>
            
            <p>If you want more granular control over access to the objects in the local database, 
               use the WITH PERMISSIONS clause when creating the database. This lets you grant object-level permissions for objects in the database in step 4.
            </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sales_db WITH PERMISSIONS FROM DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>You can see databases that you created from the datashare by querying the <a href="./r_SVV_REDSHIFT_DATABASES.html">SVV_REDSHIFT_DATABASES</a> view. You can't connect to these databases created from datashares, and
                     they are read-only. However, you can connect to a local database on your
                     consumer cluster and perform a cross-database query to query the data from the
                     databases created from datashares. You can't create a datashare on top of
                     database objects created from an existing datashare. However, you can copy the
                     data into a separate table on the consumer cluster, perform any processing
                     needed, and then share the new objects that were created.</p>
            <p>You can also use the Amazon Redshift console to create databases from datashares. For more
                     information, see <a href="./query-datashare-console.html#create-database-from-datashare-console">Creating databases from
                  datashares</a>.</p>

         </li><li><p>(Optional) Create external schemas to refer to and assign granular permissions to specific
                     schemas in the consumer database imported on the consumer cluster. For more
                     information, see <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA sales_schema FROM REDSHIFT DATABASE 'sales_db' SCHEMA 'public';</code></pre>

     

         </li><li><p>Grant permissions on databases and schema references created from the datashares to users
                     and roles in the consumer cluster as needed. For more information, see <a href="./r_GRANT.html">GRANT</a> or <a href="./r_REVOKE.html">REVOKE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATABASE sales_db TO Bob;</code></pre>
            
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON SCHEMA sales_schema TO ROLE Analyst_role;</code></pre>

            <p>If you created your database without WITH PERMISSIONS, you can only assign permissions on the entire
                     database created from the datashare to your users and roles. In some cases,
                     you need fine-grained controls on a subset of database objects created from the
                     datashare. If so, you can create an external schema reference that points to
                     specific schemas in the datashare (as described in the previous step) and
                     provide granular permissions at schema level. </p>
                  <p>You can also create late-binding views on top of shared objects and use
                     these to assign granular permissions. You can also consider having producer
                     clusters create additional datashares for you with the granularity required.
          
                  </p>
            <p>If you created your database with WITH PERMISSIONS in step 2, you must assign 
               object-level permissions for objects in the shared database. A user with only the USAGE permission 
               can’t access any objects in a database created with WITH PERMISSIONS until they’re granted 
               additional object-level permissions..</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT SELECT ON sales_db.public.tickit_sales_redshift to Bob;</code></pre>

         </li><li><p>Query data in the shared objects in the datashares.</p>
            <p>Users and roles with permissions on consumer databases and schemas on consumer
                     clusters can explore and navigate the metadata of any shared objects. They can
                     also explore and navigate local objects in a consumer cluster. To do this, they
                     use JDBC or ODBC drivers or SVV_ALL and SVV_REDSHIFT views.</p>
                  <p>Producer clusters might have many schemas in the database, tables, and views
                     within each schema. The users on the consumer side can see only the subset of
                     objects that are made available through the datashare. These users can't see
                     the entire metadata from the producer cluster. This approach helps provide
                     granular metadata security control with data sharing.</p>
            <p>You continue to connect to local cluster databases. But now, you can also read
                     from the databases and schemas that are created from the datashare using the
                     three-part database.schema.table notation. You can perform queries that span
                     across any and all databases that are visible to you. These can be local
                     databases on the cluster or databases created from the datashares. Consumer
                     clusters can't connect to the databases created from the
                     datashares.</p>
            <p>You can access the data using full qualification. For more information, see <a href="./cross-database_example.html">Examples of using a cross-database query</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT * FROM sales_db.public.tickit_sales_redshift ORDER BY 1,2 LIMIT 5;

 salesid | listid | sellerid | buyerid | eventid | dateid | qtysold | pricepaid | commission |      saletime
---------+--------+----------+---------+---------+--------+---------+-----------+------------+---------------------
       1 |      1 |    36861 |   21191 |    7872 |   1875 |       4 |    728.00 |     109.20 | 2008-02-18 02:36:48
       2 |      4 |     8117 |   11498 |    4337 |   1983 |       2 |     76.00 |      11.40 | 2008-06-06 05:00:16
       3 |      5 |     1616 |   17433 |    8647 |   1983 |       2 |    350.00 |      52.50 | 2008-06-06 08:26:17
       4 |      5 |     1616 |   19715 |    8647 |   1986 |       1 |    175.00 |      26.25 | 2008-06-09 08:38:52
       5 |      6 |    47402 |   14115 |    8240 |   2069 |       2 |    154.00 |      23.10 | 2008-08-31 09:17:02</code></pre>
            <p>You can only use SELECT statements on shared objects. However, you can create
                  tables in the consumer cluster by querying the data from the shared objects in a
                  different local database.</p><p>In addition to queries, consumers can create views on shared objects. Only late-binding views
                     or materialized views are supported. Amazon Redshift doesn't support regular
                     views on shared data. Views that consumers create can span across multiple
                     local databases or databases created from datashares. For more information, see
                        <a href="./r_CREATE_VIEW.html">CREATE VIEW</a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">// Connect to a local cluster database
               
// Create a view on shared objects and access it. 
CREATE VIEW sales_data 
AS SELECT * 
FROM sales_db.public.tickit_sales_redshift 
WITH NO SCHEMA BINDING;

SELECT * FROM sales_data;</code></pre>
         </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./getting-started-datashare-sql.html">Managing data sharing using the SQL
               interface</div><div id="next" class="next-link" accesskey="n" href="./multi-warehouse-writes-data-sharing.html">Sharing write access to data (Preview)</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/within-account.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/within-account.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>