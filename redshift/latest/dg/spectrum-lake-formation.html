<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using Redshift Spectrum with AWS Lake Formation - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="spectrum-lake-formation" /><meta name="default_state" content="spectrum-lake-formation" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/spectrum-lake-formation.html" /><meta name="description" content="You can use AWS Lake Formation to centrally define and enforce database, table, and column-level access policies to data stored in Amazon S3. After your data is registered with an AWS Glue Data Catalog enabled with Lake Formation, you can query it by using several services, including Redshift Spectrum." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/spectrum-lake-formation.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/spectrum-lake-formation.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/spectrum-lake-formation.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/spectrum-lake-formation.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/spectrum-lake-formation.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/spectrum-lake-formation.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/spectrum-lake-formation.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/spectrum-lake-formation.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/spectrum-lake-formation.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/spectrum-lake-formation.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/spectrum-lake-formation.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/spectrum-lake-formation.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/spectrum-lake-formation.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/spectrum-lake-formation.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/spectrum-lake-formation.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/spectrum-lake-formation.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/spectrum-lake-formation.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/spectrum-lake-formation.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/spectrum-lake-formation.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/spectrum-lake-formation.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/spectrum-lake-formation.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/spectrum-lake-formation.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Using Redshift Spectrum with AWS Lake Formation" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Using Redshift Spectrum with AWS Lake Formation - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#spectrum-lake-formation" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/spectrum-lake-formation.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/spectrum-lake-formation.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/spectrum-lake-formation.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Querying external data using Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Using Redshift Spectrum with AWS Lake Formation",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#spectrum-lake-formation" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#spectrum-lake-formation-data-filters">Using data filters for row-level and cell-level security</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="spectrum-lake-formation">Using Redshift Spectrum with AWS Lake Formation</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can use AWS Lake Formation to centrally define and enforce database, table, and column-level
         access policies to data stored in Amazon S3. After your data is registered with an AWS Glue Data Catalog
         enabled with Lake Formation, you can query it by using several services, including Redshift Spectrum. </p><p>Lake Formation provides the security and governance of the Data Catalog. Within Lake Formation, you can grant and
         revoke permissions to the Data Catalog objects, such as databases, tables, columns, and
         underlying Amazon S3 storage.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>You can only use Redshift Spectrum with a Lake Formation enabled Data Catalog in AWS Regions where Lake Formation is available. 
         For a list of available Regions, see 
         <a href="https://docs.aws.amazon.com/general/latest/gr/lake-formation.html">AWS Lake Formation endpoints and quotas</a> in the <em>AWS General Reference</em>.</p></div></div><p>By using Redshift Spectrum with Lake Formation, you can do the following:</p><div class="itemizedlist">
          
          
          
      <ul class="itemizedlist"><li class="listitem"><p>Use Lake Formation as a centralized place where you grant and revoke permissions and access control policies on all of your data in the data lake. 
            Lake Formation provides a hierarchy of permissions to control access to databases and tables in a Data Catalog.
            For more information, see 
            <a href="https://docs.aws.amazon.com/lake-formation/latest/dg/lake-formation-permissions.html">Overview of Lake Formation permissions</a> in the <em>AWS Lake Formation Developer Guide</em>.</p></li><li class="listitem"><p>Create external tables and run queries on data in the data lake. Before users in your account
               can run queries, a data lake account administrator registers your existing Amazon S3 paths
               containing source data with Lake Formation. The administrator also creates tables and grants
               permissions to your users. Access can be granted on databases, tables, or columns. 
               
               The administrator can use data filters in Lake Formation to grant granular access control over your sensitive data stored 
               in Amazon S3. For more information, see 
               <a href="#spectrum-lake-formation-data-filters">Using data filters for row-level and cell-level security</a>.</p>
            <p>After the data is registered in the Data Catalog, each time users try to run queries,
               Lake Formation verifies access to the table for that specific principal. Lake Formation vends temporary
               credentials to Redshift Spectrum, and the query runs. 
            </p></li><li class="listitem">
            
            <p>Run Redshift Spectrum queries against an automounted AWS Glue Data Catalog using IAM credentials obtained with <code class="code">GetCredentials</code> or <code class="code">GetClusterCredentials</code>, 
               and manage Lake Formation permissions by database user (IAMR:username or IAM:username).</p></li></ul></div><p>When you use Redshift Spectrum with a Data Catalog enabled for Lake Formation, one of the following must be in place:</p><div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem"><p>An IAM role associated with the
            cluster that has permission to the Data Catalog.</p></li><li class="listitem"><p>A federated IAM identity configured to manage access to external resources. For 
            more information, 
            see <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Using a federated identity to manage Amazon Redshift access to local resources and Amazon Redshift external tables</a>.</p></li></ul></div><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>You can't chain IAM roles when using Redshift Spectrum with a Data Catalog enabled for Lake Formation.</p></div></div><p>To learn more about the steps required to set up AWS Lake Formation to use with Redshift Spectrum, see
         <a href="https://docs.aws.amazon.com/lake-formation/latest/dg/getting-started-tutorial-jdbc.html">Tutorial: Creating a data lake from a JDBC source in Lake Formation</a> in the <em>AWS Lake Formation Developer Guide</em>. 
         Specifically, see 
         <a href="https://docs.aws.amazon.com/lake-formation/latest/dg/tut-query-redshift.html">Query the data in the data lake using Amazon Redshift Spectrum</a> 
         for details about integration with Redshift Spectrum. 
         The data and AWS resources used in this topic depend on previous steps in the tutorial.</p>
         <h2 id="spectrum-lake-formation-data-filters">Using data filters for row-level and cell-level security</h2>
         
         
         <p>You can define data filters in AWS Lake Formation to control your Redshift Spectrum queries' row-level and cell-level access to data defined in your Data Catalog.
           To set this up, you perform the following tasks:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Create a data filter in Lake Formation with the following information:</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>A column specification with a list of columns to include or exclude from query results.</p></li><li class="listitem"><p>A row filter expression that specifies the rows to include in the query results.</p></li></ul></div>
               <p>For more information about how to create a data filter, see 
                  <a href="https://docs.aws.amazon.com/lake-formation/latest/dg/data-filters-about.html">Data filters in Lake Formation</a> in the <em>AWS Lake Formation Developer Guide</em>.</p></li><li class="listitem"><p>Create an external table in Amazon Redshift that references a table in your Lake Formation enabled Data Catalog.
               For details on how to query a Lake Formation table using Redshift Spectrum, see 
               <a href="https://docs.aws.amazon.com/lake-formation/latest/dg/tut-query-redshift.html">Query the data in the data lake using Amazon Redshift Spectrum</a> in the <em>AWS Lake Formation Developer Guide</em>.</p></li></ul></div>
         <p>After the table is defined in Amazon Redshift, you can query the Lake Formation table and access only the rows and columns that are allowed by the data filter.</p>
         
         <p>For a detailed guide on how to set up row-level and cell-level security in Lake Formation, and then query using Redshift Spectrum, see 
            <a href="https://aws.amazon.com/blogs/big-data/use-amazon-redshift-spectrum-with-row-level-and-cell-level-security-policies-defined-in-aws-lake-formation/" rel="noopener noreferrer" target="_blank"><span>Use Amazon Redshift Spectrum with row-level and cell-level security policies defined in AWS Lake Formation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-spectrum-iam-policies.html">IAM policies for Amazon Redshift
            Spectrum</div><div id="next" class="next-link" accesskey="n" href="./c-spectrum-data-files.html">Creating data files for queries in Amazon Redshift
            Spectrum</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/spectrum-lake-formation.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/spectrum-lake-formation.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>