<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>STL_UNIQUE - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_STL_UNIQUE" /><meta name="default_state" content="r_STL_UNIQUE" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_UNIQUE.html" /><meta name="description" content="Analyzes execution steps that occur when a DISTINCT function is used in the SELECT list or when duplicates are removed in a UNION or INTERSECT query." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_UNIQUE.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_UNIQUE.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="STL_UNIQUE" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>STL_UNIQUE - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_STL_UNIQUE" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STL_UNIQUE.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STL_UNIQUE.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STL_UNIQUE.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "System tables and views reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_system-tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "System monitoring (provisioned only)",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_intro_system_views.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "STL views for logging",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_intro_STL_tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "STL_UNIQUE",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_intro_STL_tables.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_STL_UNIQUE" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#r_STL_UNIQUE-table-columns">Table columns</a><a href="#r_STL_UNIQUE-sample-queries">Sample queries</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_STL_UNIQUE">STL_UNIQUE</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Analyzes execution steps that occur when a DISTINCT function is used in the SELECT
            list or when duplicates are removed in a UNION or INTERSECT query.</p><p>STL_UNIQUE is visible to all users. Superusers can see all rows; regular users can see only their own data. For more information, see <a href="./cm_chap_system-tables.html#c_visibility-of-data">Visibility of data in system tables and
                views</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>STL_UNIQUE only contains queries run on main clusters. It doesn't contain queries run on concurrency scaling clusters. 
To access queries run on both main and concurrency scaling clusters, we recommend that you use the SYS monitoring view 
            <a href="./SYS_QUERY_DETAIL.html#SYS_QUERY_DETAIL.title">SYS_QUERY_DETAIL</a>
            . The data in the SYS monitoring view is formatted to be easier to use and understand.</p></div></div>
            <h2 id="r_STL_UNIQUE-table-columns">Table columns</h2>


            <div class="table-container"><div class="table-contents"><table id="w323aac69c17b9d119c11b3"><thead>
                        <tr>
                            <th>Column name </th>
                            <th>Data type </th>
                            <th>Description </th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">userid</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">ID of the user who generated the entry.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">query</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">Query ID. The query column can be used to join other system tables and views.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">slice</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">Number that identifies the slice where the query was running.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">segment</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">Number that identifies the query segment.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">step</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">Query step that ran.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">starttime</td>
                            <td tabindex="-1">timestamp</td>
                            <td tabindex="-1">Time in UTC that the query started. Total time includes queuing and execution. with 6 digits of precision for fractional seconds. For example: <code class="userinput">2009-06-12 11:29:19.131358</code>.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">endtime</td>
                            <td tabindex="-1">timestamp</td>
                            <td tabindex="-1">Time in UTC that the query finished. Total time includes queuing and execution. with 6 digits of precision for fractional seconds. For example: <code class="userinput">2009-06-12 11:29:19.131358</code>.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">tasknum</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">Number of the query task process that was assigned to run the step.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">rows</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">Total number of rows that were processed.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1"><code class="code">type</code></td>
                            <td tabindex="-1">character(6)</td>
                            <td tabindex="-1">The type of step. Valid values are: <div class="itemizedlist">
                                 
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>HASHED. Indicates that the step used grouped, unsorted
                                        aggregation.</p>
                                </li><li class="listitem">
                                    <p>PLAIN. Indicates that the step used ungrouped, scalar
                                        aggregation.</p>
                                </li><li class="listitem">
                                    <p>SORTED. Indicates that the step used grouped, sorted
                                        aggregation.</p>
                                </li></ul></div>
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">is_diskbased</td>
                            <td tabindex="-1">character(1)</td>
                            <td tabindex="-1">If true (t), the query was performed as a
                                disk-based operation. If false (f), the query was performed in
                                memory.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">slots</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">Total number of hash buckets.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">workmem</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">Total number of bytes in working memory that were
                                assigned to the step.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">max_buffers_used</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">Maximum number of buffers used in the hash table
                                before going to disk.</td>
                        </tr>

                        
                        <tr>
                            <td tabindex="-1">resizes</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">This information is for internal use only.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">occupied</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">This information is for internal use only.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">flushable</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">This information is for internal use only.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">used_unique_prefetching</td>
                            <td tabindex="-1">character(1)</td>
                            <td tabindex="-1">This information is for internal use only.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">bytes</td>
                            <td tabindex="-1">biginit</td>
                            <td tabindex="-1">The number of bytes of all the output rows for the step.</td>
                        </tr>
                    </table></div></div>
         
            <h2 id="r_STL_UNIQUE-sample-queries">Sample queries</h2>


            <p>Suppose you run the following query: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select distinct eventname
from event order by 1;        </code></pre>
            <p>Assuming the ID for the previous query is 6313, the following example shows the
                number of rows produced by the unique step for each slice in segments 0 and 1. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select query, slice, segment, step, datediff(msec, starttime, endtime) as msec, tasknum, rows 
from stl_unique where query = 6313
order by query desc, slice, segment, step;</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""> query | slice | segment | step | msec | tasknum | rows
-------+-------+---------+------+------+---------+------
  6313 |     0 |       0 |    2 |    0 |      22 |  550
  6313 |     0 |       1 |    1 |  256 |      20 |  145
  6313 |     1 |       0 |    2 |    1 |      23 |  540
  6313 |     1 |       1 |    1 |   42 |      21 |  127
  6313 |     2 |       0 |    2 |    1 |      22 |  540
  6313 |     2 |       1 |    1 |  255 |      20 |  158
  6313 |     3 |       0 |    2 |    1 |      23 |  542
  6313 |     3 |       1 |    1 |   38 |      21 |  146
(8 rows)</code></pre>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_STL_UNDONE.html">STL_UNDONE</div><div id="next" class="next-link" accesskey="n" href="./r_STL_UNLOAD_LOG.html">STL_UNLOAD_LOG</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STL_UNIQUE.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STL_UNIQUE.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>