<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Sharing write permissions to data across accounts (preview) - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="within-account-multi-warehouse-consumer-associate" /><meta name="default_state" content="within-account-multi-warehouse-consumer-associate" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" /><meta name="description" content="If you haven't created a datashare yet on the PREVIEW_2023 track, go to Sharing write access to data (Preview) to get started." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Sharing write permissions to data across accounts (preview)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Sharing write permissions to data across accounts (preview) - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#within-account-multi-warehouse-consumer-associate" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Sharing data in Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/datashare-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Managing data sharing tasks",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/getting-started-datashare.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Managing data sharing using the SQL interface",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/getting-started-datashare-sql.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Sharing write access to data (Preview)",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Sharing write permissions to data across accounts (preview)",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#within-account-multi-warehouse-consumer-associate" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#within-account-multi-warehouse-consumer-associate">Associating shared data as the consumer data security administrator (preview)</a><a href="#within-account-multi-warehouse-producer-authorize">Authorizing datashares for writes as the producer security administrator (preview)</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="within-account-multi-warehouse-consumer-associate">Sharing write permissions to data across accounts (preview)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="table-container"><div class="table-contents"><table id="w323aac54c21b7b9c19b3">
      <tr>
        <td tabindex="-1"><em><b>This is prerelease documentation for the multi-data warehouse writes through data sharing feature for 
        Amazon Redshift, which is available in public preview in the PREVIEW_2023 track. The documentation and the feature are both subject to change. We recommend that you use this feature 
        only with test clusters, and not in production environments.
        For preview terms and conditions, see <em>Beta Service Participation</em> in <a href="https://aws.amazon.com/service-terms/" rel="noopener noreferrer" target="_blank"><span>AWS Service Terms</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
        </b></em>
        </td>
      </tr>
    </table></div></div><p>If you haven't created a datashare yet on the PREVIEW_2023 track, go to <a href="https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html">Sharing write access to data (Preview)</a> to get started.</p>
                  <h2 id="within-account-multi-warehouse-consumer-associate">Associating shared data as the consumer data security administrator (preview)</h2> 
                  <div class="table-container"><div class="table-contents"><table id="w323aac54c21b7b9c19b7b3">
      <tr>
        <td tabindex="-1"><em><b>This is prerelease documentation for the multi-data warehouse writes through data sharing feature for 
        Amazon Redshift, which is available in public preview in the PREVIEW_2023 track. The documentation and the feature are both subject to change. We recommend that you use this feature 
        only with test clusters, and not in production environments.
        For preview terms and conditions, see <em>Beta Service Participation</em> in <a href="https://aws.amazon.com/service-terms/" rel="noopener noreferrer" target="_blank"><span>AWS Service Terms</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
        </b></em>
        </td>
      </tr>
    </table></div></div> 
                  <p>If you haven't created a datashare yet on the PREVIEW_2023 track, go to <a href="https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html">Sharing write access to data (Preview)</a> to get started.</p>
                  
                  <p>Prerequisites: The steps in this section are performed after the producer administrator grants specific actions on the shared database objects and, if the 
                     datashare is being shared with another account, the producer security administrator authorizes access.</p>
                  <p>The consumer security administrator determines the following:</p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem"><p>Whether or not all namespaces in an account, namespaces in specific regions in the account, or specific namespaces have access to the datashare.</p></li><li class="listitem"><p>If namespaces have access to the datashare, whether or not those namespace have write permissions.</p></li></ul></div>
                  
                  <p>The consumer security administrator can associate the datashare via the console, the CLI, or via API.  If by CLI, the administrator uses the following command:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">associate-data-share-consumer
--data-share-arn &lt;value&gt;
--consumer-identifier &lt;value&gt;
[--allow-writes | --no-allow-writes]</code></pre>
                  <p>For more information about the command, see <a href="https://docs.aws.amazon.com/cli/latest/reference/redshift/associate-data-share-consumer.html">associate-data-share-consumer</a>.</p>
                  
                  <p>The consumer security administrator must explicitly set <code class="code">allow-writes</code> to true when 
                     associating a datashare with a namespace, to allow use of INSERT and UPDATE commands. If they don't, the users can perform 
                     only read operations, such as SELECT, USAGE, or EXECUTE privileges.</p>
                  
                  <p>You can change the association of a namespace for a datashare by calling <code class="code">associate-data-share-consumer</code> again, with a different value. The old 
                     association is overwritten by the new association, so if you originally associate and set <code class="code">allow-writes</code>, but associate and specify <code class="code">no-allow-writes</code>, or simply 
                     do not specify a value, the consumer will have their write permissions revoked.</p>
                  
                
                  <h2 id="within-account-multi-warehouse-producer-authorize">Authorizing datashares for writes as the producer security administrator (preview)</h2> 
                  <div class="table-container"><div class="table-contents"><table id="w323aac54c21b7b9c19b9b3">
      <tr>
        <td tabindex="-1"><em><b>This is prerelease documentation for the multi-data warehouse writes through data sharing feature for 
        Amazon Redshift, which is available in public preview in the PREVIEW_2023 track. The documentation and the feature are both subject to change. We recommend that you use this feature 
        only with test clusters, and not in production environments.
        For preview terms and conditions, see <em>Beta Service Participation</em> in <a href="https://aws.amazon.com/service-terms/" rel="noopener noreferrer" target="_blank"><span>AWS Service Terms</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
        </b></em>
        </td>
      </tr>
    </table></div></div> 
                  <p>If you haven't created a datashare yet on the PREVIEW_2023 track, go to <a href="https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html">Sharing write access to data (Preview)</a> to get started.</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This only applies when the datashare is shared between accounts.</p></div></div>
                  <p>The producer security administrator determines the following:</p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem"><p>Whether or not another account can have access to the datashare.</p></li><li class="listitem"><p>If an account has access to the datashare, whether or not that account has write permissions.</p></li></ul></div>
                  
                  
                  <p>The following IAM permissions are required to authorize a datashare: </p>
                  <p><b>redshift:AuthorizeDataShare</b></p>
                  
                  <p>You can authorize usage and writes using either a CLI call or with the API:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">authorize-data-share
--data-share-arn &lt;value&gt;
--consumer-identifier &lt;value&gt;
[--allow-writes | --no-allow-writes]</code></pre>
                  <p>For more information about the command, see <a href="https://docs.aws.amazon.com/cli/latest/reference/redshift/authorize-data-share.html">authorize-data-share</a>.</p>
                  <p>The consumer identifier can be either:</p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem"><p>A twelve digit AWS account ID.</p></li><li class="listitem"><p>The namespace identifier ARN.</p></li></ul></div>
                  
                  <p>Note that write permissions aren’t granted at the authorizing step. Authorizing a datashare for writes just allows 
                     the account to have write permissions that were granted by the datashare administrator. If an administrator does not allow writes, the only permissions available 
                     to the specific consumer are SELECT, USAGE, and EXECUTE.</p>
                  <p>You can change the authorization of a datashare consumer by calling <code class="code">authorize-data-share</code> again, but with a different value. The old authorization is overwritten 
                     by the new authorization. So if you originally authorize and allow writes, but re-authorize and specify <code class="code">no-allow-writes</code> or simply do not specify a value, the consumer 
                     will have their write permissions revoked.</p>
               <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./multi-warehouse-writes-data-sharing.html">Sharing write access to data (Preview)</div><div id="next" class="next-link" accesskey="n" href="./within-account-multi-warehouse-regions.html">Regions where data sharing is available (preview)</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/within-account-multi-warehouse-consumer-associate.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>