<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using the SVL_QUERY_SUMMARY view - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-SVL-Query-Summary" /><meta name="default_state" content="using-SVL-Query-Summary" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="description" content="To analyze query summary information by stream, do the following:" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Using the SVL_QUERY_SUMMARY view" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Using the SVL_QUERY_SUMMARY view - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#using-SVL-Query-Summary" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Tuning query performance",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-optimizing-query-performance.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Analyzing and improving queries",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-query-tuning.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Analyzing the query summary",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-analyzing-the-query-summary.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Using the SVL_QUERY_SUMMARY view",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-analyzing-the-query-summary.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#using-SVL-Query-Summary" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-SVL-Query-Summary">Using the SVL_QUERY_SUMMARY view</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>To analyze query summary information by stream, do the following:</p><div class="orderedlist">
                
                
                
                
                
                
                
                
            <ol><li>
                  <p>Run the following query to determine your query ID:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select query, elapsed, substring
from svl_qlog
order by query
desc limit 5;                     </code></pre>
                  <p>Examine the truncated query text in the <code class="code">substring</code> field to
                     determine which <code class="code">query</code> value represents your query. If you have run
                     the query more than once, use the <code class="code">query</code> value from the row with
                     the lower <code class="code">elapsed</code> value. That is the row for the compiled version.
                     If you have been running many queries, you can raise the value used by the
                     LIMIT clause used to make sure that your query is included.</p>
               </li><li>
                  <p>Select rows from SVL_QUERY_SUMMARY for your query. Order the results by
                     stream, segment, and step:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from svl_query_summary where query = MyQueryID order by stm, seg, step;</code></pre>
                  <div class="mediaobject">
                      
                        <img src="/images/redshift/latest/dg/images/svl_query_summary_results.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                      
                  </div>
               </li><li>
                  <p>Map the steps to the operations in the query plan using the information in
                        <a href="./query-plan-summary-map.html">Mapping the query plan to the query summary</a>. They should have approximately the
                     same values for rows and bytes (rows * width from the query plan). If they
                     don’t, see <a href="./query-performance-improvement-opportunities.html#table-statistics-missing-or-out-of-date">Table statistics missing or out of
                  date</a> for recommended
                     solutions.</p>
               </li><li>
                  <p>See if the <code class="code">is_diskbased</code> field has a value of <code class="code">t</code>
                     (true) for any step. Hashes, aggregates, and sorts are the operators that are
                     likely to write data to disk if the system doesn't have enough memory allocated
                     for query processing.</p>
                  <p>If <code class="code">is_diskbased</code> is true, see <a href="./query-performance-improvement-opportunities.html#insufficient-memory-allocated-to-the-query">Insufficient memory allocated to the
                  query</a> for recommended
                     solutions.</p>
               </li><li>
                  <p>Review the <code class="code">label</code> field values and see if there is an
                     AGG-DIST-AGG sequence anywhere in the steps. Its presence indicates two-step
                     aggregation, which is expensive. To fix this, change the GROUP BY clause to use
                     the distribution key (the first key, if there are multiple ones).</p>
               </li><li>
                  <p>Review the <code class="code">maxtime</code> value for each segment (it is the same
                     across all steps in the segment). Identify the segment with the highest
                        <code class="code">maxtime</code> value and review the steps in this segment for the
                     following operators.</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>A high <code class="code">maxtime</code> value doesn't necessarily indicate a problem
                        with the segment. Despite a high value, the segment might not have taken a
                        long time to process. All segments in a stream start getting timed in
                        unison. However, some downstream segments might not be able to run until
                        they get data from upstream ones. This effect might make them seem to have
                        taken a long time because their <code class="code">maxtime</code> value includes both
                        their waiting time and their processing time. </p></div></div>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p><b>BCAST or DIST</b>: In these cases, the high
                              <code class="code">maxtime</code> value might be the result of redistributing a
                           large number of rows. For recommended solutions, see <a href="./query-performance-improvement-opportunities.html#suboptimal-data-distribution">Suboptimal data distribution</a>.</p>
                     </li><li class="listitem">
                        <p><b>HJOIN (hash join)</b>: If the step in question has a
                           very high value in the <code class="code">rows</code> field compared to the
                              <code class="code">rows</code> value in the final RETURN step in the query, see
                              <a href="./query-performance-improvement-opportunities.html#hash-join">Hash join</a> for recommended
                           solutions.</p>
                     </li><li class="listitem">
                        <p><b>SCAN/SORT</b>: Look for a SCAN, SORT, SCAN, MERGE
                           sequence of steps just before a join step. This pattern indicates that unsorted data is being scanned,
                           sorted, and then merged with the sorted area of the table.</p>
                        <p>See if the rows value for the SCAN step has a very high value compared
                           to the rows value in the final RETURN step in the query. This pattern
                           indicates that the execution engine is scanning rows that are later
                           discarded, which is inefficient. For recommended solutions, see <a href="./query-performance-improvement-opportunities.html#insufficiently-restrictive-predicate">Insufficiently restrictive predicate</a>. </p>
                        <p>If the <code class="code">maxtime</code> value for the SCAN step is high, see <a href="./query-performance-improvement-opportunities.html#suboptimal-WHERE-clause">Suboptimal WHERE clause</a> for recommended
                           solutions.</p>
                        <p>If the <code class="code">rows</code> value for the SORT step is not zero, see
                              <a href="./query-performance-improvement-opportunities.html#unsorted-or-mis-sorted-rows">Unsorted or missorted rows</a> for recommended
                           solutions.</p>
                     </li></ul></div>
               </li><li>
                  <p>Review the <code class="code">rows</code> and <code class="code">bytes</code> values for the 5–10
                     steps that precede the final RETURN step to get an idea of the amount of data
                     that is returned to the client. This process can be a bit of an art.</p>
                  <p>For example, in the following query summary, you can see that the third
                     PROJECT step provides a <code class="code">rows</code> value but not a <code class="code">bytes</code>
                     value. By looking through the preceding steps for one with the same
                        <code class="code">rows</code> value, you find the SCAN step that provides both rows and
                     bytes information:</p>
                  <div class="mediaobject">
                      
                        <img src="/images/redshift/latest/dg/images/rows_and_bytes.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                      
                  </div>
                  <p>If you are returning an unusually large volume of data, see <a href="./query-performance-improvement-opportunities.html#very-large-result-set">Very large result set</a> for
                     recommended solutions.</p>
               </li><li>
                  <p>See if the <code class="code">bytes</code> value is high relative to the
                        <code class="code">rows</code> value for any step, in comparison to other steps. This
                     pattern can indicate that you are selecting a lot of columns. For recommended
                     solutions, see <a href="./query-performance-improvement-opportunities.html#large-SELECT-list">Large SELECT list</a>.</p>
               </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-analyzing-the-query-summary.html">Analyzing the query summary</div><div id="next" class="next-link" accesskey="n" href="./using-SVL-Query-Report.html">Using the SVL_QUERY_REPORT view</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/using-SVL-Query-Summary.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/using-SVL-Query-Summary.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>