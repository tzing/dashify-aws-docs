<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE PROCEDURE - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_PROCEDURE" /><meta name="default_state" content="r_CREATE_PROCEDURE" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_PROCEDURE.html" /><meta name="description" content="Creates a new stored procedure or replaces an existing procedure for the current database." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_PROCEDURE.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_PROCEDURE.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="CREATE PROCEDURE" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE PROCEDURE - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_CREATE_PROCEDURE" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_PROCEDURE.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_PROCEDURE.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_PROCEDURE.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL commands",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE PROCEDURE",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_CREATE_PROCEDURE" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#r_CREATE_PROCEDURE-privileges">Required privileges</a><a href="#r_CREATE_PROCEDURE-synopsis">Syntax</a><a href="#r_CREATE_PROCEDURE-parameters">Parameters</a><a href="#r_CREATE_PROCEDURE-usage">Usage notes</a><a href="#r_CREATE_PROCEDURE-examples">Examples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_CREATE_PROCEDURE">CREATE PROCEDURE</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Creates a new stored procedure or replaces an existing procedure for the current
         database.</p><p>For more information and examples, see <a href="./stored-procedure-overview.html">Creating stored procedures in Amazon Redshift</a>.</p>
         <h2 id="r_CREATE_PROCEDURE-privileges">Required privileges</h2>
         <p>Following are required privileges for CREATE PROCEDURE:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>For CREATE PROCEDURE:</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>Superuser</p>
                  </li><li class="listitem">
                     <p>Users with the CREATE [ OR REPLACE ] PROCEDURE privilege</p>
                  </li></ul></div>
            </li><li class="listitem">
               <p>For REPLACE PROCEDURE:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>Superuser</p>
                  </li><li class="listitem">
                     <p>Users with the CREATE [ OR REPLACE ] PROCEDURE privilege</p>
                  </li><li class="listitem">
                     <p>Procedure owner</p>
                  </li></ul></div>
            </li></ul></div>
       
         <h2 id="r_CREATE_PROCEDURE-synopsis">Syntax</h2>

         
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE [ OR REPLACE ] PROCEDURE sp_procedure_name  
  ( [ [ argname ] [ argmode ] argtype [, ...] ] )
[ NONATOMIC ]
AS $$
  procedure_body
$$ LANGUAGE plpgsql
[ <span>{</span> SECURITY INVOKER | SECURITY DEFINER } ]
[ SET configuration_parameter <span>{</span> TO value | = value } ]
</code></pre>
       
         <h2 id="r_CREATE_PROCEDURE-parameters">Parameters</h2>
         <div class="variablelist">
             
             
             
             
             
             
             
             
             
         <dl>
               <dt><span class="term"> OR REPLACE </span></dt>
               <dd>
                  <p>A clause that specifies that if a procedure with the same name and input
                     argument data types, or signature, as this one already exists, the existing
                     procedure is replaced. You can only replace a procedure with a new procedure
                     that defines an identical set of data types. You must be a superuser or the
                     owner to replace a procedure.</p>
                  <p>If you define a procedure with the same name as an existing procedure, but a
                     different signature, you create a new procedure. In other words, the procedure
                     name is overloaded. For more information, see <a href="./stored-procedure-naming.html#stored-procedure-overloading-name">Overloading procedure names</a>. </p>
               </dd>
             
               <dt><span class="term">
                  <em>sp_procedure_name</em>
               </span></dt>
               <dd>
                  <p>The name of the procedure. If you specify a schema name (such as
                        <code class="userinput">myschema.myprocedure</code>), the procedure is created in
                     the specified schema. Otherwise, the procedure is created in the current
                     schema. For more information about valid names, see <a href="./r_names.html">Names and identifiers</a>.
                     </p>
                  <p>We recommend that you prefix all stored procedure names with
                        <code class="code">sp_</code>. Amazon Redshift reserves the <code class="code">sp_</code> prefix for stored
                     procedure names. By using the <code class="code">sp_</code> prefix, you ensure that your
                     stored procedure name doesn't conflict with any existing or future Amazon Redshift
                     built-in stored procedure or function names. For more information, see <a href="./stored-procedure-naming.html">Naming stored procedures</a>.</p>
                  <p>You can define more than one procedure with the same name if the data types
                     for the input arguments, or signatures, are different. In other words, in this
                     case the procedure name is overloaded. For more information, see <a href="./stored-procedure-naming.html#stored-procedure-overloading-name">Overloading procedure names</a></p>
               </dd>
             
               <dt><span class="term"><em>[argname] [ argmode] argtype</em>
               </span></dt>
               <dd>
                  <p>A list of argument names, argument modes, and data types. Only the data type
                     is required. Name and mode are optional and their position can be
                     switched.</p>
                  <p>The argument mode can be IN, OUT, or INOUT. The default is IN.</p>
                  <p>You can use OUT and INOUT arguments to return one or more values from a
                     procedure call. When there are OUT or INOUT arguments, the procedure call
                     returns one result row containing <em>n</em> columns,
                     where <em>n</em> is the total number of OUT or INOUT
                     arguments.</p>
                  <p>INOUT arguments are input and output arguments at the same time. <em>Input arguments</em> include both IN and INOUT
                     arguments, and <em>output arguments</em> include both
                     OUT and INOUT arguments.</p>
                  
                  <p>OUT arguments aren't specified as part of the CALL statement. Specify
                     INOUT arguments in the stored procedure CALL statement. INOUT arguments can be
                     useful when passing and returning values from a nested call, and also when
                     returning a <code class="code">refcursor</code>. For more information on
                        <code class="code">refcursor</code> types, see <a href="./c_PLpgSQL-statements.html#r_PLpgSQL-cursors">Cursors</a>.</p>
                  <p>The argument data types can be any standard Amazon Redshift data type. In addition, an
                     argument data type can be <code class="code">refcursor</code>.</p>
                  <p>You can specify a maximum of 32 input arguments and 32 output arguments.
                  </p>
               </dd>
             
               <dt><span class="term">AS $$ <em>procedure_body</em> $$ </span></dt>
               <dd>
                  <p>A construct that encloses the procedure to be run. The literal keywords AS
                     $$ and $$ are required.</p>
                  <p>Amazon Redshift requires you to enclose the statement in your procedure by using a
                     format called dollar quoting. Anything within the enclosure is passed exactly
                     as is. You don't need to escape any special characters because the
                     contents of the string are written literally.</p>
                  <p>With <em>dollar quoting, </em>you use a pair of
                     dollar signs ($$) to signify the start and the end of the statement to run, as
                     shown in the following example.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">$$ my statement $$</code></pre>
                  <p>Optionally, between the dollar signs in each pair, you can specify a string
                     to help identify the statement. The string that you use must be the same in
                     both the start and the end of the enclosure pairs. This string is
                     case-sensitive, and it follows the same constraints as an unquoted identifier
                     except that it can't contain dollar signs. The following example uses the
                     string test.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">$test$ my statement $test$</code></pre>
                  <p>This syntax is also useful for nested dollar quoting. For more information
                     about dollar quoting, see "Dollar-quoted String Constants" under
                        <a href="https://www.postgresql.org/docs/9.0/sql-syntax-lexical.html" rel="noopener noreferrer" target="_blank"><span>Lexical Structure</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the PostgreSQL documentation.</p>
               </dd>
             
               <dt><span class="term">
                  <em>procedure_body</em>
               </span></dt>
               <dd>
                  <p>A set of valid PL/pgSQL statements. PL/pgSQL statements augment SQL commands
                     with procedural constructs, including looping and conditional expressions, to
                     control logical flow. Most SQL commands can be used in the procedure body,
                     including data modification language (DML) such as COPY, UNLOAD and INSERT, and
                     data definition language (DDL) such as CREATE TABLE. For more information, see
                        <a href="./c_pl_pgSQL_reference.html">PL/pgSQL language reference</a>.
                     
                  </p>
               </dd>
             
               <dt><span class="term">LANGUAGE <em>plpgsql</em></span></dt>
               <dd>
                  <p>A language value. Specify <code class="code">plpgsql</code>. You must have permission for
                     usage on language to use <code class="code">plpgsql</code>. For more information, see <a href="./r_GRANT.html">GRANT</a>. </p>
               </dd>
             
                            
               <dt><span class="term">NONATOMIC</span></dt>
               <dd>
                  
                  <p>Creates the stored procedure in a nonatomic transaction mode.                    
                     NONATOMIC mode automatically commits the statements inside the procedure. 
                     Additionally, when an error occurs inside the NONATOMIC procedure, the error is not re-thrown if it is handled by an exception block.
                     For more information, see <a href="./stored-procedure-transaction-management.html">Managing transactions</a>
                     and <a href="./c_PLpgSQL-statements.html#r_PLpgSQL-messages-errors">RAISE</a>.</p>
                  <p>When you define a stored procedure as <code class="code">NONATOMIC</code>, consider the following:</p>
                  <div class="itemizedlist">
                      
                      
                     
                      
                     
                  <ul class="itemizedlist"><li class="listitem"><p>When you nest stored procedure calls, all the procedures must be created in the same transaction mode.</p></li><li class="listitem"><p>The <code class="code">SECURITY DEFINER</code> option and <code class="code">SET configuration_parameter</code> option are not supported when creating a procedure in NONATOMIC mode.</p></li><li class="listitem"><p>Any cursor that is opened (explicitly or implicitly) is closed automatically when an implicit commit is processed. 
                        Therefore, you must open an explicit transaction before beginning a cursor loop to ensure that any SQL within the loop's iteration is not implicitly committed.</p></li></ul></div>
               </dd>
               
             
               <dt><span class="term">SECURITY INVOKER | SECURITY DEFINER</span></dt>
               <dd>
                  <p>The <code class="code">SECURITY DEFINER</code> option is not supported when <code class="code">NONATOMIC</code> is specified.</p>
                  <p>The security mode for the procedure determines the procedure's access
                     privileges at runtime. The procedure must have permission to access the
                     underlying database objects. </p>
                  <p>For SECURITY INVOKER mode, the procedure uses the privileges of the user
                     calling the procedure. The user must have explicit permissions on the
                     underlying database objects. The default is SECURITY INVOKER.</p>
                  <p>For SECURITY DEFINER mode, the procedure uses the privileges of the procedure
                     owner. The procedure owner is defined as the user that owns the procedure at run time,
                     not necessarily the user that initially
                     defined the procedure. The user calling the procedure needs
                     execute privilege on the procedure, but doesn't need any privileges on the
                     underlying objects. </p>
               </dd>
             
               <dt><span class="term">SET configuration_parameter <span>{</span> TO value | = value }</span></dt>
               <dd>
                  <p>These options are not supported when <code class="code">NONATOMIC</code> is specified.</p>
                  <p>The SET clause causes the specified <code class="code">configuration_parameter</code> to
                     be set to the specified value when the procedure is entered. This clause then
                     restores <code class="code">configuration_parameter</code> to its earlier value when the
                     procedure exits. </p>
               </dd>
            </dl></div>
       
         <h2 id="r_CREATE_PROCEDURE-usage">Usage notes</h2>
         <p>If a stored procedure was created using the SECURITY DEFINER option, when invoking the CURRENT_USER function from within the stored procedure, Amazon Redshift returns the user name of the owner of the stored procedure.</p>
       
         <h2 id="r_CREATE_PROCEDURE-examples">Examples</h2>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If when running these examples you encounter an error similar to:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ERROR: 42601: [Amazon](500310) unterminated dollar-quoted string at or near "$$</code></pre><p>See <a href="./stored-procedure-create.html">Overview of stored procedures in Amazon Redshift</a>. </p></div></div>
         <p>The following example creates a procedure with two input parameters.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE OR REPLACE PROCEDURE test_sp1(f1 int, f2 varchar(20))
AS $$
DECLARE
  min_val int;
BEGIN
  DROP TABLE IF EXISTS tmp_tbl;
  CREATE TEMP TABLE tmp_tbl(id int);
  INSERT INTO tmp_tbl values (f1),(10001),(10002);
  SELECT INTO min_val MIN(id) FROM tmp_tbl;
  RAISE INFO 'min_val = %, f2 = %', min_val, f2;
END;
$$ LANGUAGE plpgsql;
</code></pre>
         
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
            When you write stored procedures, we recommend a best practice for securing sensitive values:
         </p><p>
               Don't hard code any sensitive information in stored procedure logic. For example,
               don't assign a user password in a CREATE USER statement in the body of a stored
               procedure. This poses a security risk, because hard-coded values can be recorded as schema metadata in catalog
               tables. Instead, pass sensitive values, such as passwords, as arguments to the stored procedure, by means of parameters.
            </p><p>For more information about stored procedures,
               see <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_PROCEDURE.html">CREATE PROCEDURE</a>
               and <a href="https://docs.aws.amazon.com/redshift/latest/dg/stored-procedure-overview.html">Creating stored procedures in Amazon Redshift</a>. For more
               information about catalog tables, see <a href="https://docs.aws.amazon.com/redshift/latest/dg/c_intro_catalog_views.html">System catalog tables</a>.</p></div></div>

         <p>The following example creates a procedure with one IN parameter, one OUT parameter,
            and one INOUT parameter.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE OR REPLACE PROCEDURE test_sp2(f1 IN int, f2 INOUT varchar(256), out_var OUT varchar(256))
AS $$
DECLARE
  loop_var int;
BEGIN
  IF f1 is null OR f2 is null THEN
    RAISE EXCEPTION 'input cannot be null';
  END IF;
  DROP TABLE if exists my_etl;
  CREATE TEMP TABLE my_etl(a int, b varchar);
    FOR loop_var IN 1..f1 LOOP
        insert into my_etl values (loop_var, f2);
        f2 := f2 || '+' || f2;
    END LOOP;
  SELECT INTO out_var count(*) from my_etl;
END;
$$ LANGUAGE plpgsql;
</code></pre>
         
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_create_model_use_cases.html">Use cases</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_RLS_POLICY.html">CREATE RLS POLICY</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_PROCEDURE.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_PROCEDURE.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>