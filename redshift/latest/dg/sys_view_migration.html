<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Migrating to SYS monitoring views - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="sys_view_migration" /><meta name="default_state" content="sys_view_migration" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/sys_view_migration.html" /><meta name="description" content="SYS views consolidate and streamline the content of multiple non-SYS system views, giving you the information needed to monitor Amazon Redshift." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/sys_view_migration.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/sys_view_migration.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/sys_view_migration.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/sys_view_migration.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/sys_view_migration.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/sys_view_migration.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/sys_view_migration.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/sys_view_migration.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/sys_view_migration.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/sys_view_migration.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/sys_view_migration.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/sys_view_migration.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/sys_view_migration.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/sys_view_migration.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/sys_view_migration.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/sys_view_migration.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/sys_view_migration.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/sys_view_migration.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/sys_view_migration.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/sys_view_migration.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/sys_view_migration.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/sys_view_migration.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Migrating to SYS monitoring views" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Migrating to SYS monitoring views - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#sys_view_migration" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/sys_view_migration.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/sys_view_migration.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/sys_view_migration.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "System tables and views reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_system-tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Migrating to SYS monitoring views",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_system-tables.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#sys_view_migration" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#sys_view_migration-use_cases">Use cases for migrating to SYS monitoring views</a><a href="#sys_view_migration-query-id">Improving query identifier tracking using the SYS monitoring views</a><a href="#sys_view_migration-SYS_QUERY_HISTORY">SYS_QUERY_HISTORY</a><a href="#sys_view_migration-SYS_QUERY_DETAIL">SYS_QUERY_DETAIL</a><a href="#sys_view_migration-SYS_RESTORE_LOG">SYS_RESTORE_LOG</a><a href="#sys_view_migration-SYS_RESTORE_STATE">SYS_RESTORE_STATE</a><a href="#sys_view_migration-SYS_TRANSACTION_HISTORY">SYS_TRANSACTION_HISTORY</a><a href="#sys_view_migration-SYS_QUERY_TEXT">SYS_QUERY_TEXT</a><a href="#sys_view_migration-SYS_CONNECTION_LOG">SYS_CONNECTION_LOG</a><a href="#sys_view_migration-SYS_SESSION_HISTORY">SYS_SESSION_HISTORY</a><a href="#sys_view_migration-SYS_LOAD_DETAIL">SYS_LOAD_DETAIL</a><a href="#sys_view_migration-SYS_LOAD_HISTORY">SYS_LOAD_HISTORY</a><a href="#sys_view_migration-SYS_LOAD_ERROR_DETAIL">SYS_LOAD_ERROR_DETAIL</a><a href="#sys_view_migration-SYS_UNLOAD_HISTORY">SYS_UNLOAD_HISTORY</a><a href="#sys_view_migration-SYS_UNLOAD_DETAIL">SYS_UNLOAD_DETAIL</a><a href="#sys_view_migration-SYS_COPY_REPLACEMENTS">SYS_COPY_REPLACEMENTS</a><a href="#sys_view_migration-SYS_DATASHARE_USAGE_CONSUMER">SYS_DATASHARE_USAGE_CONSUMER</a><a href="#sys_view_migration-SYS_DATASHARE_USAGE_PRODUCER">SYS_DATASHARE_USAGE_PRODUCER</a><a href="#sys_view_migration-SYS_DATASHARE_CROSS_REGION_USAGE">SYS_DATASHARE_CROSS_REGION_USAGE</a><a href="#sys_view_migration-SYS_DATASHARE_CHANGE_LOG">SYS_DATASHARE_CHANGE_LOG</a><a href="#sys_view_migration-SYS_EXTERNAL_QUERY_DETAIL">SYS_EXTERNAL_QUERY_DETAIL</a><a href="#sys_view_migration-SYS_EXTERNAL_QUERY_ERROR">SYS_EXTERNAL_QUERY_ERROR</a><a href="#sys_view_migration-SYS_VACUUM_HISTORY">SYS_VACUUM_HISTORY</a><a href="#sys_view_migration-SYS_ANALYZE_HISTORY">SYS_ANALYZE_HISTORY</a><a href="#sys_view_migration-SYS_ANALYZE_COMPRESSION_HISTORY">SYS_ANALYZE_COMPRESSION_HISTORY</a><a href="#sys_view_migration-SYS_MV_REFRESH_HISTORY">SYS_MV_REFRESH_HISTORY</a><a href="#sys_view_migration-SYS_MV_STATE">SYS_MV_STATE</a><a href="#sys_view_migration-SYS_PROCEDURE_CALL">SYS_PROCEDURE_CALL</a><a href="#sys_view_migration-SYS_PROCEDURE_MESSAGES">SYS_PROCEDURE_MESSAGES</a><a href="#sys_view_migration-SYS_UDF_LOG">SYS_UDF_LOG</a><a href="#sys_view_migration-SYS_USERLOG">SYS_USERLOG</a><a href="#sys_view_migration-SYS_SCHEMA_QUOTA_VIOLATIONS">SYS_SCHEMA_QUOTA_VIOLATIONS</a><a href="#sys_view_migration-SYS_SPATIAL_SIMPLIFY">SYS_SPATIAL_SIMPLIFY</a><a href="#sys_view_migration-examples">Example</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="sys_view_migration">Migrating to SYS monitoring views</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>
        When you migrate your Amazon Redshift provisioned cluster to Amazon Redshift Serverless, your monitoring or diagnostic queries might reference
        system views that are only available on provisioned clusters.
        You can update your queries to use the SYS monitoring views. This page provides provisioned to SYS view mappings for you to reference when updating
        your queries.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#sys_view_migration-use_cases">Use cases for migrating to SYS monitoring views</a></li><li><a href="#sys_view_migration-query-id">Improving query identifier tracking using the SYS monitoring views</a></li><li><a href="#sys_view_migration-SYS_QUERY_HISTORY">SYS_QUERY_HISTORY</a></li><li><a href="#sys_view_migration-SYS_QUERY_DETAIL">SYS_QUERY_DETAIL</a></li><li><a href="#sys_view_migration-SYS_RESTORE_LOG">SYS_RESTORE_LOG</a></li><li><a href="#sys_view_migration-SYS_RESTORE_STATE">SYS_RESTORE_STATE</a></li><li><a href="#sys_view_migration-SYS_TRANSACTION_HISTORY">SYS_TRANSACTION_HISTORY</a></li><li><a href="#sys_view_migration-SYS_QUERY_TEXT">SYS_QUERY_TEXT</a></li><li><a href="#sys_view_migration-SYS_CONNECTION_LOG">SYS_CONNECTION_LOG</a></li><li><a href="#sys_view_migration-SYS_SESSION_HISTORY">SYS_SESSION_HISTORY</a></li><li><a href="#sys_view_migration-SYS_LOAD_DETAIL">SYS_LOAD_DETAIL</a></li><li><a href="#sys_view_migration-SYS_LOAD_HISTORY">SYS_LOAD_HISTORY</a></li><li><a href="#sys_view_migration-SYS_LOAD_ERROR_DETAIL">SYS_LOAD_ERROR_DETAIL</a></li><li><a href="#sys_view_migration-SYS_UNLOAD_HISTORY">SYS_UNLOAD_HISTORY</a></li><li><a href="#sys_view_migration-SYS_UNLOAD_DETAIL">SYS_UNLOAD_DETAIL</a></li><li><a href="#sys_view_migration-SYS_COPY_REPLACEMENTS">SYS_COPY_REPLACEMENTS</a></li><li><a href="#sys_view_migration-SYS_DATASHARE_USAGE_CONSUMER">SYS_DATASHARE_USAGE_CONSUMER</a></li><li><a href="#sys_view_migration-SYS_DATASHARE_USAGE_PRODUCER">SYS_DATASHARE_USAGE_PRODUCER</a></li><li><a href="#sys_view_migration-SYS_DATASHARE_CROSS_REGION_USAGE">SYS_DATASHARE_CROSS_REGION_USAGE</a></li><li><a href="#sys_view_migration-SYS_DATASHARE_CHANGE_LOG">SYS_DATASHARE_CHANGE_LOG</a></li><li><a href="#sys_view_migration-SYS_EXTERNAL_QUERY_DETAIL">SYS_EXTERNAL_QUERY_DETAIL</a></li><li><a href="#sys_view_migration-SYS_EXTERNAL_QUERY_ERROR">SYS_EXTERNAL_QUERY_ERROR</a></li><li><a href="#sys_view_migration-SYS_VACUUM_HISTORY">SYS_VACUUM_HISTORY</a></li><li><a href="#sys_view_migration-SYS_ANALYZE_HISTORY">SYS_ANALYZE_HISTORY</a></li><li><a href="#sys_view_migration-SYS_ANALYZE_COMPRESSION_HISTORY">SYS_ANALYZE_COMPRESSION_HISTORY</a></li><li><a href="#sys_view_migration-SYS_MV_REFRESH_HISTORY">SYS_MV_REFRESH_HISTORY</a></li><li><a href="#sys_view_migration-SYS_MV_STATE">SYS_MV_STATE</a></li><li><a href="#sys_view_migration-SYS_PROCEDURE_CALL">SYS_PROCEDURE_CALL</a></li><li><a href="#sys_view_migration-SYS_PROCEDURE_MESSAGES">SYS_PROCEDURE_MESSAGES</a></li><li><a href="#sys_view_migration-SYS_UDF_LOG">SYS_UDF_LOG</a></li><li><a href="#sys_view_migration-SYS_USERLOG">SYS_USERLOG</a></li><li><a href="#sys_view_migration-SYS_SCHEMA_QUOTA_VIOLATIONS">SYS_SCHEMA_QUOTA_VIOLATIONS</a></li><li><a href="#sys_view_migration-SYS_SPATIAL_SIMPLIFY">SYS_SPATIAL_SIMPLIFY</a></li><li><a href="#sys_view_migration-examples">Example</a></li></ul></div>        
        <h2 id="sys_view_migration-use_cases">Use cases for migrating to SYS monitoring views</h2>
         
            <h3 id="w267aac69c15b7b3">Migrating from provisioned clusters to Amazon Redshift Serverless</h3>
            <p>If you're migrating a provisioned cluster to Amazon Redshift Serverless, 
                you may have queries using the following system views, which are
                only available on provisioned clusters.
    </p>
    <div class="itemizedlist">
         
         
         
         
         
    <ul class="itemizedlist"><li class="listitem"><p>
            All STL views
        </p></li><li class="listitem"><p>
            All STV views
        </p></li><li class="listitem"><p>
            All SVCS views
        </p></li><li class="listitem"><p>
            All SVL views
        </p></li><li class="listitem"><p>
            Some SVV views
        </p><div class="itemizedlist">
             
        <ul class="itemizedlist"><li class="listitem"><p>For a list of SVV views unsupported in Amazon Redshift Serverless, see the list at the bottom of <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-monitoring.html">
                Monitoring queries and workloads with Amazon Redshift Serverless
            </a> in the <em>Amazon Redshift Management Guide</em>.</p></li></ul></div></li></ul></div>
    <p>
        To keep using your queries, refit them to use columns defined in the SYS monitoring views that
        correspond to the columns in your provisioned-only views.
    </p>
         
                     
            <h3 id="w267aac69c15b7b5">Updating queries while staying on a provisioned cluster</h3>
            <p>If you're not migrating to Amazon Redshift Serverless, you might still want to update your existing queries.
            The SYS monitoring views are designed for ease of use and reduced complexity,
            providing a complete array of metrics for effective monitoring and troubleshooting.
            Using SYS views such as <a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a>
                and <a href="./SYS_QUERY_DETAIL.html">SYS_QUERY_DETAIL</a> that consolidate the 
                information of multiple provisioned-only views, you can
                streamline your queries.</p>
         
             
        <h2 id="sys_view_migration-query-id">Improving query identifier tracking using the SYS monitoring views</h2>
                <p>
                    SYS monitoring views such as such as <a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a>
                    and <a href="./SYS_QUERY_DETAIL.html">SYS_QUERY_DETAIL</a> contain the query_id column, which holds the 
                    identifier for users’ queries. Similarly, provisioned-only views such as <a href="./r_STL_QUERY.html">STL_QUERY</a> and <a href="./r_SVL_QLOG.html">SVL_QLOG</a> contain the query column, which also holds the query identifiers. 
                    However, the query identifiers recorded in the SYS system views are different from those recorded 
                    in the provisioned-only views. 
                </p>
        <p>The difference between the SYS views’ query_id column values and the provisioned-only views’ query column values is as follows:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem"><p>
                In SYS views, the query_id column records user-submitted queries in their original form. The Amazon Redshift optimizer might break them
                down into child queries for improved performance, but a single query you run will still only have a single row in 
                <a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a>. If you want to see the individual child queries, 
                you can find them in <a href="./SYS_QUERY_DETAIL.html">SYS_QUERY_DETAIL</a>.</p></li><li class="listitem"><p>
                In provisioned-only views, the query column records queries at the child query level. If the Amazon Redshift optimizer rewrites your original 
                query into multiple child queries, there will be multiple rows in <a href="./r_STL_QUERY.html">STL_QUERY</a> with differing query identifier values for a single query you run.
            </p></li></ul></div>
        <p>When you migrate your monitoring and diagnostic queries from provisioned-only views to SYS views, consider this difference and 
            edit your queries accordingly. For more information on how Amazon Redshift processes queries, see 
            <a href="./c-query-planning.html">Query planning and execution workflow</a>.</p>
        
           
            <h2 id="sys_view_migration-SYS_QUERY_HISTORY">SYS_QUERY_HISTORY</h2>
            <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a>.</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_DDLTEXT.html">STL_DDLTEXT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_ERROR.html">STL_ERROR</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_QUERY.html">STL_QUERY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_UTILITYTEXT.html">STL_UTILITYTEXT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_WLM_QUERY.html">STL_WLM_QUERY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_INFLIGHT.html">STV_INFLIGHT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_RECENTS.html">STV_RECENTS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_WLM_QUERY_STATE.html">STV_WLM_QUERY_STATE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_COMPILE.html">SVL_COMPILE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_MULTI_STATEMENT_VIOLATIONS.html">SVL_MULTI_STATEMENT_VIOLATIONS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QLOG.html">SVL_QLOG</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QUERY_QUEUE_INFO.html">SVL_QUERY_QUEUE_INFO</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_STATEMENTTEXT.html">SVL_STATEMENTTEXT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_TERMINATE.html">SVL_TERMINATE</a></p>
                </li></ul></div>
               
        <h2 id="sys_view_migration-SYS_QUERY_DETAIL">SYS_QUERY_DETAIL</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_QUERY_DETAIL.html">SYS_QUERY_DETAIL</a>.</p>
        <div class="itemizedlist">
         
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_AGGR.html">STL_AGGR</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_ALERT_EVENT_LOG.html">STL_ALERT_EVENT_LOG</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_BCAST.html">STL_BCAST</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_DELETE.html">STL_DELETE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_DIST.html">STL_DIST</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_EXPLAIN.html">STL_EXPLAIN</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_HASH.html">STL_HASH</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_HASHJOIN.html">STL_HASHJOIN</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_INSERT.html">STL_INSERT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_LIMIT.html">STL_LIMIT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_MERGE.html">STL_MERGE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_MERGEJOIN.html">STL_MERGEJOIN</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_NESTLOOP.html">STL_NESTLOOP</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_PARSE.html">STL_PARSE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_PLAN_INFO.html">STL_PLAN_INFO</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_PROJECT.html">STL_PROJECT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_QUERY_METRICS.html">STL_QUERY_METRICS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_RETURN.html">STL_RETURN</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_SAVE.html">STL_SAVE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_SCAN.html">STL_SCAN</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_SORT.html">STL_SORT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_STREAM_SEGS.html">STL_STREAM_SEGS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_UNIQUE.html">STL_UNIQUE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_WINDOW.html">STL_WINDOW</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_EXEC_STATE.html">STV_EXEC_STATE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_QUERY_METRICS.html">STV_QUERY_METRICS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVCS_QUERY_SUMMARY.html">SVCS_QUERY_SUMMARY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QUERY_METRICS.html">SVL_QUERY_METRICS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QUERY_METRICS_SUMMARY.html">SVL_QUERY_METRICS_SUMMARY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QUERY_REPORT.html">SVL_QUERY_REPORT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_QUERY_SUMMARY.html">SVL_QUERY_SUMMARY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVV_QUERY_STATE.html">SVV_QUERY_STATE</a></p>
                </li></ul></div>
               
        <h2 id="sys_view_migration-SYS_RESTORE_LOG">SYS_RESTORE_LOG</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_RESTORE_LOG.html">SYS_RESTORE_LOG</a>.</p>
        <div class="itemizedlist">
             
        <ul class="itemizedlist"><li class="listitem">
                <p><a href="./r_SVL_RESTORE_ALTER_TABLE_PROGRESS.html">SVL_RESTORE_ALTER_TABLE_PROGRESS</a></p>
            </li></ul></div>
           
        <h2 id="sys_view_migration-SYS_RESTORE_STATE">SYS_RESTORE_STATE</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_RESTORE_STATE.html">SYS_RESTORE_STATE</a>.</p>
        <div class="itemizedlist">
             
        <ul class="itemizedlist"><li class="listitem">
                <p><a href="./r_STV_XRESTORE_ALTER_QUEUE_STATE.html">STV_XRESTORE_ALTER_QUEUE_STATE</a></p>
            </li></ul></div>
           
            <h2 id="sys_view_migration-SYS_TRANSACTION_HISTORY">SYS_TRANSACTION_HISTORY</h2>
            <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_TRANSACTION_HISTORY.html">SYS_TRANSACTION_HISTORY</a>.</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_COMMIT_STATS.html">STL_COMMIT_STATS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_TR_CONFLICT.html">STL_TR_CONFLICT</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_UNDONE.html">STL_UNDONE</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_QUERY_TEXT">SYS_QUERY_TEXT</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_QUERY_TEXT.html">SYS_QUERY_TEXT</a>.</p>
            
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_QUERYTEXT.html">STL_QUERYTEXT</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_CONNECTION_LOG">SYS_CONNECTION_LOG</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_CONNECTION_LOG.html">SYS_CONNECTION_LOG</a>.</p>
            
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_CONNECTION_LOG.html">STL_CONNECTION_LOG</a></p>
                </li></ul></div>
            
            <h2 id="sys_view_migration-SYS_SESSION_HISTORY">SYS_SESSION_HISTORY</h2>
            <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_SESSION_HISTORY.html">SYS_SESSION_HISTORY</a>.</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_SESSIONS.html">STL_SESSIONS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_RESTARTED_SESSIONS.html">STL_RESTARTED_SESSIONS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STV_SESSIONS.html">STV_SESSIONS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_LOAD_DETAIL">SYS_LOAD_DETAIL</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_LOAD_DETAIL.html">SYS_LOAD_DETAIL</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_LOAD_COMMITS.html">STL_LOAD_COMMITS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_LOAD_HISTORY">SYS_LOAD_HISTORY</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_LOAD_HISTORY.html">SYS_LOAD_HISTORY</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_LOAD_COMMITS.html">STL_LOAD_COMMITS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_LOAD_ERROR_DETAIL">SYS_LOAD_ERROR_DETAIL</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_LOAD_ERROR_DETAIL.html">SYS_LOAD_ERROR_DETAIL</a>.</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_LOADERROR_DETAIL.html">STL_LOADERROR_DETAIL</a></p>
                </li><li class="listitem">
                    <p><a href="./r_STL_LOAD_ERRORS.html">STL_LOAD_ERRORS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_UNLOAD_HISTORY">SYS_UNLOAD_HISTORY</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_UNLOAD_HISTORY.html">SYS_UNLOAD_HISTORY</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_UNLOAD_LOG.html">STL_UNLOAD_LOG</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_UNLOAD_DETAIL">SYS_UNLOAD_DETAIL</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_UNLOAD_DETAIL.html">SYS_UNLOAD_DETAIL</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_UNLOAD_LOG.html">STL_UNLOAD_LOG</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_COPY_REPLACEMENTS">SYS_COPY_REPLACEMENTS</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_COPY_REPLACEMENTS.html">SYS_COPY_REPLACEMENTS</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_REPLACEMENTS.html">STL_REPLACEMENTS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_DATASHARE_USAGE_CONSUMER">SYS_DATASHARE_USAGE_CONSUMER</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_DATASHARE_USAGE_CONSUMER.html">SYS_DATASHARE_USAGE_CONSUMER</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_DATASHARE_USAGE_CONSUMER.html">SVL_DATASHARE_USAGE_CONSUMER</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_DATASHARE_USAGE_PRODUCER">SYS_DATASHARE_USAGE_PRODUCER</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_DATASHARE_USAGE_PRODUCER.html">SYS_DATASHARE_USAGE_PRODUCER</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_DATASHARE_USAGE_PRODUCER.html">SVL_DATASHARE_USAGE_PRODUCER</a></p>
                </li></ul></div>
            
            <h2 id="sys_view_migration-SYS_DATASHARE_CROSS_REGION_USAGE">SYS_DATASHARE_CROSS_REGION_USAGE</h2>
            <p>Some or all of the columns in the following table are also defined in <a href="./r_SYS_DATASHARE_CROSS_REGION_USAGE.html">SYS_DATASHARE_CROSS_REGION_USAGE</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_DATASHARE_CROSS_REGION_USAGE.html">SVL_DATASHARE_CROSS_REGION_USAGE</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_DATASHARE_CHANGE_LOG">SYS_DATASHARE_CHANGE_LOG</h2>
        <p>Some or all of the columns in the following table are also defined in <a href="./SYS_DATASHARE_CHANGE_LOG.html">SYS_DATASHARE_CHANGE_LOG</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_DATASHARE_CHANGE_LOG.html">SVL_DATASHARE_CHANGE_LOG</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_EXTERNAL_QUERY_DETAIL">SYS_EXTERNAL_QUERY_DETAIL</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_EXTERNAL_QUERY_DETAIL.html">SYS_EXTERNAL_QUERY_DETAIL</a>.</p>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_FEDERATED_QUERY.html">SVL_FEDERATED_QUERY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_S3LIST.html">SVL_S3LIST</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_S3QUERY.html">SVL_S3QUERY</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_S3QUERY_SUMMARY.html">SVL_S3QUERY_SUMMARY</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_EXTERNAL_QUERY_ERROR">SYS_EXTERNAL_QUERY_ERROR</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_EXTERNAL_QUERY_ERROR.html">SYS_EXTERNAL_QUERY_ERROR</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_SPECTRUM_SCAN_ERROR.html">SVL_SPECTRUM_SCAN_ERROR</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_VACUUM_HISTORY">SYS_VACUUM_HISTORY</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_VACUUM_HISTORY.html">SYS_VACUUM_HISTORY</a>.</p>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_VACUUM.html">STL_VACUUM</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVL_VACUUM_PERCENTAGE.html">SVL_VACUUM_PERCENTAGE</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVV_VACUUM_PROGRESS.html">SVV_VACUUM_PROGRESS</a></p>
                </li><li class="listitem">
                    <p><a href="./r_SVV_VACUUM_SUMMARY.html">SVV_VACUUM_SUMMARY</a></p>
                </li></ul></div>
            
            <h2 id="sys_view_migration-SYS_ANALYZE_HISTORY">SYS_ANALYZE_HISTORY</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_ANALYZE_HISTORY.html">SYS_ANALYZE_HISTORY</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_ANALYZE.html">STL_ANALYZE</a></p>
                </li></ul></div>
            
            <h2 id="sys_view_migration-SYS_ANALYZE_COMPRESSION_HISTORY">SYS_ANALYZE_COMPRESSION_HISTORY</h2>
            <p>Some or all of the columns in the following tables are also defined in <a href="./r_SYS_ANALYZE_COMPRESSION_HISTORY.html">SYS_ANALYZE_COMPRESSION_HISTORY</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_ANALYZE_COMPRESSION.html">STL_ANALYZE_COMPRESSION</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_MV_REFRESH_HISTORY">SYS_MV_REFRESH_HISTORY</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_MV_REFRESH_HISTORY.html">SYS_MV_REFRESH_HISTORY</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_MV_REFRESH_STATUS.html">SVL_MV_REFRESH_STATUS</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_MV_STATE">SYS_MV_STATE</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_MV_STATE.html">SYS_MV_STATE</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_MV_STATE.html">STL_MV_STATE</a></p>
                </li></ul></div>
            
            <h2 id="sys_view_migration-SYS_PROCEDURE_CALL">SYS_PROCEDURE_CALL</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_PROCEDURE_CALL.html">SYS_PROCEDURE_CALL</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_STORED_PROC_CALL.html">SVL_STORED_PROC_CALL</a></p>
                </li></ul></div>
         
            <h2 id="sys_view_migration-SYS_PROCEDURE_MESSAGES">SYS_PROCEDURE_MESSAGES</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_PROCEDURE_MESSAGES.html">SYS_PROCEDURE_MESSAGES</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_STORED_PROC_MESSAGES.html">SVL_STORED_PROC_MESSAGES</a></p>
                </li></ul></div>
         
            <h2 id="sys_view_migration-SYS_UDF_LOG">SYS_UDF_LOG</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_UDF_LOG.html">SYS_UDF_LOG</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_UDF_LOG.html">SVL_UDF_LOG</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_USERLOG">SYS_USERLOG</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_USERLOG.html">SYS_USERLOG</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_USERLOG.html">STL_USERLOG</a></p>
                </li></ul></div>
            
        <h2 id="sys_view_migration-SYS_SCHEMA_QUOTA_VIOLATIONS">SYS_SCHEMA_QUOTA_VIOLATIONS</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./r_SYS_SCHEMA_QUOTA_VIOLATIONS.html">SYS_SCHEMA_QUOTA_VIOLATIONS</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_STL_SCHEMA_QUOTA_VIOLATIONS.html">STL_SCHEMA_QUOTA_VIOLATIONS</a></p>
                </li></ul></div>
         
        <h2 id="sys_view_migration-SYS_SPATIAL_SIMPLIFY">SYS_SPATIAL_SIMPLIFY</h2>
        <p>Some or all of the columns in the following tables are also defined in <a href="./SYS_SPATIAL_SIMPLIFY.html">SYS_SPATIAL_SIMPLIFY</a>.</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="./r_SVL_SPATIAL_SIMPLIFY.html">SVL_SPATIAL_SIMPLIFY</a></p>
                </li></ul></div>
         
            <h2 id="sys_view_migration-examples">Example</h2>
            
             
                <h3 id="sys_view_migration-examples-query-id">Showing how Amazon Redshift records queries differently in provisioned-only and SYS monitoring views</h3>
                <p>See the following sample query. This is the query written as you would run it in Amazon Redshift.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT  
  s_name
  , COUNT(*) AS numwait
FROM    
  supplier,
  lineitem l1,
  orders,
  nation
WHERE    s_suppkey = l1.l_suppkey
         AND o_orderkey = l1.l_orderkey
         AND o_orderstatus = 'F'
         AND l1.l_receiptdate &gt; l1.l_commitdate
         AND EXISTS (SELECT
                       *
                     FROM  
                       lineitem l2
                     WHERE  l2.l_orderkey = l1.l_orderkey
                            AND l2.l_suppkey &lt;&gt; l1.l_suppkey )
         AND NOT EXISTS (SELECT
                           *
                         FROM  
                           lineitem l3
                         WHERE  l3.l_orderkey = l1.l_orderkey
                                AND l3.l_suppkey &lt;&gt; l1.l_suppkey
                                AND l3.l_receiptdate &gt; l3.l_commitdate )
         AND s_nationkey = n_nationkey
         AND n_name = 'UNITED STATES'
GROUP BY
  s_name
ORDER BY
  numwait DESC
  , s_name LIMIT 100;</code></pre>
                <p>Under the hood the Amazon Redshift query optimizer rewrites the above user-submitted query into 5 child queries.</p>
                <p>The first child query creates a temporary table to materialize a subquery.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE TEMP TABLE volt_tt_606590308b512(l_orderkey 
                                        , l_suppkey
                                        , s_name   ) AS SELECT
                                                         l1.l_orderkey
                                                         , l1.l_suppkey
                                                         , public.supplier.s_name
                                                       FROM  
                                                         public.lineitem AS l1,
                                                         public.nation,
                                                         public.orders,
                                                         public.supplier
                                                       WHERE  l1.l_commitdate &lt; l1.l_receiptdate
                                                              AND l1.l_orderkey = public.orders.o_orderkey
                                                              AND l1.l_suppkey = public.supplier.s_suppkey
                                                              AND public.nation.n_name = 'UNITED STATES'::CHAR(8)
                                                              AND public.nation.n_nationkey = public.supplier.s_nationkey
                                                              AND public.orders.o_orderstatus = 'F'::CHAR(1);</code></pre>
                <p>The second child query collects statistics from the temporary table.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">padb_fetch_sample: select count(*) from volt_tt_606590308b512;</code></pre>
                <p>The third child query creates another temporary table to materialize another subquery, 
                    referencing the temporary table created above.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE TEMP TABLE volt_tt_606590308c2ef(l_orderkey 
                                        , l_suppkey) AS (SELECT
                                                          volt_tt_606590308b512.l_orderkey
                                                          , volt_tt_606590308b512.l_suppkey
                                                        FROM  
                                                          public.lineitem AS l2,
                                                          volt_tt_606590308b512
                                                        WHERE  l2.l_suppkey &lt;&gt; volt_tt_606590308b512.l_suppkey
                                                               AND l2.l_orderkey = volt_tt_606590308b512.l_orderkey) 
                                                               EXCEPT distinct (SELECT volt_tt_606590308b512.l_orderkey, volt_tt_606590308b512.l_suppkey
                                                               FROM public.lineitem AS l3, volt_tt_606590308b512 
                                                               WHERE l3.l_commitdate &lt; l3.l_receiptdate 
                                                                 AND l3.l_suppkey &lt;&gt; volt_tt_606590308b512.l_suppkey 
                                                                 AND l3.l_orderkey = volt_tt_606590308b512.l_orderkey);</code></pre>
             
            <p>The fourth child query again collects the temporary table’s statistics.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">padb_fetch_sample: select count(*) from volt_tt_606590308c2ef</code></pre>
            <p>The last child query uses the temporary tables created above to generate the output.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT  
  volt_tt_606590308b512.s_name AS s_name
  , COUNT(*) AS numwait
FROM    
  volt_tt_606590308b512,
  volt_tt_606590308c2ef
WHERE    volt_tt_606590308b512.l_orderkey = volt_tt_606590308c2ef.l_orderkey
         AND volt_tt_606590308b512.l_suppkey = volt_tt_606590308c2ef.l_suppkey
GROUP BY
  1
ORDER BY
  2 DESC
  , 1 ASC LIMIT 100;</code></pre>
            <p>In the provisioned-only system view STL_QUERY, Amazon Redshift records five rows at the child query level, as follows:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT userid, xid, pid, query, querytxt::varchar(100); 
FROM stl_query 
WHERE xid = 48237350 
ORDER BY xid, starttime;

<code class="code" copy="false"> userid |   xid    |    pid     |  query   |                                               querytxt
--------+----------+------------+----------+------------------------------------------------------------------------------------------------------
    101 | 48237350 | 1073840810 | 12058151 | CREATE TEMP TABLE volt_tt_606590308b512(l_orderkey, l_suppkey, s_name) AS SELECT l1.l_orderkey, l1.l
    101 | 48237350 | 1073840810 | 12058152 | padb_fetch_sample: select count(*) from volt_tt_606590308b512
    101 | 48237350 | 1073840810 | 12058156 | CREATE TEMP TABLE volt_tt_606590308c2ef(l_orderkey, l_suppkey) AS (SELECT volt_tt_606590308b512.l_or
    101 | 48237350 | 1073840810 | 12058168 | padb_fetch_sample: select count(*) from volt_tt_606590308c2ef
    101 | 48237350 | 1073840810 | 12058170 | SELECT s_name , COUNT(*) AS numwait FROM supplier, lineitem l1, orders, nation WHERE s_suppkey = l1.
(5 rows)</code></code></pre>
            <p>In the SYS monitoring view SYS_QUERY_HISTORY, Amazon Redshift records the query as follows:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT user_id, transaction_id, session_id, query_id, query_text::varchar(100) 
FROM sys_query_history 
WHERE transaction_id = 48237350 
ORDER BY start_time;

<code class="code" copy="false"> user_id | transaction_id | session_id | query_id |                                              query_text
---------+----------------+------------+----------+------------------------------------------------------------------------------------------------------
     101 |       48237350 | 1073840810 | 12058149 | SELECT s_name , COUNT(*) AS numwait FROM supplier, lineitem l1, orders, nation WHERE s_suppkey = l1.</code></code></pre>
        <p>In SYS_QUERY_DETAIL, you can find child query-level details using the query_id value from SYS_QUERY_HISTORY. 
        The child_query_sequence column shows the order the child queries are executed in. 
        For more information on the columns in SYS_QUERY_DETAIL, see <a href="./SYS_QUERY_DETAIL.html">SYS_QUERY_DETAIL</a>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">select user_id,
       query_id,
       child_query_sequence,
       stream_id,
       segment_id,
       step_id,
       start_time,
       end_time,
       duration,
       blocks_read,
       blocks_write,
       local_read_io,
       remote_read_io,
       data_skewness,
       time_skewness,
       is_active,
       spilled_block_local_disk,
       spilled_block_remote_disk
from sys_query_detail
where query_id = 12058149
      and step_id = -1
order by query_id,
         child_query_sequence,
         stream_id,
         segment_id,
         step_id;

<code class="code" copy="false"> user_id | query_id | child_query_sequence | stream_id | segment_id | step_id |         start_time         |          end_time          | duration | blocks_read | blocks_write | local_read_io | remote_read_io | data_skewness | time_skewness | is_active | spilled_block_local_disk | spilled_block_remote_disk
---------+----------+----------------------+-----------+------------+---------+----------------------------+----------------------------+----------+-------------+--------------+---------------+----------------+---------------+---------------+-----------+--------------------------+---------------------------
     101 | 12058149 |                    1 |         0 |          0 |      -1 | 2023-09-27 15:40:38.512415 | 2023-09-27 15:40:38.533333 |    20918 |           0 |            0 |             0 |              0 |             0 |            44 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         1 |          1 |      -1 | 2023-09-27 15:40:39.931437 | 2023-09-27 15:40:39.972826 |    41389 |          12 |            0 |            12 |              0 |             0 |            77 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         2 |          2 |      -1 | 2023-09-27 15:40:40.584412 | 2023-09-27 15:40:40.613982 |    29570 |          32 |            0 |            32 |              0 |             0 |            25 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         2 |          3 |      -1 | 2023-09-27 15:40:40.582038 | 2023-09-27 15:40:40.615758 |    33720 |           0 |            0 |             0 |              0 |             0 |             1 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         3 |          4 |      -1 | 2023-09-27 15:40:46.668766 | 2023-09-27 15:40:46.705456 |    36690 |          24 |            0 |            15 |              0 |             0 |            17 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         4 |          5 |      -1 | 2023-09-27 15:40:46.707209 | 2023-09-27 15:40:46.709176 |     1967 |           0 |            0 |             0 |              0 |             0 |            18 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         4 |          6 |      -1 | 2023-09-27 15:40:46.70656  | 2023-09-27 15:40:46.71289  |     6330 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    1 |         5 |          7 |      -1 | 2023-09-27 15:40:46.71405  | 2023-09-27 15:40:46.714343 |      293 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    2 |         0 |          0 |      -1 | 2023-09-27 15:40:52.083907 | 2023-09-27 15:40:52.087854 |     3947 |           0 |            0 |             0 |              0 |             0 |            35 | f         |                        0 |                         0
     101 | 12058149 |                    2 |         1 |          1 |      -1 | 2023-09-27 15:40:52.089632 | 2023-09-27 15:40:52.091129 |     1497 |           0 |            0 |             0 |              0 |             0 |            11 | f         |                        0 |                         0
     101 | 12058149 |                    2 |         1 |          2 |      -1 | 2023-09-27 15:40:52.089008 | 2023-09-27 15:40:52.091306 |     2298 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         0 |          0 |      -1 | 2023-09-27 15:40:56.882013 | 2023-09-27 15:40:56.897282 |    15269 |           0 |            0 |             0 |              0 |             0 |            29 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         1 |          1 |      -1 | 2023-09-27 15:40:59.718554 | 2023-09-27 15:40:59.722789 |     4235 |           0 |            0 |             0 |              0 |             0 |            13 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         2 |          2 |      -1 | 2023-09-27 15:40:59.800382 | 2023-09-27 15:40:59.807388 |     7006 |           0 |            0 |             0 |              0 |             0 |            58 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         3 |          3 |      -1 | 2023-09-27 15:41:06.488685 | 2023-09-27 15:41:06.493825 |     5140 |           0 |            0 |             0 |              0 |             0 |            56 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         3 |          4 |      -1 | 2023-09-27 15:41:06.486206 | 2023-09-27 15:41:06.497756 |    11550 |           0 |            0 |             0 |              0 |             0 |             2 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         4 |          5 |      -1 | 2023-09-27 15:41:06.499201 | 2023-09-27 15:41:06.500851 |     1650 |           0 |            0 |             0 |              0 |             0 |            15 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         4 |          6 |      -1 | 2023-09-27 15:41:06.498609 | 2023-09-27 15:41:06.500949 |     2340 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    3 |         5 |          7 |      -1 | 2023-09-27 15:41:06.502945 | 2023-09-27 15:41:06.503282 |      337 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    4 |         0 |          0 |      -1 | 2023-09-27 15:41:06.62899  | 2023-09-27 15:41:06.631452 |     2462 |           0 |            0 |             0 |              0 |             0 |            22 | f         |                        0 |                         0
     101 | 12058149 |                    4 |         1 |          1 |      -1 | 2023-09-27 15:41:06.632313 | 2023-09-27 15:41:06.63391  |     1597 |           0 |            0 |             0 |              0 |             0 |            20 | f         |                        0 |                         0
     101 | 12058149 |                    4 |         1 |          2 |      -1 | 2023-09-27 15:41:06.631726 | 2023-09-27 15:41:06.633813 |     2087 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         0 |          0 |      -1 | 2023-09-27 15:41:12.571974 | 2023-09-27 15:41:12.584234 |    12260 |           0 |            0 |             0 |              0 |             0 |            39 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         0 |          1 |      -1 | 2023-09-27 15:41:12.569815 | 2023-09-27 15:41:12.585391 |    15576 |           0 |            0 |             0 |              0 |             0 |             4 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         1 |          2 |      -1 | 2023-09-27 15:41:13.758513 | 2023-09-27 15:41:13.76401  |     5497 |           0 |            0 |             0 |              0 |             0 |            39 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         1 |          3 |      -1 | 2023-09-27 15:41:13.749    | 2023-09-27 15:41:13.772987 |    23987 |           0 |            0 |             0 |              0 |             0 |            32 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         2 |          4 |      -1 | 2023-09-27 15:41:13.799526 | 2023-09-27 15:41:13.813506 |    13980 |           0 |            0 |             0 |              0 |             0 |            62 | f         |                        0 |                         0
     101 | 12058149 |                    5 |         2 |          5 |      -1 | 2023-09-27 15:41:13.798823 | 2023-09-27 15:41:13.813651 |    14828 |           0 |            0 |             0 |              0 |             0 |             0 | f         |                        0 |                         0
(28 rows)</code></code></pre><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./SYS_VACUUM_HISTORY.html">SYS_VACUUM_HISTORY</div><div id="next" class="next-link" accesskey="n" href="./c_intro_system_views.html">System monitoring (provisioned only)</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/sys_view_migration.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/sys_view_migration.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>