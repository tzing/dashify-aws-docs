<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Automated materialized views - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="materialized-view-auto-mv" /><meta name="default_state" content="materialized-view-auto-mv" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-auto-mv.html" /><meta name="description" content="Learn about automated materialized views." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-auto-mv.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-auto-mv.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Automated materialized views" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Automated materialized views - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#materialized-view-auto-mv" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/materialized-view-auto-mv.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/materialized-view-auto-mv.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/materialized-view-auto-mv.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Creating materialized views in Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Automated materialized views",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#materialized-view-auto-mv" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#materialized-view-auto-mv-important">SQL scope and considerations for automated materialized views</a><a href="#materialized-view-auto-mv-limitations">Automated materialized views limitations</a><a href="#materialized-view-auto-mv-billing">Billing for automated materialized views</a><a href="#materialized-view-auto-mv-resources">Additional resources</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="materialized-view-auto-mv">Automated materialized views</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Materialized views are a powerful tool for improving query performance in Amazon Redshift.
            They do this by storing a precomputed result set. Similar queries don't have to re-run
            the same logic each time, because they can retrieve records from the existing result set.
            Developers and analysts create materialized views after analyzing their workloads to
            determine which queries would benefit, and whether the maintenance cost of each
            materialized view is worthwhile. As workloads grow or change, these materialized views
            must be reviewed to ensure they continue to provide tangible performance benefits.</p><p>The Automated Materialized Views (AutoMV) feature in Redshift provides the same
            performance benefits of user-created materialized views. Amazon Redshift continually monitors the
            workload using machine learning and creates new materialized views when they are
            beneficial. AutoMV balances the costs of creating and keeping materialized views up to
            date against expected benefits to query latency. The system also monitors previously
            created AutoMVs and drops them when they are no longer beneficial.</p><p>AutoMV behavior and capabilities are the same as user-created materialized views. They
            are refreshed automatically and incrementally, using the same criteria and restrictions.
            Just like materialized views created by users, <a href="./materialized-view-auto-rewrite.html">Automatic query rewriting to use
                materialized views</a> identifies queries that can benefit
            from system-created AutoMVs. It automatically rewrites those queries to use the
            AutoMVs, improving query performance. Developers don't need to revise queries to take
            advantage of AutoMV.</p><p></p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Automated materialized views are refreshed intermittently. Queries rewritten to use AutoMV 
                always return the latest results. When Redshift detects that data 
                isn't up to date, queries aren't rewritten to read from automated materialized views. Instead, queries 
                select the latest data from base tables.</p></div></div><p>Any workload with queries that are used repeatedly can benefit from AutoMV. Common use cases include:</p><div class="itemizedlist">
             

             
        <ul class="itemizedlist"><li class="listitem"><p><em>Dashboards</em> - Dashboards are widely used to provide quick views of key
                    business indicators (KPIs), events, trends, and other metrics. They often have a
                    common layout with charts and tables, but show different views for filtering, or
                    for dimension-selection operations, like drill down. Dashboards often have a
                    common set of queries used repeatedly with different parameters. Dashboard
                    queries can benefit greatly from automated materialized views.</p></li><li class="listitem">
                <p>
                    <em>Reports</em> - Reporting queries may be scheduled at various
                    frequencies, based on business requirements and the type of report.
                    Additionally, they can be automated or on-demand. A common characteristic of
                    reporting queries is that they can be long running and resource-intensive. With
                    AutoMV, these queries don't need to be recomputed each time they run, which
                    reduces runtime for each query and resource utilization in Redshift. </p>
            </li></ul></div><p>To turn off automated materialized views, you update the <code class="code">auto_mv</code> parameter group to <code class="code">false</code>. For more 
            information, see <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/working-with-parameter-groups.html">Amazon Redshift parameter groups</a> in the Amazon Redshift Cluster Management Guide.</p>
            <h2 id="materialized-view-auto-mv-important">SQL scope and considerations for automated materialized views</h2>
            <div class="itemizedlist">
                 
                 
                
                 
   
   
                 
            <ul class="itemizedlist"><li class="listitem"><p>An automated materialized view can be initiated and created by a query or subquery, provided 
                    it contains a <code class="code">GROUP BY</code> clause or one of the following aggregate functions: SUM, COUNT, MIN, MAX or AVG. But it cannot contain any of the following:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                
                     
                <ul class="itemizedlist"><li class="listitem"><p>Left, right, or full outer joins</p></li><li class="listitem"><p>Aggregate functions other than SUM, COUNT, MIN, MAX, and AVG. (These particular functions work with automatic query rewriting.)</p></li><li class="listitem"><p>Any aggregate function that includes DISTINCT</p></li><li class="listitem"><p>Any window functions</p></li><li class="listitem"><p>SELECT DISTINCT or HAVING clauses</p></li><li class="listitem"><p>Other materialized views</p></li></ul></div>
                    <p>It isn't guaranteed that a query that meets the criteria will initiate the
                        creation of an automated materialized view. The system determines
                        from
                        which candidates to create a
                        view,
                        based on its expected benefit to the workload and cost in resources to
                        maintain, which includes the cost to the system to refresh. Each resulting
                        materialized view
                        is
                        usable by automatic query rewriting.</p></li><li class="listitem"><p>Even though AutoMV
                        might
                        be initiated by a subquery or individual legs of set operators, the
                        resulting materialized view won't contain subqueries or set
                        operators.</p></li><li class="listitem"><p>To determine if AutoMV was used for queries, view the EXPLAIN plan and look for <code class="code">%_auto_mv_%</code> in the output. For more information, 
                    see <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_EXPLAIN.html">EXPLAIN</a>.</p></li><li class="listitem"><p>Automated materialized views aren't supported on external tables, such as datashares and federated tables.</p></li></ul></div>
         
            <h2 id="materialized-view-auto-mv-limitations">Automated materialized views limitations</h2>
            <p>Following are limitations for working with automated materialized views:</p>
            <div class="itemizedlist">
                 
        

                 

            <ul class="itemizedlist"><li class="listitem"><p><em>Maximum number of AutoMVs</em> - The limit of automated materialized views is 200 per database in the cluster.</p></li><li class="listitem"><p><em>Storage space and capacity</em> - An important characteristic of AutoMV is 
                    that it is performed using spare background cycles to help
                    achieve that user 
                    workloads are not impacted. If the cluster is busy or running out of storage space, AutoMV ceases its activity. Specifically, 
                    at 80% of total cluster capacity, no new automated materialized views are created. At 90% of total 
                    capacity, they may be dropped to
                    facilitate
                    that user workloads continue without performance degradation. For 
                    more information about determining cluster capacity, see <a href="./r_STV_NODE_STORAGE_CAPACITY.html">STV_NODE_STORAGE_CAPACITY</a>.</p></li></ul></div>
         
            <h2 id="materialized-view-auto-mv-billing">Billing for automated materialized views</h2>
            <p>
                Amazon Redshift's automatic optimization capability creates and refreshes automated materialized views. There 
                is no charge for compute resources for this process. Storage of automated materialized views is charged at the regular rate for storage. For more information, 
                see <a href="https://aws.amazon.com/redshift/pricing/" rel="noopener noreferrer" target="_blank"><span>Amazon Redshift pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
         
            <h2 id="materialized-view-auto-mv-resources">Additional resources</h2>
            <p>            
                The following blog post provides further explanation regarding automated 
                materialized views. It details how they’re created, maintained, and dropped. It also explains the 
                underlying algorithms that drive these decisions: <a href="https://aws.amazon.com/blogs//big-data/optimize-your-amazon-redshift-query-performance-with-automated-materialized-views/" rel="noopener noreferrer" target="_blank"><span>Optimize your Amazon Redshift query performance with automated materialized views</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
      
            <p>
                This video begins with an explanation of materialized views and shows how they improve performance and conserve resources. It then provides an 
                in-depth explanation of automated materialized views with a process-flow animation and a live demonstration. </p> 
            <div class="mediaobject">
                 
                    <iframe width="560" height="315" frameborder="0" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" sandbox="allow-scripts allow-same-origin allow-popups" src="https://www.youtube-nocookie.com/embed/-85GSBQOBTA"></iframe>
                 
            </div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./materialized-view-refresh.html">Refreshing a materialized view</div><div id="next" class="next-link" accesskey="n" href="./materialized-view-UDFs.html">Using a user-defined function (UDF) in a materialized view</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/materialized-view-auto-mv.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/materialized-view-auto-mv.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>