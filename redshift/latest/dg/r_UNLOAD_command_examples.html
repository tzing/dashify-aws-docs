<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>UNLOAD examples - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_UNLOAD_command_examples" /><meta name="default_state" content="r_UNLOAD_command_examples" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD_command_examples.html" /><meta name="description" content="Provides examples of how to use the UNLOAD command." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD_command_examples.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD_command_examples.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="UNLOAD examples" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>UNLOAD examples - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_UNLOAD_command_examples" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_UNLOAD_command_examples.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_UNLOAD_command_examples.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_UNLOAD_command_examples.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL commands",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "UNLOAD",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "UNLOAD examples",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_UNLOAD_command_examples" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#unload-examples-venue">Unload VENUE to a pipe-delimited file
                  (default delimiter)</a><a href="#unload-examples-partitioned-parquet">Unload LINEITEM table to
                  partitioned Parquet files</a><a href="#unload-examples-json">Unload the VENUE table to a JSON file</a><a href="#unload-examples-csv">Unload VENUE to a CSV file</a><a href="#unload-examples-csv-delimiter">Unload VENUE to a CSV file using a
                  delimiter</a><a href="#unload-examples-manifest">Unload VENUE with a manifest file</a><a href="#unload-examples-manifest-verbose">Unload VENUE with MANIFEST
                  VERBOSE</a><a href="#unload-examples-header">Unload VENUE with a header</a><a href="#unload-examples-maxfilesize">Unload VENUE to smaller files</a><a href="#unload-examples-serial">Unload VENUE serially</a><a href="#unload-examples-load">Load VENUE from unload files</a><a href="#unload-examples-unload-encrypted">Unload VENUE to encrypted
                  files</a><a href="#unload-examples-load-encrypted">Load VENUE from encrypted
                  files</a><a href="#unload-examples-venue-tab">Unload VENUE data to a tab-delimited
                  file</a><a href="#unload-venue-fixed-width">Unload VENUE to a fixed-width data
                  file</a><a href="#unload-examples-venue-gzip">Unload VENUE to a set of tab-delimited
                  GZIP-compressed files</a><a href="#unload-examples-venue-extension-gzip">Unload VENUE to a GZIP-compressed text file</a><a href="#unload-examples-delimiter">Unload data that contains a
                  delimiter</a><a href="#unload-examples-join">Unload the results of a join query</a><a href="#unload-examples-null-as">Unload using NULL AS</a><a href="#unload-examples-allowoverwrite">Unload using ALLOWOVERWRITE parameter</a><a href="#unload-examples-manifest-parallel">Unload EVENT table using PARALLEL and MANIFEST parameters</a><a href="#unload-examples-manifest-serial">Unload EVENT table using PARALLEL OFF and MANIFEST parameters</a><a href="#unload-examples-manifest-partition">Unload EVENT table using PARTITION BY and MANIFEST parameters</a><a href="#unload-examples-manifest-maxsize">Unload EVENT table using MAXFILESIZE, ROWGROUPSIZE, and MANIFEST parameters</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_UNLOAD_command_examples">UNLOAD examples</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>These examples demonstrate various parameters of the UNLOAD command. 
            The TICKIT sample data is used in many of the examples. For more information, see 
            <a href="./c_sampledb.html">Sample database</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>These examples contain line breaks for readability. Do not include line breaks
               or spaces in your <em>credentials-args</em> string.</p></div></div>
            <h2 id="unload-examples-venue">Unload VENUE to a pipe-delimited file
                  (default delimiter)</h2>

            <p>The following example unloads the VENUE table and writes the data to
                  <code class="code">s3://mybucket/unload/</code>: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/unload/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole';</code></pre>
            <p>By default, UNLOAD writes one or more files per slice. Assuming a two-node cluster
               with two slices per node, the previous example creates these files in
                  <code class="code">mybucket</code>:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">unload/0000_part_00
unload/0001_part_00
unload/0002_part_00
unload/0003_part_00</code></pre>
            
            <p>To better differentiate the output files, you can include a prefix in the
               location. The following example unloads the VENUE table and writes the data to
                  <code class="code">s3://mybucket/unload/venue_pipe_</code>: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/unload/venue_pipe_'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole';</code></pre>
            <p>The result is these four files in the <code class="code">unload</code> folder, again assuming
               four slices.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">venue_pipe_0000_part_00
venue_pipe_0001_part_00
venue_pipe_0002_part_00
venue_pipe_0003_part_00</code></pre>
          
            <h2 id="unload-examples-partitioned-parquet">Unload LINEITEM table to
                  partitioned Parquet files</h2>
            <p>The following example unloads the LINEITEM table in Parquet format, partitioned by
               the <code class="code">l_shipdate</code> column. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from lineitem')
to 's3://mybucket/lineitem/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
PARQUET
PARTITION BY (l_shipdate);
</code></pre>
            <p>Assuming four slices, the resulting Parquet files are dynamically partitioned into
               various folders. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">
s3://mybucket/lineitem/l_shipdate=1992-01-02/0000_part_00.parquet
                                             0001_part_00.parquet
                                             0002_part_00.parquet
                                             0003_part_00.parquet
s3://mybucket/lineitem/l_shipdate=1992-01-03/0000_part_00.parquet
                                             0001_part_00.parquet
                                             0002_part_00.parquet
                                             0003_part_00.parquet
s3://mybucket/lineitem/l_shipdate=1992-01-04/0000_part_00.parquet
                                             0001_part_00.parquet
                                             0002_part_00.parquet
                                             0003_part_00.parquet
...
</code></pre>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>In some cases, the UNLOAD command used the INCLUDE option as shown in the
                  following SQL statement. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from lineitem')
to 's3://mybucket/lineitem/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
PARQUET
PARTITION BY (l_shipdate) INCLUDE;
</code></pre><p>In these cases, the <code class="code">l_shipdate</code> column is also in the data in the
                  Parquet files. Otherwise, the <code class="code">l_shipdate</code> column data isn't in
                  the Parquet files.</p></div></div>
          
            <h2 id="unload-examples-json">Unload the VENUE table to a JSON file</h2>
            <p>The following example unloads the VENUE table and writes the data in JSON format to <code class="code">s3://mybucket/unload/</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="SQL ">unload ('select * from venue')
to 's3://mybucket/unload/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
JSON;</code></pre>
            <p>Following are sample rows from the VENUE table.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">venueid | venuename                  | venuecity       | venuestate | venueseats
--------+----------------------------+-----------------+------------+-----------
      1 | Pinewood Racetrack         | Akron           | OH         | 0
      2 | Columbus "Crew" Stadium    | Columbus        | OH         | 0
      4 | Community, Ballpark, Arena | Kansas City     | KS         | 0</code></pre>
            <p>After unloading to JSON, the format of the file is similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>"venueid":1,"venuename":"Pinewood Racetrack","venuecity":"Akron","venuestate":"OH","venueseats":0}
<span>{</span>"venueid":2,"venuename":"Columbus \"Crew\" Stadium ","venuecity":"Columbus","venuestate":"OH","venueseats":0}
<span>{</span>"venueid":4,"venuename":"Community, Ballpark, Arena","venuecity":"Kansas City","venuestate":"KS","venueseats":0}</code></pre>
          
            <h2 id="unload-examples-csv">Unload VENUE to a CSV file</h2>
            <p>The following example unloads the VENUE table and writes the data in CSV format to
                  <code class="code">s3://mybucket/unload/</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/unload/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
CSV;</code></pre>
            <p>Suppose that the VENUE table contains the following rows.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">
venueid | venuename                  | venuecity       | venuestate | venueseats
--------+----------------------------+-----------------+------------+-----------
      1 | Pinewood Racetrack         | Akron           | OH         | 0
      2 | Columbus "Crew" Stadium    | Columbus        | OH         | 0
      4 | Community, Ballpark, Arena | Kansas City     | KS         | 0
            </code></pre>
            <p>The unload file looks similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">1,Pinewood Racetrack,Akron,OH,0
2,"Columbus ""Crew"" Stadium",Columbus,OH,0
4,"Community, Ballpark, Arena",Kansas City,KS,0</code></pre>
          
            <h2 id="unload-examples-csv-delimiter">Unload VENUE to a CSV file using a
                  delimiter</h2>
            <p>The following example unloads the VENUE table and writes the data in CSV format
               using the pipe character (|) as the delimiter. The unloaded file is written to
                  <code class="code">s3://mybucket/unload/</code>. The VENUE table in this example contains the
               pipe character in the value of the first row (<code class="code">Pinewood Race|track</code>). It
               does this to show that the value in the result is enclosed in double quotation marks.
               A double quotation mark is escaped by a double quotation mark, and the entire field
               is enclosed in double quotation marks. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/unload/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
CSV DELIMITER AS '|';</code></pre>
            <p>Suppose that the VENUE table contains the following rows.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">
venueid | venuename                  | venuecity       | venuestate | venueseats
--------+----------------------------+-----------------+------------+-------------
      1 | Pinewood Race|track        | Akron           | OH         | 0
      2 | Columbus "Crew" Stadium    | Columbus        | OH         | 0
      4 | Community, Ballpark, Arena | Kansas City     | KS         | 0
</code></pre>
            <p>The unload file looks similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">1|"Pinewood Race|track"|Akron|OH|0
2|"Columbus ""Crew"" Stadium"|Columbus|OH|0
4|Community, Ballpark, Arena|Kansas City|KS|0
</code></pre>
          
            <h2 id="unload-examples-manifest">Unload VENUE with a manifest file</h2>
            <p>To create a manifest file, include the MANIFEST option. The following example
               unloads the VENUE table and writes a manifest file along with the data files to
               s3://mybucket/venue_pipe_: </p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you unload files with the MANIFEST option, you should use the MANIFEST
                  option with the COPY command when you load the files. If you use the same prefix
                  to load the files and don't specify the MANIFEST option, COPY fails because
                  it assumes the manifest file is a data file.</p></div></div>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/venue_pipe_' iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
manifest;</code></pre>
            <p>The result is these five files:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">s3://mybucket/venue_pipe_0000_part_00
s3://mybucket/venue_pipe_0001_part_00
s3://mybucket/venue_pipe_0002_part_00
s3://mybucket/venue_pipe_0003_part_00
s3://mybucket/venue_pipe_manifest</code></pre>
            <p>The following shows the contents of the manifest file. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "entries": [
    <span>{</span>"url":"s3://mybucket/tickit/venue_0000_part_00"},
    <span>{</span>"url":"s3://mybucket/tickit/venue_0001_part_00"},
    <span>{</span>"url":"s3://mybucket/tickit/venue_0002_part_00"},
    <span>{</span>"url":"s3://mybucket/tickit/venue_0003_part_00"}
  ]
}</code></pre>
          
            <h2 id="unload-examples-manifest-verbose">Unload VENUE with MANIFEST
                  VERBOSE</h2>
            <p>When you specify the MANIFEST VERBOSE option, the manifest file includes the
               following sections: </p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>The <code class="code">entries</code> section lists Amazon S3 path, file size, and row
                     count for each file. </p>
               </li><li class="listitem">
                  <p>The <code class="code">schema</code> section lists the column names, data types, and
                     dimension for each column. </p>
               </li><li class="listitem">
                  <p>The <code class="code">meta</code> section shows the total file size and row count for
                     all files. </p>
               </li></ul></div>
            <p>The following example unloads the VENUE table using the MANIFEST VERBOSE option. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/unload_venue_folder/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
manifest verbose;</code></pre>
            <p>The following shows the contents of the manifest file.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "entries": [
    <span>{</span>"url":"s3://mybucket/venue_pipe_0000_part_00", "meta": <span>{</span> "content_length": 32295, "record_count": 10 }},
    <span>{</span>"url":"s3://mybucket/venue_pipe_0001_part_00", "meta": <span>{</span> "content_length": 32771, "record_count": 20 }},
    <span>{</span>"url":"s3://mybucket/venue_pipe_0002_part_00", "meta": <span>{</span> "content_length": 32302, "record_count": 10 }},
    <span>{</span>"url":"s3://mybucket/venue_pipe_0003_part_00", "meta": <span>{</span> "content_length": 31810, "record_count": 15 }}
  ],
  "schema": <span>{</span>
    "elements": [
      <span>{</span>"name": "venueid", "type": <span>{</span> "base": "integer" }},
      <span>{</span>"name": "venuename", "type": <span>{</span> "base": "character varying", 25 }},
      <span>{</span>"name": "venuecity", "type": <span>{</span> "base": "character varying", 25 }},
      <span>{</span>"name": "venuestate", "type": <span>{</span> "base": "character varying", 25 }},
      <span>{</span>"name": "venueseats", "type": <span>{</span> "base": "character varying", 25 }}
    ]
  },
  "meta": <span>{</span>
    "content_length": 129178,
    "record_count": 55
  },
  "author": <span>{</span>
    "name": "Amazon Redshift",
    "version": "1.0.0"
  }
}</code></pre>
          
            <h2 id="unload-examples-header">Unload VENUE with a header</h2>
            <p>The following example unloads VENUE with a header row.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue where venueseats &gt; 75000')
to 's3://mybucket/unload/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
header
parallel off;</code></pre>
            <p>The following shows the contents of the output file with a header row.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">venueid|venuename|venuecity|venuestate|venueseats
6|New York Giants Stadium|East Rutherford|NJ|80242
78|INVESCO Field|Denver|CO|76125
83|FedExField|Landover|MD|91704
79|Arrowhead Stadium|Kansas City|MO|79451</code></pre>
          
            <h2 id="unload-examples-maxfilesize">Unload VENUE to smaller files</h2>
            <p>By default, the maximum file size is 6.2 GB. If the unload data is larger than 6.2
               GB, UNLOAD creates a new file for each 6.2 GB data segment. To create smaller files,
               include the MAXFILESIZE parameter. Assuming the size of the data in the previous
               example was 20 GB, the following UNLOAD command creates 20 files, each 1 GB in
               size.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/unload/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
maxfilesize 1 gb;
</code></pre>
          
            <h2 id="unload-examples-serial">Unload VENUE serially</h2>
            <p>To unload serially, specify PARALLEL OFF. UNLOAD then writes one file at a time,
               up to a maximum of 6.2 GB per file. </p>
            <p>The following example unloads the VENUE table and writes the data serially to
                  <code class="code">s3://mybucket/unload/</code>. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/unload/venue_serial_'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
parallel off;</code></pre>
            <p>The result is one file named venue_serial_000. </p>
            <p>If the unload data is larger than 6.2 GB, UNLOAD creates a new file for each 6.2
               GB data segment. The following example unloads the LINEORDER table and writes the
               data serially to <code class="code">s3://mybucket/unload/</code>. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from lineorder')
to 's3://mybucket/unload/lineorder_serial_'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
parallel off gzip;</code></pre>
            <p>The result is the following series of files.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">lineorder_serial_0000.gz
lineorder_serial_0001.gz
lineorder_serial_0002.gz
lineorder_serial_0003.gz</code></pre>
            <p>To better differentiate the output files, you can include a prefix in the
               location. The following example unloads the VENUE table and writes the data to
                  <code class="code">s3://mybucket/venue_pipe_</code>: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/unload/venue_pipe_'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole';</code></pre>
            <p>The result is these four files in the <code class="code">unload</code> folder, again assuming
               four slices.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">venue_pipe_0000_part_00
venue_pipe_0001_part_00
venue_pipe_0002_part_00
venue_pipe_0003_part_00</code></pre>
          
            <h2 id="unload-examples-load">Load VENUE from unload files</h2>
            <p>To load a table from a set of unload files, simply reverse the process by using a
               COPY command. The following example creates a new table, LOADVENUE, and loads the
               table from the data files created in the previous example.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">create table loadvenue (like venue);

copy loadvenue from 's3://mybucket/venue_pipe_' iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole';</code></pre>
            <p>If you used the MANIFEST option to create a manifest file with your unload files,
               you can load the data using the same manifest file. You do so with a COPY command
               with the MANIFEST option. The following example loads data using a manifest
               file.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">copy loadvenue
from 's3://mybucket/venue_pipe_manifest' iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
manifest;
</code></pre>
          
            <h2 id="unload-examples-unload-encrypted">Unload VENUE to encrypted
                  files</h2>
            <p>The following example unloads the VENUE table to a set of encrypted files using an AWS KMS key.
               If you specify a manifest file with the ENCRYPTED option, the manifest file
               is also encrypted. For more information, see <a href="./t_unloading_encrypted_files.html">Unloading encrypted data files</a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/venue_encrypt_kms'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
kms_key_id '1234abcd-12ab-34cd-56ef-1234567890ab'
manifest
encrypted;</code></pre>
            <p>The following example unloads the VENUE table to a set of encrypted files using a
               root symmetric key. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/venue_encrypt_cmk'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
master_symmetric_key 'EXAMPLEMASTERKEYtkbjk/OpCwtYSx/M4/t7DMCDIK722'
encrypted;</code></pre>
          
            <h2 id="unload-examples-load-encrypted">Load VENUE from encrypted
                  files</h2>
            <p>To load tables from a set of files that were created by using UNLOAD with the
               ENCRYPT option, reverse the process by using a COPY command. With that command, use
               the ENCRYPTED option and specify the same root symmetric key that was used for the
               UNLOAD command. The following example loads the LOADVENUE table from the encrypted
               data files created in the previous example.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">create table loadvenue (like venue);

copy loadvenue
from 's3://mybucket/venue_encrypt_manifest'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
master_symmetric_key 'EXAMPLEMASTERKEYtkbjk/OpCwtYSx/M4/t7DMCDIK722'
manifest
encrypted;</code></pre>
          
            <h2 id="unload-examples-venue-tab">Unload VENUE data to a tab-delimited
                  file</h2>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select venueid, venuename, venueseats from venue')
to 's3://mybucket/venue_tab_'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
delimiter as '\t';</code></pre>
            <p>The output data files look like this: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">1	Toyota Park	Bridgeview	IL	0
2	Columbus Crew Stadium	Columbus	OH	0
3	RFK Stadium	Washington	DC	0
4	CommunityAmerica Ballpark	Kansas City	KS	0
5	Gillette Stadium	Foxborough	MA	68756
...</code></pre>
          
            <h2 id="unload-venue-fixed-width">Unload VENUE to a fixed-width data
                  file</h2>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/venue_fw_'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
fixedwidth as 'venueid:3,venuename:39,venuecity:16,venuestate:2,venueseats:6';</code></pre>
            <p>The output data files look like the following. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">1  Toyota Park              Bridgeview  IL0
2  Columbus Crew Stadium    Columbus    OH0
3  RFK Stadium              Washington  DC0
4  CommunityAmerica BallparkKansas City KS0
5  Gillette Stadium         Foxborough  MA68756
...</code></pre>
          
            <h2 id="unload-examples-venue-gzip">Unload VENUE to a set of tab-delimited
                  GZIP-compressed files</h2>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/venue_tab_'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
delimiter as '\t'
gzip;</code></pre>
          
            <h2 id="unload-examples-venue-extension-gzip">Unload VENUE to a GZIP-compressed text file</h2>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/venue_tab_'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
extension 'txt.gz'
gzip;
</code></pre>
          
            <h2 id="unload-examples-delimiter">Unload data that contains a
                  delimiter</h2>
            <p>This example uses the ADDQUOTES option to unload comma-delimited data where some
               of the actual data fields contain a comma.</p>
            <p>First, create a table that contains quotation marks.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">create table location (id int, location char(64));

insert into location values (1,'Phoenix, AZ'),(2,'San Diego, CA'),(3,'Chicago, IL');</code></pre>
            <p>Then, unload the data using the ADDQUOTES option.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select id, location from location')
to 's3://mybucket/location_'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
delimiter ',' addquotes;</code></pre>
            <p>The unloaded data files look like this: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">1,"Phoenix, AZ"
2,"San Diego, CA"
3,"Chicago, IL"
...</code></pre>
          
            <h2 id="unload-examples-join">Unload the results of a join query</h2>
            <p>The following example unloads the results of a join query that contains a window
               function. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select venuecity, venuestate, caldate, pricepaid,
sum(pricepaid) over(partition by venuecity, venuestate
order by caldate rows between 3 preceding and 3 following) as winsum
from sales join date on sales.dateid=date.dateid
join event on event.eventid=sales.eventid
join venue on event.venueid=venue.venueid
order by 1,2')
to 's3://mybucket/tickit/winsum'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole';</code></pre>
            <p>The output files look like this: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">Atlanta|GA|2008-01-04|363.00|1362.00
Atlanta|GA|2008-01-05|233.00|2030.00
Atlanta|GA|2008-01-06|310.00|3135.00
Atlanta|GA|2008-01-08|166.00|8338.00
Atlanta|GA|2008-01-11|268.00|7630.00
...</code></pre>
          
            <h2 id="unload-examples-null-as">Unload using NULL AS</h2>
            <p>UNLOAD outputs null values as empty strings by default. The following examples
               show how to use NULL AS to substitute a text string for nulls.</p>
            <p>For these examples, we add some null values to the VENUE table.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">update venue set venuestate = NULL
where venuecity = 'Cleveland';</code></pre>
            <p>Select from VENUE where VENUESTATE is null to verify that the columns contain
               NULL.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql "><code class="userinput">select * from venue where venuestate is null;</code>
<code class="computeroutput" copy="false">
 venueid |        venuename         | venuecity | venuestate | venueseats
---------+--------------------------+-----------+------------+------------
      22 | Quicken Loans Arena      | Cleveland |            |          0
     101 | Progressive Field        | Cleveland |            |      43345
      72 | Cleveland Browns Stadium | Cleveland |            |      73200
</code></code></pre>
            <p>Now, UNLOAD the VENUE table using the NULL AS option to replace null values with
               the character string '<code class="code">fred</code>'. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/nulls/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
null as 'fred';</code></pre>
            <p>The following sample from the unload file shows that null values were replaced
               with <code class="code">fred</code>. It turns out that some values for VENUESEATS were also null
               and were replaced with <code class="code">fred</code>. Even though the data type for VENUESEATS is
               integer, UNLOAD converts the values to text in the unload files, and then COPY
               converts them back to integer. If you are unloading to a fixed-width file, the NULL
               AS string must not be larger than the field width.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">248|Charles Playhouse|Boston|MA|0
251|Paris Hotel|Las Vegas|NV|fred
258|Tropicana Hotel|Las Vegas|NV|fred
300|Kennedy Center Opera House|Washington|DC|0
306|Lyric Opera House|Baltimore|MD|0
308|Metropolitan Opera|New York City|NY|0
  5|Gillette Stadium|Foxborough|MA|5
 22|Quicken Loans Arena|Cleveland|fred|0
101|Progressive Field|Cleveland|fred|43345
...</code></pre>
            <p>To load a table from the unload files, use a COPY command with the same NULL AS
               option. </p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you attempt to load nulls into a column defined as NOT NULL, the COPY
                  command fails.</p></div></div>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">create table loadvenuenulls (like venue);

copy loadvenuenulls from 's3://mybucket/nulls/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
null as 'fred';</code></pre>
            <p>To verify that the columns contain null, not just empty strings, select from
               LOADVENUENULLS and filter for null.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql "><code class="userinput">select * from loadvenuenulls where venuestate is null or venueseats is null;</code>
<code class="computeroutput" copy="false">
 venueid |        venuename         | venuecity | venuestate | venueseats
---------+--------------------------+-----------+------------+------------
      72 | Cleveland Browns Stadium | Cleveland |            |      73200
     253 | Mirage Hotel             | Las Vegas | NV         |
     255 | Venetian Hotel           | Las Vegas | NV         |
      22 | Quicken Loans Arena      | Cleveland |            |          0
     101 | Progressive Field        | Cleveland |            |      43345
     251 | Paris Hotel              | Las Vegas | NV         |

...</code></code></pre>
            <p>You can UNLOAD a table that contains nulls using the default NULL AS behavior and
               then COPY the data back into a table using the default NULL AS behavior; however, any
               non-numeric fields in the target table contain empty strings, not nulls. By default
               UNLOAD converts nulls to empty strings (white space or zero-length). COPY converts
               empty strings to NULL for numeric columns, but inserts empty strings into non-numeric
               columns. The following example shows how to perform an UNLOAD followed by a COPY
               using the default NULL AS behavior. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/nulls/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole' allowoverwrite;

truncate loadvenuenulls;
copy loadvenuenulls from 's3://mybucket/nulls/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole';</code></pre>
            <p>In this case, when you filter for nulls, only the rows where VENUESEATS contained
               nulls. Where VENUESTATE contained nulls in the table (VENUE), VENUESTATE in the
               target table (LOADVENUENULLS) contains empty strings.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql "><code class="userinput">select * from loadvenuenulls where venuestate is null or venueseats is null;</code>
<code class="computeroutput" copy="false">
 venueid |        venuename         | venuecity | venuestate | venueseats
---------+--------------------------+-----------+------------+------------
     253 | Mirage Hotel             | Las Vegas | NV         |
     255 | Venetian Hotel           | Las Vegas | NV         |
     251 | Paris Hotel              | Las Vegas | NV         |
...</code></code></pre>
            <p>To load empty strings to non-numeric columns as NULL, include the EMPTYASNULL or
               BLANKSASNULL options. It's OK to use both.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/nulls/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole' allowoverwrite;

truncate loadvenuenulls;
copy loadvenuenulls from 's3://mybucket/nulls/'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole' EMPTYASNULL;</code></pre>
            <p>To verify that the columns contain NULL, not just whitespace or empty strings,
               select from LOADVENUENULLS and filter for null.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql "><code class="userinput">select * from loadvenuenulls where venuestate is null or venueseats is null;</code>
<code class="computeroutput" copy="false">
 venueid |        venuename         | venuecity | venuestate | venueseats
---------+--------------------------+-----------+------------+------------
      72 | Cleveland Browns Stadium | Cleveland |            |      73200
     253 | Mirage Hotel             | Las Vegas | NV         |
     255 | Venetian Hotel           | Las Vegas | NV         |
      22 | Quicken Loans Arena      | Cleveland |            |          0
     101 | Progressive Field        | Cleveland |            |      43345
     251 | Paris Hotel              | Las Vegas | NV         |
     ...</code></code></pre>
          
            <h2 id="unload-examples-allowoverwrite">Unload using ALLOWOVERWRITE parameter</h2>
            <p>By default, UNLOAD doesn't overwrite existing files in the destination
               bucket. For example, if you run the same UNLOAD statement twice without modifying the
               files in the destination bucket, the second UNLOAD fails. To overwrite the existing
               files, including the manifest file, specify the ALLOWOVERWRITE option.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue')
to 's3://mybucket/venue_pipe_'
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
manifest allowoverwrite;</code></pre>
          
            
            <h2 id="unload-examples-manifest-parallel">Unload EVENT table using PARALLEL and MANIFEST parameters</h2>
            <p>You can UNLOAD a table in parallel and generate a manifest file.
               The Amazon S3 data files are all created at the same level and names are suffixed with the pattern <code class="code">0000_part_00</code>.
               The manifest file is at the same folder level as the data files and suffixed with the text <code class="code">manifest</code>.
               The following SQL unloads the EVENT table and creates files with the base name <code class="code">parallel</code></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from mytickit1.event')
to 's3://my-s3-bucket-name/parallel'
iam_role 'arn:aws:iam::123456789012:role/MyRedshiftRole'
parallel on
manifest;</code></pre>
            <p>The Amazon S3 files listing is similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 Name                       Last modified                        Size                  
 parallel0000_part_00	-   August 2, 2023, 14:54:39 (UTC-07:00) 52.1 KB  
 parallel0001_part_00	-   August 2, 2023, 14:54:39 (UTC-07:00) 53.4 KB
 parallel0002_part_00	-   August 2, 2023, 14:54:39 (UTC-07:00) 52.1 KB
 parallel0003_part_00	-   August 2, 2023, 14:54:39 (UTC-07:00) 51.1 KB
 parallel0004_part_00	-   August 2, 2023, 14:54:39 (UTC-07:00) 54.6 KB
 parallel0005_part_00	-   August 2, 2023, 14:54:39 (UTC-07:00) 53.4 KB
 parallel0006_part_00	-   August 2, 2023, 14:54:39 (UTC-07:00) 54.1 KB
 parallel0007_part_00	-   August 2, 2023, 14:54:39 (UTC-07:00) 55.9 KB
 parallelmanifest       -   August 2, 2023, 14:54:39 (UTC-07:00) 886.0 B                           
</code></pre>
            <p>The <code class="code">parallelmanifest</code> file content is similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="JSON ">
<span>{</span>
  "entries": [
    <span>{</span>"url":"s3://my-s3-bucket-name/parallel0000_part_00", "meta": <span>{</span> "content_length": 53316 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/parallel0001_part_00", "meta": <span>{</span> "content_length": 54704 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/parallel0002_part_00", "meta": <span>{</span> "content_length": 53326 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/parallel0003_part_00", "meta": <span>{</span> "content_length": 52356 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/parallel0004_part_00", "meta": <span>{</span> "content_length": 55933 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/parallel0005_part_00", "meta": <span>{</span> "content_length": 54648 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/parallel0006_part_00", "meta": <span>{</span> "content_length": 55436 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/parallel0007_part_00", "meta": <span>{</span> "content_length": 57272 }}
  ]
}                         
</code></pre>
          
            
            <h2 id="unload-examples-manifest-serial">Unload EVENT table using PARALLEL OFF and MANIFEST parameters</h2>
            <p>You can UNLOAD a table serially (PARALLEL OFF) and generate a manifest file.
               The Amazon S3 data files are all created at the same level and names are suffixed with the pattern <code class="code">0000</code>.
               The manifest file is at the same folder level as the data files and suffixed with the text <code class="code">manifest</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from mytickit1.event')
to 's3://my-s3-bucket-name/serial'
iam_role 'arn:aws:iam::123456789012:role/MyRedshiftRole'
parallel off
manifest;</code></pre>
            <p>The Amazon S3 files listing is similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 Name                       Last modified                        Size                  
 serial0000             -   August 2, 2023, 15:54:39 (UTC-07:00) 426.7 KB  
 serialmanifest         -   August 2, 2023, 15:54:39 (UTC-07:00) 120.0 B                           
</code></pre>
            <p>The <code class="code">serialmanifest</code> file content is similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="JSON ">
<span>{</span>
  "entries": [
    <span>{</span>"url":"s3://my-s3-bucket-name/serial000", "meta": <span>{</span> "content_length": 436991 }}
  ]
}                         
</code></pre>
          
            
            <h2 id="unload-examples-manifest-partition">Unload EVENT table using PARTITION BY and MANIFEST parameters</h2>
            <p>You can UNLOAD a table by partition and generate a manifest file.
               A new folder is created in Amazon S3 with child partition folders, and the data files in the child folders with a name pattern similar to <code class="code">0000_par_00</code>.
               The manifest file is at the same folder level as the child folders with the name <code class="code">manifest</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from mytickit1.event')
to 's3://my-s3-bucket-name/partition'
iam_role 'arn:aws:iam::123456789012:role/MyRedshiftRole'
partition by (eventname)
manifest;</code></pre>
            <p>The Amazon S3 files listing is similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 Name                   Type     Last modified                        Size                  
 partition           	Folder	                     
</code></pre>
            <p>In the <code class="code">partition</code> folder are child folders with the partition name and the manifest file. 
               Shown following is the bottom of the list of folders in the <code class="code">partition</code> folder, similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 Name                   Type      Last modified                        Size                  
 ...
 eventname=Zucchero/    Folder 
 eventname=Zumanity/    Folder 
 eventname=ZZ Top/      Folder  
 manifest          	    -	    August 2, 2023, 15:54:39 (UTC-07:00) 467.6 KB                           
</code></pre>
            <p>In the <code class="code">eventname=Zucchero/</code> folder are the data files similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 Name               Last modified                        Size                  
 0000_part_00	-   August 2, 2023, 15:59:19 (UTC-07:00) 70.0 B
 0001_part_00	-   August 2, 2023, 15:59:16 (UTC-07:00) 106.0 B
 0002_part_00	-   August 2, 2023, 15:59:15 (UTC-07:00) 70.0 B
 0004_part_00	-   August 2, 2023, 15:59:17 (UTC-07:00) 141.0 B
 0006_part_00	-   August 2, 2023, 15:59:16 (UTC-07:00) 35.0 B
 0007_part_00	-   August 2, 2023, 15:59:19 (UTC-07:00) 108.0 B                       
</code></pre>
            <p>The bottom of the <code class="code">manifest</code> file content is similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="JSON ">
<span>{</span>
  "entries": [
    ...
    <span>{</span>"url":"s3://my-s3-bucket-name/partition/eventname=Zucchero/0007_part_00", "meta": <span>{</span> "content_length": 108 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/partition/eventname=Zumanity/0007_part_00", "meta": <span>{</span> "content_length": 72 }}
  ]
}                         
</code></pre>
          
            
            <h2 id="unload-examples-manifest-maxsize">Unload EVENT table using MAXFILESIZE, ROWGROUPSIZE, and MANIFEST parameters</h2>
            <p>You can UNLOAD a table in parallel and generate a manifest file.
               The Amazon S3 data files are all created at the same level and names are suffixed with the pattern <code class="code">0000_part_00</code>. 
               The generated Parquet data files are limited to 256 MB and row group size 128 MB.
               The manifest file is at the same folder level as the data files and suffixed with <code class="code">manifest</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from mytickit1.event')
to 's3://my-s3-bucket-name/eventsize'
iam_role 'arn:aws:iam::123456789012:role/MyRedshiftRole'
maxfilesize 256 MB
rowgroupsize 128 MB
parallel on
parquet
manifest;</code></pre>
            <p>The Amazon S3 files listing is similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 Name                            Type      Last modified                        Size 
 eventsize0000_part_00.parquet	parquet	August 2, 2023, 17:35:21 (UTC-07:00) 24.5 KB
 eventsize0001_part_00.parquet	parquet	August 2, 2023, 17:35:21 (UTC-07:00) 24.8 KB
 eventsize0002_part_00.parquet	parquet	August 2, 2023, 17:35:21 (UTC-07:00) 24.4 KB
 eventsize0003_part_00.parquet	parquet	August 2, 2023, 17:35:21 (UTC-07:00) 24.0 KB
 eventsize0004_part_00.parquet	parquet	August 2, 2023, 17:35:21 (UTC-07:00) 25.3 KB
 eventsize0005_part_00.parquet	parquet	August 2, 2023, 17:35:21 (UTC-07:00) 24.8 KB
 eventsize0006_part_00.parquet	parquet	August 2, 2023, 17:35:21 (UTC-07:00) 25.0 KB
 eventsize0007_part_00.parquet	parquet	August 2, 2023, 17:35:21 (UTC-07:00) 25.6 KB
 eventsizemanifest                 -       August 2, 2023, 17:35:21 (UTC-07:00) 958.0 B                        
</code></pre>
            <p>The <code class="code">eventsizemanifest</code> file content is similar to the following.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="JSON ">
<span>{</span>
  "entries": [
    <span>{</span>"url":"s3://my-s3-bucket-name/eventsize0000_part_00.parquet", "meta": <span>{</span> "content_length": 25130 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/eventsize0001_part_00.parquet", "meta": <span>{</span> "content_length": 25428 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/eventsize0002_part_00.parquet", "meta": <span>{</span> "content_length": 25025 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/eventsize0003_part_00.parquet", "meta": <span>{</span> "content_length": 24554 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/eventsize0004_part_00.parquet", "meta": <span>{</span> "content_length": 25918 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/eventsize0005_part_00.parquet", "meta": <span>{</span> "content_length": 25362 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/eventsize0006_part_00.parquet", "meta": <span>{</span> "content_length": 25647 }},
    <span>{</span>"url":"s3://my-s3-bucket-name/eventsize0007_part_00.parquet", "meta": <span>{</span> "content_length": 26256 }}
  ]
}                       
</code></pre>
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_UNLOAD.html">UNLOAD</div><div id="next" class="next-link" accesskey="n" href="./r_UPDATE.html">UPDATE</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_UNLOAD_command_examples.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_UNLOAD_command_examples.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>