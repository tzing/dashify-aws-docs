<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE DATABASE - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_DATABASE" /><meta name="default_state" content="r_CREATE_DATABASE" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_DATABASE.html" /><meta name="description" content="Creates a new database." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_DATABASE.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_DATABASE.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="CREATE DATABASE" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE DATABASE - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_CREATE_DATABASE" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_DATABASE.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_DATABASE.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_DATABASE.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL commands",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE DATABASE",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_CREATE_DATABASE" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#r_CREATE_DATABASE-synopsis">Syntax</a><a href="#r_CREATE_DATABASE-parameters">Parameters</a><a href="#r_CREATE_DATABASE-datashare-synopsis">Syntax for use with a datashare</a><a href="#r_CREATE_DATABASE-usage">Usage notes for CREATE DATABASE for data sharing</a><a href="#r_CREATE_DATABASE_data-catalog">CREATE DATABASE from AWS Glue Data Catalog</a><a href="#r_CREATE_DATABASE-create-database-limits">CREATE DATABASE limits</a><a href="#r_CREATE_DATABASE-collation">Database collation for CREATE DATABASE</a><a href="#r_CREATE_DATABASE-examples">Examples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_CREATE_DATABASE">CREATE DATABASE</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Creates a new database.</p><p>To create a database, you must be a superuser or have the CREATEDB privilege.</p><p>You can't run CREATE DATABASE within a transaction block (BEGIN ... END). For more
         information about transactions, see <a href="./c_serial_isolation.html">Serializable isolation</a>. </p>
         <h2 id="r_CREATE_DATABASE-synopsis">Syntax</h2>


         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE DATABASE <em>database_name</em> [ WITH ]
[ OWNER [=] <em>db_owner</em> ]
[ CONNECTION LIMIT <span>{</span> <em>limit</em> | UNLIMITED } ]
[ COLLATE <span>{</span> CASE_SENSITIVE | CASE_INSENSITIVE } ]
[ ISOLATION LEVEL <span>{</span> SERIALIZABLE | SNAPSHOT } ]
[ [ WITH PERMISSIONS ] FROM DATASHARE datashare_name ] OF [ ACCOUNT account_id ] NAMESPACE namespace_guid 
| [ FROM ARN '&lt;arn&gt;' <span>{</span> WITH DATA CATALOG SCHEMA '&lt;schema&gt;' | WITH NO DATA CATALOG SCHEMA } 
[ IAM_ROLE  default | 'SESSION' | 'arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;' ] ]</code></pre>


       
         <h2 id="r_CREATE_DATABASE-parameters">Parameters</h2>
         <div class="variablelist">
             
             
             
             
             
             

             

             
             
             
             


         <dl>
               <dt><span class="term">
                  <em>database_name</em>
               </span></dt>
               <dd>
                  <p>Name of the new database. For more information about valid names, see <a href="./r_names.html">Names and identifiers</a>.</p>
               </dd>
             
               <dt><span class="term">WITH </span></dt>
               <dd>
                  <p>Optional keyword.</p>
               </dd>
             
               <dt><span class="term">OWNER </span></dt>
               <dd>
                  <p>Specifies a database owner.</p>
               </dd>
             
               <dt><span class="term">= </span></dt>
               <dd>
                  <p>Optional character.</p>
               </dd>
             
               <dt><span class="term">
                  <em>db_owner</em>
               </span></dt>
               <dd>
                  <p>Username for the database owner.</p>
               </dd>
             
               <dt><span class="term">CONNECTION LIMIT <span>{</span> <em>limit</em> | UNLIMITED } </span></dt>
               <dd>
                  <p>The maximum number of database connections users are permitted to have open
                     concurrently. The limit isn't enforced for superusers. Use the UNLIMITED
                     keyword to permit the maximum number of concurrent connections.
                     
                     A limit on the number of connections for each user might also apply. For more
                     information, see <a href="./r_CREATE_USER.html">CREATE USER</a>.
                     The default is UNLIMITED. To view current connections, query the <a href="./r_STV_SESSIONS.html">STV_SESSIONS</a> system
                     view.</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If both user and database connection limits apply, an unused connection
                        slot must be available that is within both limits when a user attempts to
                        connect.</p></div></div>
               </dd>
             
               
               <dt><span class="term">COLLATE <span>{</span> CASE_SENSITIVE | CASE_INSENSITIVE }</span></dt>
               <dd>
                  <p>A clause that specifies whether string search or comparison is
                     CASE_SENSITIVE or CASE_INSENSITIVE. The default is CASE_SENSITIVE.</p>
               </dd>
             
               
               <dt><span class="term">ISOLATION LEVEL <span>{</span> SERIALIZABLE | SNAPSHOT }</span></dt>
               <dd>
                  <p>A clause that specifies the isolation level used when queries run against a database.</p>
                     <div class="itemizedlist">
                         
                         
                     <ul class="itemizedlist"><li class="listitem"><p>SERIALIZABLE isolation – provides full serializability for concurrent transactions.
                           This is the default for a database created in a provisioned cluster. For more information, see
                           <a href="./c_serial_isolation.html">Serializable isolation</a>.</p></li><li class="listitem"><p>SNAPSHOT isolation – provides an isolation level with protection against update and delete conflicts.
                           This is the default for a database created in a serverless namespace.
                        </p></li></ul></div>
                  <p>You can view which concurrency model your database is running as follows: </p>
                  <div class="itemizedlist">
                     
                      
                      
                  <ul class="itemizedlist"><li class="listitem"><p>Query the STV_DB_ISOLATION_LEVEL catalog view. For more information, see
                        <a href="./r_STV_DB_ISOLATION_LEVEL.html">STV_DB_ISOLATION_LEVEL</a>.</p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT * FROM stv_db_isolation_level;</code></pre>
                     </li><li class="listitem"><p>Query the PG_DATABASE_INFO view. </p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT datname, datconfig FROM pg_database_info;</code></pre>
                        <p>The isolation level per database appears next to the key <code class="code">concurrency_model</code>.
                           A value of <code class="code">1</code> denotes SNAPSHOT.
                           A value of <code class="code">2</code> denotes SERIALIZABLE.
                           

                        </p> </li></ul></div>

                  <p>In Amazon Redshift databases, both SERIALIZABLE and SNAPSHOT isolation are types of serializable isolation levels.
                     That is, dirty reads, non-repeatable reads, and phantom reads are prevented according to the SQL standard.
                     Both isolation levels guarantee that a transaction operates on a snapshot of data as it exists when the transaction begins,
                     and that no other transaction can change that snapshot.
                     However, SNAPSHOT isolation doesn't provide full serializability, because it doesn't prevent write skew inserts and updates on different table rows.</p>
                  <p>The following scenario illustrates write skew updates using the SNAPSHOT isolation level.
                     A table named <code class="code">Numbers</code> contains a column named <code class="code">digits</code> that contains <code class="code">0</code> and <code class="code">1</code> values.
                     Each user's UPDATE statement doesn't overlap the other user. However, the <code class="code">0</code> and <code class="code">1</code> values are swapped.
                     The SQL they run follows this timeline with these results:</p>
                  
                  <div class="table-container"><div class="table-contents disable-scroll"><table id="w323aac67c10d101c13b3c15b5c15"><thead>
                           <tr>
                              <th>Time </th>
                              <th>User 1 action </th>
                              <th>User 2 action </th>
                           </tr>
                        </thead>
                           <tr>
                              <td tabindex="-1">1</td>
                              <td tabindex="-1">BEGIN;</td>
                              <td tabindex="-1"></td>
                           </tr>
                           <tr>
                              <td tabindex="-1">2</td>
                              <td tabindex="-1"></td>
                              <td tabindex="-1">BEGIN;</td>
                           </tr>
                           <tr>
                              <td tabindex="-1">3</td>

                              <td tabindex="-1">SELECT * FROM Numbers;
                                 <pre class="screen">
digits
------
0
1</pre></td>
                              <td tabindex="-1"></td>
                           </tr>
                           <tr>
                              <td tabindex="-1">4</td>
                              <td tabindex="-1"></td>
                              <td tabindex="-1">SELECT * FROM Numbers;
                                 <pre class="screen">
digits
------
0
1</pre></td>

                           </tr>
                           <tr>
                              <td tabindex="-1">5</td>
                              <td tabindex="-1">UPDATE Numbers SET digits=0 WHERE digits=1;</td>
                              <td tabindex="-1"></td>
                           </tr>
                           <tr>
                              <td tabindex="-1">6</td>
                              <td tabindex="-1">SELECT * FROM Numbers;
                                 <pre class="screen">
digits
------
0
0</pre></td>
                              <td tabindex="-1"></td>
                           </tr>

                           <tr>
                              <td tabindex="-1">7</td>
                              <td tabindex="-1">COMMIT;</td>
                              <td tabindex="-1"></td>
                           </tr>

                           <tr>
                              <td tabindex="-1">8</td>
                              <td tabindex="-1"></td>
                              <td tabindex="-1">Update Numbers SET digits=1 WHERE digits=0;</td>
                           </tr>



                           <tr>
                              <td tabindex="-1">9</td>
                              <td tabindex="-1"></td>
                              <td tabindex="-1">SELECT * FROM Numbers;
                                 <pre class="screen">
digits
------
1
1</pre></td>

                           </tr>



                           <tr>
                              <td tabindex="-1">10</td>
                              <td tabindex="-1"></td>
                              <td tabindex="-1">COMMIT;</td>
                           </tr>

                           <tr>
                              <td tabindex="-1">11</td>
                              <td tabindex="-1">SELECT * FROM Numbers;
                                 <pre class="screen">
digits
------
1
0</pre></td>
                              <td tabindex="-1"></td>
                           </tr>

                           <tr>
                              <td tabindex="-1">12</td>
                              <td tabindex="-1"></td>
                              <td tabindex="-1">SELECT * FROM Numbers;
<pre class="screen">
digits
------
1
0</pre></td>

                           </tr>
                        </table></div></div>
                  <p>If the same scenario is run using serializable isolation, then Amazon Redshift terminates user 2 due to a serializable violation and returns error <code class="code">1023</code>.
                     For more information, see
                     <a href="./c_serial_isolation.html#c_serial_isolation-serializable-isolation-troubleshooting">How to
                  fix serializable isolation errors</a>.
                     In this case, only user 1 can commit successfully. Not all workloads require serializable isolation as a requirement,
                     in which case snapshot isolation suffices as the target isolation level for your database.</p>

               </dd>
             
               <dt><span class="term">ARN '&lt;ARN&gt;'</span></dt>
               <dd>
                  <p>The AWS Glue database ARN to use to create the database.</p>
               </dd>
             
               <dt><span class="term"><span>{</span> WITH NO DATA CATALOG SCHEMA | DATA CATALOG SCHEMA '&lt;schema&gt;' }</span></dt>
               <dd>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This parameter is only applicable if your CREATE DATABASE command also uses the 
                  FROM ARN parameter.</p></div></div>
                  <p>Specifies whether to create the database using a schema to help access objects in the AWS Glue Data Catalog.</p>
               </dd>
             
               <dt><span class="term">IAM_ROLE <span>{</span> default | 'SESSION' | 'arn:aws:iam::<code class="replaceable">&lt;AWS account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>'
                  }</span></dt>
               <dd>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This parameter is only applicable if your CREATE DATABASE command also uses the 
                     FROM ARN parameter.</p></div></div>
                  <p>If you specify an IAM role that is associated with the cluster when running the CREATE DATABASE command, 
                     Amazon Redshift will use the role’s credentials when you run queries on the database.</p>
                  
                  <p>Specifying the <code class="code">default</code> keyword means to use the IAM role that's set 
                     as the default and associated with the cluster.</p>
                  <p>Use <code class="code">'SESSION'</code> if you connect to your Amazon Redshift cluster using a federated identity and access the
                     tables from the external schema created using this command. For an example of using a federated identity,
                     see <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Using a federated identity to manage Amazon Redshift access to local resources and Amazon Redshift Spectrum external tables</a>,
                     which explains how to configure federated identity.
                  </p>
                  
                  <p>Use the Amazon Resource Name (ARN) for an IAM role that your cluster uses
                     for authentication and authorization. As a minimum, the IAM role must have
                     permission to perform a LIST operation on the Amazon S3 bucket to be accessed and a
                     GET operation on the Amazon S3 objects the bucket contains. To learn more about using IAM_ROLE 
                     when creating a database using AWS Glue Data Catalog for datashares, see <a href="https://docs.aws.amazon.com/redshift/latest/dg/lake-formation-getting-started-consumer.html">Working with Lake Formation-managed datashares as a consumer</a>.</p>
                  <p>The following shows the syntax for the IAM_ROLE parameter string for a
                     single ARN.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">IAM_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>'</code></pre>
                  <p>You can chain roles so that your cluster can assume another IAM role,
                     possibly belonging to another account. You can chain up to 10 roles. For more
                     information, see <a href="./c-spectrum-iam-policies.html#c-spectrum-chaining-roles">Chaining IAM roles in Amazon Redshift Spectrum</a>. </p>
                  <p> To this IAM role, attach an IAM permissions policy similar to the
                     following.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "AccessSecret",
            "Effect": "Allow",
            "Action": [
                "secretsmanager:GetResourcePolicy",
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
                "secretsmanager:ListSecretVersionIds"
            ],
            "Resource": "arn:aws:secretsmanager:<code class="replaceable">us-west-2</code>:<code class="replaceable">123456789012</code>:secret:my-rds-secret-VNenFy"
        },
        <span>{</span>
            "Sid": "VisualEditor1",
            "Effect": "Allow",
            "Action": [
                "secretsmanager:GetRandomPassword",
                "secretsmanager:ListSecrets"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
                  <p>For the steps to create an IAM role to use with federated query, see <a href="./federated-create-secret-iam-role.html">Creating a secret and an IAM role to use
            federated queries</a>. </p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Don't include spaces in the list of chained roles.</p></div></div>
                  <p>The following shows the syntax for chaining three roles.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">IAM_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-1-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-2-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-3-name&gt;</code>'</code></pre>
               </dd>
            </dl></div>
       
               <h2 id="r_CREATE_DATABASE-datashare-synopsis">Syntax for using CREATE
               DATABASE with a datashare</h2>
               

               <p>The following syntax describes the CREATE DATABASE command used to create
            databases from a datashare for sharing data within the same AWS account.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE DATABASE <em>database_name</em>
[ [ WITH PERMISSIONS ] FROM DATASHARE <em>datashare_name</em> ] OF [ ACCOUNT account_id ] NAMESPACE <em>namespace_guid</em></code></pre>  
               <p>The following syntax describes the CREATE DATABASE command used to create
                  databases from a datashare for sharing data across AWS accounts.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE DATABASE <em>database_name</em>
[ [ WITH PERMISSIONS ] FROM DATASHARE <em>datashare_name</em> ] OF ACCOUNT <em>account_id</em> NAMESPACE <em>namespace_guid</em></code></pre>

                
                  <h3 id="r_CREATE_DATABASE-parameters-datashare">Parameters for using
                  CREATE DATABASE with a datashare</h3>
                  <div class="variablelist">
                   
             
                     
                        
                      
             
         <dl>
               <dt><span class="term">FROM DATASHARE </span></dt>
               <dd>
                  <p>A keyword that indicates where the datashare is located.</p>
               </dd>
             
               <dt><span class="term">
                  <em>datashare_name</em>
               </span></dt>
               <dd>
                  <p>The name of the datashare that the consumer database is created on.</p>
               </dd>
             
                        <dt><span class="term">WITH PERMISSIONS</span></dt>

                        <dd>
                           <p>Specifies that the database created from the datashare requires object-level permissions 
                              to access individual database objects. Without this clause, users or roles 
                              granted the USAGE permission on the database will automatically 
                              have access to all database objects in the database.</p>
                           
                        </dd>
                      
                        <dt><span class="term">
                          NAMESPACE <em>namespace_guid</em>
                        </span></dt>
                        <dd>
                           <p>A value that specifies the producer namespace that the datashare
                        belongs to.</p>
                        </dd>
                      
               <dt><span class="term">ACCOUNT <em>account_id</em></span></dt>
               <dd>
                  <p>A value that specifies the producer account that the datashare belongs
                        to.</p>
               </dd>
            </dl></div>
                
       
         <h2 id="r_CREATE_DATABASE-usage">Usage notes for CREATE DATABASE for data sharing</h2>
         <p>As a database superuser, when you use CREATE DATABASE to create databases
            from datashares within the AWS account, specify the NAMESPACE option. The ACCOUNT option is
            optional. When you use CREATE DATABASE to create databases from datashares across AWS accounts, specify both the
            ACCOUNT and NAMESPACE from the producer.</p>
         <p>You can create only one consumer database for one datashare on a consumer cluster. You can't create multiple consumer databases referring to the same datashare.</p>
       
         <h2 id="r_CREATE_DATABASE_data-catalog">CREATE DATABASE from AWS Glue Data Catalog</h2>
         <p>To create a database using an AWS Glue database ARN, specify the ARN in your CREATE DATABASE command.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sampledb FROM ARN &lt;glue-database-arn&gt; WITH NO DATA CATALOG SCHEMA;</code></pre>
         <p>Optionally, you can also supply a value into the IAM_ROLE parameter. For more information
            about the parameter and accepted values, see <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_DATABASE.html#r_CREATE_DATABASE-parameters">Parameters</a>.</p>
         
         <p>The following are examples that demonstrate how to create a database from an ARN using an IAM role.</p>
         
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sampledb FROM ARN &lt;glue-database-arn&gt; WITH NO DATA CATALOG SCHEMA IAM_ROLE &lt;iam-role-arn&gt;</code></pre>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sampledb FROM ARN &lt;glue-database-arn&gt; WITH NO DATA CATALOG SCHEMA IAM_ROLE default;</code></pre>
         <p>You can also create a database using a DATA CATALOG SCHEMA.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sampledb FROM ARN &lt;glue-database-arn&gt; WITH DATA CATALOG SCHEMA &lt;sample_schema&gt; IAM_ROLE default;</code></pre>
       
         <h2 id="r_CREATE_DATABASE-create-database-limits">CREATE DATABASE
               limits</h2>
         <p>Amazon Redshift enforces these limits for databases:</p>
         <div class="itemizedlist">
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Maximum of 60 user-defined databases per cluster.</p>
            </li><li class="listitem">
               <p>Maximum of 127 bytes for a database name.</p>
            </li><li class="listitem">
               <p>A database name can't be a reserved word.
               </p>
            </li></ul></div>
       
         <h2 id="r_CREATE_DATABASE-collation">Database collation</h2>
         <p>Collation is a set of rules that defines how database engine compares and sorts the
            character type data in SQL. Case-insensitive collation is the most commonly used
            collation. Amazon Redshift uses case-insensitive collation to facilitate migration from other
            data warehouse systems. With the native support of case-insensitive collation, Amazon Redshift
            continues to use important tuning or optimization methods, such as distribution keys,
            sort keys, or range restricted scan. </p>
         <p>The COLLATE clause specifies the default collation for all CHAR and VARCHAR columns
            in the database. If CASE_INSENSITIVE is specified, all CHAR or VARCHAR columns use
            case-insensitive collation. For information about collation, see <a href="./c_collation_sequences.html">Collation sequences</a>.</p>
         <p>Data inserted or ingested in case-insensitive columns will keep its original case.
            But all comparison-based string operations including sorting and grouping are
            case-insensitive. Pattern matching operations such as LIKE predicates, similar to, and
            regular expression functions are also case-insensitive.</p>

         <p>The following SQL operations support applicable collation semantics:</p>
         <div class="itemizedlist">
             
          
         
          
          
          
           
          
          
             
         <ul class="itemizedlist"><li class="listitem"><p>Comparison operators: =, &lt;&gt;, &lt;, &lt;=, &gt;, &gt;=.</p></li><li class="listitem"><p>LIKE operator</p></li><li class="listitem"><p>ORDER BY clauses</p></li><li class="listitem"><p>GROUP BY clauses</p></li><li class="listitem"><p>Aggregate functions that use string comparison, such as MIN and MAX and LISTAGG</p></li><li class="listitem"><p>Window functions, such as PARTITION BY clauses and ORDER BY clauses</p></li><li class="listitem"><p>Scalar functions greatest() and least(), STRPOS(), REGEXP_COUNT(), REGEXP_REPLACE(),
                  REGEXP_INSTR(), REGEXP_SUBSTR()</p></li><li class="listitem"><p>Distinct clause</p></li><li class="listitem"><p>UNION, INTERSECT and EXCEPT</p></li><li class="listitem"><p>IN LIST</p></li></ul></div>
         <p>For external queries, including Amazon Redshift Spectrum and Aurora PostgreSQL federated queries, collation of VARCHAR or CHAR column is the same as the current database-level collation.</p>
                  <p>The following example queries a Amazon Redshift Spectrum table:</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT ci_varchar FROM spectrum.test_collation
WHERE ci_varchar = 'AMAZON';

ci_varchar
----------
amazon
Amazon
AMAZON
AmaZon
(4 rows)</code></pre>
         <p>For information on how to create tables using database collation, see <a href="./r_CREATE_TABLE_NEW.html">CREATE TABLE</a>.</p>
         <p>For information on the COLLATE function, see <a href="./r_COLLATE.html">COLLATE function</a>.</p>


          
            <h3 id="r_CREATE_DATABASE-collation-limitations">Database collation limitations</h3>
            <p>The following are limitations when working with database collation in Amazon Redshift:</p>
            <div class="itemizedlist">
                
                
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p>All system tables or views, including PG catalog tables and Amazon Redshift system tables are case-sensitive.</p></li><li class="listitem"><p>When consumer database and producer database have different database-level collations, Amazon Redshift doesn't support cross-database and cross-cluster queries.</p>
               </li><li class="listitem"><p>Amazon Redshift doesn't support case-insensitive collation in leader node-only query.</p>
               <p>The following example shows an unsupported case-insensitive query and the error
                     that Amazon Redshift sends:</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT collate(usename, 'case_insensitive') FROM pg_user;
ERROR:  Case insensitive collation is not supported in leader node only query.</code></pre>
               </li><li class="listitem"><p>Amazon Redshift doesn't support interaction between case-sensitive and case-insensitive columns, such as comparison, function, join, or set operations.</p>
               <p>The following examples show errors when case-sensitive and case-insensitive columns interact:</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE test
  (ci_col varchar(10) COLLATE case_insensitive,
   cs_col varchar(10) COLLATE case_sensitive,
   cint int,
   cbigint bigint);</code></pre>
                  
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT ci_col = cs_col FROM test;
ERROR:  Query with different collations is not supported yet.</code></pre>
                  
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT concat(ci_col, cs_col) FROM test;
ERROR:  Query with different collations is not supported yet.</code></pre>
                  
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT ci_col FROM test UNION SELECT cs_col FROM test;
ERROR:  Query with different collations is not supported yet.</code></pre>
                  
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT * FROM test a, test b WHERE a.ci_col = b.cs_col;
ERROR:  Query with different collations is not supported yet.</code></pre>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">Select Coalesce(ci_col, cs_col) from test;
ERROR:  Query with different collations is not supported yet.</code></pre>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">Select case when cint &gt; 0 then ci_col else cs_col end from test;
ERROR:  Query with different collations is not supported yet.</code></pre>
               </li><li class="listitem"><p>Amazon Redshift doesn't support collation for SUPER data type. Creating SUPER columns in
                     case-insensitive databases and interactions between SUPER and case-insensitive
                     columns aren't supported.</p>
               <p>The following example creates a table with the SUPER as the data type in the case-insensitive database:</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE super_table (a super);
ERROR: SUPER column is not supported in case insensitive database.</code></pre>
                  <p>The following example queries data with a case-insensitive string comparing with the SUPER data: </p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE test_super_collation
(s super, c varchar(10) COLLATE case_insensitive, i int);</code></pre>
                  
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT s = c FROM test_super_collation;
ERROR:  Coercing from case insensitive string to SUPER is not supported.</code></pre>
               </li></ul></div>
            <p>To make these queries work, use the COLLATE function to convert collation of one column to match the other. For more information, see <a href="./r_COLLATE.html">COLLATE function</a>.</p>

          

       
         <h2 id="r_CREATE_DATABASE-examples">Examples</h2>

          
            <h6>Creating a database</h6>
            <p>The following example creates a database named TICKIT and gives ownership to the user
               DWUSER.</p>
          

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create database tickit
with owner dwuser;</code></pre>
         <p>To view details about databases, query the PG_DATABASE_INFO catalog table. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select datname, datdba, datconnlimit
from pg_database_info
where datdba &gt; 1;

 datname     | datdba | datconnlimit
-------------+--------+-------------
 admin       |    100 | UNLIMITED
 reports     |    100 | 100
 tickit      |    100 | 100         </code></pre>


         
         <p>The following example creates a database named <code class="userinput">sampledb</code> with SNAPSHOT isolation level.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sampledb ISOLATION LEVEL SNAPSHOT;</code></pre>

         <p>The following example creates the database sales_db from the datashare salesshare.</p>
        
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sales_db FROM DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

          
            <h3 id="r_CREATE_DATABASE-collation-examples">Database collation
                  examples</h3>

             
               <h6>Creating  a case-insensitive database</h6>
               <p>The following example creates the <code class="code">sampledb</code> database, creates
                  the <code class="code">T1</code> table, and inserts data into the <code class="code">T1</code> table.</p>
             
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create database sampledb collate case_insensitive;</code></pre>
            
            
            <p>Connect to the new database that you just created using your SQL client. When using Amazon Redshift query editor v2, choose the <code class="code">sampledb</code> in the <b>Editor</b>. When using RSQL, use a command like the following.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">\connect sampledb;</code></pre>
                 
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE T1 (
  col1 Varchar(20) distkey sortkey
);</code></pre>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">INSERT INTO T1 VALUES ('bob'), ('john'), ('Mary'), ('JOHN'), ('Bob');</code></pre>
            <p>Then the query finds results with <code class="code">John</code>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT * FROM T1 WHERE col1 = 'John';

 col1
 ------
 john
 JOHN
(2 row)</code></pre>
             
               <h6>Ordering in a case-insensitive order</h6>
               <p>The following example shows the case-insensitive ordering with table T1. The
                  ordering of <em>Bob</em> and <em>bob</em> or <em>John</em> and <em>john</em> is nondeterministic because they are
                  equal in case-insensitive column.</p>
             
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT * FROM T1 ORDER BY 1;

 col1
 ------
 bob
 Bob
 JOHN
 john
 Mary
(5 rows)</code></pre>
            <p>Similarly, the following example shows case-insensitive ordering with the GROUP BY
               clause. <em>Bob</em> and <em>bob</em> are equal and belong to
               the same group. It is nondeterministic which one shows up in the result.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT col1, count(*) FROM T1 GROUP BY 1;

 col1 | count
 -----+------
 Mary |  1
 bob  |  2
 JOHN |  2
(3 rows)</code></pre>

             
               <h6>Querying with a window function on case-insensitive columns</h6>
               <p>The following example queries a window function on a case-insensitive column.</p>
             
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT col1, rank() over (ORDER BY col1) FROM T1;

 col1 | rank
 -----+------
 bob  |   1
 Bob  |   1
 john |   3
 JOHN |   3
 Mary |   5
(5 rows)</code></pre>

             
               <h6>Querying with the DISTINCT keyword</h6>
               <p>The following example queries the <code class="code">T1</code> table with the DISTINCT keyword.</p>
             
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT DISTINCT col1 FROM T1;

 col1
 ------
 bob
 Mary
 john
(3 rows)</code></pre>

             
               <h6>Querying with the UNION clause</h6>
               <p>The following example shows the results from the UNION of the tables
                  <code class="code">T1</code> and <code class="code">T2</code>.</p>
             
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE TABLE T2 AS SELECT * FROM T1;</code></pre>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT col1 FROM T1 UNION SELECT col1 FROM T2;

 col1
 ------
 john
 bob
 Mary
(3 rows)</code></pre>
          

      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_COPY_command_examples.html">COPY examples</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_DATASHARE.html">CREATE DATASHARE</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_DATABASE.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_DATABASE.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>