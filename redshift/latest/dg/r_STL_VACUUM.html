<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>STL_VACUUM - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_STL_VACUUM" /><meta name="default_state" content="r_STL_VACUUM" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_VACUUM.html" /><meta name="description" content="Displays the row and block statistics for tables that have been vacuumed." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_VACUUM.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_VACUUM.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STL_VACUUM.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STL_VACUUM.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STL_VACUUM.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_VACUUM.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_VACUUM.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STL_VACUUM.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STL_VACUUM.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STL_VACUUM.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STL_VACUUM.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STL_VACUUM.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STL_VACUUM.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STL_VACUUM.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STL_VACUUM.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STL_VACUUM.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STL_VACUUM.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STL_VACUUM.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STL_VACUUM.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_STL_VACUUM.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_STL_VACUUM.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STL_VACUUM.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="STL_VACUUM" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>STL_VACUUM - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_STL_VACUUM" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STL_VACUUM.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STL_VACUUM.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STL_VACUUM.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "System tables and views reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_system-tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "System monitoring (provisioned only)",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_intro_system_views.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "STL views for logging",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_intro_STL_tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "STL_VACUUM",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_intro_STL_tables.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_STL_VACUUM" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#r_STL_VACUUM-table-columns">Table columns</a><a href="#r_STL_VACUUM-sample-queries">Sample queries</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_STL_VACUUM">STL_VACUUM</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Displays row and block statistics for tables that have been vacuumed.</p><p>The view shows information specific to when each vacuum operation started and
            finished, and demonstrates the benefits of running the operation. For information about
            the requirements for running this command, see the <a href="./r_VACUUM_command.html">VACUUM</a> command description.</p><p>STL_VACUUM is visible only to superusers. For more information, see <a href="./cm_chap_system-tables.html#c_visibility-of-data">Visibility of data in system tables and
                views</a>.</p><p>Some or all of the data in this table can also be found in the SYS monitoring view <a href="./SYS_VACUUM_HISTORY.html">SYS_VACUUM_HISTORY</a>. The data in the SYS monitoring view is formatted to be easier to use and understand. 
We recommend that you use the SYS monitoring view for your queries.</p>
            <h2 id="r_STL_VACUUM-table-columns">Table columns</h2>


            <div class="table-container"><div class="table-contents"><table id="w323aac69c17b9d131c11b3"><thead>
                        <tr>
                            <th>Column name </th>
                            <th>Data type </th>
                            <th>Description </th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">userid</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">The ID of the user who generated the entry.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">xid </td>
                            <td tabindex="-1">bigint </td>
                            <td tabindex="-1">The transaction ID for the VACUUM statement. You
                                can join this table to the STL_QUERY view to see the individual SQL
                                statements that are run for a given VACUUM transaction. If you
                                vacuum the whole database, each table is vacuumed in a separate
                                transaction. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">table_id</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">The Table ID.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">status </td>
                            <td tabindex="-1">character(30) </td>
                            <td tabindex="-1"><p>The status of the VACUUM operation for each
                                    table. Possible values are the following: </p><div class="itemizedlist">
                                     
                                     
                                     
                                     
                                         
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p><code class="userinput">Started </code></p>
                                    </li><li class="listitem">
                                        <p><code class="userinput">Started Delete Only</code>
                                        </p>
                                    </li><li class="listitem">
                                        <p><code class="userinput">Started Delete Only (Sorted &gt;= nn%)
                                            </code></p>
                                        <p>Only the delete phase was started for a VACUUM FULL.
                                            The sort phase was skipped because the table was already
                                            sorted at or above the sort threshold.</p>
                                    </li><li class="listitem">
                                        <p><code class="userinput">Started Sort Only</code>
                                        </p>
                                    </li><li class="listitem">
                                            <p><code class="userinput">Started Ranged Partition</code></p>
                                        </li><li class="listitem">
                                        <p><code class="userinput">Started Reindex</code></p>
                                    </li><li class="listitem">
                                        <p><code class="userinput">Finished</code>
                                        </p>
                                        <p>Time the operation completed for the table. To find
                                            out how long a vacuum operation took on a specific
                                            table, subtract the Started time from the Finished time
                                            for a particular transaction ID and table ID. </p>
                                    </li><li class="listitem">
                                        <p><code class="userinput">Skipped</code>
                                        </p>
                                        <p>The table was skipped because the table was fully
                                            sorted and no rows were marked for deletion. </p>
                                    </li><li class="listitem">
                                        <p><code class="userinput">Skipped (delete only) </code></p>
                                        <p>The table was skipped because DELETE ONLY was
                                            specified and no rows were marked for deletion. </p>
                                    </li><li class="listitem">
                                        <p><code class="userinput">Skipped (sort only) </code></p>
                                        <p>The table was skipped because SORT ONLY was specified
                                            and the table was already sorted fully sorted. </p>
                                    </li><li class="listitem">
                                        <p><code class="userinput">Skipped (sort only,
                                                sorted&gt;=xx%)</code> </p>
                                        <p>The table was skipped because SORT ONLY was specified
                                            and the table was already sorted at or above the sort
                                            threshold. </p>
                                    </li><li class="listitem">
                                        <p><code class="userinput">Skipped (0 rows)</code> </p>
                                        <p>The table was skipped because it was empty. </p>
                                    </li><li class="listitem">
                                        <p><code class="userinput">VacuumBG</code> </p>
                                        <p>An automatic vacuum operation was performed in the
                                            background. This status is prepended to other statuses when
                                        they're performed automatically. For example, a delete only
                                        vacuum performed automatically would have a starting row
                                        with the status
                                            <code class="code">[VacuumBG] Started Delete Only</code>.</p>
                                    </li></ul></div><p>For more information about the VACUUM sort
                                    threshold setting, see <a href="./r_VACUUM_command.html">VACUUM</a>.</p></td>
                        </tr>
                        <tr>
                            <td tabindex="-1">rows </td>
                            <td tabindex="-1">bigint </td>
                            <td tabindex="-1">The actual number of rows in the table plus any
                                deleted rows that are still stored on disk (waiting to be vacuumed).
                                This column shows the count before the vacuum started for rows with
                                a <code class="userinput">Started</code> status, and the count after the
                                vacuum for rows with a <code class="userinput">Finished</code> status.
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">sortedrows </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">The number of rows in the table that are sorted.
                                This column shows the count before the vacuum started for rows with
                                    <code class="userinput">Started</code> in the Status column, and the
                                count after the vacuum for rows with <code class="userinput">Finished</code>
                                in the Status column. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">blocks </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">The total number of data blocks used to store the
                                table data before the vacuum operation (rows with a
                                    <code class="userinput">Started</code> status) and after the vacuum
                                operation (<code class="userinput">Finished</code> column). Each data block
                                uses 1 MB.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">max_merge_partitions </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">This column is used for performance analysis and
                                represents the maximum number of partitions that vacuum can process
                                for the table per merge phase iteration. (Vacuum sorts the unsorted
                                region into one or more sorted partitions. Depending on the number
                                of columns in the table and the current Amazon Redshift configuration, the
                                merge phase can process a maximum number of partitions in a single
                                merge iteration. The merge phase will still work if the number of
                                sorted partitions exceeds the maximum number of merge partitions,
                                but more merge iterations will be required.) </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">eventtime </td>
                            <td tabindex="-1">timestamp </td>
                            <td tabindex="-1">When the vacuum operation started or finished.
                            </td>
                        </tr>
                        
                        <tr>
                            <td tabindex="-1">reclaimable_rows </td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">The number of reclaimable rows for the current cutoff_xid. 
                                This column shows Redshift's estimated number of reclaimable rows before the vacuum started for rows with a <code class="userinput">Started</code> status, 
                                and the actual number of reclaimable rows remaining after the vacuum for rows with a <code class="userinput">Finished</code> status. 
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">reclaimable_space_mb </td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">Reclaimable space in MB for the current cutoff_xid.
                                This column shows Redshift's estimated amount of reclaimable space before the vacuum started for rows with a <code class="userinput">Started</code> status, 
                                and the actual amount of reclaimable space remaining after the vacuum for rows with a <code class="userinput">Finished</code> status. 
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">cutoff_xid </td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">The cutoff transaction ID for the VACUUM operation. Any transactions after the cutoff are not included in the VACUUM operation.
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">is_recluster </td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">If 1 (true), the VACUUM operation executed the recluster algorithm, If 0 (false), it was not. 
                            </td>
                        </tr>
                    </table></div></div>
         
            <h2 id="r_STL_VACUUM-sample-queries">Sample queries</h2>


            <p>The following query reports vacuum statistics for table 108313. The table was
                vacuumed following a series of inserts and deletes. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select xid, table_id, status, rows, sortedrows, blocks, eventtime,
                reclaimable_rows, reclaimable_space_mb
from stl_vacuum where table_id=108313 order by eventtime;

 xid   | table_id | status                  | rows | sortedrows | blocks |  eventtime           | reclaimable_rows | reclaimable_space_mb 
-------+----------+-------------------------+------+------------+--------+----------------------+------------------+----------------------
 14294 |   108313 | Started                 | 1950 |        408 |     28 |  2016-05-19 17:36:01 |              984 |                   17          
 14294 |   108313 | Finished                |  966 |        966 |     11 |  2016-05-19 18:26:13 |                0 |                    0 
 15126 |   108313 | Skipped(sorted&gt;=95%)    |  966 |        966 |     11 |  2016-05-19 18:26:38 |                0 |                    0 </code></pre>
            <p>At the start of the VACUUM, the table contained 1,950 rows stored in
                28 1 MB blocks. Amazon Redshift estimated it could reclaim 984,
                or 17 blocks of disk space, with a vacuum operation.</p> 
            <p>In the row for the Finished status, the ROWS column shows a value of 966,
                and the BLOCKS column value is 11, down from 28. The vacuum reclaimed
                the estimated amount of disk space, with no reclaimable rows or space remaining
                after the vacuum operation completed.</p>
            <p>In the sort phase (transaction 15126), the vacuum was able to skip the table
                because the rows were inserted in sort key order.</p>
            <p>The following example shows the statistics for a SORT ONLY vacuum on the SALES
                table (table 110116 in this example) after a large INSERT operation: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum sort only sales;

select xid, table_id, status, rows, sortedrows, blocks, eventtime
from stl_vacuum order by xid, table_id, eventtime;

xid |table_id|     status      | rows  |sortedrows|blocks|     eventtime
----+--------+-----------------+-------+----------+------+--------------------
...
2925| 110116 |Started Sort Only|1379648|   172456 |  132 | 2011-02-24 16:25:21...
2925| 110116 |Finished         |1379648|  1379648 |  132 | 2011-02-24 16:26:28...</code></pre>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_STL_UTILITYTEXT.html">STL_UTILITYTEXT</div><div id="next" class="next-link" accesskey="n" href="./r_STL_WINDOW.html">STL_WINDOW</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STL_VACUUM.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STL_VACUUM.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>