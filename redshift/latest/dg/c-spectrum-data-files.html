<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Creating data files for queries in Amazon Redshift Spectrum - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-spectrum-data-files" /><meta name="default_state" content="c-spectrum-data-files" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-data-files.html" /><meta name="description" content="The data files that you use for queries in Amazon Redshift Spectrum are commonly the same types of files that you use for other applications. For example, the same types of files are used with Amazon Athena, Amazon EMR, and Amazon QuickSight. You can query the data in its original format directly from Amazon S3. To do this, the data files must be in a format that Redshift Spectrum supports and be located in an Amazon S3 bucket that your cluster can access." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-data-files.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-data-files.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-data-files.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-data-files.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-data-files.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-data-files.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-data-files.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-data-files.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-data-files.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-data-files.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-data-files.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-data-files.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-data-files.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-data-files.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-data-files.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-data-files.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-data-files.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-data-files.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-data-files.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-data-files.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-data-files.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Creating data files for queries in Amazon Redshift Spectrum" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Creating data files for queries in Amazon Redshift Spectrum - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#c-spectrum-data-files" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c-spectrum-data-files.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c-spectrum-data-files.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c-spectrum-data-files.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Querying external data using Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Creating data files for queries in Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#c-spectrum-data-files" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#c-spectrum-data-files-formats">Data formats for Redshift Spectrum </a><a href="#c-spectrum-data-files-compression">Compression types for Redshift Spectrum </a><a href="#c-spectrum-data-files-encryption">Encryption for Redshift Spectrum </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c-spectrum-data-files">Creating data files for queries in Amazon Redshift
            Spectrum</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The data files that you use for queries in Amazon Redshift Spectrum are commonly the same types of
         files that you use for other applications. For example, the same types of files are used
         with Amazon Athena, Amazon EMR, and Amazon QuickSight. You can query the data in its original format directly
         from Amazon S3. To do this, the data files must be in a format that Redshift Spectrum supports and be
         located in an Amazon S3 bucket that your cluster can access. </p><p>The Amazon S3 bucket with the data files and the Amazon Redshift cluster must be in the same AWS Region.
         For information about supported AWS Regions, see <a href="./c-using-spectrum.html#c-spectrum-regions">Amazon Redshift Spectrum Regions</a>.</p>
         <h2 id="c-spectrum-data-files-formats">Data formats for Redshift Spectrum </h2>
      <p>Redshift Spectrum supports the following structured and semistructured data formats.</p>

      <div class="table-container"><div class="table-contents"><table id="w323aac48c17b7b5"><thead>
               <tr>
                  <th>File format</th>
                  <th>Columnar</th>
                  <th>Supports parallel reads</th>
                  <th>Split unit</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">Parquet</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Row group</td>
               </tr>
               <tr>
                  <td tabindex="-1">ORC</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Stripe</td>
               </tr>
               <tr>
                  <td tabindex="-1">RCFile</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Row group</td>
               </tr>
               <tr>
                  <td tabindex="-1">TextFile</td>
                  <td tabindex="-1">No</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Row</td>
               </tr>
               <tr>
                  <td tabindex="-1">SequenceFile</td>
                  <td tabindex="-1">No</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Row or block</td>
               </tr>
               <tr>
                  <td tabindex="-1">RegexSerde</td>
                  <td tabindex="-1">No</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Row</td>
               </tr>
               <tr>
                  <td tabindex="-1">OpenCSV</td>
                  <td tabindex="-1">No</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Row</td>
               </tr>
               <tr>
                  <td tabindex="-1">AVRO</td>
                  <td tabindex="-1">No</td>
                  <td tabindex="-1">Yes</td>
                  <td tabindex="-1">Block</td>
               </tr>
               <tr>
                  <td tabindex="-1">Ion</td>
                  <td tabindex="-1">No</td>
                  <td tabindex="-1">No</td>
                  <td tabindex="-1">N/A</td>
               </tr>
               <tr>
                  <td tabindex="-1">JSON</td>
                  <td tabindex="-1">No</td>
                  <td tabindex="-1">No</td>
                  <td tabindex="-1">N/A</td>
               </tr>
            </table></div></div>

      <p>In the preceding table, the headings indicate the following:</p>
      <div class="itemizedlist">
          
          
          
      <ul class="itemizedlist"><li class="listitem">
                     <p><b>Columnar</b> – Whether the file
                  format physically stores data in a column-oriented structure as opposed to a
                  row-oriented one.</p>

         </li><li class="listitem">
            <p><b>Supports parallel reads</b> – Whether the file
                  format supports reading individual blocks within the file. Reading individual
                  blocks enables the distributed processing of a file across multiple independent
                  Redshift Spectrum requests instead of having to read the full file in a single request.</p>
         </li><li class="listitem">
            <p><b>Split unit</b> – For file formats that can be
                  read in parallel, the split unit is the smallest chunk of data that a single Redshift Spectrum
                  request can process.</p>
      
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Timestamp values in text files must be in the format <code class="code">yyyy-MM-dd HH:mm:ss.SSSSSS</code>, as the following timestamp value shows: <code class="code">2017-05-01 11:30:59.000000</code>.</p></div></div>
      <p>We recommend using a columnar storage file format, such as Apache Parquet. With a
                  columnar storage file format, you can minimize data transfer out of Amazon S3 by
                  selecting only the columns that you need. </p></li></ul></div>
       
         <h2 id="c-spectrum-data-files-compression">Compression types for Redshift Spectrum </h2>

                  <p>To reduce storage
               space, improve performance, and minimize costs, we strongly recommend that you
               compress your data files. Redshift Spectrum recognizes file compression types based on the file
               extension.</p>
      
      <p>Redshift Spectrum supports the following compression types and extensions.</p>
      <div class="table-container"><div class="table-contents"><table id="w323aac48c17b9b7"><thead>
               <tr>
                  <th>Compression Algorithm</th>
                  <th>File Extension</th>
                  <th>Supports Parallel Reads</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">Gzip</td>
                  <td tabindex="-1">.gz</td>
                  <td tabindex="-1">No</td>
               </tr>
               <tr>
                  <td tabindex="-1">Bzip2</td>
                  <td tabindex="-1">.bz2</td>
                  <td tabindex="-1">Yes</td>
               </tr>
               <tr>
                  <td tabindex="-1">Snappy</td>
                  <td tabindex="-1">.snappy</td>
                  <td tabindex="-1">No</td>
               </tr>
            </table></div></div>
      
  
      <p>You can apply compression at different levels. Most commonly, you compress a whole file or
               compress individual blocks within a file. 
               
               Compressing columnar formats at the file level doesn't yield performance benefits. </p>
         
      <p>For Redshift Spectrum to be able to read a file in parallel, the following must be true:</p>
         <div class="itemizedlist">
          
          
         <ul class="itemizedlist"><li class="listitem">
            <p>The file format supports parallel reads.</p>
         </li><li class="listitem">
         <p>The file-level compression, if any, supports parallel reads.</p>
         </li></ul></div>

      <p>It doesn't matter whether the individual split units within a file are compressed using
            a compression algorithm that can be read in parallel, because each split unit is processed by a
            single Redshift Spectrum request. An example of this is Snappy-compressed Parquet files. Individual row
            groups within the Parquet file are compressed using Snappy, but the top-level structure
            of the file remains uncompressed. In this case, the file can be read in parallel because each Redshift Spectrum
            request can read and process individual row groups from Amazon S3.</p>

       
         <h2 id="c-spectrum-data-files-encryption">Encryption for Redshift Spectrum </h2>

      <p>Redshift Spectrum transparently decrypts data files that are encrypted using the
         following encryption options:</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Server-side encryption (SSE-S3) using an AES-256 encryption key managed by
               Amazon S3.</p>
         </li><li class="listitem">
            <p>Server-side encryption with keys managed by AWS Key Management Service (SSE-KMS).
               </p>
         </li></ul></div>
         <p>Redshift Spectrum doesn't support Amazon S3 client-side encryption. For more information on server-side
            encryption, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/serv-side-encryption.html">Protecting Data Using
               Server-Side Encryption</a> in the <em>Amazon Simple Storage Service User Guide</em>.</p>
      <p>Amazon Redshift uses massively parallel processing (MPP) to achieve fast execution of complex
         queries operating on large amounts of data. Redshift Spectrum extends the same principle to
         query external data, using multiple Redshift Spectrum instances as needed to scan files.
         Place the files in a separate folder for each table. </p>
      <p>You can optimize your data for parallel processing by doing the following:</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>If your file format or compression doesn't support reading in parallel, break large files into many smaller files. We recommend
                  using file sizes between 64 MB and 1 GB.</p>
         </li><li class="listitem">
            <p>Keep all the files about the same size. If some files are much larger than others,
               Redshift Spectrum can't distribute the workload evenly. </p>
         </li></ul></div>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./spectrum-lake-formation.html">Using Redshift Spectrum with Lake Formation</div><div id="next" class="next-link" accesskey="n" href="./c-spectrum-external-schemas.html">Creating external
            schemas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c-spectrum-data-files.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c-spectrum-data-files.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>