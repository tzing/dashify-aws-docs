<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Performance - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c_challenges_achieving_high_performance_queries" /><meta name="default_state" content="c_challenges_achieving_high_performance_queries" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" /><meta name="description" content="Describes the performance features that Amazon Redshift uses to achieve extremely fast query run." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Performance" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Performance - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#c_challenges_achieving_high_performance_queries" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Introduction",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/welcome.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "System and architecture overview",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_redshift_system_overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Performance",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_redshift_system_overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#c_challenges_achieving_high_performance_queries" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#massively-parallel-processing">
            Massively parallel processing
        </a><a href="#columnar-data-storage">
            Columnar data storage
        </a><a href="#data-compression">
            Data compression
        </a><a href="#query-optimizer">Query optimizer </a><a href="#result-caching"> Result caching </a><a href="#compiled-code">Compiled code </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c_challenges_achieving_high_performance_queries">Performance</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon Redshift achieves extremely fast query run by employing these performance
            features.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#massively-parallel-processing">
            Massively parallel processing
        </a></li><li><a href="#columnar-data-storage">
            Columnar data storage
        </a></li><li><a href="#data-compression">
            Data compression
        </a></li><li><a href="#query-optimizer">Query optimizer </a></li><li><a href="#result-caching"> Result caching </a></li><li><a href="#compiled-code">Compiled code </a></li></ul></div> <h2 id="massively-parallel-processing">
            Massively parallel processing
        </h2>
        <p>Massively parallel processing (MPP) enables fast run of the most complex queries
                operating on large amounts of data. Multiple compute nodes handle all query
                processing leading up to final result aggregation, with each core of each node
                running the same compiled query segments on portions of the entire data.</p>
        <p>Amazon Redshift distributes the rows of a table to the compute nodes so that the data can be
            processed in parallel. By selecting an appropriate distribution key for each table, you
            can optimize the distribution of data to balance the workload and minimize movement of
            data from node to node. For more information, see <a href="./c_best-practices-best-dist-key.html">Choose the best distribution
               style</a>.</p>
        <p>Loading data from flat files takes advantage of parallel processing by spreading the
            workload across multiple nodes while simultaneously reading from multiple files. For
            more information about how to load data into tables, see <a href="./c_loading-data-best-practices.html">Amazon Redshift best practices for loading
            data</a>.</p>        <h2 id="columnar-data-storage">
            Columnar data storage
        </h2>
        <p>Columnar storage for database tables drastically reduces the overall disk I/O
            requirements and is an important factor in optimizing analytic query performance.
            Storing database table information in a columnar fashion reduces the number of disk I/O
            requests and reduces the amount of data you need to load from disk. Loading less data
            into memory enables Amazon Redshift to perform more in-memory processing when executing
            queries. See <a href="./c_columnar_storage_disk_mem_mgmnt.html">Columnar storage</a> for a more detailed
            explanation.</p>
        <p>When columns are sorted appropriately, the query processor is able to rapidly filter
            out a large subset of data blocks. For more information, see <a href="./c_best-practices-sort-key.html">Choose the best sort key</a>.</p>  <h2 id="data-compression">
            Data compression
        </h2>
        <p>Data compression reduces storage requirements, thereby reducing disk I/O, which
            improves query performance. When you run a query, the compressed data is read into
            memory, then uncompressed during query run. Loading less data into memory enables
            Amazon Redshift to allocate more memory to analyzing the data. Because columnar storage stores
            similar data sequentially, Amazon Redshift is able to apply adaptive compression encodings
            specifically tied to columnar data types. The best way to enable data compression on
            table columns is by allowing Amazon Redshift to apply optimal compression encodings when you
            load the table with data. To learn more about using automatic data compression, see
                <a href="./c_Loading_tables_auto_compress.html">Loading tables with automatic
               compression</a>.</p>
            <h2 id="query-optimizer">Query optimizer </h2>
            <p>The Amazon Redshift query run engine incorporates a query optimizer that is
                MPP-aware and also takes advantage of the columnar-oriented data storage. The
                Amazon Redshift query optimizer implements significant enhancements and extensions for
                processing complex analytic queries that often include multi-table joins,
                subqueries, and aggregation. To learn more about optimizing queries, see <a href="./c-optimizing-query-performance.html">Tuning query performance</a>.</p>
         
            <h2 id="result-caching"> Result caching </h2>
            <p>To reduce query runtime and improve system performance, Amazon Redshift caches the
                results of certain types of queries in memory on the leader node. When a user
                submits a query, Amazon Redshift checks the results cache for a valid, cached copy of the query
                results. If a match is found in the result cache, Amazon Redshift uses the cached results and
                doesn't run the query. Result caching is transparent to the user.</p>
            <p>Result caching is turned on by default. To turn off result caching for the current
                session, set the <a href="./r_enable_result_cache_for_session.html">enable_result_cache_for_session</a> parameter to
                    <code class="code">off</code>.</p>
            <p>Amazon Redshift uses cached results for a new query when all of the following are
                true:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>The user submitting the query has access permission to the objects used in
                        the query.</p>
                </li><li class="listitem">
                    <p>The table or views in the query haven't been modified.</p>
                </li><li class="listitem">
                    <p>The query doesn't use a function that must be evaluated each time it's
                        run, such as GETDATE.</p>
                </li><li class="listitem">
                    <p>The query doesn't reference Amazon Redshift Spectrum external tables.</p>
                </li><li class="listitem">
                    <p>Configuration parameters that might affect query results are
                        unchanged.</p>
                </li><li class="listitem">
                    <p>The query syntactically matches the cached query.</p>
                </li></ul></div>
            <p>To maximize cache effectiveness and efficient use of resources, Amazon Redshift doesn't cache
                some large query result sets. Amazon Redshift determines whether to cache query results based
                on a number of factors. These factors include the number of entries in the cache and
                the instance type of your Amazon Redshift cluster. </p>
            <p>To determine whether a query used the result cache, query the <a href="./r_SVL_QLOG.html">SVL_QLOG</a> system view. If a query used
                the result cache, the source_query column returns the query ID of the source query.
                If result caching wasn't used, the source_query column value is NULL. </p>

            <p>The following example shows that queries submitted by userid 104 and userid 102
                use the result cache from queries run by userid 100.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select userid, query, elapsed, source_query from svl_qlog 
where userid &gt; 1
order by query desc;

userid | query  | elapsed  | source_query
-------+--------+----------+-------------
   104 | 629035 |       27 |       628919
   104 | 629034 |       60 |       628900
   104 | 629033 |       23 |       628891
   102 | 629017 |  1229393 |             
   102 | 628942 |       28 |       628919
   102 | 628941 |       57 |       628900
   102 | 628940 |       26 |       628891
   100 | 628919 | 84295686 |             
   100 | 628900 | 87015637 |             
   100 | 628891 | 58808694 |             </code></pre>
            
            
         
            <h2 id="compiled-code">Compiled code </h2>
            <p>The leader node distributes fully optimized compiled code across all of the nodes
                of a cluster. Compiling the query decreases the overhead associated with an
                interpreter and therefore increases the runtime speed, especially for complex
                queries. The compiled code is cached and shared across sessions on the same cluster.
                As a result, future runs of the same query will be faster, often even with different
                parameters. </p>
            <p>The query run engine compiles different code for the JDBC and 
                ODBC connection protocols, so two clients using different
                protocols each incur the first-time cost of compiling the code. Clients
                that use the same protocol, however, benefit from sharing the cached
                code.</p>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c_high_level_system_architecture.html">Data warehouse system architecture</div><div id="next" class="next-link" accesskey="n" href="./c_columnar_storage_disk_mem_mgmnt.html">Columnar storage</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c_challenges_achieving_high_performance_queries.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>