<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE LIBRARY - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_LIBRARY" /><meta name="default_state" content="r_CREATE_LIBRARY" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_LIBRARY.html" /><meta name="description" content="Installs a Python library, which is available for users to incorporate when creating a user-defined function (UDF) with the command. The total size of user-installed libraries can't exceed 100 MB." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_LIBRARY.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_LIBRARY.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="CREATE LIBRARY" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE LIBRARY - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_CREATE_LIBRARY" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_LIBRARY.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_LIBRARY.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_LIBRARY.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL commands",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE LIBRARY",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_CREATE_LIBRARY" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#r_CREATE_LIBRARY-privileges">Required privileges</a><a href="#r_CREATE_LIBRARY-synopsis">Syntax</a><a href="#r_CREATE_LIBRARY-parameters">Parameters</a><a href="#r_CREATE_LIBRARY-examples">Examples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_CREATE_LIBRARY">CREATE LIBRARY</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Installs a Python library, which is available for users to incorporate when creating a
         user-defined function (UDF) with the <a href="./r_CREATE_FUNCTION.html">CREATE FUNCTION</a> command. The total size of user-installed libraries can't exceed 100 MB. </p><p>CREATE LIBRARY can't be run inside a transaction block (BEGIN â€¦ END).
            For more information about transactions, see
            <a href="./c_serial_isolation.html">Serializable isolation</a>. </p><p>Amazon Redshift supports Python version 2.7. For more information, see <a href="https://www.python.org/" rel="noopener noreferrer" target="_blank"><span>www.python.org</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p><p>For more information, see <a href="./udf-python-language-support.html#udf-importing-custom-python-library-modules">Importing custom Python
               library modules</a>. </p>
         <h2 id="r_CREATE_LIBRARY-privileges">Required privileges</h2>
         <p>Following are required privileges for CREATE LIBRARY:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Superuser</p></li><li class="listitem"><p>Users with the CREATE LIBRARY privilege or with the privilege of the specified language</p></li></ul></div>
       
         <h2 id="r_CREATE_LIBRARY-synopsis">Syntax</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE [ OR REPLACE ] LIBRARY <em>library_name</em> LANGUAGE plpythonu
FROM
<span>{</span> 'https://<em>file_url</em>'
| 's3://<em>bucketname/file_name</em>'
<em>authorization</em>
  [ REGION [AS] '<em>aws_region</em>']
  IAM_ROLE <span>{</span> default | â€˜arn:aws:iam::<code class="replaceable">&lt;AWS account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>â€™ }
}</code></pre>
       
         <h2 id="r_CREATE_LIBRARY-parameters">Parameters</h2>
         <div class="variablelist">
             
             
             
             
             
             
             
             
            
         <dl>
               <dt><span class="term">OR REPLACE</span></dt>
               <dd>
                  <p>Specifies that if a library with the same name as this one already exists,
                     the existing library is replaced. REPLACE commits immediately. If a UDF that
                     depends on the library is running concurrently, the UDF might fail or return
                     unexpected results, even if the UDF is running within a transaction. You must
                     be the owner or a superuser to replace a library.</p>
               </dd>
             
               <dt><span class="term">
                  <em>library_name</em>
               </span></dt>
               <dd>

                  <p>The name of the library to be installed. You can't create a library that
                     contains a module with the same name as a Python Standard Library module or an
                     Amazon Redshift preinstalled Python module. If an existing user-installed library uses
                     the same Python package as the library to be installed, you must drop the
                     existing library before installing the new library. For more information, see
                        <a href="./udf-python-language-support.html">Python language support for UDFs</a>.</p>

               </dd>
             
               <dt><span class="term">LANGUAGE plpythonu</span></dt>
               <dd>
                  <p>The language to use. Python (plpythonu) is the only supported language.
                     Amazon Redshift supports Python version 2.7. For more information, see <a href="https://www.python.org/" rel="noopener noreferrer" target="_blank"><span>www.python.org</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
               </dd>
             
               <dt><span class="term">FROM</span></dt>
               <dd>
                  <p>The location of the library file. You can specify an Amazon S3 bucket and object
                     name, or you can specify a URL to download the file from a public website. The
                     library must be packaged in the form of a <code class="code">.zip</code> file. For more
                     information, see <a href="https://docs.python.org/2/library/distutils.html?highlight=distutils#module-distutils" rel="noopener noreferrer" target="_blank"><span>Building and Installing Python Modules</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the Python
                     documentation.</p>
               </dd>
             
               <dt><span class="term"> https://<em>file_url</em>
               </span></dt>
               <dd>
                  
                  <p>The URL to download the file from a public website. The URL can contain up
                     to three redirects. The following is an example of a file URL.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">'https://www.example.com/pylib.zip'</code></pre>
               </dd>
             
               <dt><span class="term"> s3://<em>bucket_name/file_name</em>
               </span></dt>
               <dd>
                  <p>The path to a single Amazon S3 object that contains the library file. The
                     following is an example of an Amazon S3 object path.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">'s3://mybucket/my-pylib.zip'</code></pre>
                  <p>If you specify an Amazon S3 bucket, you must also provide credentials for an AWS
                     user that has permission to download the file. </p>
                  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p> If the Amazon S3 bucket doesn't reside in the same AWS Region as your
                        Amazon Redshift cluster, you must use the REGION option to specify the AWS Region in
                        which the data is located. The value for <em>aws_region</em>
                        must match an AWS Region listed in the table in the <a href="./copy-parameters-data-source-s3.html#copy-region">REGION</a> parameter description for the COPY
                        command.</p></div></div>
               </dd>
             
               <dt><span class="term"><em>authorization</em>
               </span></dt>
               <dd>
                  <p>A clause that indicates the method your cluster uses for authentication and
                     authorization to access the Amazon S3 bucket that contains the library file. Your
                     cluster must have permission to access the Amazon S3 with the LIST and GET
                     actions.</p>
                  <p>The syntax for authorization is the same as for the COPY command authorization. For more information, see <a href="./copy-parameters-authorization.html">Authorization parameters</a>.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">IAM_ROLE <span>{</span> default | â€˜arn:aws:iam::<code class="replaceable">&lt;AWS account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>â€™</code></pre>
                  <p> Use the default keyword to have Amazon Redshift use the IAM role that is set as default and associated with the cluster when the CREATE LIBRARY command runs.</p>
                  <p>Use the Amazon Resource Name (ARN) for an IAM role that your cluster uses
                     for authentication and authorization. If you specify IAM_ROLE, you can't
                     use ACCESS_KEY_ID and SECRET_ACCESS_KEY, SESSION_TOKEN, or CREDENTIALS.</p>
                  <p>Optionally, if the Amazon S3 bucket uses server-side encryption, provide the

                     encryption key in the credentials-args string. If you use temporary security
                     credentials, provide the temporary token in the
                        <em>credentials-args</em> string.</p>

                  
                  

                  <p>For more information, see <a href="./copy-usage_notes-access-permissions.html#r_copy-temporary-security-credentials">Temporary security
                     credentials</a>.</p>
                  
               </dd>
             
               <dt><span class="term"> REGION [AS] <em>aws_region</em>
               </span></dt>
               <dd>
                  <p>The AWS Region where the Amazon S3 bucket is located. REGION is required when the
                     Amazon S3 bucket isn't in the same AWS Region as the Amazon Redshift cluster. The
                     value for <em>aws_region</em> must match an AWS Region listed in
                     the table in the <a href="./copy-parameters-data-source-s3.html#copy-region">REGION</a> parameter description for the
                     COPY command.</p>
                  <p>By default, CREATE LIBRARY assumes that the Amazon S3 bucket is located in the
                     same AWS Region as the Amazon Redshift cluster.</p>
               </dd>
            </dl></div>
       
         <h2 id="r_CREATE_LIBRARY-examples">Examples</h2>
         
         <p>The following two examples install the <a href="https://docs.python.org/2/library/urlparse.html#module-urlparse" rel="noopener noreferrer" target="_blank"><span>urlparse</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> Python module, which is packaged in a file named
               <code class="code">urlparse3-1.0.3.zip</code>. </p>
         <p>The following command installs a UDF library named <code class="code">f_urlparse</code> from a
            package that has been uploaded to an Amazon S3 bucket located in the US East Region.</p>

         


         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">create library f_urlparse
language plpythonu
from 's3://mybucket/urlparse3-1.0.3.zip'
credentials 'aws_iam_role=arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>'
region as 'us-east-1';  </code></pre>


         <p>The following example installs a library named <code class="code">f_urlparse</code> from a library
            file on a website.</p>
         
         <p></p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create library f_urlparse
language plpythonu
from 'https://example.com/packages/urlparse3-1.0.3.zip';</code></pre>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_IDENTITY_PROVIDER.html">CREATE IDENTITY PROVIDER</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_MASKING_POLICY.html">CREATE MASKING POLICY</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_LIBRARY.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_LIBRARY.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>