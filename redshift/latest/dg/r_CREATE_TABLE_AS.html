<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE TABLE AS - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_TABLE_AS" /><meta name="default_state" content="r_CREATE_TABLE_AS" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_AS.html" /><meta name="description" content="Creates a new table based on a query. The owner of this table is the user that issues the command." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_AS.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_AS.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="CREATE TABLE AS" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE TABLE AS - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_CREATE_TABLE_AS" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_TABLE_AS.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_TABLE_AS.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_TABLE_AS.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL commands",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE TABLE AS",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_CREATE_TABLE_AS" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#r_CREATE_TABLE_AS-synopsis">Syntax</a><a href="#r_CREATE_TABLE_AS-parameters">Parameters</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_CREATE_TABLE_AS">CREATE TABLE AS</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="highlights"><h6>Topics</h6><ul><li><a href="#r_CREATE_TABLE_AS-synopsis">Syntax</a></li><li><a href="#r_CREATE_TABLE_AS-parameters">Parameters</a></li><li><a href="./r_CTAS_usage_notes.html">CTAS usage notes</a></li><li><a href="./r_CTAS_examples.html">CTAS examples</a></li></ul></div><p>Creates a new table based on a query. The owner of this table is the user that issues
         the command.</p><p>The new table is loaded with data defined by the query in the command. The table columns
         have names and data types associated with the output columns of the query. The CREATE TABLE
         AS (CTAS) command creates a new table and evaluates the query to load the new table.</p>
         <h2 id="r_CREATE_TABLE_AS-synopsis">Syntax</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE [ [ LOCAL ] <span>{</span> TEMPORARY | TEMP } ]
TABLE <em>table_name</em>
[ ( <em>column_name</em> [, ... ] ) ]
[ BACKUP <span>{</span> YES | NO } ]
[ <em>table_attributes</em> ]
AS <em>query</em>

where <em>table_attributes</em> are:
[ DISTSTYLE <span>{</span> AUTO | EVEN | ALL | KEY } ]
[ DISTKEY( <em>distkey_identifier</em> ) ]
[ [ COMPOUND | INTERLEAVED ] SORTKEY( column_name [, ...] ) ]   </code></pre>
       
         <h2 id="r_CREATE_TABLE_AS-parameters">Parameters</h2>
         <div class="variablelist">
             
             
             
             
             
             
             
             
             
         <dl>
               <dt><span class="term">LOCAL </span></dt>
               <dd>
                  <p>Although this optional keyword is accepted in the statement, it has no
                     effect in Amazon Redshift.</p>
               </dd>
             
               <dt><span class="term">TEMPORARY | TEMP </span></dt>
               <dd>
                  <p>Creates a temporary table. A temporary table is automatically dropped at the
                     end of the session in which it was created.</p>
               </dd>
             
               <dt><span class="term">
                  <em>table_name</em>
               </span></dt>
               <dd>
                  <p>The name of the table to be created.</p>
                  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you specify a table name that begins with '# ', the table is created
                        as a temporary table. For example:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create table #newtable (id) as select * from oldtable;</code></pre></div></div>
                  <p>The maximum table name length is 127 bytes; longer names are truncated to
                     127 bytes. Amazon Redshift enforces a quota of the number of tables per
                     cluster by node type. The table name can be qualified with the database and schema name, as
                     the following table shows.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create table tickit.public.test (c1) as select * from oldtable;
</code></pre>
                  <p>In this example, <code class="code">tickit</code> is the database name and
                        <code class="code">public</code> is the schema name. If the database or schema
                     doesn't exist, the statement returns an error.</p>
                  <p>If a schema name is given, the new table is created in that schema (assuming
                     the creator has access to the schema). The table name must be a unique name for
                     that schema. If no schema is specified, the table is created using the current
                     database schema. If you are creating a temporary table, you can't specify
                     a schema name, since temporary tables exist in a special schema.</p>
                  <p>Multiple temporary tables with the same name are allowed to exist at the
                     same time in the same database if they are created in separate sessions. These
                     tables are assigned to different schemas.</p>
               </dd>
             
               <dt><span class="term">
                  <em>column_name</em>
               </span></dt>
               <dd>
                  <p>The name of a column in the new table. If no column names are provided, the
                     column names are taken from the output column names of the query. Default
                     column names are used for expressions.
                     For more information about
                     valid names, see <a href="./r_names.html">Names and identifiers</a>.</p>
               </dd>
             
               <dt><span class="term">BACKUP <span>{</span> YES | NO } </span></dt>
               <dd>
                  <p>A clause that specifies whether the table should be included in automated
                     and manual cluster snapshots. For tables, such as staging tables, that
                     won't contain critical data, specify BACKUP NO to save processing time
                     when creating snapshots and restoring from snapshots and to reduce storage
                     space on Amazon Simple Storage Service. The BACKUP NO setting has no effect on automatic replication
                     of data to other nodes within the cluster, so tables with BACKUP NO specified
                     are restored in the event of a node failure. The default is BACKUP YES.</p>
               </dd>
             
               <dt><span class="term">DISTSTYLE <span>{</span> AUTO | EVEN | KEY | ALL }</span></dt>
               <dd>
                  <p>Defines the data distribution style for the whole table. Amazon Redshift
                     distributes the rows of a table to the compute nodes according the distribution
                     style specified for the table.  The default is DISTSTYLE AUTO.</p>
                  <p>The distribution style that you select for tables affects the overall
                     performance of your database. For more information, see <a href="./t_Distributing_data.html">Working with data distribution styles</a>.</p>
                  <div class="itemizedlist">
                      
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>AUTO: Amazon Redshift assigns an optimal distribution style based on the table
                           data. To view the distribution
                           style applied to a table, query the PG_CLASS system catalog table. For
                           more information, see <a href="./viewing-distribution-styles.html">Viewing distribution styles</a>.  </p>
                     </li><li class="listitem">
                        <p>EVEN: The data in the table is spread evenly across the nodes in a
                           cluster in a round-robin distribution. Row IDs are used to determine the
                           distribution, and roughly the same number of rows are distributed to each
                           node. This is the default distribution method.</p>
                     </li><li class="listitem">
                        <p>KEY: The data is distributed by the values in the DISTKEY column. When
                           you set the joining columns of joining tables as distribution keys, the
                           joining rows from both tables are collocated on the compute nodes. When
                           data is collocated, the optimizer can perform joins more efficiently. If
                           you specify DISTSTYLE KEY, you must name a DISTKEY column.</p>
                     </li><li class="listitem">
                        <p> ALL: A copy of the entire table is distributed to every node. This
                           distribution style ensures that all the rows required for any join are
                           available on every node, but it multiplies storage requirements and
                           increases the load and maintenance times for the table. ALL distribution
                           can improve execution time when used with certain dimension tables where
                           KEY distribution isn't appropriate, but performance improvements
                           must be weighed against maintenance costs. </p>
                     </li></ul></div>
               </dd>
             
               <dt><span class="term">DISTKEY (<em>column</em>)</span></dt>
               <dd>
                  <p>Specifies a column name or positional number for the distribution key. Use
                     the name specified in either the optional column list for the table or the
                     select list of the query. Alternatively, use a positional number, where the
                     first column selected is 1, the second is 2, and so on. Only one column in a
                     table can be the distribution key:</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>If you declare a column as the DISTKEY column, DISTSTYLE must be set
                           to KEY or not set at all.</p>
                     </li><li class="listitem">
                        <p>If you don't declare a DISTKEY column, you can set DISTSTYLE to
                           EVEN.</p>
                     </li><li class="listitem">
                        <p>If you don't specify DISTKEY or DISTSTYLE, CTAS determines the
                           distribution style for the new table based on the query plan for the
                           SELECT clause. For more information, see <a href="./r_CTAS_usage_notes.html#r_CTAS_usage_notes-inheritance-of-column-and-table-attributes">Inheritance of column and table attributes</a>.</p>
                     </li></ul></div>
                  <p>You can define the same column as the distribution key and the sort key;
                     this approach tends to accelerate joins when the column in question is a
                     joining column in the query.</p>
               </dd>
             
               <dt><span class="term">[ COMPOUND | INTERLEAVED ] SORTKEY ( <em>column_name</em> [, ... ]
                  )</span></dt>
               <dd>
                  <p>Specifies one or more sort keys for the table. When data is loaded into the
                     table, the data is sorted by the columns that are designated as sort keys. </p>
                  <p>You can optionally specify COMPOUND or INTERLEAVED sort style. The default
                     is COMPOUND. For more information, see <a href="./t_Sorting_data.html">Working with sort keys</a>.</p>
                  <p>You can define a maximum of 400 COMPOUND SORTKEY columns or 8 INTERLEAVED
                     SORTKEY columns per table. </p>
                  <p>If you don't specify SORTKEY, CTAS determines the sort keys for the new
                     table based on the query plan for the SELECT clause. For more information, see
                        <a href="./r_CTAS_usage_notes.html#r_CTAS_usage_notes-inheritance-of-column-and-table-attributes">Inheritance of column and table attributes</a>.</p>
                  <div class="variablelist">
                      
                      
                  <dl>
                        <dt><span class="term">COMPOUND</span></dt>
                        <dd>
                           <p>Specifies that the data is sorted using a compound key made up of
                              all of the listed columns, in the order they are listed. A compound
                              sort key is most useful when a query scans rows according to the order
                              of the sort columns. The performance benefits of sorting with a
                              compound key decrease when queries rely on secondary sort columns. You
                              can define a maximum of 400 COMPOUND SORTKEY columns per table.
                           </p>
                        </dd>
                      
                        <dt><span class="term">INTERLEAVED</span></dt>
                        <dd>
                           <p>Specifies that the data is sorted using an interleaved sort key. A
                              maximum of eight columns can be specified for an interleaved sort key. </p>
                           <p>An interleaved sort gives equal weight to each column, or subset of
                              columns, in the sort key, so queries don't depend on the order of
                              the columns in the sort key. When a query uses one or more secondary
                              sort columns, interleaved sorting significantly improves query
                              performance. Interleaved sorting carries a small overhead cost for
                              data loading and vacuuming operations. </p>
                        </dd>
                     </dl></div>
               </dd>
             
               <dt><span class="term">AS <em>query</em>
               </span></dt>
               <dd>
                  <p>Any query (SELECT statement) that Amazon Redshift supports.</p>
               </dd>
            </dl></div>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_TABLE_examples.html">Examples</div><div id="next" class="next-link" accesskey="n" href="./r_CTAS_usage_notes.html">CTAS usage notes</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_TABLE_AS.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_TABLE_AS.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>