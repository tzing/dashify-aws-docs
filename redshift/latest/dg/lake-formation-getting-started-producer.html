<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Working with Lake Formation-managed datashares as a producer - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="lake-formation-getting-started-producer" /><meta name="default_state" content="lake-formation-getting-started-producer" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/lake-formation-getting-started-producer.html" /><meta name="description" content="As a producer cluster or workgroup administrator, follow these steps to share datashares to Lake Formation:" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/lake-formation-getting-started-producer.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/lake-formation-getting-started-producer.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Working with Lake Formation-managed datashares as a producer" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Working with Lake Formation-managed datashares as a producer - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#lake-formation-getting-started-producer" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/lake-formation-getting-started-producer.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/lake-formation-getting-started-producer.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/lake-formation-getting-started-producer.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Sharing data across clusters in Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/datashare-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Managing data sharing tasks",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/getting-started-datashare.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Managing data sharing using the SQL interface",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/getting-started-datashare-sql.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Working with AWS Lake Formation-managed datashares",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/lake-formation-getting-started.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Working with Lake Formation-managed datashares as a producer",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/lake-formation-getting-started.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#lake-formation-getting-started-producer" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="lake-formation-getting-started-producer">Working with Lake Formation-managed datashares as a producer</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>As a producer cluster or workgroup administrator, follow these steps to share datashares to Lake Formation:</p><div class="procedure"><ol><li>
                     <p>Create datashares in your cluster and authorize AWS Lake Formation to access the datashares.</p>
                     <p>Only cluster superuser and database owners can create datashares. Each datashare is associated with a database 
                        during creation. Only objects from that database can be shared in that datashare. Multiple datashares 
                        can be created on the same database with the same or different granularity of objects. There is no limit 
                        on the number of datashares you can create on a cluster.</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATASHARE salesshare;</code></pre>
                  </li><li>
                     <p>
                        Add objects to the datashare. The producer cluster or workgroup administrator continues to manage datashare objects that
                        are available. To add objects to a datashare, add the schema before adding objects. When you add a schema,
                        Amazon Redshift doesn't add all the objects under it. You must add them explicitly. For more information, 
                        see <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_ALTER_DATASHARE.html">ALTER DATASHARE</a>.
                     </p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql "><code class="userinput">ALTER DATASHARE salesshare ADD SCHEMA PUBLIC;
ALTER DATASHARE salesshare ADD TABLE public.tickit_sales_redshift;
ALTER DATASHARE salesshare ADD ALL TABLES IN SCHEMA PUBLIC;</code>
</code></pre>
                     
                     <p>You can also add views to a datashare. Supported views are standard views, late binding views, and materialized views.</p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql "><code class="userinput">CREATE VIEW public.sales_data_summary_view AS SELECT * FROM public.tickit_sales_redshift;
ALTER DATASHARE salesshare ADD TABLE public.tickit_sales_redshift;</code>
</code></pre>
                     
                     <p>Use ALTER DATASHARE to share schemas, tables, and views, in a given schema. 
                        Superusers, datashare owners, or users who have ALTER or ALL permissions on the 
                        datashare can alter the datashare to add objects to or remove objects from it. 
                        Database users should be the owners of the objects or have SELECT, USAGE, or ALL permissions on the objects.
                     </p>
                     
                     <p>Use the INCLUDENEW clause to add any new tables and views created in a specified schema to the datashare. 
                        Only superusers can change this property for each datashare-schema pair.</p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql "><code class="userinput">ALTER DATASHARE salesshare ADD SCHEMA PUBLIC;
ALTER DATASHARE salesshare SET INCLUDENEW = TRUE FOR SCHEMA PUBLIC;</code>
</code></pre>
                  </li><li>
                     <p>Grant access of the datashare to a Lake Formation administrator account.</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql "><code class="userinput">GRANT USAGE ON DATASHARE salesshare TO ACCOUNT '012345678910' VIA DATA CATALOG;</code></code></pre>
                     
                     <p>To revoke usage, use the following command.</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql "><code class="userinput">REVOKE USAGE ON DATASHARE salesshare FROM ACCOUNT '012345678910' VIA DATA CATALOG;</code></code></pre>
                  </li><li>
                     <p>Authorize access to the datashare for Lake Formation by using the <code class="code">aws redshift authorize-data-share</code> 
                        API operation. Doing so lets Lake Formation recognize the datashare in the service account and 
                        manage associating consumers to the datashare.</p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws redshift authorize-data-share 
--data-share-arn arn:aws:redshift:us-east-1:<span>{</span>PRODUCER_ACCOUNT}:datashare:<span>{</span>PRODUCER_CLUSTER_NAMESPACE}/salesshare 
--consumer-identifier <span>{</span>"DataCatalog/&lt;consumer-account-id&gt;"}
</code></pre>
                     <p>
                        To remove authorization from Lake Formation-managed datashares, use the <code class="code">aws redshift deauthorize-data-share</code> API 
                        operation. By doing so, you allow AWS Lake Formation to recognize the datashare in the service account and remove authorization.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws redshift deauthorize-data-share 
--data-share-arn arn:aws:redshift:us-east-1:<span>{</span>PRODUCER_ACCOUNT}:datashare:<span>{</span>PRODUCER_CLUSTER_NAMESPACE}/salesshare 
--consumer-identifier <span>{</span>"DataCatalog/&lt;consumer-account-id&gt;"}
</code></pre>
                     <p>
                        At any time, if the producer cluster or workgroup administrator decides that there is no longer a need to share data with the 
                        consumer cluster or workgroup, they can use DROP DATASHARE to delete the datashare, deauthorize the datashare, or revoke
                        datashare permissions. The associated permissions and objects in Lake Formation are not automatically deleted. 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql "><code class="userinput">DROP DATASHARE salesshare;</code></code></pre>
                     <p>
                        After authorizing the Lake Formation account to manage the datashare, the Lake Formation administrator can discover the 
                        shared datashare, associate the dateshare with an Data Catalog ARN, and create a database in the AWS Glue Data Catalog linking to the datashare.
                        To associate datashares using the AWS CLI, use the command 
                        <a href="https://docs.aws.amazon.com/cli/latest/reference/redshift/associate-data-share-consumer.html">
                           associate-data-share-consumer</a>. To share a datashare across AWS Regions, specify the <code class="code">--region</code> parameter in the
                        <code class="code">associate-data-share-consumer</code> command or use the AWS console to choose your data consumers. The following example
                        demonstrates how to to share a Lake Formation-managed datashare across Regions. 
                     </p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws redshift associate-data-share-consumer --region &lt;region-1&gt;
--data-share-arn 'arn:aws:redshift:us-east-1:12345678912:datashare:035c45ea-61ce-86f0-8b75-19ac6102c3b7/sample_share' 
--consumer-arn 'arn:aws:glue:&lt;region-1&gt;:111912345678:catalog'</code></pre>
                     <p>The Lake Formation administrator must also 
                        create local resources that define how objects within the datashare should map to objects within Lake Formation. 
                        For more information about discovering datashares and creating local resources, see 
                        <a href="https://docs.aws.amazon.com/lake-formation/latest/dg/data-sharing-redshift.html">Managing permissions
                         for data in an Amazon Redshift datashare</a>.
                     </p>
                  </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./lake-formation-getting-started.html">Working with AWS Lake Formation-managed datshares</div><div id="next" class="next-link" accesskey="n" href="./lake-formation-getting-started-consumer.html">Working with Lake Formation-managed datashares as a consumer</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/lake-formation-getting-started-producer.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/lake-formation-getting-started-producer.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>