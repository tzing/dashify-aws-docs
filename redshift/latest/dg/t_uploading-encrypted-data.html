<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Uploading encrypted data to Amazon S3 - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="t_uploading-encrypted-data" /><meta name="default_state" content="t_uploading-encrypted-data" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/t_uploading-encrypted-data.html" /><meta name="description" content="Upload encrypted data to an Amazon S3 bucket and load the data using the COPY command with the ENCRYPTED option and a private encryption key to provide greater security." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/t_uploading-encrypted-data.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/t_uploading-encrypted-data.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Uploading encrypted data to Amazon S3" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Uploading encrypted data to Amazon S3 - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#t_uploading-encrypted-data" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/t_uploading-encrypted-data.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/t_uploading-encrypted-data.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/t_uploading-encrypted-data.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Loading data",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/t_Loading_data.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Using a COPY command to load data",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/t_Loading_tables_with_the_COPY_command.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Loading data from Amazon S3",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/t_Loading-data-from-S3.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Uploading files to Amazon S3",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/t_uploading-data-to-S3.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Uploading encrypted data to Amazon S3",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/t_uploading-data-to-S3.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#t_uploading-encrypted-data" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#server-side-encryption">Server-side encryption</a><a href="#client-side-encryption">Client-side encryption</a><a href="#client-side-encryption-example">Example: Uploading client-side
                        encrypted data</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="t_uploading-encrypted-data">Uploading encrypted data to
                     Amazon S3</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon S3 supports both server-side encryption and client-side encryption. This
                  topic discusses the differences between the server-side and client-side encryption
                  and describes the steps to use client-side encryption with Amazon Redshift. Server-side
                  encryption is transparent to Amazon Redshift. </p>
                  <h2 id="server-side-encryption">Server-side encryption</h2>

                  <p>Server-side encryption is data encryption at rest—that is, Amazon S3
                     encrypts your data as it uploads it and decrypts it for you when you access it.
                     When you load tables using a COPY command, there is no difference in the way
                     you load from server-side encrypted or unencrypted objects on Amazon S3. For more
                     information about server-side encryption, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingServerSideEncryption.html">Using Server-Side
                        Encryption</a> in the <em>Amazon Simple Storage Service User Guide</em>.</p>
                
                  <h2 id="client-side-encryption">Client-side encryption</h2>

                  <p>In client-side encryption, your client application manages encryption of
                     your data, the encryption keys, and related tools. You can upload data to an
                     Amazon S3 bucket using client-side encryption, and then load the data using the COPY
                     command with the ENCRYPTED option and a private encryption key to provide
                     greater security.</p>
                  <p>You encrypt your data using envelope encryption. With <em>envelope
                        encryption,</em> your application handles all encryption exclusively.
                     Your private encryption keys and your unencrypted data are never sent to AWS,
                     so it's very important that you safely manage your encryption keys. If you lose
                     your encryption keys, you won't be able to unencrypt your data, and you can't
                     recover your encryption keys from AWS. Envelope encryption combines the
                     performance of fast symmetric encryption while maintaining the greater security
                     that key management with asymmetric keys provides. A one-time-use symmetric key
                     (the envelope symmetric key) is generated by your Amazon S3 encryption client to
                     encrypt your data, then that key is encrypted by your root key and stored
                     alongside your data in Amazon S3. When Amazon Redshift accesses your data during a load,
                     the encrypted symmetric key is retrieved and decrypted with your real key, then
                     the data is decrypted.</p>
                  <p>To work with Amazon S3 client-side encrypted data in Amazon Redshift, follow the steps
                     outlined in <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingClientSideEncryption.html">Protecting
                        Data Using Client-Side Encryption</a> in the
                        <em>Amazon Simple Storage Service User Guide</em>, with the additional requirements that
                     you use:</p>
                  <div class="itemizedlist">
                      
                     
                     
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p><span class="topcom">Symmetric encryption –</span> The AWS
                           SDK for Java <code class="code">AmazonS3EncryptionClient</code> class uses envelope
                           encryption, described preceding, which is based on symmetric key
                           encryption. Use this class to create an Amazon S3 client to upload client-side
                           encrypted data.</p>
                     </li><li class="listitem">
                        <p><span class="topcom">A 256-bit AES root symmetric key
                              –</span> A root key encrypts the envelope key. You pass the
                           root key to your instance of the <code class="code">AmazonS3EncryptionClient</code>
                           class. Save this key, because you will need it to copy data into
                           Amazon Redshift.</p>
                     </li><li class="listitem">
                        <p><span class="topcom">Object metadata to store encrypted envelope key
                              –</span> By default, Amazon S3 stores the envelope key as object
                           metadata for the <code class="code">AmazonS3EncryptionClient</code> class. The
                           encrypted envelope key that is stored as object metadata is used during
                           the decryption process. </p>
                     </li></ul></div>
                  
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you get a cipher encryption error message when you use the encryption
                        API for the first time, your version of the JDK may have a Java Cryptography
                        Extension (JCE) jurisdiction policy file that limits the maximum key length
                        for encryption and decryption transformations to 128 bits. For information
                        about addressing this issue, go to <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingClientSideEncryptionUpload.html">Specifying
                           Client-Side Encryption Using the AWS SDK for Java</a> in the
                           <em>Amazon Simple Storage Service User Guide</em>. </p></div></div>
                  <p>For information about loading client-side encrypted files into your Amazon Redshift
                     tables using the COPY command, see <a href="./c_loading-encrypted-files.html">Loading encrypted data files from
                     Amazon S3</a>.</p>
                
                  <h2 id="client-side-encryption-example">Example: Uploading client-side
                        encrypted data</h2>

                  <p>For an example of how to use the AWS SDK for Java to upload client-side
                     encrypted data, go to <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/encrypt-client-side-symmetric-master-key.html">Protecting data using client-side encryption</a>
                     in the <em>Amazon Simple Storage Service User Guide</em>. </p>
                  <p>The second option shows the choices you must make during client-side encryption so
                     that the data can be loaded in Amazon Redshift. Specifically, the example shows using
                     object metadata to store the encrypted envelope key and the use of a 256-bit
                     AES root symmetric key. </p>
                  <p>This example provides example code using the AWS SDK for Java to create a
                     256-bit AES symmetric root key and save it to a file. Then the example upload
                     an object to Amazon S3 using an S3 encryption client that first encrypts sample
                     data on the client-side. The example also downloads the object and verifies
                     that the data is the same.</p>
               <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./managing-data-consistency.html">Managing data consistency</div><div id="next" class="next-link" accesskey="n" href="./verifying-that-correct-files-are-present.html">Verifying that the
                     correct files are present in your bucket</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/t_uploading-encrypted-data.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/t_uploading-encrypted-data.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>