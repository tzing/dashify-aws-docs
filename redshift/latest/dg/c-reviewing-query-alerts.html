<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Reviewing query alerts - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-reviewing-query-alerts" /><meta name="default_state" content="c-reviewing-query-alerts" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/c-reviewing-query-alerts.html" /><meta name="description" content="Describes how to use the STL_ALERT_EVENT_LOG table to identify query performance issues." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/c-reviewing-query-alerts.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-reviewing-query-alerts.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Reviewing query alerts" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Reviewing query alerts - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#c-reviewing-query-alerts" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c-reviewing-query-alerts.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c-reviewing-query-alerts.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c-reviewing-query-alerts.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Tuning query performance",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-optimizing-query-performance.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Analyzing and improving queries",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-query-tuning.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Reviewing query alerts",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c-query-tuning.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#c-reviewing-query-alerts" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="c-reviewing-query-alerts">Reviewing query alerts</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>To use the <a href="./r_STL_ALERT_EVENT_LOG.html">STL_ALERT_EVENT_LOG</a> system table to identify and correct
            potential performance issues with your query, follow these steps:</p><div class="orderedlist">
             
             
             
         <ol><li>
               <p>Run the following to determine your query ID:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select query, elapsed, substring
from svl_qlog
order by query
desc limit 5;               </code></pre>

               <p>Examine the truncated query text in the <code class="code">substring</code> field to
                  determine which <code class="code">query</code> value to select. If you have run the query more
                  than once, use the <code class="code">query</code> value from the row with the lower
                     <code class="code">elapsed</code> value. That is the row for the compiled version. If you
                  have been running many queries, you can raise the value used by the LIMIT clause
                  used to make sure that your query is included.</p>
            </li><li>
               <p>Select rows from STL_ALERT_EVENT_LOG for your query:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">Select * from stl_alert_event_log where query = <em>MyQueryID</em>;               </code></pre>
               <div class="mediaobject">
                   
                     <img src="/images/redshift/latest/dg/images/stl_alert_event_log_results.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                   
               </div>
            </li><li>
               <p>Evaluate the results for your query. Use the following table to locate
                  potential solutions for any issues that you have identified.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Not all queries have rows in STL_ALERT_EVENT_LOG, only those with identified
                     issues.</p></div></div>
               <div class="table-container"><div class="table-contents"><table id="w323aac60c15b9b5b5b5"><thead>
                        <tr>
                           <th>Issue</th>
                           <th>Event value</th>
                           <th>Solution value</th>
                           <th>Recommended solution</th>
                        </tr>
                     </thead>
                        <tr>
                           <td tabindex="-1">Statistics for the tables in the query are missing
                              or out of date.</td>
                           <td tabindex="-1">Missing query planner statistics</td>
                           <td tabindex="-1">Run the ANALYZE command </td>
                           <td tabindex="-1">See <a href="./query-performance-improvement-opportunities.html#table-statistics-missing-or-out-of-date">Table statistics missing or out of
                  date</a>.</td>
                        </tr>
                        <tr>
                           <td tabindex="-1">There is a nested loop join (the least optimal
                              join) in the query plan.</td>
                           <td tabindex="-1">Nested Loop Join in the query plan</td>
                           <td tabindex="-1">Review the join predicates to avoid Cartesian
                              products </td>
                           <td tabindex="-1">See <a href="./query-performance-improvement-opportunities.html#nested-loop">Nested loop</a>.</td>
                        </tr>
                        
                        <tr>
                           <td tabindex="-1">The scan skipped a relatively large number of rows
                              that are marked as deleted but not vacuumed, or rows that have been
                              inserted but not committed. </td>
                           <td tabindex="-1">Scanned a large number of deleted rows</td>
                           <td tabindex="-1">Run the VACUUM command to reclaim deleted space </td>
                           <td tabindex="-1"> See <a href="./query-performance-improvement-opportunities.html#ghost-rows-or-uncommitted-rows">Ghost rows or uncommitted rows</a>. </td>
                        </tr>
                        <tr>
                           <td tabindex="-1">More than 1,000,000 rows were redistributed for a
                              hash join or aggregation. </td>
                           <td tabindex="-1">Distributed a large number of rows across the
                              network:RowCount rows were distributed in order to process the
                              aggregation</td>
                           <td tabindex="-1">Review the choice of distribution key to collocate
                              the join or aggregation </td>
                           <td tabindex="-1"> See <a href="./query-performance-improvement-opportunities.html#suboptimal-data-distribution">Suboptimal data distribution</a>. </td>
                        </tr>
                        <tr>
                           <td tabindex="-1">More than 1,000,000 rows were broadcast for a hash
                              join. </td>
                           <td tabindex="-1">Broadcasted a large number of rows across the
                              network</td>
                           <td tabindex="-1">Review the choice of distribution key to collocate
                              the join and consider using distributed tables </td>
                           <td tabindex="-1"> See <a href="./query-performance-improvement-opportunities.html#suboptimal-data-distribution">Suboptimal data distribution</a>. </td>
                        </tr>
                        <tr>
                           <td tabindex="-1">A DS_DIST_ALL_INNER redistribution style was
                              indicated in the query plan, which forces serial execution because the
                              entire inner table was redistributed to a single node.</td>
                           <td tabindex="-1">DS_DIST_ALL_INNER for Hash Join in the query
                              plan</td>
                           <td tabindex="-1">Review the choice of distribution strategy to
                              distribute the inner, rather than outer, table </td>
                           <td tabindex="-1"> See <a href="./query-performance-improvement-opportunities.html#suboptimal-data-distribution">Suboptimal data distribution</a>. </td>
                        </tr>
                     </table></div></div>
            </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-query-analysis-process.html">Query analysis workflow</div><div id="next" class="next-link" accesskey="n" href="./c-analyzing-the-query-plan.html">Analyzing the query plan</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c-reviewing-query-alerts.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/c-reviewing-query-alerts.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>