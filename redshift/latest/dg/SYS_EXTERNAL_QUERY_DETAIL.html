<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SYS_EXTERNAL_QUERY_DETAIL - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="SYS_EXTERNAL_QUERY_DETAIL" /><meta name="default_state" content="SYS_EXTERNAL_QUERY_DETAIL" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" /><meta name="description" content="Use SYS_EXTERNAL_QUERY_DETAIL to view details of user queries." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="SYS_EXTERNAL_QUERY_DETAIL" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>SYS_EXTERNAL_QUERY_DETAIL - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#SYS_EXTERNAL_QUERY_DETAIL" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "System tables and views reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_system-tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SYS monitoring views",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/serverless_views-monitoring.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "SYS_EXTERNAL_QUERY_DETAIL",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/serverless_views-monitoring.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#SYS_EXTERNAL_QUERY_DETAIL" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#SYS_EXTERNAL_QUERY_DETAIL-table-columns">Table columns</a><a href="#SYS_EXTERNAL_QUERY_DETAIL-sample-queries">Sample queries</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="SYS_EXTERNAL_QUERY_DETAIL">SYS_EXTERNAL_QUERY_DETAIL</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Use SYS_EXTERNAL_QUERY_DETAIL to view details for queries at a segment level. Each row
            represents a segment from a particular WLM query with details like the number of rows processed,
            number of bytes processed, and partition info of external tables in Amazon S3. Each row in
            this view will also have a corresponding entry in the SYS_QUERY_DETAIL view, except this
            view has more detail information related to external query processing. </p><p>SYS_EXTERNAL_QUERY_DETAIL is visible to all users. Superusers can see all rows; regular users can see only their own data. For more information, see <a href="./cm_chap_system-tables.html#c_visibility-of-data">Visibility of data in system tables and
                views</a>.</p>
            <h2 id="SYS_EXTERNAL_QUERY_DETAIL-table-columns">Table columns</h2>
            
            
            <div class="table-container"><div class="table-contents"><table id="w323aac69c13c43b7b3"><thead>
                        <tr>
                            <th>Column name </th>
                            <th>Data type </th>
                            <th>Description </th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">user_id</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">The identifier of the user who submitted the query.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">query_id</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">The query identifier of the external query.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">transaction_id</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">The transaction identifier.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">child_query_sequence</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">The sequence of the rewritten user query. Starts with 0, similar to segment_id.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">segment_id</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">The segment identifier of the query segment.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">source_type</td>
                            <td tabindex="-1">character(32)</td>
                            <td tabindex="-1">The data source type of the query, it could be <code class="code">S3</code> for Redshift Spectrum, <code class="code">PG</code> for federated query.</td>
                        </tr>                        
                        <tr>
                            <td tabindex="-1">start_time</td>
                            <td tabindex="-1">timestamp</td>
                            <td tabindex="-1">The time when the query began. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">end_time</td>
                            <td tabindex="-1">timestamp</td>
                            <td tabindex="-1">The time when the query completed.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">duration</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">The amount of time (microseconds) spent on the query.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">total_partitions</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">The number of partitions an Amazon S3 query required.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">qualified_partitions</td>
                            <td tabindex="-1">integer</td>
                            <td tabindex="-1">The number of partitions an Amazon S3 query scanned.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">scanned_files</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">The number of Amazon S3 files scanned.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">returned_rows</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">The number of scanned rows for an Amazon S3 query, or the number of returned rows for a federated query.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">returned_bytes</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">The number of scanned bytes for an Amazon S3 query, or the number of returned bytes for a federated query.</td>
                        </tr> 
                        <tr>
                            <td tabindex="-1">file_format</td>
                            <td tabindex="-1">text</td>
                            <td tabindex="-1">The file format of Amazon S3 files.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">file_location</td>
                            <td tabindex="-1">text</td>
                            <td tabindex="-1">The Amazon S3 location of external table.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">external_query_text</td>
                            <td tabindex="-1">text</td>
                            <td tabindex="-1">The segment level query text for a federated query.</td>
                        </tr>                   
                        <tr>
                            <td tabindex="-1">warning_message</td>
                            <td tabindex="-1">character(4000)</td>
                            <td tabindex="-1">The warning message displayed when the query runs.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">table_name</td>
                            <td tabindex="-1">character(136)</td>
                            <td tabindex="-1">The table name of the step that is being operated.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">is_recursive</td>
                            <td tabindex="-1">character(1)</td>
                            <td tabindex="-1">Indicates whether there is recursive scan for subfolders.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">is_nested</td>
                            <td tabindex="-1">character(1)</td>
                            <td tabindex="-1">Indicates whether the nested column data type is accessed.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">s3list_time</td>
                            <td tabindex="-1">bigint</td>
                            <td tabindex="-1">The duration of file listing in milliseconds.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">get_paritition_time</td>
                            <td tabindex="-1">long</td>
                            <td tabindex="-1">Time spent to list and qualify partitions for a given external object from the AWS Glue Data Catalog and Apache Hive.</td>
                        </tr>
                    </table></div></div>
         
            <h2 id="SYS_EXTERNAL_QUERY_DETAIL-sample-queries">Sample queries</h2>
            <p>The following query shows the external query details.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT query_id,
       segment_id,
       start_time,
       end_time,
       total_partitions,
       qualified_partitions,
       scanned_files,
       returned_rows,
       returned_bytes,
       trim(external_query_text) query_text,
       trim(file_location) file_location
FROM sys_external_query_detail
ORDER BY query_id, start_time DESC
LIMIT 2;</code></pre>  
            <p>Sample output.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""> query_id | segment_id |         start_time         |          end_time          | total_partitions | qualified_partitions | scanned_files | returned_rows | returned_bytes | query_text | file_location
----------+------------+----------------------------+----------------------------+------------------+----------------------+---------------+---------------+----------------+------------+---------------
   763251 |          0 | 2022-02-15 22:32:23.312448 | 2022-02-15 22:32:24.036023 |                3 |                    3 |             3 |         38203 |        2683414 |            |
   763254 |          0 | 2022-02-15 22:32:40.17103  | 2022-02-15 22:32:40.839313 |                3 |                    3 |             3 |         38203 |        2683414 |            |</code></pre>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./SYS_DATASHARE_USAGE_PRODUCER.html">SYS_DATASHARE_USAGE_PRODUCER</div><div id="next" class="next-link" accesskey="n" href="./SYS_EXTERNAL_QUERY_ERROR.html">SYS_EXTERNAL_QUERY_ERROR</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/SYS_EXTERNAL_QUERY_DETAIL.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>