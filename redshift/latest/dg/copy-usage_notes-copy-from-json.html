<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>COPY from JSON format - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="copy-usage_notes-copy-from-json" /><meta name="default_state" content="copy-usage_notes-copy-from-json" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-usage_notes-copy-from-json.html" /><meta name="description" content="Describes how to use the Amazon Redshift COPY command to load tables from data in JSON format." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-usage_notes-copy-from-json.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-usage_notes-copy-from-json.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="COPY from JSON format" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>COPY from JSON format - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#copy-usage_notes-copy-from-json" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/copy-usage_notes-copy-from-json.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/copy-usage_notes-copy-from-json.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/copy-usage_notes-copy-from-json.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL commands",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "COPY",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/r_COPY.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Usage notes",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/r_COPY_usage_notes.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "COPY from JSON format",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/r_COPY_usage_notes.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#copy-usage_notes-copy-from-json" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#copy-usage-json-options">COPY options for JSON</a><a href="#copy-usage-json-options">JSONPath option</a><a href="#copy-usage-json-escape-characters">Escape characters in JSON</a><a href="#copy-usage-json-rounding">Loss of numeric precision</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="copy-usage_notes-copy-from-json">COPY from JSON format</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The JSON data structure is made up of a set of objects or
            arrays. A JSON <em>object</em> begins and ends with
            braces, and contains an unordered collection of name-value pairs. Each name and value
            are separated by a colon, and the pairs are separated by commas. The name is a string in
            double quotation marks. The quotation mark characters must be simple quotation marks
            (0x22), not slanted or "smart" quotation marks. </p><p>A JSON <em>array</em> begins and ends with brackets, and contains an
            ordered collection of values separated by commas. A value can be a string in double
            quotation marks, a number, a Boolean true or false, null, a JSON object, or an array. </p><p>JSON objects and arrays can be nested, enabling a hierarchical data structure. The
            following example shows a JSON data structure with two valid objects. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "id": 1006410,
    "title": "Amazon Redshift Database Developer Guide"
}
<span>{</span>
    "id": 100540,
    "name": "Amazon Simple Storage Service User Guide"
}</code></pre><p>The following shows the same data as two JSON arrays.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">[
    1006410,
    "Amazon Redshift Database Developer Guide"
]
[
    100540,
    "Amazon Simple Storage Service User Guide"
]</code></pre>
            <h2 id="copy-usage-json-options">COPY options for JSON</h2>
            
            <p>You can specify the following options when using COPY with JSON format data: </p>
            <div class="itemizedlist">
                
                
                
 
            <ul class="itemizedlist"><li class="listitem">
                  <p><code class="code">'auto' </code>– COPY automatically loads fields from the JSON
                     file. </p>
               </li><li class="listitem">
                  <p><code class="code">'auto ignorecase'</code> – COPY automatically loads fields from
                     the JSON file while ignoring the case of field names.</p>
               </li><li class="listitem">
                  
                  <p><code class="code">s3://jsonpaths_file</code> – COPY uses a JSONPaths file
                     to parse the JSON source data. A <em>JSONPaths file</em> is a text
                     file that contains a single JSON object with the name <code class="code">"jsonpaths"</code>
                     paired with an array of JSONPath expressions. If the name is any string other
                     than <code class="code">"jsonpaths"</code>, COPY uses the <code class="code">'auto'</code> argument
                     instead of using the JSONPaths file. </p>
               </li></ul></div>
            <p>For examples that show how to load data using <code class="code">'auto'</code>, <code class="code">'auto ignorecase'</code>,
               or a JSONPaths file, and using either JSON objects or arrays, see <a href="./r_COPY_command_examples.html#r_COPY_command_examples-copy-from-json">Copy from JSON examples</a>. </p>
          
            <h2 id="copy-usage-json-options">JSONPath option</h2>
 
            <p>In the Amazon Redshift COPY syntax, a JSONPath expression specifies the explicit path to a
               single name element in a JSON hierarchical data structure, using either bracket notation
               or dot notation. Amazon Redshift doesn't support any JSONPath elements, such as wildcard
               characters or filter expressions, that might resolve to an ambiguous path or multiple
               name elements. As a result, Amazon Redshift can't parse complex, multi-level data
               structures.</p>
            <p>The following is an example of a JSONPaths file with JSONPath expressions using
               bracket notation. The dollar sign ($) represents the root-level structure. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "jsonpaths": [
       "$['id']",
       "$['store']['book']['title']",
	"$['location'][0]" 
    ]
}</code></pre>
            <p> In the previous example, <code class="code">$['location'][0]</code> references the first
               element in an array. JSON uses zero-based array indexing. Array indexes must be
               positive integers (greater than or equal to zero).</p>
            <p>The following example shows the previous JSONPaths file using dot notation. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "jsonpaths": [
       "$.id",
       "$.store.book.title",
	"$.location[0]"
    ]
}</code></pre>
            <p>You can't mix bracket notation and dot notation in the <code class="code">jsonpaths</code>
               array. Brackets can be used in both bracket notation and dot notation to reference an
               array element. </p>
            <p>When using dot notation, the JSONPath expressions can't contain the following
               characters: </p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Single straight quotation mark ( ' ) </p>
               </li><li class="listitem">
                  <p>Period, or dot ( . ) </p>
               </li><li class="listitem">
                  <p>Brackets ( [ ] ) unless used to reference an array element </p>
               </li></ul></div>
            <p>If the value in the name-value pair referenced by a JSONPath expression is an
               object or an array, the entire object or array is loaded as a string, including the
               braces or brackets. For example, suppose that your JSON data contains the following
               object. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "id": 0,
    "guid": "84512477-fa49-456b-b407-581d0d851c3c",
    "isActive": true,
    "tags": [
        "nisi",
        "culpa",
        "ad",
        "amet",
        "voluptate",
        "reprehenderit",
        "veniam"
    ],
    "friends": [
        <span>{</span>
            "id": 0,
            "name": "Martha Rivera"
        },
        <span>{</span>
            "id": 1,
            "name": "Renaldo"
        }
    ]
}</code></pre>

         <p>The JSONPath expression <code class="code">$['tags']</code> then returns the following value. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"["nisi","culpa","ad","amet","voluptate","reprehenderit","veniam"]" </code></pre>
         <p>The JSONPath expression <code class="code">$['friends'][1]</code> then returns the following
            value. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"<span>{</span>"id": 1,"name": "Renaldo"}" </code></pre>
         <p>Each JSONPath expression in the <code class="code">jsonpaths</code> array corresponds to one
            column in the Amazon Redshift target table. The order of the <code class="code">jsonpaths</code> array
            elements must match the order of the columns in the target table or the column list, if
            a column list is used. </p>
         <p>For examples that show how to load data using either the <code class="code">'auto'</code> argument
            or a JSONPaths file, and using either JSON objects or arrays, see <a href="./r_COPY_command_examples.html#r_COPY_command_examples-copy-from-json">Copy from JSON examples</a>. </p>
         <p>For information on how to copy multiple JSON files, see <a href="./loading-data-files-using-manifest.html">Using a manifest to specify
                     data files</a>.</p>
 
 
          
            <h2 id="copy-usage-json-escape-characters">Escape characters in JSON</h2>

            <p>COPY loads <code class="code">\n</code> as a newline character and loads <code class="code">\t</code> as a
               tab character. To load a backslash, escape it with a backslash ( <code class="code">\\</code>
               ).</p>
            <p>For example, suppose you have the following JSON in a file named
                  <code class="code">escape.json</code> in the bucket <code class="code">s3://mybucket/json/</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "backslash": "This is a backslash: \\",
  "newline": "This sentence\n is on two lines.",
  "tab": "This sentence \t contains a tab."
}</code></pre>
            <p>Run the following commands to create the ESCAPES table and load the
               JSON.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create table escapes (backslash varchar(25), newline varchar(35), tab varchar(35));

copy escapes from 's3://mybucket/json/escape.json' 
iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'
format as json 'auto';</code></pre>
            <p>Query the ESCAPES table to view the results.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from escapes;

       backslash        |      newline      |               tab
------------------------+-------------------+----------------------------------
 This is a backslash: \ | This sentence     | This sentence    contains a tab.
                        :  is on two lines.
(1 row)</code></pre>
          
            <h2 id="copy-usage-json-rounding">Loss of numeric precision</h2>
            <p>You might lose precision when loading numbers from data files in JSON format to a
               column that is defined as a numeric data type. Some floating point values aren't
               represented exactly in computer systems. As a result, data you copy from a JSON file
               might not be rounded as you expect. To avoid a loss of precision, we recommend using
               one of the following alternatives:</p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Represent the number as a string by enclosing the value in double quotation
                     characters.</p>
               </li><li class="listitem">
                  <p>Use <a href="./copy-parameters-data-conversion.html#copy-roundec">ROUNDEC</a> to round the number
                     instead of truncating.</p>
               </li><li class="listitem">
                  <p>Instead of using JSON or Avro files, use CSV, character-delimited, or
                     fixed-width text files.</p>
               </li></ul></div>           
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./copy-usage_notes-multiple-files.html">Errors when reading multiple
               files</div><div id="next" class="next-link" accesskey="n" href="./copy-usage_notes-copy-from-columnar.html">COPY from columnar data
               formats</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/copy-usage_notes-copy-from-json.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/copy-usage_notes-copy-from-json.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>