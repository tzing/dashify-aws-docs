<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>EXPLAIN - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_EXPLAIN" /><meta name="default_state" content="r_EXPLAIN" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_EXPLAIN.html" /><meta name="description" content="Displays the execution plan for a query statement without running the query." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_EXPLAIN.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_EXPLAIN.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_EXPLAIN.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_EXPLAIN.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_EXPLAIN.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_EXPLAIN.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_EXPLAIN.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_EXPLAIN.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_EXPLAIN.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_EXPLAIN.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_EXPLAIN.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_EXPLAIN.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_EXPLAIN.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_EXPLAIN.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_EXPLAIN.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_EXPLAIN.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_EXPLAIN.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_EXPLAIN.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_EXPLAIN.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_EXPLAIN.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_EXPLAIN.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_EXPLAIN.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="EXPLAIN" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>EXPLAIN - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_EXPLAIN" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_EXPLAIN.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_EXPLAIN.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_EXPLAIN.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL commands",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "EXPLAIN",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_EXPLAIN" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#r_EXPLAIN-synopsis">Syntax</a><a href="#r_EXPLAIN-parameters">Parameters</a><a href="#r_EXPLAIN-usage-notes">Usage notes</a><a href="#r_EXPLAIN-query-planning-and-execution-steps">Query planning and execution steps</a><a href="#r_EXPLAIN-RLS">Using EXPLAIN for RLS </a><a href="#r_EXPLAIN-examples">Examples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_EXPLAIN">EXPLAIN</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Displays the execution plan for a query statement without running the query. For information about the query analysis workflow, see <a href="./c-query-analysis-process.html">Query analysis workflow</a>.</p>
         <h2 id="r_EXPLAIN-synopsis">Syntax</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">EXPLAIN [ VERBOSE ] <em>query</em>
                  </code></pre>
       
         <h2 id="r_EXPLAIN-parameters">Parameters</h2>
         <div class="variablelist">
             
             
         <dl>
               <dt><span class="term">VERBOSE </span></dt>
               <dd>
                  <p>Displays the full query plan instead of just a summary.</p>
               </dd>
             
               <dt><span class="term">
                  <em>query</em>
               </span></dt>
               <dd>
                  <p>Query statement to explain. The query can be a SELECT, INSERT, CREATE TABLE
                     AS, UPDATE, or DELETE statement.</p>
               </dd>
            </dl></div>
       
         <h2 id="r_EXPLAIN-usage-notes">Usage notes</h2>
         <p>EXPLAIN performance is sometimes influenced by the time it takes to create temporary
            tables. For example, a query that uses the common subexpression optimization requires
            temporary tables to be created and analyzed in order to return the EXPLAIN output. The
            query plan depends on the schema and statistics of the temporary tables. Therefore, the
            EXPLAIN command for this type of query might take longer to run than expected.</p>
         <p>You can use EXPLAIN only for the following commands:</p>
         <div class="itemizedlist">
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>SELECT</p>
            </li><li class="listitem">
               <p>SELECT INTO</p>
            </li><li class="listitem">
               <p>CREATE TABLE AS</p>
            </li><li class="listitem">
               <p>INSERT</p>
            </li><li class="listitem">
               <p>UPDATE</p>
            </li><li class="listitem">
               <p>DELETE</p>
            </li></ul></div>
         <p>The EXPLAIN command will fail if you use it for other SQL commands, such as data
            definition language (DDL) or database operations.</p>
         
         <p>The EXPLAIN output relative unit costs are used by Amazon Redshift to choose a query plan. Amazon Redshift compares the sizes of various resource estimates to determine the plan.</p>
       
         <h2 id="r_EXPLAIN-query-planning-and-execution-steps">Query planning and
               execution steps</h2>
         <p>The execution plan for a specific Amazon Redshift query statement breaks down execution and
            calculation of a query into a discrete sequence of steps and table operations that
            eventually produce a final result set for the query. For information about query planning, see <a href="./c-query-processing.html">Query processing</a>.</p>
            <p>The following table provides a
            summary of steps that Amazon Redshift can use in developing an execution plan for any query a
            user submits for execution.</p>
         <div class="table-container"><div class="table-contents"><table id="w323aac67c10d239c11b7"><thead>
                  <tr>
                     <th>EXPLAIN operators </th>
                     <th>Query execution steps </th>
                     <th>Description </th>
                  </tr>
               </thead>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>SCAN:</b>
                     </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1"> Sequential Scan </td>
                     <td style="vertical-align: top;" tabindex="-1">scan </td>
                     <td tabindex="-1">Amazon Redshift relation scan or table scan operator or step.
                        Scans whole table sequentially from beginning to end; also evaluates query
                        constraints for every row (Filter) if specified with WHERE clause. Also used
                        to run INSERT, UPDATE, and DELETE statements. </td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>JOINS:</b> Amazon Redshift uses different join operators based on the
                        physical design of the tables being joined, the location of the data
                        required for the join, and specific attributes of the query itself. Subquery
                        Scan -- Subquery scan and append are used to run UNION queries. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Nested Loop </td>
                     <td style="vertical-align: top;" tabindex="-1">nloop </td>
                     <td tabindex="-1">Least optimal join; mainly used for cross-joins
                        (Cartesian products; without a join condition) and some inequality joins.
                     </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Hash Join </td>
                     <td style="vertical-align: top;" tabindex="-1">hjoin </td>
                     <td tabindex="-1">Also used for inner joins and left and right outer joins
                        and typically faster than a nested loop join. Hash Join reads the outer
                        table, hashes the joining column, and finds matches in the inner hash table.
                        Step can spill to disk. (Inner input of hjoin is hash step which can be
                        disk-based.) </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Merge Join </td>
                     <td style="vertical-align: top;" tabindex="-1">mjoin </td>
                     <td style="vertical-align: top;" tabindex="-1">Also used for inner joins and outer joins
                        (for join tables that are both distributed and sorted on the joining
                        columns). Typically the fastest Amazon Redshift join algorithm, not including other
                        cost considerations. </td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>AGGREGATION:</b> Operators and steps used for queries that
                        involve aggregate functions and GROUP BY operations. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Aggregate </td>
                     <td style="vertical-align: top;" tabindex="-1">aggr </td>
                     <td tabindex="-1">Operator/step for scalar aggregate functions. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">HashAggregate </td>
                     <td style="vertical-align: top;" tabindex="-1">aggr </td>
                     <td tabindex="-1">Operator/step for grouped aggregate functions. Can
                        operate from disk by virtue of hash table spilling to disk. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">GroupAggregate </td>
                     <td style="vertical-align: top;" tabindex="-1">aggr </td>
                     <td tabindex="-1">Operator sometimes chosen for grouped aggregate queries
                        if the Amazon Redshift configuration setting for force_hash_grouping setting is
                        off. </td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>SORT:</b> Operators and steps used when queries have to sort or
                        merge result sets. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Sort </td>
                     <td style="vertical-align: top;" tabindex="-1">sort </td>
                     <td tabindex="-1">Sort performs the sorting specified by the ORDER BY
                        clause as well as other operations such as UNIONs and joins. Can operate
                        from disk. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Merge </td>
                     <td style="vertical-align: top;" tabindex="-1">merge </td>
                     <td tabindex="-1">Produces final sorted results of a query based on
                        intermediate sorted results derived from operations performed in parallel.
                     </td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>EXCEPT,
                           INTERSECT, and UNION operations:</b>
                     </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">SetOp Except [Distinct] </td>
                     <td style="vertical-align: top;" tabindex="-1">hjoin </td>
                     <td tabindex="-1">Used for EXCEPT queries. Can operate from disk based on
                        virtue of fact that input hash can be disk-based. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Hash Intersect [Distinct] </td>
                     <td style="vertical-align: top;" tabindex="-1">hjoin </td>
                     <td tabindex="-1">Used for INTERSECT queries. Can operate from disk based
                        on virtue of fact that input hash can be disk-based. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Append [All |Distinct] </td>
                     <td style="vertical-align: top;" tabindex="-1">save </td>
                     <td tabindex="-1">Append used with Subquery Scan to implement UNION and
                        UNION ALL queries. Can operate from disk based on virtue of "save". </td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>Miscellaneous/Other:</b>
                     </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Hash </td>
                     <td style="vertical-align: top;" tabindex="-1">hash </td>
                     <td tabindex="-1">Used for inner joins and left and right outer joins
                        (provides input to a hash join). The Hash operator creates the hash table
                        for the inner table of a join. (The inner table is the table that is checked
                        for matches and, in a join of two tables, is usually the smaller of the
                        two.) </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Limit </td>
                     <td style="vertical-align: top;" tabindex="-1">limit </td>
                     <td tabindex="-1">Evaluates the LIMIT clause. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Materialize </td>
                     <td style="vertical-align: top;" tabindex="-1">save </td>
                     <td tabindex="-1">Materialize rows for input to nested loop joins and some
                        merge joins. Can operate from disk. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">-- </td>
                     <td style="vertical-align: top;" tabindex="-1">parse </td>
                     <td tabindex="-1">Used to parse textual input data during a load. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">-- </td>
                     <td style="vertical-align: top;" tabindex="-1">project </td>
                     <td tabindex="-1">Used to rearrange columns and compute expressions, that
                        is, project data. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Result </td>
                     <td style="vertical-align: top;" tabindex="-1">-- </td>
                     <td tabindex="-1">Run scalar functions that don't involve any table
                        access. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">-- </td>
                     <td style="vertical-align: top;" tabindex="-1">return </td>
                     <td tabindex="-1">Return rows to the leader or client. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Subplan </td>
                     <td style="vertical-align: top;" tabindex="-1">-- </td>
                     <td tabindex="-1">Used for certain subqueries. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Unique </td>
                     <td style="vertical-align: top;" tabindex="-1">unique </td>
                     <td tabindex="-1">Eliminates duplicates from SELECT DISTINCT and UNION
                        queries. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Window </td>
                     <td style="vertical-align: top;" tabindex="-1">window </td>
                     <td tabindex="-1">Compute aggregate and ranking window functions. Can
                        operate from disk. </td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>Network
                           Operations:</b>
                     </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Network (Broadcast) </td>
                     <td style="vertical-align: top;" tabindex="-1">bcast </td>
                     <td tabindex="-1">Broadcast is also an attribute of Join Explain operators
                        and steps. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Network (Distribute) </td>
                     <td style="vertical-align: top;" tabindex="-1">dist </td>
                     <td tabindex="-1">Distribute rows to compute nodes for parallel processing
                        by data warehouse cluster. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Network (Send to Leader) </td>
                     <td style="vertical-align: top;" tabindex="-1">return </td>
                     <td tabindex="-1">Sends results back to the leader for further processing.
                     </td>
                  </tr>
                  <tr>
                     <td colspan="3" style="vertical-align: top;" tabindex="-1"><b>DML
                           Operations (operators that modify data):</b>
                     </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Insert (using Result) </td>
                     <td style="vertical-align: top;" tabindex="-1">insert </td>
                     <td tabindex="-1">Inserts data. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Delete (Scan + Filter) </td>
                     <td style="vertical-align: top;" tabindex="-1">delete </td>
                     <td tabindex="-1">Deletes data. Can operate from disk. </td>
                  </tr>
                  <tr>
                     <td style="vertical-align: top;" tabindex="-1">Update (Scan + Filter) </td>
                     <td style="vertical-align: top;" tabindex="-1">delete, insert </td>
                     <td tabindex="-1">Implemented as delete and Insert. </td>
                  </tr>
               </table></div></div>
       
         <h2 id="r_EXPLAIN-RLS">Using EXPLAIN for RLS </h2>
        
         <p>If a query contains a table that is subject to row-level security (RLS) policies, EXPLAIN displays a special RLS SecureScan node. Amazon Redshift also logs the same node type to the STL_EXPLAIN system table. EXPLAIN doesn't reveal the RLS predicate that applies to dim_tbl. The RLS SecureScan node type serves as an indicator that the execution plan contains additional operations that are invisible to the current user.</p>
         <p>The following example illustrates an RLS SecureScan node.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">EXPLAIN
SELECT D.cint
FROM fact_tbl F INNER JOIN dim_tbl D ON F.k_dim = D.k
WHERE F.k_dim / 10 &gt; 0;
                               QUERY PLAN
------------------------------------------------------------------------
 XN Hash Join DS_DIST_ALL_NONE  (cost=0.08..0.25 rows=1 width=4)
   Hash Cond: ("outer".k_dim = "inner"."k")
   -&gt;  *XN* *RLS SecureScan f  (cost=0.00..0.14 rows=2 width=4)*
         Filter: ((k_dim / 10) &gt; 0)
   -&gt;  XN Hash  (cost=0.07..0.07 rows=2 width=8)
         -&gt;  XN Seq Scan on dim_tbl d  (cost=0.00..0.07 rows=2 width=8)
               Filter: (("k" / 10) &gt; 0)</code></pre>

         <p>To enable full investigation of query plans that are subject to RLS, Amazon Redshift offers the EXPLAIN RLS system permissions. Users that have been granted this permission can inspect complete query plans that also include RLS predicates. </p>
         <p>The following example illustrates an additional Seq Scan below the RLS SecureScan node also includes the RLS policy predicate (k_dim &gt; 1).</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">EXPLAIN SELECT D.cint
FROM fact_tbl F INNER JOIN dim_tbl D ON F.k_dim = D.k
WHERE F.k_dim / 10 &gt; 0;
                                   QUERY PLAN
---------------------------------------------------------------------------------
 XN Hash Join DS_DIST_ALL_NONE  (cost=0.08..0.25 rows=1 width=4)
   Hash Cond: ("outer".k_dim = "inner"."k")
   *-&gt;  XN RLS SecureScan f  (cost=0.00..0.14 rows=2 width=4)
         Filter: ((k_dim / 10) &gt; 0)*
         -&gt;  *XN* *Seq Scan on fact_tbl rls_table  (cost=0.00..0.06 rows=5 width=8)
               Filter: (k_dim &gt; 1)*
   -&gt;  XN Hash  (cost=0.07..0.07 rows=2 width=8)
         -&gt;  XN Seq Scan on dim_tbl d  (cost=0.00..0.07 rows=2 width=8)
               Filter: (("k" / 10) &gt; 0)</code></pre>
         <p>While the EXPLAIN RLS permission is granted to a user, Amazon Redshift logs the full query plan including RLS predicates in the
            STL_EXPLAIN system table. Queries that are run while this permission is not granted will be logged without RLS internals.
            Granting or removing the EXPLAIN RLS permission won't change what Amazon Redshift has logged to STL_EXPLAIN for previous queries.</p>

          
            <h3 id="r_EXPLAIN_RLS-LF">AWS Lake Formation-RLS protected Redshift relations</h3>
            <p>The following example illustrates an LF SecureScan node, which you can use to view Lake Formation-RLS relations.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">EXPLAIN
SELECT *
FROM lf_db.public.t_share
WHERE a &gt; 1;
QUERY PLAN
---------------------------------------------------------------
XN LF SecureScan t_share  (cost=0.00..0.02 rows=2 width=11)
(2 rows)</code></pre>
          
       
         <h2 id="r_EXPLAIN-examples">Examples</h2>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For these examples, the sample output might vary depending on Amazon Redshift
               configuration.</p></div></div>
         <p>The following example returns the query plan for a query that selects the EVENTID,
            EVENTNAME, VENUEID, and VENUENAME from the EVENT and VENUE tables:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain
select eventid, eventname, event.venueid, venuename
from event, venue
where event.venueid = venue.venueid;</code></pre>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">                                QUERY PLAN
--------------------------------------------------------------------------
XN Hash Join DS_DIST_OUTER  (cost=2.52..58653620.93 rows=8712 width=43)
Hash Cond: ("outer".venueid = "inner".venueid)
-&gt;  XN Seq Scan on event  (cost=0.00..87.98 rows=8798 width=23)
-&gt;  XN Hash  (cost=2.02..2.02 rows=202 width=22)
-&gt;  XN Seq Scan on venue  (cost=0.00..2.02 rows=202 width=22)
(5 rows)</code></pre>
         <p>The following example returns the query plan for the same query with verbose
            output:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain verbose
select eventid, eventname, event.venueid, venuename
from event, venue
where event.venueid = venue.venueid;</code></pre>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">                                QUERY PLAN
--------------------------------------------------------------------------
<span>{</span>HASHJOIN
:startup_cost 2.52
:total_cost 58653620.93
:plan_rows 8712
:plan_width 43
:best_pathkeys &lt;&gt;
:dist_info DS_DIST_OUTER
:dist_info.dist_keys (
TARGETENTRY
<span>{</span>
VAR
:varno 2
:varattno 1
...

XN Hash Join DS_DIST_OUTER  (cost=2.52..58653620.93 rows=8712 width=43)
Hash Cond: ("outer".venueid = "inner".venueid)
-&gt;  XN Seq Scan on event  (cost=0.00..87.98 rows=8798 width=23)
-&gt;  XN Hash  (cost=2.02..2.02 rows=202 width=22)
-&gt;  XN Seq Scan on venue  (cost=0.00..2.02 rows=202 width=22)
(519 rows)</code></pre>
         <p>The following example returns the query plan for a CREATE TABLE AS (CTAS) statement: </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">explain create table venue_nonulls as
select * from venue
where venueseats is not null;

QUERY PLAN
-----------------------------------------------------------
XN Seq Scan on venue  (cost=0.00..2.02 rows=187 width=45)
Filter: (venueseats IS NOT NULL)
(2 rows)</code></pre>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_EXECUTE.html">EXECUTE</div><div id="next" class="next-link" accesskey="n" href="./fetch.html">FETCH</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_EXPLAIN.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_EXPLAIN.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>