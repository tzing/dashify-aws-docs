<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SUBSTRING function - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_SUBSTRING" /><meta name="default_state" content="r_SUBSTRING" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_SUBSTRING.html" /><meta name="description" content="Returns the subset of a string based on the specified start position." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_SUBSTRING.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_SUBSTRING.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_SUBSTRING.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_SUBSTRING.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_SUBSTRING.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_SUBSTRING.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_SUBSTRING.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SUBSTRING.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_SUBSTRING.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_SUBSTRING.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_SUBSTRING.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_SUBSTRING.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_SUBSTRING.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_SUBSTRING.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_SUBSTRING.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_SUBSTRING.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_SUBSTRING.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_SUBSTRING.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_SUBSTRING.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_SUBSTRING.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_SUBSTRING.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_SUBSTRING.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="SUBSTRING function" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>SUBSTRING function - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_SUBSTRING" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_SUBSTRING.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_SUBSTRING.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_SUBSTRING.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL functions reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_functions.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "String functions",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/String_functions_header.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "SUBSTRING function",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/String_functions_header.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_SUBSTRING" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#r_SUBSTRING-synopsis">Syntax</a><a href="#r_SUBSTRING-arguments">Arguments</a><a href="#r_SUBSTRING-return-type">Return type</a><a href="#r_SUBSTRING_usage_notes">Usage Notes</a><a href="#r_SUBSTRING-examples">Examples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_SUBSTRING">SUBSTRING function</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Returns the subset of a string based on the specified start position.</p><p>If the input is a character string, the start position and number of characters extracted are based on
            characters, not bytes, so that multi-byte characters are counted as single characters.
            If the input is a binary expression, the start position and extracted substring are based on bytes.
            You can't specify a negative length, but you can specify a negative starting
            position.</p>
            <h2 id="r_SUBSTRING-synopsis">Syntax</h2>


            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">SUBSTRING(<em>character_string</em> FROM <em>start_position</em> [ FOR <em>number_characters</em> ] )</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">SUBSTRING(<em>character_string</em>, <em>start_position</em>, <em>number_characters</em> )</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">SUBSTRING(<em>binary_expression</em>, <em>start_byte</em>, <em>number_bytes</em> )</code></pre>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">SUBSTRING(<em>binary_expression</em>, <em>start_byte</em> )</code></pre>
          
            <h2 id="r_SUBSTRING-arguments">Arguments</h2>


            <div class="variablelist">
                
                
                
                
                
                
            <dl>
                  <dt><span class="term">
                     <em>character_string</em>
                  </span></dt>
                  <dd>
                     <p>The string to be searched. Non-character data types are treated like a
                        string. </p>
                  </dd>
                
                  <dt><span class="term">
                     <em>start_position</em>
                  </span></dt>
                  <dd>
                     <p>The position within the string to begin the extraction, starting at 1.
                        The <em>start_position</em> is based on the number of
                        characters, not bytes, so that multi-byte characters are counted as single
                        characters. This number can be negative.</p>
                  </dd>
                
                  <dt><span class="term">
                     <em>number_characters</em>
                  </span></dt>
                  <dd>
                     <p>The number of characters to extract (the length of the substring). The
                           <em>number_characters</em> is based on the number of
                        characters, not bytes, so that multi-byte characters are counted as single
                        characters. This number cannot be negative.</p>
                  </dd>
                
                  <dt><span class="term">
                     <em>binary_expression</em>
                  </span></dt>
                  <dd>
                     <p>The binary_expression of data type VARBYTE to be searched. </p>
                  </dd>
                
                  <dt><span class="term">
                     <em>start_byte</em>
                  </span></dt>
                  <dd>
                     <p>The position within the binary expression to begin the extraction, starting at 1.
                        This number can be negative.</p>
                  </dd>
                
                  <dt><span class="term">
                     <em>number_bytes</em>
                  </span></dt>
                  <dd>
                     <p>The number of bytes to extract, that is, the length of the substring. 
                        This number can't be negative.</p>
                  </dd>
               </dl></div>
          
            <h2 id="r_SUBSTRING-return-type">Return type</h2>


            <p>VARCHAR or VARBYTE depending on the input.</p>
          
            <h2 id="r_SUBSTRING_usage_notes">Usage Notes</h2>
<p>Following are some examples of how you can use <em>start_position</em> and <em>number_characters</em> to extract substrings from various positions in a string.</p>

            <p>The following example returns a four-character string beginning with the sixth
               character. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select substring('caterpillar',6,4);
substring
-----------
pill
(1 row)</code></pre>
            <p>If the <em>start_position</em> +
                  <em>number_characters</em> exceeds the length of the
                  <em>string</em>, SUBSTRING returns a substring starting from the
                  <em>start_position</em> until the end of the string. For example: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select substring('caterpillar',6,8);
substring
-----------
pillar
(1 row)</code></pre>
            <p>If the <code class="code">start_position</code> is negative or 0, the SUBSTRING function
               returns a substring beginning at the first character of string with a length of
                  <code class="code">start_position</code> + <code class="code">number_characters</code> -1. For
               example:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select substring('caterpillar',-2,6);
substring
-----------
cat
(1 row)</code></pre>
            <p>If <code class="code">start_position</code> + <code class="code">number_characters</code> -1 is less than or
               equal to zero, SUBSTRING returns an empty string. For example:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select substring('caterpillar',-5,4);
substring
-----------

(1 row)</code></pre>
          
            <h2 id="r_SUBSTRING-examples">Examples</h2>


            <p>The following example returns the month from the LISTTIME string in the LISTING
               table: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select listid, listtime,
substring(listtime, 6, 2) as month
from listing
order by 1, 2, 3
limit 10;

 listid |      listtime       | month
--------+---------------------+-------
      1 | 2008-01-24 06:43:29 | 01
      2 | 2008-03-05 12:25:29 | 03
      3 | 2008-11-01 07:35:33 | 11
      4 | 2008-05-24 01:18:37 | 05
      5 | 2008-05-17 02:29:11 | 05
      6 | 2008-08-15 02:08:13 | 08
      7 | 2008-11-15 09:38:15 | 11
      8 | 2008-11-09 05:07:30 | 11
      9 | 2008-09-09 08:03:36 | 09
     10 | 2008-06-17 09:44:54 | 06
(10 rows)</code></pre>
            <p>The following example is the same as above, but uses the FROM...FOR option: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select listid, listtime,
substring(listtime from 6 for 2) as month
from listing
order by 1, 2, 3
limit 10;

 listid |      listtime       | month
--------+---------------------+-------
      1 | 2008-01-24 06:43:29 | 01
      2 | 2008-03-05 12:25:29 | 03
      3 | 2008-11-01 07:35:33 | 11
      4 | 2008-05-24 01:18:37 | 05
      5 | 2008-05-17 02:29:11 | 05
      6 | 2008-08-15 02:08:13 | 08
      7 | 2008-11-15 09:38:15 | 11
      8 | 2008-11-09 05:07:30 | 11
      9 | 2008-09-09 08:03:36 | 09
     10 | 2008-06-17 09:44:54 | 06
(10 rows)</code></pre>
            <p>You can't use SUBSTRING to predictably extract the prefix of a string that might
               contain multi-byte characters because you need to specify the length of a multi-byte
               string based on the number of bytes, not the number of characters. To extract the
               beginning segment of a string based on the length in bytes, you can CAST the string
               as VARCHAR(<em>byte_length</em>) to truncate the string,
               where <em>byte_length</em> is the required length. The
               following example extracts the first 5 bytes from the string <code class="code">'Fourscore and
                  seven'</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select cast('Fourscore and seven' as varchar(5));

varchar
-------
Fours</code></pre>
            
            <p>The following example shows a negative start position of a binary value <code class="code">abc</code>.
               Because the start position is -3, the substring is extracted from the beginning of the binary value.
               The result is automatically shown as the hexadecimal representation of the binary substring.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select substring('abc'::varbyte, -3);

 substring
-----------
 616263</code></pre>
            
            <p>The following example shows a 1 for the start position of a binary value <code class="code">abc</code>.
               Because because there is no length specified, the string is extracted from the start position to the end of the string.
               The result is automatically shown as the hexadecimal representation of the binary substring.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select substring('abc'::varbyte, 1);

 substring
-----------
 616263</code></pre>
            
            <p>The following example shows a 3 for the start position of a binary value <code class="code">abc</code>.
               Because because there is no length specified, the string is extracted from the start position to the end of the string.
               The result is automatically shown as the hexadecimal representation of the binary substring.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select substring('abc'::varbyte, 3);

 substring
-----------
 63</code></pre>
            
            
            <p>The following example shows a 2 for the start position of a binary value <code class="code">abc</code>.
               The string is extracted from the start position to position 10, but the end of the string is at position 3.
               The result is automatically shown as the hexadecimal representation of the binary substring.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select substring('abc'::varbyte, 2, 10);

 substring
-----------
 6263</code></pre>
            
            <p>The following example shows a 2 for the start position of a binary value <code class="code">abc</code>.
               The string is extracted from the start position for 1 byte.
               The result is automatically shown as the hexadecimal representation of the binary substring.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select substring('abc'::varbyte, 2, 1);

 substring
-----------
 62</code></pre>
            
            
            <p>The following example returns the first name <code class="code">Ana</code> which appears after the last space in the input string <code class="code">Silva, Ana</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">select reverse(substring(reverse('Silva, Ana'), 1, position(' ' IN reverse('Silva, Ana'))))</code>
<code class="computeroutput" copy="false">
 reverse
-----------
 Ana</code></code></pre>
            
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_STRTOL.html">STRTOL</div><div id="next" class="next-link" accesskey="n" href="./r_TEXTLEN.html">TEXTLEN</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_SUBSTRING.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_SUBSTRING.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>