<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE EXTERNAL SCHEMA - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_EXTERNAL_SCHEMA" /><meta name="default_state" content="r_CREATE_EXTERNAL_SCHEMA" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="description" content="Creates a new external schema." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="CREATE EXTERNAL SCHEMA" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE EXTERNAL SCHEMA - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_CREATE_EXTERNAL_SCHEMA" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "SQL reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "SQL commands",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE EXTERNAL SCHEMA",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_CREATE_EXTERNAL_SCHEMA" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#r_CREATE_EXTERNAL_SCHEMA-synopsis">Syntax</a><a href="#r_CREATE_EXTERNAL_SCHEMA-parameters">Parameters</a><a href="#r_CREATE_EXTERNAL_SCHEMA_usage">Usage notes</a><a href="#r_CREATE_EXTERNAL_SCHEMA_examples">Examples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_CREATE_EXTERNAL_SCHEMA">CREATE EXTERNAL SCHEMA</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Creates a new external schema in the current database. You can use this external schema
         to connect to Amazon RDS for PostgreSQL or Amazon Aurora PostgreSQL-Compatible Edition databases. You can also create
         an external schema that references a database in an external data catalog such as AWS Glue,
         Athena, or a database in an Apache Hive metastore, such as Amazon EMR.</p><p>The owner of this schema is the issuer of the CREATE EXTERNAL SCHEMA command. To
         transfer ownership of an external schema, use <a href="./r_ALTER_SCHEMA.html">ALTER SCHEMA</a> to change the owner. To grant access to the schema to
         other users or user groups, use the <a href="./r_GRANT.html">GRANT</a> command. </p><p>You can't use the GRANT or REVOKE commands for permissions on an external table.
         Instead, grant or revoke the permissions on the external schema. </p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you currently have Redshift Spectrum external tables in the Amazon Athena data catalog, you can
            migrate your Athena data catalog to an AWS Glue Data Catalog. To use the AWS Glue Data Catalog with
            Redshift Spectrum, you might need to change your AWS Identity and Access Management (IAM) policies. For more information, see
               <a href="https://docs.aws.amazon.com/athena/latest/ug/glue-athena.html#glue-upgrade">Upgrading to the AWS Glue Data
               Catalog</a> in the <em>Athena User Guide</em>.</p></div></div><p>To view details for external schemas, query the <a href="./r_SVV_EXTERNAL_SCHEMAS.html">SVV_EXTERNAL_SCHEMAS</a> system view. </p>
         <h2 id="r_CREATE_EXTERNAL_SCHEMA-synopsis">Syntax</h2>
         <p>The following syntax describes the CREATE EXTERNAL SCHEMA command used to reference
            data using an external data catalog. For more information, see <a href="./c-using-spectrum.html">Querying external data using Amazon Redshift Spectrum</a>.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>local_schema_name</em>
FROM <span>{</span> [ DATA CATALOG ] | HIVE METASTORE | POSTGRES | MYSQL | KINESIS | MSK | REDSHIFT }
[ DATABASE '<em>database_name</em>' ]
[ SCHEMA '<em>schema_name</em>' ]
[ REGION '<em>aws-region</em>' ]
[ URI '<em>hive_metastore_uri</em>' [ PORT <em>port_number</em> ] ]
IAM_ROLE <span>{</span> default | 'SESSION' | 'arn:aws:iam::<code class="replaceable">&lt;AWS account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
[ SECRET_ARN '<em>ssm-secret-arn</em>' ]
[ AUTHENTICATION <span>{</span> none | iam } ]
[ CLUSTER_ARN 'arn:aws:kafka:<code class="replaceable">&lt;region&gt;</code>:<code class="replaceable">&lt;AWS account-id&gt;</code>:cluster/msk/<code class="replaceable">&lt;cluster uuid&gt;</code>' ]
[ CATALOG_ROLE <span>{</span> 'SESSION' | <em>'catalog-role-arn-string'</em> } ]
[ CREATE EXTERNAL DATABASE IF NOT EXISTS ]
[ CATALOG_ID '<em>Amazon Web Services account ID containing Glue or Lake Formation database</em>' ]</pre>

         <p>The following syntax describes the CREATE EXTERNAL SCHEMA command used to reference
            data using a federated query to RDS POSTGRES or Aurora PostgreSQL. You can also create an external schema
            that references streaming sources, such as Kinesis Data Streams. For more information, see <a href="./federated-overview.html">Querying data with federated queries in Amazon Redshift</a>.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>local_schema_name</em>
FROM POSTGRES
DATABASE '<em>federated_database_name</em>' [SCHEMA '<em>schema_name</em>']
URI '<em>hostname</em>' [ PORT <em>port_number</em> ]
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;AWS account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
SECRET_ARN '<em>ssm-secret-arn</em>'
</pre>

         
         
         
         <p>The following syntax describes the CREATE EXTERNAL SCHEMA command used to reference
            data using a federated query to RDS MySQL or Aurora MySQL.
            For more information, see <a href="./federated-overview.html">Querying data with federated queries in Amazon Redshift</a>.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>local_schema_name</em>
FROM MYSQL
DATABASE '<em>federated_database_name</em>'
URI '<em>hostname</em>' [ PORT <em>port_number</em> ]
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;AWS account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
SECRET_ARN '<em>ssm-secret-arn</em>'
</pre>

         
         <p>The following syntax describes the CREATE EXTERNAL SCHEMA command used to reference
            data in a Kinesis stream.
            For more information, see <a href="./materialized-view-streaming-ingestion.html">Streaming ingestion</a>.</p>

<pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>schema_name</em>
FROM KINESIS
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;AWS account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
</pre>

         
         <p>The following syntax describes the CREATE EXTERNAL SCHEMA command used to reference the Amazon Managed Streaming for Apache Kafka cluster
            and its topics to ingest from. CLUSTER_ARN
            specifies the Amazon MSK cluster that you’re reading data from.
            For more information, see <a href="./materialized-view-streaming-ingestion.html">Streaming ingestion</a>.</p>

         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>schema_name</em>
FROM MSK
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;AWS account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
AUTHENTICATION <span>{</span> none | iam }
CLUSTER_ARN 'msk-cluster-arn';
</pre>

         

         <p>The following syntax describes the CREATE EXTERNAL SCHEMA command used to reference
            data using a cross-database query.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA <em>local_schema_name</em>
FROM  REDSHIFT
DATABASE '<em>redshift_database_name</em>' SCHEMA '<em>redshift_schema_name</em>'</pre>

       
         <h2 id="r_CREATE_EXTERNAL_SCHEMA-parameters">Parameters</h2>
         <div class="variablelist">
             
             
             

            

             

             

             
             

             
             
             
            
             
             
             
             

             
             

          
         <dl>
               <dt><span class="term">IF NOT EXISTS</span></dt>
               <dd>
                  <p>A clause that indicates that if the specified schema already exists, the
                     command should make no changes and return a message that the schema exists,
                     rather than terminating with an error. This clause is useful when scripting, so
                     the script doesn't fail if CREATE EXTERNAL SCHEMA tries to create a schema that
                     already exists. </p>
               </dd>
             
               <dt><span class="term">local_schema_name</span></dt>
               <dd>
                  <p>The name of the new external schema. For more information about valid names,
                     see <a href="./r_names.html">Names and identifiers</a>.</p>
               </dd>
             
               <dt><span class="term">FROM [ DATA CATALOG ] | HIVE METASTORE | POSTGRES | MYSQL | KINESIS | MSK | REDSHIFT </span></dt>
               <dd>
                  <p>A keyword that indicates where the external database is located. </p>
                  <p>DATA CATALOG indicates that the external database is defined in the Athena
                     data catalog or the AWS Glue Data Catalog. </p>
                  <p>If the external database is defined in an external Data Catalog in a different
                     AWS Region, the REGION parameter is required. DATA CATALOG is the
                     default.</p>
                  <p>HIVE METASTORE indicates that the external database is defined in an Apache
                     Hive metastore. If HIVE METASTORE, is specified, URI is required. </p>
                  <p>POSTGRES indicates that the external database is defined in RDS PostgreSQL
                     or Aurora PostgreSQL.</p>
                  <p>MYSQL indicates that the external database is defined in RDS MySQL
                     or Aurora MySQL.</p>
                  <p>KINESIS indicates that the data source is a stream from Kinesis Data Streams.</p>
                  <p>MSK indicates that the data source is a topic from Amazon MSK.</p>
               </dd>
             

               <dt><span class="term">FROM REDSHIFT</span></dt>
               <dd>
                  <p>A keyword that indicates that the database is located in Amazon Redshift.</p>
               </dd>
             
               <dt><span class="term">DATABASE '<em>redshift_database_name</em>' SCHEMA
                     '<em>redshift_schema_name</em>'</span></dt>
               <dd>
                  <p>The name of the Amazon Redshift database. </p>
                  <p>The <em>redshift_schema_name</em> indicates the schema in Amazon Redshift. The default <em>redshift_schema_name</em> is
                     <code class="code">public</code>.</p>
               </dd>
             
               <dt><span class="term">DATABASE '<em>federated_database_name</em>'</span></dt>
               <dd>
                  <p>A keyword that indicates the name of the external database in a supported PostgreSQL or MySQL database engine. </p>
               </dd>
             
               <dt><span class="term">[SCHEMA '<em>schema_name</em>']</span></dt>
               <dd>
                  <p>The <em>schema_name</em> indicates the schema in a supported PostgreSQL database engine.
                     The default <em>schema_name</em> is
                     <code class="code">public</code>.</p>
                  <p>You can't specify a SCHEMA when you set up a federated query to a supported MySQL database engine. </p>
               </dd>
             
               <dt><span class="term">REGION '<em>aws-region</em>'</span></dt>
               <dd>
                  <p>If the external database is defined in an Athena data catalog or the
                     AWS Glue Data Catalog, the AWS Region in which the database is located. This parameter is
                     required if the database is defined in an external Data Catalog. </p>
               </dd>
             
               <dt><span class="term">URI '<em>hive_metastore_uri</em>' [ PORT port_number ]</span></dt>
               <dd>
                  <p>The hostname URI and port_number of a supported PostgreSQL or MySQL database engine. The
                        <em>hostname</em> is the head node of the replica set. The
                     endpoint must be reachable (routable) from the Amazon Redshift cluster. 
                     
                     The default PostgreSQL port_number is 5432.
                     The default MySQL port_number is 3306.</p>
                  <p>If the database is in a Hive metastore, specify the URI and optionally the
                     port number for the metastore. The default port number is 9083. </p>
                  <p>A URI doesn't contain a protocol specification ("http://"). An example valid
                     URI: <code class="code">uri '172.10.10.10'</code>. </p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The supported PostgreSQL or MySQL database engine must be in the same VPC as your Amazon Redshift
                        cluster. Create a security group linking Amazon Redshift and RDS PostgreSQL or
                        Aurora PostgreSQL. </p></div></div>
               </dd>
             
               <dt><span class="term">IAM_ROLE <span>{</span> default | 'SESSION' | 'arn:aws:iam::<code class="replaceable">&lt;AWS account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>'
                  }</span></dt>
               <dd>
                  <p>Use the default keyword to have Amazon Redshift use the IAM role that is
                     set as default and associated with the cluster when the CREATE EXTERNAL SCHEMA
                     command runs.</p>
                  <p>Use <code class="code">'SESSION'</code> if you connect to your Amazon Redshift cluster using a federated identity and access the
                     tables from the external schema created using this command. For more information,
                     see <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Using a federated identity to manage Amazon Redshift access to local resources and Amazon Redshift Spectrum external tables</a>,
                     which explains how to configure federated identity. Note that this configuration, using <code class="code">'SESSION'</code> in place of
                     the ARN, can be used only if the schema is created using <code class="code">DATA CATALOG</code>.
                  </p>
                  <p>Use the Amazon Resource Name (ARN) for an IAM role that your cluster uses
                     for authentication and authorization. As a minimum, the IAM role must have
                     permission to perform a LIST operation on the Amazon S3 bucket to be accessed and a
                     GET operation on the Amazon S3 objects the bucket contains.</p>
                  <p>The following shows the syntax for the IAM_ROLE parameter string for a
                     single ARN.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">IAM_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>'</code></pre>
                  <p>You can chain roles so that your cluster can assume another IAM role,
                     possibly belonging to another account. You can chain up to 10 roles. For an example
                     of chaining roles, see <a href="./c-spectrum-iam-policies.html#c-spectrum-chaining-roles">Chaining IAM roles in Amazon Redshift Spectrum</a>. </p>
                 <p> To this IAM role, attach an IAM permissions policy similar to the
                     following.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "AccessSecret",
            "Effect": "Allow",
            "Action": [
                "secretsmanager:GetResourcePolicy",
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
                "secretsmanager:ListSecretVersionIds"
            ],
            "Resource": "arn:aws:secretsmanager:<code class="replaceable">us-west-2</code>:<code class="replaceable">123456789012</code>:secret:my-rds-secret-VNenFy"
        },
        <span>{</span>
            "Sid": "VisualEditor1",
            "Effect": "Allow",
            "Action": [
                "secretsmanager:GetRandomPassword",
                "secretsmanager:ListSecrets"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
                  <p>For the steps to create an IAM role to use with federated query, see <a href="./federated-create-secret-iam-role.html">Creating a secret and an IAM role to use
            federated queries</a>. </p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Don't include spaces in the list of chained roles.</p></div></div>
                  <p>The following shows the syntax for chaining three roles.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">IAM_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-1-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-2-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-3-name&gt;</code>'</code></pre>
               </dd>
             
               <dt><span class="term">SECRET_ARN '<em>ssm-secret-arn</em>'</span></dt>
               <dd>
                  <p>The Amazon Resource Name (ARN) of a supported PostgreSQL or MySQL database engine secret
                     created using AWS Secrets Manager. For information about how to create and retrieve an
                     ARN for a secret, see <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/manage_create-basic-secret.html">Creating a Basic
                        Secret</a> and <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/manage_retrieve-secret.html">Retrieving the Secret Value Secret</a> in the
                        <em>AWS Secrets Manager User Guide</em>. </p>
               </dd>
             
               <dt><span class="term">CATALOG_ROLE <span>{</span> 'SESSION' | <em>catalog-role-arn-string</em>}</span></dt>
               <dd>
                  <p>Use <code class="code">'SESSION'</code> to connect to your Amazon Redshift cluster using a federated identity for authentication and authorization
                     to the data catalog. For more information about completing the steps for federated
                     identity, see <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Using a federated identity to manage Amazon Redshift access to local resources and Amazon Redshift Spectrum external tables</a>. Note
                     that the <code class="code">'SESSION'</code> role can be used only if the schema is created in DATA CATALOG.</p>
                  <p>Use the Amazon Resource Name ARN for an IAM role that your cluster uses for authentication and
                     authorization for the data catalog. </p>
                  <p>If CATALOG_ROLE isn't specified, Amazon Redshift uses
                     the specified IAM_ROLE. The catalog role must have permission to access the
                     Data Catalog in AWS Glue or Athena. For more information, see <a href="./c-spectrum-iam-policies.html">IAM policies for Amazon Redshift Spectrum</a>.
                     </p>
                  <p>The following shows the syntax for the CATALOG_ROLE parameter string for a
                     single ARN.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CATALOG_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role&gt;</code>'</code></pre>
                  <p>You can chain roles so that your cluster can assume another IAM role,
                     possibly belonging to another account. You can chain up to 10 roles. For more
                     information, see <a href="./c-spectrum-iam-policies.html#c-spectrum-chaining-roles">Chaining IAM roles in Amazon Redshift Spectrum</a>. </p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The list of chained roles must not include spaces.</p></div></div>
                  <p>The following shows the syntax for chaining three roles.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CATALOG_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role-1-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role-2-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role-3-name&gt;</code>'</code></pre>

                  <p></p>
               </dd>
             
               <dt><span class="term">CREATE EXTERNAL DATABASE IF NOT EXISTS</span></dt>
               <dd>
                  <p>A clause that creates an external database with the name specified by the
                     DATABASE argument, if the specified external database doesn't exist. If
                     the specified external database exists, the command makes no changes. In this
                     case, the command returns a message that the external database exists, rather
                     than terminating with an error.</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You can't use CREATE EXTERNAL DATABASE IF NOT EXISTS with HIVE
                        METASTORE.</p><p>To use CREATE EXTERNAL DATABASE IF NOT EXISTS with a Data Catalog enabled for
                        AWS Lake Formation, you need <code class="code">CREATE_DATABASE</code> permission on the Data Catalog.
                     </p></div></div>
               </dd>
             
               <dt><span class="term">CATALOG_ID '<em>Amazon Web Services account ID containing Glue or Lake Formation database</em>'</span></dt>
               <dd>
                  <p>The account id where the data catalog database is stored.</p>
                     <p><code class="code">CATALOG_ID</code> can be specified only if you plan to connect to your Amazon Redshift cluster or
                        to Amazon Redshift Serverless using a federated identity for authentication and authorization to the
                        data catalog by setting either of the following:
                     </p>
                     <div class="itemizedlist">
                         
                         
                     <ul class="itemizedlist"><li class="listitem"><p><code class="code">CATALOG_ROLE</code> to <code class="code">'SESSION'</code></p></li><li class="listitem"><p><code class="code">IAM_ROLE</code> to <code class="code">'SESSION'</code> and <code class="code">'CATALOG_ROLE'</code> set to its default
                        </p></li></ul></div>
                     <p>For more information about completing the steps for federated
                        identity, see <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Using a federated identity to manage Amazon Redshift access to local resources and Amazon Redshift Spectrum external tables</a>.
                     </p>

               </dd>
             
               <dt><span class="term">AUTHENTICATION</span></dt>
               <dd>
                  <p>The authentication type defined for streaming ingestion. Streaming ingestion with authentication types works with Amazon Managed Streaming for Apache Kafka. The <code class="code">AUTHENTICATION</code> types are the following:</p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem"><p><b>none</b> – Specifies that there is no authentication step.</p></li><li class="listitem"><p><b>iam</b> – Specifies IAM authentication. When you choose this, make sure
                        that the IAM role has permissions for IAM authentication. For more information about defining the external
                        schema, see <a href="./materialized-view-streaming-ingestion-getting-started-MSK.html">Getting started with streaming ingestion from Amazon Managed Streaming for Apache Kafka</a>.</p></li></ul></div>
                  <p></p>

               </dd>
             
               <dt><span class="term">CLUSTER_ARN</span></dt>
               <dd>
                  <p>For streaming ingestion, the cluster identifier for the Amazon Managed Streaming for Apache Kafka cluster you're streaming
                     from. For more information, see <a href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion.html">Streaming ingestion</a>.</p>
         

               </dd>
            </dl></div>
       
         <h2 id="r_CREATE_EXTERNAL_SCHEMA_usage">Usage notes</h2>
         <p>For limits when using the Athena data catalog, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html#amazon-athena-limits">Athena Limits</a> in the
            AWS General Reference.</p>
         <p>For limits when using the AWS Glue Data Catalog, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html#limits_glue">AWS Glue Limits</a> in the
            AWS General Reference.</p>
         <p>These limits don’t apply to a Hive metastore.</p>
         
         <p>There is a maximum of 9,900 schemas per database. For more information, see 
            <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/amazon-redshift-limits.html">Quotas and limits</a> in the <em>Amazon Redshift Management Guide</em>.</p>


   <p>To unregister the schema, use the <a href="./r_DROP_SCHEMA.html">DROP SCHEMA</a> command. </p>

            <p>To view details for external schemas, query the following system views: </p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p><a href="./r_SVV_EXTERNAL_SCHEMAS.html">SVV_EXTERNAL_SCHEMAS</a> </p></li><li class="listitem"><p><a href="./r_SVV_EXTERNAL_TABLES.html">SVV_EXTERNAL_TABLES</a> </p></li><li class="listitem"><p><a href="./r_SVV_EXTERNAL_COLUMNS.html">SVV_EXTERNAL_COLUMNS</a> </p></li></ul></div>

       
         <h2 id="r_CREATE_EXTERNAL_SCHEMA_examples">Examples</h2>
         <p>The following example creates an external schema using a database in a data
            catalog named <code class="code">sampledb</code> in the US West (Oregon) Region. Use this example with an Athena or AWS Glue data catalog.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema
from data catalog
database 'sampledb'
region 'us-west-2'
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole';</code></pre>
         <p>The following example creates an external schema and creates a new external database
            named <code class="code">spectrum_db</code>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema
from data catalog
database 'spectrum_db'
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole'
create external database if not exists;</code></pre>
         <p>The following example creates an external schema using a Hive metastore database
            named <code class="code">hive_db</code>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema hive_schema
from hive metastore
database 'hive_db'
uri '172.10.10.10' port 99
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole';</code></pre>
         <p>The following example chains roles to use the role <code class="code">myS3Role</code> for
            accessing Amazon S3 and uses <code class="code">myAthenaRole</code> for data catalog access. For more
            information, see <a href="./c-spectrum-iam-policies.html#c-spectrum-chaining-roles">Chaining IAM roles in Amazon Redshift Spectrum</a>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema
from data catalog
database 'spectrum_db'
iam_role 'arn:aws:iam::123456789012:role/myRedshiftRole,arn:aws:iam::123456789012:role/myS3Role'
catalog_role 'arn:aws:iam::123456789012:role/myAthenaRole'
create external database if not exists;</code></pre>
         <p>The following example creates an external schema that references an Aurora PostgreSQL
            database. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] myRedshiftSchema
FROM POSTGRES
DATABASE 'my_aurora_db' SCHEMA 'my_aurora_schema'
URI 'endpoint to aurora hostname' PORT 5432  
IAM_ROLE 'arn:aws:iam::123456789012:role/MyAuroraRole'
SECRET_ARN 'arn:aws:secretsmanager:us-east-2:123456789012:secret:development/MyTestDatabase-AbCdEf'
</code></pre>



         
         <p>The following example creates an external schema to refer to the sales_db imported on the consumer cluster.</p>
         
         
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA sales_schema FROM REDSHIFT DATABASE 'sales_db' SCHEMA 'public';</code></pre>



         <p>The following example creates an external schema that references an Aurora MySQL
            database. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] myRedshiftSchema
FROM MYSQL
DATABASE 'my_aurora_db'
URI 'endpoint to aurora hostname'
IAM_ROLE 'arn:aws:iam::123456789012:role/MyAuroraRole'
SECRET_ARN 'arn:aws:secretsmanager:us-east-2:123456789012:secret:development/MyTestDatabase-AbCdEf'
</code></pre>

      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_EXTERNAL_FUNCTION.html">CREATE EXTERNAL FUNCTION</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_EXTERNAL_TABLE.html">CREATE EXTERNAL TABLE</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>