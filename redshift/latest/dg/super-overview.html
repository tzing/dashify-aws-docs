<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ingesting and querying semistructured data in Amazon Redshift - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="super-overview" /><meta name="default_state" content="super-overview" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/super-overview.html" /><meta name="description" content="Ingest and query semistructured data in Amazon Redshift." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/super-overview.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/super-overview.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/super-overview.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/super-overview.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/super-overview.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/super-overview.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/super-overview.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/super-overview.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/super-overview.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/super-overview.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/super-overview.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/super-overview.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/super-overview.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/super-overview.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/super-overview.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/super-overview.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/super-overview.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/super-overview.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/super-overview.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/super-overview.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/super-overview.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/super-overview.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Ingesting and querying semistructured data in Amazon Redshift" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Ingesting and querying semistructured data in Amazon Redshift - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#super-overview" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/super-overview.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/super-overview.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/super-overview.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Ingesting and querying semistructured data in Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/super-overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#super-overview" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#super-overview-use-cases">Use cases for the SUPER data type</a><a href="#super-overview-concepts">Concepts for SUPER data type use </a><a href="#super-overview-considerations">Considerations for SUPER data </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="super-overview">Ingesting and querying semistructured data in Amazon Redshift</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>By using <em>semistructured data support</em> in Amazon Redshift, you can
      ingest and store semistructured data in your Amazon Redshift data warehouses. Using the SUPER data type
      and PartiQL language, Amazon Redshift expands data warehouse capability to integrate with both SQL
      and NoSQL data sources. This way, Amazon Redshift enables efficient analytics on relational and
      semistructured stored data such as JSON.</p><p>Amazon Redshift offers two forms of semistructured data support: the SUPER data type and
      Amazon Redshift Spectrum. </p><p>Use the SUPER data type if you need to insert or update small batches of JSON data with low
      latency. Also, use SUPER when your query requires strong consistency, predictable query
      performance, complex query support, and ease of use with evolving schemas and schemaless data. </p><p>In contrast, use Amazon Redshift Spectrum with an open file format if your data query requires integration
      with other AWS services and with data mainly stored in Amazon S3 for archival purposes.</p>
      <h2 id="super-overview-use-cases">Use cases for the SUPER data type</h2>
      <p>Semistructured data support using the SUPER data type in Amazon Redshift provides superior
         performance, flexibility, and ease of use. The following use cases help demonstrate how you
         can use semistructured data support with SUPER.</p>

      <p><b>Rapid and flexible insertion of JSON data</b> –
         Amazon Redshift supports rapid transactions that can parse JSON and store it as a SUPER value. The
         insert transactions can operate up to five times faster than performing the same insertions
         into tables that have shredded the attributes of SUPER into conventional columns. For
         example, suppose that the incoming JSON is of the form <span>{</span>“a”:.., “b”:.., “c”“..., ...}. You
         can accelerate the insert performance many times by storing the incoming JSON into a table
         TJ with a single SUPER column S, instead of storing it into a conventional table TR with
         columns ”a’, ‘b’, “c’, and so on. When there are hundreds of attributes in the JSON, the
         performance advantage of SUPER data type becomes substantial.</p>
         <p>Also, SUPER data type doesn't need a regular schema. You don't need to
         introspect and clean up the incoming JSON before storing it. For example, suppose an
         incoming JSON has a string “c” attribute and others that have an integer “c” attribute,
         without the SUPER data type. In this case, you have to either separate c_string and c_int
         columns or clean up the data. In contrast, with the SUPER data type, all JSON data is
         stored during ingestion without the loss of information. Later, you can use the PartiQL
         extension of SQL to analyze the information.</p>
         
   <p><b>Flexible queries for discovery</b> – After you have
      stored your semistructured data (such as JSON) into a SUPER data value, you can query it
      without imposing a schema. You can use PartiQL dynamic typing and lax semantics to run your
      queries and discover the deeply nested data you need, without the need to impose a schema
      before query. </p>
      
      <p><b>Flexible queries for extract, load, transform (ETL) operations
         into conventional materialized views</b> – After you have stored your
      schemaless and semistructured data into SUPER, you can use PartiQL materialized views to
      introspect the data and shred them into materialized views.</p>
      <p>The materialized views with the shredded data are a good example of performance and
         usability advantages to your classic analytics cases. When you perform analytics on the
         shredded data, the columnar organization of Amazon Redshift materialized views provides better
         performance. Furthermore, users and business intelligence (BI) tools that require a
         conventional schema for ingested data can use views (either materialized or virtual) as the
         conventional schema presentation of the data.</p>
      
     <p>After your PartiQL materialized views have extracted the data found in JSON or SUPER into
         conventional columnar materialized views, you can query the materialized views. 
         For more information on how the SUPER data type works with materialized views, see 
        <a href="./r_SUPER_MV.html">Using SUPER data type with materialized views</a>.</p>
      <p>You can apply dynamic data masking policies to <code class="code">scalar</code> values on the paths of SUPER type columns. 
         For more information about dynamic data masking, see <a href="./t_ddm.html">Dynamic data masking</a>. 
         For information about the using dynamic data masking with the SUPER data type, see
         <a href="./t_ddm-super.html">Using dynamic data masking with SUPER data type paths</a>. (preview)</p> 
      <p>For information about the SUPER data type, see <a href="./r_SUPER_type.html">SUPER type</a>.</p>
      <p>For examples of using the SUPER data type, see the subsections for this topic, beginning with 
         <a href="./r_SUPER_sample_dataset.html">SUPER sample dataset</a>.
      </p>
      
    
      <h2 id="super-overview-concepts">Concepts for SUPER data type use </h2>
   <p>Following, you can find some Amazon Redshift SUPER data type concepts.</p>

      <p><b>Understand what the SUPER data type is in Amazon Redshift</b>
         – The <em>SUPER</em> data type is an Amazon Redshift data type that enables the
         storage of schemaless arrays and structures that contain Amazon Redshift scalars and possibly
         nested arrays and structures. The SUPER data type can natively store different formats of
         semistructured data, such as JSON or data originating from document-oriented sources. You
         can add a new SUPER column to store semistructured data and write queries that access the
         SUPER column, along with the usual scalar columns. For more information about the SUPER
         data type, see <a href="./r_SUPER_type.html">SUPER type</a>.</p>
      
      
      <p><b>Ingest schemaless JSON into SUPER</b> – With the
         flexible semistructured SUPER data type, Amazon Redshift can receive and ingest schemaless JSON
         into a SUPER value. For example, Amazon Redshift can ingest the JSON value [10.5, "first"] into a
         SUPER value [10.5, ‘first’], that is an array containing the Amazon Redshift decimal 10.5 and varchar
         ‘first’. Amazon Redshift can ingest the JSON into a SUPER value using the COPY command or the JSON
         parse function, such as <em>json_parse('[10.5, "first"]')</em>. Both COPY and
         <code class="code">json_parse</code> ingest JSON using strict parsing semantics by default. You can also construct
         SUPER values including arrays and structures, using the database data themselves.</p>
            <p>The SUPER column requires no schema modifications while ingesting the irregular
            structures of schemaless JSON. For example, while analyzing a click-stream, you
            initially store in the SUPER column “click” structures with attributes “IP” and “time”.
            You can add an attribute “customer id” without changing your schema in order to ingest
            such changes.</p>
            <p>The native format used for the SUPER data type is a binary format that requires
         lesser space than the JSON value in its textual form. This enables faster ingestion and
         runtime processing of SUPER values at query. </p>
         
     <p><b>Query SUPER data with PartiQL</b> – PartiQL is a
         backward-compatible extension of SQL-92 that many AWS services currently use. With the
         use of PartiQL, familiar SQL constructs seamlessly combine access to both the classic,
         tabular SQL data and the semistructured data of SUPER. You can perform object and array
         navigation and unnest arrays. PartiQL extends the standard SQL language to declaratively
         express and process nested and multivalued data.</p>
         <p>PartiQL is an extension of SQL where the nested and schemaless data of SUPER columns
         are first-class citizens. PartiQL doesn't require all query expressions to be
         type-checked during query compilation time. This approach enables query expressions that
         contain the SUPER data type to be dynamically typed during query execution when the actual
         types of the data inside the SUPER columns are accessed. Also, PartiQL operates in a lax
         mode where type inconsistencies don't cause failures but return null. The combination of schemaless
         and lax query processing makes PartiQL ideal for extract, load, transfer (ELT) applications
         where your SQL query evaluates the JSON data that are ingested in the SUPER columns.</p>
         <p><b>Integrate with Redshift Spectrum</b> – Amazon Redshift supports
         multiple aspects of PartiQL when running Redshift Spectrum queries over JSON, Parquet, and other
         formats that have nested data. Redshift Spectrum only supports nested data that has schemas. For
         example, with Redshift Spectrum you can declare that your JSON data have an attribute
            <em>nested_schemaful_example</em> in a schema
            <em>ARRAY&lt;STRUCT&lt;a:INTEGER, b:DECIMAL(5,2)&gt;&gt;</em>. The schema of
         this attribute determines that the data always contains an array, which contains a
         structure with integer <em>a</em> and decimal <em>b</em>. If the
         data changes to include more attributes, the type also changes. In contrast, the SUPER data
         type requires no schema. You can store arrays with structure elements that have different
         attributes or types. Also, some values can be stored outside arrays. </p>
      <p>For information about functions that support the SUPER data type, see the following:</p>
      <div class="itemizedlist">

          
          
          
          
          
          
  <ul class="itemizedlist"><li class="listitem"><p><a href="./r_ABS.html">ABS function</a></p></li><li class="listitem"><p><a href="./r_CEILING_FLOOR.html">CEILING (or CEIL) function</a></p></li><li class="listitem"><p><a href="./r_FLOOR.html">FLOOR function</a></p></li><li class="listitem"><p><a href="./r_ROUND.html">ROUND function</a></p></li><li class="listitem"><p><a href="./r_SIGN.html">SIGN function</a></p></li><li class="listitem"><p><a href="./r_TRUNC.html">TRUNC function</a></p></li></ul></div>
    
         <h2 id="super-overview-considerations">Considerations for SUPER data </h2>
 
      <p>When working with SUPER data, consider the following:</p>
      <div class="itemizedlist">
     
          
          
          
      <ul class="itemizedlist"><li class="listitem"><p>Use JDBC driver version 1.2.50, ODBC driver version 1.4.17 or later, and Amazon Redshift Python driver version 2.0.872 or later.</p>
            <p>For information about JDBC drivers, see <a href=" https://docs.aws.amazon.com/redshift/latest/mgmt/configure-jdbc-connection.html">Configuring a JDBC connection</a>.</p>
            <p>For information about ODBC drivers, see <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/configure-odbc-connection.html">Configuring an ODBC connection</a>.</p></li><li class="listitem"><p>Find the schema examples used in the following topics at <a href="./r_SUPER_sample_dataset.html">SUPER sample dataset</a>.</p></li><li class="listitem"><p>All the SQL code examples used in the following topics are included with the same S3 prefix
               for download. These include the data definition language (DDL) and COPY statements,
               and also certain TPC-H modified queries that work with SUPER. 
         </p>
            <p>To view or download the SQL files, do one of the following:</p>
            <div class="itemizedlist">
                
          
      <ul class="itemizedlist"><li class="listitem"><p>Download the <a href="https://s3.amazonaws.com/redshift-downloads/semistructured/tutorialscripts/semistructured-tutorial.sql" rel="noopener noreferrer" target="_blank"><span>SUPER tutorial SQL file</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and <a href="https://s3.amazonaws.com/redshift-downloads/semistructured/tutorialscripts/super_tpch_queries.sql" rel="noopener noreferrer" target="_blank"><span>TPC-H file</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li class="listitem"><p>Using the Amazon S3 CLI, run the following command. You can use your own target path.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws s3 cp s3://redshift-downloads/semistructured/tutorialscripts/semistructured-tutorial.sql /target/path
aws s3 cp s3://redshift-downloads/semistructured/tutorialscripts/super_tpch_queries.sql /target/path</code></pre>
         </li></ul></div>
         </li></ul></div>
         <p>For more information about SUPER configurations, see <a href="./super-configurations.html">SUPER configurations</a>.</p>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./query-datashare-console-pre.html">Querying datashares (preview)</div><div id="next" class="next-link" accesskey="n" href="./r_SUPER_sample_dataset.html">SUPER sample dataset</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/super-overview.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/super-overview.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>