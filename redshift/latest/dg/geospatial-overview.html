<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Querying spatial data in Amazon Redshift - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="geospatial-overview" /><meta name="default_state" content="geospatial-overview" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/geospatial-overview.html" /><meta name="description" content="In this section, you can find an introduction to spatial support in Amazon Redshift." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/geospatial-overview.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/geospatial-overview.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/geospatial-overview.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/geospatial-overview.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/geospatial-overview.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/geospatial-overview.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/geospatial-overview.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/geospatial-overview.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/geospatial-overview.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/geospatial-overview.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/geospatial-overview.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/geospatial-overview.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/geospatial-overview.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/geospatial-overview.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/geospatial-overview.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/geospatial-overview.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/geospatial-overview.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/geospatial-overview.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/geospatial-overview.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/geospatial-overview.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/geospatial-overview.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="Querying spatial data in Amazon Redshift" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Querying spatial data in Amazon Redshift - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#geospatial-overview" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/geospatial-overview.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/geospatial-overview.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/geospatial-overview.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Querying spatial data in Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/geospatial-overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#geospatial-overview" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="geospatial-overview">Querying spatial data in Amazon Redshift</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p><em>Spatial data</em> describes the position and shape of a
      geometry in a defined space (a spatial reference system). Amazon Redshift supports spatial data with the
         <code class="code">GEOMETRY</code> and <code class="code">GEOGRAPHY</code> data types, which contain spatial data and
      optionally the data's spatial reference system identifier (SRID). </p><p>Spatial data contains geometric data that you can use to represent geographic features.
      Examples of this type of data include weather reports, map directions, tweets with geographic
      positions, store locations, and airline routes. Spatial data plays an important role in
      business analytics, reporting, and forecasting. </p><p>You can query spatial data with Amazon Redshift SQL functions. Spatial data contains geometric values
      for an object. </p><p>The <code class="code">GEOMETRY</code> data type operations work on the Cartesian plane.
      Although the spatial reference system identifier (SRID) is stored inside the object, 
      this SRID is merely an identifier of the coordinate system and plays no role in the algorithms used to process the <code class="code">GEOMETRY</code> objects. 
      Conversely, the operations on the <code class="code">GEOGRAPHY</code> data type treat the coordinates inside objects as spherical coordinates on a spheroid. 
      This spheroid is defined by the SRID, which references a geographic spatial reference system. 
      By default, <code class="code">GEOGRAPHY</code> data types are created with spatial reference (SRID) 4326, referencing the  
      World Geodetic System (WGS) 84. For more information about SRIDs, see 
      <a href="https://en.wikipedia.org/wiki/Spatial_reference_system" rel="noopener noreferrer" target="_blank"><span>Spatial reference system</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 
      in Wikipedia.</p><p>You can use the ST_Transform function to transform the coordinates from various spatial
      reference systems. After the transformation of the coordinates is done, you can also use a
      simple cast between the two, as long as the input <code class="code">GEOMETRY</code> is encoded with the
      geographic SRID. This cast simply copies coordinates without any further transformation. For
      example:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT ST_AsEWKT(ST_GeomFromEWKT('SRID=4326;POINT(10 20)')::geography);</code></pre><pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">st_asewkt
------------------------
 SRID=4326;POINT(10 20)</code></pre><p>To better understand the difference between <code class="code">GEOMETRY</code> and
         <code class="code">GEOGRAPHY</code> data types, consider calculating the distance between the Berlin
      airport (BER) and the San Francisco airport (SFO) using the World Geodetic System (WGS) 84.
      Using the <code class="code">GEOGRAPHY</code> data type, the result is in meters. When using
         <code class="code">GEOMETRY</code> data type with SRID 4326, the result is in degrees, which can’t
      convert to meters because the distance of one degree depends on where on the globe geometries
      are located.</p><p>Calculations on the <code class="code">GEOGRAPHY</code> data type are mostly used for realistic round
      earth calculations such as the precise area of a country without distortion. But they are far
      more expensive to compute. Therefore, ST_Transform can transform your coordinates to an
      appropriate local projected coordinate system and do the calculation on the
         <code class="code">GEOMETRY</code> data type faster.</p><p>Using spatial data, you can run queries to do the following:</p><div class="itemizedlist">
      
	   
       
   <ul class="itemizedlist"><li class="listitem"><p>Find the distance between two points.</p></li><li class="listitem"><p>Check whether one area (polygon) contains another.</p></li><li class="listitem"><p>Check whether one linestring intersects another linestring or polygon.</p></li></ul></div><p>You can use the <code class="code">GEOMETRY</code> data type to hold the values of spatial data. A
         <code class="code">GEOMETRY</code> value in Amazon Redshift can define two-dimensional (2D), three-dimensional
      (3DZ), two-dimensional with a measure (3DM), and four-dimensional (4D) geometry primitive data
      types:</p><div class="itemizedlist">
       
            
       
       
   <ul class="itemizedlist"><li class="listitem"><p>A two-dimensional (2D) geometry is specified by two Cartesian coordinates (x, y) in a plane.</p></li><li class="listitem"><p>A three-dimensional (3DZ) geometry is specified by three Cartesian coordinates (x, y, z) in space.</p></li><li class="listitem"><p>A two-dimensional with measure (3DM) geometry is specified by three coordinates (x, y, m), 
         where the first two are Cartesian coordinates in a plane and the third is a measurement.</p></li><li class="listitem"><p>A four-dimensional (4D) geometry is specified by four coordinates (x, y, z, m), 
         where the first three are Cartesian coordinates in a space and the fourth is a measurement.</p></li></ul></div><p>For more information about geometry primitive data types, see <a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry" rel="noopener noreferrer" target="_blank"><span>Well-known
      text representation of geometry</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in Wikipedia. 
      
   </p><p>You can use the <code class="code">GEOGRAPHY</code> data type to hold the values of spatial data. A
      <code class="code">GEOGRAPHY</code> value in Amazon Redshift can define two-dimensional (2D), three-dimensional
      (3DZ), two-dimensional with a measure (3DM), and four-dimensional (4D) geometry primitive data
      types:</p><div class="itemizedlist">
       
            
       
       
   <ul class="itemizedlist"><li class="listitem"><p>A two-dimensional (2D) geometry is specified by longitude and latitude coordinates on a spheroid.</p></li><li class="listitem"><p>A three-dimensional (3DZ) geometry is specified by longitude, latitude, and altitude coordinates on a spheroid.</p></li><li class="listitem"><p>A two-dimensional with measure (3DM) geometry is specified by three coordinates 
         (longitude, latitude, measure), where the first two are angular coordinates on a sphere 
         and the third is a measurement.</p></li><li class="listitem"><p>A four-dimensional (4D) geometry is specified by four coordinates (longitude, latitude, altitude, measure), 
         where the first three are longitude, latitude and altitude, and the fourth is a measurement.</p></li></ul></div><p>For more information about geographic coordinate systems, see <a href="https://en.wikipedia.org/wiki/Geographic_coordinate_system" rel="noopener noreferrer" target="_blank"><span>Geographic coordinate system</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 
      and 
      <a href="https://en.wikipedia.org/wiki/Spherical_coordinate_system" rel="noopener noreferrer" target="_blank"><span>Spherical coordinate system</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 
      in Wikipedia. 
   </p><p>The <code class="code">GEOMETRY</code> and <code class="code">GEOGRAPHY</code> data types have the following subtypes: </p><div class="itemizedlist">
     
	  
	  
	  
	  
	  
	   
   <ul class="itemizedlist"><li class="listitem"><p><code class="code">POINT</code></p></li><li class="listitem"><p><code class="code">LINESTRING</code></p></li><li class="listitem"><p><code class="code">POLYGON</code></p></li><li class="listitem"><p><code class="code">MULTIPOINT</code></p></li><li class="listitem"><p><code class="code">MULTILINESTRING</code></p></li><li class="listitem"><p><code class="code">MULTIPOLYGON</code></p></li><li class="listitem"><p><code class="code">GEOMETRYCOLLECTION</code></p></li></ul></div><p>There are Amazon Redshift SQL functions that support the following representations of geometric data:</p><div class="itemizedlist">
       
       
       
       
       

   <ul class="itemizedlist"><li class="listitem"><p>GeoJSON</p></li><li class="listitem"><p>Well-known text (WKT) </p></li><li class="listitem"><p>Extended well-known text (EWKT)</p></li><li class="listitem"><p>Well-known binary (WKB) representation </p></li><li class="listitem"><p>Extended well-known binary (EWKB)</p></li></ul></div><p>You can cast between <code class="code">GEOMETRY</code> and <code class="code">GEOGRAPHY</code> data types.</p><p>The following SQL casts a linestring from a <code class="code">GEOMETRY</code> to a <code class="code">GEOGRAPHY</code>. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT ST_AsEWKT(ST_GeomFromText('LINESTRING(110 40, 2 3, -10 80, -7 9)')::geography);</code></pre><pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 st_asewkt
----------------------------------------------
 SRID=4326;LINESTRING(110 40,2 3,-10 80,-7 9)
</code></pre><p>The following SQL casts a linestring from a <code class="code">GEOGRAPHY</code> to a <code class="code">GEOMETRY</code>. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT ST_AsEWKT(ST_GeogFromText('LINESTRING(110 40, 2 3, -10 80, -7 9)')::geometry);</code></pre><pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">
 st_asewkt
----------------------------------------------
 SRID=4326;LINESTRING(110 40,2 3,-10 80,-7 9)
</code></pre><p>Amazon Redshift provides many SQL functions to query spatial data. Except for the
         <code class="code">ST_IsValid</code> function, spatial functions that accept a <code class="code">GEOMETRY</code>
      object as an argument expect this <code class="code">GEOMETRY</code> object to be a valid geometry. If the
      <code class="code">GEOMETRY</code> or <code class="code">GEOGRAPHY</code> object isn't valid, then the behavior of the spatial function is
      undefined. For more information about validity, see <a href="./spatial-terminology.html#spatial-terminology-validity">Geometric validity</a>. </p><p>For details about SQL functions to query spatial data, see 
      <a href="./geospatial-functions.html">Spatial functions</a>. </p><p>For details about loading spatial data, see 
      <a href="./copy-usage_notes-spatial-data.html">Loading a column of the GEOMETRY or GEOGRAPHY data
               type</a>. </p><div class="highlights"><h6>Topics</h6><ul><li><a href="./spatial-tutorial.html">Tutorial: Using spatial SQL functions with Amazon Redshift</a></li><li><a href="./spatial-copy-shapefile.html">Loading a shapefile into Amazon Redshift</a></li><li><a href="./spatial-terminology.html">Terminology for Amazon Redshift spatial data</a></li><li><a href="./spatial-limitations.html">Considerations when using spatial data with Amazon Redshift</a></li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./data-catalog-views-overview.html">Creating views in the Data Catalog (preview)</div><div id="next" class="next-link" accesskey="n" href="./spatial-tutorial.html">Tutorial: Using spatial SQL functions</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/geospatial-overview.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/geospatial-overview.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>