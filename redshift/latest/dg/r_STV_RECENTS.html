<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>STV_RECENTS - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_STV_RECENTS" /><meta name="default_state" content="r_STV_RECENTS" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_RECENTS.html" /><meta name="description" content="View information about the currently active and recently run queries against an Amazon Redshift database." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Database Developer Guide" /><meta name="abstract" content="Create and manage a data warehouse with Amazon Redshift, an enterprise-level, petabyte scale, fully managed data warehousing service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_RECENTS.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STV_RECENTS.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_STV_RECENTS.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STV_RECENTS.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_STV_RECENTS.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_RECENTS.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_RECENTS.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STV_RECENTS.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_STV_RECENTS.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STV_RECENTS.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_STV_RECENTS.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STV_RECENTS.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_STV_RECENTS.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STV_RECENTS.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_STV_RECENTS.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STV_RECENTS.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_STV_RECENTS.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_RECENTS.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_STV_RECENTS.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_STV_RECENTS.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_STV_RECENTS.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_STV_RECENTS.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Database Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Database Developer Guide" /><meta id="panorama-serviceConsolePage" value="STV_RECENTS" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>STV_RECENTS - Amazon Redshift</title><meta name="pdf" content="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_STV_RECENTS" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STV_RECENTS.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STV_RECENTS.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STV_RECENTS.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,developer,sample data,database,database developer,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Database Developer Guide",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "System tables and views reference",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/cm_chap_system-tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "System monitoring (provisioned only)",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_intro_system_views.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "STV tables for snapshot data",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_intro_STV_tables.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "STV_RECENTS",
        "item" : "https://docs.aws.amazon.com/redshift/latest/dg/c_intro_STV_tables.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/redshift/latest/dg/redshift-dg.pdf#r_STV_RECENTS" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Database Developer Guide</a></div><div id="page-toc-src"><a href="#r_STV_RECENTS_troubleshooting">Troubleshooting with STV_RECENTS</a><a href="#r_STV_RECENTS-table-columns">Table columns</a><a href="#r_STV_RECENTS-sample-queries">Sample queries</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="r_STV_RECENTS">STV_RECENTS</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Use the STV_RECENTS table to find out information about the currently active and
            recently run queries against a database. </p><p>STV_RECENTS is visible to all users. Superusers can see all rows; regular users can see only their own data. For more information, see <a href="./cm_chap_system-tables.html#c_visibility-of-data">Visibility of data in system tables and
                views</a>. </p><p>Some or all of the data in this table can also be found in the SYS monitoring view <a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a>. The data in the SYS monitoring view is formatted to be easier to use and understand. 
We recommend that you use the SYS monitoring view for your queries.</p>
            <h2 id="r_STV_RECENTS_troubleshooting">Troubleshooting with STV_RECENTS</h2>
            <p>STV_RECENTS is particularly helpful for determining if a query or collection of queries is currently 
                running or done. It also shows the duration a query has been running. This is helpful for getting a sense 
                for which queries are long running.</p>
            <p>You can join STV_RECENTS 
                to other system views, such as <a href="./r_STV_INFLIGHT.html">STV_INFLIGHT</a>, to gather additional metadata about running queries. (There's an example 
                that shows how to do this in the sample queries section.) You can also use returned records from this view along with 
                the monitoring features in the Amazon Redshift console for troubleshooting in real time.</p>
            <p>System views that compliment STV_RECENTS include <a href="./r_STL_QUERYTEXT.html">STL_QUERYTEXT</a>, which retrieves the query text for SQL commands, and <a href="./r_SVV_QUERY_INFLIGHT.html">SVV_QUERY_INFLIGHT</a>, which joins STV_INFLIGHT to STL_QUERYTEXT.</p>
         
            <h2 id="r_STV_RECENTS-table-columns">Table columns</h2>


            <div class="table-container"><div class="table-contents"><table id="w323aac69c17c11c55c15b3"><thead>
                        <tr>
                            <th>Column name </th>
                            <th>Data type </th>
                            <th>Description </th>
                        </tr>
                    </thead>
                        <tr>
                            <td tabindex="-1">userid </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">ID of user who generated entry. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">status </td>
                            <td tabindex="-1">character(20) </td>
                            <td tabindex="-1">Query status. Valid values are
                                    <code class="userinput">Running</code>, <code class="userinput">Done</code>.
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">starttime </td>
                            <td tabindex="-1">timestamp </td>
                            <td tabindex="-1">Time that the query started. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">duration </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">Number of microseconds since the session started.
                            </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">user_name </td>
                            <td tabindex="-1">character(50) </td>
                            <td tabindex="-1">User name who ran the process. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">db_name </td>
                            <td tabindex="-1">character(50) </td>
                            <td tabindex="-1">Name of the database. </td>
                        </tr>
                        <tr>
                            <td tabindex="-1">query </td>
                            <td tabindex="-1">character(600) </td>
                            <td tabindex="-1">Query text, up to 600 characters. Any additional
                                characters are truncated.</td>
                        </tr>
                        <tr>
                            <td tabindex="-1">pid </td>
                            <td tabindex="-1">integer </td>
                            <td tabindex="-1">Process ID for the session associated with the
                                query, which is always -1 for queries that have completed. </td>
                        </tr>
                    </table></div></div>
         
            <h2 id="r_STV_RECENTS-sample-queries">Sample queries</h2>


            <p>To determine which queries are currently running against the database, run the
                following query:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select user_name, db_name, pid, query
from stv_recents
where status = 'Running';</code></pre>
            <p>The sample output below shows a single query running on the TICKIT database: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
user_name | db_name |   pid   | query   
----------+---------+---------+-------------
dwuser    | tickit  |  19996  |select venuename, venueseats from 
venue where venueseats &gt; 50000 order by venueseats desc; 
</code></pre>
            <p>The following example returns a list of queries (if any) that are running or
                waiting in a queue to run: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from stv_recents where status&lt;&gt;'Done';

status |    starttime        | duration |user_name|db_name| query     | pid
-------+---------------------+----------+---------+-------+-----------+------
Running| 2010-04-21 16:11... | 281566454| dwuser  |tickit | select ...| 23347 </code></pre>
            <p>This query does not return results unless you are running a number of concurrent
                queries and some of those queries are in a queue.</p>
            <p>The following example extends the previous example. In this case, queries that are
                truly "in flight" (running, not waiting) are excluded from the result: </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from stv_recents where status&lt;&gt;'Done'
and pid not in (select pid from stv_inflight);
...</code></pre>
        <p>For more tips on troubleshooting query performance, see <a href="./queries-troubleshooting.html">Troubleshooting queries</a>.</p><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_STV_QUERY_METRICS.html">STV_QUERY_METRICS</div><div id="next" class="next-link" accesskey="n" href="./r_STV_SESSIONS.html">STV_SESSIONS</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STV_RECENTS.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/en_us/redshift/latest/dg/r_STV_RECENTS.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>