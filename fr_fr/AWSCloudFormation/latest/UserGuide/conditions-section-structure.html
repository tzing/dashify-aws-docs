<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Conditions - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="conditions-section-structure" /><meta name="default_state" content="conditions-section-structure" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" /><meta name="description" content="Déclarez des conditions afin de créer des ressources de manière conditionnelle en utilisant des fonctions intrinsèques dans la section Conditions d'un modèle." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guide de l'utilisateur" /><meta name="abstract" content="Créez et gérez des déploiements AWS d'infrastructure de manière prévisible et répétée à l'aide de ce AWS CloudFormation guide de l'utilisateur." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guide de l'utilisateur" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guide de l'utilisateur" /><meta id="panorama-serviceConsolePage" value="Conditions" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Conditions - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionnement des ressources,configuration des ressources,gestion de l'infrastructure,CloudFormer,CloudFormation pile,CloudFormation stackset,CloudFormation modèle,jeu de modifications" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide de l'utilisateur",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Utilisation des modèles AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Anatomie du modèle",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-anatomy.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Conditions",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-anatomy.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guide de l'utilisateur</a></div><div id="page-toc-src"><a href="#conditions-section-structure-overview">Utilisation des conditions</a><a href="#conditions-section-structure-syntax">Syntaxe</a><a href="#conditions-section-structure-examples">Exemples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="conditions-section-structure">Conditions</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>La section <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-condition.html"><code class="code">Conditions</code></a> facultative contient des instructions qui définissent les circonstances dans lesquelles les entités sont créées et configurées. Par exemple, vous pouvez créer une condition, puis l'associer à une ressource ou à une sortie afin qu'AWS CloudFormation crée uniquement la ressource ou la sortie si la condition est true. De la même façon, vous pouvez associer la condition à une propriété afin qu'AWS CloudFormation affecte une valeur spécifique à cette propriété seulement si la condition est true. Si la condition est false, AWS CloudFormation affecte à la propriété une autre valeur que vous spécifiez.</p><p>Vous pouvez utiliser les conditions lorsque vous souhaitez réutiliser un modèle qui permet de créer des ressources dans différents contextes, comme dans un environnement de test et un environnement de production. Dans votre modèle, vous pouvez ajouter un paramètre d'entrée <code class="code">EnvironmentType</code>, qui accepte <code class="userinput">prod</code> ou <code class="userinput">test</code> comme entrées. Pour l'environnement de production, vous pouvez inclure des instances Amazon EC2 avec certaines capacités. Cependant, pour l'environnement de test, vous souhaitez en utiliser moins pour faire des économies. Les conditions vous permettent de définir quelles ressources sont créées et comment elles sont configurées pour chaque type d'environnement.</p><p>Les conditions sont évaluées en fonction des valeurs des paramètres d'entrée <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/pseudo-parameter-reference.html"><code class="code">pseudo parameters</code></a> ou des pseudo-paramètres prédéfinis que vous spécifiez lorsque vous créez ou mettez à jour une pile. Dans chaque condition, vous pouvez faire référence à une autre condition, une valeur de paramètre ou un mappage. Une fois que vous avez défini toutes les conditions, vous pouvez les associer aux ressources et à leurs propriétés dans les sections <code class="code">Resources</code> et <code class="code">Outputs</code> d'un modèle.</p><p>Lors de la mise à jour ou la création de la pile, AWS CloudFormation évalue toutes les conditions de votre modèle avant de créer les ressources. Les ressources qui sont associées à une condition true sont créées. Les ressources qui sont associées à une condition false sont ignorées. AWS CloudFormation réévalue également ces conditions à chaque mise à jour de la pile avant la mise à jour des ressources. Les ressources qui sont toujours associées à une condition true sont mises à jour. Les ressources qui sont désormais associés à une condition false sont supprimées.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Pendant une mise à jour de la pile, vous ne pouvez pas mettre à jour les conditions. Vous pouvez uniquement les mettre à jour lorsque vous intégrez des changements qui ajoutent, modifient ou suppriment des ressources.</p></div></div>
        <h2 id="conditions-section-structure-overview">Utilisation des conditions</h2>

        <p>En fonction de l'entité que vous voulez créer ou configurer de façon conditionnelle, vous devez inclure des déclarations dans les sections suivantes du modèle :</p>
        <div class="variablelist">
             
             
             
        <dl>
                <dt><span class="term"><code class="code">Parameters</code> Section</span></dt>
                <dd>
                    <p>Définissez les entrées que vous voulez que vos conditions évaluent. Les conditions équivalent à true ou à false en fonction des valeurs de ces paramètres d'entrée. Si vous voulez que vos conditions évaluent des pseudo-paramètres, vous n'avez pas besoin de définir ces pseudo-paramètres dans cette section ; les pseudo-paramètres sont prédéfinis par AWS CloudFormation.</p>
                </dd>
             
                <dt><span class="term"><code class="code">Conditions</code> Section</span></dt>
                <dd>
                    <p>Définissez les conditions en utilisant des fonctions intrinsèques. Ces conditions déterminent quand AWS CloudFormation crée les ressources associées.</p>
                </dd>
             
                <dt><span class="term">Sections <code class="code">Resources</code> et <code class="code">Outputs</code></span></dt>
                <dd>
                    <p>Associez des conditions aux ressources ou aux sorties que vous souhaitez créer de manière conditionnelle. AWS CloudFormation crée les entités qui sont associées à une condition true et ignore celles qui sont associées à une condition false. Utilisez la clé <code class="code">Condition</code> et l'ID logique d'une condition pour l'associer à une ressource ou à une sortie. Pour spécifier une propriété de manière conditionnelle, utilisez la fonction <code class="code"><a href="./intrinsic-function-reference-conditions.html#intrinsic-function-reference-conditions-if">Fn::If</a></code>. Pour plus d’informations, consultez <a href="./intrinsic-function-reference-conditions.html">Fonctions de condition</a>.</p>
                </dd>
            </dl></div>
     
        <h2 id="conditions-section-structure-syntax">Syntaxe</h2>

        <p>La section <code class="code">Conditions</code> se compose du nom de clé <code class="code">Conditions</code>. Chaque déclaration de condition inclut un ID de logique et des fonctions intrinsèques qui sont évaluées lorsque vous créez ou mettez à jour une pile. Le pseudo-modèle suivant illustre la section <code class="code">Conditions</code> :</p>
        <div id="JSON" name="JSON" class="section langfilter">
            <h3 id="conditions-section-structure-syntax.json">JSON</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Conditions" : <span>{</span>

  "<code class="replaceable">Logical ID</code>" : <span>{</span><code class="replaceable">Intrinsic function</code>}
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
            <h3 id="conditions-section-structure-syntax.yaml">YAML</h3>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Conditions:
  <code class="replaceable">Logical ID</code>:
    <code class="replaceable">Intrinsic function</code>
</code></pre>
             
                <h4 id="conditions-section-structure-functions">Fonctions intrinsèques de condition</h4>
                <p>Vous pouvez utiliser les fonctions intrinsèques suivantes pour définir des conditions :</p>
                <div class="itemizedlist">
                     
                     
      
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code"><a href="./intrinsic-function-reference-conditions.html#intrinsic-function-reference-conditions-and">Fn::And</a></code></p>
                    </li><li class="listitem">
                        <p><code class="code"><a href="./intrinsic-function-reference-conditions.html#intrinsic-function-reference-conditions-equals">Fn::Equals</a></code></p>
                    </li><li class="listitem">
      <p><code class="code"><a href="./intrinsic-function-reference-foreach.html">Fn::ForEach</a></code></p>
     </li><li class="listitem">
                        <p><code class="code"><a href="./intrinsic-function-reference-conditions.html#intrinsic-function-reference-conditions-if">Fn::If</a></code></p>
                    </li><li class="listitem">
                        <p><code class="code"><a href="./intrinsic-function-reference-conditions.html#intrinsic-function-reference-conditions-not">Fn::Not</a></code></p>
                    </li><li class="listitem">
                        <p><code class="code"><a href="./intrinsic-function-reference-conditions.html#intrinsic-function-reference-conditions-or">Fn::Or</a></code></p>
                    </li></ul></div>
                <p>Pour voir la syntaxe et obtenir des informations sur chaque fonction, consultez <a href="./intrinsic-function-reference-conditions.html">Fonctions de condition</a>.</p>
                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p><code class="code">Fn::If</code> n'est pris en charge que dans l'attribut de métadonnées, l'attribut de politique de mise à jour et les valeurs de propriété dans les sections <code class="code">Resources</code> et <code class="code">Outputs</code> d'un modèle.</p></div></div>
             
        </div>
     
        <h2 id="conditions-section-structure-examples">Exemples</h2>
         
            <h3 id="w9aac23c15c23c17b3">Condition simple</h3>

            <p>L'exemple de modèle suivante inclut un paramètre d'entrée <code class="code">EnvType</code>, où vous pouvez spécifier <code class="code">prod</code> afin de créer une pile pour la production ou <code class="code">test</code> afin de créer une pile pour les tests. Pour un environnement de production, AWS CloudFormation crée une instance Amazon EC2 et y attache un volume. Pour un environnement de test, AWS CloudFormation crée uniquement l'instance Amazon EC2.</p>
            <p>La condition <code class="code">CreateProdResources</code> a la valeur <code class="code">true</code> si le paramètre <code class="code">EnvType</code> est égal à <code class="code">prod</code>. Dans l'exemple de modèle, les ressources <code class="code">NewVolume</code> et <code class="code">MountPoint</code> sont associées à la condition <code class="code">CreateProdResources</code>. Par conséquent, les ressources sont créées uniquement si le paramètre <code class="code">EnvType</code> est égal à <code class="code">prod</code>.</p>
            <div id="JSON" name="JSON" class="section langfilter">
                <h4 id="conditions-section-structure-example.json">JSON</h4>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Parameters": <span>{</span>
        "EnvType": <span>{</span>
            "Description": "Environment type.",
            "Default": "test",
            "Type": "String",
            "AllowedValues": [
                "prod",
                "test"
            ],
            "ConstraintDescription": "must specify prod or test."
        }
    },
    "Conditions": <span>{</span>
        "CreateProdResources": <span>{</span>
            "Fn::Equals": [
                <span>{</span>
                    "Ref": "EnvType"
                },
                "prod"
            ]
        }
    },
    "Resources": <span>{</span>
        "EC2Instance": <span>{</span>
            "Type": "AWS::EC2::Instance",
            "Properties": <span>{</span>
                "ImageId": "ami-0ff8a91507f77f867"
            }
        },
        "MountPoint": <span>{</span>
            "Type": "AWS::EC2::VolumeAttachment",
            "Condition": "CreateProdResources",
            "Properties": <span>{</span>
                "InstanceId": <span>{</span>
                    "Ref": "EC2Instance"
                },
                "VolumeId": <span>{</span>
                    "Ref": "NewVolume"
                },
                "Device": "/dev/sdh"
            }
        },
        "NewVolume": <span>{</span>
            "Type": "AWS::EC2::Volume",
            "Condition": "CreateProdResources",
            "Properties": <span>{</span>
                "Size": 100,
                "AvailabilityZone": <span>{</span>
                    "Fn::GetAtt": [
                        "EC2Instance",
                        "AvailabilityZone"
                    ]
                }
            }
        }
    }
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
                <h4 id="conditions-section-structure-example.yaml">YAML</h4>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Parameters:
  EnvType:
    Description: Environment type.
    Default: test
    Type: String
    AllowedValues:
      - prod
      - test
    ConstraintDescription: must specify prod or test.
Conditions:
  CreateProdResources: !Equals 
    - !Ref EnvType
    - prod
Resources:
  EC2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      ImageId: ami-0ff8a91507f77f867
  MountPoint:
    Type: 'AWS::EC2::VolumeAttachment'
    Condition: CreateProdResources
    Properties:
      InstanceId: !Ref EC2Instance
      VolumeId: !Ref NewVolume
      Device: /dev/sdh
  NewVolume:
    Type: 'AWS::EC2::Volume'
    Condition: CreateProdResources
    Properties:
      Size: 100
      AvailabilityZone: !GetAtt 
        - EC2Instance
        - AvailabilityZone</code></pre>
            </div>
             
                <h4 id="w9aac23c15c23c17b3c11">Condition imbriquée</h4>
                <p>L'exemple de modèle suivant fait référence à une condition dans une autre condition. Vous pouvez créer une pile qui crée un compartiment S3. Pour une pile déployée dans un environnement de production, AWS CloudFormation crée une politique pour le compartiment S3.</p>
                    
                <div id="JSON" name="JSON" class="section langfilter">
                    <h5 id="conditions-section-structure-example-nested.json">JSON</h5>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Parameters": <span>{</span>
        "EnvType": <span>{</span>
            "Type": "String",
            "AllowedValues": [
                "prod",
                "test"
            ]
        },
        "BucketName": <span>{</span>
            "Default": "",
            "Type": "String"
        }
    },
    "Conditions": <span>{</span>
        "IsProduction": <span>{</span>
            "Fn::Equals": [
                <span>{</span>
                    "Ref": "EnvType"
                },
                "prod"
            ]
        },
        "CreateBucket": <span>{</span>
            "Fn::Not": [
                <span>{</span>
                    "Fn::Equals": [
                        <span>{</span>
                            "Ref": "BucketName"
                        },
                        ""
                    ]
                }
            ]
        },
        "CreateBucketPolicy": <span>{</span>
            "Fn::And": [
                <span>{</span>
                    "Condition": "IsProduction"
                },
                <span>{</span>
                    "Condition": "CreateBucket"
                }
            ]
        }
    },
    "Resources": <span>{</span>
        "Bucket": <span>{</span>
            "Type": "AWS::S3::Bucket",
            "Condition": "CreateBucket"
        },
        "Policy": <span>{</span>
            "Type": "AWS::S3::BucketPolicy",
            "Condition": "CreateBucketPolicy",
            "Properties": <span>{</span>
                "Bucket": <span>{</span>
                    "Ref": "Bucket"
                },
                "PolicyDocument": "..."
            }
        }
    }
}</code></pre>
            </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h5 id="conditions-section-structure-example-nested.yaml">YAML</h5>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  EnvType:
    Type: String
    AllowedValues:
      - prod
      - test
  BucketName:
    Default: ''
    Type: String
Conditions:
  IsProduction: !Equals 
    - !Ref EnvType
    - prod
  CreateBucket: !Not 
    - !Equals 
      - !Ref BucketName
      - ''
  CreateBucketPolicy: !And 
    - !Condition IsProduction
    - !Condition CreateBucket
Resources:
  Bucket:
    Type: 'AWS::S3::Bucket'
    Condition: CreateBucket
  Policy:
    Type: 'AWS::S3::BucketPolicy'
    Condition: CreateBucketPolicy
    Properties:
      Bucket: !Ref BucketName
      PolicyDocument: ...</code></pre>
                </div>
             
         
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./mappings-section-structure.html">Mappages</div><div id="next" class="next-link" accesskey="n" href="./transform-section-structure.html">Transformation</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>