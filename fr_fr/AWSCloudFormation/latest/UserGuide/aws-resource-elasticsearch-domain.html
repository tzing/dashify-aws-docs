<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::Elasticsearch::Domain - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-elasticsearch-domain" /><meta name="default_state" content="aws-resource-elasticsearch-domain" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" /><meta name="description" content="The AWS::Elasticsearch::Domain resource creates an Amazon OpenSearch Service domain." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_Elasticsearch.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" hreflang="x-default" /><meta name="feedback-item" content="OpenSearch" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::Elasticsearch::Domain" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::Elasticsearch::Domain - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=OpenSearch&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon OpenSearch Service legacy Elasticsearch resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_Elasticsearch.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::Elasticsearch::Domain",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_Elasticsearch.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_Elasticsearch.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-elasticsearch-domain-syntax">Syntax</a><a href="#aws-resource-elasticsearch-domain-properties">Properties</a><a href="#aws-resource-elasticsearch-domain-return-values">Return values</a><a href="#aws-resource-elasticsearch-domain--remarks">Remarks</a><a href="#aws-resource-elasticsearch-domain--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-elasticsearch-domain">AWS::Elasticsearch::Domain</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The AWS::Elasticsearch::Domain resource creates an Amazon OpenSearch Service
      domain.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>The <code class="code">AWS::Elasticsearch::Domain</code> resource is being replaced by the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html">AWS::OpenSearchService::Domain</a> resource. While the legacy Elasticsearch resource
        and options are still supported, we recommend modifying your existing Cloudformation
        templates to use the new OpenSearch Service resource, which supports both OpenSearch and
        legacy Elasticsearch. For instructions to upgrade domains defined within CloudFormation from
        Elasticsearch to OpenSearch, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html#aws-resource-opensearchservice-domain--remarks">Remarks</a>.</p></div></div><h2 id="aws-resource-elasticsearch-domain-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-elasticsearch-domain-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::Elasticsearch::Domain",
  "Properties" : <span>{</span>
      "<a href="#cfn-elasticsearch-domain-accesspolicies">AccessPolicies</a>" : <code class="replaceable">Json</code>,
      "<a href="#cfn-elasticsearch-domain-advancedoptions">AdvancedOptions</a>" : <code class="replaceable"><span>{</span><code class="replaceable">Key</code>: <code class="replaceable">Value</code>, ...}</code>,
      "<a href="#cfn-elasticsearch-domain-advancedsecurityoptions">AdvancedSecurityOptions</a>" : <code class="replaceable"><a href="./aws-properties-elasticsearch-domain-advancedsecurityoptionsinput.html">AdvancedSecurityOptionsInput</a></code>,
      "<a href="#cfn-elasticsearch-domain-cognitooptions">CognitoOptions</a>" : <code class="replaceable"><a href="./aws-properties-elasticsearch-domain-cognitooptions.html">CognitoOptions</a></code>,
      "<a href="#cfn-elasticsearch-domain-domainendpointoptions">DomainEndpointOptions</a>" : <code class="replaceable"><a href="./aws-properties-elasticsearch-domain-domainendpointoptions.html">DomainEndpointOptions</a></code>,
      "<a href="#cfn-elasticsearch-domain-domainname">DomainName</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-elasticsearch-domain-ebsoptions">EBSOptions</a>" : <code class="replaceable"><a href="./aws-properties-elasticsearch-domain-ebsoptions.html">EBSOptions</a></code>,
      "<a href="#cfn-elasticsearch-domain-elasticsearchclusterconfig">ElasticsearchClusterConfig</a>" : <code class="replaceable"><a href="./aws-properties-elasticsearch-domain-elasticsearchclusterconfig.html">ElasticsearchClusterConfig</a></code>,
      "<a href="#cfn-elasticsearch-domain-elasticsearchversion">ElasticsearchVersion</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-elasticsearch-domain-encryptionatrestoptions">EncryptionAtRestOptions</a>" : <code class="replaceable"><a href="./aws-properties-elasticsearch-domain-encryptionatrestoptions.html">EncryptionAtRestOptions</a></code>,
      "<a href="#cfn-elasticsearch-domain-logpublishingoptions">LogPublishingOptions</a>" : <code class="replaceable"><span>{</span><code class="replaceable">Key</code>: <code class="replaceable">Value</code>, ...}</code>,
      "<a href="#cfn-elasticsearch-domain-nodetonodeencryptionoptions">NodeToNodeEncryptionOptions</a>" : <code class="replaceable"><a href="./aws-properties-elasticsearch-domain-nodetonodeencryptionoptions.html">NodeToNodeEncryptionOptions</a></code>,
      "<a href="#cfn-elasticsearch-domain-snapshotoptions">SnapshotOptions</a>" : <code class="replaceable"><a href="./aws-properties-elasticsearch-domain-snapshotoptions.html">SnapshotOptions</a></code>,
      "<a href="#cfn-elasticsearch-domain-tags">Tags</a>" : <code class="replaceable">[ <a href="./aws-properties-elasticsearch-domain-tag.html">Tag</a>, ... ]</code>,
      "<a href="#cfn-elasticsearch-domain-vpcoptions">VPCOptions</a>" : <code class="replaceable"><a href="./aws-properties-elasticsearch-domain-vpcoptions.html">VPCOptions</a></code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-elasticsearch-domain-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::Elasticsearch::Domain
Properties:
  <a href="#cfn-elasticsearch-domain-accesspolicies">AccessPolicies</a>: <code class="replaceable">Json</code>
  <a href="#cfn-elasticsearch-domain-advancedoptions">AdvancedOptions</a>: <code class="replaceable">
    <code class="replaceable">Key</code>: <code class="replaceable">Value</code></code>
  <a href="#cfn-elasticsearch-domain-advancedsecurityoptions">AdvancedSecurityOptions</a>: <code class="replaceable">
    <a href="./aws-properties-elasticsearch-domain-advancedsecurityoptionsinput.html">AdvancedSecurityOptionsInput</a></code>
  <a href="#cfn-elasticsearch-domain-cognitooptions">CognitoOptions</a>: <code class="replaceable">
    <a href="./aws-properties-elasticsearch-domain-cognitooptions.html">CognitoOptions</a></code>
  <a href="#cfn-elasticsearch-domain-domainendpointoptions">DomainEndpointOptions</a>: <code class="replaceable">
    <a href="./aws-properties-elasticsearch-domain-domainendpointoptions.html">DomainEndpointOptions</a></code>
  <a href="#cfn-elasticsearch-domain-domainname">DomainName</a>: <code class="replaceable">String</code>
  <a href="#cfn-elasticsearch-domain-ebsoptions">EBSOptions</a>: <code class="replaceable">
    <a href="./aws-properties-elasticsearch-domain-ebsoptions.html">EBSOptions</a></code>
  <a href="#cfn-elasticsearch-domain-elasticsearchclusterconfig">ElasticsearchClusterConfig</a>: <code class="replaceable">
    <a href="./aws-properties-elasticsearch-domain-elasticsearchclusterconfig.html">ElasticsearchClusterConfig</a></code>
  <a href="#cfn-elasticsearch-domain-elasticsearchversion">ElasticsearchVersion</a>: <code class="replaceable">String</code>
  <a href="#cfn-elasticsearch-domain-encryptionatrestoptions">EncryptionAtRestOptions</a>: <code class="replaceable">
    <a href="./aws-properties-elasticsearch-domain-encryptionatrestoptions.html">EncryptionAtRestOptions</a></code>
  <a href="#cfn-elasticsearch-domain-logpublishingoptions">LogPublishingOptions</a>: <code class="replaceable">
    <code class="replaceable">Key</code>: <code class="replaceable">Value</code></code>
  <a href="#cfn-elasticsearch-domain-nodetonodeencryptionoptions">NodeToNodeEncryptionOptions</a>: <code class="replaceable">
    <a href="./aws-properties-elasticsearch-domain-nodetonodeencryptionoptions.html">NodeToNodeEncryptionOptions</a></code>
  <a href="#cfn-elasticsearch-domain-snapshotoptions">SnapshotOptions</a>: <code class="replaceable">
    <a href="./aws-properties-elasticsearch-domain-snapshotoptions.html">SnapshotOptions</a></code>
  <a href="#cfn-elasticsearch-domain-tags">Tags</a>: <code class="replaceable">
    - <a href="./aws-properties-elasticsearch-domain-tag.html">Tag</a></code>
  <a href="#cfn-elasticsearch-domain-vpcoptions">VPCOptions</a>: <code class="replaceable">
    <a href="./aws-properties-elasticsearch-domain-vpcoptions.html">VPCOptions</a></code>
</code></pre></div><h2 id="aws-resource-elasticsearch-domain-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-elasticsearch-domain-accesspolicies"><span class="term"><code class="code">AccessPolicies</code></span></dt><dd>
    <p>An AWS Identity and Access Management (IAM) policy document that specifies who can
      access the OpenSearch Service domain and their permissions. For more information, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/ac.html#ac-creating">Configuring access policies</a> in the <em>Amazon OpenSearch Service Developer
        Guid</em>e.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Json</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-advancedoptions"><span class="term"><code class="code">AdvancedOptions</code></span></dt><dd>
    <p>Additional options to specify for the OpenSearch Service domain. For more information, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/createupdatedomains.html#createdomain-configure-advanced-options">Advanced cluster parameters</a> in the <em>Amazon OpenSearch Service
        Developer Guide</em>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Object of String</p><p><em>Pattern</em>: <code class="code">[a-zA-Z0-9]+</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-advancedsecurityoptions"><span class="term"><code class="code">AdvancedSecurityOptions</code></span></dt><dd><p>Specifies options for fine-grained access control. </p><p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-elasticsearch-domain-advancedsecurityoptionsinput.html">AdvancedSecurityOptionsInput</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-cognitooptions"><span class="term"><code class="code">CognitoOptions</code></span></dt><dd>
    <p>Configures OpenSearch Service to use Amazon Cognito authentication for OpenSearch Dashboards.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-elasticsearch-domain-cognitooptions.html">CognitoOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-domainendpointoptions"><span class="term"><code class="code">DomainEndpointOptions</code></span></dt><dd><p>Specifies additional options for the domain endpoint, such as whether to require HTTPS for all traffic or whether to use a custom endpoint rather than the default endpoint.</p><p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-elasticsearch-domain-domainendpointoptions.html">DomainEndpointOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-domainname"><span class="term"><code class="code">DomainName</code></span></dt><dd>
    <p>A name for the OpenSearch Service domain. For valid values, see the <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/configuration-api.html#configuration-api-datatypes-domainname">DomainName</a> data type in the <em>Amazon OpenSearch Service Developer
        Guide</em>. If you don't specify a name, AWS CloudFormation generates a unique
      physical ID and uses that ID for the domain name. For more information, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-name.html">Name
        Type</a>.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you specify a name, you cannot perform updates that require replacement of this
        resource. You can perform updates that require no or some interruption. If you must replace
        the resource, specify a new name.</p></div></div>
  <p><em>Required</em>: Conditional</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-elasticsearch-domain-ebsoptions"><span class="term"><code class="code">EBSOptions</code></span></dt><dd>
    <p>The configurations of Amazon Elastic Block Store (Amazon EBS) volumes that are attached to
      data nodes in the OpenSearch Service domain. For more information, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/limits.html#ebsresource">EBS volume size limits</a> in the <em>Amazon OpenSearch Service Developer
        Guide</em>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-elasticsearch-domain-ebsoptions.html">EBSOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-elasticsearchclusterconfig"><span class="term"><code class="code">ElasticsearchClusterConfig</code></span></dt><dd>
    <p>ElasticsearchClusterConfig is a property of the AWS::Elasticsearch::Domain resource that
      configures the cluster of an Amazon OpenSearch Service domain.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-elasticsearch-domain-elasticsearchclusterconfig.html">ElasticsearchClusterConfig</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-elasticsearchversion"><span class="term"><code class="code">ElasticsearchVersion</code></span></dt><dd>
    <p>The version of Elasticsearch to use, such as 2.3. If not specified, 1.5 is used as the
      default. For information about the versions that OpenSearch Service supports, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/what-is.html#choosing-version">Supported
        versions of OpenSearch and Elasticsearch</a> in the <em>Amazon OpenSearch Service
        Developer Guide</em>.</p>
    <p>If you set the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-updatepolicy.html#cfn-attributes-updatepolicy-upgradeopensearchdomain">EnableVersionUpgrade</a> update policy to <code class="code">true</code>, you can update
        <code class="code">ElasticsearchVersion</code> without interruption. When
        <code class="code">EnableVersionUpgrade</code> is set to <code class="code">false</code>, or is not specified,
      updating <code class="code">ElasticsearchVersion</code> results in <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">replacement</a>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-encryptionatrestoptions"><span class="term"><code class="code">EncryptionAtRestOptions</code></span></dt><dd>
    <p>Whether the domain should encrypt data at rest, and if so, the AWS Key Management Service
      key to use. See <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/encryption-at-rest.html">Encryption of data at
        rest for Amazon OpenSearch Service</a>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-elasticsearch-domain-encryptionatrestoptions.html">EncryptionAtRestOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-logpublishingoptions"><span class="term"><code class="code">LogPublishingOptions</code></span></dt><dd>
    <p>An object with one or more of the following keys: <code class="code">SEARCH_SLOW_LOGS</code>,
        <code class="code">ES_APPLICATION_LOGS</code>, <code class="code">INDEX_SLOW_LOGS</code>, <code class="code">AUDIT_LOGS</code>,
      depending on the types of logs you want to publish. Each key needs a valid
        <code class="code">LogPublishingOption</code> value. </p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Object of <a href="./aws-properties-elasticsearch-domain-logpublishingoption.html">LogPublishingOption</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-nodetonodeencryptionoptions"><span class="term"><code class="code">NodeToNodeEncryptionOptions</code></span></dt><dd>
    <p>Specifies whether node-to-node encryption is enabled. See <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/ntn.html">Node-to-node encryption for Amazon
        OpenSearch Service</a>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-elasticsearch-domain-nodetonodeencryptionoptions.html">NodeToNodeEncryptionOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-snapshotoptions"><span class="term"><code class="code">SnapshotOptions</code></span></dt><dd>
    <p><b>DEPRECATED</b>. The automated snapshot configuration for the
      OpenSearch Service domain indices.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-elasticsearch-domain-snapshotoptions.html">SnapshotOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-tags"><span class="term"><code class="code">Tags</code></span></dt><dd>
    <p>An arbitrary set of tags (key–value pairs) to associate with the OpenSearch Service domain.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-elasticsearch-domain-tag.html">Tag</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-elasticsearch-domain-vpcoptions"><span class="term"><code class="code">VPCOptions</code></span></dt><dd>
    <p>The virtual private cloud (VPC) configuration for the OpenSearch Service domain. For more
      information, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/vpc.html">Launching your Amazon OpenSearch
        Service domains within a VPC</a> in the <em>Amazon OpenSearch Service Developer
        Guide</em>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-elasticsearch-domain-vpcoptions.html">VPCOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd></dl></div><h2 id="aws-resource-elasticsearch-domain-return-values">Return values</h2><h3 id="aws-resource-elasticsearch-domain-return-values-ref">Ref</h3><p>When the logical ID of this resource is provided to the Ref intrinsic function, Ref
      returns the resource name, such as <code class="code">mystack-elasticsea-abc1d2efg3h4.</code> For more
      information about using the Ref function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html">Ref</a>.</p><h3 id="aws-resource-elasticsearch-domain-return-values-fn--getatt">Fn::GetAtt</h3><p>Fn::GetAtt returns a value for a specified attribute of this type. For more information,
      see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html">Fn::GetAtt</a>. The following are the available attributes and sample return
      values.</p><h4 id="aws-resource-elasticsearch-domain-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist"><dl><dt id="Arn-fn::getatt"><span class="term"><code class="code">Arn</code></span></dt><dd>
    <p>The Amazon Resource Name (ARN) of the domain, such as
        <code class="code">arn:aws:es:us-west-2:123456789012:domain/mystack-elasti-1ab2cdefghij</code>. This
      returned value is the same as the one returned by
        <code class="code">AWS::Elasticsearch::Domain.DomainArn</code>.</p>
  </dd><dt id="DomainArn-fn::getatt"><span class="term"><code class="code">DomainArn</code></span></dt><dd>
    <p>The Amazon Resource Name (ARN) of the domain, such as
        <code class="code">arn:aws:es:us-west-2:123456789012:domain/mystack-elasti-1ab2cdefghij</code>. This
      returned value is the same as the one returned by
      <code class="code">AWS::Elasticsearch::Domain.Arn</code>.</p>
  </dd><dt id="DomainEndpoint-fn::getatt"><span class="term"><code class="code">DomainEndpoint</code></span></dt><dd>
    <p>The domain-specific endpoint that's used for requests to the OpenSearch APIs, such as
        <code class="code">search-mystack-elasti-1ab2cdefghij-ab1c2deckoyb3hofw7wpqa3cm.us-west-1.es.amazonaws.com</code>.</p>
  </dd></dl></div><h2 id="aws-resource-elasticsearch-domain--remarks">Remarks</h2><p>
        <em>Migrating stacks from Elasticsearch to OpenSearch</em>
      </p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>You can't directly update a CloudFormation templates to use the
        <code class="code">AWS::OpenSearchService::Domain</code> resource in place of
        <code class="code">AWS::Elasticsearch::Domain</code>, otherwise the corresponding domain will be
        deleted along with all of its data.</p></div></div><p>Perform the following steps to migrate an Elasticsearch domain to an OpenSearch domain
        if the domain is defined within CloudFormation.</p><p>
        <b>Step 1: Prepare your existing stack for deprecation</b>
      </p><p>Make a copy of your original CloudFormation template, which contains the Elasticsearch
        domain resource, for use in step 3. Then add the following attributes to the Elasticsearch
        domain resource at the same level as <code class="code">Type</code> and <code class="code">Properties</code>. </p><p><code class="code">DeletionPolicy: Retain</code></p><p><code class="code">UpdateReplacePolicy: Retain</code></p><p>These settings ensure that CloudFormation doesn't delete or modify the corresponding
        domain when you delete this resource from your stack. If you have other custom resources
        defined in the stack that aren't critically important during the short migration period, you
        can delete them from the template and they'll be recreated when you create the new
        stack.</p><p>
        <b>Step 2: Upgrade your domain to OpenSearch</b>
      </p><p>After you add the two policy attributes to your template, upgrade your domain to an
        OpenSearch version using the normal upgrade process. For instructions, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/version-migration.html#starting-upgrades">Starting an upgrade</a>. Make sure to take a snapshot of your domain before upgrading
        it to prevent accidental loss of data.</p><p>
        <b>Step 3: Create a new CloudFormation template</b>
      </p><p>While you wait for the upgrade to complete, prepare your new OpenSearch template. Using
        the copy of your original template that you made in step 1, make the following
        changes:</p><div class="itemizedlist">
         
         
         
         
         
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p>Change the domain resource type from <code class="code">AWS::Elasticsearch::Domain</code> to
            <code class="code">AWS::OpenSearchService::Domain</code>.</p>
        </li><li class="listitem">
          <p>Add the <code class="code">DeletionPolicy</code> and <code class="code">UpdateReplacePolicy</code> attributes
            to the resource, as you did in step 1.</p>
        </li><li class="listitem"><p>Change <code class="code">ElasticsearchVersion</code> to <code class="code">EngineVersion</code> and set its value to
          <code class="code">OpenSearch_1.0</code> (or whichever version of OpenSearch you want to upgrade
          to).</p></li><li class="listitem">
          <p>If your resource contains <code class="code">ElasticsearchClusterConfig</code>, change it to
            <code class="code">ClusterConfig</code>.</p>
        </li><li class="listitem">
          <p>Change the suffixes of all instance types from <code class="code">.elasticsearch</code> to
            <code class="code">.search</code>.</p>
        </li><li class="listitem">
          <p>If your template includes <code class="code">ColdStorageOptions</code>, remove it, as it's not
            currently supported for OpenSearch resources.</p>
        </li><li class="listitem">
          <p>If there are any <code class="code">Fn::GetAtt</code> or <code class="code">!GetAtt</code> references to your
            domain ARN, change them to <code class="code">!GetAtt MyDomain.Arn</code>.</p>
        </li><li class="listitem">
          <p>Comment out any resources not currently within the stack (most likely everything
            except <code class="code">AWS::OpenSearchService::Domain</code>).</p>
        </li></ul></div><p>See the next section for examples that demonstrate the new format.</p><p>
        <b>Step 4: Import the OpenSearch stack</b>
      </p><p>Once your domain upgrade finishes, you can import the new stack. Within CloudFormation,
        choose <b>Create stack</b> and <b>With existing
          resources (import resources)</b>, then upload the template you created in the
        previous step.</p><p>CloudFormation prompts you for the name (identifier value) of the existing domain. Copy
        the domain name directly from the OpenSearch console. Give the stack a name that's different
        from the current one, then choose <b>Import resources</b>.</p><p>After the stack is created, uncomment any related resources from the stack and update it
        to ensure they're recreated. You can remove the <code class="code">DeletionPolicy</code> and
        <code class="code">UpdateReplacePolicy</code> attributes if you want, but they can help prevent
        accidental deletions in the future.</p><p>
        <b>Step 5: Delete the Elasticsearch stack</b>
      </p><p>Now that your new stack is created, delete the old stack which contains the legacy
        Elasticsearch resource.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Before deleting the old stack, make absolutely sure that the template contains the
        <code class="code">DeletionPolicy: Retain</code> attribute.</p></div></div><p>*The above steps were partially derived from this <a href="https://onecloudplease.com/blog/migrating-to-opensearch-with-cloudformation" rel="noopener noreferrer" target="_blank"><span>blog
        post</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p><h2 id="aws-resource-elasticsearch-domain--examples">Examples</h2><p></p><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-elasticsearch-domain--examples--Create_an_OpenSearch_Service_domain_that_contains_two_data_nodes_and_three_master_nodes">Create an OpenSearch Service domain that contains two data nodes and three master nodes</a></li><li><a href="#aws-resource-elasticsearch-domain--examples--Create_a_domain_with_VPC_options">Create a domain with VPC options</a></li></ul></div><h3 id="aws-resource-elasticsearch-domain--examples--Create_an_OpenSearch_Service_domain_that_contains_two_data_nodes_and_three_master_nodes">Create an OpenSearch Service domain that contains two data nodes and three master nodes</h3><p>The following example creates an OpenSearch Service domain running Elasticsearch 7.10 that
          contains two data nodes and three dedicated master nodes. The domain has 40 GiB of storage
          and enables log publishing for application logs, search slow logs, and index slow logs.
          The access policy permits the root user for the AWS account to make all HTTP requests to
          the domain, such as indexing documents or searching indices.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-elasticsearch-domain--examples--Create_an_OpenSearch_Service_domain_that_contains_two_data_nodes_and_three_master_nodes--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"ElasticsearchDomain": <span>{</span>
   "Type":"AWS::Elasticsearch::Domain",
   "Properties": <span>{</span>
      "DomainName": "test",
      "ElasticsearchVersion": "7.10",
      "ElasticsearchClusterConfig": <span>{</span>
         "DedicatedMasterEnabled": true,
         "InstanceCount": "2",
         "ZoneAwarenessEnabled": true,
         "InstanceType": "m3.medium.elasticsearch",
         "DedicatedMasterType": "m3.medium.elasticsearch",
         "DedicatedMasterCount": "3"
      },
      "EBSOptions":<span>{</span>
         "EBSEnabled": true,
         "Iops": "0",
         "VolumeSize": "20",
         "VolumeType": "gp2"
      },
      "AccessPolicies": <span>{</span>
         "Version":"2012-10-17",
         "Statement":[
            <span>{</span>
               "Effect": "Allow",
               "Principal": <span>{</span>
                  "AWS": "arn:aws:iam::123456789012:user/es-user"
               },
               "Action":"es:*",
               "Resource": "arn:aws:es:us-east-1:123456789012:domain/test/*"
            }
         ]
      },
      "LogPublishingOptions": <span>{</span>
         "ES_APPLICATION_LOGS": <span>{</span>
           "CloudWatchLogsLogGroupArn": "arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearchservice/domains/es-application-logs",
           "Enabled": true
         },
         "SEARCH_SLOW_LOGS": <span>{</span>
           "CloudWatchLogsLogGroupArn": "arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearchservice/domains/es-slow-logs",
           "Enabled": true
         },
         "INDEX_SLOW_LOGS": <span>{</span>
           "CloudWatchLogsLogGroupArn": "arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearchservice/domains/es-index-slow-logs",
           "Enabled": true
         }
      },
      "AdvancedOptions": <span>{</span>
         "rest.action.multi.allow_explicit_index": true
      }
   }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-elasticsearch-domain--examples--Create_an_OpenSearch_Service_domain_that_contains_two_data_nodes_and_three_master_nodes--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">ElasticsearchDomain:
  Type: AWS::Elasticsearch::Domain
  Properties:
    DomainName: 'test'
    ElasticsearchVersion: '7.10'
    ElasticsearchClusterConfig:
      DedicatedMasterEnabled: true
      InstanceCount: '2'
      ZoneAwarenessEnabled: true
      InstanceType: 'm3.medium.elasticsearch'
      DedicatedMasterType: 'm3.medium.elasticsearch'
      DedicatedMasterCount: '3'
    EBSOptions:
      EBSEnabled: true
      Iops: '0'
      VolumeSize: '20'
      VolumeType: 'gp2'
    AccessPolicies:
      Version: '2012-10-17'
      Statement:
        -
          Effect: 'Allow'
          Principal:
            AWS: 'arn:aws:iam::123456789012:user/es-user'
          Action: 'es:*'
          Resource: 'arn:aws:es:us-east-1:846973539254:domain/test/*'
    LogPublishingOptions:
      ES_APPLICATION_LOGS:
          CloudWatchLogsLogGroupArn: 'arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearchservice/domains/es-application-logs'
          Enabled: true
      SEARCH_SLOW_LOGS:
          CloudWatchLogsLogGroupArn: 'arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearchservice/domains/es-slow-logs'
          Enabled: true
      INDEX_SLOW_LOGS:
          CloudWatchLogsLogGroupArn: 'arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearchservice/domains/es-index-slow-logs'
          Enabled: true
    AdvancedOptions:
      rest.action.multi.allow_explicit_index: true</code></pre></div><h3 id="aws-resource-elasticsearch-domain--examples--Create_a_domain_with_VPC_options">Create a domain with VPC options</h3><p>The following example creates a domain with VPC options.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-elasticsearch-domain--examples--Create_a_domain_with_VPC_options--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "ElasticsearchDomain resource",
  "Parameters": <span>{</span>
    "DomainName": <span>{</span>
      "Description": "User defined Elasticsearch Domain name",
      "Type": "String"
    },
    "ElasticsearchVersion": <span>{</span>
      "Description": "User defined Elasticsearch Version",
      "Type": "String"
    },
    "InstanceType": <span>{</span>
      "Type": "String"
    },
    "AvailabilityZone": <span>{</span>
      "Type": "String"
    },
    "CidrBlock": <span>{</span>
      "Type": "String"
    },
    "GroupDescription": <span>{</span>
      "Type": "String"
    },
    "SGName": <span>{</span>
      "Type": "String"
    }
  },
  "Resources": <span>{</span>
    "ElasticsearchDomain": <span>{</span>
      "Type": "AWS::Elasticsearch::Domain",
      "Properties": <span>{</span>
        "DomainName": <span>{</span>
          "Ref": "DomainName"
        },
        "ElasticsearchVersion": <span>{</span>
          "Ref": "ElasticsearchVersion"
        },
        "ElasticsearchClusterConfig": <span>{</span>
          "InstanceCount": "1",
          "InstanceType": <span>{</span>
            "Ref": "InstanceType"
          }
        },
        "EBSOptions": <span>{</span>
          "EBSEnabled": true,
          "Iops": "0",
          "VolumeSize": "10",
          "VolumeType": "standard"
        },
        "AccessPolicies": <span>{</span>
          "Version": "2012-10-17",
          "Statement": [
            <span>{</span>
              "Effect": "Deny",
              "Principal": <span>{</span>
                "AWS": "*"
              },
              "Action": "es:*",
              "Resource": "*"
            }
          ]
        },
        "AdvancedOptions": <span>{</span>
          "rest.action.multi.allow_explicit_index": true
        },
        "Tags": [
          <span>{</span>
            "Key": "foo",
            "Value": "bar"
          }
        ],
        "VPCOptions": <span>{</span>
          "SubnetIds": [
            <span>{</span>
              "Ref": "subnet"
            }
          ],
          "SecurityGroupIds": [
            <span>{</span>
              "Ref": "mySecurityGroup"
            }
          ]
        }
      }
    },
    "vpc": <span>{</span>
      "Type": "AWS::EC2::VPC",
      "Properties": <span>{</span>
        "CidrBlock": "10.0.0.0/16"
      }
    },
    "subnet": <span>{</span>
      "Type": "AWS::EC2::Subnet",
      "Properties": <span>{</span>
        "VpcId": <span>{</span>
          "Ref": "vpc"
        },
        "CidrBlock": <span>{</span>
          "Ref": "CidrBlock"
        },
        "AvailabilityZone": <span>{</span>
          "Ref": "AvailabilityZone"
        }
      }
    },
    "mySecurityGroup": <span>{</span>
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": <span>{</span>
        "GroupDescription": <span>{</span>
          "Ref": "GroupDescription"
        },
        "VpcId": <span>{</span>
          "Ref": "vpc"
        },
        "GroupName": <span>{</span>
          "Ref": "SGName"
        },
        "SecurityGroupIngress": [
          <span>{</span>
            "FromPort": 443,
            "IpProtocol": "tcp",
            "ToPort": 443,
            "CidrIp": "0.0.0.0/0"
          }
        ]
      }
    }
  },
  "Outputs": <span>{</span>
    "DomainArn": <span>{</span>
      "Value": <span>{</span>
        "Fn::GetAtt": [
          "ElasticsearchDomain",
          "DomainArn"
        ]
      }
    },
    "DomainEndpoint": <span>{</span>
      "Value": <span>{</span>
        "Fn::GetAtt": [
          "ElasticsearchDomain",
          "DomainEndpoint"
        ]
      }
    },
    "SecurityGroupId": <span>{</span>
      "Value": <span>{</span>
        "Ref": "mySecurityGroup"
      }
    },
    "SubnetId": <span>{</span>
      "Value": <span>{</span>
        "Ref": "subnet"
      }
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-elasticsearch-domain--examples--Create_a_domain_with_VPC_options--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Description: ElasticsearchDomain resource
Parameters:
  DomainName:
    Description: User-defined Elasticsearch domain name
    Type: String
  ElasticsearchVersion:
    Description: User-defined Elasticsearch version
    Type: String
  InstanceType:
    Type: String
  AvailabilityZone:
    Type: String
  CidrBlock:
    Type: String
  GroupDescription:
    Type: String
  SGName:
    Type: String
Resources:
  ElasticsearchDomain:
    Type: 'AWS::Elasticsearch::Domain'
    Properties:
      DomainName:
        Ref: DomainName
      ElasticsearchVersion:
        Ref: ElasticsearchVersion
      ElasticsearchClusterConfig:
        InstanceCount: '1'
        InstanceType:
          Ref: InstanceType
      EBSOptions:
        EBSEnabled: true
        Iops: '0'
        VolumeSize: '10'
        VolumeType: 'standard'
      AccessPolicies:
        Version: '2012-10-17'
        Statement:
          - Effect: Deny
            Principal:
              AWS: '*'
            Action: 'es:*'
            Resource: '*'
      AdvancedOptions:
        rest.action.multi.allow_explicit_index: true
      Tags:
        - Key: foo
          Value: bar
      VPCOptions:
        SubnetIds:
          - Ref: subnet
        SecurityGroupIds:
          - Ref: mySecurityGroup
  vpc:
    Type: 'AWS::EC2::VPC'
    Properties:
      CidrBlock: 10.0.0.0/16
  subnet:
    Type: 'AWS::EC2::Subnet'
    Properties:
      VpcId:
        Ref: vpc
      CidrBlock:
        Ref: CidrBlock
      AvailabilityZone:
        Ref: AvailabilityZone
  mySecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription:
        Ref: GroupDescription
      VpcId:
        Ref: vpc
      GroupName:
        Ref: SGName
      SecurityGroupIngress:
        - FromPort: 443
          IpProtocol: tcp
          ToPort: 443
          CidrIp: 0.0.0.0/0
Outputs:
  DomainArn:
    Value:
      'Fn::GetAtt':
        - ElasticsearchDomain
        - DomainArn
  DomainEndpoint:
    Value:
      'Fn::GetAtt':
        - ElasticsearchDomain
        - DomainEndpoint
  SecurityGroupId:
    Value:
      Ref: mySecurityGroup
  SubnetId:
    Value:
      Ref: subnet</code></pre></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./AWS_Elasticsearch.html">Amazon OpenSearch Service (legacy Elasticsearch resource)</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-elasticsearch-domain-advancedsecurityoptionsinput.html">AdvancedSecurityOptionsInput</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=OpenSearch&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=OpenSearch&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-elasticsearch-domain.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>