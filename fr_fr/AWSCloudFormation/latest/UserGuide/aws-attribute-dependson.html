<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Attribut DependsOn - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-attribute-dependson" /><meta name="default_state" content="aws-attribute-dependson" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="description" content="Spécifiez que la création d'une ressource spécifique dépend d'une autre ressource CloudFormation associée à l'DependsOnattribut." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guide de l'utilisateur" /><meta name="abstract" content="Créez et gérez des déploiements AWS d'infrastructure de manière prévisible et répétée à l'aide de ce AWS CloudFormation guide de l'utilisateur." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guide de l'utilisateur" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guide de l'utilisateur" /><meta id="panorama-serviceConsolePage" value="Attribut DependsOn" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Attribut DependsOn - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionnement des ressources,configuration des ressources,gestion de l'infrastructure,CloudFormer,CloudFormation pile,CloudFormation stackset,CloudFormation modèle,jeu de modifications" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide de l'utilisateur",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Référence de modèles",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Référence d'attribut de ressource",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-product-attribute-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Attribut DependsOn",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-product-attribute-reference.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guide de l'utilisateur</a></div><div id="page-toc-src"><a href="#aws-attribute-dependson-syntax">Syntaxe</a><a href="#aws-attribute-dependson-example">Exemple</a><a href="#gatewayattachment">Lorsqu'un attribut DependsOn est obligatoire</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="aws-attribute-dependson">Attribut <code class="code">DependsOn</code></h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Avec l'attribut <code class="code">DependsOn</code>, vous pouvez spécifier que la création d'une ressource spécifique dépend d'une autre. Lorsque vous ajoutez un attribut <code class="code">DependsOn</code> à une ressource, cette dernière est créée uniquement après la création de la ressource spécifiée dans l'attribut <code class="code">DependsOn</code>.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Les piles dépendantes ont également des dépendances implicites sous la forme de propriétés cibles <code class="code">!Ref</code>, <code class="code">!GetAtt</code> et <code class="code">!Sub</code>. Par exemple, si les propriétés de la ressource A utilisent une <code class="code">!Ref</code> pour la ressource B, les règles suivantes s'appliquent :</p><div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>La ressource B est créée avant la ressource A.</p>
            </li><li class="listitem">
                <p>La ressource A est supprimée avant la ressource B.</p>
            </li><li class="listitem">
                <p>La ressource B est mise à jour avant la ressource A.</p>
            </li></ul></div></div></div><p>L'attribut <code class="code">DependsOn</code> est utilisable avec n'importe quelle ressource. Voici quelques utilisations typiques :</p><div class="itemizedlist">
         
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>Déterminez si une condition d'attente entre en vigueur. Pour plus d’informations, consultez <a href="./using-cfn-waitcondition.html">Création de conditions Wait dans un gabarit</a>.</p>
        </li><li class="listitem">
            <p>Déclarez des dépendances pour les ressources qui doivent être créées ou supprimées dans un ordre spécifique. Par exemple, vous devez déclarer explicitement les dépendances aux associations de passerelle pour certaines ressources d'un VPC. Pour plus d’informations, consultez <a href="#gatewayattachment">Lorsqu'un attribut DependsOn est obligatoire</a>.</p>
        </li><li class="listitem">
            <p>Remplacez le parallélisme par défaut lors de la création, la mise à jour ou la suppression de ressources. AWS CloudFormation crée, met à jour et supprime les ressources en parallèle dans la mesure du possible. Il détermine automatiquement les ressources d'un modèle qui peuvent être traitées en parallèle et dont les dépendances nécessitent la fin d'autres opérations pour pouvoir être traitées. Vous pouvez l'utiliser <code class="code">DependsOn</code> pour spécifier explicitement les dépendances, ce qui remplace le parallélisme par défaut et indique  CloudFormation  d'opérer sur ces ressources dans un ordre spécifié.</p>
        </li></ul></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Lors d'une mise à jour de la pile, les ressources qui dépendent des ressources mises à jour sont mises à jour automatiquement.  CloudFormation n'apporte aucune modification aux ressources mises à jour automatiquement, mais si une politique de pile est associée à ces ressources, votre compte doit disposer des autorisations nécessaires pour les mettre à jour.</p></div></div>
        <h2 id="aws-attribute-dependson-syntax">Syntaxe</h2>

        <p>L'attribut <code class="code">DependsOn</code> accepte une chaîne unique ou une liste de chaînes.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"DependsOn" : [ <code class="replaceable">String, ...</code> ]</code></pre>
     
        <h2 id="aws-attribute-dependson-example">Exemple</h2>

        <p>Le modèle suivant contient une <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>ressource avec un <code class="code">DependsOn</code> attribut qui spécifie MyDB, une <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-rds-database-instance.html">AWS : :RDS : :DBInstance</a>. Lors de la  CloudFormation  création de cette pile, elle crée d'abord MyDB, puis crée Ec2Instance.</p>
        <div id="JSON" name="JSON" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-1.json">JSON</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion" : "2010-09-09",
    "Mappings" : <span>{</span>
        "RegionMap" : <span>{</span>
            "us-east-1" : <span>{</span> 
                "AMI" : "ami-0ff8a91507f77f867" 
            },
            "us-west-1" : <span>{</span> 
                "AMI" : "ami-0bdb828fd58c52235" 
            },
            "eu-west-1" : <span>{</span> 
                "AMI" : "ami-047bb4163c506cd98" 
            },
            "ap-northeast-1" : <span>{</span> 
                "AMI" : "ami-06cd52961ce9f0d85" 
            },
            "ap-southeast-1" : <span>{</span> 
                "AMI" : "ami-08569b978cc4dfa10" 
            }
        }
    },
    "Resources" : <span>{</span>
        "Ec2Instance" : <span>{</span>
            "Type" : "AWS::EC2::Instance",
            "Properties" : <span>{</span>
                "ImageId": <span>{</span>
                    "Fn::FindInMap": [
                        "RegionMap",
                        <span>{</span>
                            "Ref": "AWS::Region"
                        },
                        "AMI"
                    ]
                }
            },
            "DependsOn" : "myDB"
        },
        "myDB" : <span>{</span>
            "Type" : "AWS::RDS::DBInstance",
            "Properties" : <span>{</span>
               "AllocatedStorage" : "5",
               "DBInstanceClass" : "db.t2.small",
               "Engine" : "MySQL",
               "EngineVersion" : "5.5",
               "MasterUsername" : "MyName",
               "MasterUserPassword" : "MyPassword"
            }
        }
    }
}     </code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-1.yaml">YAML</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Mappings:
  RegionMap:
    us-east-1:
      AMI: ami-0ff8a91507f77f867
    us-west-1:
      AMI: ami-0bdb828fd58c52235
    eu-west-1:
      AMI: ami-047bb4163c506cd98
    ap-northeast-1:
      AMI: ami-06cd52961ce9f0d85
    ap-southeast-1:
      AMI: ami-08569b978cc4dfa10
Resources:
  Ec2Instance:
    Type: AWS::EC2::Instance
    Properties:
      ImageId:
        Fn::FindInMap:
        - RegionMap
        - Ref: AWS::Region
        - AMI
    DependsOn: myDB
  myDB:
    Type: AWS::RDS::DBInstance
    Properties:
      AllocatedStorage: '5'
      DBInstanceClass: db.t2.small
      Engine: MySQL
      EngineVersion: '5.5'
      MasterUsername: MyName
      MasterUserPassword: MyPassword
</code></pre>
        </div>
     
        <h2 id="gatewayattachment">Lorsqu'un attribut <code class="code">DependsOn</code> est obligatoire</h2>

        <p>Association passerelle-VPC</p>
        <p>Certaines ressources dans un VPC ont besoin d'une passerelle (VPN ou Internet). Si votre modèle  CloudFormation  définit un VPC, une passerelle et une association de passerelle, toutes les ressources qui nécessitent cette passerelle dépendent de l'association de passerelle. Par exemple, une instance Amazon EC2 ayant une adresse IP publique est dépendante de l'association de la passerelle au VPC si les ressources <code class="code">VPC</code> et <code class="code">InternetGateway</code> sont également déclarées dans le même modèle.</p>
        <p>Actuellement, les ressources suivantes dépendent de l'association d'une passerelle à un VPC lorsqu'elles disposent d'une adresse IP publique et se trouvent dans un VPC.</p>
        <div class="itemizedlist">
             
             
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Groupes Auto Scaling</p>
            </li><li class="listitem">
                <p>Instances Amazon EC2</p>
            </li><li class="listitem">
                <p>Equilibreurs de charge Elastic Load Balancing</p>
            </li><li class="listitem">
                <p>Adresses IP Elastic</p>
            </li><li class="listitem">
                <p>Instances DB Amazon RDS</p>
            </li><li class="listitem">
                <p>Routages Amazon VPC qui incluent la passerelle Internet</p>
            </li></ul></div>
        <p>La propagation du routage d'une passerelle VPN dépend de l'association d'une passerelle VPC quand vous utilisez une passerelle VPN.</p>
        <p>L'extrait suivant présente un exemple d'association de passerelle et une instance Amazon EC2 qui en dépend :</p>
        <div id="JSON" name="JSON" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-2.json">JSON</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"GatewayToInternet" : <span>{</span>
  "Type" : "AWS::EC2::VPCGatewayAttachment",
  "Properties" : <span>{</span>
    "VpcId" : <span>{</span> 
      "Ref" : "VPC" 
    },
    "InternetGatewayId" : <span>{</span> 
      "Ref" : "InternetGateway" 
    }
  }
},

"EC2Host" : <span>{</span>
  "Type" : "AWS::EC2::Instance",
  "DependsOn" : "GatewayToInternet",
  "Properties" : <span>{</span>
    "InstanceType" : <span>{</span> 
      "Ref" : "EC2InstanceType" 
    },
    "KeyName"  : <span>{</span> 
      "Ref" : "KeyName" 
    },
    "ImageId": <span>{</span>
      "Fn::FindInMap": [
        "AWSRegionArch2AMI",
        <span>{</span>
          "Ref": "AWS::Region"
        },
        <span>{</span>
          "Fn::FindInMap": [
            "AWSInstanceType2Arch",
            <span>{</span>
              "Ref": "EC2InstanceType"
            },
            "Arch"
          ]
        }
      ]
    },
    "NetworkInterfaces" : [
      <span>{</span>
        "GroupSet" : [
          <span>{</span> 
            "Ref" : "EC2SecurityGroup" 
          }
        ],
        "AssociatePublicIpAddress" : "true",
        "DeviceIndex" : "0",
        "DeleteOnTermination" : "true",
        "SubnetId" : <span>{</span> 
          "Ref" : "PublicSubnet" 
        }
      }
    ]
  }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
            <h3 id="aws-attribute-dependson-example-2.yaml">YAML</h3>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">GatewayToInternet:
  Type: AWS::EC2::VPCGatewayAttachment
  Properties:
    VpcId:
      Ref: VPC
    InternetGatewayId:
      Ref: InternetGateway
EC2Host:
  Type: AWS::EC2::Instance
  DependsOn: GatewayToInternet
  Properties:
    InstanceType:
      Ref: EC2InstanceType
    KeyName:
      Ref: KeyName
    ImageId:
      Fn::FindInMap:
      - AWSRegionArch2AMI
      - Ref: AWS::Region
      - Fn::FindInMap:
        - AWSInstanceType2Arch
        - Ref: EC2InstanceType
        - Arch
    NetworkInterfaces:
    - GroupSet:
      - Ref: EC2SecurityGroup
      AssociatePublicIpAddress: 'true'
      DeviceIndex: '0'
      DeleteOnTermination: 'true'
      SubnetId:
        Ref: PublicSubnet</code></pre>
        </div>
         
            <h3 id="w9aac34c23c15c17c19">Service Amazon ECS et groupe Auto Scaling</h3>

            <p>Lorsque vous utilisez Auto Scaling ou Amazon Elastic Compute Cloud (Amazon EC2) pour créer des instances de conteneur pour un cluster Amazon ECS, la ressource de service Amazon ECS doit avoir une dépendance au groupe Auto Scaling ou aux instances Amazon EC2, comme illustré dans l'extrait suivant. Ainsi, les instances de conteneur sont disponibles et associées au cluster Amazon ECS avant de  CloudFormation  créer le service Amazon ECS.</p>
            <div id="JSON" name="JSON" class="section langfilter">
                <h4 id="aws-attribute-dependson-example-3.json">JSON</h4>

                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"service": <span>{</span>
  "Type": "AWS::ECS::Service",
  "DependsOn": [
    "ECSAutoScalingGroup"
  ],
  "Properties" : <span>{</span>
    "Cluster": <span>{</span>
      "Ref": "ECSCluster"
    },
    "DesiredCount": "1",
    "LoadBalancers": [
      <span>{</span>
        "ContainerName": "simple-app",
        "ContainerPort": "80",
        "LoadBalancerName" : <span>{</span> 
          "Ref" : "EcsElasticLoadBalancer" 
        }
      }
    ],
    "Role" : <span>{</span>
      "Ref":"ECSServiceRole"
    },
    "TaskDefinition" : <span>{</span>
      "Ref":"taskdefinition"
    }
  }
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
                <h4 id="aws-attribute-dependson-example-3.yaml">YAML</h4>

                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">service:
  Type: AWS::ECS::Service
  DependsOn:
  - ECSAutoScalingGroup
  Properties:
    Cluster:
      Ref: ECSCluster
    DesiredCount: 1
    LoadBalancers:
    - ContainerName: simple-app
      ContainerPort: 80
      LoadBalancerName:
        Ref: EcsElasticLoadBalancer
    Role:
      Ref: ECSServiceRole
    TaskDefinition:
      Ref: taskdefinition</code></pre>
            </div>
         
         
            <h3 id="w9aac34c23c15c17c21">Politique de rôle IAM</h3>

            <p>Les ressources qui effectuent des appels supplémentaires à AWS nécessitent une fonction du service, qui permet à un service d'effectuer des appels à AWS en votre nom. Par exemple, la <code class="code">AWS::CodeDeploy::DeploymentGroup</code> ressource nécessite un rôle de service  CodeDeploy  doté des autorisations nécessaires pour déployer des applications sur vos instances. Si vous disposez d'un modèle unique qui définit un rôle de service, la politique de rôle (en utilisant la ressource <code class="code">AWS::IAM::Policy</code> ou <code class="code">AWS::IAM::ManagedPolicy</code>) et une ressource qui utilise ce rôle, ajoutez une dépendance de telle sorte que la ressource dépende de la politique de rôle. Cette dépendance assure que la politique est disponible dans l'ensemble du cycle de vie de la ressource.</p>
            <p>Par exemple, imaginons que vous ayez un modèle avec une ressource de groupe de déploiement, un rôle de service et la politique de rôle. Lorsque vous créez une pile, le groupe de déploiement  CloudFormation  ne sera pas créé tant qu'il n'aura pas créé la politique du rôle. Sans cette dépendance,  CloudFormation  vous pouvez créer la ressource du groupe de déploiement avant qu'elle ne crée la politique du rôle. Si cela se produit, la création du groupe de déploiement échouera en raison d'autorisations insuffisantes.</p>
            <p>Si le rôle possède une politique intégrée, ne spécifiez pas de dépendance.  CloudFormation crée le rôle et sa politique en même temps.</p>
         
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-attribute-deletionpolicy.html">DeletionPolicy</div><div id="next" class="next-link" accesskey="n" href="./aws-attribute-metadata.html">Metadata</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>