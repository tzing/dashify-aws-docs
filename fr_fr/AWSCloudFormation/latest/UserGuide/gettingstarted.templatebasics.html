<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Découvrir les concepts de base des modèles - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="gettingstarted.templatebasics" /><meta name="default_state" content="gettingstarted.templatebasics" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="description" content="Découvrez les concepts de base liés à l'utilisation des ressources, des paramètres et des autres composants de modèles, ainsi que leurs interactions." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guide de l'utilisateur" /><meta name="abstract" content="Créez et gérez des déploiements AWS d'infrastructure de manière prévisible et répétée à l'aide de ce AWS CloudFormation guide de l'utilisateur." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guide de l'utilisateur" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guide de l'utilisateur" /><meta id="panorama-serviceConsolePage" value="Découvrir les concepts de base des modèles" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Découvrir les concepts de base des modèles - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionnement des ressources,configuration des ressources,gestion de l'infrastructure,CloudFormer,CloudFormation pile,CloudFormation stackset,CloudFormation modèle,jeu de modifications" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide de l'utilisateur",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Démarrer avec AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Découvrir les concepts de base des modèles",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guide de l'utilisateur</a></div><div id="page-toc-src"><a href="#gettingstarted.templatebasics.what">Qu'est-ce qu'un AWS CloudFormation modèle ?</a><a href="#gettingstarted.templatebasics.simple">Ressource HelloBucket</a><a href="#gettingstarted.templatebasics.multiple">Fonctionnement et combinaison des propriétés de ressource</a><a href="#gettingstarted.templatebasics.parameters">Réception d'une entrée utilisateur à l'aide de paramètres d'entrée</a><a href="#gettingstarted.templatebasics.mappings">Définition de valeurs conditionnelles à l'aide de mappages</a><a href="#gettingstarted.templatebasics.outputs">Valeurs construites et valeurs de sortie</a><a href="#gettingstarted.templatebasics.learnmore">Étapes suivantes</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="gettingstarted.templatebasics">Découvrir les concepts de base des modèles</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="highlights" id="inline-topiclist"><h6>Rubriques</h6><ul><li><a href="#gettingstarted.templatebasics.what">Qu'est-ce qu'un AWS CloudFormation modèle ?</a></li><li><a href="#gettingstarted.templatebasics.simple">Ressource HelloBucket</a></li><li><a href="#gettingstarted.templatebasics.multiple">Fonctionnement et combinaison des propriétés de ressource</a></li><li><a href="#gettingstarted.templatebasics.parameters">Réception d'une entrée utilisateur à l'aide de paramètres d'entrée</a></li><li><a href="#gettingstarted.templatebasics.mappings">Définition de valeurs conditionnelles à l'aide de mappages</a></li><li><a href="#gettingstarted.templatebasics.outputs">Valeurs construites et valeurs de sortie</a></li><li><a href="#gettingstarted.templatebasics.learnmore">Étapes suivantes</a></li></ul></div><p>Dans <a href="./GettingStarted.Walkthrough.html">Mise en route</a>, vous avez appris à utiliser un modèle pour créer une pile. Vous avez vu comment les ressources déclarées sont associées aux ressources de la pile. Nous avons également abordé les paramètres d'entrée et vous avons expliqué comment ils vous permettent de transmettre des valeurs spécifiques lorsque vous créez une pile à partir d'un modèle. Dans cette section, nous parlerons plus en détail des ressources et des paramètres. Nous aborderons également les autres composants des modèles afin que vous sachiez comment les utiliser ensemble pour créer des modèles qui produisent les AWS ressources souhaitées.</p>
    <h2 id="gettingstarted.templatebasics.what">Qu'est-ce qu'un AWS CloudFormation modèle ?</h2>

    <p>Un modèle est une déclaration des AWS ressources qui constituent une pile. Le modèle est stocké sous forme de fichier texte dont le format est conforme à la norme JSON ( JavaScript Object Notation) ou YAML. Comme il s'agit de fichiers texte, vous pouvez les créer et les modifier dans n'importe quel éditeur de texte, et les gérer dans votre système de contrôle source avec le reste de votre code source. Pour plus d'informations sur les formats de modèle, consultez <a href="./template-formats.html">Formats de modèle AWS CloudFormation</a>.</p>
    <p>Dans le modèle, vous déclarez les AWS ressources que vous souhaitez créer et configurer. Vous déclarez un objet sous forme de paire nom-valeur ou d'association entre un nom et un ensemble d'objets enfant délimité. La syntaxe varie selon le format que vous utilisez. Pour plus d'informations, consultez <a href="./template-anatomy.html">Anatomie du modèle</a>. Le seul objet de niveau supérieur obligatoire est l'objet Resources, qui doit déclarer au moins une ressource. Commençons par le modèle le plus simple, qui contient uniquement un objet Resources avec une seule déclaration de ressource.</p>
   
    <h2 id="gettingstarted.templatebasics.simple">Ressource HelloBucket</h2>
    <p>L'objet Resources contient une liste d'objets de ressources. Une déclaration de ressource comprend les attributs de la ressource, lesquels sont eux-mêmes déclarés en tant qu'objets enfants. Une ressource doit avoir un <code class="code">Type</code> attribut qui définit le type de AWS ressource que vous souhaitez créer. L'attribut <code class="code">Type</code> présente un format spécial :</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">AWS::<code class="replaceable">ProductIdentifier</code>::<code class="replaceable">ResourceType</code></code></pre>
    <p>Par exemple, le type de ressource d'un compartiment Amazon S3 est <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::Bucket</a>. Pour afficher la liste complète des types de ressources, consultez <a href="./template-reference.html">Référence de modèles</a>.</p>
    <p>Examinons à présent un modèle de base. Le modèle suivant déclare une ressource unique de type <code class="code">AWS::S3::Bucket:</code> portant le nom HelloBucket.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.simple.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket"&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.simple.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
</code></pre>
    </div>
    <p>Si vous utilisez ce modèle pour créer une pile, AWS CloudFormation vous créerez un compartiment Amazon S3. La création d'un bucket est simple, car il est  CloudFormation  possible de créer un bucket avec les paramètres par défaut. Pour les autres ressources, telles qu'un Amazon EC2 Auto Scaling groupe ou une instance EC2, des informations  CloudFormation  supplémentaires sont nécessaires. Les déclarations de ressources utilisent un attribut <code class="code">Properties</code> pour spécifier les informations utilisées pour créer une ressource.</p>
    <p>Selon le type de ressource, certaines propriétés sont obligatoires, comme la  ImageId  propriété d'une <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>ressource, tandis que d'autres sont facultatives. Certaines propriétés ont des valeurs par défaut, telles que la  AccessControl  propriété de la <code class="code">AWS::S3::Bucket</code> ressource. Il est donc facultatif de spécifier une valeur pour ces propriétés. D'autres propriétés ne sont pas obligatoires, mais peuvent ajouter des fonctionnalités qui vous intéressent, telles que la propriété <code class="code">WebsiteConfiguration</code> de la ressource <code class="code">AWS::S3::Bucket</code>. La définition d'une valeur pour ces propriétés est facultative et dépend entièrement de vos besoins. Dans l'exemple ci-dessus, comme la ressource <code class="code">AWS::S3::Bucket</code> contient uniquement des propriétés facultatives et que nous n'avons pas besoin des fonctionnalités correspondantes, nous pouvons accepter les valeurs par défaut et omettre l'attribut Properties.</p>
    <p>Pour voir les propriétés de chaque type de ressource, consultez les rubriques dans <a href="./aws-template-resource-type-ref.html">AWS référence aux types de ressources et de propriétés</a>.</p>
   
    <h2 id="gettingstarted.templatebasics.multiple">Fonctionnement et combinaison des propriétés de ressource</h2>

    <p>Généralement, une propriété de ressource est simplement une valeur de type chaîne. Par exemple, le modèle suivant spécifie une ACL prédéfinie (PublicRead) pour la  AccessControl  propriété du bucket.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket",&#xD;
            "Properties": <span>{</span>&#xD;
                "AccessControl": "PublicRead"&#xD;
            }&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
    Properties:&#xD;
      AccessControl: PublicRead&#xD;
</code></pre>
    </div>
    <p>Certaines ressources peuvent contenir plusieurs propriétés, dont certaines peuvent avoir une ou plusieurs sous-propriétés. Par exemple, la <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::Bucket</a>ressource possède deux propriétés :  AccessControl  et WebsiteConfiguration. La  WebsiteConfiguration  propriété possède deux sous-propriétés :  IndexDocument et.  ErrorDocument Le modèle suivant illustre la ressource du compartiment d'origine avec les propriétés supplémentaires.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json2">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket",&#xD;
            "Properties": <span>{</span>&#xD;
                "AccessControl": "PublicRead",&#xD;
                "WebsiteConfiguration": <span>{</span>&#xD;
                    "IndexDocument": "index.html",&#xD;
                    "ErrorDocument": "error.html"&#xD;
                }&#xD;
            }&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml2">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
    Properties:&#xD;
      AccessControl: PublicRead&#xD;
      WebsiteConfiguration:&#xD;
        IndexDocument: index.html&#xD;
        ErrorDocument: error.html&#xD;
</code></pre>
    </div>
    <p>L'un des principaux avantages des modèles  CloudFormation  est la possibilité de créer un ensemble de ressources qui fonctionnent ensemble pour créer une application ou une solution. Le nom utilisé pour une ressource dans le modèle est un nom logique. Lors de la  CloudFormation  création de la ressource, elle génère un nom physique basé sur la combinaison du nom logique, du nom de la pile et d'un identifiant unique.</p>

    <p>Vous vous demandez probablement comment définir les propriétés d'une seule ressource sur la base du nom ou de la propriété d'une autre ressource. <span>Par exemple, vous pouvez créer <span>une  CloudFront  distribution basée sur un compartiment S3 ou</span> une instance EC2 qui utilise des groupes de sécurité EC2, et toutes ces ressources peuvent être créées dans le même modèle.</span>  CloudFormation possède un certain nombre de fonctions intrinsèques que vous pouvez utiliser pour faire référence à d'autres ressources et à leurs propriétés. Vous pouvez utiliser la <a href="./intrinsic-function-reference-ref.html">fonction Ref</a> pour faire référence à une propriété d'identification d'une ressource. Souvent, il s'agit du nom physique de la ressource. Cependant, il s'agit parfois d'un identificateur, tel que l'adresse IP d'une ressource <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-eip.html">AWS::EC2::EIP</a> ou de l'Amazon Resource Name (ARN) d'une rubrique Amazon SNS. Pour voir la liste des valeurs renvoyées par la fonction Ref, consultez <a href="./intrinsic-function-reference-ref.html">Fonction Ref</a>. Le modèle suivant contient une <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>ressource. La  SecurityGroups  propriété de la ressource appelle la fonction Ref pour faire référence à la <code class="code">AWS::EC2::SecurityGroup</code> ressource InstanceSecurityGroup.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json3">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "Ec2Instance": <span>{</span>
            "Type": "AWS::EC2::Instance",
            "Properties": <span>{</span>
                "SecurityGroups": [
                    <span>{</span>
                        "Ref": "InstanceSecurityGroup"
                    }
                ],
                "KeyName": "mykey",
                "ImageId": ""
            }
        },
        "InstanceSecurityGroup": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "GroupDescription": "Enable SSH access via port 22",
                "SecurityGroupIngress": [
                    <span>{</span>
                        "IpProtocol": "tcp",
                        "FromPort": 22,
                        "ToPort": 22,
                        "CidrIp": "0.0.0.0/0"
                    }
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml3">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
      KeyName: mykey
      ImageId: ''
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>La  SecurityGroups  propriété est une liste de groupes de sécurité, et dans l'exemple précédent, nous n'avons qu'un seul élément dans la liste. Le modèle suivant contient un élément supplémentaire dans la liste des  SecurityGroups  propriétés.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json4">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "Ec2Instance": <span>{</span>
            "Type": "AWS::EC2::Instance",
            "Properties": <span>{</span>
                "SecurityGroups": [
                    <span>{</span>
                        "Ref": "InstanceSecurityGroup"
                    },
                    "MyExistingSecurityGroup"
                ],
                "KeyName": "mykey",
                "ImageId": "ami-7a11e213"
            }
        },
        "InstanceSecurityGroup": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "GroupDescription": "Enable SSH access via port 22",
                "SecurityGroupIngress": [
                    <span>{</span>
                        "IpProtocol": "tcp",
                        "FromPort": 22,
                        "ToPort": 22,
                        "CidrIp": "0.0.0.0/0"
                    }
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml4">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
        - MyExistingSecurityGroup
      KeyName: mykey
      ImageId: ami-7a11e213
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>MyExistingSecurityGroup est une chaîne qui fait référence à un groupe de sécurité EC2 existant plutôt qu'à un groupe de sécurité déclaré dans un modèle. Les chaînes littérales permettent de faire référence à des ressources AWS
existantes.</p>
    <p>Dans l'exemple ci-dessus, la  KeyName  propriété de <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>est la chaîne littérale mykey. Autrement dit, une paire de clés portant le nom mykey doit exister dans la région où la pile est créée. Dans le cas contraire, la création de la pile échouera, car la paire de clés n'existe pas. La paire de clés que vous utilisez peut varier en fonction de la région dans laquelle vous créez la pile, ou vous souhaiterez peut-être partager le modèle avec quelqu'un d'autre afin qu'il puisse l'utiliser avec son AWS compte. Si tel est le cas, vous pouvez utiliser un paramètre d'entrée de sorte que la nom de la paire de clés puisse être spécifié lors de la création de la pile. La fonction Ref peut renvoyer vers des paramètres d'entrée qui sont définis au moment de la création de la pile. Le modèle suivant ajoute un objet Parameters contenant le  KeyName  paramètre, qui est utilisé pour spécifier la  KeyName  propriété de la <code class="code">AWS::EC2::Instance</code> ressource. Le type de paramètre est <code class="code">AWS::EC2::KeyPair::KeyName</code>, ce qui garantit qu'un utilisateur spécifie un nom de paire de clés valide dans son compte et dans la région où la pile est créée.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json5">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description": "The EC2 Key Pair to allow SSH access to the instance",
      "Type": "AWS::EC2::KeyPair::KeyName"
    }
  },
  "Resources": <span>{</span>
    "Ec2Instance": <span>{</span>
      "Type": "AWS::EC2::Instance",
      "Properties": <span>{</span>
        "SecurityGroups": [
          <span>{</span>
            "Ref": "InstanceSecurityGroup"
          },
          "MyExistingSecurityGroup"
        ],
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "ImageId": "ami-7a11e213"
      }
    },
    "InstanceSecurityGroup": <span>{</span>
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": <span>{</span>
        "GroupDescription": "Enable SSH access via port 22",
        "SecurityGroupIngress": [
          <span>{</span>
            "IpProtocol": "tcp",
            "FromPort": 22,
            "ToPort": 22,
            "CidrIp": "0.0.0.0/0"
          }
        ]
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml5">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: The EC2 Key Pair to allow SSH access to the instance
    Type: 'AWS::EC2::KeyPair::KeyName'
Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
        - MyExistingSecurityGroup
      KeyName: !Ref KeyName
      ImageId: ami-7a11e213
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>La fonction Ref est utile si le paramètre ou la valeur renvoyée pour une ressource correspond exactement à vos attentes. Toutefois, vous avez peut-être besoin d'autres attributs de ressource. Par exemple, si vous souhaitez créer une  CloudFront  distribution avec une origine S3, vous devez spécifier l'emplacement du compartiment à l'aide d'une adresse de type DNS. Plusieurs ressources possèdent des attributs supplémentaires dont vous pouvez utiliser les valeurs dans le modèle. Pour obtenir ces attributs, utilisez la GetAtt fonction <a href="./intrinsic-function-reference-getatt.html">Fn : :</a>. Le modèle suivant crée une ressource de  CloudFront  distribution qui spécifie le nom DNS d'une ressource de compartiment S3 à l'aide d'une Fn::GetAtt  fonction permettant d'obtenir l' DomainName attribut du compartiment.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json6">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Resources": <span>{</span>
    "myBucket": <span>{</span>
      "Type": "AWS::S3::Bucket"
    },
    "myDistribution": <span>{</span>
      "Type": "AWS::CloudFront::Distribution",
      "Properties": <span>{</span>
        "DistributionConfig": <span>{</span>
          "Origins": [
            <span>{</span>
              "DomainName": <span>{</span>
                "Fn::GetAtt": [
                  "myBucket",
                  "DomainName"
                ]
              },
              "Id": "myS3Origin",
              "S3OriginConfig": <span>{</span>}
            }
          ],
          "Enabled": "true",
          "DefaultCacheBehavior": <span>{</span>
            "TargetOriginId": "myS3Origin",
            "ForwardedValues": <span>{</span>
              "QueryString": "false"
            },
            "ViewerProtocolPolicy": "allow-all"
          }
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml6">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  myBucket:
    Type: 'AWS::S3::Bucket'
  myDistribution:
    Type: 'AWS::CloudFront::Distribution'
    Properties:
      DistributionConfig:
        Origins:
          - DomainName: !GetAtt 
              - myBucket
              - DomainName
            Id: myS3Origin
            S3OriginConfig: <span>{</span>}
        Enabled: 'true'
        DefaultCacheBehavior:
          TargetOriginId: myS3Origin
          ForwardedValues:
            QueryString: 'false'
          ViewerProtocolPolicy: allow-all</code></pre>
    </div>
    <p>La Fn::GetAtt  fonction prend deux paramètres, le nom logique de la ressource et le nom de l'attribut à récupérer. Pour une liste complète des attributs disponibles pour les ressources, voir <a href="./intrinsic-function-reference-getatt.html">Fn : : GetAtt</a>. Vous remarquerez que la Fn::GetAtt  fonction répertorie ses deux paramètres dans un tableau. Pour les fonctions qui acceptent plusieurs paramètres, un tableau permet de spécifier ces derniers.</p>
   
    <h2 id="gettingstarted.templatebasics.parameters">Réception d'une entrée utilisateur à l'aide de paramètres d'entrée</h2>

    <p>Jusqu'ici, vous vous êtes familiarisé avec les ressources et vous avez découvert comment les combiner au sein d'un modèle. Vous avez appris à renvoyer vers des paramètres d'entrée, mais nous n'avons pas encore expliqué en détail comment définir les paramètres d'entrée eux-mêmes. Examinons donc des déclarations de paramètre et voyons comment restreindre et valider une entrée utilisateur.</p>
    <p>Vous déclarez les paramètres dans l'objet Parameters d'un modèle. Un paramètre contient une liste d'attributs qui définissent sa valeur, ainsi que les contraintes de cette valeur. Le seul attribut obligatoire est Type, qui peut être une chaîne, un nombre ou un type AWSspécifique. Vous pouvez également ajouter un attribut Description pour indiquer à l'utilisateur le genre de valeur qu'il doit spécifier. Le nom et la description du paramètre sont affichés dans la page Specify Parameters lorsqu'un utilisateur utilise le modèle de l'assistant Create Stack.</p>
    <p>Le fragment de modèle suivant est un objet Parameters qui déclare les paramètres utilisés dans la page Specify Parameters ci-dessus.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.parameters.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description" : "Name of an existing EC2 KeyPair to enable SSH access into the WordPress web server",
      "Type": "AWS::EC2::KeyPair::KeyName"
    },
    "WordPressUser": <span>{</span>
      "Default": "admin",
      "NoEcho": "true",
      "Description" : "The WordPress database admin account user name",
      "Type": "String",
      "MinLength": "1",
      "MaxLength": "16",
      "AllowedPattern" : "[a-zA-Z][a-zA-Z0-9]*"
    },
    "WebServerPort": <span>{</span>
      "Default": "8888",
      "Description" : "TCP/IP port for the WordPress web server",
      "Type": "Number",
      "MinValue": "1",
      "MaxValue": "65535"
    }
  }</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.parameters.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: Name of an existing EC2 KeyPair to enable SSH access into the WordPress web server
    Type: AWS::EC2::KeyPair::KeyName
  WordPressUser:
    Default: admin
    NoEcho: true
    Description: The WordPress database admin account user name
    Type: String
    MinLength: 1
    MaxLength: 16
    AllowedPattern: "[a-zA-Z][a-zA-Z0-9]*"
  WebServerPort:
    Default: 8888
    Description: TCP/IP port for the WordPress web server
    Type: Number
    MinValue: 1
    MaxValue: 65535</code></pre>
    </div>
    <p>Pour les paramètres avec des valeurs par défaut,  CloudFormation  utilise les valeurs par défaut sauf si les utilisateurs spécifient une autre valeur. Si vous omettez l'attribut par défaut, les utilisateurs doivent spécifier une valeur pour ce paramètre. Cependant, vous ne pouvez pas garantir que cette valeur sera correcte. Pour valider la valeur d'un paramètre, vous pouvez déclarer des contraintes ou spécifier un type de paramètre AWSspécifique.</p>
    <p>Vous remarquerez que le paramètre <code class="code">KeyName</code> n'a aucun attribut <code class="code">Default</code> contrairement aux autres paramètres. Par exemple, le paramètre <code class="code">WordPressUser</code> a l'attribut <code class="code">Default: admin</code>, mais le paramètre <code class="code">KeyName</code> n'a aucun attribut. Les utilisateurs doivent spécifier une valeur de nom de clé lors de la création de la pile. S'ils ne le font pas,  CloudFormation  ne parvient pas à créer la pile et renvoie une exception :<code class="code">Parameters: [KeyName] must have
        values</code>.</p>
    <p>Pour les types de paramètres AWSspécifiques,  CloudFormation  valide les valeurs d'entrée par rapport aux valeurs existantes dans le AWS compte de l'utilisateur et dans la région où il crée la pile <em>avant</em> de créer des ressources de pile. Dans l'exemple de modèle, le <code class="code">KeyName</code> paramètre est un type de paramètre AWSspécifique de<code class="code">AWS::EC2::KeyPair::KeyName</code>.  CloudFormation vérifie que les utilisateurs spécifient un nom de paire de clés EC2 valide avant de créer la pile. Un autre exemple de type de paramètre AWSspécifique est celui <code class="code">AWS::EC2::VPC::Id</code> qui oblige les utilisateurs à spécifier un ID VPC valide. Outre la validation initiale, la AWS console affiche une liste déroulante de valeurs valides pour des types de paramètres AWSspécifiques, tels que des noms de paires de clés EC2 ou des identifiants VPC valides, lorsque les utilisateurs utilisent l'assistant Create Stack.</p>
    <p>Pour le type de paramètre <code class="code">String</code>, vous pouvez utiliser les attributs suivants pour déclarer des contraintes : <code class="code">MinLength</code>, <code class="code">MaxLength</code>, <code class="code">Default</code>, <code class="code">AllowedValues</code> et <code class="code">AllowedPattern</code>. Dans l'exemple ci-dessus, le paramètre <code class="code">WordPressUser</code> a trois contraintes : sa valeur doit contenir entre 1 et 16 caractères (<code class="code">MinLength</code>, <code class="code">MaxLength</code>) et doit commencer par une lettre, suivie d'une combinaison de lettres et de chiffres (<code class="code">AllowedPattern</code>).</p>
    <p>Pour le type de paramètre <code class="code">Number</code>, vous pouvez déclarer les contraintes suivantes : <code class="code">MinValue</code>, <code class="code">MaxValue</code>, <code class="code">Default</code> et <code class="code">AllowedValues</code>. il peut s'agit d'un nombre entier ou une valeur float. Dans l'exemple ci-dessus, le paramètre <code class="code">WebServerPort</code> doit être un nombre compris entre 1 et 65535 inclus (<code class="code">MinValue</code>, <code class="code">MaxValue</code>).</p>
    <p>Plus tôt dans cette section, nous avons mentionné que les paramètres constituent un moyen efficace de spécifier des données sensibles ou spécifiques à l'implémentation (telles que des mots de passe ou des noms d'utilisateur) que vous avez besoin d'utiliser, mais que vous ne souhaitez pas incorporer dans le modèle lui-même. Si vous définissez l'<code class="code">NoEcho</code>attribut sur<code class="code">true</code>,  CloudFormation  renvoie la valeur du paramètre masquée sous forme d'astérisques (*****) pour tous les appels décrivant la pile ou les événements de la pile, à l'exception des informations stockées aux emplacements spécifiés ci-dessous. Dans l'exemple ci-dessus, ceux qui consultent les paramètres de la pile ne peuvent pas voir la valeur du paramètre <code class="code">WordPressUser</code>, qui apparaît sous forme d'astérisques.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>L'utilisation de l'attribut <code class="code">NoEcho</code> ne masque aucune information stockée dans les lieux suivants :</p><div class="itemizedlist">
           
           
           
         <ul class="itemizedlist"><li class="listitem">
           <p>La section des <code class="code">Metadata</code> modèles.  CloudFormation ne transforme, ne modifie ni n'expédie aucune information que vous incluez dans <code class="code">Metadata</code> cette section. Pour de plus amples informations, veuillez consulter <a href="./metadata-section-structure.html">Metadonnées</a>.</p>
          </li><li class="listitem">
           <p>La section de modèle <code class="code">Outputs</code> Pour de plus amples informations, veuillez consulter <a href="./outputs-section-structure.html">Outputs</a>.</p>
          </li><li class="listitem">
           <p>L’attribut <code class="code">Metadata</code> d'une définition de ressource. Pour de plus amples informations, veuillez consulter <a href="./aws-attribute-metadata.html">Attribut Metadata</a>.</p>
          </li></ul></div><p>Nous vous recommandons vivement de ne pas utiliser ces mécanismes pour inclure des informations sensibles, telles que des mots de passe ou des secrets.</p></div></div>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Plutôt que d'intégrer des informations sensibles directement dans vos  CloudFormation  modèles, nous vous recommandons d'utiliser des paramètres dynamiques dans le modèle de pile pour référencer les informations sensibles stockées et gérées à l'extérieur CloudFormation, par exemple dans le AWS Systems Manager Parameter Store ou AWS Secrets Manager.</p><p>Pour plus d'informations, consultez les <a href="./security-best-practices.html#creds">N'incorporez pas d'informations d'identification dans vos modèles</a> meilleures pratiques.</p></div></div>
   
    <h2 id="gettingstarted.templatebasics.mappings">Définition de valeurs conditionnelles à l'aide de mappages</h2>

    <p>Les paramètres constituent un moyen très efficace de permettre aux utilisateurs de spécifier des valeurs uniques ou sensibles à utiliser dans les propriétés de ressources d'une pile. Cependant, certains paramètres peuvent être spécifiques à une région ou difficiles à interpréter par les utilisateurs en raison d'autres conditions ou de dépendances. Dans ce cas, nous vous conseillons d'ajouter une logique dans le modèle lui-même, afin de permettre aux utilisateurs de spécifier des valeurs plus simples (ou aucune valeur du tout) pour obtenir les résultats souhaités. Dans un exemple précédent, nous avons codé en dur l'ID d'AMI pour la  ImageId  propriété de notre instance EC2. <span>Cela fonctionne très bien dans la région USA Est, qui représente l'AMI que nous voulons. Toutefois, si l'utilisateur tente de créer la pile dans une autre région, soit il recevra une AMI incorrecte, soit il n'en recevra pas du tout. (Les ID d'AMI sont spécifiques à une région. Autrement dit, le même ID d'AMI dans une autre région peut ne représenter aucune AMI ou représenter une AMI totalement différente.)</span> </p>
    <p>Pour éviter ce problème, vous devez trouver un moyen de spécifier l'ID d'AMI approprié en fonction d'une entrée conditionnelle (dans cet exemple, la région où la pile est créée). Deux fonctionnalités de modèle peuvent vous y aider : l'objet Mappings et le pseudo-paramètre <code class="code">AWS::Region</code>.</p>
    <p>Le <code class="code">AWS::Region</code> pseudo-paramètre est une valeur qui  CloudFormation  correspond à la région dans laquelle la pile est créée. Les pseudo-paramètres sont résolus  CloudFormation  lorsque vous créez la pile. Les mappages vous permettent d'utiliser une valeur d'entrée comme condition déterminant une autre valeur. Comme une instruction switch, un mappage associe un ensemble de valeurs à un autre. L'utilisation du paramètre <code class="code">AWS::Region</code> avec un mappage vous permet de garantir qu'un ID d'AMI approprié est spécifié pour la région. <span>Le modèle suivant contient un objet Mappings avec un nom  RegionMap  de mappage utilisé pour mapper un ID d'AMI à la région appropriée.</span></p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.mappings.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description": "Name of an existing EC2 KeyPair to enable SSH access to the instance",
      "Type": "String"
    }
  },
  "Mappings": <span>{</span>
    "RegionMap": <span>{</span>
      "us-east-1": <span>{</span>
        "AMI": "ami-76f0061f"
      },
      "us-west-1": <span>{</span>
        "AMI": "ami-655a0a20"
      },
      "eu-west-1": <span>{</span>
        "AMI": "ami-7fd4e10b"
      },
      "ap-southeast-1": <span>{</span>
        "AMI": "ami-72621c20"
      },
      "ap-northeast-1": <span>{</span>
        "AMI": "ami-8e08a38f"
      }
    }
  },
  "Resources": <span>{</span>
    "Ec2Instance": <span>{</span>
      "Type": "AWS::EC2::Instance",
      "Properties": <span>{</span>
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "ImageId": <span>{</span>
          "Fn::FindInMap": [
            "RegionMap",
            <span>{</span>
              "Ref": "AWS::Region"
            },
            "AMI"
          ]
        },
        "UserData": <span>{</span>
          "Fn::Base64": "80"
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.mappings.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: Name of an existing EC2 KeyPair to enable SSH access to the instance
    Type: String
Mappings:
  RegionMap:
    us-east-1:
      AMI: ami-76f0061f
    us-west-1:
      AMI: ami-655a0a20
    eu-west-1:
      AMI: ami-7fd4e10b
    ap-southeast-1:
      AMI: ami-72621c20
    ap-northeast-1:
      AMI: ami-8e08a38f
Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      KeyName: !Ref KeyName
      ImageId: !FindInMap 
        - RegionMap
        - !Ref 'AWS::Region'
        - AMI
      UserData: !Base64 '80'</code></pre>
    </div>
    <p>Dans le RegionMap, chaque région est mappée à une paire nom-valeur. La paire nom-valeur est une étiquette, et l'ID la valeur à mapper. Dans le RegionMap, l'AMI est l'étiquette et l'ID de l'AMI est la valeur. Pour utiliser une carte pour renvoyer une valeur, vous devez utiliser la FindInMap fonction <a href="./intrinsic-function-reference-findinmap.html">Fn : :</a>, en transmettant le nom de la carte, la valeur utilisée pour trouver la valeur mappée et l'étiquette de la valeur mappée que vous souhaitez renvoyer. <span> Dans l'exemple ci-dessus, la  ImageId  propriété de la ressource Ec2Instance utilise la FindInMap  fonction Fn : : pour déterminer sa valeur en spécifiant  RegionMap  comme carte à utiliser,  AWS::Region  comme valeur d'entrée à partir de laquelle mapper, et AMI comme étiquette pour identifier la valeur à mapper. Par exemple, si ce modèle était utilisé pour créer une pile dans la région USA Ouest (Californie du Nord), <code class="code">ImageId</code> indiquerait <code class="code">ami-655a0a20</code>.</span> </p>
    <div class="awsdocs-note awsdocs-tip"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Astuce</h6></div><div class="awsdocs-note-text"><p>Les pseudo-paramètres <code class="code">AWS::Region</code> vous permet d'obtenir la région où la pile est créée. Certaines ressources, telles que <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::InstanceAWS::AutoScaling::AutoScaling</a><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-group.html">Grouper</a> et <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-elb.html">AWS::ElasticLoadBalancing::LoadBalancer</a>, possèdent une propriété qui spécifie les zones de disponibilité. Vous pouvez utiliser la <a href="./intrinsic-function-reference-getavailabilityzones.html">fonction Fn::GetAZs</a> pour obtenir la liste de toutes les zones de disponibilité dans une région.</p></div></div>
   
    <h2 id="gettingstarted.templatebasics.outputs">Valeurs construites et valeurs de sortie</h2>

    <p>Les paramètres et les mappages constituent un excellent moyen de transmettre ou de déterminer des valeurs spécifiques lors de la création de la pile. Toutefois, dans certains cas, la valeur d'un paramètre ou d'un autre attribut de ressource ne constitue qu'une partie de la valeur dont vous avez besoin. Par exemple, dans le fragment suivant du  WordPress  modèle, la fonction Fn : :Join construit la <code class="code">Target</code> sous-propriété de la propriété de la <code class="code">HealthCheck</code> <code class="code">ElasticLoadBalancer</code> ressource en concaténant le <code class="code">WebServerPort</code> paramètre avec d'autres chaînes littérales pour former la valeur requise.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Resources": <span>{</span>
    "ElasticLoadBalancer": <span>{</span>
      "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
      "Properties": <span>{</span>
        "AvailabilityZones": <span>{</span>
          "Fn::GetAZs": ""
        },
        "Instances": [
          <span>{</span>
            "Ref": "Ec2Instance1"
          },
          <span>{</span>
            "Ref": "Ec2Instance2"
          }
        ],
        "Listeners": [
          <span>{</span>
            "LoadBalancerPort": "80",
            "InstancePort": <span>{</span>
              "Ref": "WebServerPort"
            },
            "Protocol": "HTTP"
          }
        ],
        "HealthCheck": <span>{</span>
          "Target": <span>{</span>
            "Fn::Join": [
              "",
              [
                "HTTP:",
                <span>{</span>
                  "Ref": "WebServerPort"
                },
                "/"
              ]
            ]
          },
          "HealthyThreshold": "3",
          "UnhealthyThreshold": "5",
          "Interval": "30",
          "Timeout": "5"
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  ElasticLoadBalancer:
    Type: 'AWS::ElasticLoadBalancing::LoadBalancer'
    Properties:
      AvailabilityZones: !GetAZs ''
      Instances:
        - !Ref Ec2Instance1
        - !Ref Ec2Instance2
      Listeners:
        - LoadBalancerPort: '80'
          InstancePort: !Ref WebServerPort
          Protocol: HTTP
      HealthCheck:
        Target: !Join 
          - ''
          - - 'HTTP:'
            - !Ref WebServerPort
            - /
        HealthyThreshold: '3'
        UnhealthyThreshold: '5'
        Interval: '30'
        Timeout: '5'</code></pre>
    </div>
    <p>La fonction Fn::Join utilise deux paramètres, un délimiteur qui sépare les valeurs que vous voulez concaténer et un tableau de valeurs dans l'ordre dans lequel vous voulez qu'elles apparaissent. Dans l'exemple ci-dessus, la fonction Fn : :Join spécifie une chaîne vide comme délimiteur et HTTP :, la valeur du  WebServerPort  paramètre, et un caractère/comme valeurs à concaténer. Si  WebServerPort  elle avait une valeur de 8888, la propriété Target serait définie sur la valeur suivante :</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">HTTP:8888/</code></pre>
    <p>La fonction Fn::Join est également utile pour déclarer des valeurs de sortie de la pile. L'objet Outputs dans le modèle contient les déclarations des valeurs qui doivent être disponibles une fois que la pile est créée. Une sortie est un moyen pratique de capturer des informations importantes sur vos ressources ou vos paramètres d'entrée. Par exemple, dans le  WordPress  modèle, nous déclarons l'objet Outputs suivant.</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.json2">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Outputs": <span>{</span>
        "InstallURL": <span>{</span>
            "Value": <span>{</span>
                "Fn::Join": [
                    "",
                    [
                        "http://",
                        <span>{</span>
                            "Fn::GetAtt": [
                                "ElasticLoadBalancer",
                                "DNSName"
                            ]
                        },
                        "/wp-admin/install.php"
                    ]
                ]
            },
            "Description": "Installation URL of the WordPress website"
        },
        "WebsiteURL": <span>{</span>
            "Value": <span>{</span>
                "Fn::Join": [
                    "",
                    [
                        "http://",
                        <span>{</span>
                            "Fn::GetAtt": [
                                "ElasticLoadBalancer",
                                "DNSName"
                            ]
                        }
                    ]
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.yaml2">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Outputs:
  InstallURL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - ElasticLoadBalancer
          - DNSName
        - /wp-admin/install.php
    Description: Installation URL of the WordPress website
  WebsiteURL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - ElasticLoadBalancer
          - DNSName</code></pre>
    </div>
    <p>Chaque valeur de sortie possède un nom, un attribut Value qui contient la déclaration de la valeur renvoyée en tant que valeur de sortie et, le cas échéant, une description. Dans l'exemple précédent, InstallURL est la chaîne renvoyée par un appel de fonction Fn : :Join qui concatène http ://, le nom DNS de la ressource, et /wp-admin/install.php.  ElasticLoadBalancer La valeur de sortie ressemblerait à cela :</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">http://mywptests-elasticl-1gb51l6sl8y5v-206169572.<span>us-east-2</span>.elb.amazonaws.com/wp-admin/install.php</code></pre>
    <p>Dans le didacticiel Get Started, nous avons utilisé ce lien pour accéder facilement à la page d'installation du  WordPress  blog que nous avons créé.  CloudFormation génère les valeurs de sortie une fois la création de la pile terminée. Vous pouvez afficher les valeurs de sortie dans l'onglet Sorties de la console  CloudFormation ou en utilisant la commande <code class="code">aws cloudformation describe-stacks</code>.</p>
   
    <h2 id="gettingstarted.templatebasics.learnmore">Étapes suivantes</h2>

    <p>Nous venons de décrire les éléments de base d'un modèle et d'expliquer comment les utiliser. Voici ce que vous avez appris sur les modèles :</p>
    <div class="itemizedlist">
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>Déclaration de ressources et de leurs propriétés.</p>
      </li><li class="listitem">
        <p>Référencement d'autres ressources avec la fonction Ref et des attributs de ressources à l'aide de la Fn::GetAtt  fonction.</p>
      </li><li class="listitem">
        <p>Utilisation des paramètres pour permettre aux utilisateurs de spécifier des valeurs lors de la création de la pile et utilisation de contraintes afin de valider l'entrée de paramètre.</p>
      </li><li class="listitem">
        <p>Utilisation de mappages pour déterminer des valeurs conditionnelles.</p>
      </li><li class="listitem">
        <p>Utilisation la fonction Fn::Join pour construire des valeurs basées sur des paramètres, des attributs de ressources et d'autres chaînes.</p>
      </li><li class="listitem">
        <p>Utilisation des valeurs de sortie pour capturer des informations sur les ressources de la pile</p>
      </li></ul></div>
    <p>Nous n'avons pas abordé deux objets de premier niveau dans un modèle :  AWSTemplateFormatVersion  et la description.  AWSTemplateFormatVersion est simplement la version du format du modèle. Si vous ne le spécifiez pas,  CloudFormation  nous utiliserons la dernière version.</p>
    <p>La description est une chaîne JSON ou YAML valide. Cette description s'affiche dans la page Specify Parameters de l'assistant Create Stack. Pour plus d’informations, consultez <a href="./format-version-structure.html">Version de format</a> et <a href="./template-description-structure.html">Description</a>.</p>

    <p>Il existe d'autres fonctionnalités avancées de modèle et de pile. Voici la liste des celles qu'il est important de connaître :</p>
    <p><em>Attributs facultatifs</em> qui peuvent être utilisés avec n'importe quelle ressource :</p>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><a href="./aws-attribute-dependson.html">DependsOn Cet attribut</a> vous permet de spécifier qu'une ressource doit être créée après l'autre.</p>
      </li><li class="listitem">
        <p><a href="./aws-attribute-deletionpolicy.html">DeletionPolicy Cet attribut</a> vous permet de spécifier  CloudFormation  comment gérer la suppression d'une ressource.</p>
      </li><li class="listitem">
        <p>L'attribut <a href="./aws-attribute-metadata.html">Metadata</a> vous permet de spécifier des données structurées avec une ressource.</p>
      </li></ul></div>
    <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-stack.html"><em>AWS::CloudFormation::Stack</em></a>vous permet d'imbriquer une autre pile en tant que ressource dans votre modèle.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./GettingStarted.Walkthrough.html">Mise en route</div><div id="next" class="next-link" accesskey="n" href="./updating.stacks.walkthrough.html">Procédure de mise à jour d'une pile</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>