<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS CloudFormation meilleures pratiques - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="best-practices" /><meta name="default_state" content="best-practices" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html" /><meta name="description" content="Utilisez les meilleures pratiques pour une utilisation AWS CloudFormation plus efficace et plus sûre." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guide de l'utilisateur" /><meta name="abstract" content="Créez et gérez des déploiements AWS d'infrastructure de manière prévisible et répétée à l'aide de ce AWS CloudFormation guide de l'utilisateur." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guide de l'utilisateur" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guide de l'utilisateur" /><meta id="panorama-serviceConsolePage" value="AWS CloudFormation meilleures pratiques" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS CloudFormation meilleures pratiques - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionnement des ressources,configuration des ressources,gestion de l'infrastructure,CloudFormer,CloudFormation pile,CloudFormation stackset,CloudFormation modèle,jeu de modifications" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide de l'utilisateur",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS CloudFormation meilleures pratiques",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guide de l'utilisateur</a></div><div id="page-toc-src"><a href="#shortenfeedbackloop">Raccourcissement de la boucle de rétroaction pour améliorer la vitesse de diffusion</a><a href="#organizingstacks">Organisation des piles par cycle de vie et propriétaire</a><a href="#cross-stack">Utilisation de références entre piles pour exporter des ressources partagées</a><a href="#limits">Vérification des quotas pour tous les types de ressource</a><a href="#reuse">Réutilisation de modèles pour répliquer des piles dans plusieurs environnements</a><a href="#modules-reuse">Utiliser des modules pour réutiliser les configurations de ressources</a><a href="#parmtypes">Utiliser des AWStypes de paramètres spécifiques</a><a href="#parmconstraints">Utilisation de contraintes de paramètre</a><a href="#pseudoparameters">Utiliser des pseudoparamètres pour promouvoir la portabilité</a><a href="#cfninit">Utilisation d'AWS::CloudFormation::Init pour déployer des applications dans des instances Amazon Amazon EC2</a><a href="#helper-scripts">Utilisation des derniers scripts d'assistant</a><a href="#validate">Validation des modèles avant leur utilisation</a><a href="#donttouch">Gérez toutes les ressources de la pile via AWS CloudFormation</a><a href="#cfn-best-practices-changesets">Création de jeux de modification avant la mise à jour des piles</a><a href="#stackpolicy">Utilisation des politiques de pile</a><a href="#code">Utilisation des révisions de code et des contrôles de révision pour gérer les modèles</a><a href="#update-ec2-linux">Mettez à jour régulièrement vos instances Amazon EC2</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="best-practices">AWS CloudFormation meilleures pratiques</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Les meilleures pratiques sont des recommandations qui peuvent vous aider à l'utiliser de manière AWS CloudFormation plus efficace et plus sûre tout au long de son flux de travail. Découvrez comment planifier et organiser vos piles, comment créer des modèles qui décrivent vos ressources et les applications qui y sont exécutées, et comment gérer vos piles et leurs ressources. Les meilleures pratiques suivantes sont basées sur l'expérience réelle des  CloudFormation  clients actuels.</p><div class="variablelist">
     
     
     
  <dl>
      <dt><b><span class="term">Planification et organisation</span></b></dt>
      <dd>
        <div class="itemizedlist">
           
           
           
           
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p><a href="#shortenfeedbackloop">Raccourcissement de la boucle de rétroaction pour améliorer la vitesse de diffusion</a></p>
          </li><li class="listitem">
            <p><a href="#organizingstacks">Organisation des piles par cycle de vie et propriétaire</a></p>
          </li><li class="listitem">
            <p><a href="#cross-stack">Utilisation de références entre piles pour exporter des ressources partagées</a></p>
          </li><li class="listitem">
            <p><a href="./security-best-practices.html#use-iam-to-control-access">Utilisation du contrôle d'accès IAM</a></p>
          </li><li class="listitem">
            <p><a href="#reuse">Réutilisation de modèles pour répliquer des piles dans plusieurs environnements</a></p>
          </li><li class="listitem">
            <p><a href="#limits">Vérification des quotas pour tous les types de ressource</a>
            </p>
          </li><li class="listitem">
            <p><a href="#modules-reuse">Utiliser des modules pour réutiliser les configurations de ressources</a></p>
          </li></ul></div>
      </dd>
    
      <dt><b><span class="term">Création de modèles</span></b></dt>
      <dd>
        <div class="itemizedlist">
           
           
           
           
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p><a href="./security-best-practices.html#creds">N'incorporez pas d'informations d'identification dans vos modèles</a></p>
          </li><li class="listitem">
            <p><a href="#parmtypes">Utiliser des AWStypes de paramètres spécifiques</a></p>
          </li><li class="listitem">
            <p><a href="#parmconstraints">Utilisation de contraintes de paramètre</a></p>
          </li><li class="listitem">
            <p><a href="#pseudoparameters">Utiliser des pseudoparamètres pour promouvoir la portabilité</a></p>
          </li><li class="listitem">
            <p><a href="#cfninit">Utilisation d'AWS::CloudFormation::Init pour déployer des applications dans des instances Amazon Amazon EC2</a></p>
          </li><li class="listitem">
            <p><a href="#helper-scripts">Utilisation des derniers scripts d'assistant</a></p>
          </li><li class="listitem">
            <p><a href="#validate">Validation des modèles avant leur utilisation</a></p>
          </li></ul></div>
      </dd>
    
      <dt><b><span class="term">Gestion des piles</span></b></dt>
      <dd>
        <div class="itemizedlist">
           
           
           
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p><a href="#donttouch">Gérez toutes les ressources de la pile via AWS CloudFormation</a></p>
          </li><li class="listitem">
            <p><a href="#cfn-best-practices-changesets">Création de jeux de modification avant la mise à jour des piles</a></p>
          </li><li class="listitem">
            <p><a href="#stackpolicy">Utilisation des politiques de pile</a></p>
          </li><li class="listitem">
            <p><a href="./security-best-practices.html#cloudtrail">Utilisation d'AWS CloudTrail pour consigner les appels AWS CloudFormation</a></p>
          </li><li class="listitem">
            <p><a href="#code">Utilisation des révisions de code et des contrôles de révision pour gérer les modèles</a></p>
          </li><li class="listitem">
            <p><a href="#update-ec2-linux">Mettez à jour régulièrement vos instances Amazon EC2</a></p>
          </li></ul></div>
      </dd>
    </dl></div>
    <h2 id="shortenfeedbackloop">Raccourcissement de la boucle de rétroaction pour améliorer la vitesse de diffusion</h2>

    <p>Adoptez des pratiques et des outils qui vous aident à raccourcir la boucle de rétroaction pour votre infrastructure que vous décrivez à l'aide  CloudFormation  de modèles. Il s'agit notamment de procéder à un linting et à des tests précoces de vos modèles sur votre poste de travail ; vous pouvez ainsi détecter d'éventuels problèmes de syntaxe et de configuration avant même de soumettre vos contributions à un référentiel de code source. La détection précoce de ces problèmes permet d'éviter qu'ils atteignent les environnements formels du cycle de vie, tels que le développement, l'assurance qualité et la production. Cette approche de test précoce et d'interruption immédiate vous permet de réduire le temps d'attente pour le remaniement, de réduire les zones d'impact potentielles et d'accroître votre niveau de confiance dans la réussite des opérations de dimensionnement.</p>
    <p>Parmi les outils qui vous aident à adopter des pratiques rapides, citons le <a href="https://github.com/aws-cloudformation/cfn-lint" rel="noopener noreferrer" target="_blank"><span>AWS CloudFormation Linter (cfn-lint</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>) et les outils de ligne de commande. <a href="https://github.com/aws-ia/taskcat" rel="noopener noreferrer" target="_blank"><span>TaskCat</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-resource-specification.html">L'outil cfn-lint vous permet de valider vos  CloudFormation  modèles par rapport à laAWS CloudFormation spécification des ressources.</a> Il s'agit notamment de vérifier les valeurs valides des propriétés des ressources, ainsi que les meilleures pratiques. Des plugins de cfn-lint sont <a href="https://github.com/aws-cloudformation/cfn-lint#editor-plugins" rel="noopener noreferrer" target="_blank"><span>disponibles pour un certain nombre d'éditeurs de code</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> ; cela vous permet de visualiser les problèmes dans votre éditeur et d'obtenir des commentaires directs de l'outil Linter. Vous pouvez également choisir d'intégrer cfn-lint dans la configuration de votre référentiel de code source, afin de pouvoir valider les modèles lors de la validation de vos contributions. Pour plus d'informations, consultez la section <a href="https://aws.amazon.com/blogs/mt/git-pre-commit-validation-of-aws-cloudformation-templates-with-cfn-lint/" rel="noopener noreferrer" target="_blank"><span>Validation préalable des AWS CloudFormation modèles par Git avec cfn-lint</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Une fois que vous avez effectué votre linting initial et que vous avez résolu tous les problèmes que cfn-lint aurait pu soulever, vous pouvez tester vos modèles en créant des piles par programmation  TaskCat  dans les régions de votre choix. AWS TaskCatgénère également un rapport avec des notes de réussite ou d'échec pour chaque région que vous avez choisie.</p>
    <p><a href="https://catalog.workshops.aws/cfn101/en-US" rel="noopener noreferrer" target="_blank"><span>Pour une  step-by-step présentation pratique de la façon d'utiliser les deux outils pour raccourcir la boucle de rétroaction, suivez le <a href="https://catalog.workshops.aws/cfn101/en-US/basics/templates/linting-and-testing" rel="noopener noreferrer" target="_blank"><span>laboratoire de peluchage et de test</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> de l'AWS CloudFormation atelier.</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
   
    <h2 id="organizingstacks">Organisation des piles par cycle de vie et propriétaire</h2>

    <p>Utilisez le cycle de vie et la propriété de vos AWS ressources pour vous aider à décider quelles ressources doivent figurer dans chaque pile. Au départ, une pile peut suffire à contenir toutes vos ressources. Toutefois, à mesure que votre pile s'agrandit et se diversifie, sa gestion peut devenir longue et compliquée. En regroupant les ressources par cycle de vie et par propriétaire, les utilisateurs peuvent apporter des modifications à leur ensemble de ressources avec leurs propres processus et leur planification sans affecter les autres ressources.</p>
    <p>Par exemple, imaginez une équipe de développeurs et d'ingénieurs qui possèdent un site web hébergé dans des instances Auto Scaling derrière un équilibreur de charge. Comme le site web a son propre cycle de vie et qu'il est géré par l'équipe web, vous pouvez créer une pile pour le site web et ses ressources. Imaginez maintenant que le site web utilise également des bases de données principales, qui se trouvent dans une pile distincte où elles sont gérées par les administrateurs de base de données qui en sont également les propriétaires. Chaque fois que les membres de l'équipe web ou de l'équipe de base de données doivent mettre à jour leurs ressources, ils peuvent le faire sans affecter la pile de l'autre équipe. Si toutes les ressources étaient dans une seule pile, la coordination et la communication des mises à jour pourraient être difficiles.</p>
    <p>Pour plus d'informations sur l'organisation de vos piles, vous pouvez utiliser deux structures communes : une architecture multicouche et une architecture orientée services (SOA).</p>
    <p>Une architecture multicouche organise les piles dans plusieurs couches horizontales qui se chevauchent et où chaque couche dépend de la couche sous-jacente. Vous pouvez avoir une ou plusieurs piles dans chaque couche. Toutefois, les ressources AWS
des piles de chaque couche doivent avoir des cycles de vie et un propriétaire similaires.</p>
    <p>Avec une architecture orientée services, vous pouvez organiser les problématiques stratégiques d'une entreprise en portions gérables. Chacune de ces portions est un service dont l'objectif est clairement défini et qui représente une unité autonome de fonctionnalités. Vous pouvez mapper ces services avec des piles, où chaque pile a son propre cycle de vie et ses propriétaires. Ces services (piles) peuvent être reliés pour qu'ils puissent interagir les uns avec les autres.</p>
   
    <h2 id="cross-stack">Utilisation de références entre piles pour exporter des ressources partagées</h2>

    <p>Lorsque vous organisez vos AWS ressources en fonction du cycle de vie et de la propriété, vous souhaiterez peut-être créer une pile qui utilise des ressources se trouvant dans une autre pile. Vous pouvez coder en dur des valeurs ou utiliser des paramètres d'entrée pour transmettre les noms et les ID de ressources. Toutefois, ces méthodes peuvent rendre difficile la réutilisation de modèles ou accroître les traitements nécessaires à l'exécution d'une pile. Utilisez plutôt des références entre piles pour exporter les ressources d'une pile et ainsi les mettre à la disposition d'autres piles. Les piles peuvent utiliser les ressources exportées en les appelant à l'aide de la fonction <code class="code">Fn::ImportValue</code>.</p>
    <p>Par exemple, si vous disposez d'une pile de réseau constituée d'un VPC, d'un groupe de sécurité et d'un sous-réseau, et que vous souhaitez que toutes les applications web publiques utilisent ces ressources, vous devez exporter ces dernières. Toutes les piles dotées d'applications web publiques pourront ainsi les utiliser. Pour de plus amples informations, veuillez consulter <a href="./walkthrough-crossstackref.html">Procédure pas à pas : création de références à des sorties de ressources dans une autre pile AWS CloudFormation</a>.</p>
   
    <h2 id="limits">Vérification des quotas pour tous les types de ressource</h2>

    <p>Avant de lancer une pile, assurez-vous de pouvoir créer toutes les ressources que vous souhaitez sans atteindre les limites de votre AWS compte. Si vous atteignez une limite, vous ne  CloudFormation  créerez pas votre pile avec succès tant que vous n'aurez pas augmenté votre quota ou supprimé des ressources supplémentaires. Chaque service peut imposer des limites différentes que vous devez connaître avant de lancer une pile. Par exemple, par défaut, vous ne pouvez lancer que 2 000  CloudFormation  piles par région dans votre Compte AWS. Pour plus d'informations sur les limites et sur l'augmentation des limites par défaut, consultez <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html">service quotasAWS</a> dans <em>Références générales AWS</em>.</p>
   
    <h2 id="reuse">Réutilisation de modèles pour répliquer des piles dans plusieurs environnements</h2>

    <p>Une fois que les piles et les ressources sont configurées, vous pouvez réutiliser vos modèles afin de répliquer votre infrastructure dans plusieurs environnements. Par exemple, vous pouvez créer des environnements de développement, de test et de production afin de pouvoir tester les modifications avant de les migrer en production. Pour que les modèles soient réutilisables, recourez aux sections Parameters, Mappings et Conditions afin de personnaliser les piles lorsque vous les créez. Par exemple, pour vos environnements de développement, vous pouvez spécifier un type d'instance qui coûte moins cher que votre environnement de production, mais où toutes les autres configurations et tous les autres paramètres restent les mêmes. Pour plus d'informations sur les paramètres, les mappages et les conditions, consultez <a href="./template-anatomy.html">Anatomie du modèle</a>.</p>
   
    <h2 id="modules-reuse">Utiliser des modules pour réutiliser les configurations de ressources</h2>

    <p>A mesure que votre infrastructure s'agrandit, des tendances peuvent émerger où vous déclarez les mêmes composants dans chacun de vos modèles. Les <em>modules</em> vous permettent d'empaqueter des configurations de ressources pour les inclure dans les modèles de pile, de manière transparente, gérable et reproductible. Les modules peuvent encapsuler les configurations de service courantes et les bonnes pratiques en tant que blocs de création modulaires et personnalisables à inclure dans vos modèles de pile.</p>
    <p>Ces blocs de construction peuvent être destinés à une seule ressource, telle que les bonnes pratiques pour définir une instance Amazon Elastic Compute Cloud (Amazon EC2), ou à plusieurs ressources pour définir des modèles communs d'architecture d'application. Ces éléments de base peuvent être imbriqués dans d'autres modules, afin que vous puissiez regrouper vos meilleures pratiques dans des éléments de base de niveau supérieur.  CloudFormation les modules sont disponibles dans le <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/registry.html">CloudFormation registre</a>, vous pouvez donc les utiliser comme une ressource native. Lorsque vous utilisez un  CloudFormation  module, le modèle de module est développé dans le modèle de consommation, ce qui vous permet d'accéder aux ressources du module à l'aide d'un <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html">Ref</a> ou d'un <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html">Fn : : GetAtt</a>. Pour plus d'informations, consultez la section <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/modules.html">Modules</a>.</p>
   
    <h2 id="parmtypes">Utiliser des AWStypes de paramètres spécifiques</h2>

    <p>Si votre modèle nécessite des entrées pour AWSdes valeurs spécifiques existantes, telles que des identifiants Amazon Virtual Private Cloud existants ou un nom de paire de clés Amazon EC2, AWSutilisez des types de paramètres spécifiques. Par exemple, vous pouvez spécifier un paramètre en tant que type<code class="code">AWS::EC2::KeyPair::KeyName</code>, qui prend le nom d'une paire de clés existante qui se trouve dans votre AWS compte et dans la région où vous créez la pile. AWS CloudFormation peut rapidement valider les valeurs pour des types de paramètres AWSspécifiques avant de créer votre pile. De plus, si vous utilisez la  CloudFormation  console, elle  CloudFormation  affiche une liste déroulante de valeurs valides, de sorte que vous n'avez pas à rechercher ou à mémoriser les identifiants VPC ou les noms de paires de clés corrects. Pour de plus amples informations, veuillez consulter <a href="./parameters-section-structure.html">Paramètres</a>.</p>
   
    <h2 id="parmconstraints">Utilisation de contraintes de paramètre</h2>

    <p>Avec les contraintes, vous pouvez décrire les valeurs d'entrée autorisées afin  CloudFormation  de détecter toute valeur non valide avant de créer une pile. Vous pouvez définir des contraintes comme une longueur minimale, une longueur maximale et des modèles autorisés. Par exemple, vous pouvez définir des contraintes au niveau de la valeur du nom d'utilisateur d'une base de données, de sorte qu'elle contienne au moins huit caractères alphanumériques. Pour de plus amples informations, veuillez consulter <a href="./parameters-section-structure.html">Paramètres</a>.</p>
   
    <h2 id="pseudoparameters">Utiliser des pseudoparamètres pour promouvoir la portabilité</h2>

    <p>Vous pouvez utiliser des <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/pseudo-parameter-reference.html">pseudo-paramètres</a> dans vos modèles comme arguments pour des <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference.html">fonctions intrinsèques</a>, telles que <code class="code">Ref</code> et <code class="code">Fn::Sub</code>. Les pseudo-paramètres sont des paramètres prédéfinis par CloudFormation. Vous ne les déclarez pas dans le modèle. L'utilisation de pseudo-paramètres dans les fonctions intrinsèques augmente la portabilité de vos modèles de pile entre les régions et les comptes.</p>
    <p>Par exemple, imaginez que vous souhaitiez créer un modèle dans lequel, pour une propriété de ressource donnée, vous devez spécifier l'<a href="https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html">Amazon Resource Name</a> (ARN) d'une autre ressource existante. Dans ce cas, la ressource existante est une ressource <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html">AWS Systems Manager
Parameter Store</a> avec l'ARN suivant : <code class="code">arn:aws:ssm:us-east-1:111122223333:parameter/MySampleParameter</code>. Vous devrez adapter le <a href="https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html#arns-syntax">format ARN</a> à votre AWS partition cible, à votre région et à votre identifiant de compte. Au lieu de coder ces valeurs en dur, vous pouvez utiliser des pseudo-paramètres <code class="code">AWS::Partition</code>, <code class="code">AWS::Region</code> et <code class="code">AWS::AccountId</code> pour rendre votre modèle plus portable. Dans ce cas, l'exemple suivant vous montre comment concaténer des éléments d'un ARN avec :.  CloudFormation <code class="code">!Sub
        'arn:$<span>{</span>AWS::Partition}:ssm:$<span>{</span>AWS::Region}:$<span>{</span>AWS::AccountId}:parameter/MySampleParameter</code></p>
    <p>Pour un autre exemple, supposons que vous souhaitez utiliser <a href="./walkthrough-crossstackref.html">Procédure pas à pas : création de références à des sorties de ressources dans une autre pile AWS CloudFormation</a> pour faire référence aux sorties de ressources d'une autre  CloudFormation  pile. Dans cet exemple, supposons que vous avez créé un <a href="https://docs.aws.amazon.com/vpc/latest/userguide/configure-subnets.html">sous-réseau</a> pour votre VPC, puis que vous avez <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/outputs-section-structure.html">exporté</a> son identifiant pour l'utiliser avec d'autres piles du même compte et de la même région. Dans une autre pile, vous faites référence à la valeur exportée de l'ID de sous-réseau lorsque vous décrivez une instance Amazon EC2.</p>
    <p>Les exportations de pile doivent être uniques par compte et par région. Dans ce cas, vous pouvez donc utiliser le pseudo paramètre <code class="code">AWS::StackName</code> pour créer un préfixe pour votre exportation. Comme les noms de pile doivent également être uniques par compte et par région, l'utilisation de ce pseudo paramètre comme préfixe augmente la possibilité d'avoir un nom d'exportation unique, tout en promouvant une approche réutilisable dans les piles à partir desquelles vous exportez des valeurs. Vous pouvez également utiliser un préfixe de votre choix.</p>
    <p>Pour un exemple détaillé de l’utilisation du champ de sortie <code class="code">Export</code> et de la fonction intrinsèque <code class="code">Fn::ImportValue</code>, consultez <a href="./walkthrough-crossstackref.html">Procédure pas à pas : création de références à des sorties de ressources dans une autre pile AWS CloudFormation</a>.</p>
   
    <h2 id="cfninit">Utilisation d'<code class="code">AWS::CloudFormation::Init</code> pour déployer des applications dans des instances Amazon Amazon EC2</h2>

    <p>Lorsque vous lancez des piles, vous pouvez installer et configurer des applications logicielles sur des instances Amazon EC2 via le script d'assistant cfn-init et la ressource <code class="code">AWS::CloudFormation::Init</code>. Avec <code class="code">AWS::CloudFormation::Init</code>, vous pouvez décrire les configurations de votre choix au lieu de créer des scripts pour chaque étape de la procédure. Vous pouvez également mettre à jour les configurations sans avoir à recréer les instances. En cas de problème avec votre configuration,  CloudFormation génère des journaux que vous pouvez utiliser pour en déterminer la cause.</p>
    <p>Dans le modèle, spécifiez les états de l'installation et de la configuration dans la ressource <code class="code">AWS::CloudFormation::Init</code>. Pour voir une procédure qui décrit comment utiliser cfn-init et <code class="code">AWS::CloudFormation::Init</code>, veuillez consulter la rubrique <a href="./deploying.applications.html">Déploiement d'applications sur Amazon EC2 avec AWS CloudFormation</a>.</p>
   
    <h2 id="helper-scripts">Utilisation des derniers scripts d'assistant</h2>

    <p>Les <a href="./cfn-helper-scripts-reference.html">scripts d'assistant</a> sont régulièrement mis à jour. Veillez à inclure la commande suivante dans la propriété <code class="code">UserData</code> de votre modèle avant d'appeler les scripts d'assistant pour vous assurer que vos instances lancées obtiennent les derniers scripts d'assistant :</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">yum install -y aws-cfn-bootstrap</code></code></pre>
    <p>Pour plus d'informations sur les derniers scripts d'assistant, consultez <a href="./cfn-helper-scripts-reference.html">Référence des scripts d'assistant CloudFormation</a>.</p>
   
    <h2 id="validate">Validation des modèles avant leur utilisation</h2>

    <p>Avant d'utiliser un modèle pour créer ou mettre à jour une pile, vous pouvez l'utiliser  CloudFormation  pour le valider. La validation d'un modèle peut vous aider à détecter les erreurs de syntaxe et certaines erreurs sémantiques, telles que les dépendances circulaires, avant de  CloudFormation  créer des ressources. Si vous utilisez la  CloudFormation  console, celle-ci valide automatiquement le modèle une fois que vous avez spécifié les paramètres d'entrée. Pour l' CloudFormation API AWS CLI or, utilisez la <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/validate-template.html"><code class="code">aws cloudformation validate-template</code></a>commande ou <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_ValidateTemplate.html"><code class="code">ValidateTemplate</code></a>l'opération API.</p>
    <p>Lors de la validation,  CloudFormation  vérifiez d'abord si le modèle est un JSON valide. Si ce n'est pas le cas,  CloudFormation  vérifie si le modèle est dans un format YAML valide. Si les deux vérifications échouent,  CloudFormation  renvoie une erreur de validation du modèle.</p>
     
      <h3 id="validate-compliance">Valider les modèles pour la conformité des politiques de l'organisation</h3>
      <p>Vous pouvez également valider la conformité de votre modèle aux directives de la politique de l'organisation. AWS CloudFormation Guard (<code class="code">cfn-guard</code>) est un outil d'interface de ligne de commande (CLI) open source qui fournit un  policy-as-code  langage permettant de définir des règles permettant de vérifier les configurations de ressources requises et interdites. Il vous permet ensuite de valider vos modèles par rapport à ces règles. Par exemple, les administrateurs peuvent créer des règles pour garantir que les utilisateurs créent toujours des compartiments Amazon S3 chiffrés.</p>
      <p>Vous pouvez utiliser <code class="code">cfn-guard</code> soit localement lors de la modification des modèles, soit automatiquement dans le cadre d'un pipeline IC/DC pour arrêter le déploiement de ressources non conformes.</p>
      <p>En outre, <code class="code">cfn-guard</code> inclut une fonctionnalité qui vous permet d'extraire des règles à partir de  CloudFormation  modèles conformes existants. <code class="code">rulegen</code></p>
      <p>Pour plus d'informations, consultez le référentiel <a href="https://github.com/aws-cloudformation/cloudformation-guard" rel="noopener noreferrer" target="_blank"><span>cfn-guard</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> sur.  GitHub</p>
     
   
    <h2 id="donttouch">Gérez toutes les ressources de la pile via AWS CloudFormation</h2>

    <p>Après avoir lancé une pile, utilisez la  CloudFormation  <a href="https://console.aws.amazon.com/cloudformation/home" rel="noopener noreferrer" target="_blank"><span>console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, l'<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/">API</a> ou la <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/index.html">AWS CLI</a> pour mettre à jour les ressources de votre pile. N'apportez pas de modifications pour empiler des ressources à l'extérieur de CloudFormation. Cette approche peut générer un décalage entre le modèle de votre pile et l'état actuel de ses ressources, ce qui peut entraîner des erreurs si vous mettez à jour ou supprimez la pile. Pour de plus amples informations, veuillez consulter <a href="./updating.stacks.walkthrough.html">Procédure de mise à jour d'une pile</a>.</p>
   
    <h2 id="cfn-best-practices-changesets">Création de jeux de modification avant la mise à jour des piles</h2>

    <p>Les ensembles de modifications vous permettent de voir comment les modifications proposées à une pile peuvent avoir un impact sur vos ressources courantes avant de les implémenter.  CloudFormation n'apporte aucune modification à votre pile tant que vous n'avez pas exécuté l'ensemble de modifications, ce qui vous permet de décider de poursuivre les modifications proposées ou de créer un autre ensemble de modifications.</p>
    <p>Utilisez les jeux de modification pour vérifier l'impact possible des modifications sur les ressources exécutées, notamment les ressources critiques. Par exemple, si vous modifiez le nom d'une instance de base de données Amazon RDS,  CloudFormation  vous créez une nouvelle base de données et supprimez l'ancienne ; vous perdrez les données de l'ancienne base de données à moins que vous ne les ayez déjà sauvegardées. Si vous générez un jeu de modification, vous verrez que la modification remplacera la base de données. Vous pouvez donc vous préparer à la mise à jour la pile en conséquence. Pour de plus amples informations, veuillez consulter <a href="./using-cfn-updating-stacks-changesets.html">Mise à jour des piles à l'aide de jeux de modifications</a>.</p>
   
    <h2 id="stackpolicy">Utilisation des politiques de pile</h2>

    <p>Les politiques de pile contribuent à protéger les ressources critiques d'une pile contre toute mise à jour accidentelle qui pourrait entraîner l'interruption des ressources, voire leur remplacement. Une politique de pile est un document JSON qui décrit les actions de mise à jour qui peuvent être effectuées au niveau des ressources désignées. Spécifiez une politique de pile chaque fois que vous créez une pile qui contient des ressources critiques.</p>
    <p>Pendant une mise à jour de la pile, vous devez spécifier explicitement les ressources protégées que vous souhaitez mettre à jour. Dans le cas contraire, aucune modification ne sera apportée aux ressources protégées. Pour de plus amples informations, veuillez consulter <a href="./protect-stack-resources.html">Empêcher les mises à jour des ressources de la pile</a>.</p>
   
    <h2 id="code">Utilisation des révisions de code et des contrôles de révision pour gérer les modèles</h2>

    <p>Vos modèles de pile décrivent la configuration de vos AWS ressources, telles que les valeurs de leurs propriétés. Pour passer en revue les modifications et pour conserver un historique précis de vos ressources, utilisez les révisions de code et les contrôles de révision. Ces méthodes vous permettent de suivre les modifications apportées entre différentes versions de vos modèles, ce qui peut vous aider à identifier les modifications apportées aux ressources de votre pile. En outre, en conservant un historique, vous pouvez toujours restaurer la pile sur la base d'une certaine version de votre modèle.</p>
   
    <h2 id="update-ec2-linux">Mettez à jour régulièrement vos instances Amazon EC2</h2>

    <p>Sur toutes vos instances Amazon EC2 Windows et les instances Amazon EC2 Linux créées  CloudFormation avec, exécutez régulièrement <code class="code">yum update</code> la commande pour mettre à jour le package RPM. Cela garantit que vous obtenez les derniers correctifs et mises à jour de sécurité.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./vpc-interface-endpoints.html">Points de terminaison d’un VPC (AWS PrivateLink)</div><div id="next" class="next-link" accesskey="n" href="./continuous-delivery-codepipeline.html">Livraison continue</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>