<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Résolution des problèmes CloudFormation - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="troubleshooting" /><meta name="default_state" content="troubleshooting" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" /><meta name="description" content="Résolvez les problèmes qui peuvent se produire lorsque vous créez, mettez à jour ou supprimez une pile AWS CloudFormation ." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guide de l'utilisateur" /><meta name="abstract" content="Créez et gérez des déploiements AWS d'infrastructure de manière prévisible et répétée à l'aide de ce AWS CloudFormation guide de l'utilisateur." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guide de l'utilisateur" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guide de l'utilisateur" /><meta id="panorama-serviceConsolePage" value="Résolution des problèmes CloudFormation" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Résolution des problèmes CloudFormation - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisionnement des ressources,configuration des ressources,gestion de l'infrastructure,CloudFormer,CloudFormation pile,CloudFormation stackset,CloudFormation modèle,jeu de modifications" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide de l'utilisateur",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Résolution des problèmes CloudFormation",
        "item" : "https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guide de l'utilisateur</a></div><div id="page-toc-src"><a href="#basic-ts-guide">Guide de dépannage</a><a href="#troubleshooting-errors">Résolution des erreurs</a><a href="#contacting-support">Contacter l'assistance</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="troubleshooting">Résolution des problèmes  CloudFormation</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Lors de l'utilisation AWS CloudFormation, vous pouvez rencontrer des problèmes lors de la création, de la mise à jour ou de la suppression de  CloudFormation piles. Les sections suivantes peuvent vous aider à résoudre les problèmes courants qui peuvent se poser.</p><p>Pour les questions d'ordre général CloudFormation, consultez les <a href="https://aws.amazon.com/cloudformation/faqs/" rel="noopener noreferrer" target="_blank"><span>AWS CloudFormation FAQ</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Vous pouvez également rechercher des réponses et publier des questions dans les <a href="https://forums.aws.amazon.com/forum.jspa?forumID=92" rel="noopener noreferrer" target="_blank"><span>forumsAWS CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p><div class="highlights" id="inline-topiclist"><h6>Rubriques</h6><ul><li><a href="#basic-ts-guide">Guide de dépannage</a></li><li><a href="#troubleshooting-errors">Résolution des erreurs</a></li><li><a href="#contacting-support">Contacter l'assistance</a></li></ul></div>
        <h2 id="basic-ts-guide">Guide de dépannage</h2>

        <p>Si AWS CloudFormation vous ne parvenez pas à créer, mettre à jour ou supprimer votre pile, vous pouvez consulter les messages d'erreur ou les journaux pour en savoir plus sur le problème. Les tâches suivantes décrivent les méthodes générales de résolution d'un  CloudFormation  problème. Pour plus d'informations sur des erreurs spécifiques et les solutions, consultez <a href="#troubleshooting-errors">Résolution des erreurs</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Utilisez la <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>console CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> pour consulter le statut de votre pile. Cette console vous permet de voir une liste des événements liés à une pile pendant que cette dernière est créée, mise à jour ou supprimée. Recherchez dans cette liste l'événement qui a échoué, puis consultez la raison du statut correspondant. La raison du statut peut contenir un message d'erreur provenant AWS CloudFormation ou provenant d'un service particulier qui peut vous aider à résoudre votre problème. Pour plus d'informations sur l'affichage des événements d'une pile, consultez <a href="./cfn-console-view-stack-data-resources.html">Affichage des données et des ressources de la AWS CloudFormation pile sur AWS Management Console</a>.</p>
            </li><li class="listitem">
                <p>Pour les problèmes Amazon EC2, affichez les journaux cloud-init et cfn. Ces journaux sont publiés dans le répertoire <code>/var/log/</code> de l'instance Amazon EC2. Ces journaux capturent les processus et les sorties de commandes lors AWS CloudFormation de la configuration de votre instance. Pour Windows, consultez le service EC2Configure dans <code>%ProgramFiles%\Amazon\EC2ConfigService</code>, EC2 Launch dans<code>%ProgramData%\Amazon\EC2-Windows\Launch\Logs</code>, EC2 Launch v2 dans <code>%ProgramData%\Amazon\EC2Launch\log</code> et les journaux cfn dans <code>C:\cfn\log</code>.</p>
                <p>Vous pouvez également configurer votre AWS CloudFormation modèle pour que les journaux soient publiés sur Amazon CloudWatch, qui affiche les journaux dans le AWS Management Console afin que vous n'ayez pas à vous connecter à votre instance Amazon EC2. Pour plus d'informations, consultez la section <a href="https://aws.amazon.com/blogs/devops/view-cloudformation-logs-in-the-console/" rel="noopener noreferrer" target="_blank"><span>Afficher  CloudFormation  les journaux dans la console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> dans le blog de gestion des applications.</p>
            </li></ul></div>
     
        <h2 id="troubleshooting-errors">Résolution des erreurs</h2>

        <p>Lorsque vous rencontrez les erreurs suivantes dans votre AWS CloudFormation pile, vous pouvez utiliser les solutions suivantes pour vous aider à trouver la source des problèmes et à les résoudre.</p>
        <div class="highlights" id="inline-topiclist"><h6>Rubriques</h6><ul><li><a href="#troubleshooting-errors-delete-stack-fails">Échec de la suppression de la pile</a></li><li><a href="#troubleshooting-errors-dependency-error">Erreur de dépendance</a></li><li><a href="#troubleshooting-errors-error-parsing-parameter-when-passing-a-list">Erreur d'analyse d'un paramètre lors de la transmission d'une liste</a></li><li><a href="#troubleshooting-errors-insufficient-iam-permissions">Autorisations IAM insuffisantes</a></li><li><a href="#troubleshooting-errors-invalid-value-or-unsupported-resource-property">Valeur non valide ou propriété de ressource non prise en charge</a></li><li><a href="#troubleshooting-errors-limit-exceeded">Quota dépassé</a></li><li><a href="#troubleshooting-errors-nested-stacks-are-stuck">Les piles imbriquées restent bloquées à l'état UPDATE_COMPLETE_CLEANUP_IN_PROGRESS, UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS ou UPDATE_ROLLBACK_IN_PROGRESS</a></li><li><a href="#troubleshooting-errors-no-updates-to-perform">Aucune mise à jour à effectuer</a></li><li><a href="#troubleshooting-resource-did-not-stabilize">La ressource n'a pas pu se stabiliser lors d'une opération de création, de mise à jour ou de suppression de pile</a></li><li><a href="#troubleshooting-errors-security-group-does-not-exist-in-vpc">Le groupe de sécurité n'existe pas dans le VPC</a></li><li><a href="#troubleshooting-errors-update-rollback-failed">Échec de la restauration de la mise à jour</a></li><li><a href="#troubleshooting-errors-wait-condition-didnt-receive-the-required-number-of-signals">La condition d'attente n'a pas reçu le nombre de signaux requis à partir d'une instance Amazon EC2</a></li><li><a href="#troubleshooting-errors-resource-removed-not-deleted">Ressource retirée de la pile mais non supprimée</a></li></ul></div>
         
            <h3 id="troubleshooting-errors-delete-stack-fails">Échec de la suppression de la pile</h3>

            <p>Pour résoudre ce problème, essayez la méthode suivante :</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                     
            <ul class="itemizedlist"><li class="listitem">
                    <p>Certaines ressources doivent être vides avant de pouvoir être supprimées. Par exemple, vous devez supprimer tous les objets d'un compartiment Amazon S3 ou supprimer toutes les instances d'un groupe de sécurité Amazon EC2 avant de pouvoir supprimer ce compartiment ou ce groupe de sécurité.</p>
                </li><li class="listitem">
                    <p>Vérifiez que vous disposez des autorisations IAM nécessaires pour supprimer les ressources de la pile. Outre AWS CloudFormation les autorisations, vous devez être autorisé à utiliser les services sous-jacents, tels qu'Amazon S3 ou Amazon EC2.</p>
                </li><li class="listitem">
                    <p>Lorsque les piles sont dans l'<code class="code">DELETE_FAILED</code>état où elles n'ont pas AWS CloudFormation
pu supprimer une ressource, réexécutez la suppression avec le <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DeleteStack.html"><code class="code">RetainResources</code></a>paramètre et spécifiez la ressource qui ne AWS CloudFormation peut pas être supprimée. AWS CloudFormation supprime la pile sans supprimer la ressource conservée. La conservation des ressources s'avère utile lorsque vous ne pouvez pas supprimer une ressource, telle qu'un compartiment S3 qui contient les objets que vous souhaitez conserver, mais que vous voulez supprimer la pile.</p>
                    <p>Après avoir supprimé la pile, vous pouvez supprimer manuellement les ressources conservées à l'aide du AWS service associé.</p>
                </li><li class="listitem">
                    <p>Vous ne pouvez pas supprimer des piles pour lesquelles la protection contre la résiliation est activée. Si vous essayez de supprimer une pile pour laquelle la protection contre la résiliation est activée, la suppression échoue et la pile, et son statut, restent inchangés. Désactivez la protection contre la résiliation sur la pile, puis effectuez à nouveau l'opération de suppression.</p>
                    <p>Cela concerne également les <a href="./using-cfn-nested-stacks.html">piles imbriquées</a> dont les piles racine sont protégées contre la résiliation. Désactivez la protection contre la résiliation sur la pile racine, puis effectuez à nouveau l'opération de suppression. Il est fortement recommandé de ne pas supprimer les piles imbriquées directement, mais de les supprimer uniquement dans le cadre de la suppression de la pile racine et de l'ensemble de ses ressources.</p>
                    <p>Pour de plus amples informations, veuillez consulter <a href="./using-cfn-protect-stacks.html">Protection d'une pile contre la suppression</a>.</p>
                </li><li class="listitem">
                        <p>Pour tous les autres problèmes, si vous en avez AWS Support, vous pouvez créer un AWS Support dossier. veuillez consulter <a href="#contacting-support">Contacter l'assistance</a>.</p>
                </li></ul></div>
         
         
            <h3 id="troubleshooting-errors-dependency-error">Erreur de dépendance</h3>

            <p>Pour résoudre une erreur de dépendance, ajoutez un attribut <code class="code">DependsOn</code> aux ressources qui dépendent d'autres ressources dans votre modèle. Dans certains cas, vous devez déclarer explicitement les dépendances afin de AWS CloudFormation pouvoir créer ou supprimer des ressources dans le bon ordre. Par exemple, si vous créez une adresse IP Elastic et un VPC avec une passerelle Internet dans la même pile, l'adresse IP Elastic dépend de l'association à cette passerelle Internet. Pour plus d’informations, consultez <a href="./aws-attribute-dependson.html">Attribut DependsOn</a>.</p>
         
         
            <h3 id="troubleshooting-errors-error-parsing-parameter-when-passing-a-list">Erreur d'analyse d'un paramètre lors de la transmission d'une liste</h3>

            <p>Lorsque vous utilisez le AWS Command Line Interface ou AWS CloudFormation pour transmettre une liste, ajoutez le caractère d'échappement (<code class="code">\</code>) avant chaque virgule. L'exemple suivant montre comment spécifier un paramètre d'entrée avec l' AWS CLI.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">ParameterKey=CIDR,ParameterValue='10.10.0.0/16\,10.10.0.0/24\,10.10.1.0/24'</code></pre>
         
         
            <h3 id="troubleshooting-errors-insufficient-iam-permissions">Autorisations IAM insuffisantes</h3>

            <p>Lorsque vous travaillez avec une AWS CloudFormation pile, vous avez non seulement besoin d'autorisations pour l'utiliser AWS CloudFormation, mais vous devez également avoir l'autorisation d'utiliser les services sous-jacents décrits dans votre modèle. Par exemple, si vous créez un compartiment Amazon S3 ou si vous lancez une instance Amazon EC2, vous devez être autorisé à accéder à Amazon S3 ou à Amazon EC2. Passez en revue votre politique IAM et vérifiez que vous disposez des autorisations nécessaires avant de travailler avec des AWS CloudFormation stacks. Pour plus d'informations, veuillez consulter <a href="./using-iam-template.html">Contrôler l'accès avec AWS Identity and Access Management</a>.</p>
         
         
            <h3 id="troubleshooting-errors-invalid-value-or-unsupported-resource-property">Valeur non valide ou propriété de ressource non prise en charge</h3>

            <p>Lorsque vous créez ou mettez à jour une AWS CloudFormation pile, celle-ci peut échouer en raison de paramètres d'entrée non valides, de noms de propriétés de ressources non pris en charge ou de valeurs de propriétés de ressource non prises en charge. Pour les paramètres d'entrée, vérifiez que la ressource existe. Par exemple, lorsque vous spécifiez une paire de clés Amazon EC2 ou un ID de VPC, la ressource doit exister dans votre compte et dans la région dans laquelle vous créez ou mettez à jour la pile. Pour vous assurer que les valeurs sont valides, vous pouvez utiliser les <a href="./parameters-section-structure.html#parameters-section-structure-syntax">types de paramètres</a> spécifiques à AWS.</p>
            <p>Pour les noms et les valeurs des propriétés de ressource, mettez à jour le modèle pour qu'il utilise des noms et des valeurs valides. Pour voir une liste de toutes les ressources et de leurs noms de propriété, consultez <a href="./aws-template-resource-type-ref.html">AWS référence aux types de ressources et de propriétés</a>.</p>
         
         
            <h3 id="troubleshooting-errors-limit-exceeded">Quota dépassé</h3>

            <p>Vérifiez que vous n'avez pas atteint un quota de ressource. Par exemple, le nombre maximal d'instances à la demande Amazon EC2 que vous pouvez lancer par défaut est de 5. Si vous essayez de créer plus d'instances à la demande Amazon EC2 que le quota défini dans votre compte, l'opération échoue et vous recevez l'erreur <code class="code">Status=start_failed</code>. Pour afficher les quotas AWS
par défaut et par service, veuillez consulter la rubrique <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html">AWS
service quotas</a> dans <em>Références générales AWS</em>.</p>
            <p>Pour les AWS CloudFormation quotas et les stratégies d'ajustement, voir. <a href="./cloudformation-limits.html">AWS CloudFormation quotas</a></p>
            <p>De même, lors d'une mise à jour, si une ressource est remplacée, une nouvelle ressource est AWS CloudFormation créée avant de supprimer l'ancienne. Ce remplacement pourrait entraîner le dépassement du quota de ressources associé à votre compte, ce qui provoquerait l'échec de la mise à jour. Vous pouvez supprimer des ressources inutilisées ou demander une <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html">augmentation de quota</a>.</p>
         
         
            <h3 id="troubleshooting-errors-nested-stacks-are-stuck">Les piles imbriquées restent bloquées à l'état <code class="code">UPDATE_COMPLETE_CLEANUP_IN_PROGRESS</code>, <code class="code">UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS</code> ou <code class="code">UPDATE_ROLLBACK_IN_PROGRESS</code></h3>

            <p>La restauration d'une pile imbriquée a échoué. En raison des dépendances potentielles entre les piles imbriquées, le nettoyage des ressources des piles imbriquées AWS CloudFormation ne commence pas tant que toutes les piles imbriquées n'ont pas été mises à jour ou annulées. Lorsqu'une pile imbriquée ne parvient pas à revenir en arrière, toutes les opérations sont AWS CloudFormation annulées, quel que soit l'état dans lequel se trouvent les autres piles imbriquées. Une pile imbriquée qui a terminé la mise à jour ou la restauration mais qui n'a pas reçu de signal indiquant de AWS CloudFormation commencer le nettoyage car une autre pile imbriquée n'a pas réussi à revenir en arrière est dans un état <code class="code">UPDATE_COMPLETE_CLEANUP_IN_PROGRESS</code> ou<code class="code">UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS</code>. Lorsqu'une pile imbriquée dont la mise a jour a échoué ne reçoit pas le signal pour commencer sa restauration, son état indique <code class="code">UPDATE_ROLLBACK_IN_PROGRESS</code>.</p>
            <p>Une pile imbriquée peut ne pas être annulée en raison de modifications apportées en dehors de AWS CloudFormation, lorsque le modèle de pile ne reflète pas exactement l'état de la pile. Une pile imbriquée peut également échouer si le délai d'expiration du signal pour son groupe Auto Scaling n'était pas suffisant lorsque ce dernier a été créé ou mis à jour.</p>
            <p>Pour réparer la pile, contactez <a href="#contacting-support">AWS Support</a>.</p>
         
         
            <h3 id="troubleshooting-errors-no-updates-to-perform">Aucune mise à jour à effectuer</h3>

            <p>Pour mettre à jour une AWS CloudFormation pile, vous devez soumettre des modifications de modèle ou de valeur de paramètre à AWS CloudFormation. Toutefois, certaines modifications du modèle AWS CloudFormation ne seront pas reconnues comme des mises à jour, telles que les modifications apportées à une politique de suppression, à une politique de mise à jour, à une déclaration de condition ou à une déclaration de sortie. Si vous avez besoin d'effectuer uniquement ces modifications, vous pouvez ajouter ou modifier les attributs de <a href="./aws-attribute-metadata.html">métadonnées</a> de vos ressources.</p>
            <p>Pour plus d'informations sur la modification de modèles pendant une mise à jour, consultez la page <a href="./using-cfn-updating-stacks-get-template.html">Modification d'un modèle de pile</a>.</p>
         
         
            <h3 id="troubleshooting-resource-did-not-stabilize">La ressource n'a pas pu se stabiliser lors d'une opération de création, de mise à jour ou de suppression de pile</h3>


            <p>Une ressource n'a pas répondu car l'opération a dépassé le AWS CloudFormation délai imparti ou parce qu'un AWS service a été interrompu. En cas d'interruption de service, <a href="https://status.aws.amazon.com/" rel="noopener noreferrer" target="_blank"><span>vérifiez</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> que le AWS service concerné est en cours d'exécution, puis réessayez l'opération de pile.</p>
            <p>Si les AWS services fonctionnent correctement, vérifiez si votre pile contient l'une des ressources suivantes :</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><code class="code">AWS::AutoScaling::AutoScalingGroup</code> pour les opérations de création, de mise à jour et de suppression</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::CertificateManager::Certificate</code> pour les opérations de création</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::CloudFormation::Stack</code> pour les opérations de création, de mise à jour et de suppression</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::ElasticSearch::Domain</code> pour les opérations de mise à jour</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::RDS::DBCluster</code> pour les opérations de création et de mise à jour</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::RDS::DBInstance</code> pour les opérations de création, de mise à jour et de suppression</p>
                </li><li class="listitem">
                    <p><code class="code">AWS::Redshift::Cluster</code> pour les opérations de mise à jour</p>
                </li></ul></div>

            <p>Pour ces ressources, les opérations peuvent prendre plus de temps que le délai d'expiration par défaut. Le délai d'expiration varie en fonction de la ressource et des informations d'identification que vous utilisez. Pour allonger le délai d'expiration, spécifiez un <a href="./using-iam-servicerole.html">rôle de service</a> au moment d'effectuer l'opération de pile. Si vous utilisez déjà un rôle de service ou si votre pile contient une ressource qui n'est pas répertoriée, contactez le <a href="#contacting-support">AWS Support</a>.</p>
            <p>Si votre pile indique l'état <code class="code">UPDATE_ROLLBACK_FAILED</code>, consultez <a href="#troubleshooting-errors-update-rollback-failed">Échec de la restauration de la mise à jour</a>.</p>

         
         
            <h3 id="troubleshooting-errors-security-group-does-not-exist-in-vpc">Le groupe de sécurité n'existe pas dans le VPC</h3>

            <p>Vérifiez que le groupe de sécurité se trouve dans le VPC que vous avez spécifié. Si tel est le cas, vérifiez que vous avez spécifié l'ID de groupe de sécurité, et pas le nom du groupe de sécurité. Par exemple, la ressource <code class="code">AWS::EC2::SecurityGroupIngress</code> possède les propriétés <code class="code">SourceSecurityGroupName</code> et <code class="code">SourceSecurityGroupId</code>. Pour les groupes de sécurité d'un VPC, vous devez utiliser la propriété <code class="code">SourceSecurityGroupId</code> et définir l'ID du groupe de sécurité.</p>
         
         
            <h3 id="troubleshooting-errors-update-rollback-failed">Échec de la restauration de la mise à jour</h3>

            <p>Une ressource dépendante ne parvient pas à rétablir son état d'origine, ce qui entraîne l'échec de la restauration (état <code class="code">UPDATE_ROLLBACK_FAILED</code>). Par exemple, la restauration a peut-être lieu dans une instance de base de données obsolète qui a été supprimée en dehors de AWS CloudFormation. Comme il AWS CloudFormation ne sait pas que la base de données a été supprimée, il suppose que l'instance de base de données existe toujours et tente d'y revenir, ce qui entraîne l'échec de l'annulation de la mise à jour.</p>
            <p>Selon l'origine du problème, vous pouvez corriger manuellement l'erreur et poursuivre la restauration. De cette façon, vous pourrez rétablir l'état de fonctionnement de la pile (état <code class="code">UPDATE_ROLLBACK_COMPLETE</code>), puis réessayer de mettre à jour la pile. La liste suivante décrit les solutions à des erreurs courantes qui entraînent l'échec de restauration d'une mise à jour :</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">Le nombre de signaux requis n'a pas été reçu</span></dt>
                            <dd>
                                <p>Utilisez la commande <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/signal-resource.html">signal-resource</a> pour envoyer manuellement le nombre de signaux de réussite requis à la ressource qui les attend, puis poursuivez la restauration de la mise à jour. Par exemple, pendant la restauration d'une mise à jour, les instances d'un groupe Auto Scaling ne parviennent pas toujours à signaler la réussite dans le délai spécifié. Dans ce cas, envoyez manuellement les signaux de réussite à ce groupe Auto Scaling. Lorsque vous poursuivez l'annulation de la mise à jour AWS CloudFormation , elle reçoit vos signaux et procède à la restauration.</p>
                            </dd>
                        </dl></div>
                </li><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">Les modifications apportées à une ressource ont été effectuées en dehors de AWS CloudFormation</span></dt>
                            <dd>
                                <p>Synchronisez manuellement les ressources pour qu'elles correspondent au modèle de la pile d'origine, puis poursuivez la restauration de la mise à jour. Par exemple, si vous avez supprimé manuellement une ressource à laquelle AWS CloudFormation vous tentez de revenir, vous devez créer manuellement cette ressource avec le même nom et les mêmes propriétés que dans la pile d'origine.</p>
                            </dd>
                        </dl></div>
                </li><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">Autorisations insuffisantes</span></dt>
                            <dd>
                                <p>Vérifiez que vous disposez des autorisations IAM suffisantes pour modifier des ressources, puis poursuivez la restauration de la mise à jour. Par exemple, votre politique IAM peut vous permettre de créer un compartiment S3, mais pas de le modifier. Ajoutez les actions de modification à votre politique.</p>
                            </dd>
                        </dl></div>
                </li><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">Jeton de sécurité non valide</span></dt>
                            <dd>
                                <p>AWS CloudFormation nécessite un nouveau jeu d'informations d'identification. Aucune modification n'est requise. Continuez à restaurer la mise à jour, ce qui actualisera les informations d'identification.</p>
                            </dd>
                        </dl></div>
                </li><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">Erreur de limitation</span></dt>
                            <dd>
                                <p>Supprimez les ressources dont vous n'avez pas besoin ou demandez une <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html">augmentation de quota</a>, puis poursuivez la restauration de la mise à jour. Par exemple, si le quota du nombre d'instances à la demande EC2 s'élève à 5 pour votre compte et si la restauration de la mise à jour dépasse cette valeur, elle échouera.</p>
                            </dd>
                        </dl></div>
                </li><li class="listitem">
                    <div class="variablelist">
                         
                    <dl>
                            <dt><span class="term">La ressource ne s'est pas stabilisée</span></dt>
                            <dd>
                                <p>Une ressource n'a pas répondu car l'opération a peut-être dépassé le AWS CloudFormation délai d'expiration ou parce qu'un AWS service a peut-être été interrompu. Aucune modification n'est requise. Une fois que l'opération sur la ressource est terminée ou que le AWS service est de nouveau opérationnel, continuez à annuler la mise à jour.</p>
                            </dd>
                        </dl></div>
                </li></ul></div>
            <p>Pour continuer à annuler une mise à jour, vous pouvez utiliser la AWS CloudFormation console ou l'interface de ligne de AWS commande (AWS CLI). Pour de plus amples informations, veuillez consulter <a href="./using-cfn-updating-stacks-continueupdaterollback.html">Poursuite de la restauration d'une mise à jour</a>.</p>
            <p>Si aucune de ces solutions ne fonctionne, vous pouvez ignorer les ressources qui ne AWS CloudFormation peuvent pas être restaurées avec succès. Pour plus d'informations, consultez le <code class="code">ResourcesToSkip</code> paramètre de fonctionnement de l'<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_ContinueUpdateRollback.html"><code class="code">ContinueUpdateRollback</code></a>API dans le Guide de <em>référence desAWS CloudFormation API</em>. AWS CloudFormation définit le statut des ressources spécifiées sur <code class="code">UPDATE_COMPLETE</code> et continue de faire reculer la pile. Une fois la restauration terminée, l'état des ressources ignorées ne correspond pas à celui des ressources contenues dans le modèle de pile. Avant de procéder à une autre mise à jour de pile, vous devez modifier les ressources ou mettre à jour la pile de façon à les rendre cohérentes les unes par rapport aux autres. A défaut, les futures mises à jour de la pile risquent d'échouer et votre pile sera irrécupérable.</p>
         
         
            <h3 id="troubleshooting-errors-wait-condition-didnt-receive-the-required-number-of-signals">La condition d'attente n'a pas reçu le nombre de signaux requis à partir d'une instance Amazon EC2</h3>

            <p>Pour résoudre ce problème, essayez la méthode suivante :</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Assurez-vous que les scripts d' AWS CloudFormation assistance sont installés sur l'AMI que vous utilisez. Si l'AMI n'inclut pas les scripts d'assistant, vous pouvez également les télécharger dans votre instance. Pour de plus amples informations, veuillez consulter <a href="./cfn-helper-scripts-reference.html">Référence des scripts d'assistant CloudFormation</a>.</p>
                </li><li class="listitem">
                    <p>Vérifiez que la commande <code class="code">cfn-signal</code> a été correctement exécutée au niveau de l'instance. Vous pouvez consulter des journaux, comme <code>/var/log/cloud-init.log</code> ou <code>/var/log/cfn-init.log</code>, afin de vous aider à déboguer le lancement de l'instance. Vous pouvez récupérer les journaux en vous connectant à votre instance, mais vous devez <a href="./cfn-console-add-tags.html">désactiver le rollback en cas d'échec</a>, sinon AWS CloudFormation supprimer l'instance une fois que votre pile n'est pas créée. Vous pouvez également <a href="https://aws.amazon.com/blogs/devops/view-cloudformation-logs-in-the-console/" rel="noopener noreferrer" target="_blank"><span>publier les journaux</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> sur Amazon CloudWatch. Pour Windows, vous pouvez consulter les journaux cfn dans <code>C:\cfn\log</code> et les journaux du service EC2Config dans <code>%ProgramFiles%\Amazon\EC2ConfigService</code>.</p>
                </li><li class="listitem">
                    <p>Vérifiez que l'instance est connectée à Internet. Si l'instance se trouve dans un VPC, elle doit être pouvoir se connecter à Internet via un périphérique NAT (si elle se trouve dans un sous-réseau privé) ou via une passerelle Internet (s'il s'agit d'un sous-réseau public). Pour tester la connexion Internet de l'instance, essayez d'accéder à une page web publique, tel que <code class="code">http://aws.amazon.com</code>. Par exemple, vous pouvez exécuter la commande suivante au niveau de l'instance. Elle doit retourner un code d'état HTTP 200.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">curl -I https://aws.amazon.com</code></code></pre>
                    <p>Pour obtenir des informations sur la configuration d'un périphérique NAT, consultez <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat.html">NAT</a> dans le <em>Amazon VPC Guide de l'utilisateur</em>.</p>
                </li></ul></div>
         
         
            <h3 id="troubleshooting-errors-resource-removed-not-deleted">Ressource retirée de la pile mais non supprimée</h3>
            <p>Lors d'une mise à jour de pile,  CloudFormation  a supprimé une ressource d'une pile mais ne l'a pas supprimée. La ressource existe toujours mais n'est plus accessible via  CloudFormation. Cela peut se produire lors des mises à jour de pile où :</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>CloudFormation doit remplacer une ressource existante. Il crée donc d'abord une nouvelle ressource, puis tente de supprimer l'ancienne ressource.</p>
                </li><li class="listitem">
                    <p>Vous avez retiré la ressource du modèle de pile, de sorte que  CloudFormation tente de supprimer la ressource de la pile.</p>
                </li></ul></div>
            <p>Cependant, il peut arriver que  CloudFormation  vous ne puissiez pas supprimer la ressource. Par exemple, si l'utilisateur ne dispose pas des autorisations nécessaires pour supprimer une ressource d'un type donné.</p>
            <p>CloudFormation tente de supprimer l'ancienne ressource à trois reprises. S'il n'est pas  CloudFormation  possible de supprimer l'ancienne ressource, elle est supprimée de la pile et continue de mettre à jour la pile. Lorsque la mise à jour de la pile est terminée,  CloudFormation  un événement de <code class="code">UPDATE_COMPLETE</code> pile est émis, mais inclut un événement indiquant <code class="code">StatusReason</code> qu'une ou plusieurs ressources n'ont pas pu être supprimées.  CloudFormation émet également un <code class="code">DELETE_FAILED</code> événement pour la ressource spécifique, avec un correspondant <code class="code">StatusReason</code> fournissant plus de détails sur les raisons de l' CloudFormation échec de la suppression de la ressource.</p>
            <p>Pour résoudre ce problème, supprimez la ressource directement à l'aide de la console ou de l'API pour le service sous-jacent.</p>
         
     
        <h2 id="contacting-support">Contacter l'assistance</h2>

        <p>Si c'est le cas AWS Support, vous pouvez créer un dossier de support technique sur <a href="https://console.aws.amazon.com/support/home#/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/support/home#/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Avant de contacter l'assistance, collectez les informations suivantes :</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>ID de la pile. Vous trouverez l'ID de la pile dans l'onglet <b>Présentation</b> de la <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>consoleAWS CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Pour de plus amples informations, veuillez consulter <a href="./cfn-console-view-stack-data-resources.html">Affichage des données et des ressources de la AWS CloudFormation pile sur AWS Management Console</a>.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>N'apportez pas de modifications à la pile en dehors de AWS CloudFormation. Apporter des modifications à votre pile en dehors de AWS CloudFormation celle-ci peut la mettre dans un état irrécupérable.</p></div></div>
            </li><li class="listitem">
                <p>Messages d'erreur associés à la pile. Pour découvrir comment accéder aux messages d'erreur de la pile, consultez <a href="#basic-ts-guide">Guide de dépannage</a>.</p>
            </li><li class="listitem">
                <p>Pour les problèmes Amazon EC2, collectez les journaux cloud-init et cfn. Ces journaux sont publiés dans le répertoire <code>/var/log/</code> de l'instance Amazon EC2. Ces journaux capturent les processus et les sorties de commande lors de la configuration de l'instance. Pour Windows, regroupez les journaux du service EC2Configure et les journaux cfn dans <code>%ProgramFiles%\Amazon\EC2ConfigService</code> et <code>C:\cfn\log</code>.</p>
            </li></ul></div>
        <p>Vous pouvez également rechercher des réponses et publier des questions dans les <a href="https://forums.aws.amazon.com/forum.jspa?forumID=92" rel="noopener noreferrer" target="_blank"><span>forumsAWS CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./example_cross_ApiGatewayDataTracker_section.html">Créer une API REST pour suivre les données de la COVID-19</div><div id="next" class="next-link" accesskey="n" href="./ReleaseHistory.html">Historique de versions</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/troubleshooting.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>