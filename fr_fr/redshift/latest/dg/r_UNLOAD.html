<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>UNLOAD - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_UNLOAD" /><meta name="default_state" content="r_UNLOAD" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html" /><meta name="description" content="Décharge le résultat d’une requête dans un ou plusieurs fichiers sur Amazon Simple Storage Service (Amazon S3)." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt de données avec Amazon Redshift, service d’entrepôt de données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_UNLOAD.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_UNLOAD.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_UNLOAD.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_UNLOAD.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_UNLOAD.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_UNLOAD.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_UNLOAD.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_UNLOAD.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_UNLOAD.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_UNLOAD.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_UNLOAD.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_UNLOAD.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_UNLOAD.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_UNLOAD.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_UNLOAD.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_UNLOAD.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="UNLOAD" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>UNLOAD - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_UNLOAD" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt de données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Référence SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Commandes SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "UNLOAD",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_UNLOAD" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="page-toc-src"><a href="#r_UNLOAD-permissions">Privilèges et autorisations nécessaires</a><a href="#r_UNLOAD-synopsis">Syntaxe</a><a href="#unload-parameters">Paramètres</a><a href="#unload-usage-notes">Notes d’utilisation</a><a href="#r_UNLOAD-examples">Exemples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="r_UNLOAD">UNLOAD</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Décharge le résultat d’une requête dans un ou plusieurs fichiers texte, JSON ou Apache Parquet dans Amazon S3, à l’aide d’un chiffrement côté serveur Amazon S3 (SSE-S3). Vous pouvez également spécifier un chiffrement côté serveur avec une clé AWS Key Management Service (SSE-KMS) ou un chiffrement côté client avec une clé gérée par le client.</p><p>Par défaut, le fichier déchargé est au format texte délimité par une barre verticale ( <code class="code">|</code> ).</p><p>Vous pouvez gérer la taille des fichiers sur Amazon S3 et, par extension, le nombre de fichiers, en définissant le paramètre MAXFILESIZE. Assurez-vous que les plages d’adresses IP S3 sont ajoutées à votre liste des autorisations. Pour plus d’informations sur les plages d’adresses IP S3 requises, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/security-network-isolation.html#network-isolation">Isolement de réseau</a>.</p><p>Vous pouvez transférer les résultats d’une requête Amazon Redshift vers le lac de données Amazon S3 dans Apache Parquet, un format de stockage en colonnes ouvert et efficace dédié à l’analyse. Le format Parquet est jusqu’à deux fois plus rapide à décharger et consomme jusqu’à six fois mois de stockage dans Amazon S3, en comparaison avec les formats texte. Cela vous permet de sauvegarder la transformation et l’enrichissement des données que vous avez faits dans Amazon S3 dans votre lac de données Amazon S3 dans un format ouvert. Vous pouvez ensuite analyser vos données avec Redshift Spectrum et d'autres AWS services tels qu'Amazon Athena, Amazon EMR et Amazon.  SageMaker </p><p>Pour en savoir plus sur l’utilisation de la commande UNLOAD et pour voir des exemples de scénarios, consultez <a href="./c_unloading_data.html">Déchargement des données</a>.</p>
         <h2 id="r_UNLOAD-permissions">Privilèges et autorisations nécessaires</h2>
         <p>Pour que la commande UNLOAD aboutisse, il est nécessaire de disposer au moins du privilège SELECT sur les données de la base de données, ainsi que de l’autorisation d’écrire à l’emplacement Amazon S3. Les autorisations nécessaires sont similaires à celles de la commande COPY. Pour en savoir plus sur les autorisations de la commande COPY, consultez <a href="./copy-usage_notes-access-permissions.html">Autorisations d’accès aux autres ressources AWS</a>.</p>
       
         <h2 id="r_UNLOAD-synopsis">Syntaxe</h2>
         
         
         
         
         
         
         
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">UNLOAD ('<em>select-statement</em>')
TO '<em>s3://object-path/name-prefix</em>'
<em>authorization</em>
[ <em>option</em>, ...] 

where <em>authorization</em> is
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;Compte AWS-id-1&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>[,arn:aws:iam::<code class="replaceable">&lt;Compte AWS-id-2&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>][,...]' }
            
where <em>option</em> is
| [ FORMAT [ AS ] ] CSV | PARQUET | JSON
| PARTITION BY ( <em>column_name</em> [, ... ] ) [ INCLUDE ]
| MANIFEST [ VERBOSE ]
| HEADER
| DELIMITER [ AS ] '<em>delimiter-char</em>'
| FIXEDWIDTH [ AS ] '<em>fixedwidth-spec</em>'
| ENCRYPTED [ AUTO ]
| BZIP2
| GZIP
| ZSTD
| ADDQUOTES
| NULL [ AS ] '<em>null-string</em>'
| ESCAPE
| ALLOWOVERWRITE
| CLEANPATH
| PARALLEL [ <span>{</span> ON | TRUE } | <span>{</span> OFF | FALSE } ]
| MAXFILESIZE [AS] <em>max-size</em> [ MB | GB ]
| ROWGROUPSIZE [AS] <em>size</em> [ MB | GB ]
| REGION [AS] '<em>aws-region</em>' }
| EXTENSION '<em>extension-name</em>'

</code></pre>
       
         <h2 id="unload-parameters">Paramètres</h2>
         <div class="variablelist">
             
             
             
             
            
            
             
            
            
            
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
            
             
             
             
            
             
         <dl>
               <dt><span class="term">(’<em>instruction_select</em>’) </span></dt>
               <dd>
                  <p>Requête SELECT. Les résultats de la requête sont déchargés. Dans la plupart des cas, il est utile de décharger les données dans un ordre trié en spécifiant une clause ORDER BY dans la requête. Cette approche économise le temps nécessaire au tri des données lors de leur rechargement. </p>
                  <p>La requête doit être placée entre guillemets simples comme illustré ci-après : </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">('select * from venue order by venueid')</code></pre>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Si votre requête contient des guillemets (par exemple pour insérer les valeurs littérales), placez le littéral entre deux ensembles de guillemets simples. Vous devez également joindre la requête entre guillemets simples : </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">('select * from venue where venuestate=''NV''')</code></pre></div></div>
               </dd>
             
               <dt><span class="term">TO ’s3://<em>object-path/name-prefix</em>’ </span></dt>
               <dd>
                  <p>Chemin complet, incluant le nom du compartiment, vers l’emplacement dans Amazon S3 où Amazon Redshift écrit les objets de fichier de sortie, y compris le fichier manifeste si MANIFEST est spécifié. Les noms d’objet sont préfixés par <em>name-prefix</em>. Si vous utilisez <code class="code">PARTITION BY</code>, une barre oblique (/) est automatiquement ajoutée à la fin de la valeur <em>name-prefix</em> si nécessaire. Pour plus de sécurité, UNLOAD se connecte à Amazon S3 via une connexion HTTPS. Par défaut, UNLOAD écrit un ou plusieurs fichiers par tranche. UNLOAD ajoute un numéro de tranche et un numéro de partie au préfixe du nom spécifié comme suit :</p>
                  <p><code class="code"><code class="replaceable">&lt;object-path&gt;</code>/<code class="replaceable">&lt;name-prefix&gt;</code><code class="replaceable">&lt;slice-number&gt;</code>_part_<code class="replaceable">&lt;part-number&gt;</code></code>. </p>
                  <p>Si MANIFEST est spécifié, le fichier manifeste est écrit comme suit :</p>
                  <p><code class="code"><code class="replaceable">&lt;object_path&gt;</code>/<code class="replaceable">&lt;name_prefix&gt;</code>manifest</code>. </p>
                  <p>Si PARALLEL est défini sur OFF, les fichiers de données sont écrits comme suit :</p>
                  <p><code class="code"><code class="replaceable">&lt;object_path&gt;</code>/<code class="replaceable">&lt;name_prefix&gt;</code><code class="replaceable">&lt;part-number&gt;</code></code>. </p>
                  <p>UNLOAD crée automatiquement les fichiers chiffrés à l’aide du chiffrement côté serveur Amazon S3, dont le fichier manifeste si MANIFEST est utilisé. La commande COPY lit automatiquement les fichiers chiffrés côté serveur pendant l’opération de chargement. Vous pouvez télécharger en toute transparence les fichiers chiffrés côté serveur à partir de votre compartiment à l’aide de la console de gestion ou de l’API Amazon S3. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/serv-side-encryption.html">Protection des données à l’aide du chiffrement côté serveur</a>. </p>
                  <p>Pour utiliser le chiffrement côté client Amazon S3, spécifiez l’option ENCRYPTED.</p>
                  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>La commande REGION est obligatoire lorsque le compartiment Amazon S3 ne se trouve pas dans la même Région AWS que la base de données Amazon Redshift. </p></div></div>
               </dd>
             
               <dt><span class="term"><em>authorization</em></span></dt>
               <dd>
                  <p>La commande UNLOAD a besoin de l’autorisation d’écrire des données dans Amazon S3. La commande UNLOAD utilise les mêmes paramètres que ceux utilisés par la commande COPY pour l’autorisation. Pour plus d’informations, consultez <a href="./copy-parameters-authorization.html">Paramètres d’autorisation</a> dans la référence de syntaxe de la commande COPY.</p>
               </dd>
             
               <dt id="unload-iam"><span class="term">IAM_ROLE <span>{</span> default | ’arn:aws:iam::<code class="replaceable">&lt;Compte AWS-id-1&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>’ </span></dt>
               <dd>
                  <p>Utilisez le mot clé par défaut pour qu’Amazon Redshift utilise le rôle IAM défini comme rôle par défaut et associé au cluster lorsque la commande UNLOAD est exécutée.</p>
                  <p>Utilisez l’Amazon Resource Name (ARN) d’un rôle IAM que votre cluster utilise pour l’authentification et l’autorisation. Si vous spécifiez IAM_ROLE, vous ne pouvez pas utiliser ACCESS_KEY_ID et SECRET_ACCESS_KEY, SESSION_TOKEN ni CREDENTIALS. IAM_ROLE peut être chaîné. Pour en savoir plus, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html#authorizing-redshift-service-chaining-roles">Chaînage des rôles IAM</a> dans le <em>Guide de gestion Amazon Redshift</em>.</p>
               </dd>
             
               <dt id="unload-csv"><span class="term">[ FORMAT [AS] ] CSV | PARQUET | JSON</span></dt>
               <dd>
                  <p>Mots-clés pour spécifier le format de déchargement qui remplace le format par défaut. </p>
                  <p>Lorsque CSV est utilisé, décharge vers un fichier texte au format CSV en utilisant une virgule (,) comme délimiteur par défaut. Si un champ contient des délimiteurs, des guillemets doubles, des sauts de ligne ou des retours chariot, le champ du fichier déchargé est placé entre des guillemets doubles. Un caractère de guillemets doubles dans un champ de données est échappé par un caractère de guillemets doubles supplémentaires. Quand aucune ligne n’est déchargée, Amazon Redshift peut écrire des objets Amazon S3 vides.</p>
                  <p>Lorsque PARQUET est utilisé, décharge dans un fichier au format Apache Parquet version 1.0. Par défaut, chaque groupe de lignes est compressé à l’aide de la compression SNAPPY. Pour plus d’informations sur le format Apache Parquet, voir <a href="https://parquet.apache.org/" rel="noopener noreferrer" target="_blank"><span>Parquet</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>
                  <p>En cas d’utilisation de JSON, le fichier est déchargé dans un fichier JSON dont chaque ligne contient un objet JSON, représentant un enregistrement complet dans le résultat de la requête. Amazon Redshift prend en charge l’écriture de JSON imbriqué lorsque le résultat de la requête contient des colonnes SUPER. Pour créer un objet JSON valide, le nom de chaque colonne de la requête doit être unique. Dans le fichier JSON, les valeurs booléennes sont déchargées en tant que <code class="code">t</code> ou <code class="code">f</code>, et les valeurs NULL sont déchargées en tant que <code class="code">null</code>. Quand aucune ligne n’est déchargée, Amazon Redshift n’écrit pas d’objets Amazon S3.</p>
                  <p>Les mots-clés FORMAT et AS sont facultatifs. Vous ne pouvez pas utiliser le format CSV avec FIXEDWIDTH ou ADDQUOTES. Vous ne pouvez pas utiliser PARQUET avec DELIMITER, FIXEDWIDTH, ADDQUOTES, ESCAPE, NULL AS, HEADER, GZIP, BZIP2 ou ZSTD. PARQUET avec ENCRYPTED n’est pris en charge qu’avec le chiffrement côté serveur avec une clé AWS Key Management Service (SSE-KMS). Vous ne pouvez pas utiliser JSON avec DELIMITER, HEADER, FIXEDWIDTH, ADDQUOTES, ESCAPE ou NULL AS.</p>
               </dd>
             
               <dt id="unload-partitionby"><span class="term">PARTITION BY (<em>nom_colonne</em> [, ... ]) [INCLUDE]</span></dt>
               <dd>
                  <p>Spécifie les clés de partition pour l’opération de déchargement. UNLOAD partitionne automatiquement les fichiers de sortie dans des dossiers de partition en fonction des valeurs de clé de partition, conformément à la convention Apache Hive. Par exemple, un fichier Parquet pour l’année de partition 2019 et le mois de septembre a le préfixe suivant : <code>s3://my_bucket_name/my_prefix/year=2019/month=September/000.parquet</code>. </p>
                  <p>La valeur de <em>nom_colonne</em> doit être une colonne dans les résultats de requête déchargés. </p>
                  <p>Si vous spécifiez PARTITION BY avec l’option Inclure, les colonnes de partition ne sont pas supprimées des fichiers déchargés. </p>

                  <p>Amazon Redshift ne prend pas en charge les littéraux de chaîne dans les clauses PARTITION BY.</p>


               </dd>
             
               <dt><span class="term">MANIFEST [ VERBOSE ]</span></dt>
               <dd>
                  <p>Crée un fichier manifeste qui répertorie explicitement les détails des fichiers de données créés par le processus UNLOAD. Le manifeste est un fichier texte au format JSON qui répertorie l’URL de chaque fichier écrit sur Amazon S3. </p>
                  <p>Si MANIFEST est spécifié avec l’option VERBOSE, le manifeste inclut les informations suivantes : </p>
                  <div class="itemizedlist">
                      
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Les noms des colonnes et les types de données, et pour les types de données CHAR, VARCHAR ou NUMERIC, les dimensions de chaque colonne. Pour les types de données CHAR et VARCHAR, la dimension est la longueur. Pour un type de données DECIMAL ou NUMERIC, les dimensions sont la précision et l’échelle. </p>
                     </li><li class="listitem">
                        <p>Le nombre de lignes déchargées dans chaque fichier. Si l’option HEADER est spécifiée, le nombre de lignes inclut la ligne d’en-tête. </p>
                     </li><li class="listitem">
                        <p>La taille de fichier totale de tous les fichiers déchargés et le nombre total de lignes déchargées dans tous les fichiers. Si l’option HEADER est spécifiée, le nombre de lignes inclut les lignes d’en-tête. </p>
                     </li><li class="listitem">
                        <p>L’auteur. L’auteur est toujours « Amazon Redshift ».</p>
                     </li></ul></div>
                  <p>Vous pouvez spécifier VERBOSE uniquement après MANIFEST. </p>
                  <p>Le fichier manifeste est écrit sur le même préfixe de chemin Amazon S3 que les fichiers de déchargement au format <code class="code">&lt;object_path_prefix&gt;manifest</code>. Par exemple, si UNLOAD spécifie le préfixe de chemin Amazon S3 « <code class="code">s3://mybucket/venue_</code> », l’emplacement du fichier manifeste est « <code class="code">s3://mybucket/venue_manifest</code> ».</p>
               </dd>
             
               <dt><span class="term">HEADER</span></dt>
               <dd>
                  <p>Ajoute une ligne d’en-tête contenant des noms de colonne au début de chaque fichier de sortie. Les options de transformation de texte, comme CSV, DELIMITER, ADDQUOTES et ESCAPE, s’appliquent également à la ligne d’en-tête. Vous ne pouvez pas utiliser HEADER avec FIXEDWIDTH.</p>
               </dd>
             
               <dt><span class="term">DELIMITER AS ’<em>caractère_délimiteur</em>’ </span></dt>
               <dd>
                  <p>Spécifie un caractère ASCII unique utilisé pour séparer les champs du fichier de sortie, tel qu’une barre verticale (|), une virgule (,) ou une tabulation (\t). Le délimiteur par défaut pour les fichiers texte est un caractère de barre verticale. Le délimiteur par défaut pour les fichiers CSV est un caractère de virgule. Le mot-clé AS est facultatif. Vous ne pouvez pas utiliser DELIMITER avec FIXEDWIDTH. Si les données contiennent le caractère délimiteur, vous devez spécifier l’option ESCAPE pour insérer une séquence d’échappement devant le délimiteur ou utiliser ADDQUOTES pour placer les données entre guillemets doubles. Vous pouvez également spécifier un délimiteur qui se ne trouve pas dans les données.</p>
               </dd>
             
               <dt><span class="term">FIXEDWIDTH ’<em>fixedwidth_spec</em>’ </span></dt>
               <dd>
                  <p>Décharge les données dans un fichier où la largeur de chaque colonne est une longueur fixe, plutôt que séparée par un délimiteur. <em>fixedwidth_spec</em> est une chaîne qui spécifie le nombre de colonnes et leur largeur. Le mot-clé AS est facultatif. Comme FIXEDWIDTH ne tronque pas les données, la spécification de chaque colonne dans l’instruction UNLOAD doit être au moins aussi longue que la longueur de l’entrée la plus longue de cette colonne. Le format de <em>fixedwidth_spec</em> est présenté ci-dessous : </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">'<em>colID1:colWidth1,colID2:colWidth2, ...</em>'</code></pre>
                  <p>Vous ne pouvez pas utiliser FIXEDWIDTH avec DELIMITER ou HEADER.</p>
               </dd>
             
               <dt id="unload-parameters-encrypted"><span class="term">ENCRYPTED [AUTO]</span></dt>
               <dd>
                  <p>Spécifie que les fichiers de sortie sur Amazon S3 sont chiffrés à l’aide d’un chiffrement côté serveur ou d’un chiffrement côté client Amazon S3. Si MANIFEST est spécifié, le fichier manifeste est également chiffré. Pour plus d'informations, consultez <a href="./t_unloading_encrypted_files.html">Déchargement de fichiers de données chiffrés</a>. Si le paramètre ENCRYPTED n’est pas spécifié, UNLOAD crée automatiquement des fichiers chiffrés à l’aide du chiffrement côté serveur Amazon S3 avec des clés de chiffrement gérées par AWS (SSE-S3). </p>
                  <p>Pour ENCRYPTED, vous pouvez décharger sur Amazon S3 en utilisant le chiffrement côté serveur avec une clé AWS KMS (SSE-KMS). Le cas échéant, utilisez le paramètre <a href="#unload-parameters-kms-key-id">KMS_KEY_ID</a> pour fournir l’ID de clé. Vous ne pouvez pas utiliser le paramètre <a href="./copy-parameters-authorization.html#copy-credentials">CREDENTIALS</a> avec le paramètre KMS_KEY_ID. Si vous exécutez une commande UNLOAD pour les données à l’aide de KMS_KEY_ID, vous pouvez effectuer une opération COPY pour les mêmes données sans spécifier de clé. </p>
                  <p>Pour décharger sur Amazon S3 à l’aide d’un chiffrement côté client avec une clé symétrique fournie par le client, spécifiez la clé de l’une des deux manières suivantes. Pour fournir la clé, utilisez le paramètre <a href="#unload-parameters-master-symmetric-key">MASTER_SYMMETRIC_KEY</a> ou la partie <code class="code">master_symmetric_key</code> d’une chaîne d’informations d’identification <a href="./copy-parameters-authorization.html#copy-credentials">CREDENTIALS</a>. Si vous déchargez des données à l’aide d’une clé symétrique racine, assurez-vous de fournir la même clé lorsque vous effectuez une opération COPY pour les données chiffrées. </p>
                  <p>UNLOAD ne prend pas en charge le chiffrement côté serveur Amazon S3 avec une clé fournie par le client (SSE-C). </p>
                  <p>Si l’option ENCRYPTED AUTO est utilisée, la commande UNLOAD récupère la clé de chiffrement AWS KMS par défaut sur la propriété du compartiment Amazon S3 cible et chiffre les fichiers écrits dans Amazon S3 avec la clé AWS KMS. Si le compartiment ne possède pas la clé de chiffrement AWS KMS par défaut, UNLOAD crée automatiquement des fichiers chiffrés à l’aide du chiffrement côté serveur Amazon Redshift avec des clés de chiffrement gérées par AWS (SSE-S3). Vous ne pouvez pas utiliser cette option avec KMS_KEY_ID, MASTER_SYMMETRIC_KEY ou CREDENTIALS contenant master_symmetric_key. </p>
               </dd>
             
               <dt id="unload-parameters-kms-key-id"><span class="term">KMS_KEY_ID ’<em>id_clé</em>’</span></dt>
               <dd>
                  <p>Spécifie l’ID d’une clé AWS Key Management Service (AWS KMS) à utiliser pour chiffrer les fichiers de données dans Amazon S3. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/kms/latest/developerguide/overview.html">Qu’est-ce que AWS Key Management Service ?</a> Si vous spécifiez KMS_KEY_ID, vous devez également spécifier le paramètre <a href="#unload-parameters-encrypted">ENCRYPTED</a>. Si vous spécifiez KMS_KEY_ID, vous ne pouvez pas utiliser le paramètre CREDENTIALS. Utilisez <a href="./copy-parameters-authorization.html#copy-iam-role">IAM_ROLE</a> ou <a href="./copy-parameters-authorization.html#copy-access-key-id">ACCESS_KEY_ID and SECRET_ACCESS_KEY</a> à la place. </p>

               </dd>
             
               <dt id="unload-parameters-master-symmetric-key"><span class="term">MASTER_SYMMETRIC_KEY ’<em>root_key</em>’</span></dt>
               <dd>
                  <p>La clé symétrique racine à utiliser pour chiffrer les fichiers de données sur Amazon S3. Si vous spécifiez MASTER_SYMMETRIC_KEY, vous devez également spécifier le paramètre <a href="#unload-parameters-encrypted">ENCRYPTED</a>. Vous ne pouvez pas utiliser la clé MASTER_SYMMETRIC_KEY avec le paramètre CREDENTIALS. Pour plus d'informations, consultez <a href="./c_loading-encrypted-files.html">Chargement de fichiers de données chiffrés à partir d’Amazon S3</a>. </p>
               </dd>
             
               <dt><span class="term">BZIP2 </span></dt>
               <dd>
                  <p>Décharge les données sur un ou plusieurs fichiers compressé bzip2 par tranche. Chaque fichier résultant est ajouté avec une extension <code class="code">.bz2</code>. </p>
               </dd>
             
               <dt><span class="term">GZIP </span></dt>
               <dd>
                  <p>Décharge les données sur un ou plusieurs fichiers compressé gzip par tranche. Chaque fichier résultant est ajouté avec une extension <code class="code">.gz</code>. </p>
               </dd>
             
               <dt><span class="term">ZSTD </span></dt>
               <dd>
                  <p>Décharge les données sur un ou plusieurs fichiers compressé Zstandard par tranche. Chaque fichier résultant est ajouté avec une extension <code class="code">.zst</code>. </p>
               </dd>
             
               <dt><span class="term">ADDQUOTES </span></dt>
               <dd>
                  <p>Place entre guillemets chaque champ de données déchargées, de telle sorte qu’Amazon Redshift puisse décharger les valeurs de données qui contiennent le délimiteur lui-même. Par exemple, si le délimiteur est une virgule, vous pouvez décharger et recharger les données suivantes avec succès : </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class=""> "1","Hello, World" </code></pre>
                  <p>Sans les guillemets ajoutés, la chaîne <code class="code">Hello, World</code> serait analysée comme deux champs distincts.</p>
                  <p>Certains formats de sortie ne prennent pas en charge ADDQUOTES.</p>
                  <p>Si vous utilisez ADDQUOTES, vous devez spécifier REMOVEQUOTES dans la commande COPY si vous rechargez les données.</p>
               </dd>
             
               <dt><span class="term">NULL AS ’<em>chaîne_null</em>’ </span></dt>
               <dd>
                  <p>Spécifie une chaîne qui représente une valeur null dans les fichiers de déchargement. Si cette option est utilisée, tous les fichiers de sortie contiennent la chaîne spécifiée à la place des valeurs null trouvées dans les données sélectionnées. Si cette option n’est pas spécifiée, les valeurs null sont déchargées en tant que : </p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Chaînes de longueur nulle pour la sortie délimitée </p>
                     </li><li class="listitem">
                        <p>Chaînes d’espaces blancs pour la sortie de largeur fixe</p>
                     </li></ul></div>
                  <p>Si une chaîne nulle a été spécifiée pour un déchargement de largeur fixe et que la largeur d’une colonne de sortie est inférieure à celle de la chaîne nulle, le comportement est le suivant : </p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Un champ vide est généré pour les colonnes autres que les colonnes de caractères </p>
                     </li><li class="listitem">
                        <p>Une erreur est rapportée pour les colonnes de caractères </p>
                     </li></ul></div>
                  <p>Contrairement à d’autres types de données où une chaîne définie par l’utilisateur représente une valeur nulle, Amazon Redshift exporte les colonnes de données SUPER en utilisant le format JSON et la représente comme une valeur nulle, comme déterminé par le format JSON. Par conséquent, les colonnes de données SUPER ignorent l'option NULL [AS] utilisée dans les commandes UNLOAD.</p>
               </dd>
             
               <dt><span class="term">ESCAPE </span></dt>
               <dd>
                  <p>Pour les colonnes CHAR et VARCHAR des fichiers de déchargement délimités, un caractère d’échappement (<code class="code">\</code>) est placé devant toutes les occurrences des caractères suivants :</p>
                  <div class="itemizedlist">
                      
                      
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Saut de ligne : <code class="code">\n</code></p>
                     </li><li class="listitem">
                        <p>Retour chariot: <code class="code">\r</code></p>
                     </li><li class="listitem">
                        <p>Délimiteur spécifié pour les données déchargées. </p>
                     </li><li class="listitem">
                        <p>Caractère d’échappement : <code class="code">\</code></p>
                     </li><li class="listitem">
                        <p>Guillemet : <code class="code">"</code> ou <code class="code">'</code> (si ESCAPE et ADDQUOTES sont tous deux spécifiés dans la commande UNLOAD).</p>
                     </li></ul></div>
                  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Si vous avez chargé vos données à l’aide d’une commande COPY et de l’option ESCAPE, vous devez également spécifier l’option ESCAPE avec votre commande UNLOAD pour générer le fichier de sortie réciproque. De même, si vous utilisez UNLOAD avec l’option ESCAPE, vous devez utiliser ESCAPE lorsque vous exécutez la commande COPY sur les mêmes données.</p></div></div>
               </dd>
             
               <dt id="allowoverwrite"><span class="term">ALLOWOVERWRITE </span></dt>
               <dd>
                  <p>Par défaut, UNLOAD échoue s’il trouve des fichiers qu’il pourrait remplacer. Si ALLOWOVERWRITE est spécifié, UNLOAD remplace les fichiers existants, y compris le fichier manifeste. </p>
               </dd>
             
               <dt id="cleanpath"><span class="term">CLEANPATH</span></dt>
               <dd>
                  <p>L’option CLEANPATH supprime les fichiers existants situés dans le chemin d’accès Amazon S3 spécifié dans la clause TO avant de décharger les fichiers à l’emplacement spécifié. </p>
                  <p>Si vous incluez la clause PARTITION BY, les fichiers existants sont supprimés uniquement des dossiers de partition pour recevoir les nouveaux fichiers générés par l’opération UNLOAD.</p>
                  <p>Vous devez bénéficier d’une autorisation <code class="code">s3:DeleteObject</code> sur le compartiment Amazon S3. Pour obtenir des informations, consultez <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-policy-language-overview.html">Politiques et autorisations dans Amazon S3</a> dans le <em>Guide de l’utilisateur Amazon Simple Storage Service</em>. Les fichiers que vous supprimez à l’aide de l’option CLEANPATH sont définitivement supprimés et ne peuvent pas être récupérés.</p>
                  <p>Vous ne pouvez pas spécifier l’option CLEANPATH si vous spécifiez l’option ALLOWOVERWRITE.</p>
               </dd>
             
               <dt id="unload-parallel"><span class="term">PARALLEL </span></dt>
               <dd>
                  <p>Par défaut, UNLOAD écrit les données en parallèle dans plusieurs fichiers, selon le nombre de tranches du cluster. L’option par défaut est ON ou TRUE. Si PARALLEL a la valeur OFF ou FALSE, UNLOAD écrit en série dans un ou plusieurs fichiers de données, triés de manière absolue selon la clause ORDER BY, si elle est utilisée. La taille maximale d’un fichier de données est de 6,2 Go. Ainsi, par exemple, si vous déchargez 13,4 Go de données, UNLOAD crée les trois fichiers suivants.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">s3://mybucket/key000    6.2 GB
s3://mybucket/key001    6.2 GB
s3://mybucket/key002    1.0 GB</code></pre>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>La commande UNLOAD est conçue pour utiliser le traitement parallèle. Nous vous recommandons de laisser PARALLEL activé dans la plupart des cas, surtout si les fichiers sont utilisés pour charger les tables à l’aide d’une commande COPY.</p></div></div>
               </dd>
             
               <dt id="unload-maxfilesize"><span class="term">MAXFILESIZE [AS] max-size [ Mo | Go ] </span></dt>
               <dd>
                  <p>Spécifie la taille maximale des fichiers créés par UNLOAD dans Amazon S3. Spécifiez une valeur décimale comprise entre 5 Mo et 6,2 Go. Le mot-clé AS est facultatif. L’unité par défaut est les Mo. Si MAXFILESIZE n’est pas spécifié, la taille maximale de fichier par défaut est de 6,2 Go. La taille du fichier manifeste, s’il est utilisé, n’est pas affectée par MAXFILESIZE.</p>
               </dd>
             
               <dt id="unload-rowgroupsize"><span class="term">ROWGROUPSIZE [AS] size [ MB | GB ] </span></dt>
               <dd>
                  <p>Spécifie la taille des groupes de lignes. Le choix d’une taille supérieure peut réduire le nombre de groupes de lignes, réduisant ainsi la quantité de communication réseau. Spécifiez une valeur d’entier comprise entre 32 Mo et 128 Mo. Le mot-clé AS est facultatif. L’unité par défaut est les Mo.</p>
                  <p>Si ROWGROUPSIZE n’est pas spécifié, la taille par défaut est de 32 Mo. Pour utiliser ce paramètre, le format de stockage doit être Parquet et le type de nœud doit être ra3.4xlarge, ra3.16xlarge, ds2.8xlarge ou dc2.8xlarge.</p>
               </dd>
             
               <dt id="unload-region"><span class="term">REGION [AS] ’<em>aws-region</em>’</span></dt>
               <dd>
                  <p>Indique la Région AWS dans laquelle se trouve le compartiment Amazon S3 cible. La commande REGION est obligatoire pour décharger (UNLOAD) sur un compartiment Amazon S3 qui ne se trouve pas dans la même Région AWS que la base de données Amazon Redshift. </p>
                  <p>La valeur d’<em>aws_region</em> doit correspondre à une région AWS répertoriée dans la table des <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html#redshift_region">régions et points de terminaison d’Amazon Redshift</a> dans <em>Références générales AWS</em>.</p>
                  <p>Par défaut, UNLOAD suppose que le compartiment Amazon S3 cible se trouve dans la même Région AWS que la base de données Amazon Redshift.</p>
               </dd>
             
               <dt id="unload-extension"><span class="term">EXTENSION ’<em>extension-name</em>’</span></dt>
               <dd>
                  <p>Spécifie l’extension de fichier à ajouter aux noms des fichiers déchargés. Amazon Redshift n’effectuant aucune validation, vous devez vérifier que l’extension de fichier spécifiée est correcte. Si vous utilisez une méthode de compression telle que GZIP, vous devez toujours spécifier <code class="code">.gz</code> dans le paramètre d’extension. Si vous n’indiquez pas d’extension, Amazon Redshift n’ajoute rien au nom de fichier. Si vous spécifiez une méthode de compression sans indiquer d’extension, Amazon Redshift ajoute uniquement l’extension de la méthode de compression au nom de fichier.</p>
               </dd>
            </dl></div>
       
         <h2 id="unload-usage-notes">Notes d’utilisation</h2>
          
            <h3 id="unload-usage-escape">Utilisation d’ESCAPE pour toutes les opérations UNLOAD de texte délimité</h3>
            <p>Lorsque vous exécutez UNLOAD à l’aide d’un délimiteur, vos données peuvent inclure ce délimiteur ou l’un des caractères répertoriés dans la description de l’option ESCAPE. Dans ce cas, vous devez utiliser l’option ESCAPE avec l’instruction UNLOAD. Si vous n’utilisez pas l’option ESCAPE avec UNLOAD, les opérations COPY suivantes qui utilisent les données déchargées peuvent échouer.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Nous vous recommandons vivement de toujours utiliser ESCAPE avec les deux instructions UNLOAD et COPY. Une exception s’applique si vous êtes certain que vos données ne contiennent pas de délimiteur ni d’autres caractères susceptibles d’avoir à faire l’objet d’un échappement. </p></div></div>
          
          
            <h3 id="unload-usage-floating-point-precision">Perte de précision pour la virgule flottante</h3>
            <p>Vous pouvez rencontrer une perte de précision pour les données en virgule flottante déchargées et rechargées avec succès. </p>
          
          
            <h3 id="unload-usage-limit-clause">Clause LIMIT</h3>
            <p>La requête SELECT ne peut pas utiliser une clause LIMIT dans l’instruction SELECT externe. Par exemple, l’instruction UNLOAD suivante échoue.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue limit 10')
to 's3://mybucket/venue_pipe_' iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole'; </code></pre>
            <p>À la place, utilisez une clause LIMIT imbriquée, comme dans l’exemple suivant.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">unload ('select * from venue where venueid in
(select venueid from venue order by venueid desc limit 10)')
to 's3://mybucket/venue_pipe_' iam_role 'arn:aws:iam::0123456789012:role/MyRedshiftRole';</code></pre>
            <p>Vous pouvez aussi remplir une table à l’aide de SELECT…INTO ou de CREATE TABLE AS avec une clause LIMIT, puis procéder au déchargement à partir de cette table.</p>
          
          
            <h3 id="unload-usage-geometry">Déchargement d’une colonne avec le type de données GEOMETRY</h3>
            <p>Vous pouvez décharger les colonnes GEOMETRY au format texte ou CSV. Vous pouvez décharger les données GEOMETRY avec l’option <code class="code">FIXEDWIDTH</code>. Les données sont déchargées au format hexadécimal du format EWKB. Si la taille des données EWKB est supérieure à 4 Mo, un avertissement est envoyé car les données ne pourront pas être chargées dans un table par la suite. </p>
          


          
            <h3 id="unload-usage-hll">Déchargement du type de données HLLSKETCH</h3>

            <p>Vous pouvez décharger les colonnes HLLSKETCH au format texte ou CSV. Vous pouvez décharger les données HLLSKETCH avec l’option <code class="code">FIXEDWIDTH</code>. Les données sont déchargées au format Base64 pour les  HyperLogLog  esquisses denses ou au format JSON pour les esquisses  HyperLogLog  éparses. Pour plus d'informations, consultez <a href="./hyperloglog-functions.html">HyperLogLog fonctions</a>.</p>
            <p>L’exemple suivant exporte une table contenant des colonnes HLLSKETCH dans un fichier.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">CREATE TABLE a_table(an_int INT, b_int INT);
INSERT INTO a_table VALUES (1,1), (2,1), (3,1), (4,1), (1,2), (2,2), (3,2), (4,2), (5,2), (6,2);

CREATE TABLE hll_table (sketch HLLSKETCH);
INSERT INTO hll_table select hll_create_sketch(an_int) from a_table group by b_int;

UNLOAD ('select * from hll_table') TO 's3://mybucket/unload/'
IAM_ROLE 'arn:aws:iam::0123456789012:role/MyRedshiftRole' NULL AS 'null' ALLOWOVERWRITE CSV;</code></pre>
          

          
            
            <h3 id="unload-usage-varbyte">Déchargement d’une colonne avec le type de données VARBYTE</h3>
            <p>Vous pouvez décharger les colonnes VARBYTE au format texte ou CSV. Les données sont déchargées sous forme hexadécimale. Vous ne pouvez pas décharger les données VARBYTE avec l’option <code class="code">FIXEDWIDTH</code>. L’option <code class="code">ADDQUOTES</code> de UNLOAD au format CSV n’est pas prise en charge. Une colonne VARBYTE ne peut pas être une colonne PARTITIONED BY. </p>
          


          
            <h3 id="unload-parquet-usage">Clause FORMAT AS PARQUET</h3>
            <p>Tenez comptes des points suivants lorsque vous utilisez FORMAT AS PARQUET :</p>
            <div class="itemizedlist">
                
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Une opération de déchargement vers Parquet n’utilise pas la compression au niveau du fichier. Chaque groupe de lignes est compressé avec SNAPPY.</p>
               </li><li class="listitem">
                  <p>Si MAXFILESIZE n’est pas spécifié, la taille maximale de fichier par défaut est de 6,2 Go. Vous pouvez utiliser MAXFILESIZE pour spécifier une taille de fichier de 5 Mo à 6,2 Go. La taille réelle du fichier est approximative lorsque le fichier est écrit. Elle peut donc ne pas être exactement égale au nombre que vous spécifiez.</p>
                  <p>Pour optimiser les performances d’analyse, Amazon Redshift essaie de créer des fichiers Parquet contenant des groupes de lignes de 32 Mo de taille égale. La valeur MAXFILESIZE que vous spécifiez est automatiquement arrondie au multiple le plus proche de 32 Mo. Par exemple, si vous spécifiez MAXFILESIZE 200 MB, chaque fichier Parquet déchargé est d’environ 192 Mo (groupe de lignes de 32 Mo x 6 = 192 Mo).</p>
               </li><li class="listitem">
                  <p>Si une colonne utilise le format de données TIMESTAMPTZ, seules les valeurs d’horodatage sont déchargées. Les informations de fuseau horaire ne sont pas déchargées.</p>
               </li><li class="listitem">
                  <p>Ne spécifiez pas de préfixes de nom de fichier commençant par des caractères de soulignement (_) ou des points (.). Redshift Spectrum traite les fichiers qui commencent par ces caractères comme des fichiers cachés et les ignore.</p>
               </li></ul></div>
          
          
            <h3 id="unload-partitionby-usage">Clause PARTITION BY</h3>
            <p>Tenez comptes des points suivants lorsque vous utilisez PARTITION BY :</p>
            <div class="itemizedlist">

                
                
                
                
                
                

            <ul class="itemizedlist"><li class="listitem">
                  <p>Les colonnes de partition ne sont pas incluses dans le fichier de sortie.</p>
               </li><li class="listitem">
                  <p>Assurez-vous d’inclure des colonnes de partition dans la requête SELECT utilisée dans l’instruction UNLOAD. Vous pouvez spécifier n’importe quel nombre de colonnes de partition dans la commande UNLOAD. Cependant, une limitation exige qu’au moins une colonne autre qu’une colonne de partition fasse partie du fichier.</p>
               </li><li class="listitem">
                  <p>Si la valeur de clé de partition est null, Amazon Redshift décharge automatiquement ces données dans une partition par défaut appelée <code class="code">partition_column=__HIVE_DEFAULT_PARTITION__</code>. </p>
               </li><li class="listitem">
                  <p>La commande UNLOAD n’effectue pas d’appels vers un catalogue externe. Pour enregistrer vos nouvelles partitions dans le cadre de votre table externe existante, utilisez une commande distincte ALTER TABLE ... ADD PARTITION ... Vous pouvez également exécuter une commande CREATE EXTERNAL TABLE pour enregistrer les données déchargées en tant que nouvelle table externe. Vous pouvez également utiliser un Crawler AWS Glue pour remplir votre catalogue de données. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/glue/latest/dg/add-crawler.html">Définition des analyseurs</a> dans le <em>Guide du développeur AWS Glue</em>. </p>
               </li><li class="listitem">
                  <p>Si vous utilisez l’option MANIFEST, Amazon Redshift génère un seul fichier manifeste dans le dossier Amazon S3 racine.</p>
               </li><li class="listitem">
                  <p>Les types de données de colonne que vous pouvez utiliser comme clé de partition sont SMALLINT, INTEGER, BIGINT, DECIMAL, REAL, BOOLEAN, CHAR, VARCHAR, DATE et TIMESTAMP. </p>
               </li></ul></div>
          
         

         


         

          
            <h3 id="unload-assumerole-privilege-usage">Utilisation du privilège ASSUMEROLE pour accorder l’accès à un rôle IAM pour les opérations UNLOAD</h3>

            <p>Pour permettre à des utilisateurs et groupes spécifiques d’accéder à un rôle IAM pour les opérations UNLOAD, un super-utilisateur peut accorder le privilège ASSUMEROLE sur un rôle IAM aux utilisateurs et aux groupes. Pour obtenir des informations, consultez <a href="./r_GRANT.html">GRANT</a>. </p>

          

          
            <h3 id="unload-usage-s3-access-point-alias">UNLOAD ne prend pas en charge les alias de point d’accès Amazon S3</h3>

            <p>Vous ne pouvez pas utiliser d’alias de point d’accès Amazon S3 avec la commande UNLOAD. </p>
          
         
       
            <h2 id="r_UNLOAD-examples">Exemples</h2>
            <p>Pour voir des exemples d’utilisation de la commande UNLOAD. consultez <a href="./r_UNLOAD_command_examples.html">Exemples UNLOAD</a></p>
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_TRUNCATE.html">TRUNCATE</div><div id="next" class="next-link" accesskey="n" href="./r_UNLOAD_command_examples.html">Exemples UNLOAD</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_UNLOAD.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>