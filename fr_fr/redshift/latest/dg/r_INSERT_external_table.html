<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>INSERT (table externe) - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_INSERT_external_table" /><meta name="default_state" content="r_INSERT_external_table" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_INSERT_external_table.html" /><meta name="description" content="Insère les résultats d’une requête SELECT dans des tables externes partitionnées ou non partitionnées existantes." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt des données avec Amazon Redshift, service d’entrepôt des données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_INSERT_external_table.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_INSERT_external_table.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_INSERT_external_table.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_INSERT_external_table.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_INSERT_external_table.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_INSERT_external_table.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_INSERT_external_table.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_INSERT_external_table.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_INSERT_external_table.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_INSERT_external_table.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_INSERT_external_table.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_INSERT_external_table.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_INSERT_external_table.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_INSERT_external_table.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_INSERT_external_table.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_INSERT_external_table.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_INSERT_external_table.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_INSERT_external_table.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_INSERT_external_table.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_INSERT_external_table.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_INSERT_external_table.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_INSERT_external_table.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="INSERT (table externe)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>INSERT (table externe) - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_INSERT_external_table" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_INSERT_external_table.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_INSERT_external_table.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_INSERT_external_table.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt des données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Référence SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Commandes SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "INSERT (table externe)",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_INSERT_external_table" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="page-toc-src"><a href="#r_INSERT_external_table-synopsis">Syntaxe</a><a href="#r_INSERT_external_table-parameters">Paramètres</a><a href="#r_INSERT_external_table_usage_notes">Notes d’utilisation</a><a href="#c_Examples_of_INSERT_external_table">Exemples d’opération INSERT (table externe)</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="r_INSERT_external_table">INSERT (table externe)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Insère les résultats d'une requête SELECT dans des tables externes existantes d'un catalogue externe, telles que for  AWS Glue AWS Lake Formation, ou une métastore Apache Hive. Utilisez le même rôle  AWS Identity and Access Management  (IAM) que celui utilisé pour la commande CREATE EXTERNAL SCHEMA pour interagir avec les catalogues externes et Amazon S3.</p><p>Pour les tables non partitionnées, la commande INSERT (table externe) écrit les données à l’emplacement Amazon S3 défini dans la table, en fonction des propriétés de la table et du format de fichier spécifiés.</p><p>Pour les tables partitionnées, INSERT (table externe) écrit les données à l’emplacement Amazon S3 en fonction de la clé de partition spécifiée dans la table. Il enregistre également automatiquement les nouvelles partitions dans le catalogue externe une fois l’opération INSERT terminée.</p><p>Vous ne pouvez pas exécuter INSERT (table externe) dans un bloc de transactions (BEGIN ... END). Pour plus d’informations sur les transactions, consultez <a href="./c_serial_isolation.html">Isolement sérialisable</a>. </p>
         <h2 id="r_INSERT_external_table-synopsis">Syntaxe</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">INSERT INTO <em>external_schema.table_name</em>
<em><span>{</span> select_statement }</em></code></pre>
       
         <h2 id="r_INSERT_external_table-parameters">Paramètres</h2>
         <div class="variablelist">
             
             
         <dl>
               <dt><span class="term"> <em>schéma_externe.nom_table</em> </span></dt>
               <dd>
                  <p>Nom d’un schéma externe existant et d’une table externe cible pour l’insertion.</p>
               </dd>
             
               <dt><span class="term"> <em>select_statement</em> </span></dt>
               <dd>
                  <p>Instruction qui insère une ou plusieurs lignes dans la table externe en définissant une requête. Toutes les lignes produites par la requête sont écrites dans Amazon S3 au format texte ou Parquet, en fonction de la définition de la table. La requête doit renvoyer une liste de colonnes compatible avec les types de données de colonne de la table externe. Cependant, les noms des colonnes ne doivent pas obligatoirement correspondre.</p>
               </dd>
            </dl></div>
       
         <h2 id="r_INSERT_external_table_usage_notes">Notes d’utilisation</h2>
         <p>Le nombre de colonnes de la requête SELECT doit être identique à la somme des colonnes de données et des colonnes de partition. L’emplacement et le type de données de chaque colonne de données doivent correspondre à ceux de la table externe. L’emplacement des colonnes de partition doit se trouver à la fin de la requête SELECT, dans le même ordre que celui utilisé pour les définir dans la commande CREATE EXTERNAL TABLE. Les noms des colonnes ne doivent pas obligatoirement correspondre.</p>
         <p>Dans certains cas, vous pouvez exécuter la commande INSERT (table externe) sur un catalogue de données  AWS Glue
 ou un métastore Hive. Dans le cas de AWS Glue, le rôle IAM utilisé pour créer le schéma externe doit disposer à la fois d'autorisations de lecture et d'écriture sur Amazon S3 et AWS Glue. Si vous utilisez un  AWS Lake Formation  catalogue, ce rôle IAM devient propriétaire de la nouvelle table Lake Formation. Ce rôle IAM doit au moins disposer des autorisations suivantes : </p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Autorisation SELECT, INSERT, UPDATE sur la table externe</p>
            </li><li class="listitem">
               <p>Autorisation d’emplacement des données sur le chemin d’accès Amazon S3 de la table externe</p>
            </li></ul></div>
         <p>Pour vous assurer que les noms de fichiers sont uniques, Amazon Redshift utilise le format suivant pour le nom de chaque fichier téléchargé dans Amazon S3 par défaut. </p>
         <p><code class="code"><code class="replaceable">&lt;date&gt;</code>_<code class="replaceable">&lt;time&gt;</code>_<code class="replaceable">&lt;microseconds&gt;</code>_<code class="replaceable">&lt;query_id&gt;</code>_<code class="replaceable">&lt;slice-number&gt;</code>_part_<code class="replaceable">&lt;part-number&gt;</code>.<code class="replaceable">&lt;format&gt;</code></code>.</p>
         <p>Par exemple : <code class="code">20200303_004509_810669_1007_0001_part_00.parquet</code>.</p>
         <p>Tenez compte des éléments suivants lors de l’exécution de la commande INSERT (table externe) :</p>
         <div class="itemizedlist">
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Les tables externes qui ont un format autre que PARQUET ou TEXTFILE ne sont pas prises en charge.</p>
            </li><li class="listitem">
               <p>Cette commande prend en charge les propriétés de table existantes telles que ’write.parallel’, ’write.maxfilesize.mb’, ’compression_type’ et ’serialization.null.format’. Pour mettre à jour ces valeurs, exécutez la commande ALTER TABLE SET TABLE PROPERTIES.</p>
            </li><li class="listitem">
               <p>La propriété de table ’numRows’ est automatiquement mise à jour vers la fin de l’opération INSERT. La propriété de la table doit déjà être définie ou ajoutée à la table si elle n’a pas été créée par l’opération CREATE EXTERNAL TABLE AS.</p>
            </li><li class="listitem">
               <p>La clause LIMIT n’est pas prise en charge dans la requête SELECT externe. A la place, utilisez une clause LIMIT imbriquée.</p>
            </li><li class="listitem">
               <p>Vous pouvez utiliser la table <a href="./r_STL_UNLOAD_LOG.html">STL_UNLOAD_LOG</a> pour suivre les fichiers qui ont été écrits sur Amazon S3 par chaque opération INSERT (table externe).</p>
            </li><li class="listitem"><p>Amazon Redshift prend en charge uniquement le chiffrement standard Amazon S3 pour INSERT (table externe).</p></li></ul></div>
       
         <h2 id="c_Examples_of_INSERT_external_table">Exemples d’opération INSERT (table externe)</h2>
         <p>L’exemple suivant insère les résultats de l’instruction SELECT dans la table externe.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">INSERT INTO spectrum.lineitem
SELECT * FROM local_lineitem;
</code></pre>
         <p>L’exemple suivant insère les résultats de l’instruction SELECT dans une table externe partitionnée à l’aide d’un partitionnement statique. Les colonnes de partition sont codées de manière irréversible dans l’instruction SELECT. Les colonnes de partition doivent se trouver à la fin de la requête.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">INSERT INTO spectrum.customer
SELECT name, age, gender, 'May', 28 FROM local_customer;</code></pre>
         <p>L’exemple suivant insère les résultats de l’instruction SELECT dans une table externe partitionnée à l’aide d’un partitionnement dynamique. Les colonnes de partition ne sont pas codées de manière irréversible. Les données sont automatiquement ajoutées aux dossiers de partition existants ou aux nouveaux dossiers si une nouvelle partition est ajoutée.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">INSERT INTO spectrum.customer
SELECT name, age, gender, month, day FROM local_customer;</code></pre>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c_Examples_of_INSERT_30.html">Exemples INSERT</div><div id="next" class="next-link" accesskey="n" href="./r_LOCK.html">LOCK</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_INSERT_external_table.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_INSERT_external_table.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>