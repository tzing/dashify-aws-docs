<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Partage de données en lecture et en écriture au sein d'un Compte AWS ou de plusieurs comptes (aperçu) - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="multi-warehouse-writes-data-sharing" /><meta name="default_state" content="multi-warehouse-writes-data-sharing" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" /><meta name="description" content="Pour plus d’informations sur la configuration du suivi en version préliminaire, consultez l’une des rubriques suivantes :" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt des données avec Amazon Redshift, service d’entrepôt des données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="Partage de données en lecture et en écriture au sein d'un Compte AWS ou de plusieurs comptes (aperçu)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Partage de données en lecture et en écriture au sein d'un Compte AWS ou de plusieurs comptes (aperçu) - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#multi-warehouse-writes-data-sharing" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt des données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Partage de données entre clusters dans Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/datashare-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Gestion des tâches de partage de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/getting-started-datashare.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Partage de données en lecture et en écriture au sein d'un Compte AWS ou de plusieurs comptes (aperçu)",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/getting-started-datashare.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#multi-warehouse-writes-data-sharing" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="page-toc-src"><a href="#within-account-writes-context">Partage de données en lecture seule ou partage de données en lecture et en écriture</a><a href="#within-account-writes-share-prereqs">Prérequis et notes d’utilisation</a><a href="#within-account-writes-share-producer">Partage d’objets de base de données pour un accès en lecture et en écriture dans une unité de partage des données en tant qu’administrateur de base de données producteur</a><a href="#within-account-writes-share-grants-available">Autorisations que vous pouvez accorder aux unités de partages des données</a><a href="#within-account-writes-share-consumer-create-database">Autoriser les clusters ou groupes de travail sans serveur d’interroger l’unité de partage des données</a><a href="#within-account-writes-share-consumer-transactions">Écriture dans des objets au sein d’une unité de partage des données</a><a href="#across-account-read-write-req">Exigences et restrictions concernant l’unité de partage de données en version préliminaire</a><a href="#within-account-writes-share-sql-statements">Instructions SQL prises en charge</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="multi-warehouse-writes-data-sharing">Partage de données en lecture et en écriture au sein d'un  Compte AWS  ou de plusieurs comptes (aperçu)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="table-container"><div class="table-contents"><table id="w320aac35c19c13b3">
      <tr>
        <td tabindex="-1"><em><b>Ceci est la documentation version préliminaire de la fonctionnalité d’écriture sur plusieurs entrepôts des données via le partage de données pour Amazon Redshift, disponible en version préliminaire publique dans le suivi PREVIEW_2023. La documentation et la fonction sont toutes deux sujettes à modification. Nous vous recommandons d’utiliser cette fonction uniquement avec des clusters de test et non dans des environnements de production. Pour connaître les conditions générales de la version préliminaire, veuillez consulter la rubrique <em>Participation au service Bêta</em> dans les <a href="https://aws.amazon.com/service-terms/" rel="noopener noreferrer" target="_blank"><span>Conditions générales du service AWS</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.  </b></em> </td>
      </tr>
    </table></div></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>L’écriture sur plusieurs entrepôts des données n’est actuellement pas disponible sur les clusters ra3.xlplus. Pour l’utiliser, créez des clusters ra3.4xl, ra3.16xl, ou des groupes de travail Amazon Redshift sans serveur avec le suivi en version préliminaire.</p></div></div><p>Pour plus d’informations sur la configuration du suivi en version préliminaire, consultez l’une des rubriques suivantes :</p><div class="itemizedlist">
                          
                          
                      <ul class="itemizedlist"><li class="listitem"><p>Pour la version préliminaire Amazon Redshift sans serveur : <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-workgroup-preview.html">Création d’un groupe de travail en version préliminaire</a></p></li><li class="listitem"><p>Pour version préliminaire des clusters provisionnés Amazon Redshift : <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-clusters-console.html#cluster-preview">Création d’un cluster en version préliminaire</a></p></li></ul></div><p>Vous pouvez partager des objets de base de données en lecture et en écriture entre différents clusters Amazon Redshift ou groupes de travail Amazon Redshift Serverless au sein d'un  Compte AWS même cluster ou de l'un à l'autre.  Compte AWS  Vous pouvez également écrire des données entre différentes régions. Les procédures décrites dans cette rubrique expliquent comment configurer le partage de données. Vous pouvez accorder des autorisations telles que SELECT, INSERT et UPDATE pour différentes tables, et USAGE et CREATE pour différents schémas. Les données sont en ligne et disponibles dans tous les entrepôts dès qu’une transaction d’écriture est validée. Lors d’un partage de données entre comptes, les administrateurs de comptes producteur peuvent choisir d’autoriser ou non ceux-ci à accéder aux données en lecture seule. En outre, les administrateurs des comptes producteurs peuvent déterminer si des espaces de noms ou des régions spécifiques sont accessibles en lecture seule ou s'ils ont accès aux données.  read-and-write </p><p>Les sections suivantes montrent comment configurer le partage de données. Les procédures supposent que vous travaillez sur une base de données dans un cluster provisionné ou un groupe de travail Amazon Redshift sans serveur.</p>
               <h2 id="within-account-writes-context">Partage de données en lecture seule ou partage de données en lecture et en écriture</h2>   
               <p>Auparavant, les objets des unités de partage des données étaient en lecture seule en toutes circonstances. L’écriture dans un objet d’une unité de partage des données est une nouvelle fonctionnalité. Les objets de unités de partage des données ne sont activés en écriture que lorsqu’un producteur accorde spécifiquement des privilèges d’écriture tels que INSERT ou CREATE sur des objets de l’unité de partage des données. Des informations détaillées figurent dans les sections suivantes de cette rubrique.</p>
               <p>Si vous recherchez la documentation existante concernant les unités de partage des données en lecture seule, consultez <a href="https://docs.aws.amazon.com/redshift/latest/dg/datashare-overview.html">Partage de données entre clusters dans Amazon Redshift</a>.</p>
             
               <h2 id="within-account-writes-share-prereqs">Prérequis et notes d’utilisation</h2> 
               <p><em>Paramètres d’isolation</em> : <b>votre base de données doit être configurée pour l’isolation des instantanés.</b> Les bases de données créées dans le suivi PREVIEW_2023 utilisent l’isolation des instantanées par défaut. Les paramètres d’isolation peuvent être modifiés en utilisant le mot clé ISOLATION dans les instructions <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_DATABASE.html">CREATE DATABASE</a> ou <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_ALTER_DATABASE.html">ALTER DATABASE</a>.</p>

            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>L’écriture sur plusieurs entrepôts des données n’est actuellement pas disponible sur les clusters ra3.xlplus. Pour l’utiliser, créez des clusters ra3.4xl, ra3.16xl, ou des groupes de travail Amazon Redshift sans serveur avec le suivi en version préliminaire.</p></div></div> 
             
               <h2 id="within-account-writes-share-producer">Partage d’objets de base de données pour un accès en lecture et en écriture dans une unité de partage des données en tant qu’administrateur de base de données producteur</h2> 
               <p>Pour démarrer le partage de données, l’administrateur du producteur crée une unité de partage des données et y ajoute des objets :</p>
               <div class="procedure"><ol><li><p>Le propriétaire ou le <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_superusers.html">super-utilisateur</a> de la base de données du producteur crée une unité de partage des données. Une unité de partage des données est un conteneur logique d’objets de base de données, d’autorisations et de consommateurs. (Les consommateurs sont des clusters ou des espaces de noms Amazon Redshift sans serveur de votre compte et d’autres comptes.) Chaque unité de partage des données est associée à la base de données dans laquelle elle a été créée, et seuls les objets de cette base de données peuvent être ajoutés. La commande suivante crée une unité de partage des données :</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATASHARE my_datashare [PUBLICACCESSIBLE = TRUE];</code></pre>
                     <p>La définition de PUBLICACCESSIBLE = TRUE permet aux consommateurs d’interroger votre unité de partage des données à partir de clusters accessibles au public et de groupes de travail provisionnés. Oubliez ce paramètre ou définissez-le explicitement sur false si vous ne souhaitez pas l’autoriser.</p>
                     <p>Le propriétaire de l’unité de partage des données doit accorder l’autorisation USAGE aux schémas qu’il souhaite ajouter à l’unité de partage des données. La commande GRANT est nouvelle. Elle est utilisée pour accorder diverses actions sur le schéma, y compris CREATE et USAGE. Les schémas contiennent des objets partagés :</p>
                  
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE SCHEMA myshared_schema1;
CREATE SCHEMA myshared_schema2;
 
GRANT USAGE ON SCHEMA myshared_schema1 TO DATASHARE my_datashare;
GRANT CREATE, USAGE ON SCHEMA myshared_schema2 TO DATASHARE my_datashare;</code></pre> 
                     <p>L’administrateur peut également continuer d’exécuter les commandes ALTER pour ajouter un schéma à l’unité de partage des données. Seules les autorisations USAGE sont accordées lorsqu’un schéma est ajouté de cette façon.</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE my_datashare ADD SCHEMA myshared_schema1;</code></pre>
                  </li><li>
                     <p>Une fois que l’administrateur a ajouté des schémas, il peut accorder des autorisations d’unité de partage des données sur les objets du schéma. Il peut s’agit d’autorisations en lecture ou en écriture. L’exemple GRANT ALL montre comment accorder toutes les autorisations.</p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT SELECT, INSERT ON TABLE myshared_schema1.table1, myshared_schema1.table2, myshared_schema2.table1
TO DATASHARE my_datashare;
                     
GRANT ALL ON TABLE myshared_schema1.table4 TO DATASHARE my_datashare;</code></pre> 
                     <p>Vous pouvez continuer d’exécuter des commandes comme ALTER DATASHARE pour ajouter des tables. Dans ce cas, seules les autorisations SELECT sont accordées aux objets ajoutés.</p>
               
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE my_datashare ADD TABLE myshared_schema1.table1, myshared_schema1.table2, myshared_schema2.table1;</code></pre>
            
                  </li><li><p>L’administrateur autorise un espace de noms spécifique du compte à utiliser l’unité de partage des données. Vous pouvez trouver l’ID de l’espace de noms dans l’ARN disponible sur la page de détails du cluster, sur la page de détails de l’espace de noms Amazon Redshift sans serveur ou en exécutant la commande <code class="code">SELECT current_namespace;</code>. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_CURRENT_NAMESPACE.html">CURRENT_NAMESPACE</a>.</p>
             
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATASHARE my_datashare TO NAMESPACE '86b5169f-012a-234b-9fbb-e2e24359e9a8';</code></pre>
    
                  </li></ol></div>
                
                  <h3 id="within-account-writes-share-producer-cross">Autorisation du partage d’une unité de partage des données avec un autre compte</h3> 
                  <p>Après avoir créé un partage de données sur le producteur et y avoir ajouté des objets, vous souhaiterez peut-être le partager avec un autre  AWS  compte. Autoriser une unité de partage de données pour un autre compte est un processus de sécurité secondaire qui doit être effectué auprès du producteur par un administrateur de la sécurité des données. Cela autorise l’utilisation d’une unité de partage des données par le compte consommateur. Vous pouvez autoriser un autre compte à accéder à une unité de partage des données en lecture seule ou en lecture et en écriture. Si l’écriture est autorisée, le compte bénéficie des privilèges d’écriture accordés à l’unité de partage des données. Dans le cas contraire, seuls les privilèges de lecture accordés à l’unité de partage des données sont disponibles. Pour en savoir plus à ce sujet, consultez <a href="./within-account-writes-share-producer-authorize.html">Octroi d’autorisation d’accès en écriture sur les unités de partage des données en tant qu’administrateur de sécurité producteur (version préliminaire)</a>.</p>
                
               
                
                  <h3 id="within-account-writes-share-consumer-cross">Association d’une unité de partage des données d’un autre compte en tant que consommateur</h3> 
                  <p> Si l’unité de partage des données provient d’un autre compte, vous devez l’associer à des clusters ou espaces de noms spécifiques de votre compte avant de pouvoir l’utiliser avec ceux-ci. Vous pouvez l’associer à tous les espaces de noms d’un compte, à des régions spécifiques du compte ou à des espaces de noms spécifiques au compte. Vous pouvez choisir si un espace de noms est autorisé ou non en lecture seule ou en lecture et écriture. S’ils sont associés en écriture, les clusters et espaces de noms sans serveur associés bénéficient des privilèges d’écriture accordés à l’unité de partage des données. Dans le cas contraire, seuls les privilèges de lecture accordés à l’unité de partage des données sont disponibles. Pour plus d’informations sur la procédure à suivre, consultez <a href="within-account-writes-share-consumer-associate.html" rel="noopener noreferrer" target="_blank">Association des données partagées en tant qu’administrateur de la sécurité des données consommateur (version préliminaire)</a>.</p>
                
               
             
               <h2 id="within-account-writes-share-grants-available">Autorisations que vous pouvez accorder aux unités de partages des données</h2> 
               <p>Différents types d’objets et autorisations que vous pouvez leur accorder dans un contexte de partage de données.</p>
               <p>Schémas :</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>USAGE</p></li><li class="listitem"><p>CREATE</p></li></ul></div>
               <p>Tables : </p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>SELECT</p></li><li class="listitem"><p>INSERT</p></li><li class="listitem"><p>UPDATE</p></li><li class="listitem"><p>DELETE</p></li><li class="listitem"><p>TRUNCATE</p></li><li class="listitem"><p>DROP</p></li><li class="listitem"><p>REFERENCES</p></li></ul></div>
               <p>Fonctions :</p>
               <div class="itemizedlist">
                   
               <ul class="itemizedlist"><li class="listitem"><p>EXECUTE</p></li></ul></div>
               
            
             
               <h2 id="within-account-writes-share-consumer-create-database">Autoriser les clusters ou groupes de travail sans serveur d’interroger l’unité de partage des données</h2> 
               <p>Cette étape suppose que l’unité de partage des données provient d’un autre cluster ou d’un autre espace de noms Amazon Redshift sans serveur de votre compte, ou qu’il provient d’un autre compte et a été associé à l’espace de noms que vous utilisez.</p>
               <div class="procedure"><ol><li><p>L’administrateur de la base de données consommateur peut créer une base de données à partir de l’unité de partage des données.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE my_ds_db [WITH PERMISSIONS] FROM DATASHARE my_datashare OF NAMESPACE 'abc123def';</code></pre>
                     <p>Si vous créez une base de données avec la clause WITH PERMISSIONS, vous pouvez accorder des autorisations précises sur les objets de l’unité de partage des données à différents utilisateurs et rôles. Sans cela, tous les utilisateurs et rôles disposant de l’autorisation USAGE sur la base de données de l’unité de partage des données obtiennent toutes les autorisations sur tous les objets celle-ci.</p>
                     
                  </li><li><p>Voici comment accorder des autorisations à un rôle ou à un utilisateur de base de données Redshift. Vous devez être connecté à une base de données locale pour exécuter ces instructions. Vous ne pouvez pas exécuter ces instructions si vous exécutez une commande USE sur la base de données de l’unité de partage des données avant d’exécuter les instructions GRANT.</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATABASE my_ds_db TO ROLE data_eng;
GRANT CREATE, USAGE ON SCHEMA my_ds_db.my_shared_schema TO ROLE data_eng;
GRANT ALL ON ALL TABLES IN SCHEMA my_ds_db.my_shared_schema TO ROLE data_eng;
 
GRANT USAGE ON DATABASE my_ds_db TO bi_user;
GRANT USAGE ON SCHEMA my_ds_db.my_shared_schema TO bi_user;
GRANT SELECT ON my_ds_db.my_shared_schema.table1 TO bi_user;</code></pre>
       </li></ol></div>
     
             
                  <h2 id="within-account-writes-share-consumer-transactions">Écriture dans des objets au sein d’une unité de partage des données</h2> 
                  <p>Il existe deux façons d’écrire sur les objets d’une unité de partage des données.</p>
                  <p><b>Avec la commande USE, en se connectant à la base de données locale</b></p>
                  <p>Avec cette commande, vous pouvez interroger les objets d'un partage de données à l'aide d'une notation en deux parties et exécuter des transactions à instructions multiples. Vous ne pouvez exécuter des transactions comportant plusieurs instructions que dans une seule base de données.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">USE database_name;</code></pre>
                  <p>Vous pouvez recommencer à utiliser la base de données à laquelle vous êtes connecté en exécutant la commande RESET USE.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">RESET USE;</code></pre>
                  
                  <p>Une fois que vous utilisez (USE) une base de données, vous pouvez commencer (BEGIN) une transaction dans cette base de données. Vous ne pouvez pas écrire dans plusieurs bases de données au cours d’une seule transaction.</p>
                  
                  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p> Si vous exécutez une commande USE sans valider ou mettre fin à la transaction en cours, l’entrepôt des données redémarrera. Assurez-vous de terminer ou de valider les transactions ouvertes avant d’exécuter une instruction USE.</p></div></div>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">USE database_name;    --set the context to the datashare database
 
INSERT INTO datashare_schema.table1 VALUES (1);
 
BEGIN; --start a transaction
 
INSERT INTO datashare_schema.table2 VALUES (1);
INSERT INTO datashare_schema.table3 VALUES (1);
 
COMMIT;  --end transaction; you can also use the END command.</code></pre>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Vous ne pouvez pas copier les données d’un parquet et de fichiers ORC vers une table d’unité de partage des données.</p></div></div>
                  
                  <p><b>Connexion à la base de données de l’unité de partage des données directement via un pilote Redshift JDBC, ODBC ou Python</b></p>
                  <p>Si vous vous connectez directement à une base de données d’unité de partage des données, vous pouvez interroger les tables à l’aide d’une notation en deux parties, et exécuter immédiatement des transactions à plusieurs instructions dans la base de données de l’unité de partage des données.</p>
                  
 
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">--connect to the datashare database via JDBC, ODBC, or the Python Driver
 
INSERT INTO datashare_schema.table1 VALUES (1);
 
BEGIN; --start a transaction
 
INSERT INTO datashare_schema.table2 VALUES (1);
INSERT INTO datashare_schema.table3 VALUES (1);
 
COMMIT;  -- end transaction; can also use the END command.</code></pre>
   
                  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>L’exécution d’une instruction INSERT INTO SELECT est prise en charge, mais pour cela, vous devez disposer des autorisations INSERT sur toutes les tables référencées dans la requête.</p></div></div>    
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>La prise en charge de la connexion aux bases de données d’unités de partage des données via l’API de données sera bientôt disponible.</p></div></div>      
                 
                
               <h2 id="across-account-read-write-req">Exigences et restrictions concernant l’unité de partage de données en version préliminaire</h2>
              <p></p>
               <div class="itemizedlist">
                   
                   
                   
                   
       
    
   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>Vous devez être connecté directement à une base de données d’unité de partage des données, ou exécuter la commande USE pour écrire dans les unités de partage des données. Cependant, nous allons bientôt offrir la possibilité de le faire avec une notation en trois parties. </p></li><li class="listitem"><p>Vous devez utiliser des groupes de travail sans serveur, ou des clusters ra3.4xl ou ra3.16xl pour utiliser cette fonctionnalité. La prise en charge des clusters ra3.xlplus est prévue.</p></li><li class="listitem"><p><em>Découverte des métadonnées</em> : lorsque vous êtes un consommateur connecté directement à une base de données de partage de données via les pilotes Redshift JDBC, ODBC ou Python, vous pouvez consulter les données du catalogue de la manière suivante : </p>
                     <div class="itemizedlist">
                  
                         
                         
                         
                     <ul class="itemizedlist"><li class="listitem"><p>Commandes SQL <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_SHOW.html">SHOW</a></p></li><li class="listitem"><p>Interrogation des vue et des tables information_schema</p></li><li class="listitem"><p>Interrogation des <a href="https://docs.aws.amazon.com/redshift/latest/dg/svv_views.html">vues de métadonnées SVV</a></p></li></ul></div>
                  </li><li class="listitem"><p>Vous ne pouvez pas vous connecter aux bases de données d’unités de partage des données via l’API de données. La prise en charge de ceci sera bientôt disponible.</p></li><li class="listitem"><p>Les consommateurs ne peuvent pas voir les autorisations accordées aux unités de partage des données. Nous ajouterons bientôt cette fonctionnalité.</p></li><li class="listitem"><p>Pour le partage de données entre comptes, les clusters producteur et consommateur doivent être chiffrés.</p></li><li class="listitem"><p>Le niveau d’isolation de la base de données doit être une isolation d’instantanés afin de permettre à d’autres groupes de travail et clusters sans serveur d’y écrire.</p></li><li class="listitem"><p>Les consommateurs écrivant sur les objets d’une unité de partage des données ne déclencheront pas d’opération d’analyse automatique. Par conséquent, le producteur doit exécuter manuellement l’analyse une fois les données insérées dans la table pour que les statistiques de celle-ci soient mises à jour. Sans cela, les plans de requête risquent de ne pas être optimaux. </p></li></ul></div>
             
               <h2 id="within-account-writes-share-sql-statements">Instructions SQL prises en charge</h2> 
               <p>Ces instructions sont prises en charge pour la version préliminaire publique du partage de données avec écritures :</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
                   
                   
                   
              
                   
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>BEGIN | START TRANSACTION</p></li><li class="listitem"><p>END | COMMIT | ROLLBACK</p></li><li class="listitem"><p>COPY without COMPUPDATE</p></li><li class="listitem"><p><span>{</span> CREATE | DROP } SCHEMA</p></li><li class="listitem"><p><span>{</span> CREATE | DROP | SHOW } TABLE</p></li><li class="listitem"><p>CREATE TABLE table_name AS</p></li><li class="listitem"><p>DELETE</p></li><li class="listitem"><p><span>{</span> GRANT | REVOKE } privilege_name ON OBJECT_TYPE object_name TO consumer_user </p></li><li class="listitem"><p>INSERT</p></li><li class="listitem"><p>SELECT</p></li><li class="listitem"><p>INSERT INTO SELECT</p></li><li class="listitem"><p>TRUNCATE</p></li><li class="listitem"><p>UPDATE</p></li><li class="listitem"><p>Colonnes de données de type Super</p></li></ul></div>
               
         
               <p><em>Types d’instructions non pris en charge</em> : les types d’instructions suivants ne sont pas pris en charge :</p>
               <div class="itemizedlist">
                   
                   
                   
                   
                   
                   
        
               <ul class="itemizedlist"><li class="listitem"><p>Requêtes à plusieurs instructions adressées aux entrepôts consommateur lors d’écritures vers les producteurs</p></li><li class="listitem"><p>Requêtes de mise à l’échelle de la simultanéité avec écriture des consommateurs vers les producteurs</p></li><li class="listitem"><p>Tâches de copie automatique avec écriture des consommateurs vers les producteurs.</p></li><li class="listitem"><p>Tâches de streaming avec écriture des consommateurs vers les producteurs.</p></li><li class="listitem"><p>Consommateurs créant des tables d’intégration zéro ETL sur les clusters producteur. Pour plus d’informations sur les intégrations zéro ETL, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/zero-etl-using.html">Utilisation des intégrations zéro ETL</a>.</p></li><li class="listitem"><p>Écriture dans une table avec une clé de tri entrelacée.</p></li></ul></div>
               
            <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./data-sharing-within-account-CF.html">Gérer le partage de données avec  CloudFormation</div><div id="next" class="next-link" accesskey="n" href="./within-account-writes-share-producer-authorize.html">Octroi d’autorisation d’accès en écriture sur les unités de partage des données en tant qu’administrateur de sécurité producteur (version préliminaire)</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/multi-warehouse-writes-data-sharing.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>