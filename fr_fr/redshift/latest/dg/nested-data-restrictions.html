<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Limitations des données imbriquées (version préliminaire) - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="nested-data-restrictions" /><meta name="default_state" content="nested-data-restrictions" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/nested-data-restrictions.html" /><meta name="description" content="Les limites suivantes s’appliquent aux données imbriquées :" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt des données avec Amazon Redshift, service d’entrepôt des données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/nested-data-restrictions.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/nested-data-restrictions.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/nested-data-restrictions.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/nested-data-restrictions.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/nested-data-restrictions.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/nested-data-restrictions.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/nested-data-restrictions.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/nested-data-restrictions.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/nested-data-restrictions.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/nested-data-restrictions.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/nested-data-restrictions.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/nested-data-restrictions.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/nested-data-restrictions.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/nested-data-restrictions.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/nested-data-restrictions.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/nested-data-restrictions.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/nested-data-restrictions.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/nested-data-restrictions.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/nested-data-restrictions.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/nested-data-restrictions.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/nested-data-restrictions.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/nested-data-restrictions.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="Limitations des données imbriquées (version préliminaire)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Limitations des données imbriquées (version préliminaire) - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#nested-data-restrictions" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/nested-data-restrictions.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/nested-data-restrictions.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/nested-data-restrictions.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt des données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Interroger des données externes avec Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Didacticiel : Faire une requête de données imbriquées avec Amazon Redshift Spectrum",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/tutorial-query-nested-data.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Limitations des données imbriquées (version préliminaire)",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/tutorial-query-nested-data.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#nested-data-restrictions" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="nested-data-restrictions">Limitations des données imbriquées (version préliminaire)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Les limitations marquées (version préliminaire) dans la liste suivante s’appliquent uniquement aux clusters et groupes de travail en version préliminaire créés dans les régions suivantes.</p><div class="itemizedlist">
               
               
               
               
               
               
          <ul class="itemizedlist"><li class="listitem"><p>USA Est (Ohio) (us-east-2)</p></li><li class="listitem"><p>USA Est (Virginie du Nord) (us-east-1)</p></li><li class="listitem"><p>US Ouest (N. California) (us-west-1)</p></li><li class="listitem"><p>Asie-Pacifique (Tokyo) (ap-northeast-1)</p></li><li class="listitem"><p>Europe (Irlande) (eu-west-1)</p></li><li class="listitem"><p>Europe (Stockholm) (eu-north-1)</p></li></ul></div><p>Pour en savoir plus sur la configuration des clusters en version préliminaire, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-clusters-console.html#cluster-preview">Création d’un cluster en version préliminaire</a> dans le <em>Guide de gestion Amazon Redshift</em>. Pour en savoir plus sur la configuration des groupes de travail en version préliminaire, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-workgroup-preview.html">Création d’un groupe de travail en version préliminaire</a> dans le <em>Guide de gestion Amazon Redshift</em>. </p></div></div><p>Les limites suivantes s’appliquent aux données imbriquées :</p><div class="itemizedlist">                
                 
                                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                 
                
            <ul class="itemizedlist"><li class="listitem">
                    <p>Un type <code class="code">array</code> ou <code class="code">map</code> peut contenir d’autres types <code class="code">array</code> ou <code class="code">map</code> tant que les requêtes sur les types imbriqués <code class="code">arrays</code> ou <code class="code">maps</code> ne renvoient pas de valeurs <code class="code">scalar</code> (version préliminaire). </p>
                </li><li class="listitem">
                    <p>Amazon Redshift Spectrum prend uniquement en charge les types de données complexes sous forme de tables externes.</p>
                </li><li class="listitem">
                    <p> Les colonnes de résultats des sous-requêtes doivent être de niveau supérieur (version préliminaire).</p>
                </li><li class="listitem">
                    <p>Si une expression <code class="code">OUTER JOIN</code> se réfère à un tableau imbriqué, il ne peut que se référer à ce tableau et ses pans imbriqués (et ses cartes). Si une expression <code class="code">OUTER
                            JOIN</code> ne se réfère pas à un tableau imbriqué, il peut se référer à tout genre de tableaux non imbriqués.</p>
                </li><li class="listitem">
                    <p>Si une clause <code class="code">FROM</code> d’une sous-requête se réfère à un tableau imbriqué, il ne peut se référer à quelconque autre tableau.</p>
                </li><li class="listitem">
                    
                     
                    <p>Si une sous-requête dépend d’une table imbriquée qui se réfère à un parent, vous ne pouvez utiliser le parent que dans la clause <code class="code">FROM</code>. Vous ne pouvez pas utiliser le parent dans une quelconque autre clause, comme une clause <code class="code">SELECT</code> ou <code class="code">WHERE</code>. Par exemple, la requête suivante ne s’exécute pas, car la clause <code class="code">SELECT</code> de la sous-requête fait référence à la table parent <code class="code">c</code>. </p> 
                    <pre class="programlisting"><div class="code-btn-container"></div><code class="">SELECT c.name.given 
FROM   spectrum.customers c 
WHERE (SELECT COUNT(c.id) FROM c.phones p WHERE p LIKE '858%') &gt; 1;</code></pre>
                    <p>La requête suivante fonctionne parce que le parent <code class="code">c</code> est utilisé uniquement dans la clause <code class="code">FROM</code> de la sous-requête.</p>
                    <pre class="programlisting"><div class="code-btn-container"></div><code class="">SELECT c.name.given 
FROM   spectrum.customers c 
WHERE (SELECT COUNT(*) FROM c.phones p WHERE p LIKE '858%') &gt; 1;</code></pre>
                </li><li class="listitem">
                    <p>Une sous-requête qui accède à des données imbriquées à tout autre endroit que la clause <code class="code">FROM</code> doit renvoyer une seule valeur. Les seules exceptions sont les opérateurs <code class="code">(NOT) EXISTS</code> dans une clause <code class="code">WHERE</code>.</p>
                </li><li class="listitem">
                    <p><code class="code">(NOT) IN</code> n’est pas pris en charge.</p>
                </li><li class="listitem">
                    <p>La profondeur d’imbrication maximum pour tous les types imbriqués est de 100. Cette restriction s’applique à tous les formats de fichier (Parquet, ORC, Ion et JSON).</p>
                </li><li class="listitem">
                    <p>Les sous-requêtes d’agrégation qui accèdent aux données imbriquées peuvent uniquement se reporter à <code class="code">arrays</code> et <code class="code">maps</code> dans leur clause <code class="code">FROM</code>, et non pas à une table externe. </p>
                </li><li class="listitem">
                    
                    <p>L’interrogation des pseudocolonnes de données imbriquées dans une table Redshift Spectrum n’est pas prise en charge. Pour plus d'informations, consultez <a href="./c-spectrum-external-tables.html#c-spectrum-external-tables-pseudocolumns">Pseudocolonnes</a>. </p>
                </li><li class="listitem">
                     
                    <p>Quand vous extrayez des données à partir de colonnes d’un tableau ou d’une carte en les spécifiant dans une clause <code class="code">FROM</code>, vous ne pouvez sélectionner des valeurs dans ces colonnes que si les valeurs sont <code class="code">scalar</code>. Par exemple, les requêtes suivantes essayent toutes deux de sélectionner (<code class="code">SELECT</code>) des éléments depuis l’intérieur d’un tableau. La requête qui sélectionne fonctionne <code class="code">arr.a</code>, car <code class="code">arr.a</code> est une valeur <code class="code">scalar</code>. La deuxième requête ne fonctionne pas, car <code class="code">array</code> est un tableau extrait de <code class="code">s3.nested table</code> dans la clause <code class="code">FROM</code> (version préliminaire).</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="sql ">SELECT array_column FROM s3.nested_table;

<code class="computeroutput" copy="false">array_column
-----------------
[<span>{</span>"a":1},<span>{</span>"b":2}]</code>
                        
SELECT arr.a FROM s3.nested_table t, t.array_column arr;

<code class="computeroutput" copy="false">arr.a
-----
1</code>

--This query fails to run.
SELECT array FROM s3.nested_table tab, tab.array_column array;
</code></pre>
                    <p>Vous ne pouvez pas utiliser dans la clause <code class="code">FROM</code> un tableau ni une carte qui proviennent eux-mêmes d’un autre tableau ou d’une autre carte. Pour sélectionner des tableaux ou d’autres structures complexes imbriquées dans d’autres tableaux, pensez à utiliser des index dans l’instruction <code class="code">SELECT</code>.</p>
                </li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./nested-data-use-cases.html">Cas d’utilisation de données imbriquées </div><div id="next" class="next-link" accesskey="n" href="./serializing-complex-JSON.html">Sérialisation de JSON imbriqué complexe</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/nested-data-restrictions.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/nested-data-restrictions.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>