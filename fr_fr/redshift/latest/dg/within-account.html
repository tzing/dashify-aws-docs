<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Partage de données au sein d’un Compte AWS - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="within-account" /><meta name="default_state" content="within-account" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" /><meta name="description" content="Vous pouvez partager des données à des fins de lecture entre différents clusters Amazon Redshift au sein d’un Compte AWS." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt de données avec Amazon Redshift, service d’entrepôt de données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/within-account.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/within-account.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/within-account.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/within-account.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/within-account.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/within-account.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/within-account.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/within-account.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/within-account.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/within-account.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/within-account.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/within-account.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/within-account.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/within-account.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/within-account.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="Partage de données au sein d’un Compte AWS" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Partage de données au sein d’un Compte AWS - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#within-account" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt de données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Partage de données entre clusters dans Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/datashare-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Gestion des tâches de partage de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/getting-started-datashare.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Gestion du partage de données à l’aide de l’interface SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/getting-started-datashare-sql.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Partage de données au sein d’un Compte AWS",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/getting-started-datashare-sql.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#within-account" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="within-account">Partage de données au sein d’un Compte AWS</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Vous pouvez partager des données à des fins de lecture entre différents clusters Amazon Redshift au sein d’un Compte AWS.</p><div class="procedure"><h6>Pour partager des données à des fins de lecture en tant qu’administrateur de cluster producteur ou propriétaire de base de données</h6><ol><li><p>Créez des unités de partage des données dans votre cluster. Pour plus d'informations, consultez <a href="./r_CREATE_DATASHARE.html">CREATE DATASHARE</a>.</p>
            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATASHARE salesshare;</code></pre>
            <p>Les super-utilisateurs de cluster et les propriétaires de base de données peuvent créer des datashares. Chaque datashare est associé à une base de données lors de sa création. Seuls les objets de cette base de données peuvent être partagés dans ce datashare. Plusieurs datashares peuvent être créés sur la même base de données avec la même précision d'objets ou une précision différente. Il n’y a pas de limite au nombre d’unités de partage des données qu’un cluster peut créer.</p>
            <p>Vous pouvez également créer des datashares via la console Amazon Redshift. Pour plus d'informations, consultez <a href="./datashare-creation.html#create-datashare-console">Créer des unités de partage des données</a>.</p>
      </li><li><p>Déléguer des autorisations pour opérer sur l’unité de partage des données. Pour plus d’informations, consultez <a href="./r_GRANT.html">GRANT</a> ou <a href="./r_REVOKE.html">REVOKE</a>.</p>

            <p>L’exemple suivant attribue des autorisations à <code class="code">dbuser</code> sur <code class="code">salesshare</code>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT ALTER, SHARE ON DATASHARE salesshare TO dbuser;</code></pre>

            <p>Les super-utilisateurs de cluster et les propriétaires de l’unité de partage des données peuvent accorder ou révoquer des autorisations de modification sur l’unité de partage des données à d’autres utilisateurs.</p>
      </li><li><p>Ajoutez ou supprimez des objets des unités de partage des données. Pour ajouter des objets à une unité de partage des données, ajoutez le schéma avant d’ajouter des objets. Lorsque vous ajoutez un schéma, Amazon Redshift n’ajoute pas tous les objets qu’il contient. Assurez-vous de les ajouter explicitement. Pour plus d'informations, consultez <a href="./r_ALTER_DATASHARE.html">ALTER DATASHARE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare ADD SCHEMA PUBLIC;
ALTER DATASHARE salesshare ADD TABLE public.tickit_sales_redshift;
ALTER DATASHARE salesshare ADD ALL TABLES IN SCHEMA PUBLIC;</code></pre>
            
            <p>Vous pouvez également ajouter des vues à une unité de partage des données.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE VIEW public.sales_data_summary_view AS SELECT * FROM public.tickit_sales_redshift;
ALTER DATASHARE salesshare ADD TABLE public.sales_data_summary_view;</code></pre>

         
            <p>Utilisez ALTER DATASHARE pour partager des schémas, des tables, des vues et des fonctions dans un schéma donné. Les super-utilisateurs, les propriétaires d’unité de partage des données ou les utilisateurs disposant des autorisations ALTER ou ALL sur l’unité de partage des données peuvent modifier l’unité de partage des données pour y ajouter des objets ou en supprimer. Les utilisateurs doivent avoir les autorisations nécessaires pour ajouter ou supprimer des objets de l’unité de partage des données. Les utilisateurs doivent également être les propriétaires des objets ou disposer des autorisations SELECT, USAGE ou ALL sur les objets.</p>  

            <p>Utilisez la clause INCLUDENEW pour ajouter des tables, des vues ou des fonctions SQL définies par l’utilisateur (UDF) créées dans un schéma spécifié à l’unité de partage des données. Seuls les super-utilisateurs peuvent modifier cette propriété pour chaque paire datashare-schéma.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare ADD SCHEMA PUBLIC;
ALTER DATASHARE salesshare SET INCLUDENEW = TRUE FOR SCHEMA PUBLIC;</code></pre>

            <p>Vous pouvez également utiliser la console Amazon Redshift pour ajouter ou supprimer des objets des unités de partage des données. Pour plus d’informations, consultez <a href="./datashare-creation.html#add-datashare-object-console">Ajouter des objets d’unité de partage des données aux unités de partage des données</a>, <a href="./manage-datashare-existing-console.html#remove-datashare-object-console">Supprimer des objets d’unité de partage des données des unités de partage des données</a> et <a href="./manage-datashare-existing-console.html#edit-datashare-console">Modification des unités de partage des données créées dans votre compte</a>.</p></li><li><p>Ajoutez ou supprimez des consommateurs des unités de partage des données. L’exemple suivant ajoute l’espace de noms de cluster consommateur à <code class="code">salesshare</code>. L’espace de noms est l’identifiant global unique d’espace de noms (GUID) du cluster consommateur sur le compte. Pour plus d’informations, consultez <a href="./r_GRANT.html">GRANT</a> ou <a href="./r_REVOKE.html">REVOKE</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATASHARE salesshare TO NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>Vous ne pouvez accorder des autorisations qu’à un seul consommateur d’unité de partage des données dans une instruction GRANT.</p>
            
            <p>Les super-utilisateurs de cluster et les propriétaires d’objets d’unité de partage des données, ou les utilisateurs qui ont l’autorisation SHARE sur l’unité de partage des données, peuvent ajouter des consommateurs dans une unité de partage des données, ou en supprimer. Pour ce faire, ils utilisent GRANT USAGE ou REVOKE USAGE.</p>
            <p>Pour rechercher l’espace de noms du cluster que vous voyez actuellement, vous pouvez utiliser la commande SELECT CURRENT_NAMESPACE. Pour trouver l’espace de noms d’un cluster différent dans le même Compte AWS, accédez à la page de détails du cluster, dans la console Amazon Redshift. Sur cette page, recherchez le champ d’espace de noms nouvellement ajouté.</p>
            <p>Vous pouvez également utiliser la console Amazon Redshift pour ajouter ou supprimer des consommateurs de données pour les unités de partage des données. Pour plus d’informations, consultez <a href="./datashare-creation.html#add-data-consumer-console">Ajouter des consommateurs de données aux unités de partage des données</a> et <a href="./manage-datashare-existing-console.html#remove-data-consumer-console">Supprimer des consommateurs de données des unités de partage des données</a>.</p>
         </li><li><p>(Facultatif) Ajoutez des restrictions de sécurité à l’unité de partage des données. L’exemple suivant montre que le cluster consommateur avec un accès IP public est autorisé à lire l’unité de partage des données. Pour plus d'informations, consultez <a href="./r_ALTER_DATASHARE.html">ALTER DATASHARE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare SET PUBLICACCESSIBLE = TRUE;</code></pre>

            <p>Vous pouvez modifier les propriétés du type de consommateurs après la création de l’unité de partage des données. Par exemple, vous pouvez définir que les clusters qui souhaitent consommer des données d’une unité de partage des données donné ne peuvent pas être accessibles publiquement. Les requêtes provenant de clusters consommateur qui ne respectent pas les restrictions de sécurité spécifiées dans l’unité de partage des données sont rejetées au moment de l’exécution de la requête.</p>
            <p>Vous pouvez également utiliser la console Amazon Redshift pour modifier les datashares. Pour plus d'informations, consultez <a href="./manage-datashare-existing-console.html#edit-datashare-console">Modification des unités de partage des données créées dans votre compte</a>.</p>
            
         </li><li><p>Répertorie les unités de partage des données créées dans le cluster et examine le contenu de l’unité de partage des données.</p>

            <p>L’exemple suivant montre comment afficher les informations d’une unité de partage des données nommée <code class="code">salesshare</code>. Pour plus d’informations, consultez <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> et <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DESC DATASHARE salesshare;

               
 producer_account  |          producer_namespace          | share_type | share_name | object_type |           object_name          |   include_new
-------------------+--------------------------------------+------------+------------+-------------+--------------------------------+-------------------
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_users_redshift   |   
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_venue_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_category_redshift|
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_date_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_event_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_listing_redshift |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | table       | public.tickit_sales_redshift   |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | schema      | public                         |  t
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | OUTBOUND   | salesshare | view        | public.sales_data_summary_view |</code></pre>
            
            <p>L'exemple suivant montre comment afficher les datashares sortants dans un cluster producteur.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SHOW DATASHARES LIKE 'sales%';</code></pre>
            <p>La sortie ressemble à ce qui suit.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">share_name | share_owner  | source_database | consumer_database | share_type |     createdate      | is_publicaccessible  | share_acl | producer_account |          producer_namespace 
-----------+--------------+-----------------+-------------------+------------+---------------------+----------------------+-----------+------------------+---------------------------------------
salesshare |    100       | dev             |                   |  OUTBOUND  | 2020-12-09 02:27:08 |          True        |           |   123456789012   | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d </code></pre>
            <p>Pour plus d’informations, consultez <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> et <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>. </p>
            <p>Vous pouvez également utiliser <a href="./r_SVV_DATASHARES.html">SVV_DATASHARES</a>, <a href="./r_SVV_DATASHARE_CONSUMERS.html">SVV_DATASHARE_CONSUMERS</a>, et <a href="./r_SVV_DATASHARE_OBJECTS.html">SVV_DATASHARE_OBJECTS</a> pour afficher les datashares, les objets du datashare et les consommateurs de datashare.</p>
         </li><li><p>Supprimer des unités de partage des données. Pour plus d'informations, consultez <a href="./r_DROP_DATASHARE.html">DROP DATASHARE</a>.</p>
            <p>Vous pouvez supprimer les objets d’unité de partage des données à tout moment à l’aide de <a href="./r_DROP_DATASHARE.html">DROP DATASHARE</a>. Les super-utilisateurs de cluster et les propriétaires d’unité de partage des données peuvent supprimer des unités de partage des données.</p>

            <p>L’exemple suivant supprime une unité de partage des données appelé <code class="code">salesshare</code>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DROP DATASHARE salesshare;</code></pre>

            <p>Vous pouvez également utiliser la console Amazon Redshift pour supprimer des unités de partage des données. Pour plus d'informations, consultez <a href="./manage-datashare-existing-console.html#delete-datashare-console">Suppression des unités de partage des données  créées dans votre compte</a>.</p>
         </li><li><p>Utilisez ALTER DATASHARE pour supprimer des objets des datashares à n'importe quel point du datashare. Utilisez REVOKE USAGE ON pour révoquer les autorisations de certains consommateurs sur l’unité de partage des données. Il révoque les autorisations USAGE sur les objets dans une unité de partage des données et arrête instantanément l’accès à tous les clusters consommateur. Répertorier des unités de partage des données et des requêtes de métadonnées, telles que la liste des bases de données et des tables, ne renvoie pas les objets partagés après la révocation de l’accès.</p>

            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">ALTER DATASHARE salesshare REMOVE TABLE public.tickit_sales_redshift;</code></pre>

            <p>Vous pouvez également utiliser la console Amazon Redshift pour modifier les datashares. Pour plus d'informations, consultez <a href="./manage-datashare-existing-console.html#edit-datashare-console">Modification des unités de partage des données créées dans votre compte</a>.</p>
         </li><li><p>Révoquez l’accès à l’unité de partage des données depuis les espaces de noms si vous ne souhaitez plus partager les données avec les consommateurs.</p>

            
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">REVOKE USAGE ON DATASHARE salesshare FROM NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>Vous pouvez également utiliser la console Amazon Redshift pour modifier les datashares. Pour plus d'informations, consultez <a href="./manage-datashare-existing-console.html#edit-datashare-console">Modification des unités de partage des données créées dans votre compte</a>.</p>
         </li></ol></div><div class="procedure"><h6>Pour partager des données à des fins de lecture en tant qu’administrateur de cluster consommateur</h6><ol><li><p>Répertorier les unités de partage des données mises à votre disposition et afficher leur contenu. Pour plus d’informations, consultez <a href="./r_DESC_DATASHARE.html">DESC DATASHARE</a> et <a href="./r_SHOW_DATASHARES.html">SHOW DATASHARES</a>.</p>
            <p>L’exemple suivant montre comment afficher les informations des unités de partage des données entrants d’un espace de noms producteur spécifié. Lorsque vous exécutez DESC DATASHARE en tant qu’administrateur de cluster consommateur, vous devez spécifier l’option NAMESPACE pour afficher les unités de partage des données entrantes. </p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">DESC DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';


 producer_account  |          producer_namespace          | share_type | share_name | object_type |           object_name           |   include_new
-------------------+--------------------------------------+------------+------------+-------------+---------------------------------+------------------
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_users_redshift    |     
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_venue_redshift    |     
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_category_redshift |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_date_redshift     |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_event_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_listing_redshift  |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | table       | public.tickit_sales_redshift    |
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | schema      | public                          |    
 123456789012      | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d | INBOUND    | salesshare | view        | public.sales_data_summary_view  |   </code></pre>
            <p>Seuls les super-utilisateurs de cluster peuvent le faire. Vous pouvez également utiliser SVV_DATASHARES pour afficher les unités de partage des données et SVV_DATASHARE_OBJECTS pour afficher les objets dans l’unité de partage des données.</p>
            <p>L'exemple suivant affiche les datashares entrants dans un cluster consommateur.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SHOW DATASHARES LIKE 'sales%';


 share_name | share_owner | source_database | consumer_database | share_type | createdate | is_publicaccessible | share_acl | producer_account |          producer_namespace
------------+-------------+-----------------+-------------------+------------+------------+---------------------+-----------+------------------+--------------------------------------
 salesshare |             |                 |                   | INBOUND    |            |         t           |           |   123456789012   | 13b8833d-17c6-4f16-8fe4-1a018f5ed00d</code></pre>
         </li><li><p>En tant que super-utilisateur de base de données, vous pouvez créer des bases de données locales qui font référence aux unités de partage des données. Pour plus d'informations, consultez <a href="./r_CREATE_DATABASE.html">CREATE DATABASE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sales_db FROM DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>
            
            <p>Si vous souhaitez un contrôle plus précis de l’accès aux objets de la base de données locale, utilisez la clause WITH PERMISSIONS quand vous créez la base de données. Cela vous permet d’accorder des autorisations de niveau objet pour les objets de la base de données à l’étape 4. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE DATABASE sales_db WITH PERMISSIONS FROM DATASHARE salesshare OF NAMESPACE '13b8833d-17c6-4f16-8fe4-1a018f5ed00d';</code></pre>

            <p>Vous pouvez voir les bases de données que vous avez créées à partir de l’unité de partage des données en interrogeant la vue <a href="./r_SVV_REDSHIFT_DATABASES.html">SVV_REDSHIFT_DATABASES</a>. Vous ne pouvez pas vous connecter à ces bases de données créées à partir d’unités de partage des données, et elles sont en lecture seule. Toutefois, vous pouvez vous connecter à une base de données locale sur votre cluster consommateur et effectuer une requête entre bases de données pour interroger les données des bases de données créées à partir des unités de partage des données. Vous ne pouvez pas créer une unité de partage des données au-dessus des objets de base de données créés à partir d’une unité de partage des données existant. Toutefois, vous pouvez copier les données dans une table distincte du cluster consommateur, effectuer le traitement nécessaire, puis partager les nouveaux objets créés.</p>
            <p>Vous pouvez également utiliser la console Amazon Redshift pour créer des bases de données à partir des unités de partage des données. Pour plus d'informations, consultez <a href="./query-datashare-console.html#create-database-from-datashare-console">Créer des bases de données à partir d’unités de partage des données</a>.</p>

         </li><li><p>(Facultatif) Créez des schémas externes pour faire référence et attribuer des autorisations détaillées à des schémas spécifiques dans la base de données consommateur importée sur le cluster consommateur. Pour plus d'informations, consultez <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA sales_schema FROM REDSHIFT DATABASE 'sales_db' SCHEMA 'public';</code></pre>

     

         </li><li><p>Selon les besoins, accordez aux utilisateurs et rôles du cluster consommateur des autorisations sur les bases de données et références de schéma créées à partir des unités de partage des données. Pour plus d’informations, consultez <a href="./r_GRANT.html">GRANT</a> ou <a href="./r_REVOKE.html">REVOKE</a>.</p>

            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON DATABASE sales_db TO Bob;</code></pre>
            
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT USAGE ON SCHEMA sales_schema TO ROLE Analyst_role;</code></pre>

            <p>Si vous avez créé votre base de données sans la clause WITH PERMISSIONS, vous ne pouvez attribuer des autorisations sur l’ensemble de la base de données créée à partir de l’unité de partage des données qu’à vos utilisateurs et groupes. Dans certains cas, vous avez besoin de contrôles précis sur un sous-ensemble d’objets de base de données créés à partir de l’unité de partage des données. Si tel est le cas, vous pouvez créer une référence de schéma externe tournée vers des schémas spécifiques dans l’unité de partage des données (comme décrit à l’étape précédente) et fournir des autorisations détaillées au niveau du schéma. </p>
                  <p>Vous pouvez également créer des vues à liaison tardive sur les objets partagés et les utiliser pour attribuer des autorisations détaillées. Vous pouvez également envisager que les clusters producteur créent des unités de partage des données supplémentaires pour vous avec la précision requise. </p>
            <p>Si vous avez créé votre base de données avec la clause WITH PERMISSIONS à l’étape 2, vous devez attribuer des autorisations de niveau objet dans la base de données partagée. Un utilisateur disposant uniquement de l’autorisation USAGE ne peut accéder à aucun objet d’une base de données créée avec la clause WITH PERMISSIONS tant qu’il n’a pas obtenu d’autorisations de niveau objet supplémentaires.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">GRANT SELECT ON sales_db.public.tickit_sales_redshift to Bob;</code></pre>

         </li><li><p>Interroger les données dans les objets partagés dans les unités de partage des données.</p>
            <p>Les utilisateurs et les rôles disposant d’autorisations sur les bases de données consommateur et les schémas sur les clusters consommateur peuvent explorer et naviguer entre les métadonnées de tous les objets partagés. Ils peuvent également explorer et naviguer entre les objets locaux dans un cluster consommateur. Pour ce faire, ils utilisent des pilotes JDBC ou ODBC ou des vues SVV_ALL et SVV_REDSHIFT.</p>
                  <p>Les clusters producteur peuvent avoir de nombreux schémas dans la base de données, les tables et les vues au sein de chaque schéma. Les utilisateurs du côté consommateur ne peuvent voir que le sous-ensemble d’objets mis à disposition via l’unité de partage des données. Ces utilisateurs ne peuvent pas voir l’intégralité des métadonnées du cluster producteur. Cette approche permet de fournir un contrôle détaillé de la sécurité des métadonnées avec le partage des données.</p>
            <p>Vous continuez à vous connecter aux bases de données de cluster locales. Mais maintenant, vous pouvez également lire à partir des bases de données et des schémas qui sont créés à partir de l’unité de partage des données en utilisant la notation database.schema.table en trois parties. Vous pouvez effectuer des requêtes qui s’étendent sur toutes les bases de données qui sont visibles pour vous. Il peut s’agir de bases de données locales sur le cluster ou de bases de données créées à partir des unités de partage des données. Les clusters consommateur ne peuvent pas se connecter aux bases de données créées à partir des unités de partage des données.</p>
            <p>Vous pouvez accéder aux données à l’aide d’une qualification complète. Pour plus d'informations, consultez <a href="./cross-database_example.html">Exemples d’utilisation d’une requête entre bases de données</a>.</p>
            
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">SELECT * FROM sales_db.public.tickit_sales_redshift ORDER BY 1,2 LIMIT 5;

 salesid | listid | sellerid | buyerid | eventid | dateid | qtysold | pricepaid | commission |      saletime
---------+--------+----------+---------+---------+--------+---------+-----------+------------+---------------------
       1 |      1 |    36861 |   21191 |    7872 |   1875 |       4 |    728.00 |     109.20 | 2008-02-18 02:36:48
       2 |      4 |     8117 |   11498 |    4337 |   1983 |       2 |     76.00 |      11.40 | 2008-06-06 05:00:16
       3 |      5 |     1616 |   17433 |    8647 |   1983 |       2 |    350.00 |      52.50 | 2008-06-06 08:26:17
       4 |      5 |     1616 |   19715 |    8647 |   1986 |       1 |    175.00 |      26.25 | 2008-06-09 08:38:52
       5 |      6 |    47402 |   14115 |    8240 |   2069 |       2 |    154.00 |      23.10 | 2008-08-31 09:17:02</code></pre>
            <p>Vous ne pouvez utiliser les instructions SELECT que sur les objets partagés. Toutefois, vous pouvez créer des tables dans le cluster consommateur en interrogeant les données des objets partagés dans une base de données locale différente.</p><p>En plus des requêtes, les consommateurs peuvent créer des vues sur des objets partagés. Seules les vues à liaison tardive ou les vues matérialisées sont prises en charge. Amazon Redshift ne prend pas en charge les vues standard sur les données partagées. Les vues créées par les consommateurs peuvent s’étendre sur plusieurs bases de données locales ou bases de données créées à partir d’unités de partage des données. Pour plus d'informations, consultez <a href="./r_CREATE_VIEW.html">CREATE VIEW</a>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">// Connect to a local cluster database
               
// Create a view on shared objects and access it. 
CREATE VIEW sales_data 
AS SELECT * 
FROM sales_db.public.tickit_sales_redshift 
WITH NO SCHEMA BINDING;

SELECT * FROM sales_data;</code></pre>
         </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./getting-started-datashare-sql.html">Gestion du partage de données à l’aide de l’interface SQL</div><div id="next" class="next-link" accesskey="n" href="./across-account.html">Partage de données entre Comptes AWS</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/within-account.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>