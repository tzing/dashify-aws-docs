<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ingestion en streaming - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="materialized-view-streaming-ingestion" /><meta name="default_state" content="materialized-view-streaming-ingestion" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion.html" /><meta name="description" content="Découvrez comment utiliser l’ingestion en streaming pour diffuser des données depuis des services de streaming vers Amazon Redshift." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt de données avec Amazon Redshift, service d’entrepôt de données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="Ingestion en streaming" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Ingestion en streaming - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#materialized-view-streaming-ingestion" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt de données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Création de vues matérialisées dans Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Ingestion en streaming",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-overview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#materialized-view-streaming-ingestion" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="page-toc-src"><a href="#materialized-view-streaming-ingestion-data-flow">Flux de données</a><a href="#materialized-view-streaming-ingestion-use-cases">Cas d’utilisation d’ingestion en streaming</a><a href="#materialized-view-streaming-ingestion-considerations">Considérations de l’ingestion en streaming</a><a href="#materialized-view-streaming-ingestion-limitations">Limites</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="materialized-view-streaming-ingestion">Ingestion en streaming</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p> L’ingestion en streaming garantit une ingestion à faible latence et à haute vitesse des données de flux provenant d’<a href="https://aws.amazon.com/kinesis/data-streams/" rel="noopener noreferrer" target="_blank"><span>Amazon Kinesis Data Streams</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> et d’<a href="https://aws.amazon.com/msk/" rel="noopener noreferrer" target="_blank"><span>Amazon Managed Streaming for Apache Kafka</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> dans une vue matérialisée Amazon Redshift sans serveur ou une vue Amazon Redshift provisionnée. Elle permet de réduire le temps nécessaire pour accéder aux données et les frais de stockage. Vous pouvez configurer l’ingestion en streaming de votre cluster Amazon Redshift ou pour Amazon Redshift sans serveur et créer une vue matérialisée au moyen d’instructions SQL, comme décrit dans <a href="./materialized-view-overview.html">Création de vues matérialisées dans Amazon Redshift</a>. Ensuite, à l’aide de l’actualisation des vues matérialisées, vous pouvez ingérer des centaines de mégaoctets de données par seconde. Cela garantit un accès rapide aux données externes qui sont rapidement actualisées. </p>
            <h2 id="materialized-view-streaming-ingestion-data-flow">Flux de données</h2>
            <p> Un cluster Amazon Redshift provisionné ou un groupe de travail Amazon Redshift sans serveur est le consommateur de flux. Une vue matérialisée correspond à la zone d’arrivée des données lues à partir du flux, qui sont traitées au fur et à mesure de leur arrivée. Par exemple, les valeurs JSON peuvent être consommées et mappées à des colonnes de données de la vue matérialisée à l’aide d’instructions SQL familières. Lorsque la vue matérialisée est actualisée, les nœuds de calcul Amazon Redshift allouent chaque partition de données Kinesis ou partition Kafka à une tranche de calcul. Chaque tranche consomme des données provenant des partitions allouées, jusqu’à ce que la vue atteigne la parité avec le <code class="code">SEQUENCE_NUMBER</code> pour le flux Kinesis ou le dernier <code class="code">Offset</code> pour la rubrique Kafka. La vue matérialisée suivante actualise les données de lecture du dernier <code class="code">SEQUENCE_NUMBER</code> de l’actualisation précédente, jusqu’à atteindre la parité avec les données du flux ou de la rubrique. </p>
      
     
         
            <h2 id="materialized-view-streaming-ingestion-use-cases">Cas d’utilisation d’ingestion en streaming</h2>
            <p> Les cas d’utilisation pour l’ingestion en streaming Amazon Redshift impliquent d’utiliser des données générées de manière continue (diffusées en continu) et devant être traitées dans un court délai (latence) après leur génération. C’est ce que l’on appelle l’analytique en temps quasi réel. Les sources de données peuvent varier et inclure des appareils IoT, des données télémétriques de système ou des données de flux de clics provenant d’un site web ou d’une application fréquentés. </p>
         
                <h2 id="materialized-view-streaming-ingestion-considerations">Considérations de l’ingestion en streaming</h2>
                <p>Vous trouverez ci-dessous des considérations importantes et des bonnes pratiques en matière de performances et de facturation lors de la configuration de votre environnement d’ingestion en streaming.</p>
                <div class="itemizedlist">
       
                    
                 
                     
                     
      
      
                     
                    
                     
                    
                     
                     
                    
                     
                    
                    
                <ul class="itemizedlist"><li class="listitem"><p><em>Utilisation et activation de l’actualisation automatique</em> – Les requêtes d’actualisation automatique pour une ou plusieurs vues matérialisées sont traitées comme n’importe quelle autre charge de travail utilisateur. L’actualisation automatique charge les données du flux à mesure qu’elles arrivent. </p>
                   <p>L’actualisation automatique peut être activée explicitement pour une vue matérialisée créée pour l’ingestion en streaming. Pour ce faire, spécifiez <code class="code">AUTO REFRESH</code> dans la définition de la vue matérialisée. Par défaut, l’actualisation est manuelle. Pour spécifier l’actualisation automatique pour une vue matérialisée existante à des fins d’ingestion en streaming, vous pouvez exécuter <code class="code">ALTER MATERIALIZED VIEW</code> pour l’activer. Pour en savoir plus, consultez <a href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-create-sql-command.html">CREATE MATERIALIZED VIEW</a> ou <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_ALTER_MATERIALIZED_VIEW.html">ALTER MATERIALIZED VIEW</a>.</p>
                    </li><li class="listitem">
                        <p><em>Ingestion en streaming et Amazon Redshift sans serveur</em> : les mêmes instructions d’installation et de configuration qui s’appliquent à l’ingestion en streaming Amazon Redshift sur un cluster provisionné s’appliquent également à l’ingestion en streaming sur Amazon Redshift sans serveur. Il est important de dimensionner Amazon Redshift sans serveur avec le niveau de RPU nécessaire pour prendre en charge l’ingestion en streaming avec l’actualisation automatique et d’autres charges de travail. Pour obtenir plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-billing.html">Facturation d’Amazon Redshift sans serveur</a>.</p>
              
                    </li><li class="listitem">
                        <p><em>Amazon Redshift nodes in a different availability zone than the Amazon MSK cluster</em> (Nœuds Amazon Redshift dans une zone de disponibilité différente de celle du cluster Amazon MSK) : lorsque vous configurez l’ingestion en streaming, Amazon Redshift tente de se connecter à un cluster Amazon MSK situé dans la même zone de disponibilité, si la prise en compte des racks est activée pour Amazon MSK. Si tous vos nœuds se trouvent dans des zones de disponibilité différentes de celles de votre cluster Amazon Redshift, vous pouvez encourir des frais de transfert de données entre zones de disponibilité. Pour éviter cela, conservez au moins un nœud de cluster d’agent Amazon MSK dans la même zone de disponibilité que votre cluster Amazon Redshift. </p>
                    </li><li class="listitem">
                        <p><em>Refresh start location</em> (Emplacement de départ de l’actualisation) : après avoir créé une vue matérialisée, son actualisation initiale commence à partir du <code class="code">TRIM_HORIZON</code> d’un flux Kinesis ou à partir du décalage 0 d’une rubrique Amazon MSK.</p></li><li class="listitem">
                        <p> <em>Data formats</em> (Formats de données) : les formats de données pris en charge sont limités à ceux pouvant être convertis depuis <code class="code">VARBYTE</code>. Pour plus d’informations, consultez <a href="./r_VARBYTE_type.html">Type VARBYTE</a> et <a href="./r_VARBYTE_OPERATORS.html">Opérateurs VARBYTE</a>. </p>
                    </li><li class="listitem"><p><em>Streaming to multiple materialized views</em> (Diffusion vers plusieurs vues matérialisées) : dans Amazon Redshift, nous vous recommandons dans la plupart des cas de placer les données de chaque flux dans une seule vue matérialisée. Il est toutefois possible d’ingérer un flux et d’afficher les données dans plusieurs vues matérialisées. Par exemple, un cas d’utilisation dans lequel vous ingérez un flux contenant des données sportives, mais vous organisez les données de chaque sport dans des vues matérialisées distinctes.</p>
                        <p>Notez que lorsque vous ingérez des données dans plusieurs vues matérialisées et que vous les actualisez, les frais de sortie peuvent être plus élevés, en particulier pour la lecture des données provenant du fournisseur de streaming. En outre, une utilisation plus importante des ressources pour la lecture dans plusieurs vues matérialisées peut avoir un impact sur d’autres charges de travail. Notez également les limites en termes de bande passante, de débit et de performances de votre fournisseur de streaming. Pour plus d’informations sur la tarification des flux de données, consultez <a href="https://aws.amazon.com/kinesis/data-streams/pricing/" rel="noopener noreferrer" target="_blank"><span>Kinesis Data Streams pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> (Tarification de Kinesis Data Streams) et <a href="https://aws.amazon.com/msk/pricing/" rel="noopener noreferrer" target="_blank"><span>Amazon Managed Streaming for Apache Kafka pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> (Tarification d’Amazon Managed Streaming for Apache Kafka).</p>
                    </li><li class="listitem"><p><em>Ajouter des enregistrements à une table</em> : vous pouvez exécuter <code class="code">ALTER TABLE APPEND</code> pour ajouter des lignes à une table cible à partir d’une vue matérialisée source existante. Cela ne fonctionne que si la vue matérialisée est configurée pour l’ingestion en streaming. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_ALTER_TABLE_APPEND.html">ALTER TABLE APPEND</a>.</p></li><li class="listitem"><p><em>Exécution de TRUNCATE ou DELETE</em> : vous pouvez supprimer des enregistrements d’une vue matérialisée utilisée pour l’ingestion en streaming en utilisant deux méthodes :</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem"><p><code class="code">TRUNCATE</code> : cette commande supprime toutes les lignes à partir d’une vue matérialisée configurée pour l’ingestion en streaming. Elle n’effectue pas d’analyse de la table. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_TRUNCATE.html">TRUNCATE</a>.</p></li><li class="listitem"><p><code class="code">DELETE</code> : cette commande supprime toutes les lignes à partir d’une vue matérialisée configurée pour l’ingestion en streaming. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_DELETE.html">DELETE</a>.</p></li></ul></div>
                    </li></ul></div>
                
                 
                    <h3 id="materialized-view-streaming-methods">Utilisation de l’ingestion en streaming par rapport aux données intermédiaires dans Amazon S3</h3>
                    <p> Il existe plusieurs options pour diffuser des données vers Amazon Redshift ou vers Amazon Redshift sans serveur. Deux options bien connues sont l’ingestion en streaming, telle que décrite dans cette rubrique, ou la configuration d’un flux de diffusion vers Amazon S3 avec Kinesis Data Firehose. La liste suivante décrit chaque méthode : </p>  
                    <div class="orderedlist">
                         
                         
                    <ol><li><p> L’ingestion en streaming depuis Kinesis Data Streams ou Amazon Managed Streaming for Apache Kafka vers Amazon Redshift ou Amazon Redshift sans serveur implique la configuration d’une vue matérialisée pour recevoir les données. </p></li><li><p>La diffusion de données dans Amazon Redshift à l’aide de Kinesis Data Streams et le streaming via Kinesis Data Firehose implique de connecter le flux source à Amazon Kinesis Data Firehose et d’attendre que Kinesis Data Firehose transfère les données dans Amazon S3. Ce procédé utilise des lots de tailles différentes avec des intervalles de mémoire tampon de longueur variable. Après la diffusion vers Amazon S3, Kinesis Data Firehose déclenche une commande COPY pour charger les données. </p></li></ol></div>
                    <p>Avec l’ingestion en streaming, vous contournez plusieurs étapes requises pour le second processus :</p>
                    <div class="itemizedlist">
                         
                         
                         
                    <ul class="itemizedlist"><li class="listitem"><p>Il n’est pas nécessaire d’envoyer des données vers un flux de diffusion Amazon Kinesis Data Firehose, car avec l’ingestion en streaming, les données peuvent être envoyées directement depuis Kinesis Data Streams vers une vue matérialisée dans une base de données Redshift.</p></li><li class="listitem"><p>Il n’est pas nécessaire de transférer les données diffusées dans Amazon S3, car les données d’ingestion en streaming sont directement transférées vers la vue matérialisée Redshift.</p></li><li class="listitem"><p>Il n’est pas nécessaire d’écrire et d’exécuter des commandes COPY car les données de la vue matérialisée sont actualisées directement à partir du flux. Le chargement de données depuis Amazon S3 vers Redshift ne fait pas partie du processus.</p></li></ul></div>
                    <p>Notez que l’ingestion en streaming est limitée aux flux provenant d’Amazon Kinesis Data Streams et aux rubriques provenant d’Amazon MSK. Pour diffuser depuis Kinesis Data Streams vers des sources autres qu’Amazon Redshift, il est probable que vous ayez besoin d’un flux de diffusion Kinesis Data Firehose. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/firehose/latest/dev/basic-write.html">Envoi de données à un flux de diffusion Amazon Kinesis Data Firehose</a>.</p>
                 
             
                    <h2 id="materialized-view-streaming-ingestion-limitations">Limites</h2>
                    
                    <div class="table-container"><div class="table-contents"><table id="w319aac21c47c11b3"><thead>
                                <tr>
                                    <th>Fonction ou comportement </th>
                                    <th>Description </th>
                                </tr>
                            </thead>
                   
                                
                                <tr>
                                    <td tabindex="-1"><b>Kafka topic length limit</b> (Limite de longueur des rubriques Kafka) </td>
                                    <td tabindex="-1"><p>Il n’est pas possible d’utiliser une rubrique Kafka dont le nom comporte plus de 128 caractères (guillemets non compris). Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_names.html">Noms et identificateurs</a>.</p></td>
                                </tr>
                                <tr>
                                    <td tabindex="-1"><b>Incremental refreshes and JOINs on a materialized view</b> (Actualisations et JOIN incrémentiels sur une vue matérialisée)</td>
                                    <td tabindex="-1"><p>La vue matérialisée doit être gérable de manière progressive. Le recalcul complet est impossible pour Kinesis ou Amazon MSK, car ils ne conservent pas l’historique des flux ou des rubriques après 24 heures ou 7 jours, par défaut. Vous pouvez définir des périodes de conservation des données plus longues dans Kinesis ou Amazon MSK. Cependant, cela peut entraîner une maintenance et des frais supplémentaires. De plus, les JOIN ne sont actuellement pas pris en charge sur les vues matérialisées créées sur un flux Kinesis ou sur une rubrique Amazon MSK. Après avoir créé une vue matérialisée sur votre flux ou rubrique, vous pouvez créer une autre vue matérialisée pour joindre votre vue matérialisée de streaming à d’autres vues matérialisées, tables ou vues.</p>
                                        <p>Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-refresh-sql-command.html">REFRESH MATERIALIZED VIEW</a>.</p></td>
                                </tr>
                                
                   
                                <tr>
                                    <td tabindex="-1"><b>Record parsing</b> (Analyse des enregistrements)</td>
                                    <td tabindex="-1"><p>L’ingestion en streaming Amazon Redshift ne prend pas en charge l’analyse des enregistrements agrégés par la Kinesis Producer Library (<a href="https://docs.aws.amazon.com/kinesis/latest/dev/kinesis-kpl-concepts.html#kinesis-kpl-concepts-aggretation">KPL Key Concepts - Aggregation</a> (Concepts clés KPL – Agrégation)). Les registres agrégés sont ingérés, mais sont stockés sous forme de données de tampon de protocole binaire. (Consultez <a href="https://developers.google.com/protocol-buffers" rel="noopener noreferrer" target="_blank"><span>Protocol Buffers</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> pour plus d’informations.) Selon la manière dont vous transmettez les données à Kinesis, vous devrez peut-être désactiver cette fonction. </p></td>
                                </tr>
                                
                  
                       
                               
                                <tr>
                                    <td tabindex="-1"><b>Decompression</b> (Décompression) </td>
                                    <td tabindex="-1"><p><code class="code">VARBYTE</code> ne prend en charge aucune méthode de décompression actuellement. De ce fait, les enregistrements contenant des données compressées ne peuvent pas être interrogés dans Redshift. Décompressez vos données avant de les envoyer dans le flux Kinesis ou dans la rubrique Amazon MSK.</p></td>
                                </tr>
                                
                                <tr>
                                    <td tabindex="-1"><b>Maximum record size</b> (Taille d’enregistrement maximale) </td>
                                    <td tabindex="-1"><p>La taille maximale de tout champ d’enregistrement qu’Amazon Redshift peut ingérer depuis Kinesis ou Amazon MSK est légèrement inférieure à 1 Mo. Les points suivants détaillent le comportement :</p><div class="itemizedlist">
                                             
                                             
                                        <ul class="itemizedlist"><li class="listitem"><p><b>Maximum VARBYTE length</b> (Longueur VARBYTE maximale) : le type <code class="code">VARBYTE</code> prend en charge les données d’une longueur maximale de 1 024 000 octets. Comme Kinesis limite les charges utiles à 1 Mo, après l’encodage Base64, toutes les données Kinesis peuvent être ingérées par Amazon Redshift.</p></li><li class="listitem"><p><b>Message limits</b> (Limites de messages) : la configuration Amazon MSK par défaut limite les messages à 1 Mo. De plus, si un message inclut des en-têtes, la quantité de données est limitée à 1 048 470 octets. Avec les paramètres par défaut, il n’y a aucun problème d’ingestion. Vous pouvez toutefois modifier la taille maximale des messages pour Kafka, et donc Amazon MSK, en leur attribuant une valeur plus élevée. Dans ce cas, il est possible que le champ clé/valeur d’un enregistrement Kafka, ou l’en-tête, dépasse la limite de taille. Ces enregistrements peuvent provoquer une erreur et ne sont pas ingérés.</p></li></ul></div></td>
                                </tr>
                   
                                
                                <tr>
                                    <td tabindex="-1"><b>Enregistrements d’erreurs</b> </td>
                                    <td tabindex="-1"><p>Chaque fois qu’un enregistrement ne peut pas être ingéré dans Redshift parce que la taille des données dépasse la taille maximale, cet enregistrement est ignoré. L’actualisation de la vue matérialisée réussit toujours, dans ce cas, et un segment de chaque enregistrement d’erreur est écrit dans la table système <a href="./r_SYS_STREAM_SCAN_ERRORS.html">SYS_STREAM_SCAN_ERRORS</a>. Les erreurs résultant de la logique métier, telles qu’une erreur de calcul ou une erreur résultant d’une conversion de type, ne sont pas ignorées. Testez soigneusement la logique avant d’ajouter une logique à la définition de votre vue matérialisée, afin d’éviter ces problèmes.</p></td>
                                </tr>
                   
                     
                            </table></div></div>
                    
                    
                    
                    
                    
                    
                    
                    
                <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./materialized-view-UDFs.html">Utilisation d’une fonction définie par l’utilisateur (UDF) dans une vue matérialisée</div><div id="next" class="next-link" accesskey="n" href="./materialized-view-streaming-ingestion-getting-started.html">Mise en route de l’ingestion en streaming à partir d’Amazon Kinesis Data Streams</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>