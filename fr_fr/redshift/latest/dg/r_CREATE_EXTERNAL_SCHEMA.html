<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE EXTERNAL SCHEMA - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_EXTERNAL_SCHEMA" /><meta name="default_state" content="r_CREATE_EXTERNAL_SCHEMA" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="description" content="Crée un schéma externe." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt de données avec Amazon Redshift, service d’entrepôt de données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="CREATE EXTERNAL SCHEMA" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE EXTERNAL SCHEMA - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_CREATE_EXTERNAL_SCHEMA" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt de données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Référence SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Commandes SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE EXTERNAL SCHEMA",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_CREATE_EXTERNAL_SCHEMA" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="page-toc-src"><a href="#r_CREATE_EXTERNAL_SCHEMA-synopsis">Syntaxe</a><a href="#r_CREATE_EXTERNAL_SCHEMA-parameters">Paramètres</a><a href="#r_CREATE_EXTERNAL_SCHEMA_usage">Notes d’utilisation</a><a href="#r_CREATE_EXTERNAL_SCHEMA_examples">Exemples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="r_CREATE_EXTERNAL_SCHEMA">CREATE EXTERNAL SCHEMA</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Crée un schéma externe dans la base de données actuelle. Vous pouvez utiliser ce schéma externe pour vous connecter à des bases de données Amazon RDS for PostgreSQL ou d’édition compatible avec Amazon Aurora PostgreSQL. Vous pouvez également créer un schéma externe qui référence une base de données dans un catalogue de données externe tel que AWS Glue, Athena ou une base de données dans un métastore Apache Hive, tel qu’Amazon EMR.</p><p>Le propriétaire de ce schéma est l’auteur de la commande CREATE EXTERNAL SCHEMA. Pour transférer la propriété d’un schéma externe, utilisez <a href="./r_ALTER_SCHEMA.html">ALTER SCHEMA</a> pour modifier le propriétaire. Utilisez la commande <a href="./r_GRANT.html">GRANT</a> pour autoriser d’autres utilisateurs ou groupes d’utilisateurs à accéder au schéma. </p><p>Vous ne pouvez pas utiliser les commandes GRANT ou REVOKE pour des autorisations concernant une table externe. Vous pouvez en revanche accorder ou révoquer les autorisations pour le schéma externe. </p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Si vous disposez actuellement de tables externes Redshift Spectrum dans le catalogue de données Amazon Athena, vous pouvez procéder à la migration de votre catalogue de données Athena vers un AWS Glue Data Catalog. Pour utiliser le catalogue de données AWS Glue avec Redshift Spectrum, vous devrez peut-être modifier vos politiques AWS Identity and Access Management (IAM). Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/athena/latest/ug/glue-athena.html#glue-upgrade">Mise à niveau vers le catalogue de données AWS Glue</a> dans le <em>Guide de l’utilisateur Athena</em>.</p></div></div><p>Pour afficher les détails relatifs aux schémas externes, interrogez la vue système <a href="./r_SVV_EXTERNAL_SCHEMAS.html">SVV_EXTERNAL_SCHEMAS</a>. </p>
         <h2 id="r_CREATE_EXTERNAL_SCHEMA-synopsis">Syntaxe</h2>
         <p>La syntaxe suivante décrit la commande CREATE EXTERNAL SCHEMA utilisée pour référencer des données à l’aide d’un catalogue de données externe. Pour plus d'informations, consultez <a href="./c-using-spectrum.html">Interroger des données externes avec Amazon Redshift Spectrum</a>.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>local_schema_name</em>
FROM <span>{</span> [ DATA CATALOG ] | HIVE METASTORE | POSTGRES | MYSQL | KINESIS | MSK | REDSHIFT }
[ DATABASE '<em>database_name</em>' ]
[ SCHEMA '<em>schema_name</em>' ]
[ REGION '<em>aws-region</em>' ]
[ URI '<em>hive_metastore_uri</em>' [ PORT <em>port_number</em> ] ]
IAM_ROLE <span>{</span> default | 'SESSION' | 'arn:aws:iam::<code class="replaceable">&lt;Compte AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
[ SECRET_ARN '<em>ssm-secret-arn</em>' ]
[ AUTHENTICATION <span>{</span> none | iam } ]
[ CLUSTER_ARN 'arn:aws:kafka:<code class="replaceable">&lt;region&gt;</code>:<code class="replaceable">&lt;Compte AWS-id&gt;</code>:cluster/msk/<code class="replaceable">&lt;cluster uuid&gt;</code>' ]
[ CATALOG_ROLE <span>{</span> 'SESSION' | <em>'catalog-role-arn-string'</em> } ]
[ CREATE EXTERNAL DATABASE IF NOT EXISTS ]
[ CATALOG_ID '<em>Amazon Web Services account ID containing Glue or Lake Formation database</em>' ]</pre>

         <p>La syntaxe suivante décrit la commande CREATE EXTERNAL SCHEMA utilisée pour référencer des données à l’aide d’une requête fédérée vers RDS POSTGRES ou Aurora PostgreSQL. Vous pouvez également créer un schéma externe qui fait référence à des sources de streaming, telles que Kinesis Data Streams. Pour plus d'informations, consultez <a href="./federated-overview.html">Interrogation de données avec requête fédérée dans Amazon Redshift</a>.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>local_schema_name</em>
FROM POSTGRES
DATABASE '<em>federated_database_name</em>' [SCHEMA '<em>schema_name</em>']
URI '<em>hostname</em>' [ PORT <em>port_number</em> ]
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;Compte AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
SECRET_ARN '<em>ssm-secret-arn</em>'
</pre>

         
         
         
         <p>La syntaxe suivante décrit la commande CREATE EXTERNAL SCHEMA utilisée pour référencer des données à l’aide d’une requête fédérée vers RDS MySQL ou Aurora MySQL. Pour plus d'informations, consultez <a href="./federated-overview.html">Interrogation de données avec requête fédérée dans Amazon Redshift</a>.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>local_schema_name</em>
FROM MYSQL
DATABASE '<em>federated_database_name</em>'
URI '<em>hostname</em>' [ PORT <em>port_number</em> ]
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;Compte AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
SECRET_ARN '<em>ssm-secret-arn</em>'
</pre>

         
         <p>La syntaxe suivante décrit la commande CREATE EXTERNAL SCHEMA utilisée pour référencer des données dans un flux Kinesis. Pour plus d'informations, consultez <a href="./materialized-view-streaming-ingestion.html">Ingestion en streaming</a>.</p>

<pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>schema_name</em>
FROM KINESIS
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;Compte AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
</pre>

         
         <p>La syntaxe suivante décrit la commande CREATE EXTERNAL SCHEMA utilisée pour référencer le cluster Amazon Managed Streaming for Apache Kafka et ses rubriques à partir desquelles s’effectue l’ingestion. CLUSTER_ARN spécifie le cluster Amazon MSK à partir duquel vous lisez les données. Pour plus d'informations, consultez <a href="./materialized-view-streaming-ingestion.html">Ingestion en streaming</a>.</p>

         <pre class="screen">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] <em>schema_name</em>
FROM MSK
IAM_ROLE <span>{</span> default | 'arn:aws:iam::<code class="replaceable">&lt;Compte AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>' }
AUTHENTICATION <span>{</span> none | iam }
CLUSTER_ARN 'msk-cluster-arn';
</pre>

         

         <p>La syntaxe suivante décrit la commande CREATE EXTERNAL SCHEMA utilisée pour référencer des données à l’aide d’une requête entre bases de données.</p>
         <pre class="screen">CREATE EXTERNAL SCHEMA <em>local_schema_name</em>
FROM  REDSHIFT
DATABASE '<em>redshift_database_name</em>' SCHEMA '<em>redshift_schema_name</em>'</pre>

       
         <h2 id="r_CREATE_EXTERNAL_SCHEMA-parameters">Paramètres</h2>
         <div class="variablelist">
             
             
             

            

             

             

             
             

             
             
             
            
             
             
             
             

             
             

          
         <dl>
               <dt><span class="term">IF NOT EXISTS</span></dt>
               <dd>
                  <p>Clause indiquant que si le schéma spécifié existe déjà, la commande ne doit apporter aucune modification et renvoyer un message selon lequel le schéma existe, plutôt que de s’arrêter avec une erreur. Puisque cette clause est utile lors de l’écriture de scripts, le script n’échoue pas si CREATE EXTERNAL SCHEMA tente de créer un schéma qui existe déjà. </p>
               </dd>
             
               <dt><span class="term">local_schema_name</span></dt>
               <dd>
                  <p>Nom du nouveau schéma externe. Pour plus d’informations sur les noms valides, consultez <a href="./r_names.html">Noms et identificateurs</a>.</p>
               </dd>
             
               <dt><span class="term">FROM [ DATA CATALOG ] | HIVE METASTORE | POSTGRES | MYSQL | KINESIS | MSK | REDSHIFT </span></dt>
               <dd>
                  <p>Mot-clé indiquant où se situe la base de données externe. </p>
                  <p>DATA CATALOG indique que la base de données externe est définie dans le catalogue de données Athena ou AWS Glue Data Catalog. </p>
                  <p>Si la base de données externe est définie dans un catalogue de données externe dans une autre région AWS, le paramètre REGION est requis. La valeur par défaut est DATA CATALOG.</p>
                  <p>HIVE METASTORE indique que la base de données externe est définie dans un metastore Apache Hive. L’URI est obligatoire si HIVE METASTORE est spécifié. </p>
                  <p>POSTGRES indique que la base de données externe est définie dans RDS PostgreSQL ou Aurora PostgreSQL.</p>
                  <p>MYSQL indique que la base de données externe est définie dans RDS MySQL ou Aurora MySQL.</p>
                  <p>KINESIS indique que la source de données est un flux de Kinesis Data Streams.</p>
                  <p>MSK indique que la source de données est une rubrique d’Amazon MSK.</p>
               </dd>
             

               <dt><span class="term">FROM REDSHIFT</span></dt>
               <dd>
                  <p>Mot-clé indiquant que la base de données se trouve dans Amazon Redshift.</p>
               </dd>
             
               <dt><span class="term">DATABASE ’<em>nom_base_de_données_redshift</em>’ SCHEMA ’<em>nom_schéma_redshift</em>’</span></dt>
               <dd>
                  <p>Nom de la base de données Amazon Redshift. </p>
                  <p>Le <em>nom_schéma_redshift</em> indique le schéma dans Amazon Redshift. La valeur par défaut de <em>nom_schéma_redshift</em> est <code class="code">public</code>.</p>
               </dd>
             
               <dt><span class="term">DATABASE ’<em>nom_base_de_données_fédérée</em>’</span></dt>
               <dd>
                  <p>Mot-clé qui indique le nom de la base de données externe dans un moteur de base de données PostgreSQL ou MySQL. </p>
               </dd>
             
               <dt><span class="term">[SCHEMA ’<em>schema_name</em>’]</span></dt>
               <dd>
                  <p>Le <em>nom_schéma</em> indique le schéma dans un moteur de base de données PostgreSQL pris en charge. Le <em>nom_schéma</em> par défaut est <code class="code">public</code>.</p>
                  <p>Vous ne pouvez pas spécifier de SCHEMA lorsque vous configurez une requête fédérée sur un moteur de base de données MySQL pris en charge. </p>
               </dd>
             
               <dt><span class="term">REGION ’<em>aws-region</em>’</span></dt>
               <dd>
                  <p>Si la base de données externe est définie dans un catalogue de données Athena ou AWS Glue Data Catalog, la région AWS dans laquelle se trouve la base de données. Si la base de données est définie dans un catalogue de données externe, ce paramètre est obligatoire. </p>
               </dd>
             
               <dt><span class="term">URI ’<em>uri_metastore_hive</em>’ [ PORT numéro_port ]</span></dt>
               <dd>
                  <p>URI du nom_hôte et numéro_port d’un moteur de base de données PostgreSQL ou MySQL pris en charge. <em>nom_hôte</em> est le nœud principal du jeu de réplicas. Le point de terminaison doit être accessible (routable) à partir du cluster Amazon Redshift. Le numéro de port (port_number) par défaut pour PostgreSQL est 5432. Le numéro de port (port_number) par défaut pour MySQL est 3306.</p>
                  <p>Si la base de données se trouve dans un metastore Hive, spécifiez l’URI et éventuellement le numéro de port du metastore. Le numéro de port par défaut est 9083. </p>
                  <p>Un URI ne contient pas de spécification de protocole (« http:// »). Voici un exemple d’URI valide : <code class="code">uri '172.10.10.10'</code>. </p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Le moteur de base de données PostgreSQL ou MySQL pris en charge doit être dans le même VPC que votre cluster Amazon Redshift. Créez un groupe de sécurité reliant Amazon Redshift et RDS PostgreSQL ou Aurora PostgreSQL. </p></div></div>
               </dd>
             
               <dt><span class="term">IAM_ROLE <span>{</span> default | ’SESSION’ | ’arn:aws:iam::<code class="replaceable">&lt;Compte AWS-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>’ }</span></dt>
               <dd>
                  <p>Utilisez le mot clé par défaut pour qu’Amazon Redshift utilise le rôle IAM défini par défaut et associé au cluster lorsque la commande CREATE EXTERNAL SCHEMA s’exécute.</p>
                  <p>Utilisez <code class="code">'SESSION'</code> si vous vous connectez à votre cluster Amazon Redshift à l’aide d’une identité fédérée et que vous accédez aux tables à partir du schéma externe créé à l’aide de cette commande. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Utilisation d’une identité fédérée pour gérer l’accès à Amazon Redshift aux ressources locales et aux tables externes Amazon Redshift Spectrum</a>, qui explique comment configurer l’identité fédérée. Notez que cette configuration, qui utilise <code class="code">'SESSION'</code> à la place de l’ARN, ne peut être utilisée que si le schéma est créé à l’aide de <code class="code">DATA CATALOG</code>. </p>
                  <p>Utilisez l’Amazon Resource Name (ARN) d’un rôle IAM que votre cluster utilise pour l’authentification et l’autorisation. Au minimum, le rôle IAM doit être autorisé à exécuter une opération LIST sur le compartiment Amazon S3 devant être accessible et une opération GET sur les objets Amazon S3 contenus dans le compartiment.</p>
                  <p>Le code suivant montre la syntaxe de la chaîne de paramètre IAM_ROLE pour un seul ARN.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">IAM_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-name&gt;</code>'</code></pre>
                  <p>Vous pouvez créer des chaînes de rôles pour permettre à votre cluster d’endosser un autre rôle IAM, y compris un rôle appartenant à un autre compte. Les chaînes ainsi créées peuvent inclure jusqu’à 10 rôles. Pour voir un exemple de création de chaîne de rôles, consultez <a href="./c-spectrum-iam-policies.html#c-spectrum-chaining-roles">Créer des rôles IAM dans Amazon Redshift Spectrum</a>. </p>
                 <p> Attachez à ce rôle IAM une politique d’autorisations IAM similaire à la suivante.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "AccessSecret",
            "Effect": "Allow",
            "Action": [
                "secretsmanager:GetResourcePolicy",
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
                "secretsmanager:ListSecretVersionIds"
            ],
            "Resource": "arn:aws:secretsmanager:<code class="replaceable">us-west-2</code>:<code class="replaceable">123456789012</code>:secret:my-rds-secret-VNenFy"
        },
        <span>{</span>
            "Sid": "VisualEditor1",
            "Effect": "Allow",
            "Action": [
                "secretsmanager:GetRandomPassword",
                "secretsmanager:ListSecrets"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
                  <p>Pour connaître les étapes à suivre afin de créer un rôle IAM à utiliser avec une requête fédérée, consultez <a href="./federated-create-secret-iam-role.html">Création d’un secret et d’un rôle IAM pour utiliser des requêtes fédérées</a>. </p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>N’incluez pas d’espaces dans la liste des rôles chaînés.</p></div></div>
                  <p>L’exemple suivant montre la syntaxe d’une chaîne de trois rôles.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">IAM_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-1-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-2-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;role-3-name&gt;</code>'</code></pre>
               </dd>
             
               <dt><span class="term">SECRET_ARN « » <em>ssm-secret-arn</em></span></dt>
               <dd>
                  <p>Amazon Resource Name (ARN) d’un secret de moteur de base de données PostgreSQL ou MySQL pris en charge, créé à l’aide de AWS Secrets Manager. Pour obtenir des informations sur la création et la récupération d’un ARN pour un secret, consultez <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/manage_create-basic-secret.html">Création d’un secret basique</a> et <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/manage_retrieve-secret.html">Récupération de la valeur du secret</a> dans le <em>Guide de l’utilisateur AWS Secrets Manager</em>. </p>
               </dd>
             
               <dt><span class="term">CATALOG_ROLE <span>{</span>'SESSION' |} <em>catalog-role-arn-string</em></span></dt>
               <dd>
                  <p><code class="code">'SESSION'</code>À utiliser pour vous connecter à votre cluster Amazon Redshift à l’aide d’une identité fédérée à des fins d’authentification et d’autorisation du catalogue de données. Pour plus d’informations sur la réalisation des étapes relatives à l’identité fédérée, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Utilisation d’une identité fédérée pour gérer l’accès d’Amazon Redshift aux ressources locales et aux tables externes Amazon Redshift Spectrum</a>. Notez que le<code class="code">'SESSION'</code> rôle ne peut être utilisé que si le schéma est créé dans DATA CATALOG.</p>
                  <p>Nom Amazon Resource Name (ARN) d’un rôle IAM que votre cluster utilise pour l’authentification et l’autorisation. </p>
                  <p>Si CATALOG_ROLE n’est pas spécifié, Amazon Redshift utilise la valeur IAM_ROLE spécifiée. Le rôle de catalogue doit avoir l’autorisation d’accéder au catalogue de données dans AWS Glue ou Athena. Pour plus d'informations, consultez <a href="./c-spectrum-iam-policies.html">Politiques IAM pour Amazon Redshift Spectrum</a>. </p>
                  <p>Le code suivant montre la syntaxe de la chaîne de paramètre CATALOG_ROLE pour un seul ARN.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CATALOG_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role&gt;</code>'</code></pre>
                  <p>Vous pouvez créer des chaînes de rôles pour permettre à votre cluster d’endosser un autre rôle IAM, y compris un rôle appartenant à un autre compte. Les chaînes ainsi créées peuvent inclure jusqu’à 10 rôles. Pour plus d'informations, consultez <a href="./c-spectrum-iam-policies.html#c-spectrum-chaining-roles">Créer des rôles IAM dans Amazon Redshift Spectrum</a>. </p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>La liste des rôles de la chaîne ne doit pas inclure d’espaces.</p></div></div>
                  <p>L’exemple suivant montre la syntaxe d’une chaîne de trois rôles.</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CATALOG_ROLE 'arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role-1-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role-2-name&gt;</code>,arn:aws:iam::<code class="replaceable">&lt;aws-account-id&gt;</code>:role/<code class="replaceable">&lt;catalog-role-3-name&gt;</code>'</code></pre>

                  <p></p>
               </dd>
             
               <dt><span class="term">CREATE EXTERNAL DATABASE IF NOT EXISTS</span></dt>
               <dd>
                  <p>Clause qui crée une base de données externe avec le nom spécifié par l’argument DATABASE, si la base de données externe spécifiée n’existe pas. La commande n’apporte aucune modification si la base de données externe spécifiée existe. Dans ce cas, la commande renvoie un message indiquant que la base de données externe existe, plutôt que de s’arrêter avec une erreur.</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>La clause CREATE EXTERNAL DATABASE IF NOT EXISTS ne peut pas être utilisée avec HIVE METASTORE.</p><p>Pour utiliser CREATE EXTERNAL DATABASE IF NOT EXISTS avec un catalogue de données activé pour AWS Lake Formation, vous devez disposer de l’autorisation <code class="code">CREATE_DATABASE</code> sur le catalogue de données. </p></div></div>
               </dd>
             
               <dt><span class="term">CATALOG_ID « ID de <em>compte Amazon Web Services contenant la base de données Glue ou Lake Formation</em> »</span></dt>
               <dd>
                  <p>L’identifiant du compte sur lequel la base de données du catalogue de données est stockée.</p>
                     <p><code class="code">CATALOG_ID</code>peut être spécifiée uniquement si vous prévoyez de vous connecter à votre cluster Amazon Redshift ou à Amazon Redshift sans serveur à l’aide d’une identité fédérée pour l’authentification et l’autorisation du catalogue de données en définissant l’une des options suivantes : </p>
                     <div class="itemizedlist">
                         
                         
                     <ul class="itemizedlist"><li class="listitem"><p><code class="code">CATALOG_ROLE</code> sur <code class="code">'SESSION'</code></p></li><li class="listitem"><p><code class="code">IAM_ROLE</code>à<code class="code">'SESSION'</code> et<code class="code">'CATALOG_ROLE'</code> régler sur sa valeur par défaut </p></li></ul></div>
                     <p>Pour plus d’informations sur la réalisation des étapes relatives à l’identité fédérée, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorization-fas-spectrum.html">Utilisation d’une identité fédérée pour gérer l’accès d’Amazon Redshift aux ressources locales et aux tables externes Amazon Redshift Spectrum</a>. </p>

               </dd>
             
               <dt><span class="term">AUTHENTICATION</span></dt>
               <dd>
                  <p>Type d’authentification défini pour l’ingestion en streaming. L’ingestion en streaming assortie de types d’authentification fonctionne avec Amazon Managed Streaming for Apache Kafka. Les types <code class="code">AUTHENTICATION</code> sont les suivants :</p>
                  <div class="itemizedlist">
                      
                      
                  <ul class="itemizedlist"><li class="listitem"><p><b>none</b> – Indique l’absence de toute étape d’authentification.</p></li><li class="listitem"><p><b>iam</b> – Indique une authentification IAM. Lorsque vous choisissez cette option, vérifiez que le rôle IAM dispose des autorisations nécessaires à l’authentification IAM. Pour en savoir plus sur la définition du schéma externe, consultez <a href="./materialized-view-streaming-ingestion-getting-started-MSK.html">Mise en route de l’ingestion en streaming à partir d’Amazon Managed Streaming for Apache Kafka</a>.</p></li></ul></div>
                  <p></p>

               </dd>
             
               <dt><span class="term">CLUSTER_ARN</span></dt>
               <dd>
                  <p>Pour l’ingestion en streaming, identifiant du cluster Amazon Managed Streaming for Apache Kafka à partir duquel vous effectuez le streaming. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion.html">Ingestion en streaming (version préliminaire)</a>.</p>
         

               </dd>
            </dl></div>
       
         <h2 id="r_CREATE_EXTERNAL_SCHEMA_usage">Notes d’utilisation</h2>
         <p>Pour connaître les restrictions relatives à l’utilisation du catalogue de données Athena, consultez <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html#amazon-athena-limits">Athena Limits</a> dans Références générales AWS.</p>
         <p>Pour les limites lors de l’utilisation de AWS Glue Data Catalog, consultez <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html#limits_glue">Limites AWS Glue</a> dans le Références générales AWS.</p>
         <p>Ces restrictions ne s’appliquent pas à un metastore Hive.</p>
         
         <p>Il y a un maximum de 9 900 schémas par base de données. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/amazon-redshift-limits.html">Quotas et limites</a> dans le <em>Guide de gestion Amazon Redshift</em>.</p>


   <p>Pour annuler l’enregistrement du schéma, utilisez la commande <a href="./r_DROP_SCHEMA.html">DROP SCHEMA</a>. </p>

            <p>Pour afficher les détails relatifs aux schémas externes, interrogez les vues système suivantes : </p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p><a href="./r_SVV_EXTERNAL_SCHEMAS.html">SVV_EXTERNAL_SCHEMAS</a> </p></li><li class="listitem"><p><a href="./r_SVV_EXTERNAL_TABLES.html">SVV_EXTERNAL_TABLES</a> </p></li><li class="listitem"><p><a href="./r_SVV_EXTERNAL_COLUMNS.html">SVV_EXTERNAL_COLUMNS</a> </p></li></ul></div>

       
         <h2 id="r_CREATE_EXTERNAL_SCHEMA_examples">Exemples</h2>
         <p>L’exemple suivant permet de créer un schéma externe en utilisant une base de données dans un catalogue de données nommé <code class="code">sampledb</code> dans la région USA Ouest (Oregon). Utilisez cet exemple avec un catalogue de données Athena ou AWS Glue.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema
from data catalog
database 'sampledb'
region 'us-west-2'
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole';</code></pre>
         <p>L’exemple suivant permet de créer un schéma externe ainsi qu’une base de données externe nommée <code class="code">spectrum_db</code>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema
from data catalog
database 'spectrum_db'
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole'
create external database if not exists;</code></pre>
         <p>L’exemple suivant permet de créer un schéma externe en utilisant une base de données de metastore Hive nommée <code class="code">hive_db</code>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema hive_schema
from hive metastore
database 'hive_db'
uri '172.10.10.10' port 99
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole';</code></pre>
         <p>L’exemple suivant établit une chaîne de rôles afin d’utiliser le rôle <code class="code">myS3Role</code> pour accéder à Amazon S3 et <code class="code">myAthenaRole</code> pour l’accès au catalogue de données. Pour plus d'informations, consultez <a href="./c-spectrum-iam-policies.html#c-spectrum-chaining-roles">Créer des rôles IAM dans Amazon Redshift Spectrum</a>.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema
from data catalog
database 'spectrum_db'
iam_role 'arn:aws:iam::123456789012:role/myRedshiftRole,arn:aws:iam::123456789012:role/myS3Role'
catalog_role 'arn:aws:iam::123456789012:role/myAthenaRole'
create external database if not exists;</code></pre>
         <p>L’exemple suivant crée un schéma externe qui référence une base de données Aurora PostgreSQL. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] myRedshiftSchema
FROM POSTGRES
DATABASE 'my_aurora_db' SCHEMA 'my_aurora_schema'
URI 'endpoint to aurora hostname' PORT 5432  
IAM_ROLE 'arn:aws:iam::123456789012:role/MyAuroraRole'
SECRET_ARN 'arn:aws:secretsmanager:us-east-2:123456789012:secret:development/MyTestDatabase-AbCdEf'
</code></pre>



         
         <p>L’exemple suivant crée un schéma externe pour renvoyer à la base de données sales_db importée sur le cluster consommateur.</p>
         
         
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA sales_schema FROM REDSHIFT DATABASE 'sales_db' SCHEMA 'public';</code></pre>



         <p>L’exemple suivant crée un schéma externe qui référence une base de données Aurora MySQL. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA [IF NOT EXISTS] myRedshiftSchema
FROM MYSQL
DATABASE 'my_aurora_db'
URI 'endpoint to aurora hostname'
IAM_ROLE 'arn:aws:iam::123456789012:role/MyAuroraRole'
SECRET_ARN 'arn:aws:secretsmanager:us-east-2:123456789012:secret:development/MyTestDatabase-AbCdEf'
</code></pre>

      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_EXTERNAL_FUNCTION.html">CREATE EXTERNAL FUNCTION</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_EXTERNAL_TABLE.html">CREATE EXTERNAL TABLE</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>