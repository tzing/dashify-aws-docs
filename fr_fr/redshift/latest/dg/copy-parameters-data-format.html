<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Paramètres du format de données - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="copy-parameters-data-format" /><meta name="default_state" content="copy-parameters-data-format" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html" /><meta name="description" content="Par défaut, la commande COPY attend que les données source soient dans un format texte UTF-8 séparé par des caractères. Le délimiteur par défaut est une barre verticale ( | ). Si les données source sont dans un autre format, utilisez les paramètres suivants pour spécifier le format des données:" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt de données avec Amazon Redshift, service d’entrepôt de données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/copy-parameters-data-format.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/copy-parameters-data-format.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/copy-parameters-data-format.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/copy-parameters-data-format.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-format.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-format.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/copy-parameters-data-format.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/copy-parameters-data-format.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/copy-parameters-data-format.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/copy-parameters-data-format.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/copy-parameters-data-format.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/copy-parameters-data-format.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/copy-parameters-data-format.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/copy-parameters-data-format.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/copy-parameters-data-format.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/copy-parameters-data-format.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/copy-parameters-data-format.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/copy-parameters-data-format.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-format.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="Paramètres du format de données" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Paramètres du format de données - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#copy-parameters-data-format" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt de données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Référence SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Commandes SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "COPY",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_COPY.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Description des paramètres de la commande COPY",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_COPY-parameters.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Paramètres du format de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_COPY-parameters.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#copy-parameters-data-format" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="page-toc-src"><a href="#copy-json-data-file">Fichier de données JSON</a><a href="#copy-json-jsonpaths">Fichier JSONPaths</a><a href="#copy-json-jsonpath-expressions">Expressions JSONPath</a><a href="#using-jsonpath-with-avro">Utilisation de JSONPaths avec les données Avro</a><a href="#copy-parameters-columnar-data">Paramètres du format des données en colonnes</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="copy-parameters-data-format">Paramètres du format de données</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Par défaut, la commande COPY attend que les données source soient dans un format texte UTF-8 séparé par des caractères. Le délimiteur par défaut est une barre verticale ( | ). Si les données source sont dans un autre format, utilisez les paramètres suivants pour spécifier le format des données: </p><div class="itemizedlist">
             
             
             

             
             
             
             
             
             
            
         <ul class="itemizedlist"><li class="listitem">
               <p><a href="#copy-format">FORMAT</a></p>
            </li><li class="listitem">
               <p><a href="#copy-csv">CSV</a></p>
            </li><li class="listitem">
               <p><a href="#copy-delimiter">DELIMITER</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-fixedwidth">FIXEDWIDTH</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-shapefile">SHAPEFILE</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-avro">AVRO</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-json">JSON</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-parquet">PARQUET</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-orc">ORC</a>
               </p>
            </li></ul></div><p>En plus des formats de données standard, COPY prend en charge les formats de données en colonnes suivants pour la commande COPY depuis Amazon S3 : </p><div class="itemizedlist">
             
             
            
            
         <ul class="itemizedlist"><li class="listitem">
               <p><a href="#copy-orc">ORC</a>
               </p>
            </li><li class="listitem">
               <p><a href="#copy-parquet">PARQUET</a>
               </p>
            </li></ul></div><p>La commande COPY à partir du format en colonne est pris en charge avec certaines restrictions. Pour plus d'informations, consultez <a href="./copy-usage_notes-copy-from-columnar.html">COPY depuis les formats de données en colonnes</a>. </p><div class="variablelist">
            <h6>Paramètres du format de données</h6>
             
              
             
             
            
             
            
             
            
             
         <dl>
               <dt id="copy-format"><span class="term">FORMAT [AS]</span></dt>
               <dd>
                  <p>(Facultatif) Identifie les mots-clés de format des données. Les arguments FORMAT sont décrits ci-après.</p>
               </dd>
             
               <dt id="copy-csv"><span class="term">CSV [ QUOTE [AS] <em>’quote_character’</em> ]</span></dt>
               <dd>
                  <p>Permet l’utilisation du format CSV dans les données d’entrée. Pour insérer automatiquement des délimiteurs, des caractères de saut de ligne et des retours à la ligne, entourez le champ dans le caractère spécifié par le paramètre QUOTE. Le guillemet par défaut correspond aux guillemets doubles ( " ). Lorsque le guillemet simple est utilisé dans un champ, précédez le caractère d’un guillemet simple supplémentaire. Par exemple, si les guillemets sont doubles, pour insérer la chaîne <code class="code">A
                        "quoted" word</code> le fichier d’entrée doit inclure la chaîne <code class="code">"A
                        ""quoted"" word"</code>. Lorsque le paramètre CSV est utilisé, le délimiteur par défaut est une virgule ( , ). Vous pouvez spécifier un autre délimiteur en utilisant le paramètre DELIMITER. </p>
                  <p>Lorsqu’un champ est placé entre guillemets, l’espace blanc entre les délimiteurs et les guillemets est ignoré. Si le délimiteur est un caractère d’espace vide, comme un onglet, le délimiteur n’est pas considéré comme un espace vide.</p>
                  <p>CSV ne peut pas être utilisé avec FIXEDWIDTH, REMOVEQUOTES ou ESCAPE. </p>
                  <div class="variablelist">
                      
                  <dl>
                        <dt id="copy-csv-quote"><span class="term">QUOTE [AS] <em>’quote_character’</em></span></dt>
                        <dd>
                           <p>Facultatif. Spécifie le caractère à utiliser comme guillemet lorsque vous utilisez le paramètre CSV. La valeur par défaut est les guillemets doubles ( " ). Si vous utilisez le paramètre QUOTE pour définir un autre guillemet que des guillemets doubles, vous n’avez pas besoin d’insérer les guillemets doubles dans le champ. Le paramètre QUOTE peut être utilisé uniquement avec le paramètre CSV. Le mot-clé AS est facultatif.</p>
                        </dd>
                     </dl></div>
               </dd>
             
               <dt id="copy-delimiter"><span class="term">DELIMITER [AS] [’<em>delimiter_char</em>’] </span></dt>
               <dd>
                  <p>Spécifie le caractère ASCII unique qui est utilisé pour séparer les champs dans le fichier d’entrée, tels qu’une barre verticale ( | ), une virgule ( , ) ou une tabulation ( \t ). Les caractères ASCII non imprimables sont pris en charge. Les caractères ASCII peuvent également être représentés en octal, en utilisant le format ’\ddd’, où « d » est un chiffre octal (de 0 à 7). Le délimiteur par défaut est une barre verticale ( | ), à moins que le paramètre CSV soit utilisé, auquel cas le délimiteur par défaut est une virgule ( , ). Le mot-clé AS est facultatif. DELIMITER ne peut pas être utilisé avec FIXEDWIDTH.</p>
               </dd>
             
               <dt id="copy-fixedwidth"><span class="term">FIXEDWIDTH ’<em>fixedwidth_spec</em>’ </span></dt>
               <dd>
                  <p>Charge les données d’un fichier où la largeur de chaque colonne est une longueur fixe, plutôt que des colonnes séparées par un délimiteur. <em>fixedwidth_spec</em> est une chaîne qui spécifie une étiquette de colonne définie par l’utilisateur et la largeur de la colonne. L’étiquette de colonne peut être une chaîne de texte ou un nombre entier, en fonction de ce que l’utilisateur choisit. L’étiquette de colonne n’a aucun lien avec le nom de la colonne. L’ordre des paires étiquette/largeur doit correspondre exactement à l’ordre des colonnes de la table. FIXEDWIDTH ne peut pas être utilisé avec CSV ou DELIMITER. Dans Amazon Redshift la longueur des colonnes CHAR et VARCHAR est exprimée en octets, aussi n’oubliez pas que la largeur de colonne que vous spécifiez correspond à la longueur binaire de caractères sur plusieurs octets lors de la préparation du fichier à charger. Pour plus d'informations, consultez <a href="./r_Character_types.html">Types caractères</a>. </p>
                  <p>Le format de <em>fixedwidth_spec</em> apparaît comme suit : </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">'<em>colLabel1:colWidth1,colLabel:colWidth2, ...</em>'</code></pre>
               </dd>
             
               <dt id="copy-shapefile"><span class="term">SHAPEFILE [ SIMPLIFY [AUTO] [<em>’tolerance’</em>] ]</span></dt>
               <dd>
                  <p>Permet l’utilisation du format CSV dans les données d’entrée. Par défaut, la première colonne du shapefile est une colonne <code class="code">GEOMETRY</code> ou <code class="code">IDENTITY</code>. Toutes les colonnes suivantes suivent l’ordre spécifié dans le shapefile.</p>
                  <p>Vous ne pouvez pas utiliser SHAPEFILE avec FIXEDWIDTH, REMOVEQUOTES ou ESCAPE. </p>
                  <p>Pour utiliser des objets <code class="code">GEOGRAPHY</code> avec <code class="code">COPY FROM SHAPEFILE</code>, intégrez-les d’abord dans une colonne <code class="code">GEOMETRY</code>, puis convertissez-les en objets <code class="code">GEOGRAPHY</code>.</p>
                  <div class="variablelist">
                      
                      
                  <dl>
                        <dt id="copy-shapefile-simplify"><span class="term">SIMPLIFY [<em>tolerance</em>]</span></dt>
                        <dd>
                           <p>(Facultatif) Simplifie toutes les géométries pendant le processus d’ingestion à l’aide de l’algorithme Ramer-Douglas-Peucker et de la tolérance donnée. </p>
                        </dd>
                      
                        <dt id="copy-shapefile-simplify"><span class="term">SIMPLIFY AUTO [<em>tolerance</em>]</span></dt>
                        <dd>
                           <p>(Facultatif) Simplifie uniquement les géométries supérieures à la taille de géométrie maximale. Cette simplification utilise l’algorithme Ramer-Douglas-Peucker et la tolérance calculée automatiquement si celle-ci ne dépasse pas la tolérance spécifiée. Cet algorithme calcule la taille pour stocker les objets dans la tolérance spécifiée. La valeur <em>tolerance</em> est facultative.</p>
                        </dd>
                     </dl></div>
                  <p>Pour voir des exemples de chargement de shapefiles, consultez <a href="./r_COPY_command_examples.html#copy-example-spatial-copy-shapefile">Chargement d’un shapefile dans Amazon Redshift</a>.</p>
               </dd>
             
               <dt id="copy-avro"><span class="term">AVRO [AS] ’<em>avro_option</em>’</span></dt>
               <dd>
                  <p>Spécifie que les données source sont au format Avro. </p>
                  <p>Le format Avro est pris en charge pour la commande COPY dans les services et protocoles suivants :</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon S3 </p>
                     </li><li class="listitem">
                        <p>Amazon EMR </p>
                     </li><li class="listitem">
                        <p>Hôtes distants (SSH) </p>
                     </li></ul></div>
                  <p>Avro n’est pas pris en charge pour la commande COPY dans DynamoDB. </p>
                  <p>Avro est un protocole de sérialisation de données. Un fichier source Avro inclut un schéma qui définit la structure des données. Le type de schéma Avro doit être <code class="code">record</code>. La commande COPY accepte la création de fichiers Avro à l’aide du codec non compressé par défaut, ainsi que les codecs de compression <code class="code">deflate</code> et <code class="code">snappy</code>. Pour plus d’informations sur Avro, accédez à <a href="https://avro.apache.org/" rel="noopener noreferrer" target="_blank"><span>Apache Avro</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>
                  
                  <p>Les valeurs valides pour <em>avro_option</em> sont les suivantes :</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">'auto'</code></p>
                     </li><li class="listitem">
                        <p><code class="code">'auto ignorecase'</code></p>
                     </li><li class="listitem">
                        <p><code class="code">'s3://<code class="replaceable">jsonpaths_file</code>'</code> </p>
                     </li></ul></div>
                  <p>La valeur par défaut est <code class="code">'auto'</code>.</p>
                  <p>COPY mappe automatiquement les éléments de données des données source Avro aux colonnes de la table cible en mettant en correspondance les noms de champs du schéma Avro avec les noms de colonnes dans la table cible. La mise en correspondance est sensible à la casse pour <code class="code">'auto'</code> et n’est pas sensible à la casse pour <code class="code">'auto
                        ignorecase'</code>. </p>
                  <p>Les noms de colonnes des tables Amazon Redshift sont toujours en lettres minuscules, aussi lorsque vous utilisez l’option <code class="code">'auto'</code>, les noms de champs correspondants doivent être en minuscules. Si les noms de champs ne sont pas tous en minuscules, vous pouvez utiliser l’option <code class="code">'auto
                        ignorecase'</code>. Avec l’argument <code class="code">'auto'</code> par défaut, la commande COPY ne reconnaît que le premier niveau de champs (ou <em>champs externes</em>) dans la structure. </p>
                  <p>Pour mapper explicitement les noms de colonnes aux noms de champs Avro, vous pouvez utiliser <a href="#copy-json-jsonpaths">Fichier JSONPaths</a>. </p>
                  <p>Par défaut, la commande COPY tente de mettre en correspondance toutes les colonnes de la table cible avec les noms de champs Avro. Pour charger un sous-ensemble de colonnes, vous pouvez éventuellement spécifier une liste de colonnes. Si une colonne dans la table cible est absente de la liste de colonnes, la commande COPY charge l’expression <a href="./r_CREATE_TABLE_NEW.html#create-table-default">DEFAULT</a> de la colonne cible. Si la colonne cible n’a pas de valeur par défaut, la commande COPY tente de charger NULL. Si une colonne est incluse dans la liste de colonnes et que la commande COPY ne trouve pas de champ correspondant dans les données Avro, la commande COPY tente de charger NULL dans la colonne. </p>
                  <p>Si la commande COPY tente d’affecter NULL à une colonne qui est définie comme NOT NULL, elle échoue. </p>
                  
                  <p><b>Schéma Avro</b></p>
                  <p>Un fichier de données source Avro inclut un schéma qui définit la structure des données. La commande COPY lit le schéma qui fait partie du fichier de données source Avro pour mapper des éléments de données aux colonnes de la table cible. L’exemple suivant illustre un schéma Avro. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "name": "person",
    "type": "record",
    "fields": [
        <span>{</span>"name": "id", "type": "int"},
        <span>{</span>"name": "guid", "type": "string"},
        <span>{</span>"name": "name", "type": "string"},
        <span>{</span>"name": "address", "type": "string"}]
}</code></pre>
                  <p>Le schéma Avro est défini à l’aide du format JSON. L’objet de niveau supérieur JSON contient trois paires nom-valeur avec les noms ou <em>clés</em>, <code class="code">"name"</code>, <code class="code">"type"</code> et <code class="code">"fields"</code>. </p>
                  <p>La clé <code class="code">"fields"</code> s’apparie à un tableau d’objets qui définissent le nom et le type de données de chaque champ dans la structure de données. Par défaut, la commande COPY met automatiquement en correspondance les noms de champs avec les noms de colonnes. Les noms de colonnes sont toujours en minuscules, les noms de champs correspondants doivent donc toujours être en minuscules, sauf si vous spécifiez l’option <code class="code">‘auto ignorecase’</code>. Tous les noms de domaines qui ne correspondent pas à un nom de colonne sont ignorés. L’ordre n’a pas d’importance. Dans l’exemple précédent, la commande COPY mappe aux noms de colonnes <code class="code">id</code>, <code class="code">guid</code>, <code class="code">name</code>, et <code class="code">address</code>. </p>
                  <p>Avec l’argument <code class="code">'auto'</code> par défaut, la commande COPY met en correspondance uniquement les objets de premier niveau des colonnes. Pour mapper à des niveaux plus profonds du schéma, ou si les noms de champs et les noms de colonnes ne correspondent pas, utilisez un fichier JSONPaths pour définir le mappage. Pour plus d'informations, consultez <a href="#copy-json-jsonpaths">Fichier JSONPaths</a>. </p>
                  <p>Si la valeur associée à une clé est un type de données complexe Avro comme octets, tableau, enregistrement, carte ou lien, la commande COPY charge la valeur sous forme de chaîne. Ici, la chaîne est la représentation JSON des données. La commande COPY charge les types de données d’énumération Avro sous forme de chaînes dans lesquelles le contenu est le nom du type. Pour obtenir un exemple, consultez <a href="./copy-usage_notes-copy-from-json.html">Exécution de la commande COPY à partir du format JSON</a>.</p>
                  <p>La taille maximale de l’en-tête du fichier Avro, qui inclut les métadonnées de fichiers et de schéma, est de 1 Mo.   </p>
                  <p>La taille maximale d’un seul bloc de données Avro est de 4 Mo. Ce qui est différent de la taille de ligne maximale. Si la taille maximale d’un seul bloc de données Avro est dépassée, même si la taille de la ligne qui en résulte est inférieure à la limite de taille de ligne de 4 Mo, la commande COPY échoue. </p>
                  <p>Lors du calcul de la taille des lignes, Amazon Redshift compte deux fois les barres verticales (|) en interne. Si les données entrées contiennent un très grand nombre de barres verticales, la taille des lignes peut dépasser 4 Mo même si la taille du bloc de données est inférieure à 4 Mo.</p>
               </dd>
             
               <dt id="copy-json"><span class="term">JSON [AS] ’<em>json_option</em>’</span></dt>
               <dd>
                  <p>Les données source sont au format JSON. </p>
                  <p>Le format JSON est pris en charge pour la commande COPY dans ces services et protocoles :</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon S3</p>
                     </li><li class="listitem">
                        <p>Commande COPY depuis Amazon EMR</p>
                     </li><li class="listitem">
                        <p>Exécution de la commande COPY depuis SSH</p>
                     </li></ul></div>
                  <p>JSON n’est pas pris en charge pour exécuter la commande COPY dans DynamoDB. </p>
                  <p>Les valeurs valides pour <em>json_option</em> sont les suivantes :</p>
                     <div class="itemizedlist">
                         
                         
                         
                        
                         
                     <ul class="itemizedlist"><li class="listitem">
                           <p><code class="code">'auto'</code></p>
                        </li><li class="listitem">
                           <p><code class="code">'auto ignorecase'</code></p>
                        </li><li class="listitem">
                           <p><code class="code">'s3://<code class="replaceable">jsonpaths_file</code>'</code>
                           </p>
                        </li><li class="listitem">
                           <p><code class="code">'noshred'</code>
                           </p>
                        </li></ul></div>
                  
                  <p>La valeur par défaut est <code class="code">'auto'</code>. Amazon Redshift ne déchiquète pas les attributs des structures JSON en plusieurs colonnes lors du chargement d’un document JSON.</p> 
                  <p>Par défaut, la commande COPY tente de mettre en correspondance toutes les colonnes de la table cible avec les clés de noms de champs JSON. Pour charger un sous-ensemble de colonnes, vous pouvez éventuellement spécifier une liste de colonnes. Si les clés de nom de domaine JSON ne sont pas toutes en minuscules, vous pouvez utiliser l’option <code class="code">'auto ignorecase'</code> ou <a href="#copy-json-jsonpaths">Fichier JSONPaths</a> pour mapper explicitement les noms de colonnes aux clés de nom de domaine JSON.</p>
                  <p>Si une colonne dans la table cible est absente de la liste de colonnes, la commande COPY charge l’expression <a href="./r_CREATE_TABLE_NEW.html#create-table-default">DEFAULT</a> de la colonne cible. Si la colonne cible n’a pas de valeur par défaut, la commande COPY tente de charger NULL. Si une colonne est incluse dans la liste de colonnes et que la commande COPY ne trouve pas de champ correspondant dans les données JSON, la commande COPY tente de charger NULL dans la colonne. </p>
                  <p>Si la commande COPY tente d’affecter NULL à une colonne qui est définie comme NOT NULL, elle échoue. </p>
                  <p>La commande COPY mappe les éléments de données dans les données source JSON aux colonnes de la table cible. Pour cela, elle fait correspondre les <em>clés d’objet</em> (ou les noms) dans les paires nom-valeur source aux noms des colonnes de la table cible. </p>
 
                  <p>Reportez-vous aux informations suivantes sur chaque valeur <em>json_option</em> :</p>
                  <div class="variablelist">
                      
                     
                      
                     
                      
                     
                      
                     
                     
                     
                  <dl>
                        <dt id="copy-json-auto"><span class="term">’auto’</span></dt>
                        <dd>
                           <p>Avec cette option, la mise en correspondance est sensible à la casse. Les noms de colonnes des tables Amazon Redshift sont toujours en lettres minuscules, aussi lorsque vous utilisez l’option <code class="code">'auto'</code>, les noms de champs JSON correspondants doivent être en minuscules.</p>
                          
                        </dd>
                      
                        <dt id="copy-json-auto-ignorecase"><span class="term">’auto ignorecase’</span></dt>
                        <dd>
                           <p>Avec cette option, la mise en correspondance n’est pas sensible à la casse. Les noms de colonnes des tables Amazon Redshift étant toujours en minuscules, lorsque vous utilisez la commande <code class="code">'auto ignorecase'</code>, les noms de champs JSON correspondants peuvent être en minuscules, en majuscules ou en casse mixte. </p>
                           
                        </dd>
                      
                        <dt id="copy-json-pathfile"><span class="term">’s3://<em>jsonpaths_file</em>’</span></dt>
                        <dd>
                           <p>Avec cette option, la commande COPY utilise le fichier JSONPaths nommé pour mapper les éléments de données dans les données source JSON aux colonnes de la table cible. L’argument <em><code class="code">s3://jsonpaths_file</code></em> doit être une clé d’objet Amazon S3 faisant explicitement référence à un seul fichier. Par exemple : <code class="code">'s3://mybucket/jsonpaths.txt</code>’. L’argument ne peut pas être un préfixe de clé. Pour plus d’informations sur l’utilisation d’un fichier JSONPaths, consultez <a href="#copy-json-jsonpaths">Fichier JSONPaths</a>.</p>
                         
                           <p>Dans certains cas, le fichier spécifié par <code class="code">jsonpaths_file</code> a le même préfixe que le chemin spécifié par <code class="code">copy_from_s3_objectpath</code> pour les fichiers de données. Si c’est le cas, la commande COPY lit le fichier JSONPaths en tant que fichier de données et renvoie des erreurs. Par exemple, supposons que vos fichiers de données utilisent le chemin d’objet <code class="code">s3://mybucket/my_data.json</code> et que votre fichier JSONPaths est <code class="code">s3://mybucket/my_data.jsonpaths</code>. Dans ce cas, la commande COPY tente de charger <code class="code">my_data.jsonpaths</code> en tant que fichier de données.</p>
                           
                        </dd>
                      
                        <dt id="copy-json-noshred"><span class="term">’noshred’</span></dt>
                        <dd>
                           <p>Avec cette option, Amazon Redshift ne déchiquète pas les attributs des structures JSON en plusieurs colonnes lors du chargement d’un document JSON.</p>
                           
                        </dd>
                     </dl></div>

               </dd>
            </dl></div>
            <h2 id="copy-json-data-file">Fichier de données JSON</h2>
            <p>Le fichier de données JSON contient un ensemble d’objets ou tableaux. La commande COPY charge chaque objet ou tableau JSON dans une seule ligne de la table cible. Chaque objet ou tableau correspondant à une ligne doit être une structure autonome, de niveau racine, autrement dit, il ne doit être membre d’une autre structure JSON.</p>

            <p>Un <em>objet</em> JSON commence et finit par des accolades ( <span>{</span> } ) et contient une collection non ordonnée de paires nom-valeur. Chaque paire de nom et de valeur est séparée par deux points, et les paires sont séparées par des virgules. Par défaut, la <em>clé d’objet</em>, ou le nom, dans les paires nom-valeur, doit correspondre au nom de la colonne correspondante dans la table. Les noms de colonnes des tables Amazon Redshift étant toujours en minuscules, les clés des noms de champs JSON correspondants doivent également être en minuscules. Si vos noms de colonnes et clés JSON ne correspondent pas, utilisez un <a href="#copy-json-jsonpaths">Fichier JSONPaths</a> pour mapper explicitement les colonnes aux clés. </p>
            <p>L’ordre d’un objet JSON n’est pas important. Tous les noms qui ne correspondent pas à un nom de colonne sont ignorés. L’exemple suivant illustre la structure d’un objet JSON simple.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "column1": "value1",
  "column2": value2,
  "notacolumn" : "ignore this value"
}</code></pre>
            <p>Un <em>tableau</em> JSON commence et finit par des crochets ( [  ] ) et contient une collection ordonnée de valeurs séparées par des virgules. Si vos fichiers de données utilisent des tableaux, vous devez spécifier un fichier JSONPaths pour mettre en correspondance les valeurs de colonnes. L’exemple suivant illustre la structure d’un tableau JSON simple. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">["value1", value2]</code></pre>
            <p>Le JSON doit être dans un format correct. Par exemple, les objets ou les tableaux ne peuvent pas être séparés par des virgules ou tout autre caractère à l’exception des espaces vides. Les chaînes doivent être placées entre guillemets doubles. Les guillemets doivent être des guillemets simples (0x22), ni culbutés, ni courbes.</p>
            <p>La taille maximale d’un seul objet ou tableau JSON, y compris les accolades ou les crochets, est de 4 Mo. Ce qui est différent de la taille de ligne maximale. Si la taille maximale d’un seul objet ou tableau JSON est dépassée, même si la taille de la ligne qui en résulte est inférieure à la limite de taille de ligne de 4 Mo, la commande COPY échoue. </p>
            <p>Lors du calcul de la taille des lignes, Amazon Redshift compte deux fois les barres verticales (|) en interne. Si les données entrées contiennent un très grand nombre de barres verticales, la taille des lignes peut dépasser 4 Mo même si la taille de l’objet est inférieure à 4 Mo.</p>
            <p>La commande COPY charge <code class="code">\n</code> comme un caractère de saut de ligne et charge <code class="code">\t</code> comme un caractère de tabulation. Pour charger une barre oblique inverse, précédez-la d’une barre oblique inverse ( <code class="code">\\</code> ).</p>
            <p>La commande COPY recherche la source JSON spécifiée pour un objet ou tableau JSON bien formé et valide. Si la commande COPY rencontre des caractères qui ne sont pas des espaces vides avant de localiser une structure JSON utilisable, ou entre des objets ou tableaux JSON valides, elle renvoie une erreur pour chaque instance. Ces erreurs sont prises en compte dans le nombre d’erreurs MAXERROR. Lorsque le nombre d’erreurs est égal ou supérieur à MAXERROR, la commande COPY échoue. </p>
            <p>Pour chaque erreur, Amazon Redshift enregistre une ligne dans la table système STL_LOAD_ERRORS. La colonne LINE_NUMBER enregistre la dernière ligne de l’objet JSON qui a provoqué l’erreur. </p>
            <p>Si IGNOREHEADER est spécifié, la commande COPY ignore le nombre de lignes dans les données JSON spécifiées. Les caractères de saut de ligne dans les données JSON comptent toujours pour les calculs IGNOREHEADER. </p>
            <p>La commande COPY charge des chaînes vides dans les champs vides par défaut. Si EMPTYASNULL est spécifié, la commande COPY charge des chaînes vides dans les champs CHAR et VARCHAR comme NULL. Les chaînes vides d’autres types de données, tels que INT, sont toujours chargées avec NULL. </p>
            <p>Les options suivantes ne sont pas prises en charge avec JSON : </p>
            <div class="itemizedlist">
                
                
                
                
                
                
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>CSV</p>
               </li><li class="listitem">
                  <p>DELIMITER </p>
               </li><li class="listitem">
                  <p>ESCAPE</p>
               </li><li class="listitem">
                  <p>FILLRECORD </p>
               </li><li class="listitem">
                  <p>FIXEDWIDTH</p>
               </li><li class="listitem">
                  <p>IGNOREBLANKLINES</p>
               </li><li class="listitem">
                  <p>NULL AS</p>
               </li><li class="listitem">
                  <p>READRATIO</p>
               </li><li class="listitem">
                  <p>REMOVEQUOTES </p>
               </li></ul></div>
            <p>Pour plus d'informations, consultez <a href="./copy-usage_notes-copy-from-json.html">Exécution de la commande COPY à partir du format JSON</a>. Pour plus d’informations sur les structures de données JSON, accédez à <a href="https://www.json.org/" rel="noopener noreferrer" target="_blank"><span>www.json.org</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>
          
            <h2 id="copy-json-jsonpaths">Fichier JSONPaths</h2>
            <p>Si vous chargez depuis des données source au format JSON ou Avro, la commande COPY mappe par défaut les éléments de données de premier niveau dans les données source aux colonnes de la table cible. Pour ce faire, elle met en correspondance chaque nom (ou clé d’objet) dans une paire nom-valeur avec le nom d’une colonne de la table cible. </p>

            <p>Si vos noms de colonnes et clés d’objet ne correspondent pas, ou pour mapper à des niveaux plus profonds de la hiérarchie de données, vous pouvez utiliser un fichier JSONPaths pour mapper explicitement des éléments de données JSON ou Avro à des colonnes. Le fichier JSONPaths mappe les éléments de données JSON à des colonnes selon l’ordre des colonnes de la liste de tables ou de colonnes cible.</p>
            <p>Le fichier JSONPaths doit contenir un seul objet JSON (pas un tableau). L’objet JSON est une paire nom-valeur. La <em>clé d’objet</em>, qui est le nom de la paire nom-valeur, doit être <code class="code">"jsonpaths"</code>. La <em>valeur</em> de la paire nom-valeur est un tableau d’<em>expressions JSONPath</em>. Chaque expression JSONPath fait référence à un seul élément de la hiérarchie de données JSON ou du schéma Avro, de la même façon qu’une expression XPath fait référence aux éléments d’un document XML. Pour plus d'informations, consultez <a href="#copy-json-jsonpath-expressions">Expressions JSONPath</a>.</p>
            <p>Pour utiliser un fichier JSONPaths, ajoutez le mot-clé JSON ou AVRO à la commande COPY. Spécifiez le nom du compartiment S3 et le chemin d’objet du fichier JSONPaths en utilisant le format suivant.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">COPY tablename 
FROM 'data_source' 
CREDENTIALS '<code class="replaceable">credentials-args</code>' 
FORMAT AS <span>{</span> AVRO | JSON } 's3://<em>jsonpaths_file</em>';</code></pre>
            <p>La valeur <code class="code"><code class="code">s3://jsonpaths_file</code></code> doit être une clé d’objet Amazon S3 faisant explicitement référence à un seul fichier, tel que <code class="code">'s3://mybucket/jsonpaths.txt'</code>. Elle ne pas être un préfixe de clé. </p>
            <p>Dans certains cas, si vous chargez à partir d’Amazon S3, le fichier spécifié par <code class="code">jsonpaths_file</code> a le même préfixe que le chemin spécifié par <code class="code">copy_from_s3_objectpath</code> pour les fichiers de données. Si c’est le cas, la commande COPY lit le fichier JSONPaths en tant que fichier de données et renvoie des erreurs. Par exemple, supposons que vos fichiers de données utilisent le chemin d’objet <code class="code">s3://mybucket/my_data.json</code> et que votre fichier JSONPaths est <code class="code">s3://mybucket/my_data.jsonpaths</code>. Dans ce cas, la commande COPY tente de charger <code class="code">my_data.jsonpaths</code> en tant que fichier de données.</p>
            <p> Si le nom de clé est une chaîne autre que <code class="code">"jsonpaths"</code>, la commande COPY ne renvoie pas d’erreur, mais elle ignore <em>jsonpaths_file</em> et utilise l’argument <code class="code">'auto'</code> à la place. </p>
            <p>Si l’une des actions suivantes se produit, la commande COPY échoue :</p>
            <div class="itemizedlist">
                
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Le JSON est incorrect.</p>
               </li><li class="listitem">
                  <p>Il existe plusieurs objets JSON.</p>
               </li><li class="listitem">
                  <p>Tous les caractères sauf les espaces vides existent en dehors de l’objet.</p>
               </li><li class="listitem">
                  <p>Un élément de tableau est une chaîne vide ou n’est pas une chaîne.</p>
               </li></ul></div>
            <p>MAXERROR ne s’applique pas au fichier JSONPaths. </p>
            <p>Les fichiers JSONPaths ne doivent pas être chiffrés, même si l’option <a href="./copy-parameters-data-source-s3.html#copy-encrypted">ENCRYPTED</a> est spécifiée.</p>
            <p>Pour plus d'informations, consultez <a href="./copy-usage_notes-copy-from-json.html">Exécution de la commande COPY à partir du format JSON</a>. </p>
          
            <h2 id="copy-json-jsonpath-expressions">Expressions JSONPath</h2>
            <p>Le fichier JSONPaths utilise des expressions JSONPath pour mapper les champs de données aux colonnes cibles. Chaque expression JSONPath correspond à une colonne dans la table cible Amazon Redshift. L’ordre des éléments du tableau JSONPath doit correspondre à celui des colonnes de la table cible ou de la liste de colonnes, si une liste de colonnes est utilisée. </p>

            <p>Les guillemets doubles sont obligatoires comme illustré, aussi bien pour les noms de champ que pour les valeurs. Les guillemets doivent être des guillemets simples (0x22), ni culbutés, ni courbes.</p>
            <p>Si un élément de l’objet référencé par une expression JSONPath ne se trouve pas dans les données JSON, la commande COPY tente de charger une valeur NULL. Si l’objet référencé est incorrect, la commande COPY renvoie une erreur de chargement. </p>
            <p>Si un élément de tableau référencé par une expression JSONPath ne se trouve pas dans les données JSON ou Avro, la commande COPY échoue et renvoie l’erreur suivante : <code class="code">Invalid JSONPath format: Not
                  an array or index out of range.</code> Supprimez les éléments du tableau de JSONPaths qui n’existent pas dans les données source et vérifiez que les tableaux des données source sont corrects.  </p>
            <p>Les expressions JSONPath peuvent utiliser la notation d’accolades ou la notation de points, mais vous ne pouvez pas combiner les notations. L’exemple suivant illustre les expressions JSONPath utilisant la notation d’accolades. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "jsonpaths": [
        "$['venuename']",
        "$['venuecity']",
        "$['venuestate']",
        "$['venueseats']"
    ]
}</code></pre>
            <p>L’exemple suivant illustre les expressions JSONPath utilisant la notation de points. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "jsonpaths": [
        "$.venuename",
        "$.venuecity",
        "$.venuestate",
        "$.venueseats"
    ]
}</code></pre>
            <p>Dans le contexte de la syntaxe de la commande COPY Amazon Redshift, une expression JSONPath doit spécifier le chemin d’accès explicite à un élément de nom unique dans une structure de données hiérarchique JSON ou Avro. Amazon Redshift ne prend pas en charge les éléments JSONPath, tels que les caractères génériques ou les expressions de filtre, qui peuvent se traduire par un chemin d’accès ambigu ou plusieurs éléments de noms.</p>
            <p>Pour plus d'informations, consultez <a href="./copy-usage_notes-copy-from-json.html">Exécution de la commande COPY à partir du format JSON</a>. </p>
            
          
            <h2 id="using-jsonpath-with-avro">Utilisation de JSONPaths avec les données Avro</h2>            
            <p>L’exemple suivant illustre un schéma Avro à plusieurs niveaux.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "name": "person",
    "type": "record",
    "fields": [
        <span>{</span>"name": "id", "type": "int"},
        <span>{</span>"name": "guid", "type": "string"},
        <span>{</span>"name": "isActive", "type": "boolean"},
        <span>{</span>"name": "age", "type": "int"},
        <span>{</span>"name": "name", "type": "string"},
        <span>{</span>"name": "address", "type": "string"},
        <span>{</span>"name": "latitude", "type": "double"},
        <span>{</span>"name": "longitude", "type": "double"},
        <span>{</span>
            "name": "tags",
            "type": <span>{</span>
                        "type" : "array",
                        "name" : "inner_tags",
                        "items" : "string"
                    }
        },
        <span>{</span>
            "name": "friends",
            "type": <span>{</span>
                        "type" : "array",
                        "name" : "inner_friends",
                        "items" : <span>{</span>
                                    "name" : "friends_record",
                                    "type" : "record",
                                    "fields" : [
                                                 <span>{</span>"name" : "id", "type" : "int"},
                                                 <span>{</span>"name" : "name", "type" : "string"}
                                               ]
                                  }
                    }
        },
        <span>{</span>"name": "randomArrayItem", "type": "string"}
    ]
}</code></pre>
            <p>L'exemple suivant montre un fichier JSONPaths qui utilise des  AvroPath  expressions pour faire référence au schéma précédent. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "jsonpaths": [
        "$.id",
        "$.guid",
        "$.address",
        "$.friends[0].id"
    ]
}</code></pre>
            <p>L’exemple de JSONPaths comprend les éléments suivants :</p>
            <div class="variablelist">
                
                
                
                
                
            <dl>
                  <dt><span class="term">jsonpaths</span></dt>
                  <dd>
                     <p>Nom de l'objet JSON qui contient les  AvroPath expressions.</p>
                  </dd>
                
                  <dt><span class="term">[ … ]</span></dt>
                  <dd>
                     <p>Les crochets entourent le tableau JSON qui contient les éléments de chemin d’accès.</p>
                  </dd>
                
                  <dt><span class="term">$</span></dt>
                  <dd>
                     <p>Le symbole du dollar fait référence à l’élément racine du schéma Avro, qui est le tableau <code class="code">"fields"</code>.</p>
                  </dd>
                
                  <dt><span class="term">"$.id",</span></dt>
                  <dd>
                     <p>La cible de l' AvroPath expression. Dans ce cas, la cible est l’élément dans le tableau <code class="code">"fields"</code> avec le nom <code class="code">"id"</code>. Les expressions sont séparées par des virgules.</p>
                  </dd>
                
                  <dt><span class="term">"$.friends[0].id"</span></dt>
                  <dd>
                     <p>Les crochets indiquent un index de tableau. Les expressions JSONPath utilisent l’indexation de base zéro, cette expression fait donc référence au premier élément du tableau <code class="code">"friends"</code> avec le nom <code class="code">"id"</code>.</p>
                  </dd>
               </dl></div>
            <p>La syntaxe du schéma Avro nécessite l’utilisation de <em>champs internes</em> pour définir la structure d’enregistrement et les types de données du tableau. Les champs internes sont ignorés par les  AvroPath  expressions. Par exemple, le champ <code class="code">"friends"</code> définit un tableau nommé <code class="code">"inner_friends"</code>, qui définit à son tour un enregistrement nommé <code class="code">"friends_record"</code>. L' AvroPath expression faisant référence au champ <code class="code">"id"</code> peut ignorer les champs supplémentaires pour référencer directement le champ cible. Les  AvroPath  expressions suivantes font référence aux deux champs appartenant au <code class="code">"friends"</code> tableau.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"$.friends[0].id"
"$.friends[0].name"</code></pre>
          
            <h2 id="copy-parameters-columnar-data">Paramètres du format des données en colonnes</h2>
            <p>En plus des formats de données standard, COPY prend en charge les formats de données en colonnes suivants pour la commande COPY depuis Amazon S3. La commande COPY à partir du format en colonne est pris en charge avec certaines restrictions. Pour plus d'informations, consultez <a href="./copy-usage_notes-copy-from-columnar.html">COPY depuis les formats de données en colonnes</a>. </p>
            <div class="variablelist">
                
                
               
               
            <dl>
                  <dt id="copy-orc"><span class="term">ORC</span></dt>
                  <dd>
                     <p>Charge les données à partir d’un fichier qui utilise le format de fichier ORC (Optimized Row Columnar). </p>
                  </dd>
                
                  <dt id="copy-parquet"><span class="term">PARQUET</span></dt>
                  <dd>
                     <p>Charge les données à partir d’un fichier qui utilise le format de fichier Parquet. </p>
                  </dd>
               </dl></div>
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./copy-parameters-column-mapping.html">Options de mappage de colonnes</div><div id="next" class="next-link" accesskey="n" href="./copy-parameters-file-compression.html">Paramètres de compression de fichier</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/copy-parameters-data-format.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>