<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Bonnes pratiques Amazon Redshift pour la conception de requêtes - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c_designing-queries-best-practices" /><meta name="default_state" content="c_designing-queries-best-practices" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="description" content="Afin d'optimiser les performances des requêtes, suivez ces recommandations lors de la création de requêtes." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt de données avec Amazon Redshift, service d’entrepôt de données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="Bonnes pratiques Amazon Redshift pour la conception de requêtes" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Bonnes pratiques Amazon Redshift pour la conception de requêtes - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c_designing-queries-best-practices" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt de données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Bonnes pratiques Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/best-practices.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Bonnes pratiques Amazon Redshift pour la conception de requêtes",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/best-practices.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c_designing-queries-best-practices" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="c_designing-queries-best-practices">Bonnes pratiques Amazon Redshift pour la conception de requêtes</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Afin d'optimiser les performances des requêtes, suivez ces recommandations lors de la création de requêtes.</p><div class="itemizedlist">
          
          
          
          
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Concevez les tables conformément aux bonnes pratiques pour fournir des bases solides aux performances des requêtes. Pour plus d'informations, consultez <a href="./c_designing-tables-best-practices.html">Bonnes pratiques Amazon Redshift pour la conception de tables</a>.</p>
         </li><li class="listitem">
            <p>Évitez l'utilisation de <code class="code">select *</code>. Incluez uniquement les colonnes dont vous avez spécifiquement besoin.</p>
         </li><li class="listitem">
            <p>Utilisez un <a href="./r_CASE_function.html">Expression conditionnelle CASE</a> pour effectuer des regroupements complexes au lieu de choisir à partir de la même table plusieurs fois.</p>
         </li><li class="listitem">
            <p>N'utilisez pas les jointures croisées, sauf nécessité absolue. Ces jointures sans condition de jointure se traduisent par le produit cartésien de deux tables. Les jointures croisées sont généralement exécutées comme jointures par boucle imbriquée, qui sont les types de jointures les plus lents possibles. </p>
         </li><li class="listitem">
            <p>Utilisez les sous-requêtes dans les cas où une table de la requête n'est utilisée que pour les conditions de prédicat et où les sous-requêtes retournent un petit nombre de lignes (inférieur à 200). L'exemple suivant utilise une sous-requête pour éviter de joindre la table LISTING.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select sum(sales.qtysold)
from sales
where salesid in (select listid from listing where listtime &gt; '2008-12-26');</code></pre>
         </li><li class="listitem">
            <p>Utilisez les prédicats afin de limiter le jeu de données autant que possible.</p>
         </li><li class="listitem">
            <p>Dans le prédicat, utilisez les opérateurs les moins onéreux que vous puissiez. Les opérateurs <a href="./r_comparison_condition.html">Condition de comparaison</a> sont préférables aux opérateurs <a href="./r_patternmatching_condition_like.html">LIKE</a>. Les opérateurs LIKE continuent d'être préférables aux opérateurs <a href="./pattern-matching-conditions-similar-to.html">SIMILAR TO</a> ou <a href="./pattern-matching-conditions-posix.html">Opérateurs POSIX</a>.</p>
         </li><li class="listitem">
            <p>Évitez l'utiliser de fonctions dans les prédicats de requête. Leur utilisation peut accroître le coût de la requête en exigeant de grands nombres de lignes pour résoudre les étapes intermédiaires de la requête.</p>
         </li><li class="listitem">
            <p>Si possible, utilisez la clause WHERE pour limiter l'ensemble de données. Comme le planificateur de requête peut alors utiliser l'ordre des lignes pour aider à déterminer quels enregistrements correspondent aux critères, il peut ignorer l'analyse de grands nombres de blocs de disque. Sans cela, le moteur d'exécution des requêtes doit analyser la totalité des colonnes participantes.</p>
         </li><li class="listitem">
            <p>Ajoutez des prédicats pour filtrer les tables qui prennent part à des jointures, même si les prédicats appliquent les mêmes filtres. La requête renvoie le même ensemble de résultats, mais Amazon Redshift est capable de filtrer les tables de jonction avant l'étape d'analyse et peut ensuite sauter efficacement l'analyse des blocs de ces tables. Les filtres redondants ne sont pas nécessaires si vous filtrez une colonne utilisée dans la condition de jonction. </p>
            <p>Par exemple, supposons que vous souhaitiez joindre <code class="code">SALES</code> et <code class="code">LISTING</code> pour trouver les ventes de billets pour les billets répertoriés après décembre, regroupés par vendeur. Les deux tables sont triées sur la date. La requête suivante joint les tables sur leur clé commune et filtre les valeurs de <code class="code">listing.listtime</code> postérieures au 1er décembre.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select listing.sellerid, sum(sales.qtysold)
from sales, listing
where sales.salesid = listing.listid
and listing.listtime &gt; '2008-12-01'
group by 1 order by 1;</code></pre>
            <p>Comme la clause WHERE n'inclut pas de prédicat pour <code class="code">sales.saletime</code>, le moteur d'exécution est contraint d'analyser la totalité de la table <code class="code">SALES</code>. Si vous savez que le filtre se traduira par le fait que moins de lignes prennent part à la jointure, ajoutez également le filtre. L'exemple suivant réduit le temps d'exécution de façon significative.</p>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select listing.sellerid, sum(sales.qtysold)
from sales, listing
where sales.salesid = listing.listid
and listing.listtime &gt; '2008-12-01'
and sales.saletime &gt; '2008-12-01'
group by 1 order by 1;</code></pre>

         </li><li class="listitem">
            <p>Utilisez les clés de tri dans la clause GROUP BY afin que le planificateur de requête puisse utiliser l'agrégation plus efficacement. Une requête peut être éligible à une agrégation en une phase lorsque sa liste GROUP BY contient uniquement des colonnes de clé tri, l'une d'elles étant aussi la clé de distribution. Les colonnes de clé de tri de la liste GROUP BY doivent inclure la première clé de tri, puis les autres clés de tri que vous souhaitez utiliser dans l'ordre des clés de tri. Par exemple, vous pouvez parfaitement utiliser la première clé de tri, les première et deuxième clés de tri, les première, deuxième et troisième clés de tri, et ainsi de suite. Vous ne pouvez pas utiliser les première et troisième clés de tri.</p>
            <p>Vous pouvez confirmer l'utilisation de l'agrégation en une phase en exécutant la commande <a href="./r_EXPLAIN.html">EXPLAIN</a> et en recherchant <code class="code">XN
                  GroupAggregate</code> dans l'étape d'agrégation de la requête.</p>
         </li><li class="listitem">
            <p>Si vous utilisez les clauses GROUP BY et ORDER BY, assurez-vous d'y placer les colonnes dans le même ordre. Autrement dit, utilisez l'approche suivante :</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">group by a, b, c
order by a, b, c</code></pre>
            <p>N'utilisez pas l'approche suivante :</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">group by b, c, a
order by a, b, c</code></pre>
         </li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c_best-practices-avoid-maintenance.html">Planifier la maintenance Windows</div><div id="next" class="next-link" accesskey="n" href="./advisor.html">Utilisation d'Advisor</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>