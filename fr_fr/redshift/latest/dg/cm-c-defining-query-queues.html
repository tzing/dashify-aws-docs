<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Implémentation de la gestion manuelle de la charge de travail - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="cm-c-defining-query-queues" /><meta name="default_state" content="cm-c-defining-query-queues" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-defining-query-queues.html" /><meta name="description" content="Définissez les files d’attente de requêtes en modifiant la configuration manuelle de WLM dans Amazon Redshift pour un cluster afin de définir jusqu’à huit files d’attente de requêtes en plus de la file d’attente du superutilisateur." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt de données avec Amazon Redshift, service d’entrepôt de données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-defining-query-queues.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/cm-c-defining-query-queues.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="Implémentation de la gestion manuelle de la charge de travail" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Implémentation de la gestion manuelle de la charge de travail - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#cm-c-defining-query-queues" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-defining-query-queues.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-defining-query-queues.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-defining-query-queues.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt de données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Implémentation de la gestion de la charge de travail",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-implementing-workload-management.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Implémentation de la gestion manuelle de la charge de travail",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-implementing-workload-management.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#cm-c-defining-query-queues" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="page-toc-src"><a href="#concurrency-scaling-mode">Mode de mise à l’échelle de la simultanéité</a><a href="#cm-c-defining-query-queues-concurrency-level">Niveau de simultanéité</a><a href="#cm-c-defining-query-queues-user-groups">Groupes d’utilisateurs</a><a href="#cm-c-defining-query-queues-query-groups">Groupes de requêtes</a><a href="#wlm-wildcards">Caractères génériques</a><a href="#wlm-memory-percent">Pourcentage de mémoire WLM à utiliser</a><a href="#wlm-timeout">Délai WLM</a><a href="#wlm-query-monitoring-rules">Règles de surveillance de requête</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="cm-c-defining-query-queues">Implémentation de la gestion manuelle de la charge de travail</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Grâce à la gestion manuelle de la charge de travail, vous pouvez gérer les performances du système et l’expérience de vos utilisateurs en modifiant la configuration de gestion de la charge de travail afin de créer des files d’attente distinctes pour les requêtes de longue durée et de courte durée.</p><p>Lorsque les utilisateurs exécutent des requêtes dans Amazon Redshift, celles-ci sont acheminées vers des files d’attente de requêtes. Chaque file d’attente de requête contient un certain nombre d’emplacements de requête. Chaque file d’attente se voit affecter une partie de la mémoire disponible du cluster. La mémoire d’une file d’attente est répartie entre les emplacements de requête de la file d’attente. Vous pouvez permettre à Amazon Redshift de gérer la concurrence des requêtes en WLM automatique. Pour plus d'informations, consultez <a href="./automatic-wlm.html">Implémentation de la gestion automatique de la charge de travail</a>.</p><p>Ou vous pouvez configurer des propriétés de gestion de la charge de travail pour chaque file d’attente de requête. Ainsi, vous spécifiez la façon dont la mémoire est allouée entre les emplacements et comment les requêtes peuvent être acheminées vers des files d’attente spécifiques lors de l’exécution. Vous pouvez également configurer les propriétés de gestion de la charge de travail afin d’annuler les requêtes de longue durée.</p><p>Par défaut, Amazon Redshift configure les files d’attente de requêtes suivantes :</p><div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p> <b>Une file d’attente de super-utilisateur</b> </p>
            <p>La file d’attente de super-utilisateur est réservée aux super-utilisateurs uniquement et ne peut pas être configurée. Utilisez cette file d’attente uniquement lorsque vous avez besoin d’exécuter des requêtes qui affectent le système ou à des fins de dépannage. Par exemple, utilisez cette file d’attente lorsque vous avez besoin d’annuler une requête de longue durée d’un utilisateur ou d’ajouter des utilisateurs à la base de données. Ne l’utilisez pas pour exécuter des requêtes courantes. La file d’attente ne s’affiche pas dans la console, mais elle s’affiche dans les tables système de la base de données comme la cinquième file d’attente. Pour exécuter une requête dans la file d’attente du super-utilisateur, un utilisateur doit être connecté en tant que super-utilisateur et exécuter la requête à l’aide du groupe de requêtes <code class="code">superuser</code> prédéfini.</p>
         </li><li class="listitem">
            <p> <b>Une file d’attente d’utilisateur par défaut</b> </p>
            <p>La file d’attente par défaut est configurée initialement pour exécuter cinq requêtes simultanément. Lorsque vous utilisez le WLM manuel, vous pouvez modifier les propriétés de simultanéité, d’expiration et d’allocation de mémoire de la file d’attente par défaut, mais vous ne pouvez pas spécifier de groupes d’utilisateurs ou de groupes de requêtes. La file d’attente par défaut doit être la dernière file d’attente de la configuration de la charge de travail. Toutes les requêtes qui ne sont pas acheminées vers d’autres files d’attente s’exécutent dans la file d’attente par défaut. </p>
         </li></ul></div><p>Les files d’attente de requêtes sont définies dans la configuration WLM. La configuration WLM est un paramètre modifiable (<code class="code">wlm_json_configuration</code>) dans un groupe de paramètres, qui peut être associé à un ou plusieurs clusters. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/workload-mgmt-config.html">Configuration de la gestion de la charge de travail</a> dans le <em>Guide de la gestion du cluster Amazon Redshift</em>. </p><p>Vous pouvez ajouter des files d’attente de requête supplémentaires à la configuration WLM par défaut (huit files d’attente de l’utilisateur au maximum). Vous pouvez configurer les éléments suivants pour chaque file d’attente de requête : </p><div class="itemizedlist">
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Mode de mise à l’échelle de la simultanéité </p>
         </li><li class="listitem">
            <p>Niveau de simultanéité </p>
         </li><li class="listitem">
            <p>Groupes d’utilisateurs </p>
         </li><li class="listitem">
            <p>Groupes de requêtes </p>
         </li><li class="listitem">
            <p>Pourcentage de mémoire WLM à utiliser</p>
         </li><li class="listitem">
            <p>Délai WLM</p>
         </li><li class="listitem">
            <p>Saut de file d’attente des requêtes WLM</p>
         </li><li class="listitem">
            <p>Règles de surveillance de requête</p>
         </li></ul></div>
         <h2 id="concurrency-scaling-mode">Mode de mise à l’échelle de la simultanéité</h2>
         <p>Lorsque la mise à l’échelle de la simultanéité est activée, Amazon Redshift ajoute automatiquement de la capacité de cluster supplémentaire lorsque vous en avez besoin pour traiter une augmentation des requêtes de lecture et d’écriture simultanées. Les utilisateurs voient les données les plus récentes, que les requêtes s’exécutent sur le cluster principal ou sur un cluster de mise à l’échelle de la simultanéité. </p>
         <p>Vous gérez quelles sont les requêtes envoyées au cluster de mise à l’échelle de la simultanéité en configurant les files d’attente de la gestion de la charge de travail. Lorsque vous activez la mise à l’échelle de la simultanéité pour une file d’attente, les requêtes éligibles sont envoyées au cluster de mise à l’échelle de la simultanéité au lieu d’être mises dans une file d’attente. Pour plus d'informations, consultez <a href="./concurrency-scaling.html">Utilisation de la mise à l’échelle de la simultanéité</a>.</p>
       
         <h2 id="cm-c-defining-query-queues-concurrency-level">Niveau de simultanéité</h2>
         <p>Les requêtes placées dans une file d’attente s’exécutent simultanément jusqu’à ce qu’elles atteignent le nombre d’emplacements de requêtes WLM ou le niveau de<em> simultanéité</em> défini pour cette file d’attente. Les requêtes suivantes attendent ensuite dans la file d’attente.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Le niveau de simultanéité est différent du nombre de connexions utilisateur simultanées qu’un cluster peut accepter. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-to-cluster.html">Connexion à un cluster</a> dans le <em>Guide de la gestion du cluster Amazon Redshift</em>.</p></div></div>
         <p>Dans une configuration WLM automatique, ce qui est recommandé, le niveau de simultanéité est réglé sur <b>Auto</b>. Amazon Redshift alloue dynamiquement de la mémoire aux requêtes, ce qui détermine par la suite le nombre de requêtes à exécuter simultanément. Il se base sur les ressources requises pour les requêtes en cours et les requêtes en file d’attente. La fonction Auto WLM n’est pas configurable. Pour plus d'informations, consultez <a href="./automatic-wlm.html">Implémentation de la gestion automatique de la charge de travail</a>. </p>
        
         <p>Dans une configuration WLM manuelle, Amazon Redshift alloue statiquement une quantité fixe de mémoire à chaque file d’attente. La mémoire de la file d’attente est répartie de manière égale entre les emplacements de requête. Par exemple, si une file d’attente se voit attribuer 20 % de la mémoire d’un cluster et dispose de 10 emplacements, chaque requête se voit attribuer 2 % de la mémoire du cluster. L’allocation de mémoire reste fixe quel que soit le nombre de requêtes exécutées simultanément. En raison de cette allocation de mémoire fixe, les requêtes qui s’exécutent entièrement en mémoire lorsque le nombre d’emplacements est de 5 peuvent écrire les résultats intermédiaires sur le disque si le nombre d’emplacements est porté à 20. Dans ce cas, la part de chaque requête dans la mémoire de la file d’attente passe de 1/5e à 1/20e. Les I/O de disque supplémentaires peuvent dégrader les performances. </p>
         <p>Le nombre maximum d’emplacements pour toutes les files d’attente définies par l’utilisateur est de 50. Cela limite le nombre total d’emplacements pour toutes les files d’attente, y compris la file d’attente par défaut. La seule file d’attente qui n’est pas soumise à cette limite est la file d’attente réservée au super-utilisateur.</p>
      
  
         
   
         <p>Par défaut, les files d’attente WLM manuelles ont un niveau de simultanéité de 5. Votre charge de travail peut tirer profit d’un niveau de simultanéité plus élevé dans certains cas, notamment :</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Si plusieurs petites requêtes sont obligées d’attendre les requêtes de longue durée, créez une file d’attente distincte avec un nombre d’emplacements supérieur et affectez les requêtes plus petites à cette file d’attente. Une file d’attente avec un niveau de simultanéité supérieur a moins de mémoire allouée à chaque emplacement de requête, mais les requêtes plus petites nécessitent moins de mémoire.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Si vous activez l’accélération des requêtes courtes (SQA), WLM établit automatiquement la priorité des requêtes de courte durée sur les requêtes de longue durée, afin que vous n’ayez pas besoin d’une file d’attente distincte pour les requêtes courtes dans la plupart des flux de travail. Pour plus d'informations, consultez <a href="./wlm-short-query-acceleration.html">Utilisation de l’accélération des requêtes courtes</a>. </p></div></div>
            </li><li class="listitem">
               <p>Si plusieurs de vos requêtes accèdent chacune aux données sur une seule tranche, configurez une file d’attente WLM distincte pour exécuter ces requêtes simultanément. Amazon Redshift affecte des requêtes simultanées à des tranches distinctes, ce qui permet à plusieurs requêtes d’être exécutées en parallèle sur plusieurs tranches. Par exemple, si une requête est un agrégat simple avec un prédicat sur la clé de distribution, les données de la requête sont situées sur une seule tranche. </p>
            </li></ul></div>
    
          
            <h3 id="cm-c-defining-query-queues-concurrency-level-example">Exemple de WLM manuel</h3>
            <p> Cet exemple est un scénario WLM manuel simple qui montre comment les emplacements et la mémoire peuvent être alloués. Vous mettez en œuvre un WLM manuel avec trois files d’attente, qui sont les suivantes : </p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p><em>File d’attente d’ingestion de données</em> : cette file d’attente est configurée pour l’ingestion de données. Elle se voit allouer 20 % de la mémoire du cluster et dispose de 5 emplacements. Par la suite, 5 requêtes peuvent être exécutées simultanément dans la file d’attente et chacune se voit attribuer 4 % de la mémoire.</p></li><li class="listitem"><p><em>File d’attente spécialiste des données</em> : cette file d’attente est conçue pour les requêtes nécessitant beaucoup de mémoire. Elle se voit allouer 40 % de la mémoire du cluster et dispose de 5 emplacements. Par la suite, 5 requêtes peuvent être exécutées simultanément et chacune se voit attribuer 8 % de la mémoire.</p></li><li class="listitem"><p><em>File d’attente par défaut</em> : cette file d’attente est destinée à la majorité des utilisateurs de l’organisation. Il s’agit notamment des groupes de vente et de comptabilité qui formulent généralement des requêtes courtes ou moyennes peu complexes. Elle se voit attribuer 40 % de la mémoire du cluster et dispose de 40 emplacements. 40 requêtes peuvent être exécutées simultanément dans cette file d’attente, chaque requête se voyant allouer 1 % de la mémoire. Il s’agit du nombre maximum d’emplacements qui peuvent être alloués à cette file d’attente, car la limite est de 50 pour toutes les files d’attente.</p></li></ul></div>
  
          
         
         <p>Si vous utilisez le WLM automatique et que votre charge de travail nécessite l’exécution de plus de 15 requêtes en parallèle, nous vous recommandons d’activer la mise à l’échelle de la simultanéité. Cela est dû au fait que l’augmentation du nombre d’emplacements de requête au-dessus de 15 peut créer une contention pour les ressources système et limiter le débit global d’un seul cluster. Avec la mise à l’échelle de la simultanéité, vous pouvez exécuter des centaines de requêtes en parallèle jusqu’à un nombre configuré de clusters de mise à l’échelle de la simultanéité. Le nombre de clusters de mise à l’échelle de la simultanéité est contrôlé par <a href="./r_max_concurrency_scaling_clusters.html">max_concurrency_scaling_clusters</a>. Pour plus d’informations sur la mise à l’échelle de la concurrence, consultez <a href="./concurrency-scaling.html">Utilisation de la mise à l’échelle de la simultanéité</a>. </p>
            
             
         
         
         
         
   
         <p>Pour plus d'informations, consultez <a href="./query-performance-improvement-opportunities.html">Amélioration des performances des requêtes </a>. </p>
       
         <h2 id="cm-c-defining-query-queues-user-groups">Groupes d’utilisateurs</h2>
         
         
         <p>Vous pouvez affecter un ensemble de groupes d’utilisateurs à une file d’attente en spécifiant chaque nom de groupe d’utilisateurs ou en utilisant des caractères génériques. Lorsqu’un membre d’un groupe d’utilisateurs répertorié exécute une requête, celle-ci s’exécute dans la file d’attente correspondante. Il n’y a pas de limite au nombre de groupes d’utilisateurs qui peut être assigné à une file d’attente. Pour plus d'informations, consultez <a href="./cm-c-executing-queries.html#cm-c-executing-queries-assigning-queries-to-queues-based-on-user-groups">Affectation des requêtes aux files d’attente en fonction des groupes d’utilisateurs</a>. </p>
       
         <h2 id="cm-c-defining-query-queues-query-groups">Groupes de requêtes </h2>
         
         
         <p>Vous pouvez affecter un ensemble de groupes de requêtes à une file d’attente en spécifiant chaque nom de groupe de requêtes ou en utilisant des caractères génériques. Un groupe de requêtes est simplement une étiquette. Au moment de l’exécution, vous pouvez affecter l’étiquette de groupe de requête à une série de requêtes. Toutes les requêtes qui sont affectées à un groupe de requêtes répertorié sont exécutées dans la file d’attente correspondante. Il n’y a pas de limite au nombre de groupes de requêtes qui peut être assigné à une file d’attente. Pour plus d'informations, consultez <a href="./cm-c-executing-queries.html#cm-c-executing-queries-assigning-a-query-to-a-query-group">Affectation d’une requête à un groupe de requêtes</a>. </p>
       
         <h2 id="wlm-wildcards">Caractères génériques</h2>
         
         <p>Si les caractères génériques sont activés dans la configuration de file d’attente WLM, vous pouvez affecter des groupes d’utilisateurs et des groupes de requêtes à une file d’attente individuellement ou en utilisant des caractères génériques de style shell Unix. Le modèle correspondant est sensible à la casse. </p>
         <p>Par exemple, le caractère générique « * » correspond à n’importe quel nombre de caractères. Ainsi, si vous ajoutez <code class="code">dba_*</code> à la liste de groupes d’utilisateurs pour une file d’attente, toute requête exécutée par un utilisateur et appartenant à un groupe dont le nom commence par <code class="code">dba_</code> est affectée à cette file d’attente. <code class="code">dba_admin</code> ou <code class="code">DBA_primary</code> sont des exemples. Le caractère générique « ? » correspond à n’importe quel caractère unique. Ainsi, si la file d’attente comprend le groupe utilisateur <code class="code">dba?1</code>, alors les groupes utilisateur nommés <code class="code">dba11</code> et <code class="code">dba21</code> correspondent, mais le groupe <code class="code">dba12</code> ne correspond pas. </p>
         <p>Les caractères génériques sont désactivés par défaut.</p>
       
         <h2 id="wlm-memory-percent">Pourcentage de mémoire WLM à utiliser</h2>
         <p>Dans une configuration de gestion automatique de la charge de travail, le pourcentage de mémoire est défini sur <code class="userinput">auto</code>. Pour plus d'informations, consultez <a href="./automatic-wlm.html">Implémentation de la gestion automatique de la charge de travail</a>. </p>
         
         <p>Dans une configuration de gestion manuelle de la charge de travail, vous pouvez définir le paramètre <code class="code">WLM Memory Percent to Use</code> pour spécifier la quantité de mémoire disponible qui est allouée à une requête. Par défaut, chaque file d’attente définie par l’utilisateur se voit allouer une part égale de la mémoire disponible pour les requêtes définies par l’utilisateur. Par exemple, si vous avez quatre files d’attente définies par l’utilisateur, chaque file d’attente reçoit 25 % de la mémoire disponible. La file d’attente du super-utilisateur dispose de sa propre mémoire allouée et ne peut pas être modifiée. Pour modifier l’allocation, vous affectez un pourcentage entier de la mémoire à chaque file d’attente, à concurrence d’un total de 100 %. Toute mémoire non allouée est gérée par Amazon Redshift et peut être donnée temporairement à une file d’attente si celle-ci demande de la mémoire supplémentaire pour le traitement. </p>
         <p>Par exemple, si vous configurez quatre files d’attente, vous pouvez allouer de la mémoire comme suit : 20 %, 30 %, 15 %, 15 %. Les 20 % restants ne sont pas alloués et sont gérés par le service.</p>
       
         <h2 id="wlm-timeout">Délai WLM</h2>
         <p>Le délai WLM (<code class="code">max_execution_time</code>) est obsolète. Au lieu de cela, créez une règle de surveillance de requête (QRM) <code class="code">query_execution_time</code> pour limiter le temps d’exécution écoulé d’une requête. Pour plus d'informations, consultez <a href="./cm-c-wlm-query-monitoring-rules.html">Règles de surveillance de requête WLM</a>. </p>
         
         <p>Pour limiter le délai imparti aux requêtes dans une file d’attente WLM donnée, vous pouvez définir la valeur du délai WLM pour chaque file d’attente. Le paramètre timeout spécifie la durée, en millisecondes, pendant laquelle Amazon Redshift attend l’exécution d’une requête avant de l’annuler ou de la faire sauter. Le délai s’appuie sur la durée de l’exécution de la requête et n’inclut pas le temps d’attente dans une file d’attente. </p>
         <p>WLM tente de replacer les instructions <a href="./r_CREATE_TABLE_AS.html">CREATE TABLE AS</a> (CTAS) et les requêtes en lecture seule, telles que les instructions SELECT. Les requêtes ne pouvant être replacées sont annulées. Pour plus d'informations, consultez <a href="./wlm-queue-hopping.html">Saut de file d’attente des requêtes WLM</a>.</p>
         <p>Le délai WLM ne s’applique pas à une requête qui a atteint l’état returning. Pour afficher l’état d’une requête, consultez la table système <a href="./r_STV_WLM_QUERY_STATE.html">STV_WLM_QUERY_STATE</a>. Les instructions COPY et les opérations de maintenance, comme ANALYZE et VACUUM, ne sont pas assujetties au délai WLM.</p>
         <p>La fonction de délai WLM est similaire au paramètre de configuration <a href="./r_statement_timeout.html">statement_timeout</a>. La seule différence est que le paramètre de configuration <code class="code">statement_timeout</code> s’applique à l’ensemble du cluster, alors que le délai WLM est spécifique à une seule file d’attente de la configuration WLM. </p>
         <p>Si <a href="./r_statement_timeout.html">statement_timeout</a> est également spécifié, la valeur la plus basse de statement_timeout et de délai WLM (max_execution_time) est utilisée. </p>
       
         <h2 id="wlm-query-monitoring-rules">Règles de surveillance de requête</h2>
         

         <p>Les règles de surveillance de requête définissent les limites de performance reposant sur les métriques pour les files d’attente WLM et spécifient quelle action exécuter quand une requête dépasse ces limites. Par exemple, pour une file d’attente dédiée aux requêtes de courte durée, vous pouvez créer une règle qui annule les requêtes qui s’exécutent pendant plus de 60 secondes. Si vous souhaitez effectuer un suivi des requêtes mal conçues, vous pouvez configurer une autre règle qui consigne les requêtes contenant des boucles imbriquées. Pour plus d'informations, consultez <a href="./cm-c-wlm-query-monitoring-rules.html">Règles de surveillance de requête WLM</a>.</p>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./query-priority.html">Priorité de requête</div><div id="next" class="next-link" accesskey="n" href="./wlm-queue-hopping.html">Saut de file d’attente des requêtes WLM</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-defining-query-queues.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm-c-defining-query-queues.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>