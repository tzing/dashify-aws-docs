<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Résolution des problèmes de requêtes - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="queries-troubleshooting" /><meta name="default_state" content="queries-troubleshooting" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" /><meta name="description" content="Cette section fournit une référence rapide pour identifier et résoudre certains des problèmes les plus courants et les plus graves que vous êtes susceptibles de rencontrer avec les requêtes Amazon Redshift." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt de données avec Amazon Redshift, service d’entrepôt de données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/queries-troubleshooting.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/queries-troubleshooting.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/queries-troubleshooting.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/queries-troubleshooting.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/queries-troubleshooting.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/queries-troubleshooting.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/queries-troubleshooting.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/queries-troubleshooting.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/queries-troubleshooting.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/queries-troubleshooting.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/queries-troubleshooting.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/queries-troubleshooting.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/queries-troubleshooting.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/queries-troubleshooting.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/queries-troubleshooting.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/queries-troubleshooting.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/queries-troubleshooting.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="Résolution des problèmes de requêtes" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Résolution des problèmes de requêtes - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#queries-troubleshooting" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt de données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Réglage de performances des requêtes",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-optimizing-query-performance.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Résolution des problèmes de requêtes",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-optimizing-query-performance.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#queries-troubleshooting" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="page-toc-src"><a href="#queries-troubleshooting-connection-fails">Échecs des connexions</a><a href="#queries-troubleshooting-query-hangs">La requête se bloque</a><a href="#queries-troubleshooting-query-takes-too-long">La requête est trop longue</a><a href="#queries-troubleshooting-load-fails">La charge échoue</a><a href="#queries-troubleshooting-load-takes-too-long">La charge est trop longue</a><a href="#queries-troubleshooting-load-data-incorrect">Le chargement des données est incorrect</a><a href="#set-the-JDBC-fetch-size-parameter">Définition du paramètre de taille d’extraction JDBC</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="queries-troubleshooting">Résolution des problèmes de requêtes</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Cette section fournit une référence rapide pour identifier et résoudre certains des problèmes les plus courants et les plus graves que  vous êtes susceptibles de rencontrer avec les requêtes Amazon Redshift.</p><div class="highlights" id="inline-topiclist"><h6>Rubriques</h6><ul><li><a href="#queries-troubleshooting-connection-fails">Échecs des connexions</a></li><li><a href="#queries-troubleshooting-query-hangs">La requête se bloque</a></li><li><a href="#queries-troubleshooting-query-takes-too-long">La requête est trop longue</a></li><li><a href="#queries-troubleshooting-load-fails">La charge échoue</a></li><li><a href="#queries-troubleshooting-load-takes-too-long">La charge est trop longue</a></li><li><a href="#queries-troubleshooting-load-data-incorrect">Le chargement des données est incorrect</a></li><li><a href="#set-the-JDBC-fetch-size-parameter">Définition du paramètre de taille d’extraction JDBC</a></li></ul></div><p>Ces suggestions vous donnent un point de départ pour le dépannage. Pour plus d’informations, vous pouvez également consulter les ressources suivantes.</p><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="https://docs.aws.amazon.com/redshift/latest/mgmt/using-rs-tools.html">Accès aux clusters et aux bases de données Amazon Redshift</a></p>
         </li></ul></div><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="./t_Creating_tables.html">Utilisation de l’optimisation automatique des tables</a></p>
         </li></ul></div><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="./t_Loading_data.html">Chargement des données</a></p>
         </li></ul></div><div class="itemizedlist">
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="./tutorial-loading-data.html">Didacticiel : chargement des données à partir d’Amazon S3</a></p>
         </li></ul></div><h2 id="queries-troubleshooting-connection-fails">Échecs des connexions</h2>
         
         <p>La connexion de votre requête peut échouer pour les raisons suivantes ; nous vous conseillons d’adopter les approches de résolution suivantes.</p>
          
            <h6>Le client ne parvient pas à se connecter au serveur</h6>
            <p>Si vous utilisez des certificats SSL ou serveur, commencez par supprimer cette complexité pendant que vous résolvez le problème de connexion. Ensuite, ajoutez à nouveau les certificats SSL ou serveur lorsque vous avez trouvé une solution. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-ssl-support.html">Configurer les options de sécurité pour les connexions</a> dans le <em>Guide de gestion Amazon Redshift.</em></p>
          
          
            <h6>La connexion est refusée</h6>
            <p>En général, lorsque vous recevez un message d’erreur indiquant qu’il est impossible d’établir une connexion, cela signifie qu’il y a un problème d’autorisation d’accès au cluster. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-refusal-failure-issues.html">La connexion est refusée ou échoue</a> dans le <em>Guide de gestion Amazon Redshift.</em> </p>
          
      <h2 id="queries-troubleshooting-query-hangs">La requête se bloque</h2>
         
         <p>Votre requête peut se bloquer, ou cesser de répondre, pour les raisons suivantes ; nous vous conseillons d’adopter les approches de résolution suivantes.</p>
          
            <h6>La connexion à la base de données est abandonnée</h6>
            <p>Réduisez la taille de l’unité de transmission maximale (MTU). La taille de la MTU détermine la taille maximale, en octets, d’un paquet pouvant être transféré dans une trame Ethernet sur votre connexion réseau. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-drop-issues.html">La connexion à la base de données est abandonnée</a> dans le <em>Guide de gestion Amazon Redshift.</em> </p>
          
          
            <h6>La connexion à la base de données arrive à expiration</h6>
            <p>La connexion de votre client à la base de données semble se bloquer ou arriver à expiration lorsque vous exécutez de longues requêtes, par exemple une commande COPY. Dans ce cas, vous pouvez constater que la console Amazon Redshift affiche que la requête est terminée, mais que l’outil client lui-même semble toujours exécuter la requête. Les résultats de la requête peuvent être manquants ou incomplets en fonction selon le moment où la connexion s’est arrêtée. Cela se produit lorsque les connexions inactives sont arrêtées par un composant réseau intermédiaire. Pour plus d’informations, consultez <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-firewall-guidance.html">Problème de délai d’expiration du pare-feu</a> dans le <em>Guide de gestion Amazon Redshift.</em> </p>
          
          
            <h6> out-of-memory Une erreur côté client se produit avec ODBC</h6>
            <p>Si votre application cliente utilise une connexion ODBC et que votre requête crée un ensemble de résultats trop volumineux pour contenir en mémoire, vous pouvez diffuser l’ensemble de résultats sur votre application cliente à l’aide d’un curseur. Pour plus d’informations, consultez <a href="./declare.html">DECLARE</a> et <a href="./declare.html#declare-performance">Considérations relatives aux performances lors de l’utilisation de curseurs</a>.</p>
          
          
            <h6> out-of-memory Une erreur côté client se produit avec JDBC</h6>
            <p>Lorsque vous tentez de récupérer de grands ensembles de résultats via une connexion JDBC, vous pouvez rencontrer des erreurs côté client out-of-memory . Pour plus d'informations, consultez <a href="#set-the-JDBC-fetch-size-parameter">Définition du paramètre de taille d’extraction JDBC</a>.</p>
          
          
            <h6>Il existe un blocage potentiel </h6>
            <p>En cas de blocage potentiel, essayez ce qui suit :</p>
          
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Affichez les tables système <a href="./r_STV_LOCKS.html">STV_LOCKS</a> et <a href="./r_STL_TR_CONFLICT.html">STL_TR_CONFLICT</a> pour rechercher les conflits impliquant des mises à jour de plusieurs tables.</p>
            </li><li class="listitem">
               <p>Utilisez la fonction <a href="./PG_CANCEL_BACKEND.html">PG_CANCEL_BACKEND</a> pour annuler une ou plusieurs requêtes conflictuelles.</p>
            </li><li class="listitem">
               <p>Utilisez la fonction <a href="./PG_TERMINATE_BACKEND.html">PG_TERMINATE_BACKEND</a> pour mettre fin à une session, ce qui oblige toutes les transactions en cours d’exécution dans la session terminée à libérer tous les verrous et à restaurer la transaction.</p>
            </li><li class="listitem">
               <p>Planifiez les opérations d’écriture simultanées avec soin. Pour plus d'informations, consultez <a href="./c_Concurrent_writes.html">Gestion des opérations d’écriture simultanées</a>.</p>
            </li></ul></div>
      <h2 id="queries-troubleshooting-query-takes-too-long">La requête est trop longue</h2>
         
         <p>Votre requête peut prendre trop de temps pour les raisons suivantes ; nous vous conseillons d’adopter les approches de résolution suivantes.</p>
          
            <h6>Les tables ne sont pas optimisées</h6>
            <p>Définissez la clé de tri, le style de distribution et l’encodage de compression des tables afin de tirer pleinement parti du traitement parallèle. Pour de plus amples informations, consultez <a href="./t_Creating_tables.html">Utilisation de l’optimisation automatique des tables</a> </p>
          
          
            <h6>La requête écrit sur le disque</h6>
            <p>Vos requêtes peuvent être en train d’écrire sur le disque pendant une partie de l’exécution des requêtes au moins. Pour plus d'informations, consultez <a href="./query-performance-improvement-opportunities.html">Amélioration des performances des requêtes </a>.</p>
          
          
            <h6>La requête doit attendre que d’autres requêtes se terminent</h6>
            <p>Vous pouvez améliorer les performances globales du système en créant des files d’attente de requêtes et en affectant différents types de requêtes aux files d’attente correspondantes. Pour plus d'informations, consultez <a href="./cm-c-implementing-workload-management.html">Implémentation de la gestion de la charge de travail</a>. </p>
          
          
            <h6>Les requêtes ne sont pas optimisées</h6>
            <p>Analysez le plan EXPLAIN pour rechercher des opportunités de réécriture des requêtes ou d’optimisation de la base de données. Pour plus d'informations, consultez <a href="./c-the-query-plan.html">Plan de requête</a>.</p>
          
          
            <h6>La requête nécessite davantage de mémoire pour s’exécuter</h6>
            <p>Si une requête spécifique nécessite davantage de mémoire, vous pouvez augmenter la mémoire disponible en augmentant le <a href="./r_wlm_query_slot_count.html">wlm_query_slot_count</a>. </p>
          
          
            <h6>La base de données nécessite une commande VACUUM pour s’exécuter</h6>
            <p>Exécutez la commande VACUUM chaque fois que vous ajoutez, supprimez ou modifiez un grand nombre de lignes, sauf si vous chargez vos données dans l’ordre de la clé de tri. La commande VACUUM réorganise vos données afin de conserver l’ordre de tri et de restaurer les performances. Pour plus d'informations, consultez <a href="./t_Reclaiming_storage_space202.html">Exécution de l’opération VACUUM sur les tables</a>.</p>
          

         <h3 id="queries-troubleshooting-cross-refs">Ressources supplémentaires pour la résolution des problèmes liés aux requêtes de longue durée</h3>
            <p>Vous trouverez ci-dessous des rubriques relatives aux vues système et d’autres sections de documentation utiles pour l’ajustement de requêtes :</p>
            <div class="itemizedlist">
                
                
                
                
                
                
            <ul class="itemizedlist"><li class="listitem"><p>La vue système <a href="./r_STV_INFLIGHT.html">STV_INFLIGHT</a> affiche les requêtes qui s’exécutent actuellement sur le cluster. Il peut être utile de l’utiliser avec <a href="./r_STV_RECENTS.html">STV_RECENTS</a> pour identifier les requêtes qui s’exécutent actuellement ou qui ont abouti récemment.</p></li><li class="listitem"><p><a href="./SYS_QUERY_HISTORY.html">SYS_QUERY_HISTORY</a> est utile pour la résolution des problèmes. Les requêtes DDL et DML y sont présentées avec des propriétés utiles telles que leur statut actuel, comme <code class="code">running</code> ou <code class="code">failed</code>, la durée d’exécution de chacune d’elles et si une requête s’est exécutée sur un cluster de mise à l’échelle de la simultanéité.</p></li><li class="listitem"><p><a href="./r_STL_QUERYTEXT.html">STL_QUERYTEXT</a> capture le texte de requête pour les commandes SQL. Par ailleurs, <a href="./r_SVV_QUERY_INFLIGHT.html">SVV_QUERY_INFLIGHT</a>, qui joint STL_QUERYTEXT à STV_INFLIGHT, affiche des métadonnées de requête supplémentaires.</p></li><li class="listitem"><p>Un conflit de verrous de transactions peut être à l’origine de problèmes de performances au niveau des requêtes. Pour en savoir plus sur les transactions qui maintiennent actuellement des verrous sur des tables, consultez <a href="./r_SVV_TRANSACTIONS.html">SVV_TRANSACTIONS</a>.</p></li><li class="listitem"><p>La rubrique <a href="https://docs.aws.amazon.com/redshift/latest/dg/diagnostic-queries-for-query-tuning.html#identify-queries-that-are-top-candidates-for-tuning">Identification des requêtes particulièrement indiquées pour un ajustement</a> propose une requête de résolution des problèmes qui vous aide à identifier les requêtes exécutées récemment qui se sont montrées les plus chronophages. Elle vous permet ainsi de porter vos efforts sur les requêtes qui ont besoin d’être améliorées.</p></li><li class="listitem"><p>Si vous souhaitez explorer de manière plus approfondie la gestion des requêtes et comprendre comment gérer les files d’attente de requêtes, la rubrique <a href="./cm-c-implementing-workload-management.html">Implémentation de la gestion de la charge de travail</a> vous montre comment faire. La gestion de la charge de travail étant une fonctionnalité avancée, nous recommandons la gestion automatisée de la charge de travail dans la plupart des cas.</p></li></ul></div>
          
         
         
      <h2 id="queries-troubleshooting-load-fails">La charge échoue</h2>
         
         <p>Votre charge de données peut échouer pour les raisons suivantes ; nous vous conseillons d’adopter les approches de résolution suivantes.</p>
          
            <h6>La source de données se trouve dans une autre région AWS</h6>
            <p>Par défaut, le compartiment Amazon S3 ou la table Amazon DynamoDB spécifié dans la commande COPY doit se trouver dans la même région AWS que le cluster. Si vos données et votre cluster se trouvent dans des régions différentes, vous allez recevoir une erreur similaire à celle-ci : </p>
          
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">The bucket you are attempting to access must be addressed using the specified endpoint.</code></pre>
         <p>Si possible, assurez-vous que votre cluster et votre source de données se trouvent dans  la même région. Vous pouvez spécifier une autre région à l’aide de l’option <a href="./copy-parameters-data-source-s3.html#copy-region">REGION</a> avec la commande COPY. </p>
         
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Si votre cluster et votre source de données se trouvent dans des région AWS différentes, vous devrez payer des frais de transfert de données. Vous avez également une latence plus élevée.</p></div></div>
          
            <h6>La commande COPY échoue</h6>
            <p>Interrogez STL_LOAD_ERRORS pour découvrir les erreurs qui se sont produites lors de charges spécifiques. Pour plus d'informations, consultez <a href="./r_STL_LOAD_ERRORS.html">STL_LOAD_ERRORS</a>.</p>
          
      <h2 id="queries-troubleshooting-load-takes-too-long">La charge est trop longue</h2>
         
         <p>Votre opération de charge peut prendre trop de temps pour les raisons suivantes ; nous vous conseillons d’adopter les approches de résolution suivantes.</p>
          
            <h6>La commande COPY charge les données à partir d’un fichier unique</h6>
            <p>Fractionnez les données de chargement en plusieurs fichiers. Lorsque vous chargez toutes les données d’un seul grand fichier, Amazon Redshift est obligé d’effectuer un chargement sérialisé, ce qui est beaucoup plus lent. Le nombre de fichiers doit être un multiple du nombre de tranches de votre cluster, et les fichiers doivent être de taille égale, entre 1 Mo et 1 Go après compression. Pour plus d'informations, consultez <a href="./c_designing-queries-best-practices.html">Bonnes pratiques Amazon Redshift pour la conception de requêtes</a>.</p>
          
          
            <h6>L’opération de chargement utilise plusieurs commandes COPY</h6>
            <p>Si vous utilisez plusieurs commandes COPY simultanées pour charger une table à partir de plusieurs fichiers, Amazon Redshift est obligé d’effectuer un chargement sérialisé, ce qui est beaucoup plus lent. Dans ce cas, utilisez une seule commande COPY.</p>
          
      <h2 id="queries-troubleshooting-load-data-incorrect">Le chargement des données est incorrect</h2>
         
         <p>Votre opération COPY peut charger des données incorrectes de la manière suivante ; nous vous conseillons d’adopter les approches de résolution suivantes.</p>
         
          
            <h6>Des fichiers incorrects sont chargés</h6>
            <p>L’utilisation d’un préfixe d’objet pour spécifier les fichiers de données peut entraîner la lecture de fichiers indésirables. Au lieu de cela, utilisez un fichier manifeste pour spécifier exactement les fichiers à charger. Pour plus d’informations, consultez l’option <a href="./copy-parameters-data-source-s3.html#copy-manifest-file">copy_from_s3_manifest_file</a> pour la commande COPY et <a href="./r_COPY_command_examples.html#copy-command-examples-manifest">Example: COPY from Amazon S3 using a manifest</a> dans les exemples COPY.</p>
          
      <h2 id="set-the-JDBC-fetch-size-parameter">Définition du paramètre de taille d’extraction JDBC</h2>
         
         <p>Par défaut, le pilote JDBC collecte tous les résultats pour une requête à la fois. Par conséquent, lorsque vous tentez de récupérer un ensemble de résultats volumineux via une connexion JDBC, vous risquez de rencontrer une erreur côté client out-of-memory . Pour permettre à votre client de récupérer des ensembles de résultats par lots plutôt que par une seule  all-or-nothing  extraction, définissez le paramètre de taille de lecture JDBC dans votre application cliente.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>La taille de l’extraction n’est pas prise en charge pour ODBC.</p></div></div>
         <p>Pour obtenir les meilleures performances, définissez la taille de l’extraction sur la valeur la plus élevée qui n’entraîne pas d’erreurs de mémoire. Une valeur d’extraction de taille inférieure entraîne plusieurs opérations du serveur, ce qui prolonge les temps d’exécution. Le serveur réserve des ressources, y compris l’emplacement de requête WLM et la mémoire associée, jusqu’à ce que le client récupère le jeu de résultats complet ou que la requête soit annulée. Lorsque vous ajustez la taille d’extraction de façon appropriée, ces ressources sont libérées plus rapidement, ce qui les rend disponibles pour d’autres requêtes.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Si vous devez extraire de grands ensembles de données, nous vous recommandons d’utiliser une instruction <a href="./r_UNLOAD.html">UNLOAD</a> pour transférer les données vers Amazon S3. Lorsque vous utilisez UNLOAD, les nœuds de calcul fonctionnent en parallèle afin d’accélérer le transfert des données.</p></div></div>
         <p>Pour plus d’informations sur la définition du paramètre de taille d’extraction JDBC, consultez <a href="https://jdbc.postgresql.org/documentation/query/#getting-results-based-on-a-cursor" rel="noopener noreferrer" target="_blank"><span>Obtention de résultats basés sur un curseur</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> dans la documentation de PostgreSQL.</p>
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./diagnostic-queries-for-query-tuning.html">Requêtes de diagnostics pour l’ajustement des requêtes</div><div id="next" class="next-link" accesskey="n" href="./cm-c-implementing-workload-management.html">Implémentation de la gestion de la charge de travail</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/queries-troubleshooting.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>