<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>VACUUM - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_VACUUM_command" /><meta name="default_state" content="r_VACUUM_command" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html" /><meta name="description" content="Retrie les lignes et récupère l’espace dans une table spécifiée ou dans toutes les tables de la base de données actuelle." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt de données avec Amazon Redshift, service d’entrepôt de données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_VACUUM_command.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_VACUUM_command.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_VACUUM_command.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_VACUUM_command.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_VACUUM_command.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_VACUUM_command.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_VACUUM_command.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_VACUUM_command.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_VACUUM_command.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_VACUUM_command.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_VACUUM_command.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_VACUUM_command.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_VACUUM_command.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_VACUUM_command.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_VACUUM_command.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_VACUUM_command.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_VACUUM_command.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_VACUUM_command.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="VACUUM" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>VACUUM - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_VACUUM_command" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt de données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Référence SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Commandes SQL",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "VACUUM",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_VACUUM_command" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="page-toc-src"><a href="#r_VACUUM_command-privileges">Privilèges requis</a><a href="#r_VACUUM_command-synopsis">Syntaxe</a><a href="#r_VACUUM_command-parameters">Paramètres</a><a href="#r_VACUUM_usage_notes">Notes d’utilisation</a><a href="#r_VACUUM_command-examples">Exemples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="r_VACUUM_command">VACUUM</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Retrie les lignes et récupère l’espace dans une table spécifiée ou dans toutes les tables de la base de données actuelle.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Seuls les utilisateurs disposant des autorisations nécessaires peuvent efficacement vider une table. Si VACUUM est exécutée sans les autorisations de table nécessaires, l’opération se termine correctement, mais n’a aucun effet. Pour obtenir la liste des autorisations de table valides permettant d’exécuter VACUUM efficacement, consultez Privilèges requis ci-après.</p></div></div><p>Amazon Redshift trie automatiquement les données et exécute l’opération VACUUM DELETE en arrière-plan. Cela réduit la nécessité d’exécuter la commande VACUUM. Pour plus d'informations, consultez <a href="./t_Reclaiming_storage_space202.html">Exécution de l’opération VACUUM sur les tables</a>. </p><p>Par défaut, la commande VACUUM ignore la phase de tri pour toute table dans laquelle plus de 95 % des lignes sont déjà triées. L’omission de la phase de tri peut améliorer considérablement les performances de l’opération VACUUM. Pour modifier le seuil de suppression ou de tri par défaut d’une seule table, incluez le nom de la table et le paramètre TO <em>seuil</em> PERCENT lorsque vous exécutez la commande VACUUM. </p><p>Les utilisateurs peuvent accéder aux tables pendant qu’elles sont aspirées. Vous pouvez exécuter des requêtes et des opérations d’écriture pendant qu’une table est l’objet de la commande VACUUM, mais lorsque des commandes de langage de manipulation de données (DML) et une commande VACUUM s’exécutent en même temps, les deux peuvent prendre plus de temps. Si vous exécutez les instructions UPDATE et DELETE pendant une opération VACUUM, les performances du système peuvent être réduites. L’opération VACUUM DELETE bloque temporairement les opérations de mise à jour et de suppression. </p><p>Amazon Redshift exécute automatiquement une opération VACUUM DELETE ONLY en arrière-plan. L’opération automatique VACUUM s’interrompt lorsque les utilisateurs exécutent des opérations de langage de définition de données (DLL) telles que l’opération ALTER TABLE.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>La syntaxe et le comportement de la commande Amazon Redshift VACUUM sont sensiblement différentes de l’opération PostgreSQL VACUUM. Par exemple, l’opération VACUUM par défaut dans Amazon Redshift est VACUUM FULL, qui récupère de l’espace disque et retrie toutes les lignes. En revanche, l’opération VACUUM par défaut dans PostgreSQL récupère simplement l’espace et le rend disponible pour sa réutilisation.</p></div></div><p>Pour plus d'informations, consultez <a href="./t_Reclaiming_storage_space202.html">Exécution de l’opération VACUUM sur les tables</a>.</p>
         <h2 id="r_VACUUM_command-privileges">Privilèges requis</h2>
         <p>Les privilèges suivants sont requis pour VACUUM :</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Superuser</p></li><li class="listitem"><p>Utilisateurs disposant du privilège VACUUM</p></li><li class="listitem"><p>Propriétaire de la table</p></li><li class="listitem"><p>Propriétaire de la base de données avec qui la table est partagée</p></li></ul></div>
       
         <h2 id="r_VACUUM_command-synopsis">Syntaxe</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">VACUUM [ FULL | SORT ONLY | DELETE ONLY | REINDEX | RECLUSTER ]
[ [ <em>table_name</em> ] [ TO <em>threshold</em> PERCENT ] [ BOOST ] ]</code></pre>
       
         <h2 id="r_VACUUM_command-parameters">Paramètres</h2>
         <div class="variablelist">
             
             
             
             
             

            
             
             

             
             
         <dl>
               <dt id="vacuum-full"><span class="term">FULL </span></dt>
               <dd>
                  <p>Trie la table spécifiée (ou toutes les tables de la base de données actuelle) et récupère l’espace disque occupé par les lignes qui ont été marquées en vue de leur suppression par les opérations UPDATE et DELETE précédentes. VACUUM FULL est la valeur par défaut.</p>

                  <p>Une opération complète n’effectue pas une réindexation des tables entrelacées. Pour réindexer les tables entrelacées et exécuter une opération VACUUM FULL, utilisez l’option <a href="#vacuum-reindex">VACUUM REINDEX</a>. </p>

                  <p>Par défaut, VACUUM FULL ignore la phase de tri d’une table déjà triée à au moins 95 %. Si l’opération VACUUM peut ignorer la phase de tri, elle effectue DELETE ONLY et récupère l’espace de la phase de suppression de telle sorte qu’au moins 95 % des lignes restantes ne sont pas marquées en vue de leur suppression.  </p>
                  <p>Si le seuil de tri n’est pas atteint (par exemple, si 90 % des lignes sont triées) et que VACUUM effectue un tri complet, il effectue également une opération de suppression complète, récupérant l’espace de 100 % des lignes supprimées. </p>
                  <p>Vous ne pouvez modifier le seuil par défaut de VACUUM que pour une seule table. Pour modifier le seuil par défaut de VACUUM pour une seule table, incluez le nom de la table et le paramètre TO <em>seuil</em> PERCENT. </p>
               </dd>
             
               <dt id="vacuum-sort-only"><span class="term">SORT ONLY </span></dt>
               <dd>
                  <p>Trie la table spécifiée (ou toutes les tables de la base de données actuelle) sans récupération de l’espace libéré par les lignes supprimées. Cette option est utile lorsque la récupération de l’espace disque n’est pas importante, mais qu’un nouveau tri l’est. Une opération SORT ONLY réduit le temps passé pour les opérations VACUUM lorsque la région non triée ne contient pas un grand nombre de lignes supprimées et ne couvre pas l’ensemble de la région triée. Les applications qui n’ont pas de contraintes d’espace disque, mais dépendent de l’optimisation des requêtes et de la conservation des lignes de table triées peuvent bénéficier de ce type d’opération.</p>
                  <p>Par défaut, VACUUM SORT ONLY ignore toute table déjà triée à au moins 95 %. Pour modifier le seuil de tri par défaut d’une seule table, incluez le nom de la table et le paramètre TO <em>seuil</em> PERCENT lorsque vous exécutez la commande VACUUM. </p>
               </dd>
             
               <dt id="vacuum-delete-only"><span class="term">DELETE ONLY </span></dt>
               <dd>
                  <p>Amazon Redshift exécute automatiquement une opération VACUUM DELETE ONLY en arrière-plan. Par conséquent, vous n’aurez que rarement, voire jamais, besoin d’exécuter une opération VACUUM DELETE ONLY.</p>
                  <p>L’opération VACUUM DELETE récupère l’espace disque occupé par les lignes marquées en vue de leur suppression par des opérations UPDATE et DELETE précédentes, et compacte la table pour libérer l’espace consommé. Une opération DELETE ONLY ne trie pas les données de la table. </p>
                  <p>Cette option réduit le temps passé pour les opérations VACUUM lorsque la récupération de l’espace disque est importante, mais qu’un nouveau tri des lignes ne l’est pas. Cette option peut également être utile lorsque vos performances de requête sont déjà optimales et qu’un nouveau tri des lignes pour optimiser ces performances n’est pas une condition requise.</p>
                  <p>Par défaut, VACUUM DELETE ONLY récupère de l’espace de telle sorte qu’au moins 95 % des lignes restantes ne sont pas marquées en vue de leur suppression. Pour modifier le seuil de suppression par défaut d’une seule table, incluez le nom de la table et le paramètre TO <em>seuil</em> PERCENT lorsque vous exécutez la commande VACUUM.  </p>
                  <p>Certaines opérations, par exemple <code class="code">ALTER TABLE APPEND</code>, peuvent provoquer la fragmentation des tables. Lorsque vous utilisez la clause <code class="code">DELETE ONLY</code>, l’opération VACUUM récupère l’espace des tables fragmentées. La même valeur de seuil de 95% s’applique à l’opération de défragmentation. </p>
               </dd>
             
               <dt id="vacuum-reindex"><span class="term">REINDEX <em>nom_table</em></span></dt>
               <dd>
                  <p>Analyse la distribution des valeurs des colonnes de clé de tri entrelacé, puis effectue une opération VACUUM complète. Si REINDEX est utilisé, le nom d’une table est requis.</p>
                  <p>VACUUM REINDEX prend nettement plus de temps que VACUUM FULL, car l’opération effectue un passage supplémentaire pour analyser les clés de tri entrelacé. L’opération de tri et de fusion peut prendre plus de temps pour les tables entrelacées, car le tri entrelacé peut nécessiter la réorganisation de plus de lignes qu’un tri composé.</p>
                  <p>Si une opération VACUUM REINDEX se termine avant la fin, l’opération VACUUM suivante reprend l’opération de réindexation avant d’exécuter l’opération VACUUM complète.</p>
                  <p>VACUUM REINDEX n’est pas pris en charge avec TO <em>seuil</em> PERCENT.  </p>
               </dd>
             
               <dt><span class="term"> <em>table_name</em> </span></dt>
               <dd>
                  <p>Nom de la table sur laquelle s’applique l’opération VACUUM. Si vous ne spécifiez pas un nom de table, l’opération VACUUM s’applique à toutes les tables de la base de données actuelle. Vous pouvez spécifier une table créée par l’utilisateur permanente ou temporaire. La commande n’est pas pertinente pour les autres objets, tels que les vues et les tables système.</p>
                  <p> Si vous incluez le paramètre TO <em>seuil</em> PERCENT, un nom de table est obligatoire.</p>
               </dd>
             
               <dt id="vacuum-recluster"><span class="term">RECLUSTER <em>tablename</em></span></dt>
               <dd>
                  <p>Trie les parties de la table qui ne sont pas triées. Les parties de la table qui sont déjà triées par le tri automatique de la table restent intactes. Cette commande ne fusionne pas les données nouvellement triées avec la région triée. Elle ne récupère pas non plus tout l’espace marqué pour suppression. Lorsque cette commande est terminée, il se peut que la table n’apparaisse pas entièrement triée, comme indiqué par le champ <code class="code">unsorted</code> dans SVV_TABLE_INFO. </p>
                  <p> Nous vous recommandons d’utiliser VACUUM RECLUSTER pour les grandes tables avec une ingestion fréquente et des requêtes qui accèdent uniquement aux données les plus récentes. </p>
                  <p> VACUUM RECLUSTER n’est pas pris en charge avec TO threshold PERCENT. Si RECLUSTER est utilisé, le nom d’une table est requis.</p>
                 <p>VACUUM RECLUSTER n’est pas pris en charge sur les tables ayant des clés de tri entrelacées et les tables ayant le style de distribution ALL.</p>
               </dd>
             
               <dt><span class="term"> <em>table_name</em> </span></dt>
               <dd>
                  <p>Nom de la table sur laquelle s’applique l’opération VACUUM. Vous pouvez spécifier une table créée par l’utilisateur permanente ou temporaire. La commande n’est pas pertinente pour les autres objets, tels que les vues et les tables système.</p>
               </dd>
             
               <dt><span class="term"> TO <em>seuil</em> PERCENT </span></dt>
               <dd>
                  <p>Clause qui spécifie le seuil au-dessus duquel VACUUM ignore la phase de tri et le seuil cible de récupération de l’espace dans la phase de suppression. Le <em>seuil de tri</em> est le pourcentage du total des lignes qui sont déjà dans l’ordre de tri de la table spécifiée avant l’opération VACUUM.  Le <em>seuil de suppression</em> est le pourcentage minimal de lignes totales non marquées en vue de leur suppression après l’opération VACUUM. </p>
                  <p>Comme VACUUM ne retrie les lignes que lorsque le pourcentage de lignes triées d’une table est inférieur au seuil de tri, Amazon Redshift peut souvent réduire la durée de VACUUM de façon significative. De même, lorsque VACUUM n’est pas limité pour récupérer l’espace de 100 % des lignes marquée en vue de leur suppression, il est souvent possible d’ignorer la réécriture des blocs contenant seulement quelques lignes supprimées.</p>
                  <p>Par exemple, si vous spécifiez 75 pour <em>seuil</em>, VACUUM ignore la phase de tri si 75 % ou plus des lignes de la table sont déjà dans l’ordre de tri. Pour la phase de suppression, VACUUM définit une cible de récupération de l’espace disque de telle sorte qu’au moins 75 % des lignes de la table ne sont pas marquées en vue de leur suppression après l’opération VACUUM. La valeur <em>seuil</em> doit être un nombre entier compris entre 0 et 100. La valeur par défaut est 95. Si vous spécifiez une valeur égale à 100, VACUUM trie toujours la table, sauf si elle est déjà entièrement triée, et récupère l’espace de toutes les lignes marquées en vue de leur suppression. Si vous spécifiez la valeur 0, VACUUM ne trie jamais la table et ne récupère jamais l’espace.</p>
                  <p>Si vous incluez le paramètre TO <em>seuil</em> PERCENT, vous devez également spécifier un nom de table. Si le nom de table est omis, VACUUM échoue. </p>
                  <p>Vous ne pouvez pas utiliser le paramètre TO <em>seuil</em> PERCENT avec REINDEX. </p>
               </dd>
             
               <dt><span class="term">BOOST</span></dt>
               <dd>
                  <p>Exécute la commande VACUUM avec des ressources supplémentaires, comme la mémoire et l’espace disque, en fonction de leur disponibilité. Avec l’option BOOST, VACUUM exécute l’opération dans une fenêtre et bloque les suppressions et mises à jour simultanées pendant la durée de l’opération VACUUM. L’exécution de l’option BOOST utilise des ressources systèmes, ce qui peut affecter les performances de la requête. Exécutez l’opération VACUUM BOOST lorsque la charge sur le système est légère, par exemple pendant les opérations de maintenance. </p>
                  <p>Tenez compte des éléments suivants lorsque vous utilisez l’option BOOST :</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>Lorsque l’option BOOST est spécifiée, la valeur <em>table_name</em> est requise. </p>
                     </li><li class="listitem">
                        <p>L’option BOOST n’est pas prise en charge avec REINDEX. </p>
                     </li><li class="listitem">
                        <p>L’option BOOST est ignorée avec DELETE ONLY. </p>
                     </li></ul></div>
               </dd>
            </dl></div>
       
         <h2 id="r_VACUUM_usage_notes">Notes d’utilisation</h2>
         <p>Pour la plupart des applications Amazon Redshift, une opération VACUUM FULL est recommandée. Pour plus d'informations, consultez <a href="./t_Reclaiming_storage_space202.html">Exécution de l’opération VACUUM sur les tables</a>.</p>
         <p>Avant d’exécuter une opération VACUUM, notez le comportement suivant : </p>
         <div class="itemizedlist">
             
             
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Vous ne pouvez pas exécuter VACUUM au sein d’un bloc de transaction (BEGIN ... END). Pour plus d’informations sur les transactions, consultez <a href="./c_serial_isolation.html">Isolement sérialisable</a>. </p>
            </li><li class="listitem">
               <p>Vous ne pouvez exécuter qu’une seule commande VACUUM sur un cluster à un moment donné. Si vous essayez d’exécuter plusieurs opérations VACUUM simultanément, Amazon Redshift renvoie une erreur.</p>
            </li><li class="listitem">
               <p>Une certaine croissance de la table peut se produire lors d’une opération VACUUM. Ce comportement est attendu lorsqu’il n’y a aucune ligne supprimée à récupérer ou que le nouvel ordre de tri de la table se traduit par un ratio inférieur de compression des données.</p>
            </li><li class="listitem">
               <p>Pendant les opérations VACUUM, une certaine dégradation des performances des requêtes est attendue. Les performances normales reprennent dès que l’opération VACUUM est terminée.</p>
            </li><li class="listitem">
               <p>Les opérations d’écriture simultanées se poursuivent pendant les opérations VACUUM, mais nous ne les recommandons pas. Il est plus efficace de terminer les opérations d’écriture avant d’exécuter l’opération VACUUM. En outre, toutes les données écrites après le démarrage d’une opération de vide ne peuvent pas être nettoyées par cette opération. Dans ce cas, une deuxième opération de nettoyage est nécessaire.</p>
            </li><li class="listitem">
               <p>Une opération VACUUM peut ne pas être en mesure de démarrer si une opération de chargement ou d’insertion est déjà en cours. Les opérations VACUUM nécessitent temporairement un accès exclusif aux tables afin de démarrer. Comme cet accès exclusif est requis brièvement, les opérations VACUUM ne bloquent pas les charges et les insertions simultanées pendant une période de temps significative.</p>
            </li><li class="listitem">
               <p>Les opérations VACUUM sont ignorées lorsqu’il n’y a aucun travail à faire pour une table spécifique ; cependant, la découverte que l’opération peut être ignorée a un coût. Si vous savez qu’une table est vierge ou qu’elle ne respecte pas le seuil VACUUM défini, n’exécutez pas sur elle d’opération VACUUM.</p>
            </li><li class="listitem">
               <p>Une opération DELETE ONLY sur une petite table peut ne pas réduire le nombre de blocs utilisés pour stocker les données, en particulier lorsque la table possède un grand nombre de colonnes ou que le cluster utilise un grand nombre de tranches par nœud. Ces opérations VACUUM ajoutent un bloc par colonne et par tranche pour tenir compte des insertions simultanées dans la table ; en outre, il est possible que cette surcharge compense la diminution du nombre de blocs de l’espace disque récupéré. Par exemple, si une table de 10 colonnes sur un cluster de 8 nœuds occupe 1000 blocs avant une opération VACUUM, celle-ci ne réduit pas le nombre réel de blocs, sauf si plus de 80 blocs d’espace disque sont récupérés en raison des lignes supprimées. (Chaque bloc de données utilise 1 Mo.)</p>
            </li></ul></div>
         <p>Les opérations VACUUM automatiques s’interrompent si une des conditions suivantes est remplie : </p>
         <div class="itemizedlist">
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Un utilisateur exécute une opération de langage de manipulation de données (DDL), telle que ALTER TABLE, qui nécessite un verrou exclusif sur une table pour laquelle une opération VACUUM automatique est en cours. </p>
            </li><li class="listitem">
               <p>Un utilisateur déclenche VACUUM sur une table du cluster (une seule opération VACUUM peut être exécutée à la fois). </p>
            </li><li class="listitem">
               <p>Une période de forte charge de cluster.</p>
            </li></ul></div>
       
         <h2 id="r_VACUUM_command-examples">Exemples</h2>
         <p>Récupérez l’espace et la base de données, et triez à nouveau les lignes de toutes les tables en fonction du seuil d’aspiration de 95 % par défaut.</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum;</code></pre>
         <p>Récupérez l’espace et retriez les lignes de la table SALES en fonction du seuil de 95 % par défaut. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum sales;</code></pre>
         <p>Récupérez toujours l’espace et retriez les lignes de la table SALES. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum sales to 100 percent;</code></pre>
         <p>Retriez les lignes de la table SALES uniquement si moins de 75 % des lignes sont déjà triées. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class=""> vacuum sort only sales to 75 percent;</code></pre>
         <p>Récupérez de l’espace dans la table SALES, de telle sorte qu’au moins 75 % des lignes restantes ne soient pas marqués en vue de leur suppression après l’aspiration. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum delete only sales to 75 percent;</code></pre>
         <p>Réindexez, puis aspirez la table LISTING. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum reindex listing;</code></pre>
         <p>La commande suivante renvoie une erreur. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum reindex listing to 75 percent;</code></pre>
         
         
         <p>Regroupez, puis aspirez la table LISTING. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum recluster listing;</code></pre>
         <p>Regroupez, puis aspirez la table LISTING avec l’option BOOST. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">vacuum recluster listing boost;</code></pre>
         
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c_Examples_of_UPDATE_statements.html">Exemples d’instructions UPDATE</div><div id="next" class="next-link" accesskey="n" href="./c_SQL_functions.html">Référence sur les fonctions SQL</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_VACUUM_command.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>