<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Utilisation de la vue SVL_QUERY_SUMMARY - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-SVL-Query-Summary" /><meta name="default_state" content="using-SVL-Query-Summary" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="description" content="Pour analyser les informations récapitulatives sur la requête par flux, procédez comme suit :" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guide du développeur de base de données" /><meta name="abstract" content="Créez et gérez un entrepôt des données avec Amazon Redshift, service d’entrepôt des données au niveau de l’entreprise, pouvant atteindre plusieurs Po et entièrement géré." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/using-SVL-Query-Summary.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guide du développeur de base de données" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur de base de données" /><meta id="panorama-serviceConsolePage" value="Utilisation de la vue SVL_QUERY_SUMMARY" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Utilisation de la vue SVL_QUERY_SUMMARY - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#using-SVL-Query-Summary" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,entrepôt des données,développeur,exemples de données,database,développeur de base de données,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur de base de données",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Réglage de performances des requêtes",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-optimizing-query-performance.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Analyse et amélioration des requêtes",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-query-tuning.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Analyse du résumé de la requête",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-analyzing-the-query-summary.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Utilisation de la vue SVL_QUERY_SUMMARY",
        "item" : "https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-analyzing-the-query-summary.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#using-SVL-Query-Summary" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guide du développeur de base de données</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="using-SVL-Query-Summary">Utilisation de la vue SVL_QUERY_SUMMARY</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Pour analyser les informations récapitulatives sur la requête par flux, procédez comme suit :</p><div class="orderedlist">
                
                
                
                
                
                
                
                
            <ol><li>
                  <p>Exécutez la requête suivante pour déterminer l’ID de votre requête :</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select query, elapsed, substring
from svl_qlog
order by query
desc limit 5;                     </code></pre>
                  <p>Examinez le texte de la requête tronquée dans le champ <code class="code">substring</code> pour déterminer quelle valeur de <code class="code">query</code> représente votre requête. Si vous avez exécuté la requête plusieurs fois, utilisez la valeur de <code class="code">query</code> de la ligne avec la valeur de <code class="code">elapsed</code> inférieure. Il s’agit de la ligne de la version compilée. Si vous avez exécuté un grand nombre de requêtes, vous pouvez augmenter la valeur utilisée par la clause LIMIT utilisée pour vous assurer que votre requête est incluse.</p>
               </li><li>
                  <p>Sélectionnez les lignes de SVL_QUERY_SUMMARY pour votre requête. Ordonnez les résultats par flux, par segment et par étape :</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from svl_query_summary where query = MyQueryID order by stm, seg, step;</code></pre>
                  <div class="mediaobject">
                      
                        <img src="images/svl_query_summary_results.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                      
                  </div>
               </li><li>
                  <p>Mappe les étapes aux opérations du plan de requête à l’aide des informations de <a href="./query-plan-summary-map.html">Mappage du plan de requête au résumé de la requête</a>. Elles doivent avoir à peu près les mêmes valeurs pour les lignes et les octets (lignes * largeur dans le plan de requête). Si ce n’est pas le cas, consultez <a href="./query-performance-improvement-opportunities.html#table-statistics-missing-or-out-of-date">Statistiques de table manquantes ou obsolètes</a> pour connaître les solutions recommandées.</p>
               </li><li>
                  <p>Vérifiez si le champ <code class="code">is_diskbased</code> a une valeur de <code class="code">t</code> (true) pour n’importe quelle étape. Les hachages, les agrégats et les tris sont les opérateurs susceptibles d’écrire des données sur le disque si le système ne dispose pas de suffisamment de mémoire allouée pour le traitement des requêtes.</p>
                  <p>Si <code class="code">is_diskbased</code> a la valeur true, consultez <a href="./query-performance-improvement-opportunities.html#insufficient-memory-allocated-to-the-query">Mémoire insuffisante allouée à la requête</a> pour connaître les solutions recommandées.</p>
               </li><li>
                  <p>Vérifiez les valeurs du champ <code class="code">label</code> pour savoir s’il existe une séquence AGG-DIST-AGG dans les étapes. Sa présence indique une agrégation en deux étapes, ce qui est onéreux. Pour résoudre ce problème, modifiez la clause GROUP BY pour utiliser la clé de distribution (la première clé, s’il y en a plusieurs).</p>
               </li><li>
                  <p>Vérifiez la valeur de <code class="code">maxtime</code> de chaque segment (identique à toutes les étapes du segment). Identifiez le segment ayant la valeur de <code class="code">maxtime</code> la plus élevée et vérifiez les étapes de ce segment pour les opérateurs suivants.</p>
                  <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Une valeur de <code class="code">maxtime</code> élevée n’indique pas nécessairement de problème avec le segment. Malgré une valeur élevée, le temps de traitement du segment pourrait ne pas avoir été long. Tous les segments d’un flux sont chronométrés ensemble. Toutefois, certains segments en aval ne sont peut-être pas en mesure de s’exécuter tant qu’ils n’obtiennent pas de données de ceux situés en amont. Cela peut donner l’impression qu’ils ont pris beaucoup de temps, car leur valeur <code class="code">maxtime</code> inclura leur temps d’attente et leur temps de traitement. </p></div></div>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p><b>BCAST ou DIST</b> : dans ces cas, la valeur de <code class="code">maxtime</code> élevée peut être le résultat d’une redistribution d’un grand nombre de lignes. Pour connaître les solutions recommandées, consultez <a href="./query-performance-improvement-opportunities.html#suboptimal-data-distribution">Distribution des données sous-optimales</a>.</p>
                     </li><li class="listitem">
                        <p><b>HJOIN (jointure par hachage)</b> : si l’étape en question a une valeur très élevée dans le champ <code class="code">rows</code> par rapport à la valeur de <code class="code">rows</code> dans l’étape RETURN finale dans la requête, consultez <a href="./query-performance-improvement-opportunities.html#hash-join">Joindre par hachage</a> pour connaître les solutions recommandées.</p>
                     </li><li class="listitem">
                        <p><b>SCAN/SORT</b> : recherchez une séquence d’étapes SCAN, SORT, SCAN, MERGE juste avant une étape de jointure. Ce modèle indique que des données non triées sont analysées, triées, puis fusionnées avec la région triée de la table.</p>
                        <p>Vérifiez si la valeur des lignes de l’étape SCAN est très élevée par rapport à la valeur des lignes de l’étape RETURN finale dans la requête. Ce modèle indique que le moteur d’exécution analyse des lignes qui sont ignorées par la suite, ce qui est inefficace. Pour connaître les solutions recommandées, consultez <a href="./query-performance-improvement-opportunities.html#insufficiently-restrictive-predicate">Prédicat pas assez restrictif</a>. </p>
                        <p>Si la valeur <code class="code">maxtime</code> de l’étape SCAN est élevée, consultez <a href="./query-performance-improvement-opportunities.html#suboptimal-WHERE-clause">Clause WHERE sous-optimale</a> pour connaître les solutions recommandées.</p>
                        <p>Si la valeur <code class="code">rows</code> de l’étape SORT n’est pas égale à zéro, consultez <a href="./query-performance-improvement-opportunities.html#unsorted-or-mis-sorted-rows">Lignes non triées ou mal triées</a> pour connaître les solutions recommandées.</p>
                     </li></ul></div>
               </li><li>
                  <p>Vérifiez les valeurs <code class="code">rows</code> et <code class="code">bytes</code> des étapes 5 à 10 précédant l’étape RETURN finale pour savoir quelle est la quantité de données renvoyée au client. Ce processus peut être complexe.</p>
                  <p>Par exemple, dans la requête récapitulative suivante, vous pouvez voir que la troisième étape PROJECT fournit une valeur de <code class="code">rows</code>, mais pas une valeur de <code class="code">bytes</code>. Les étapes précédentes avec la même valeur de <code class="code">rows</code> vous permettront de trouver l’étape SCAN qui fournit des informations sur les lignes et les octets :</p>
                  <div class="mediaobject">
                      
                        <img src="images/rows_and_bytes.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                      
                  </div>
                  <p>Si vous renvoyez un volume inhabituellement élevé de données, consultez <a href="./query-performance-improvement-opportunities.html#very-large-result-set">Ensemble de résultats très volumineux</a> pour connaître les solutions recommandées.</p>
               </li><li>
                  <p>Vérifiez si la valeur de <code class="code">bytes</code> est élevée par rapport à la valeur de <code class="code">rows</code> pour n’importe quelle étape, par rapport aux autres étapes. Ce modèle peut indiquer que vous sélectionnez un grand nombre de colonnes. Pour connaître les solutions recommandées, consultez <a href="./query-performance-improvement-opportunities.html#large-SELECT-list">Longue liste SELECT</a>.</p>
               </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-analyzing-the-query-summary.html">Analyse du résumé de la requête</div><div id="next" class="next-link" accesskey="n" href="./using-SVL-Query-Report.html">Utilisation de la vue SVL_QUERY_REPORT</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/using-SVL-Query-Summary.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>