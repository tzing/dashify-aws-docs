<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>了解範本的基本知識 - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="gettingstarted.templatebasics" /><meta name="default_state" content="gettingstarted.templatebasics" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="description" content="了解使用範本資源、參數和其他元件的範本基本知識，以及運作方式。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="使用者指南" /><meta name="abstract" content="使 AWS CloudFormation 用本使用者指南可預測並重複地建立和管理 AWS 基礎架構部署。" /><meta name="guide-locale" content="zh_tw" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="使用者指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="使用者指南" /><meta id="panorama-serviceConsolePage" value="了解範本的基本知識" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>了解範本的基本知識 - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,資源佈建,資源組態,基礎設施管理,CloudFormer,CloudFormation 堆疊,CloudFormation 堆疊集,CloudFormation 範本,變更集合" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "使用者指南",
        "item" : "https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS CloudFormation 入門",
        "item" : "https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "了解範本的基本知識",
        "item" : "https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/GettingStarted.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文件</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">使用者指南</a></div><div id="page-toc-src"><a href="#gettingstarted.templatebasics.what">什麼是 AWS CloudFormation 範本？</a><a href="#gettingstarted.templatebasics.simple">資源：Hello Bucket!</a><a href="#gettingstarted.templatebasics.multiple">資源屬性和配合使用資源</a><a href="#gettingstarted.templatebasics.parameters">使用輸入參數接收使用者輸入</a><a href="#gettingstarted.templatebasics.mappings">使用映射指定條件值</a><a href="#gettingstarted.templatebasics.outputs">已建構的值和輸出值</a><a href="#gettingstarted.templatebasics.learnmore">後續步驟</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>本文為英文版的機器翻譯版本，如內容有任何歧義或不一致之處，概以英文版為準。</p></awsui-alert><h1 class="topictitle" id="gettingstarted.templatebasics">了解範本的基本知識</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="highlights" id="inline-topiclist"><h6>主題</h6><ul><li><a href="#gettingstarted.templatebasics.what">什麼是 AWS CloudFormation 範本？</a></li><li><a href="#gettingstarted.templatebasics.simple">資源：Hello Bucket!</a></li><li><a href="#gettingstarted.templatebasics.multiple">資源屬性和配合使用資源</a></li><li><a href="#gettingstarted.templatebasics.parameters">使用輸入參數接收使用者輸入</a></li><li><a href="#gettingstarted.templatebasics.mappings">使用映射指定條件值</a></li><li><a href="#gettingstarted.templatebasics.outputs">已建構的值和輸出值</a></li><li><a href="#gettingstarted.templatebasics.learnmore">後續步驟</a></li></ul></div><p>在<a href="./GettingStarted.Walkthrough.html">開始使用</a>中，您已了解如何使用範本建立堆疊。您看到在範本中宣告的資源，以及它們如何映射到堆疊中的資源。我們也觸及輸入參數，以及其如何在您從範本建立堆疊時讓您傳入特定值。在本節中，我們會更深入探討資源和參數。我們還將介紹模板的其他組件，以便您知道如何將這些組件一起使用以創建可生成所需 AWS 資源的模板。</p>
    <h2 id="gettingstarted.templatebasics.what">什麼是 AWS CloudFormation 範本？</h2>

    <p>模板是構成堆棧的 AWS 資源的聲明。範本會儲存為文字檔案，其格式符合 JavaScript 物件表示法 (JSON) 或 YAML 標準。由於其為文字檔案，您可以在任何文字編輯器中建立和編輯它們，並在來源控制系統中使用剩餘原始程式碼進行管理。如需範本格式的詳細資訊，請參閱<a href="./template-formats.html">AWS CloudFormation 範本格式</a>。</p>
    <p>在範本中，您要宣告要建立和設定的 AWS 資源。您將物件宣告為名稱/值對，或括以子物件的一對名稱。語法取決於您使用的格式。如需詳細資訊，請參閱<a href="./template-anatomy.html">範本剖析</a>。唯一需要的最上層物件是資源物件，其至少必須宣告一項資源。讓我們從只包含一個資源物件的最基本範本開始，它包含單一資源宣告。</p>
   
    <h2 id="gettingstarted.templatebasics.simple">資源：Hello Bucket!</h2>
    <p>資源物件包含資源物件清單。資源宣告包含資源的屬性，其自行宣告為子物件。資源必須具有<code class="code">Type</code>屬性，該屬性定義了您要創建的 AWS 資源類型。<code class="code">Type</code> 屬性有特殊的格式：</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">AWS::<code class="replaceable">ProductIdentifier</code>::<code class="replaceable">ResourceType</code></code></pre>
    <p>例如，Amazon S3 儲存貯體的資源類型為<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::Bucket</a>。如需資源類型的完整清單，請參閱<a href="./template-reference.html">範本參考</a>。</p>
    <p>我們來看看基本範本。下列範本宣告<code class="code">AWS::S3::Bucket:</code>具有名稱 HelloBucket之類型的單一資源。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.simple.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket"&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.simple.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
</code></pre>
    </div>
    <p>如果您使用此範本建立堆疊， AWS CloudFormation 將會建立 Amazon S3 儲存貯體。建立值區非常簡單，因為 CloudFormation 可以使用預設設定建立值區。對於其他資源 (例如 Amazon EC2 Auto Scaling 群組或 EC2 執行個體)  CloudFormation  需要更多資訊。資源宣告使用 <code class="code">Properties</code> 屬性指定建立資源所用的資訊。</p>
    <p>根據資源類型而定，某些屬性是必需的，例如<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>資源的 ImageId 屬性，其他屬性是可選的。某些屬性具有預設值 (例如<code class="code">AWS::S3::Bucket</code>資源的 AccessControl 屬性)，因此指定這些屬性的值是選擇性的。有些屬性不是必要的，但可以新增您想要的功能，例如 <code class="code">AWS::S3::Bucket</code> 資源的 <code class="code">WebsiteConfiguration</code> 屬性。指定這類屬性的值完全是選擇性的，視您的需求而定。在上述範例中，因為 <code class="code">AWS::S3::Bucket</code> 資源只有選用的屬性，且我們不需要任何選用功能，所以我們可以接受預設值並忽略 Properties (屬性) 屬性。</p>
    <p>若要檢視每個資源類型的屬性，請參閱 <a href="./aws-template-resource-type-ref.html">AWS 資源和屬性類型參考</a>中的主題。</p>
   
    <h2 id="gettingstarted.templatebasics.multiple">資源屬性和配合使用資源</h2>

    <p>資源的屬性通常只是一個字串值。例如，下列範本會為值區的 AccessControl 屬性指定固定 ACL (PublicRead)。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket",&#xD;
            "Properties": <span>{</span>&#xD;
                "AccessControl": "PublicRead"&#xD;
            }&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
    Properties:&#xD;
      AccessControl: PublicRead&#xD;
</code></pre>
    </div>
    <p>有些資源可有多個屬性，有些屬性可有一或多個子屬性。例如，資<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html">AWS::S3::Bucket</a>源具有兩個屬性： AccessControl 和 WebsiteConfiguration。該屬 WebsiteConfiguration 性有兩個子屬性： IndexDocument和 ErrorDocument。以下範本顯示我們有其他屬性的原始儲存貯體資源。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json2">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>&#xD;
    "Resources": <span>{</span>&#xD;
        "HelloBucket": <span>{</span>&#xD;
            "Type": "AWS::S3::Bucket",&#xD;
            "Properties": <span>{</span>&#xD;
                "AccessControl": "PublicRead",&#xD;
                "WebsiteConfiguration": <span>{</span>&#xD;
                    "IndexDocument": "index.html",&#xD;
                    "ErrorDocument": "error.html"&#xD;
                }&#xD;
            }&#xD;
        }&#xD;
    }&#xD;
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml2">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:&#xD;
  HelloBucket:&#xD;
    Type: 'AWS::S3::Bucket'&#xD;
    Properties:&#xD;
      AccessControl: PublicRead&#xD;
      WebsiteConfiguration:&#xD;
        IndexDocument: index.html&#xD;
        ErrorDocument: error.html&#xD;
</code></pre>
    </div>
    <p>範本最大的優點之一， CloudFormation 就是能夠建立一組共同運作以建立應用程式或解決方案的資源。範本內用於資源的名稱是邏輯名稱。 CloudFormation 建立資源時，它會根據邏輯名稱、堆疊名稱和唯一 ID 的組合產生實體名稱。</p>

    <p>您可能想知道如何在以另一個資源名稱或屬性為基礎的資源上設定屬性。<span>例如，您可以建<span>立由 S3 儲存貯體或使用 EC2 安全群組的 EC2 執行個體支援的 CloudFront 分</span>發，而且所有這些資源都可以在相同的範本中建立。</span>  CloudFormation 具有許多內在函數，您可以使用它們來引用其他資源及其屬性。您可以使用 <a href="./intrinsic-function-reference-ref.html">Ref 函數</a>參考資源的識別屬性。這通常是資源的實體名稱，不過，有時候也可以是識別碼，例如 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-eip.html">AWS::EC2::EIP</a> 資源的 IP 地址或 Amazon SNS 主題的 Amazon Resource Name (ARN)。如需 Ref 函數傳回的值清單，請參閱 <a href="./intrinsic-function-reference-ref.html">Ref 函數</a>。下列範本包含<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>資源。資源的 SecurityGroups 屬性會呼叫 Ref 函數來參考資<code class="code">AWS::EC2::SecurityGroup</code>源 InstanceSecurityGroup。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json3">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "Ec2Instance": <span>{</span>
            "Type": "AWS::EC2::Instance",
            "Properties": <span>{</span>
                "SecurityGroups": [
                    <span>{</span>
                        "Ref": "InstanceSecurityGroup"
                    }
                ],
                "KeyName": "mykey",
                "ImageId": ""
            }
        },
        "InstanceSecurityGroup": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "GroupDescription": "Enable SSH access via port 22",
                "SecurityGroupIngress": [
                    <span>{</span>
                        "IpProtocol": "tcp",
                        "FromPort": 22,
                        "ToPort": 22,
                        "CidrIp": "0.0.0.0/0"
                    }
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml3">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
      KeyName: mykey
      ImageId: ''
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>該 SecurityGroups 屬性是安全組的列表，在前面的例子中，我們在列表中只有一個項目。下列範本在 SecurityGroups 屬性清單中具有其他項目。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json4">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Resources": <span>{</span>
        "Ec2Instance": <span>{</span>
            "Type": "AWS::EC2::Instance",
            "Properties": <span>{</span>
                "SecurityGroups": [
                    <span>{</span>
                        "Ref": "InstanceSecurityGroup"
                    },
                    "MyExistingSecurityGroup"
                ],
                "KeyName": "mykey",
                "ImageId": "ami-7a11e213"
            }
        },
        "InstanceSecurityGroup": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "GroupDescription": "Enable SSH access via port 22",
                "SecurityGroupIngress": [
                    <span>{</span>
                        "IpProtocol": "tcp",
                        "FromPort": 22,
                        "ToPort": 22,
                        "CidrIp": "0.0.0.0/0"
                    }
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml4">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
        - MyExistingSecurityGroup
      KeyName: mykey
      ImageId: ami-7a11e213
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>MyExistingSecurityGroup 是指現有 EC2 安全群組的字串，而不是範本中宣告的安全群組。您要使用文字字串參考現有的 AWS
資源。</p>
    <p>在上面的範例中，的 KeyName 屬性<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>是常值字串 mykey。這表示名稱為 mykey 的金鑰對必須存在於建立堆疊的區域中，否則堆疊建立會因為金鑰對不存在而失敗。您使用的 key pair 可能會隨您建立堆疊的地區而有所不同，或者您可能想要與其他人共用範本，以便他們可以在其 AWS 帳戶中使用該範本。若是如此，您可以使用輸入參數，以便在建立堆疊時指定金鑰對名稱。Ref 函數可以參考在堆疊建立時指定的輸入參數。下列範本會新增包含參數的 Par  KeyName  ameters 物件，該參數可用來指定<code class="code">AWS::EC2::Instance</code>資源的 KeyName 屬性。參數類型是 <code class="code">AWS::EC2::KeyPair::KeyName</code>，可確保使用者在其帳戶及建立堆疊的區域中指定有效的金鑰對名稱。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json5">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description": "The EC2 Key Pair to allow SSH access to the instance",
      "Type": "AWS::EC2::KeyPair::KeyName"
    }
  },
  "Resources": <span>{</span>
    "Ec2Instance": <span>{</span>
      "Type": "AWS::EC2::Instance",
      "Properties": <span>{</span>
        "SecurityGroups": [
          <span>{</span>
            "Ref": "InstanceSecurityGroup"
          },
          "MyExistingSecurityGroup"
        ],
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "ImageId": "ami-7a11e213"
      }
    },
    "InstanceSecurityGroup": <span>{</span>
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": <span>{</span>
        "GroupDescription": "Enable SSH access via port 22",
        "SecurityGroupIngress": [
          <span>{</span>
            "IpProtocol": "tcp",
            "FromPort": 22,
            "ToPort": 22,
            "CidrIp": "0.0.0.0/0"
          }
        ]
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml5">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: The EC2 Key Pair to allow SSH access to the instance
    Type: 'AWS::EC2::KeyPair::KeyName'
Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      SecurityGroups:
        - !Ref InstanceSecurityGroup
        - MyExistingSecurityGroup
      KeyName: !Ref KeyName
      ImageId: ami-7a11e213
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: Enable SSH access via port 22
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0</code></pre>
    </div>
    <p>如果資源傳回的參數或值確實是您要的，Ref 函數會很方便，但您可能需要資源的其他屬性。例如，如果您想要使用 S3 來源建立 CloudFront 分發，則需要使用 DNS 樣式的位址來指定儲存貯體位置。多項有其他屬性的資源，其值可用於範本中。若要取得這些屬性，請使用 <a href="./intrinsic-function-reference-getatt.html">Fn:: GetAtt</a> 函式。下列範本會建立 CloudFront 散發資源，該資源使用Fn::GetAtt 函數取得儲存貯體 DomainName 屬性來指定 S3 儲存貯體資源的 DNS 名稱。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.json6">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Resources": <span>{</span>
    "myBucket": <span>{</span>
      "Type": "AWS::S3::Bucket"
    },
    "myDistribution": <span>{</span>
      "Type": "AWS::CloudFront::Distribution",
      "Properties": <span>{</span>
        "DistributionConfig": <span>{</span>
          "Origins": [
            <span>{</span>
              "DomainName": <span>{</span>
                "Fn::GetAtt": [
                  "myBucket",
                  "DomainName"
                ]
              },
              "Id": "myS3Origin",
              "S3OriginConfig": <span>{</span>}
            }
          ],
          "Enabled": "true",
          "DefaultCacheBehavior": <span>{</span>
            "TargetOriginId": "myS3Origin",
            "ForwardedValues": <span>{</span>
              "QueryString": "false"
            },
            "ViewerProtocolPolicy": "allow-all"
          }
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.multiple.yaml6">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  myBucket:
    Type: 'AWS::S3::Bucket'
  myDistribution:
    Type: 'AWS::CloudFront::Distribution'
    Properties:
      DistributionConfig:
        Origins:
          - DomainName: !GetAtt 
              - myBucket
              - DomainName
            Id: myS3Origin
            S3OriginConfig: <span>{</span>}
        Enabled: 'true'
        DefaultCacheBehavior:
          TargetOriginId: myS3Origin
          ForwardedValues:
            QueryString: 'false'
          ViewerProtocolPolicy: allow-all</code></pre>
    </div>
    <p>該Fn::GetAtt 函數有兩個參數，資源的邏輯名稱和要檢索的屬性的名稱。如需資源可用屬性的完整清單，請參閱 <a href="./intrinsic-function-reference-getatt.html">Fn:: GetAtt</a>。您會注意到該Fn::GetAtt 函數在數組中列出了它的兩個參數。對於需要多個參數的函數，您使用陣列指定它們的參數。</p>
   
    <h2 id="gettingstarted.templatebasics.parameters">使用輸入參數接收使用者輸入</h2>

    <p>到目前為止，您已了解資源以及如何在範本中運用的一些內容。您已了解如何參考輸入參數，但對於如何定義輸入參數本身，我們尚未深入了解。讓我們來看看參數宣告以及如何限制與驗證使用者輸入。</p>
    <p>您會在範本的 Parameters 物件中宣告參數。參數包含定義其值的屬性清單以及針對其值的限制條件。唯一必要的屬性是「類型」，它可以是「字串」、「數字」或 AWS特定類型。您也可以新增 Description 屬性，告知使用者更多應該指定哪種值的資訊。使用者使用 Create Stack (建立堆疊) 精靈中的範本時，Specify Parameters (指定參數) 頁面上會出現參數的名稱和描述。</p>
    <p>下列範本片段是 Parameters 物件，宣告上述 Specify Parameters (指定參數) 頁面中使用的參數。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.parameters.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description" : "Name of an existing EC2 KeyPair to enable SSH access into the WordPress web server",
      "Type": "AWS::EC2::KeyPair::KeyName"
    },
    "WordPressUser": <span>{</span>
      "Default": "admin",
      "NoEcho": "true",
      "Description" : "The WordPress database admin account user name",
      "Type": "String",
      "MinLength": "1",
      "MaxLength": "16",
      "AllowedPattern" : "[a-zA-Z][a-zA-Z0-9]*"
    },
    "WebServerPort": <span>{</span>
      "Default": "8888",
      "Description" : "TCP/IP port for the WordPress web server",
      "Type": "Number",
      "MinValue": "1",
      "MaxValue": "65535"
    }
  }</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.parameters.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: Name of an existing EC2 KeyPair to enable SSH access into the WordPress web server
    Type: AWS::EC2::KeyPair::KeyName
  WordPressUser:
    Default: admin
    NoEcho: true
    Description: The WordPress database admin account user name
    Type: String
    MinLength: 1
    MaxLength: 16
    AllowedPattern: "[a-zA-Z][a-zA-Z0-9]*"
  WebServerPort:
    Default: 8888
    Description: TCP/IP port for the WordPress web server
    Type: Number
    MinValue: 1
    MaxValue: 65535</code></pre>
    </div>
    <p>對於具有預設值的參數，除非 CloudFormation 使用者指定其他值，否則會使用預設值。如果您略過預設的屬性，則使用者必須為該參數指定一個值；不過，要求使用者輸入值不確保該值有效。若要驗證參數的值，您可以宣告條件約束或指定 AWS特定參數類型。</p>
    <p>您要通知 <code class="code">KeyName</code> 參數沒有 <code class="code">Default</code> 屬性，但其他參數有。例如，<code class="code">WordPressUser</code> 參數有屬性 <code class="code">Default: admin</code>，但 <code class="code">KeyName</code> 參數什麼都沒有。使用者必須在堆疊建立時指定金鑰名稱值。如果他們不這樣做，則 CloudFormation 無法創建堆棧並拋出異常：<code class="code">Parameters: [KeyName] must have
        values</code>。</p>
    <p>對於 AWS特定的參數類型，在創建任何堆棧資源<em>之前</em>，根據用 AWS 戶帳戶中的現有值和他們創建堆棧的區域中的現有值 CloudFormation 驗證輸入值。在範例樣板中，<code class="code">KeyName</code>參數是的 AWS特定參數類型<code class="code">AWS::EC2::KeyPair::KeyName</code>。  CloudFormation 在建立堆疊之前，檢查使用者是否指定了有效的 EC2 key pair 名稱。 AWS特定參數類型的另一個範例是<code class="code">AWS::EC2::VPC::Id</code>，要求使用者指定有效的 VPC ID。除了前期驗證之外，當使用者使用「建立堆疊」精靈時， AWS 主控台還會顯示 AWS特定參數類型的有效值的下拉式清單，例如有效的 EC2 key pair 名稱或 VPC ID。</p>
    <p><code class="code">String</code> 類型可以使用下列屬性宣告限制條件：<code class="code">MinLength</code>、<code class="code">MaxLength</code>、<code class="code">Default</code>、<code class="code">AllowedValues</code> 和 <code class="code">AllowedPattern</code>。在上述範例中，<code class="code">WordPressUser</code> 參數有三項限制條件：參數值長度必須介於 1 到 16 個字元之間 (<code class="code">MinLength</code>、<code class="code">MaxLength</code>)，而且必須以字母開頭，後面加上任意組合的字母和數字 (<code class="code">AllowedPattern</code>)。</p>
    <p><code class="code">Number</code> 類型可以宣告下列限制條件：<code class="code">MinValue</code>、<code class="code">MaxValue</code>、<code class="code">Default</code> 和 <code class="code">AllowedValues</code>。數值可以是整數或浮點值。在上述範例中，<code class="code">WebServerPort</code> 參數必須是介於 1 和 65535 (含) 之間的數值 (<code class="code">MinValue</code>、<code class="code">MaxValue</code>)。</p>
    <p>本章節前文中曾提及，參數是指定您需要使用但不想內嵌在範本本身中之敏感或實作專屬資料 (例如密碼或使用者名稱) 的最好方法。如果將<code class="code">NoEcho</code>屬性設定為<code class="code">true</code>，則會針對描述堆疊或堆疊事件的任何呼叫 CloudFormation 傳回遮罩為星號 (*****) 的參數值，但儲存在以下指定位置的資訊除外。在上述範例中，檢視堆疊設定的任何人都看不到 <code class="code">WordPressUser</code> 參數值，參數值會傳回為星號。</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>使用 <code class="code">NoEcho</code> 屬性不會遮罩任何儲存在下列資訊中的資訊：</p><div class="itemizedlist">
           
           
           
         <ul class="itemizedlist"><li class="listitem">
           <p>模<code class="code">Metadata</code>板部分。  CloudFormation 不會轉換、修改或密文<code class="code">Metadata</code>章節中包含的任何資訊。如需詳細資訊，請參閱 <a href="./metadata-section-structure.html">中繼資料</a>。</p>
          </li><li class="listitem">
           <p><code class="code">Outputs</code> 範本區段。如需詳細資訊，請參閱 <a href="./outputs-section-structure.html">輸出</a>。</p>
          </li><li class="listitem">
           <p>資源定義的 <code class="code">Metadata</code> 屬性。如需詳細資訊，請參閱 <a href="./aws-attribute-metadata.html">Metadata 屬性</a>。</p>
          </li></ul></div><p>我們強烈建議您不要使用這些機制來包含敏感資訊，例如密碼或秘密。</p></div></div>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>建議您使用堆疊 CloudFormation 範本中的動態參數來參照儲存和管理之外的敏感資訊 (例如，在 Parame AWS Systems Manager ter Store 或) 中，而不是直接將機密資訊嵌入範本中 CloudFormation，而是建議您在堆疊範本中使用動態參數 AWS Secrets Manager。</p><p>如需詳細資訊，請參閱最<a href="./security-best-practices.html#creds">請勿在您的範本中內嵌憑證</a>佳做法。</p></div></div>
   
    <h2 id="gettingstarted.templatebasics.mappings">使用映射指定條件值</h2>

    <p>參數是讓使用者指定唯一或敏感的值以供堆疊資源屬性使用的絕佳方式，不過，有些設定與區域相依，或對使用者而言因為其他條件或相依性而略微複雜難解。在這些情況下，您可能要在範本本身中放入一些邏輯，讓使用者可以指定簡單的值 (或完全不指定)，以取得他們希望的結果。在先前的範例中，我們針對 EC2 執行個體的 ImageId 屬性硬式編碼 AMI ID。<span>這在美國東部區域運作正常，該區域代表我們需要的 AMI。不過，如果使用者嘗試在不同的區域中建置堆疊，他們就會收到錯誤的 AMI 或完全沒有 AMI。(AMI ID 對區域而言是唯一的，所以不同區域中之相同 AMI ID 可能不代表任何 AMI 或為截然不同的 AMI。)</span> </p>
    <p>為避免此問題，您需要一個方法，根據條件輸入指定正確的 AMI ID (在本範例中為建立堆疊的區域)。有兩種範本功能可協助您：Mappings 物件和 <code class="code">AWS::Region</code> 虛擬參數。</p>
    <p><code class="code">AWS::Region</code>偽參數是 CloudFormation 解析為堆疊建立所在區域的值。當您建立堆疊 CloudFormation 時，會解析虛擬參數。映射可讓您使用輸入值作為決定另一個值的條件。類似參數陳述式，映射會建立一組值與另一組值的關聯。配合映射使用 <code class="code">AWS::Region</code> 參數，可確保指定適當的區域 AMI ID。<span>下列範本包含具有名為的對應對應物件， RegionMap 該對應可用來將 AMI ID 對應至適當的區域。</span></p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.mappings.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Parameters": <span>{</span>
    "KeyName": <span>{</span>
      "Description": "Name of an existing EC2 KeyPair to enable SSH access to the instance",
      "Type": "String"
    }
  },
  "Mappings": <span>{</span>
    "RegionMap": <span>{</span>
      "us-east-1": <span>{</span>
        "AMI": "ami-76f0061f"
      },
      "us-west-1": <span>{</span>
        "AMI": "ami-655a0a20"
      },
      "eu-west-1": <span>{</span>
        "AMI": "ami-7fd4e10b"
      },
      "ap-southeast-1": <span>{</span>
        "AMI": "ami-72621c20"
      },
      "ap-northeast-1": <span>{</span>
        "AMI": "ami-8e08a38f"
      }
    }
  },
  "Resources": <span>{</span>
    "Ec2Instance": <span>{</span>
      "Type": "AWS::EC2::Instance",
      "Properties": <span>{</span>
        "KeyName": <span>{</span>
          "Ref": "KeyName"
        },
        "ImageId": <span>{</span>
          "Fn::FindInMap": [
            "RegionMap",
            <span>{</span>
              "Ref": "AWS::Region"
            },
            "AMI"
          ]
        },
        "UserData": <span>{</span>
          "Fn::Base64": "80"
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.mappings.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  KeyName:
    Description: Name of an existing EC2 KeyPair to enable SSH access to the instance
    Type: String
Mappings:
  RegionMap:
    us-east-1:
      AMI: ami-76f0061f
    us-west-1:
      AMI: ami-655a0a20
    eu-west-1:
      AMI: ami-7fd4e10b
    ap-southeast-1:
      AMI: ami-72621c20
    ap-northeast-1:
      AMI: ami-8e08a38f
Resources:
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      KeyName: !Ref KeyName
      ImageId: !FindInMap 
        - RegionMap
        - !Ref 'AWS::Region'
        - AMI
      UserData: !Base64 '80'</code></pre>
    </div>
    <p>在中 RegionMap，每個區域都對應至名稱-值配對。名稱/值對是一個標籤，也是要映射的值。在中 RegionMap，AMI 是標籤，而 AMI 識別碼是值。要使用 map 返回值，請使用 <a href="./intrinsic-function-reference-findinmap.html">Fn:: FindInMap</a> 函數，傳遞映射的名稱，用於查找映射值的值以及要返回的映射值的標籤。 <span>在上述範例中，資源 Ec2Instance 的 ImageId 屬性會使用 Fn:: FindInMap  函數來判斷其值，方法是指定 RegionMap 為要使用的對應， AWS::Region 做為要對應的輸入值，而 AMI 做為標籤來識別要對映的值。例如，如果在美國西部 (加利佛尼亞北部) 區域中使用此範本建立堆疊，則 <code class="code">ImageId</code> 將設定為 <code class="code">ami-655a0a20</code>。</span></p>
    <div class="awsdocs-note awsdocs-tip"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>提示</h6></div><div class="awsdocs-note-text"><p><code class="code">AWS::Region</code> 虛擬參數可讓您取得建立堆疊的區域。某些資源 (例如<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::InstanceAWS::AutoScaling::AutoScaling</a><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-group.html">群組</a>和 <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-elb.html">AWS::ElasticLoadBalancing::LoadBalancer</a>) 具有指定可用區域的內容。您可以使用 <a href="./intrinsic-function-reference-getavailabilityzones.html">Fn::GetAZs 函數</a>取得某個區域的所有可用區域清單。</p></div></div>
   
    <h2 id="gettingstarted.templatebasics.outputs">已建構的值和輸出值</h2>

    <p>參數和映射都是在堆疊建立時傳遞或判斷特定值的絕佳方式，但有時候，來自參數或其他資源屬性的值只是您所需值的一部分。例如，在範 WordPress 本的下列片段中，Fn:: Join 函數會將<code class="code">WebServerPort</code>參數與其他常值字串串連，以建構<code class="code">ElasticLoadBalancer</code>資源<code class="code">HealthCheck</code>屬性的<code class="code">Target</code>子屬性，以形成所需的值。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Resources": <span>{</span>
    "ElasticLoadBalancer": <span>{</span>
      "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
      "Properties": <span>{</span>
        "AvailabilityZones": <span>{</span>
          "Fn::GetAZs": ""
        },
        "Instances": [
          <span>{</span>
            "Ref": "Ec2Instance1"
          },
          <span>{</span>
            "Ref": "Ec2Instance2"
          }
        ],
        "Listeners": [
          <span>{</span>
            "LoadBalancerPort": "80",
            "InstancePort": <span>{</span>
              "Ref": "WebServerPort"
            },
            "Protocol": "HTTP"
          }
        ],
        "HealthCheck": <span>{</span>
          "Target": <span>{</span>
            "Fn::Join": [
              "",
              [
                "HTTP:",
                <span>{</span>
                  "Ref": "WebServerPort"
                },
                "/"
              ]
            ]
          },
          "HealthyThreshold": "3",
          "UnhealthyThreshold": "5",
          "Interval": "30",
          "Timeout": "5"
        }
      }
    }
  }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.yaml">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  ElasticLoadBalancer:
    Type: 'AWS::ElasticLoadBalancing::LoadBalancer'
    Properties:
      AvailabilityZones: !GetAZs ''
      Instances:
        - !Ref Ec2Instance1
        - !Ref Ec2Instance2
      Listeners:
        - LoadBalancerPort: '80'
          InstancePort: !Ref WebServerPort
          Protocol: HTTP
      HealthCheck:
        Target: !Join 
          - ''
          - - 'HTTP:'
            - !Ref WebServerPort
            - /
        HealthyThreshold: '3'
        UnhealthyThreshold: '5'
        Interval: '30'
        Timeout: '5'</code></pre>
    </div>
    <p>Fn::Join 函數需要兩個參數，一個分隔您要串連之值的分隔符號，以及一個依您想要之顯示順序排列的值陣列。在上面的例子中，Fn:: Join 函數指定一個空字符串作為分隔符號和 HTTP:， WebServerPort 參數的值，並指定一個/字符作為要連接的值。如 WebServerPort 果值為 8888，則 Target 屬性會設定為下列值：</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">HTTP:8888/</code></pre>
    <p>Fn::Join 函數也適用於宣告堆疊的輸出值。範本中的 Outputs 物件包含您想要在建立堆疊後使用之值的宣告。輸出是擷取資源或輸入參數重要資訊的便捷方式。例如，在 WordPress 模板中，我們聲明以下輸出對象。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.json2">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Outputs": <span>{</span>
        "InstallURL": <span>{</span>
            "Value": <span>{</span>
                "Fn::Join": [
                    "",
                    [
                        "http://",
                        <span>{</span>
                            "Fn::GetAtt": [
                                "ElasticLoadBalancer",
                                "DNSName"
                            ]
                        },
                        "/wp-admin/install.php"
                    ]
                ]
            },
            "Description": "Installation URL of the WordPress website"
        },
        "WebsiteURL": <span>{</span>
            "Value": <span>{</span>
                "Fn::Join": [
                    "",
                    [
                        "http://",
                        <span>{</span>
                            "Fn::GetAtt": [
                                "ElasticLoadBalancer",
                                "DNSName"
                            ]
                        }
                    ]
                ]
            }
        }
    }
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="gettingstarted.templatebasics.outputs.yaml2">YAML</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Outputs:
  InstallURL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - ElasticLoadBalancer
          - DNSName
        - /wp-admin/install.php
    Description: Installation URL of the WordPress website
  WebsiteURL:
    Value: !Join 
      - ''
      - - 'http://'
        - !GetAtt 
          - ElasticLoadBalancer
          - DNSName</code></pre>
    </div>
    <p>每個輸出值都有名稱、包含傳回為輸出值之值宣告的 Value 屬性，以及選擇性的值描述。在前面的例子中，InstallURL 是 Fn:: 連接函數調用返回的字符串，該調用將 http://，資源的 DNS 名稱和 /wp-admin/安裝.php。 ElasticLoadBalancer輸出值可能類似以下內容：</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">http://mywptests-elasticl-1gb51l6sl8y5v-206169572.<span>us-east-2</span>.elb.amazonaws.com/wp-admin/install.php</code></pre>
    <p>在入門教程中，我們使用此鏈接方便地轉到我們創建的 WordPress 博客的安裝頁面。  CloudFormation 在完成建立堆疊後產生輸出值。您可以在  CloudFormation 主控台的 Outputs (輸出) 標籤中檢視輸出值，或使用 <code class="code">aws cloudformation describe-stacks</code> 命令檢視輸出值。</p>
   
    <h2 id="gettingstarted.templatebasics.learnmore">後續步驟</h2>

    <p>我們只演練了範本及其使用方式的基本部分。您已了解範本下列內容：</p>
    <div class="itemizedlist">
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>宣告資源及其屬性。</p>
      </li><li class="listitem">
        <p>使用該函數引用其他資源與 Ref 函Fn::GetAtt 數和資源屬性。</p>
      </li><li class="listitem">
        <p>使用參數讓使用者能夠在建立堆疊時指定值，並使用限制條件驗證參數輸入。</p>
      </li><li class="listitem">
        <p>使用映射判斷條件值。</p>
      </li><li class="listitem">
        <p>使用 Fn::Join 函數根據參數、資源屬性和其他字串來建構值。</p>
      </li><li class="listitem">
        <p>使用輸出值來擷取堆疊資源的相關資訊。</p>
      </li></ul></div>
    <p>我們沒有涵蓋模板中的兩個頂層對象： AWSTemplateFormatVersion 和「描述」。  AWSTemplateFormatVersion 只是模板格式的版本-如果你沒有指定它， CloudFormation 將使用最新版本。</p>
    <p>Description 是任何有效的 JSON 或 YAML 字串。此描述會顯示在 Create Stack (建立堆疊) 精靈的 Specify Parameters (指定參數) 頁面。如需詳細資訊，請參閱 <a href="./format-version-structure.html">格式版本</a> 及 <a href="./template-description-structure.html">描述</a>。</p>

    <p>當然，還有更多進階範本和堆疊功能。以下是幾個您會想要進一步了解的重要項目清單：</p>
    <p>可搭配任何資源使用的「選用屬性」<em></em>：</p>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><a href="./aws-attribute-dependson.html">DependsOn 屬性</a>使您可以指定一個資源必須在另一個之後創建。</p>
      </li><li class="listitem">
        <p><a href="./aws-attribute-deletionpolicy.html">DeletionPolicy 屬性</a>使您可以指定 CloudFormation 應該如何處理資源的刪除。</p>
      </li><li class="listitem">
        <p><a href="./aws-attribute-metadata.html">Metadata</a> 屬性可讓您指定附資源的結構化資料。</p>
      </li></ul></div>
    <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-stack.html"><em>AWS::CloudFormation::Stack</em></a>可讓您將另一個堆疊嵌套為範本中的資源。</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>您的瀏覽器已停用或無法使用 Javascript。</strong></p><p>您必須啟用 Javascript，才能使用 AWS 文件。請參閱您的瀏覽器說明頁以取得說明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文件慣用形式</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./GettingStarted.Walkthrough.html">開始使用</div><div id="next" class="next-link" accesskey="n" href="./updating.stacks.walkthrough.html">演練：更新堆疊</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此頁面是否有幫助？ - 是</div><div class="content"><p>感謝您，讓我們知道我們做得很好！</p><p>若您有空，歡迎您告知我們值得讚許的地方，這樣才能保持良好服務。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此頁面是否有幫助？ - 否</div><div class="content"><p>感謝讓我們知道此頁面仍須改善。很抱歉，讓您失望。</p><p>若您有空，歡迎您提供改善文件的方式。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>