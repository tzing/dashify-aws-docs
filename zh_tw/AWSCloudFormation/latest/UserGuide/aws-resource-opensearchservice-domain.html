<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::OpenSearchService::Domain - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-opensearchservice-domain" /><meta name="default_state" content="aws-resource-opensearchservice-domain" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" /><meta name="description" content="The AWS::OpenSearchService::Domain resource creates an Amazon OpenSearch Service domain." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_OpenSearchService.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" hreflang="x-default" /><meta name="feedback-item" content="OpenSearch" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::OpenSearchService::Domain" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::OpenSearchService::Domain - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=OpenSearch&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon OpenSearch Service resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_OpenSearchService.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::OpenSearchService::Domain",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_OpenSearchService.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_OpenSearchService.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-opensearchservice-domain-syntax">Syntax</a><a href="#aws-resource-opensearchservice-domain-properties">Properties</a><a href="#aws-resource-opensearchservice-domain-return-values">Return values</a><a href="#aws-resource-opensearchservice-domain--remarks">Remarks</a><a href="#aws-resource-opensearchservice-domain--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-opensearchservice-domain">AWS::OpenSearchService::Domain</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The AWS::OpenSearchService::Domain resource creates an Amazon OpenSearch Service
      domain.</p><h2 id="aws-resource-opensearchservice-domain-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-opensearchservice-domain-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::OpenSearchService::Domain",
  "Properties" : <span>{</span>
      "<a href="#cfn-opensearchservice-domain-accesspolicies">AccessPolicies</a>" : <code class="replaceable">Json</code>,
      "<a href="#cfn-opensearchservice-domain-advancedoptions">AdvancedOptions</a>" : <code class="replaceable"><span>{</span><code class="replaceable">Key</code>: <code class="replaceable">Value</code>, ...}</code>,
      "<a href="#cfn-opensearchservice-domain-advancedsecurityoptions">AdvancedSecurityOptions</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-advancedsecurityoptionsinput.html">AdvancedSecurityOptionsInput</a></code>,
      "<a href="#cfn-opensearchservice-domain-clusterconfig">ClusterConfig</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-clusterconfig.html">ClusterConfig</a></code>,
      "<a href="#cfn-opensearchservice-domain-cognitooptions">CognitoOptions</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-cognitooptions.html">CognitoOptions</a></code>,
      "<a href="#cfn-opensearchservice-domain-domainendpointoptions">DomainEndpointOptions</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-domainendpointoptions.html">DomainEndpointOptions</a></code>,
      "<a href="#cfn-opensearchservice-domain-domainname">DomainName</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-opensearchservice-domain-ebsoptions">EBSOptions</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-ebsoptions.html">EBSOptions</a></code>,
      "<a href="#cfn-opensearchservice-domain-encryptionatrestoptions">EncryptionAtRestOptions</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-encryptionatrestoptions.html">EncryptionAtRestOptions</a></code>,
      "<a href="#cfn-opensearchservice-domain-engineversion">EngineVersion</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-opensearchservice-domain-ipaddresstype">IPAddressType</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-opensearchservice-domain-logpublishingoptions">LogPublishingOptions</a>" : <code class="replaceable"><span>{</span><code class="replaceable">Key</code>: <code class="replaceable">Value</code>, ...}</code>,
      "<a href="#cfn-opensearchservice-domain-nodetonodeencryptionoptions">NodeToNodeEncryptionOptions</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-nodetonodeencryptionoptions.html">NodeToNodeEncryptionOptions</a></code>,
      "<a href="#cfn-opensearchservice-domain-offpeakwindowoptions">OffPeakWindowOptions</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-offpeakwindowoptions.html">OffPeakWindowOptions</a></code>,
      "<a href="#cfn-opensearchservice-domain-snapshotoptions">SnapshotOptions</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-snapshotoptions.html">SnapshotOptions</a></code>,
      "<a href="#cfn-opensearchservice-domain-softwareupdateoptions">SoftwareUpdateOptions</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-softwareupdateoptions.html">SoftwareUpdateOptions</a></code>,
      "<a href="#cfn-opensearchservice-domain-tags">Tags</a>" : <code class="replaceable">[ <a href="./aws-properties-opensearchservice-domain-tag.html">Tag</a>, ... ]</code>,
      "<a href="#cfn-opensearchservice-domain-vpcoptions">VPCOptions</a>" : <code class="replaceable"><a href="./aws-properties-opensearchservice-domain-vpcoptions.html">VPCOptions</a></code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-opensearchservice-domain-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::OpenSearchService::Domain
Properties:
  <a href="#cfn-opensearchservice-domain-accesspolicies">AccessPolicies</a>: <code class="replaceable">Json</code>
  <a href="#cfn-opensearchservice-domain-advancedoptions">AdvancedOptions</a>: <code class="replaceable">
    <code class="replaceable">Key</code>: <code class="replaceable">Value</code></code>
  <a href="#cfn-opensearchservice-domain-advancedsecurityoptions">AdvancedSecurityOptions</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-advancedsecurityoptionsinput.html">AdvancedSecurityOptionsInput</a></code>
  <a href="#cfn-opensearchservice-domain-clusterconfig">ClusterConfig</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-clusterconfig.html">ClusterConfig</a></code>
  <a href="#cfn-opensearchservice-domain-cognitooptions">CognitoOptions</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-cognitooptions.html">CognitoOptions</a></code>
  <a href="#cfn-opensearchservice-domain-domainendpointoptions">DomainEndpointOptions</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-domainendpointoptions.html">DomainEndpointOptions</a></code>
  <a href="#cfn-opensearchservice-domain-domainname">DomainName</a>: <code class="replaceable">String</code>
  <a href="#cfn-opensearchservice-domain-ebsoptions">EBSOptions</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-ebsoptions.html">EBSOptions</a></code>
  <a href="#cfn-opensearchservice-domain-encryptionatrestoptions">EncryptionAtRestOptions</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-encryptionatrestoptions.html">EncryptionAtRestOptions</a></code>
  <a href="#cfn-opensearchservice-domain-engineversion">EngineVersion</a>: <code class="replaceable">String</code>
  <a href="#cfn-opensearchservice-domain-ipaddresstype">IPAddressType</a>: <code class="replaceable">String</code>
  <a href="#cfn-opensearchservice-domain-logpublishingoptions">LogPublishingOptions</a>: <code class="replaceable">
    <code class="replaceable">Key</code>: <code class="replaceable">Value</code></code>
  <a href="#cfn-opensearchservice-domain-nodetonodeencryptionoptions">NodeToNodeEncryptionOptions</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-nodetonodeencryptionoptions.html">NodeToNodeEncryptionOptions</a></code>
  <a href="#cfn-opensearchservice-domain-offpeakwindowoptions">OffPeakWindowOptions</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-offpeakwindowoptions.html">OffPeakWindowOptions</a></code>
  <a href="#cfn-opensearchservice-domain-snapshotoptions">SnapshotOptions</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-snapshotoptions.html">SnapshotOptions</a></code>
  <a href="#cfn-opensearchservice-domain-softwareupdateoptions">SoftwareUpdateOptions</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-softwareupdateoptions.html">SoftwareUpdateOptions</a></code>
  <a href="#cfn-opensearchservice-domain-tags">Tags</a>: <code class="replaceable">
    - <a href="./aws-properties-opensearchservice-domain-tag.html">Tag</a></code>
  <a href="#cfn-opensearchservice-domain-vpcoptions">VPCOptions</a>: <code class="replaceable">
    <a href="./aws-properties-opensearchservice-domain-vpcoptions.html">VPCOptions</a></code>
</code></pre></div><h2 id="aws-resource-opensearchservice-domain-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-opensearchservice-domain-accesspolicies"><span class="term"><code class="code">AccessPolicies</code></span></dt><dd>
    <p>An AWS Identity and Access Management (IAM) policy document that specifies who can
      access the OpenSearch Service domain and their permissions. For more information, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/ac.html#ac-creating">Configuring access policies</a> in the <em>Amazon OpenSearch Service Developer
        Guide</em>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Json</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-advancedoptions"><span class="term"><code class="code">AdvancedOptions</code></span></dt><dd>
    <p>Additional options to specify for the OpenSearch Service domain. For more information, see
        <a href="https://docs.aws.amazon.com/opensearch-service/latest/APIReference/API_CreateDomain.html#API_CreateDomain_RequestBody">AdvancedOptions</a> in the OpenSearch Service API reference.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Object of String</p><p><em>Pattern</em>: <code class="code">[a-zA-Z0-9]+</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-advancedsecurityoptions"><span class="term"><code class="code">AdvancedSecurityOptions</code></span></dt><dd>
    <p>Specifies options for fine-grained access control and SAML authentication.</p> 
    <p>If you specify advanced security options, you must also enable node-to-node encryption (<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-opensearchservice-domain-nodetonodeencryptionoptions.html">NodeToNodeEncryptionOptions</a>)
      and encryption at rest (<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-opensearchservice-domain-encryptionatrestoptions.html">EncryptionAtRestOptions</a>).
      You must also enable <code class="code">EnforceHTTPS</code> within <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-opensearchservice-domain-domainendpointoptions.html">DomainEndpointOptions</a>,
      which requires HTTPS for all traffic to the domain.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-advancedsecurityoptionsinput.html">AdvancedSecurityOptionsInput</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-clusterconfig"><span class="term"><code class="code">ClusterConfig</code></span></dt><dd>
    <p>Container for the cluster configuration of a domain.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-clusterconfig.html">ClusterConfig</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-cognitooptions"><span class="term"><code class="code">CognitoOptions</code></span></dt><dd>
    <p>Configures OpenSearch Service to use Amazon Cognito authentication for OpenSearch
      Dashboards.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-cognitooptions.html">CognitoOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-domainendpointoptions"><span class="term"><code class="code">DomainEndpointOptions</code></span></dt><dd>
    <p>Specifies additional options for the domain endpoint, such as whether to require HTTPS for all traffic or whether to use a custom endpoint rather than the default endpoint.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-domainendpointoptions.html">DomainEndpointOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-domainname"><span class="term"><code class="code">DomainName</code></span></dt><dd>
    <p>A name for the OpenSearch Service domain. The name must have a minimum length of 3 and a maximum length of 28. If you don't specify a name, AWS CloudFormation generates a unique
      physical ID and uses that ID for the domain name. For more information, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-name.html">Name
        Type</a>.</p>
    <p>Required when creating a new domain.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you specify a name, you can't perform updates that require replacement of this
        resource. You can perform updates that require no or some interruption. If you must replace
        the resource, specify a new name.</p></div></div>
  <p><em>Required</em>: Conditional</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-opensearchservice-domain-ebsoptions"><span class="term"><code class="code">EBSOptions</code></span></dt><dd>
    <p>The configurations of Amazon Elastic Block Store (Amazon EBS) volumes that are attached to
      data nodes in the OpenSearch Service domain. For more information, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/limits.html#ebsresource">EBS volume size limits</a> in the <em>Amazon OpenSearch Service Developer
        Guide</em>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-ebsoptions.html">EBSOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-encryptionatrestoptions"><span class="term"><code class="code">EncryptionAtRestOptions</code></span></dt><dd>
    <p>Whether the domain should encrypt data at rest, and if so, the AWS KMS key to
      use. See <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/encryption-at-rest.html">Encryption of data at rest for Amazon OpenSearch Service</a>.</p>
    <p>If no encryption at rest options were initially specified in the template, updating this property by adding it causes no interruption. However, if you change this property after it's already been set within a template, 
    the domain is deleted and recreated in order to modify the property.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-encryptionatrestoptions.html">EncryptionAtRestOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-some-interrupt">Some interruptions</a></p></dd><dt id="cfn-opensearchservice-domain-engineversion"><span class="term"><code class="code">EngineVersion</code></span></dt><dd>
    <p>The version of OpenSearch to use. The value must be in the format
      <code class="code">OpenSearch_X.Y</code> or <code class="code">Elasticsearch_X.Y</code>. If not specified, the latest version of OpenSearch is used. For
      information about the versions that OpenSearch Service supports, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/what-is.html#choosing-version">Supported
        versions of OpenSearch and Elasticsearch</a> in the <em>Amazon OpenSearch Service
        Developer Guide</em>.</p>
    <p>If you set the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-updatepolicy.html#cfn-attributes-updatepolicy-upgradeopensearchdomain">EnableVersionUpgrade</a> update policy to <code class="code">true</code>, you can update
        <code class="code">EngineVersion</code> without interruption. When <code class="code">EnableVersionUpgrade</code> is
      set to <code class="code">false</code>, or is not specified, updating <code class="code">EngineVersion</code> results in
        <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">replacement</a>.</p>
  <p><em>Required</em>: Conditional</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">^Elasticsearch_[0-9]<span>{</span>1}\.[0-9]<span>{</span>1,2}$|^OpenSearch_[0-9]<span>{</span>1,2}\.[0-9]<span>{</span>1,2}$</code></p><p><em>Minimum</em>: <code class="code">14</code></p><p><em>Maximum</em>: <code class="code">18</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-ipaddresstype"><span class="term"><code class="code">IPAddressType</code></span></dt><dd>
         <p>Choose either dual stack or IPv4 as your IP address type. 
   Dual stack allows you to share domain resources across IPv4 and IPv6 address types, and is the recommended option. 
   If you set your IP address type to dual stack, you can't change your address type later.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-logpublishingoptions"><span class="term"><code class="code">LogPublishingOptions</code></span></dt><dd>
    <p>An object with one or more of the following keys: <code class="code">SEARCH_SLOW_LOGS</code>,
      <code class="code">ES_APPLICATION_LOGS</code>, <code class="code">INDEX_SLOW_LOGS</code>, <code class="code">AUDIT_LOGS</code>,
      depending on the types of logs you want to publish. Each key needs a valid
      <code class="code">LogPublishingOption</code> value. For the full syntax, see the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html#aws-resource-opensearchservice-domain--examples">examples</a>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Object of <a href="./aws-properties-opensearchservice-domain-logpublishingoption.html">LogPublishingOption</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-nodetonodeencryptionoptions"><span class="term"><code class="code">NodeToNodeEncryptionOptions</code></span></dt><dd>
    <p>Specifies whether node-to-node encryption is enabled. See <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/ntn.html">Node-to-node encryption for Amazon OpenSearch Service</a>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-nodetonodeencryptionoptions.html">NodeToNodeEncryptionOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-offpeakwindowoptions"><span class="term"><code class="code">OffPeakWindowOptions</code></span></dt><dd>
    <p>Options for a domain's off-peak window, during which OpenSearch Service can perform mandatory configuration changes on the domain.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-offpeakwindowoptions.html">OffPeakWindowOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-snapshotoptions"><span class="term"><code class="code">SnapshotOptions</code></span></dt><dd>
    <p><b>DEPRECATED</b>. The automated snapshot configuration for the
      OpenSearch Service domain indexes.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-snapshotoptions.html">SnapshotOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-softwareupdateoptions"><span class="term"><code class="code">SoftwareUpdateOptions</code></span></dt><dd>
         <p>Service software update options for the domain.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-softwareupdateoptions.html">SoftwareUpdateOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-tags"><span class="term"><code class="code">Tags</code></span></dt><dd>
    <p>An arbitrary set of tags (key–value pairs) to associate with the OpenSearch Service
      domain.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-opensearchservice-domain-tag.html">Tag</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-opensearchservice-domain-vpcoptions"><span class="term"><code class="code">VPCOptions</code></span></dt><dd>
    <p>The virtual private cloud (VPC) configuration for the OpenSearch Service domain. For more
      information, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/vpc.html">Launching your Amazon OpenSearch Service domains within a VPC</a> in the <em>Amazon OpenSearch Service Developer
        Guide</em>.</p>
    <p>If you remove this entity altogether, along with its associated properties, it causes a replacement. You might encounter this scenario if you're updating your security configuration from a VPC to a public endpoint.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: <a href="./aws-properties-opensearchservice-domain-vpcoptions.html">VPCOptions</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-some-interrupt">Some interruptions</a></p></dd></dl></div><h2 id="aws-resource-opensearchservice-domain-return-values">Return values</h2><h3 id="aws-resource-opensearchservice-domain-return-values-ref">Ref</h3><p>When the logical ID of this resource is provided to the Ref intrinsic function, Ref
      returns the resource name, such as <code class="code">mystack-abc1d2efg3h4.</code> For more
      information about using the Ref function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html">Ref</a>.</p><h3 id="aws-resource-opensearchservice-domain-return-values-fn--getatt">Fn::GetAtt</h3><p>GetAtt returns a value for a specified attribute of this type. For more information, see
      <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html">Fn::GetAtt</a>. The following are the available attributes and sample return
      values.</p><h4 id="aws-resource-opensearchservice-domain-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist"><dl><dt id="AdvancedSecurityOptions.AnonymousAuthDisableDate-fn::getatt"><span class="term"><code class="code">AdvancedSecurityOptions.AnonymousAuthDisableDate</code></span></dt><dd>
    <p>Date and time when the migration period will be disabled. Only necessary when <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/fgac.html#fgac-enabling-existing">enabling
      fine-grained access control on an existing domain</a>.</p>
  </dd><dt id="Arn-fn::getatt"><span class="term"><code class="code">Arn</code></span></dt><dd>
    <p>The Amazon Resource Name (ARN) of the CloudFormation stack.</p>
  </dd><dt id="DomainArn-fn::getatt"><span class="term"><code class="code">DomainArn</code></span></dt><dd>
         <p>The Amazon Resource Name (ARN) of the domain. See <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/index.html">Identifiers for IAM Entities
  </a> in <em>Using AWS Identity and Access Management</em> for more information.
  </p>
      </dd><dt id="DomainEndpoint-fn::getatt"><span class="term"><code class="code">DomainEndpoint</code></span></dt><dd>
    <p>The domain-specific endpoint used for requests to the OpenSearch APIs, such as
      <code class="code">search-mystack-1ab2cdefghij-ab1c2deckoyb3hofw7wpqa3cm.us-west-1.es.amazonaws.com</code>.</p>
  </dd><dt id="DomainEndpointV2-fn::getatt"><span class="term"><code class="code">DomainEndpointV2</code></span></dt><dd>
         <p>If <code class="code">IPAddressType</code> to set to <code class="code">dualstack</code>, a version 2 domain endpoint is provisioned.
   This endpoint functions like a normal endpoint, except that it works with both IPv4 and IPv6 IP addresses.
   Normal endpoints work only with IPv4 IP addresses.
  </p>
      </dd><dt id="Id-fn::getatt"><span class="term"><code class="code">Id</code></span></dt><dd>
    <p>The resource ID. For example, <code class="code">123456789012/my-domain</code>.</p>
  </dd></dl></div><h2 id="aws-resource-opensearchservice-domain--remarks">Remarks</h2><p>
        <em>Migrating stacks from Elasticsearch to OpenSearch</em>
      </p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>You can't directly update CloudFormation templates to use the
            <code class="code">AWS::OpenSearchService::Domain</code> resource in place of
            <code class="code">AWS::Elasticsearch::Domain</code>, otherwise the corresponding domain will be
          deleted along with all of its data.</p></div></div><p>Perform the following steps to migrate an Elasticsearch domain to an OpenSearch domain
        if the domain is defined within CloudFormation.</p><p>
        <b>Step 1: Prepare your existing stack for deprecation</b>
      </p><p>Make a copy of your original CloudFormation template, which contains the Elasticsearch
        domain resource, for use in step 3. Then add the following attributes to the Elasticsearch
        domain resource at the same level as <code class="code">Type</code> and <code class="code">Properties</code>. </p><p><code class="code">DeletionPolicy: Retain</code></p><p><code class="code">UpdateReplacePolicy: Retain</code></p><p>These settings ensure that CloudFormation doesn't delete or modify the corresponding
        domain when you delete this resource from your stack. If you have other custom resources
        defined in the stack that aren't critically important during the short migration period, you
        can delete them from the template and they'll be recreated when you create the new
        stack.</p><p>
        <b>Step 2: Upgrade your domain to OpenSearch</b>
      </p><p>After you add the two policy attributes to your template, upgrade your domain to an
        OpenSearch version using the normal upgrade process. For instructions, see <a href="https://docs.aws.amazon.com/opensearch-service/latest/developerguide/version-migration.html#starting-upgrades">Starting an upgrade</a>. Make sure to take a snapshot of your domain before upgrading
        it to prevent accidental loss of data.</p><p>
        <b>Step 3: Create a new CloudFormation template</b>
      </p><p>While you wait for the upgrade to complete, prepare your new OpenSearch template. Using
        the copy of your original template that you made in step 1, make the following
        changes:</p><div class="itemizedlist">
         
         
         
         
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p>Change the domain resource type from <code class="code">AWS::Elasticsearch::Domain</code> to
              <code class="code">AWS::OpenSearchService::Domain</code>.</p>
        </li><li class="listitem">
          <p>Add the <code class="code">DeletionPolicy</code> and <code class="code">UpdateReplacePolicy</code> attributes
            to the resource, as you did in step 1.</p>
        </li><li class="listitem"><p>Change <code class="code">ElasticsearchVersion</code> to <code class="code">EngineVersion</code> and set its value to
              <code class="code">OpenSearch_1.0</code> (or whichever version of OpenSearch you want to upgrade
            to).</p></li><li class="listitem">
          <p>If your resource contains <code class="code">ElasticsearchClusterConfig</code>, change it to
              <code class="code">ClusterConfig</code>.</p>
        </li><li class="listitem">
          <p>Change the suffixes of all instance types from <code class="code">.elasticsearch</code> to
              <code class="code">.search</code>.</p>
        </li><li class="listitem">
          <p>If there are any <code class="code">Fn::GetAtt</code> or <code class="code">!GetAtt</code> references to your
            domain ARN, change them to <code class="code">!GetAtt MyDomain.Arn</code>.</p>
        </li><li class="listitem">
          <p>Comment out any resources not currently within the stack (most likely everything
            except <code class="code">AWS::OpenSearchService::Domain</code>).</p>
        </li></ul></div><p>See the next section for examples that demonstrate the new format.</p><p>
        <b>Step 4: Import the OpenSearch stack</b>
      </p><p>Once your domain upgrade finishes, you can import the new stack. Within CloudFormation,
        choose <b>Create stack</b> and <b>With existing
          resources (import resources)</b>, then upload the template you created in the
        previous step.</p><p>CloudFormation prompts you for the name (identifier value) of the existing domain. Copy
        the domain name directly from the OpenSearch console. Give the stack a name that's different
        from the current one, then choose <b>Import resources</b>.</p><p>After the stack is created, uncomment any related resources from the stack and update it
        to ensure they're recreated. You can remove the <code class="code">DeletionPolicy</code> and
          <code class="code">UpdateReplacePolicy</code> attributes if you want, but they can help prevent
        accidental deletions in the future.</p><p>
        <b>Step 5: Delete the Elasticsearch stack</b>
      </p><p>Now that your new stack is created, delete the old stack which contains the legacy
        Elasticsearch resource.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Before deleting the old stack, make absolutely sure that the template contains the
            <code class="code">DeletionPolicy: Retain</code> attribute.</p></div></div><p>*The above steps were partially derived from this <a href="https://onecloudplease.com/blog/migrating-to-opensearch-with-cloudformation" rel="noopener noreferrer" target="_blank"><span>blog
          post</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p><h2 id="aws-resource-opensearchservice-domain--examples">Examples</h2><p></p><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-opensearchservice-domain--examples--Create_an_OpenSearch_Service_domain_that_contains_two_data_nodes_and_three_master_nodes">Create an OpenSearch Service domain that contains two data nodes and three master nodes</a></li><li><a href="#aws-resource-opensearchservice-domain--examples--Create_a_domain_with_VPC_options">Create a domain with VPC options</a></li><li><a href="#aws-resource-opensearchservice-domain--examples--Create_a_domain_with_fine-grained_access_control">Create a domain with fine-grained access control</a></li></ul></div><h3 id="aws-resource-opensearchservice-domain--examples--Create_an_OpenSearch_Service_domain_that_contains_two_data_nodes_and_three_master_nodes">Create an OpenSearch Service domain that contains two data nodes and three master nodes</h3><p>The following example creates an OpenSearch Service domain running OpenSearch 1.0 that
          contains two data nodes and three dedicated master nodes. The domain has 40 GiB of storage
          and enables log publishing for application logs, search slow logs, and index slow logs.
          The access policy permits the root user for the AWS account to make all
          HTTP requests to the domain, such as indexing documents or searching indexes.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-opensearchservice-domain--examples--Create_an_OpenSearch_Service_domain_that_contains_two_data_nodes_and_three_master_nodes--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"OpenSearchServiceDomain": <span>{</span>
   "Type":"AWS::OpenSearchService::Domain",
   "Properties": <span>{</span>
      "DomainName": "test",
      "EngineVersion": "OpenSearch_1.0",
      "ClusterConfig": <span>{</span>
         "DedicatedMasterEnabled": true,
         "InstanceCount": "2",
         "ZoneAwarenessEnabled": true,
         "InstanceType": "m3.medium.search",
         "DedicatedMasterType": "m3.medium.search",
         "DedicatedMasterCount": "3"
      },
      "EBSOptions":<span>{</span>
         "EBSEnabled": true,
         "Iops": "0",
         "VolumeSize": "20",
         "VolumeType": "gp2"
      },
      "AccessPolicies": <span>{</span>
         "Version":"2012-10-17",
         "Statement":[
            <span>{</span>
               "Effect": "Allow",
               "Principal": <span>{</span>
                  "AWS": "arn:aws:iam::123456789012:user/opensearch-user"
               },
               "Action":"es:*",
               "Resource": "arn:aws:es:us-east-1:123456789012:domain/test/*"
            }
         ]
      },
      "LogPublishingOptions": <span>{</span>
         "ES_APPLICATION_LOGS": <span>{</span>
           "CloudWatchLogsLogGroupArn": "arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearch/domains/opensearch-application-logs",
           "Enabled": true
         },
         "SEARCH_SLOW_LOGS": <span>{</span>
           "CloudWatchLogsLogGroupArn": "arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearch/domains/opensearch-slow-logs",
           "Enabled": true
         },
         "INDEX_SLOW_LOGS": <span>{</span>
           "CloudWatchLogsLogGroupArn": "arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearch/domains/opensearch-index-slow-logs",
           "Enabled": true
         }
      },
      "AdvancedOptions": <span>{</span>
         "rest.action.multi.allow_explicit_index": "true",
         "override_main_response_version": "true"
      }
   }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-opensearchservice-domain--examples--Create_an_OpenSearch_Service_domain_that_contains_two_data_nodes_and_three_master_nodes--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">OpenSearchServiceDomain:
  Type: AWS::OpenSearchService::Domain
  Properties:
    DomainName: 'test'
    EngineVersion: 'OpenSearch_1.0'
    ClusterConfig:
      DedicatedMasterEnabled: true
      InstanceCount: '2'
      ZoneAwarenessEnabled: true
      InstanceType: 'm3.medium.search'
      DedicatedMasterType: 'm3.medium.search'
      DedicatedMasterCount: '3'
    EBSOptions:
      EBSEnabled: true
      Iops: '0'
      VolumeSize: '20'
      VolumeType: 'gp2'
    AccessPolicies:
      Version: '2012-10-17'
      Statement:
        -
          Effect: 'Allow'
          Principal:
            AWS: 'arn:aws:iam::123456789012:user/opensearch-user'
          Action: 'es:*'
          Resource: 'arn:aws:es:us-east-1:846973539254:domain/test/*'
    LogPublishingOptions:
      ES_APPLICATION_LOGS:
          CloudWatchLogsLogGroupArn: 'arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearch/domains/opensearch-application-logs'
          Enabled: true
      SEARCH_SLOW_LOGS:
          CloudWatchLogsLogGroupArn: 'arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearch/domains/opensearch-slow-logs'
          Enabled: true
      INDEX_SLOW_LOGS:
          CloudWatchLogsLogGroupArn: 'arn:aws:logs:us-east-1:123456789012:log-group:/aws/opensearch/domains/opensearch-index-slow-logs'
          Enabled: true
    AdvancedOptions:
      rest.action.multi.allow_explicit_index: 'true'
      override_main_response_version: 'true'</code></pre></div><h3 id="aws-resource-opensearchservice-domain--examples--Create_a_domain_with_VPC_options">Create a domain with VPC options</h3><p>The following example creates a domain with VPC options.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-opensearchservice-domain--examples--Create_a_domain_with_VPC_options--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "OpenSearchServiceDomain resource",
  "Parameters": <span>{</span>
    "DomainName": <span>{</span>
      "Description": "User-defined OpenSearch domain name",
      "Type": "String"
    },
    "EngineVersion": <span>{</span>
      "Description": "User-defined OpenSearch version",
      "Type": "String"
    },
    "InstanceType": <span>{</span>
      "Type": "String"
    },
    "AvailabilityZone": <span>{</span>
      "Type": "String"
    },
    "CidrBlock": <span>{</span>
      "Type": "String"
    },
    "GroupDescription": <span>{</span>
      "Type": "String"
    },
    "SGName": <span>{</span>
      "Type": "String"
    }
  },
  "Resources": <span>{</span>
    "OpenSearchServiceDomain": <span>{</span>
      "Type": "AWS::OpenSearchService::Domain",
      "Properties": <span>{</span>
        "DomainName": <span>{</span>
          "Ref": "DomainName"
        },
        "EngineVersion": <span>{</span>
          "Ref": "EngineVersion"
        },
        "ClusterConfig": <span>{</span>
          "InstanceCount": "1",
          "InstanceType": <span>{</span>
            "Ref": "InstanceType"
          }
        },
        "EBSOptions": <span>{</span>
          "EBSEnabled": true,
          "Iops": "0",
          "VolumeSize": "10",
          "VolumeType": "standard"
        },
        "AccessPolicies": <span>{</span>
          "Version": "2012-10-17",
          "Statement": [
            <span>{</span>
              "Effect": "Deny",
              "Principal": <span>{</span>
                "AWS": "*"
              },
              "Action": "es:*",
              "Resource": "*"
            }
          ]
        },
        "AdvancedOptions": <span>{</span>
          "rest.action.multi.allow_explicit_index": "true",
          "override_main_response_version": "true"
        },
        "Tags": [
          <span>{</span>
            "Key": "foo",
            "Value": "bar"
          }
        ],
        "VPCOptions": <span>{</span>
          "SubnetIds": [
            <span>{</span>
              "Ref": "subnet"
            }
          ],
          "SecurityGroupIds": [
            <span>{</span>
              "Ref": "mySecurityGroup"
            }
          ]
        }
      }
    },
    "vpc": <span>{</span>
      "Type": "AWS::EC2::VPC",
      "Properties": <span>{</span>
        "CidrBlock": "10.0.0.0/16"
      }
    },
    "subnet": <span>{</span>
      "Type": "AWS::EC2::Subnet",
      "Properties": <span>{</span>
        "VpcId": <span>{</span>
          "Ref": "vpc"
        },
        "CidrBlock": <span>{</span>
          "Ref": "CidrBlock"
        },
        "AvailabilityZone": <span>{</span>
          "Ref": "AvailabilityZone"
        }
      }
    },
    "mySecurityGroup": <span>{</span>
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": <span>{</span>
        "GroupDescription": <span>{</span>
          "Ref": "GroupDescription"
        },
        "VpcId": <span>{</span>
          "Ref": "vpc"
        },
        "GroupName": <span>{</span>
          "Ref": "SGName"
        },
        "SecurityGroupIngress": [
          <span>{</span>
            "FromPort": 443,
            "IpProtocol": "tcp",
            "ToPort": 443,
            "CidrIp": "0.0.0.0/0"
          }
        ]
      }
    }
  },
  "Outputs": <span>{</span>
    "Arn": <span>{</span>
      "Value": <span>{</span>
        "Fn::GetAtt": [
          "OpenSearchServiceDomain",
          "Arn"
        ]
      }
    },
    "DomainEndpoint": <span>{</span>
      "Value": <span>{</span>
        "Fn::GetAtt": [
          "OpenSearchServiceDomain",
          "DomainEndpoint"
        ]
      }
    },
    "SecurityGroupId": <span>{</span>
      "Value": <span>{</span>
        "Ref": "mySecurityGroup"
      }
    },
    "SubnetId": <span>{</span>
      "Value": <span>{</span>
        "Ref": "subnet"
      }
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-opensearchservice-domain--examples--Create_a_domain_with_VPC_options--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Description: OpenSearchServiceDomain resource
Parameters:
  DomainName:
    Description: User-defined OpenSearch domain name
    Type: String
  EngineVersion:
    Description: User-defined OpenSearch version
    Type: String
  InstanceType:
    Type: String
  AvailabilityZone:
    Type: String
  CidrBlock:
    Type: String
  GroupDescription:
    Type: String
  SGName:
    Type: String
Resources:
  OpenSearchServiceDomain:
    Type: 'AWS::OpenSearchService::Domain'
    Properties:
      DomainName:
        Ref: DomainName
      EngineVersion:
        Ref: EngineVersion
      ClusterConfig:
        InstanceCount: '1'
        InstanceType:
          Ref: InstanceType
      EBSOptions:
        EBSEnabled: true
        Iops: '0'
        VolumeSize: '10'
        VolumeType: 'standard'
      AccessPolicies:
        Version: '2012-10-17'
        Statement:
          - Effect: Deny
            Principal:
              AWS: '*'
            Action: 'es:*'
            Resource: '*'
      AdvancedOptions:
        rest.action.multi.allow_explicit_index: 'true'
        override_main_response_version: 'true'
      Tags:
        - Key: foo
          Value: bar
      VPCOptions:
        SubnetIds:
          - Ref: subnet
        SecurityGroupIds:
          - Ref: mySecurityGroup
  vpc:
    Type: 'AWS::EC2::VPC'
    Properties:
      CidrBlock: 10.0.0.0/16
  subnet:
    Type: 'AWS::EC2::Subnet'
    Properties:
      VpcId:
        Ref: vpc
      CidrBlock:
        Ref: CidrBlock
      AvailabilityZone:
        Ref: AvailabilityZone
  mySecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription:
        Ref: GroupDescription
      VpcId:
        Ref: vpc
      GroupName:
        Ref: SGName
      SecurityGroupIngress:
        - FromPort: 443
          IpProtocol: tcp
          ToPort: 443
          CidrIp: 0.0.0.0/0
Outputs:
  Arn:
    Value:
      'Fn::GetAtt':
        - OpenSearchServiceDomain
        - Arn
  DomainEndpoint:
    Value:
      'Fn::GetAtt':
        - OpenSearchServiceDomain
        - DomainEndpoint
  SecurityGroupId:
    Value:
      Ref: mySecurityGroup
  SubnetId:
    Value:
      Ref: subnet</code></pre></div><h3 id="aws-resource-opensearchservice-domain--examples--Create_a_domain_with_fine-grained_access_control">Create a domain with fine-grained access control</h3><p>The following example creates a domain with fine-grained access control.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-opensearchservice-domain--examples--Create_a_domain_with_fine-grained_access_control--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "OpenSearchServiceDomain": <span>{</span>
    "Type": "AWS::OpenSearchService::Domain",
    "Properties": <span>{</span>
      "DomainName": "my-domain-logs",
      "EngineVersion": "OpenSearch_1.0",
      "ClusterConfig": <span>{</span>
        "InstanceCount": 2,
        "InstanceType": "r6g.xlarge.search",
        "DedicatedMasterEnabled": true,
        "DedicatedMasterCount": 3,
        "DedicatedMasterType": "r6g.xlarge.search"
      },
      "EBSOptions": <span>{</span>
        "EBSEnabled": true,
        "VolumeSize": 10,
        "VolumeType": "gp2"
      },
      "AccessPolicies": <span>{</span>
        "Version": "2012-10-17",
        "Statement": <span>{</span>
          "Effect": "Allow",
          "Principal": <span>{</span>
            "AWS": "arn:aws:iam::478253424788:role/Admin"
          },
          "Action": "es:*",
          "Resource": "arn:aws:es:us-east-1:478253424788:domain/my-domain-logs/*"
        }
      }
    },
    "AdvancedSecurityOptions": <span>{</span>
      "Enabled": true,
      "InternalUserDatabaseEnabled": true,
      "MasterUserOptions": <span>{</span>
        "MasterUserName": "&lt;username&gt;",
        "MasterUserPassword": "&lt;password&gt;"
      }
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-opensearchservice-domain--examples--Create_a_domain_with_fine-grained_access_control--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">OpenSearchServiceDomain:
  Type: 'AWS::OpenSearchService::Domain'
  Properties:
    DomainName: my-domain-logs
    EngineVersion: OpenSearch_1.0
    ClusterConfig:
      InstanceCount: 2
      InstanceType: r6g.xlarge.search
      DedicatedMasterEnabled: true
      DedicatedMasterCount: 3
      DedicatedMasterType: r6g.xlarge.search
    EBSOptions:
      EBSEnabled: true
      VolumeSize: 10
      VolumeType: gp2
    AccessPolicies:
      Version: '2012-10-17'
      Statement:
        Effect: Allow
        Principal:
          AWS: 'arn:aws:iam::478253424788:role/Admin'
        Action: 'es:*'
        Resource: 'arn:aws:es:us-east-1:478253424788:domain/my-domain-logs/*'
  AdvancedSecurityOptions:
    Enabled: true
    InternalUserDatabaseEnabled: true
    MasterUserOptions:
      MasterUserName: &lt;username&gt;
      MasterUserPassword: &lt;password&gt;</code></pre></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./AWS_OpenSearchService.html">Amazon OpenSearch Service</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-opensearchservice-domain-advancedsecurityoptionsinput.html">AdvancedSecurityOptionsInput</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=OpenSearch&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=OpenSearch&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-opensearchservice-domain.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>