<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>條件函數 - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="intrinsic-function-reference-conditions" /><meta name="default_state" content="intrinsic-function-reference-conditions" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" /><meta name="description" content="使用內部函數按條件建立堆疊資源。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="使用者指南" /><meta name="abstract" content="使 AWS CloudFormation 用本使用者指南可預測並重複地建立和管理 AWS 基礎架構部署。" /><meta name="guide-locale" content="zh_tw" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="使用者指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="使用者指南" /><meta id="panorama-serviceConsolePage" value="條件函數" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>條件函數 - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,資源佈建,資源組態,基礎設施管理,CloudFormer,CloudFormation 堆疊,CloudFormation 堆疊集,CloudFormation 範本,變更集合" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "使用者指南",
        "item" : "https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "範本參考",
        "item" : "https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/template-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "內部函數參考",
        "item" : "https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "條件函數",
        "item" : "https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文件</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">使用者指南</a></div><div id="page-toc-src"><a href="#associating-a-condition">為條件建立關聯</a><a href="#intrinsic-function-reference-conditions-and">Fn::And</a><a href="#intrinsic-function-reference-conditions-equals">Fn::Equals</a><a href="#intrinsic-function-reference-conditions-if">Fn::If</a><a href="#intrinsic-function-reference-conditions-not">Fn::Not</a><a href="#intrinsic-function-reference-conditions-or">Fn::Or</a><a href="#w9aac34c28c21c29">支援的函數</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>本文為英文版的機器翻譯版本，如內容有任何歧義或不一致之處，概以英文版為準。</p></awsui-alert><h1 class="topictitle" id="intrinsic-function-reference-conditions">條件函數</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>您可以使用內部函數 (例如 <code class="code">Fn::If</code>、<code class="code">Fn::Equals</code> 和 <code class="code">Fn::Not</code>) 按條件建立堆疊資源。這些條件的計算是根據您在建立或更新堆疊時，宣告的輸入參數。定義所有條件之後，即可將這些條件與範本之資源和輸出區段中的資源或資源屬性建立關聯。</p><p>所有條件都是在範本的條件區段中定義，除了 <code class="code">Fn::If</code> 條件以外。您可以在範本中資源區段和輸出區段中的中繼資料屬性、更新政策屬性和屬性值中使用 <code class="code">Fn::If</code> 條件。</p><p>當您想要重複使用範本以在不同的內容中建立資源時 (例如測試環境與生產環境)，可以使用條件。在範本中，您可以新增 <code class="code">EnvironmentType</code> 輸入參數，此參數接受 <code class="userinput">prod</code> 或 <code class="userinput">test</code> 作為輸入。針對生產環境，您可以讓 Amazon EC2 執行個體包含特定功能；不過，在測試環境中，就要使用較少的功能來節省成本。使用條件，即可針對每種環境類型定義要建立哪些資源和其設定方式。</p><p>如需條件區段的詳細資訊，請參閱 <a href="./conditions-section-structure.html">條件</a>。</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>您只能從範本的參數和映射區段中參考其他條件和值。例如，您可以參考輸入參數中的值，但您不能在條件中參考資源的邏輯 ID。</p></div></div><div class="highlights"><h6>主題</h6><ul><li><a href="#associating-a-condition">為條件建立關聯</a></li><li><a href="#intrinsic-function-reference-conditions-and">Fn::And</a></li><li><a href="#intrinsic-function-reference-conditions-equals">Fn::Equals</a></li><li><a href="#intrinsic-function-reference-conditions-if">Fn::If</a></li><li><a href="#intrinsic-function-reference-conditions-not">Fn::Not</a></li><li><a href="#intrinsic-function-reference-conditions-or">Fn::Or</a></li><li><a href="#w9aac34c28c21c29">支援的函數</a></li><li><a href="./conditions-sample-templates.html">範例範本</a></li><li><a href="./intrinsic-function-reference-condition.html">Condition</a></li></ul></div>
    <h2 id="associating-a-condition">為條件建立關聯</h2>

    <p>若要按條件建立資源、資源屬性或輸出，您必須將其與條件建立關聯。新增 <code class="code">Condition:</code> 鍵和條件的邏輯 ID 作為屬性，將其與條件建立關聯，如下列程式碼片段所示。只有當 <code class="code">CreateProdResources</code> 條件計算為 true 時，AWS CloudFormation 才會建立 <code class="code">NewVolume</code> 資源。</p>
    <div id="JSON" name="JSON" class="section langfilter">
      <h3 id="associating-conditions-example.json">JSON</h3>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"NewVolume" : <span>{</span>
  "Type" : "AWS::EC2::Volume",
  "Condition" : "CreateProdResources",
  "Properties" : <span>{</span>
     "Size" : "100",
     "AvailabilityZone" : <span>{</span> "Fn::GetAtt" : [ "EC2Instance", "AvailabilityZone" ]}
}</code></pre>
    </div>
    <div id="YAML" name="YAML" class="section langfilter">
      <h3 id="associating-conditions-example.yaml">YAML</h3>

      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">NewVolume:
  Type: "AWS::EC2::Volume"
  Condition: CreateProdResources
  Properties: 
    Size: 100
    AvailabilityZone: !GetAtt EC2Instance.AvailabilityZone</code></pre>
    </div>
     
      <h3 id="fn-if-examples"><code class="code">Fn::If</code></h3>


      <p>針對 <code class="code">Fn::If</code> 函數，您只需要指定條件名稱。下列程式碼片段說明如何使用 <code class="code">Fn::If</code> 按條件指定資源屬性。如果<code class="code">CreateLargeSize</code>條件為 true，請將磁碟區大小 CloudFormation 設定為<code class="code">100</code>。如果條件為 false，請將磁碟區大小 CloudFormation 設定為<code class="code">10</code>。</p>
      <div id="JSON" name="JSON" class="section langfilter">
        <h4 id="fn-if-examples.json">JSON</h4>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "NewVolume": <span>{</span>
        "Type": "AWS::EC2::Volume",
        "Properties": <span>{</span>
            "Size": <span>{</span>
                "Fn::If": [
                    "CreateLargeSize",
                    "100",
                    "10"
                ]
            },
            "AvailabilityZone": <span>{</span>
                "Fn::GetAtt": [
                    "Ec2Instance",
                    "AvailabilityZone"
                ]
            }
        },
        "DeletionPolicy": "Snapshot"
    }
}</code></pre>
      </div>

      <div id="YAML" name="YAML" class="section langfilter">
        <h4 id="fn-if-examples.yaml">YAML</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">NewVolume:
  Type: 'AWS::EC2::Volume'
  Properties:
    Size:
      'Fn::If':
        - CreateLargeSize
        - '100'
        - '10'
    AvailabilityZone:
      'Fn::GetAtt':
        - Ec2Instance
        - AvailabilityZone
  DeletionPolicy: Snapshot</code></pre>
      </div>
       
        <h4 id="nested-conditions">巢狀條件</h4>

        <p>您也可以在其他條件中使用條件。下列程式碼片段來自範本的 <code class="code">Conditions</code> 區段。<code class="code">MyAndCondition</code> 條件包括 <code class="code">SomeOtherCondition</code> 條件：</p>
        <div id="JSON" name="JSON" class="section langfilter">
          <h5 id="nested-conditions.json">JSON</h5>


          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"MyAndCondition": <span>{</span>
   "Fn::And": [
      <span>{</span>"Fn::Equals": ["sg-mysggroup", <span>{</span>"Ref": "ASecurityGroup"}]},
      <span>{</span>"Condition": "SomeOtherCondition"}
   ]
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h5 id="nested-conditions.yaml">YAML</h5>


          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyAndCondition: !And
  - !Equals ["sg-mysggroup", !Ref "ASecurityGroup"]
  - !Condition SomeOtherCondition</code></pre>

        </div>

       
     
   
    <h2 id="intrinsic-function-reference-conditions-and"><code class="code">Fn::And</code></h2>

    <p>如果所有指定條件評估為 true，則傳回 <code class="code">true</code>；如果其中任一條件評估為 false，則傳回 <code class="code">false</code>。<code class="code">Fn::And</code> 作為 AND 運算子使用。可納入的條件數目下限為 2，上限為 10。</p>
     
      <h3 id="intrinsic-function-reference-conditions-and-syntax">宣告</h3>

      <div id="JSON" name="JSON" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-and-syntax.json">JSON</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Fn::And": [<span>{</span><code class="replaceable"><a href="#fn-and-condition">condition</a></code>}, <span>{</span><code class="replaceable">...</code>}]</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-and-syntax.yaml">YAML</h4> <p>完整函式名稱的語法：</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Fn::And: [<code class="replaceable"><a href="#fn-and-condition">condition</a></code>]</code></pre>
        <p>短格式的語法：</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">!And [<code class="replaceable"><a href="#fn-and-condition">condition</a></code>]</code></pre>
      </div>
     
     
      <h3 id="w9aac34c28c21c17b7">參數</h3>

      <div class="variablelist">
         
      <dl>
          <dt id="fn-and-condition"><span class="term"><code class="code">condition</code></span></dt>
          <dd>
            <p>計算結果為 <code class="code">true</code> 或 <code class="code">false</code> 的條件。</p>
          </dd>
        </dl></div>
     
     
      <h3 id="w9aac34c28c21c17b9">範例</h3>

      <p>如果參考安全群組名稱等於 <code class="code">MyAndCondition</code>，並且 <code class="code">sg-mysggroup</code> 計算為 true 時，下列的 <code class="code">SomeOtherCondition</code> 會計算為 true：</p>
      <div id="JSON" name="JSON" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-and-example.json">JSON</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"MyAndCondition": <span>{</span>
   "Fn::And": [
      <span>{</span>"Fn::Equals": ["sg-mysggroup", <span>{</span>"Ref": "ASecurityGroup"}]},
      <span>{</span>"Condition": "SomeOtherCondition"}
   ]
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-and-example.yaml">YAML</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyAndCondition: !And
  - !Equals ["sg-mysggroup", !Ref ASecurityGroup]
  - !Condition SomeOtherCondition</code></pre>
      </div>
     
   
    <h2 id="intrinsic-function-reference-conditions-equals"><code class="code">Fn::Equals</code></h2>

    <p>比較兩個值是否相等。若兩值相同，即傳回 <code class="code">true</code>，反之則傳回 <code class="code">false</code>。</p>
     
      <h3 id="intrinsic-function-reference-conditions-equals-syntax">宣告</h3>

      <div id="JSON" name="JSON" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-equals-syntax.json">JSON</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Fn::Equals" : ["<code class="replaceable">value_1</code>", "<code class="replaceable">value_2</code>"]</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-equals-syntax.yaml">YAML</h4> <p>完整函式名稱的語法：</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Fn::Equals: [<code class="replaceable">value_1</code>, <code class="replaceable">value_2</code>]</code></pre>
        <p>短格式的語法：</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">!Equals [<code class="replaceable">value_1</code>, <code class="replaceable">value_2</code>]</code></pre>
      </div>
     
     
      <h3 id="w9aac34c28c21c19b7">參數</h3>

      <div class="variablelist">
         
      <dl>
          <dt><span class="term"><code class="code">value</code></span></dt>
          <dd>
            <p>您希望比較之任何類型的值。</p>
          </dd>
        </dl></div>
     
     
      <h3 id="w9aac34c28c21c19b9">範例</h3>

      <p>若 <code class="code">UseProdCondition</code> 參數的值等於 <code class="code">EnvironmentType</code>，下列 <code class="code">prod</code> 條件會評估為 true：</p>
      <div id="JSON" name="JSON" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-equals-example.json">JSON</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"UseProdCondition" : <span>{</span>
   "Fn::Equals": [
      <span>{</span>"Ref": "EnvironmentType"},
      "prod"
   ]
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-equals-example.yaml">YAML</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">UseProdCondition:
  !Equals [!Ref EnvironmentType, prod]</code></pre>
      </div>
     
   
    <h2 id="intrinsic-function-reference-conditions-if"><code class="code">Fn::If</code></h2>

    <p>如果指定的條件計算為 <code class="code">true</code> 則傳回一個值；如果指定的條件計算為 <code class="code">false</code> 則傳回另一個值。目前， CloudFormation 在範本中資源區段和輸出區段中的中繼資料屬性、更新政策屬性和屬性值中支援 <code class="code">Fn::If</code> 內部函數。您可以使用 <code class="code">AWS::NoValue</code> 虛擬參數作為傳回值來移除對應的屬性。</p>
     
      <h3 id="intrinsic-function-reference-conditions-if-syntax">宣告</h3>

      <div id="JSON" name="JSON" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-if-syntax.json">JSON</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Fn::If": [<code class="replaceable"><a href="#condition_name">condition_name</a></code>, <code class="replaceable"><a href="#value_if_true">value_if_true</a></code>, <code class="replaceable"><a href="#value_if_false">value_if_false</a></code>]</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-if-syntax.yaml">YAML</h4> <p>完整函式名稱的語法：</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Fn::If: [<code class="replaceable"><a href="#condition_name">condition_name</a></code>, <code class="replaceable"><a href="#value_if_true">value_if_true</a></code>, <code class="replaceable"><a href="#value_if_false">value_if_false</a></code>]</code></pre>
        <p>短格式的語法：</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">!If [<code class="replaceable"><a href="#condition_name">condition_name</a></code>, <code class="replaceable"><a href="#value_if_true">value_if_true</a></code>, <code class="replaceable"><a href="#value_if_false">value_if_false</a></code>]</code></pre>
      </div>
     
     
      <h3 id="w9aac34c28c21c23b7">參數</h3>

      <div class="variablelist">
         
         
         
      <dl>
          <dt id="condition_name"><span class="term"><code class="code">condition_name</code></span></dt>
          <dd>
            <p>條件區段中對條件的參考。使用條件的名稱來參考。</p>
          </dd>
         
          <dt id="value_if_true"><span class="term"><code class="code">value_if_true</code></span></dt>
          <dd>
            <p>當指定的條件計算為 <code class="code">true</code> 傳回的值。</p>
          </dd>
         
          <dt id="value_if_false"><span class="term"><code class="code">value_if_false</code></span></dt>
          <dd>
            <p>當指定的條件計算為 <code class="code">false</code> 傳回的值。</p>
          </dd>
        </dl></div>
     
     
      <h3 id="w9aac34c28c21c23b9">範例</h3>

      <p>若要檢視其他範例，請參閱 <a href="./conditions-sample-templates.html">範例範本</a>。</p>
       
        <h4 id="w9aac34c28c21c23b9b5">範例 1</h4>

        <p>下列程式碼片段在 Amazon EC2 資源的 <code class="code">SecurityGroups</code> 屬性中使用 <code class="code">Fn::If</code> 函數。如果<code class="code">CreateNewSecurityGroup</code>條件評估為 true，會 CloudFormation 使用的參考值<code class="code">NewSecurityGroup</code>來指定<code class="code">SecurityGroups</code>屬性；否則，會 CloudFormation 使用的參考值<code class="code">ExistingSecurityGroup</code>。</p>
        <div id="JSON" name="JSON" class="section langfilter">
          <h5 id="intrinsic-function-reference-conditions-if-example1.json">JSON</h5>

          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"SecurityGroups" : [<span>{</span>
  "Fn::If" : [
    "CreateNewSecurityGroup",
    <span>{</span>"Ref" : "NewSecurityGroup"},
    <span>{</span>"Ref" : "ExistingSecurityGroup"}
  ]
}]</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h5 id="intrinsic-function-reference-conditions-if-example1.yaml">YAML</h5>

          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">SecurityGroups:
  - !If [CreateNewSecurityGroup, !Ref NewSecurityGroup, !Ref ExistingSecurityGroup]</code></pre>
        </div>
       
       
        <h4 id="w9aac34c28c21c23b9b7">範例 2</h4>

        <p>在範本的輸出區段中，您可以使用 <code class="code">Fn::If</code> 函數來按條件輸出資訊。在下面的代碼片段中，如果<code class="code">CreateNewSecurityGroup</code>條件評估為 true，則 CloudFormation 輸出<code class="code">NewSecurityGroup</code>資源的安全組 ID。如果條件為 false，則 CloudFormation 輸出<code class="code">ExistingSecurityGroup</code>資源的安全性群組識別碼。</p>
        <div id="JSON" name="JSON" class="section langfilter">
          <h5 id="intrinsic-function-reference-conditions-if-example2.json">JSON</h5>

          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Outputs" : <span>{</span>
  "SecurityGroupId" : <span>{</span>
    "Description" : "Group ID of the security group used.",
    "Value" : <span>{</span>
      "Fn::If" : [
        "CreateNewSecurityGroup",
        <span>{</span>"Ref" : "NewSecurityGroup"},
        <span>{</span>"Ref" : "ExistingSecurityGroup"}
      ]
    }
  }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h5 id="intrinsic-function-reference-conditions-if-example2.yaml">YAML</h5>

          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Outputs:
  SecurityGroupId: 
    Description: Group ID of the security group used.
    Value: !If [CreateNewSecurityGroup, !Ref NewSecurityGroup, !Ref ExistingSecurityGroup]</code></pre>
        </div>
       
       
        <h4 id="w9aac34c28c21c23b9b9">範例 3</h4>

        <p>下列程式碼片段在 <code class="code">AWS::NoValue</code> 函數中使用 <code class="code">Fn::If</code> 虛擬參數。只有在提供快照 ID 時，該條件才會為 Amazon RDS 資料庫執行個體使用快照。如果<code class="code">UseDBSnapshot</code>條件評估為 true，會 CloudFormation 使用<code class="code">DBSnapshotIdentifier</code>屬性的<code class="code">DBSnapshotName</code>參數值。若條件評估為 false， CloudFormation  即會移除 <code class="code">DBSnapshotIdentifier</code> 屬性。</p>
        <div id="JSON" name="JSON" class="section langfilter">
          <h5 id="intrinsic-function-reference-conditions-if-example3.json">JSON</h5>

          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"MyDB" : <span>{</span>
  "Type" : "AWS::RDS::DBInstance",
  "Properties" : <span>{</span>
    "AllocatedStorage" : "5",
    "DBInstanceClass" : "db.t2.small",
    "Engine" : "MySQL",
    "EngineVersion" : "5.5",
    "MasterUsername" : <span>{</span> "Ref" : "DBUser" },
    "MasterUserPassword" : <span>{</span> "Ref" : "DBPassword" },
    "DBParameterGroupName" : <span>{</span> "Ref" : "MyRDSParamGroup" },
    "DBSnapshotIdentifier" : <span>{</span>
      "Fn::If" : [
        "UseDBSnapshot",
        <span>{</span>"Ref" : "DBSnapshotName"},
        <span>{</span>"Ref" : "AWS::NoValue"}
      ]
    }
  }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h5 id="intrinsic-function-reference-conditions-if-example3.yaml">YAML</h5>

          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyDB:
  Type: "AWS::RDS::DBInstance"
  Properties: 
    AllocatedStorage: 5
    DBInstanceClass: db.t2.small
    Engine: MySQL
    EngineVersion: 5.5
    MasterUsername: !Ref DBUser
    MasterUserPassword: !Ref DBPassword
    DBParameterGroupName: !Ref MyRDSParamGroup
    DBSnapshotIdentifier:
      !If [UseDBSnapshot, !Ref DBSnapshotName, !Ref "AWS::NoValue"]</code></pre>
        </div>
       
       
        <h4 id="w9aac34c28c21c23b9c11">範例 4</h4>

        <p>下列程式碼片段只有在 <code class="code">RollingUpdates</code> 條件評估為 true 時，才會提供 Auto Scaling 更新政策。如果條件評估為 false，則會 CloudFormation 移除<code class="code">AutoScalingRollingUpdate</code>更新原則。</p>
        <div id="JSON" name="JSON" class="section langfilter">
          <h5 id="intrinsic-function-reference-conditions-if-example4.json">JSON</h5>

          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"UpdatePolicy": <span>{</span>
  "AutoScalingRollingUpdate": <span>{</span>
    "Fn::If": [
      "RollingUpdates",
      <span>{</span>
        "MaxBatchSize": "2",
        "MinInstancesInService": "2",
        "PauseTime": "PT0M30S"
      },
      <span>{</span>
        "Ref" : "AWS::NoValue"
      }
    ]
  }
}</code></pre>
        </div>
        <div id="YAML" name="YAML" class="section langfilter">
          <h5 id="intrinsic-function-reference-conditions-if-example4.yaml">YAML</h5>

          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">UpdatePolicy:
  AutoScalingRollingUpdate:
    !If 
      - RollingUpdates
      -
        MaxBatchSize: 2
        MinInstancesInService: 2
        PauseTime: PT0M30S
      - !Ref "AWS::NoValue"</code></pre>
        </div>
       
     
   
    <h2 id="intrinsic-function-reference-conditions-not"><code class="code">Fn::Not</code></h2>

    <p>若條件評估為 <code class="code">false</code>，則傳回 <code class="code">true</code>，若條件評估為 <code class="code">true</code>，則傳回 <code class="code">false</code>。<code class="code">Fn::Not</code> 作為 NOT 運算子使用。</p>
     
      <h3 id="intrinsic-function-reference-conditions-not-syntax">宣告</h3>

      <div id="JSON" name="JSON" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-not-syntax.json">JSON</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Fn::Not": [<span>{</span><code class="replaceable"><a href="#condition">condition</a></code>}]</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-not-syntax.yaml">YAML</h4> <p>完整函式名稱的語法：</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Fn::Not: [<code class="replaceable"><a href="#condition">condition</a></code>]</code></pre>
        <p>短格式的語法：</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">!Not [<code class="replaceable"><a href="#condition">condition</a></code>]</code></pre>
      </div>
     
     
      <h3 id="w9aac34c28c21c25b7">參數</h3>

      <div class="variablelist">
         
      <dl>
          <dt id="condition"><span class="term"><code class="code">condition</code></span></dt>
          <dd>
            <p>計算為 <code class="code">Fn::Equals</code> 或 <code class="code">true</code> 的條件 (例如 <code class="code">false</code>)。</p>
          </dd>
        </dl></div>
     
     
      <h3 id="w9aac34c28c21c25b9">範例</h3>

      <p>若 <code class="code">EnvCondition</code> 參數的值等於 <code class="code">EnvironmentType</code>，下列 <code class="code">prod</code> 條件會評估為 true：</p>
      <div id="JSON" name="JSON" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-not-example.json">JSON</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"MyNotCondition" : <span>{</span>
   "Fn::Not" : [<span>{</span>
      "Fn::Equals" : [
         <span>{</span>"Ref" : "EnvironmentType"},
         "prod"
      ]
   }]
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-not-example.yaml">YAML</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyNotCondition:
  !Not [!Equals [!Ref EnvironmentType, prod]]</code></pre>
      </div>
     
   
    <h2 id="intrinsic-function-reference-conditions-or"><code class="code">Fn::Or</code></h2>

    <p>如果任一指定條件評估為 true，則傳回 <code class="code">true</code>；如果所有條件評估為 false，則傳回 <code class="code">false</code>。<code class="code">Fn::Or</code> 作為 OR 運算子使用。可納入的條件數目下限為 2，上限為 10。</p>
     
      <h3 id="intrinsic-function-reference-conditions-or-syntax">宣告</h3>

      <div id="JSON" name="JSON" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-or-syntax.json">JSON</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Fn::Or": [<span>{</span><code class="replaceable">condition</code>}, <span>{</span><code class="replaceable">...</code>}]</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-or-syntax.yaml">YAML</h4> <p>完整函式名稱的語法：</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Fn::Or: [<code class="replaceable">condition, ...</code>]</code></pre>
        <p>短格式的語法：</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">!Or [<code class="replaceable">condition, ...</code>]</code></pre>
      </div>
     
     
      <h3 id="w9aac34c28c21c27b7">參數</h3>

      <div class="variablelist">
         
      <dl>
          <dt><span class="term"><code class="code">condition</code></span></dt>
          <dd>
            <p>計算結果為 <code class="code">true</code> 或 <code class="code">false</code> 的條件。</p>
          </dd>
        </dl></div>
     
     
      <h3 id="w9aac34c28c21c27b9">範例</h3>

      
      <p>如果參考安全群組名稱等於 <code class="code">MyOrCondition</code>，或 <code class="code">sg-mysggroup</code> 計算為 true 時，下列的 <code class="code">SomeOtherCondition</code> 會計算為 true：</p>
      <div id="JSON" name="JSON" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-or-example.json">JSON</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"MyOrCondition" : <span>{</span>
   "Fn::Or" : [
      <span>{</span>"Fn::Equals" : ["sg-mysggroup", <span>{</span>"Ref" : "ASecurityGroup"}]},
      <span>{</span>"Condition" : "SomeOtherCondition"}
   ]
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
        <h4 id="intrinsic-function-reference-conditions-or-example.yaml">YAML</h4>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyOrCondition:
  !Or [!Equals [sg-mysggroup, !Ref ASecurityGroup], Condition: SomeOtherCondition]</code></pre>
      </div>

     
   
    <h2 id="w9aac34c28c21c29">支援的函數</h2>

    <p>您可以在 <code class="code">Fn::If</code> 條件中使用下列函數：</p>
    <div class="itemizedlist">
       
       
       
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><code class="code">Fn::Base64</code></p>
      </li><li class="listitem">
        <p><code class="code">Fn::FindInMap</code></p>
      </li><li class="listitem">
        <p><code class="code">Fn::GetAtt</code></p>
      </li><li class="listitem">
        <p><code class="code">Fn::GetAZs</code></p>
      </li><li class="listitem">
        <p><code class="code">Fn::If</code></p>
      </li><li class="listitem">
        <p><code class="code">Fn::Join</code></p>
      </li><li class="listitem">
        <p><code class="code">Fn::Select</code></p>
      </li><li class="listitem">
        <p><code class="code">Fn::Sub</code></p>
      </li><li class="listitem">
        <p><code class="code">Ref</code></p>
      </li></ul></div>
    <p>您可以在所有其他條件函數中使用下列函數，例如 <code class="code">Fn::Equals</code> 和 <code class="code">Fn::Or</code>：</p>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><code class="code">Fn::FindInMap</code></p>
      </li><li class="listitem">
        <p><code class="code">Ref</code></p>
      </li><li class="listitem">
        <p>其他條件函數</p>
      </li></ul></div>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>您的瀏覽器已停用或無法使用 Javascript。</strong></p><p>您必須啟用 Javascript，才能使用 AWS 文件。請參閱您的瀏覽器說明頁以取得說明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文件慣用形式</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./intrinsic-function-reference-cidr.html">Fn::Cidr</div><div id="next" class="next-link" accesskey="n" href="./conditions-sample-templates.html">範例範本</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此頁面是否有幫助？ - 是</div><div class="content"><p>感謝您，讓我們知道我們做得很好！</p><p>若您有空，歡迎您告知我們值得讚許的地方，這樣才能保持良好服務。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此頁面是否有幫助？ - 否</div><div class="content"><p>感謝讓我們知道此頁面仍須改善。很抱歉，讓您失望。</p><p>若您有空，歡迎您提供改善文件的方式。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>