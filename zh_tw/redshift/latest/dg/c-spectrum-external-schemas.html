<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>建立 Amazon Redshift Spectrum 外部結構描述 - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c-spectrum-external-schemas" /><meta name="default_state" content="c-spectrum-external-schemas" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="description" content="所有外部資料表必須建立在使用 陳述式建立的外部結構描述中。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="資料庫開發人員指南" /><meta name="abstract" content="使用 Amazon Redshift 這項 PB 級的完全受管企業等級資料倉儲服務，來建立和管理資料倉儲。" /><meta name="guide-locale" content="zh_tw" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-schemas.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-external-schemas.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="資料庫開發人員指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="資料庫開發人員指南" /><meta id="panorama-serviceConsolePage" value="建立 Amazon Redshift Spectrum 外部結構描述" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>建立 Amazon Redshift Spectrum 外部結構描述 - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c-spectrum-external-schemas" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-schemas.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,叢集,資料倉儲,開發人員,範例資料,database,資料庫開發人員,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "資料庫開發人員指南",
        "item" : "https://docs.aws.amazon.com/zh_tw/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "使用 Amazon Redshift Spectrum 查詢外部資料",
        "item" : "https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-using-spectrum.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "建立 Amazon Redshift Spectrum 外部結構描述",
        "item" : "https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-using-spectrum.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c-spectrum-external-schemas" target="_blank" rel="noopener noreferrer" title="開啟 PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文件</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">資料庫開發人員指南</a></div><div id="page-toc-src"><a href="#c-spectrum-external-catalogs">使用外部目錄</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>本文為英文版的機器翻譯版本，如內容有任何歧義或不一致之處，概以英文版為準。</p></awsui-alert><h1 class="topictitle" id="c-spectrum-external-schemas">建立 Amazon Redshift Spectrum 外部結構描述</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>所有外部資料表必須建立在使用 <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a> 陳述式建立的外部結構描述中。</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>某些應用程式會交互使用 <em>database (資料庫)</em> 和 <em>schema (結構描述)</em> 詞彙。在 Amazon Redshift，我們使用術語「結構描述」<em></em>。</p></div></div><p>Amazon Redshift 外部結構描述參考了外部資料目錄中的外部資料庫。您可以在 Amazon Redshift、<a href="https://docs.aws.amazon.com/athena/latest/ug/catalog.html">Amazon Athena</a>、<a href="https://docs.aws.amazon.com/glue/latest/dg/components-overview.html#data-catalog-intro">AWS Glue Data Catalog</a> 或 Apache Hive 中繼存放區 (例如 <a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-what-is-emr.html">Amazon EMR</a>) 中建立外部資料庫。若您在 Amazon Redshift 中建立了外部資料庫，該資料庫會位於 Athena 資料目錄中。若要在 Hive 中繼存放區中建立資料庫，您需要在 Hive 應用程式中建立資料庫。</p><p>Amazon Redshift 需要授權才能代表您存取 Athena 中的資料目錄以及 Amazon S3 中的資料檔案。您應先建立 AWS Identity and Access Management (IAM) 角色，以提供該授權。然後將該角色連接至您的叢集，並在 Amazon Redshift <code class="code">CREATE EXTERNAL SCHEMA</code> 陳述式中為角色提供 Amazon Resource Name (ARN)。如需授權的詳細資訊，請參閱 <a href="./c-spectrum-iam-policies.html">Amazon Redshift Spectrum 的 IAM 政策</a>。</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>如果您目前在 Athena 資料目錄中有 Redshift Spectrum 外部資料表，則可以將 Athena 資料目錄遷移到 AWS Glue 資料目錄。若要搭配 Redshift Spectrum 使用 AWS Glue 資料目錄，您可能需要變更 IAM 政策。如需詳細資訊，請參閱《Amazon Athena 使用者指南》<em></em>中的<a href="https://docs.aws.amazon.com/athena/latest/ug/glue-athena.html#glue-upgrade">升級至 AWS Glue 資料目錄</a>。</p></div></div><p>若要在建立外部結構描述的同時建立外部資料庫，請指定 <code class="code">FROM DATA CATALOG</code> 並在您的 <code class="code">CREATE EXTERNAL DATABASE</code> 陳述式中包含 <code class="code">CREATE EXTERNAL SCHEMA</code> 子句。</p><p>以下範例使用外部資料庫 <code class="code">spectrum_schema</code> 建立名為 <code class="code">spectrum_db</code> 的外部結構描述。</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema spectrum_schema from data catalog 
database 'spectrum_db' 
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole'
create external database if not exists;</code></pre><p>如果使用 Athena 管理資料目錄，請指定 Athena 資料庫名稱和 Athena 資料目錄所在的 AWS 區域。</p><p>以下範例使用 Athena 資料目錄中的預設 <code class="code">sampledb</code> 資料庫建立外部結構描述。</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema athena_schema from data catalog 
database 'sampledb' 
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole' 
region 'us-east-2';</code></pre><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p><code class="code">region</code> 參數參考的是 Athena 資料目錄所在的 AWS 區域，而非 Amazon S3 中資料檔案的位置。</p></div></div><p>如果使用 Hive 中繼存放區 (例如 Amazon EMR) 管理資料目錄，則必須將安全群組設定為允許叢集之間的流量。</p><p>在 CREATE EXTERNAL SCHEMA 陳述式中，指定 <code class="code">FROM HIVE METASTORE</code> 並包括該中繼存放區的 URI 與連接埠號碼。以下範例使用名為 <code class="code">hive_db</code> 的 Hive 中繼存放區資料庫建立外部結構描述。</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema hive_schema
from hive metastore
database 'hive_db'
uri '172.10.10.10' port 99
iam_role 'arn:aws:iam::123456789012:role/MySpectrumRole'</code></pre><p>若要檢視您叢集的外部結構描述，請查詢 PG_EXTERNAL_SCHEMA 目錄資料表或 SVV_EXTERNAL_SCHEMAS 畫面。下列範例查詢了加入 PG_EXTERNAL_SCHEMA 和 PG_NAMESPACE 的 SVV_EXTERNAL_SCHEMAS。</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from svv_external_schemas</code></pre><p>如需完整的命令語法與範例，請參閱 <a href="./r_CREATE_EXTERNAL_SCHEMA.html">CREATE EXTERNAL SCHEMA</a>。</p>
         <h2 id="c-spectrum-external-catalogs">在 Amazon Redshift Spectrum 中使用外部目錄</h2>


         <p>Amazon Redshift Spectrum 外部資料庫和外部資料表的中繼資料存放於外部資料目錄中。Redshift Spectrum 中繼資料預設存放於 Athena 資料目錄中。您可在 Athena 主控台中檢視並管理 Redshift Spectrum 資料庫和資料表。</p>
         <p>您也可以使用 Hive 資料定義語言 (DDL)、使用 Athena 或 Hive 中繼存放區 (如 Amazon EMR) 建立並管理外部資料庫和外部資料表。</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>我們建議使用 Amazon Redshift 來建立並管理 Redshift Spectrum 中的外部資料庫和外部資料表。</p></div></div>
          
            <h3 id="c-spectrum-athena-external-catalogs">在 Athena 和 AWS Glue 中檢視 Redshift Spectrum 資料庫</h3>

            <p>您可以透過在您的 CREATE EXTERNAL SCHEMA 陳述式中包含 CREATE EXTERNAL DATABASE IF NOT EXISTS，來建立外部資料庫。在這類案例中，外部資料庫的中繼資料會存放在您的資料目錄內。您透過外部結構描述所建立的外部資料表中繼資料，也會存放在  資料目錄中。</p>
            
            <p>Athena 和 AWS Glue 會為每個支援的 AWS 區域維護資料目錄。若要檢視資料表中繼資料，請登入 Athena 或 AWS Glue 主控台。在 Athena 中，選擇<b>資料來源</b>、您的 AWS Glue，然後檢視資料庫的詳細資料。在 AWS Glue 中，選擇<b>資料庫</b>、您的外部資料庫，然後檢視資料庫的詳細資訊。</p>
               
            <p>如果您使用 Athena 建立和管理外部資料表，請使用 CREATE EXTERNAL SCHEMA 註冊資料庫。例如，下列命令可註冊名為 <code class="code">sampledb</code> 的 Athena 資料庫。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema athena_sample
from data catalog
database 'sampledb'
iam_role 'arn:aws:iam::123456789012:role/mySpectrumRole'
region 'us-east-1';</code></pre>
            <p>當您查詢 SVV_EXTERNAL_TABLES 系統檢視時，您可看到 Amazon Redshift <code class="code">sampledb</code> 資料庫中的資料表，以及在 Amazon Redshift 中建立的資料表。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from svv_external_tables;</code></pre>

            <pre class="screen">schemaname    | tablename        | location                                               
--------------+------------------+--------------------------------------------------------
athena_sample | elb_logs         | s3://athena-examples/elb/plaintext           
athena_sample | lineitem_1t_csv  | s3://myspectrum/tpch/1000/lineitem_csv                
athena_sample | lineitem_1t_part | s3://myspectrum/tpch/1000/lineitem_partition          
spectrum      | sales            | s3://redshift-downloads/tickit/spectrum/sales          
spectrum      | sales_part       | s3://redshift-downloads/tickit/spectrum/sales_part
</pre>
          
          
            <h3 id="c-spectrum-hive-metastore">註冊 Apache Hive 中繼存放區資料庫</h3>


            <p>如果您在 Apache Hive 中繼存放區中建立外部資料表，則可以使用 CREATE EXTERNAL SCHEMA 在 Redshift Spectrum 中註冊那些資料表。</p>
            <p>在 CREATE EXTERNAL SCHEMA 陳述句中，指定 FROM HIVE METASTORE 子句並提供 Hive 中繼存放區 URI 和連接埠號碼。IAM 角色必須包含存取 Amazon S3 的許可，但不需要任何 Athena 許可。以下為註冊 Hive 中繼存放區的範例。</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create external schema if not exists hive_schema
from hive metastore
database 'hive_database'
uri 'ip-10-0-111-111.us-west-2.compute.internal' port 9083 
iam_role 'arn:aws:iam::123456789012:role/mySpectrumRole';</code></pre>
          
          
            <h3 id="c-spectrum-enabling-emr-access">允許您的 Amazon Redshift 叢集存取 Amazon EMR 叢集</h3>


            <p>如果您的 Hive 中繼存放區在 Amazon EMR 中，您必須提供 Amazon Redshift 叢集對 Amazon EMR 叢集的存取權限。若要執行此作業，請建立 Amazon EC2 安全群組。您接著需要允許從您 Amazon Redshift 叢集的安全群組及您 Amazon EMR 叢集的安全群組，前往 EC2 安全群組的所有傳入流量。然後，將 EC2 安全性新增到 Amazon Redshift 叢集和 Amazon EMR 叢集。</p>
            
            <div class="procedure"><h6>檢視您的 Amazon Redshift 叢集的安全群組名稱</h6><p>如要顯示安全群組，請執行以下作業：</p><ol><li> <p>登入 AWS Management Console，開啟位於 <a href="https://console.aws.amazon.com/redshift/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/redshift/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 的 Amazon Redshift 主控台。</p> 
               </li><li>
                     <p>在導覽選單上，選擇<b>叢集</b>，然後從清單選擇叢集以開啟其詳細資訊。</p>
                  </li><li>
                  <p>選擇<b>屬性</b>，然後檢視<b>網路與安全設定</b>區段。</p>
               </li><li>
                     <p>在<b>VPC 安全群組</b>中找到您的安全群組並記下它。</p>
                  </li></ol></div>
                                            
                       
         
 
                  <p><b></b></p>
                  
                  

                        
                                                                                                
            <div class="procedure"><h6>檢視 Amazon EMR 主節點安全群組名稱</h6><ol><li><p>開啟 Amazon EMR 叢集。如需詳細資訊，請參閱《Amazon EMR 管理指南》<em></em>中的<a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-security-configurations.html">使用安全組態設定叢集安全性</a>。</p></li><li><p>在<b>安全和存取</b>下，記下 Amazon EMR 主節點安全群組名稱。</p>
                  <div class="mediaobject">
                      
                        <img src="images/spectrum-emr-security-groups.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="在 Amazon EMR 主控台醒目提示 Amazon EMR 主節點安全群組名稱的螢幕擷取畫面。" />
                      
                      
                  </div>
               </li></ol></div>
            
            <div class="procedure"><h6>建立或修改 Amazon EC2 安全群組以允許 Amazon Redshift 和 Amazon EMR 之間的連線</h6><ol><li><p>在 Amazon EC2 儀表板中，選擇<b>安全群組</b>。如需詳細資訊，請參閱《Amazon EC2 Linux 執行個體使用者指南》<em></em>中的<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-rules.html">安全群組規則</a>。</p>
               </li><li><p>選擇<b>建立安全群組</b>。</p>
               </li><li><p>如果您使用的是 VPC，請選擇您的 Amazon Redshift 和 Amazon EMR 叢集所在的 VPC。</p>
               </li><li><p>新增傳入規則。</p>
               <div class="orderedlist">
                   
                   
                   
               <ol><li><p>針對 <b>Type (類型)</b>，請選擇 <b>Custom TCP (自訂 TCP)</b>。</p>
                  </li><li><p>對於 <b>Source (資源)</b>，選擇 <b>Custom (自訂)</b>。</p>
                  </li><li><p>輸入您 Amazon Redshift 安全群組的名稱。</p></li></ol></div></li><li><p>新增另一個傳入規則。</p>
               <div class="orderedlist">
                   
                   
                                                      
               <ol><li><p>針對 <b>Type</b> (類型)，選擇 <b>TCP</b>。</p>
                  </li><li><p>針對 <b>Port Range (連接埠範圍)</b>，輸入 <b>9083</b>。</p>
                     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>EMR HMS 的預設連接埠是 9083。如果您的 HMS 使用了不同連接埠，請在傳入規則和外部結構描述定義中指定該連接埠。</p></div></div>
                  </li><li><p>對於 <b>Source (資源)</b>，選擇 <b>Custom (自訂)</b>。</p>
                  </li></ol></div>
               </li><li><p>輸入安全群組的名稱和說明。</p></li><li><p>選擇<b>建立安全群組</b>。</p>                  
               </li></ol></div>
            
            <div class="procedure"><h6>將您在先前程序中建立的 Amazon EC2 安全群組新增到 Amazon Redshift 叢集</h6><ol><li><p>在 Amazon Redshift 中，選擇您的叢集。</p></li><li><p>選擇 <b>Properties (屬性)</b>。</p></li><li><p>檢視<b>網路與安全設定</b>，然後選擇<b>編輯</b>。</p></li><li><p>在<b>VPC 安全群組</b>中，選擇新的安全群組名稱。</p></li><li><p>選擇<b>儲存變更</b>。</p></li></ol></div>
            
            <div class="procedure"><h6>將 Amazon EC2 安全群組新增到 Amazon EMR 叢集</h6><ol><li><p>在 Amazon EMR 中，選擇您的叢集。如需詳細資訊，請參閱《Amazon EMR 管理指南》<em></em>中的<a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-security-configurations.html">使用安全組態設定叢集安全性</a>。</p></li><li><p>在 <b>Hardware (硬體)</b> 下，選擇主節點的連結。</p></li><li><p>選擇<b>EC2 執行個體 ID</b>欄中的連結。</p>
                  <div class="mediaobject">
                      
                        <img src="images/spectrum-emr-add-security-group.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                        在 Amazon EMR 主控台醒目提示 Amazon EC2 執行個體 ID 值的螢幕擷取畫面。&#xA;                     " />
                      
                      
                  </div></li><li><p>對於<b>動作</b>，選擇<b>安全性</b>、<b>變更安全群組</b>。</p></li><li><p>在<b>關聯的安全群組</b>中，選擇新的安全群組，然後選擇<b>新增安全群組</b>。</p></li><li><p>選擇<b>儲存</b>。</p>
                  </li></ol></div>
          
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>您的瀏覽器已停用或無法使用 Javascript。</strong></p><p>您必須啟用 Javascript，才能使用 AWS 文件。請參閱您的瀏覽器說明頁以取得說明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文件慣用形式</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c-spectrum-data-files.html">在 Amazon Redshift Spectrum 為查詢建立資料檔案</div><div id="next" class="next-link" accesskey="n" href="./c-spectrum-external-tables.html">建立外部資料表</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此頁面是否有幫助？ - 是</div><div class="content"><p>感謝您，讓我們知道我們做得很好！</p><p>若您有空，歡迎您告知我們值得讚許的地方，這樣才能保持良好服務。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-schemas.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此頁面是否有幫助？ - 否</div><div class="content"><p>感謝讓我們知道此頁面仍須改善。很抱歉，讓您失望。</p><p>若您有空，歡迎您提供改善文件的方式。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c-spectrum-external-schemas.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>