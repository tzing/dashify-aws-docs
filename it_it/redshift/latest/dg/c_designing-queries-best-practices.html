<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Best practice di Amazon Redshift per la progettazione di query - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="c_designing-queries-best-practices" /><meta name="default_state" content="c_designing-queries-best-practices" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="description" content="Per ottimizzare le prestazioni delle query, segui queste raccomandazioni durante la creazione di query." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guida per sviluppatori di database" /><meta name="abstract" content="Creare e gestire un data warehouse con Amazon Redshift, un servizio di data warehouse completamente gestito di livello aziendale e con capacità nell'ordine di più petabyte." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/c_designing-queries-best-practices.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guida per sviluppatori di database" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guida per sviluppatori di database" /><meta id="panorama-serviceConsolePage" value="Best practice di Amazon Redshift per la progettazione di query" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Best practice di Amazon Redshift per la progettazione di query - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#c_designing-queries-best-practices" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,sviluppatore,dati campione,database,sviluppatore di database,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per sviluppatori di database",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Best practice di Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/best-practices.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Best practice di Amazon Redshift per la progettazione di query",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/best-practices.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#c_designing-queries-best-practices" target="_blank" rel="noopener noreferrer" title="Apri PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guida per sviluppatori di database</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="c_designing-queries-best-practices">Best practice di Amazon Redshift per la progettazione di query</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Per ottimizzare le prestazioni delle query, segui queste raccomandazioni durante la creazione di query.</p><div class="itemizedlist">
          
          
          
          
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Progetta le tabelle conformemente alle best practice in modo da fornire basi solide per le prestazioni delle query. Per ulteriori informazioni, consultare <a href="./c_designing-tables-best-practices.html">Best practice di Amazon Redshift per la progettazione di tabelle</a>.</p>
         </li><li class="listitem">
            <p>Non utilizzare <code class="code">select *</code>. Includi solo le colonne di cui hai bisogno.</p>
         </li><li class="listitem">
            <p>Utilizza <a href="./r_CASE_function.html">Espressione condizionale CASE</a> per eseguire aggregazioni complesse anziché selezionare più volte dalla stessa tabella.</p>
         </li><li class="listitem">
            <p>Non utilizzare cross join se non assolutamente necessario. Questi join senza una condizione di join generano un prodotto cartesiano di due tabelle. I cross join sono in genere eseguiti come nested loop join, ovvero i tipi di join più lenti. </p>
         </li><li class="listitem">
            <p>Usa le subquery nei casi in cui una tabella nella query è utilizzata solo per le condizioni di predicato e la subquery restituisce un numero esiguo di righe (inferiore a 200). L'esempio seguente utilizza una subquery per evitare di unire in join la tabella LISTING.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select sum(sales.qtysold)
from sales
where salesid in (select listid from listing where listtime &gt; '2008-12-26');</code></pre>
         </li><li class="listitem">
            <p>Utilizza predicati per limitare il più possibile il set di dati.</p>
         </li><li class="listitem">
            <p>Nel predicato, utilizza gli operatori meno onerosi. Gli operatori <a href="./r_comparison_condition.html">Condizione di confronto</a> sono preferibili agli operatori <a href="./r_patternmatching_condition_like.html">LIKE</a>. Gli operatori LIKE sono ancora preferibili a <a href="./pattern-matching-conditions-similar-to.html">SIMILAR TO</a> o <a href="./pattern-matching-conditions-posix.html">Operatori POSIX</a>.</p>
         </li><li class="listitem">
            <p>Evita l'utilizzo di funzioni nei predicati delle query. Il loro utilizzo può accrescere il costo della query in quanto richiedono un numero elevato di righe per risolvere le fasi intermedie della query.</p>
         </li><li class="listitem">
            <p>Se possibile, utilizza una clausola WHERE per limitare il set di dati. In tal modo, il pianificatore di query può utilizzare l'ordine delle righe per determinare quali record corrispondono ai criteri e quindi ignorare la scansione di grandi quantità di blocchi del disco. In caso contrario, il motore di esecuzione di query deve eseguire la scansione della totalità delle colonne partecipanti.</p>
         </li><li class="listitem">
            <p>Aggiungi predicati per filtrare le tabelle che partecipano alle operazioni di join, anche se i predicati applicano gli stessi filtri. La query restituisce lo stesso set di risultati, ma Amazon Redshift è in grado di filtrare le tabelle join prima della fase di scansione e può quindi ignorare in modo efficace la scansione dei blocchi di quelle tabelle. I filtri ridondanti non sono necessari se filtri una colonna utilizzata nella condizione di join. </p>
            <p>Ad esempio, supponiamo che intendi eseguire un join di <code class="code">SALES</code> con <code class="code">LISTING</code> per trovare le vendite di biglietti per i biglietti elencati dopo dicembre, raggruppati per venditore. Entrambe le tabelle sono ordinate per data. La query seguente unisce in join le tabelle sulla relativa chiave comune e filtra i valori <code class="code">listing.listtime</code> posteriori al 1° dicembre.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select listing.sellerid, sum(sales.qtysold)
from sales, listing
where sales.salesid = listing.listid
and listing.listtime &gt; '2008-12-01'
group by 1 order by 1;</code></pre>
            <p>La clausola WHERE non include un predicato for <code class="code">sales.saletime</code>, quindi il motore di esecuzione è costretto a eseguire la scansione dell'intera tabella <code class="code">SALES</code>. Se sai che il filtro comporterà un minor numero di righe partecipanti al join, aggiungi anche quel filtro. L'esempio seguente riduce il tempo di esecuzione in modo significativo.</p>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select listing.sellerid, sum(sales.qtysold)
from sales, listing
where sales.salesid = listing.listid
and listing.listtime &gt; '2008-12-01'
and sales.saletime &gt; '2008-12-01'
group by 1 order by 1;</code></pre>

         </li><li class="listitem">
            <p>Utilizza chiavi di ordinamento nella clausola GROUP BY di modo che il pianificatore di query possa utilizzare un'aggregazione più efficace. Una query può essere inclusa in un'aggregazione in una fase quando il relativo elenco GROUP BY contiene solo colonne di chiave di ordinamento, una delle quali è anche la chiave di distribuzione. Le colonne di chiave di ordinamento nell'elenco GROUP BY devono includere la prima chiave di ordinamento e quindi altre chiavi di ordinamento che intendi utilizzare. Ad esempio, è consentito utilizzare la prima chiave di ordinamento, la prima e la seconda chiave di ordinamento, la prima, la seconda e la terza chiave di ordinamento e così via. Non è possibile utilizzare la prima e la terza chiave di ordinamento.</p>
            <p>Puoi confermare l'utilizzo di un'aggregazione a una fase eseguendo il comando <a href="./r_EXPLAIN.html">EXPLAIN</a> e cercando <code class="code">XN
                  GroupAggregate</code> nella fase di aggregazione della query.</p>
         </li><li class="listitem">
            <p>Se utilizzi le clausole GROUP BY e ORDER BY, assicurati di posizionare le colonne in entrambe nello stesso ordine. In altre parole, utilizza l'approccio seguente.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">group by a, b, c
order by a, b, c</code></pre>
            <p>Non utilizzare l'approccio seguente.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">group by b, c, a
order by a, b, c</code></pre>
         </li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c_best-practices-avoid-maintenance.html">Pianificazione per le finestre di manutenzione</div><div id="next" class="next-link" accesskey="n" href="./advisor.html">Utilizzo di Advisor</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_designing-queries-best-practices.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>