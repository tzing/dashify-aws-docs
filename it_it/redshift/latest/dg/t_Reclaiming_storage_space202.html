<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Vacuum delle tabelle - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="t_Reclaiming_storage_space202" /><meta name="default_state" content="t_Reclaiming_storage_space202" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Reclaiming_storage_space202.html" /><meta name="description" content="Esegui il vacuum delle tabelle ogni volta che esegui un numero significativo di eliminazioni o aggiornamenti." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guida per sviluppatori di database" /><meta name="abstract" content="Creare e gestire un data warehouse con Amazon Redshift, un servizio di data warehouse completamente gestito di livello aziendale e con capacità nell'ordine di più petabyte." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Reclaiming_storage_space202.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/t_Reclaiming_storage_space202.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guida per sviluppatori di database" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guida per sviluppatori di database" /><meta id="panorama-serviceConsolePage" value="Vacuum delle tabelle" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Vacuum delle tabelle - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#t_Reclaiming_storage_space202" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Reclaiming_storage_space202.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Reclaiming_storage_space202.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Reclaiming_storage_space202.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,sviluppatore,dati campione,database,sviluppatore di database,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per sviluppatori di database",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Caricamento dei dati",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Loading_data.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Vacuum delle tabelle",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Loading_data.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#t_Reclaiming_storage_space202" target="_blank" rel="noopener noreferrer" title="Apri PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guida per sviluppatori di database</a></div><div id="page-toc-src"><a href="#automatic-table-sort">Ordinamento automatico delle tabelle</a><a href="#automatic-table-delete">Eliminazione vacuum automatica</a><a href="#vacuum-frequency">Frequenza di VACUUM</a><a href="#vacuum-stages">Fase di ordinamento e fase di unione</a><a href="#vacuum-sort-threshold">Soglia di vacuum</a><a href="#vacuum-types">Tipi di vacuum</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="t_Reclaiming_storage_space202">Vacuum delle tabelle</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon Redshift può ordinare ed eseguire automaticamente un'operazione VACUUM DELETE su tabelle in background. Per ripulire le tabelle dopo un caricamento o una serie di aggiornamenti incrementali, è anche possibile eseguire il comando <a href="./r_VACUUM_command.html">VACUUM</a>, sia sull'intero database, sia su singole tabelle.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Solo gli utenti con le autorizzazioni necessarie possono efficacemente eseguire l'operazione vacuum su una tabella. Se VACUUM viene eseguito senza le necessarie autorizzazioni di tabella, l'operazione viene completata ma non ha alcun effetto. Per l'elenco delle autorizzazioni di tabella valide per eseguire efficacemente VACUUM, consulta <a href="./r_VACUUM_command.html">VACUUM</a>.</p><p>Per questo motivo, raccomandiamo di eseguire il VACUUM sulle specifiche tabelle secondo necessità. Consigliamo questo approccio anche perché l'operazione VACUUM dell'intero database è potenzialmente un'operazione costosa.</p></div></div>
         <h2 id="automatic-table-sort">Ordinamento automatico delle tabelle</h2>
      
      <p>Amazon Redshift ordina automaticamente i dati in background per mantenerli ordinati nella tabella rispetto alla chiave di ordinamento. Amazon Redshift tiene traccia delle query di scansione per determinare quali sezioni della tabella trarranno vantaggio dall'ordinamento. </p>
         <p>In base al carico sul sistema, Amazon Redshift avvia automaticamente l'ordinamento. Questa operazione di ordinamento automatica riduce la necessità di eseguire il comando VACUUM per mantenere i dati ordinati secondo la chiave di ordinamento. Se sono necessari dati completamente ordinati in base alla chiave di ordinamento, ad esempio dopo un grande caricamento di dati, è comunque possibile eseguire manualmente il comando VACUUM. Per capire se la tabella trarrà benefici dall'esecuzione del comando VACUUM SORT, monitorare la colonna <code class="code">vacuum_sort_benefit</code> in <a href="./r_SVV_TABLE_INFO.html">SVV_TABLE_INFO</a>. </p>
         <p>Amazon Redshift tiene traccia delle query di scansione che utilizzano la chiave di ordinamento su ogni tabella. Amazon Redshift stima la percentuale massima di miglioramento nella scansione e nel filtraggio dei dati per ciascuna tabella (se la tabella è stata completamente ordinata). Tale stima è visibile nella colonna <code class="code">vacuum_sort_benefit</code> in <a href="./r_SVV_TABLE_INFO.html">SVV_TABLE_INFO</a>. È possibile usare questa colonna, insieme alla colonna <code class="code">unsorted</code>, per determinare quali query possano beneficare dell'esecuzione manuale del comando VACUUM SORT su un tavolo La colonna <code class="code">unsorted</code> riflette l'ordinamento fisico di una tabella. La colonna <code class="code">vacuum_sort_benefit</code> specifica l'impatto dell'ordinamento di una tabella tramite l'esecuzione manuale del comando VACUUM SORT.</p>
         <p>Considerare, ad esempio, lo schema seguente:</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">select "table", unsorted,vacuum_sort_benefit from svv_table_info order by 1;</code></pre>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">
 table | unsorted | vacuum_sort_benefit 
-------+----------+---------------------
 sales |    85.71 |                5.00
 event |    45.24 |               67.00
</code></pre>
         
         <p>Per la tabella "vendite", sebbene la tabella sia fisicamente non ordinata per circa l'86%, l'impatto sulle prestazioni della query dovuto al fatto che la tabella non sia ordinata per l'86% è solo del 5%. Ciò potrebbe essere dovuto al fatto le query accedono solo a una piccola parte della tabella, o che pochissime query hanno dovuto accedere alla tabella. Per la tabella "evento", la tabella è fisicamente non ordinata per circa il 45%. Ma l'impatto sulle prestazioni della query del 67% indica che le query accedono a una porzione maggiore della tabella o che il numero di query che accedono alla tabella è elevato. La tabella "evento" può ottenere potenzialmente dei vantaggi dall'esecuzione del comando VACUUM SORT.</p>
         
     
       
         <h2 id="automatic-table-delete">Eliminazione vacuum automatica</h2>
      <p>Quando si esegue un'eliminazione, le righe vengono contrassegnate per l'eliminazione, ma non rimosse. Amazon Redshift esegue automaticamente un'operazione VACUUM DELETE in background in base al numero di righe eliminate nelle tabelle del database. Amazon Redshift pianificherà l'esecuzione di VACUUM DELETE durante i periodi di carico ridotto e sospenderà l'operazione durante i periodi di alto carico. </p>
      <div class="highlights"><h6>Argomenti</h6><ul><li><a href="#vacuum-frequency">Frequenza di VACUUM</a></li><li><a href="#vacuum-stages">Fase di ordinamento e fase di unione</a></li><li><a href="#vacuum-sort-threshold">Soglia di vacuum</a></li><li><a href="#vacuum-types">Tipi di vacuum</a></li><li><a href="./vacuum-managing-vacuum-times.html">Gestione dei tempi di vacuum</a></li></ul></div>
         <h2 id="vacuum-frequency">Frequenza di VACUUM</h2>

         <p>È opportuno eseguire l'operazione vacuum quando necessario per mantenere prestazioni di query coerenti. Prendi in considerazione questi fattori quando determini la frequenza con cui eseguire il comando VACUUM:</p>
         <div class="itemizedlist">
          
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Esegui il comando VACUUM durante i periodi di tempo in cui prevedi un'attività minima sul cluster, ad esempio la sera o durante le finestre di amministrazione del database designate. </p>
            </li><li class="listitem">
               <p>Esegui i comandi VACUUM al di fuori delle finestre di manutenzione. Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/redshift/latest/dg/c_best-practices-avoid-maintenance.html">Pianificazione per le finestre di manutenzione</a>.</p>
            </li><li class="listitem">
               <p>Un'ampia regione non ordinata comporta tempi di vacuum più lunghi. Se ritardi il vacuum, questo richiederà più tempo perché è necessario riorganizzare una quantità maggiore di dati. </p>
            </li><li class="listitem">
               <p>VACUUM è un'operazione di I/O intensiva, quindi maggiore è il tempo richiesto per il completamento del vacuum, maggiore sarà l'impatto che avrà sulle query e su altre operazioni di database simultanee in esecuzione sul cluster. </p>
            </li><li class="listitem">
               <p>VACUUM richiede più tempo per le tabelle che utilizzano l'ordinamento interleaved. Per valutare se è necessario riordinare le tabelle interlacciate, esegui una query sulla vista <a href="./r_SVV_INTERLEAVED_COLUMNS.html">SVV_INTERLEAVED_COLUMNS</a>.</p>
            </li></ul></div>
       
         <h2 id="vacuum-stages">Fase di ordinamento e fase di unione</h2>

         <p>Amazon Redshift esegue un'operazione vacuum in due fasi: innanzitutto, ordina le righe nella regione non ordinata, quindi, se necessario, unisce le righe appena ordinate alla fine della tabella alle righe esistenti. Durante il vacuum di una tabella di grandi dimensioni, l'operazione di vacuum procede in una serie di passaggi costituiti da ordinamenti incrementali seguiti da unioni. Se l'operazione non riesce o se Amazon Redshift passa offline durante l'operazione vacuum, la tabella o il database parzialmente sottoposti a vacuum saranno in uno stato coerente, ma sarà necessario riavviare manualmente l'operazione vacuum. Gli ordinamenti incrementali vengono persi, ma non è necessario eseguire nuovamente il vacuum delle righe unite di cui è stato eseguito il commit prima dell'errore. Se la regione non ordinata è grande, l'operazione potrebbe richiedere molto tempo. Per ulteriori informazioni sulle fasi di ordinamento e unione, consultare <a href="./vacuum-managing-volume-of-unmerged-rows.html">Gestione del volume delle righe unite</a>.</p>
         <p>Gli utenti possono accedere alle tabelle mentre ne viene eseguito il vacuum. È possibile eseguire query e scrivere operazioni mentre viene eseguito il vacuum di una tabella, ma quando il DML e il vacuum vengono eseguiti contemporaneamente, entrambe le operazioni potrebbero richiedere più tempo. Se si eseguono le istruzioni UPDATE e DELETE durante un vacuum, le prestazioni del sistema potrebbero essere ridotte. Le unioni incrementali bloccano temporaneamente le operazioni simultanee di UPDATE e DELETE e le operazioni di UPDATE e DELETE a loro volta bloccano temporaneamente le fasi di unione incrementale sulle tabelle interessate. Le operazioni di DDL, come ALTER TABLE, vengono bloccate fino al termine dell'operazione di vacuum con la tabella.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Vari modificatori per VACUUM controllano il modo in cui funziona. È possibile utilizzarli per personalizzare il funzionamento del vacuum in base alle esigenze attuali. Ad esempio, l'utilizzo di VACUUM RECLUSTER riduce l'operazione di vuoto non eseguendo un'operazione di fusione completa. Per ulteriori informazioni, consulta <a href="./r_VACUUM_command.html">VACUUM</a>.</p></div></div>
       
         <h2 id="vacuum-sort-threshold">Soglia di vacuum</h2>

         <p>Per impostazione predefinita, il comando VACUUM ignora la fase di ordinamento per ogni tabella dove più del 95% delle righe della tabella sono già ordinate. Ignorare la fase di ordinamento può migliorare significativamente le prestazioni di VACUUM. Per modificare la soglia di ordinamento predefinita per una singola tabella, includi il nome della tabella e il parametro TO <em>threshold</em> PERCENT quando esegui il comando VACUUM. </p>
       
         <h2 id="vacuum-types">Tipi di vacuum</h2>

         <p>Per ulteriori informazioni sui diversi tipi di vacuum, consultare <a href="./r_VACUUM_command.html">VACUUM</a>.</p>
   
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./c_check_last_analyze.html">Cronologia del comando ANALYZE</div><div id="next" class="next-link" accesskey="n" href="./vacuum-managing-vacuum-times.html">Gestione dei tempi di vacuum</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Reclaiming_storage_space202.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/t_Reclaiming_storage_space202.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>