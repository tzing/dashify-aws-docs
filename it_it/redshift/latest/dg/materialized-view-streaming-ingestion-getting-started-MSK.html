<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Nozioni di base sull'importazione dati in streaming da Amazon Managed Streaming per Apache Kafka - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="materialized-view-streaming-ingestion-getting-started-MSK" /><meta name="default_state" content="materialized-view-streaming-ingestion-getting-started-MSK" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" /><meta name="description" content="Scopri come configurare l'importazione dati in streaming da Amazon Managed Streaming per Apache Kafka." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guida per sviluppatori di database" /><meta name="abstract" content="Creare e gestire un data warehouse con Amazon Redshift, un servizio di data warehouse completamente gestito di livello aziendale e con capacità nell'ordine di più petabyte." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guida per sviluppatori di database" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guida per sviluppatori di database" /><meta id="panorama-serviceConsolePage" value="Nozioni di base sull'importazione dati in streaming da Amazon Managed Streaming per Apache Kafka" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Nozioni di base sull'importazione dati in streaming da Amazon Managed Streaming per Apache Kafka - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#materialized-view-streaming-ingestion-getting-started-MSK" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,sviluppatore,dati campione,database,sviluppatore di database,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per sviluppatori di database",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Creazione di viste materializzate in Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Importazione di dati in streaming",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Nozioni di base sull'importazione dati in streaming da Amazon Managed Streaming per Apache Kafka",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#materialized-view-streaming-ingestion-getting-started-MSK" target="_blank" rel="noopener noreferrer" title="Apri PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guida per sviluppatori di database</a></div><div id="page-toc-src"><a href="#materialized-view-streaming-ingestion-getting-started-MSK-setup">Configurazione di IAM ed esecuzione dell'importazione dati in streaming da Kafka</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="materialized-view-streaming-ingestion-getting-started-MSK">Nozioni di base sull'importazione dati in streaming da Amazon Managed Streaming per Apache Kafka</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p> Lo scopo dell'importazione dati in streaming di Amazon Redshift è semplificare il processo di importazione diretta di dati di flusso da un servizio di streaming in Amazon Redshift o in Amazon Redshift serverless. È compatibile con Amazon MSK, Amazon MSK serverless e Kinesis. L'importazione dati in streaming di Amazon Redshift elimina la necessità di gestire in via temporanea un flusso di dati Kinesis o un argomento Amazon MSK in Amazon S3 prima di importare i dati di flusso in Redshift.</p><p> A un livello tecnico, l'importazione dati in streaming sia da Amazon Kinesis Data Streams che da Amazon Managed Streaming per Apache Kafka consente l'importazione a bassa latenza e ad alta velocità dei dati di un flusso o di un argomento in una vista materializzata di Amazon Redshift. Dopo la configurazione, utilizzando l'aggiornamento della vista materializzata è possibile acquisire grandi volumi di dati. </p><p>Configura l'importazione dati in streaming di Amazon Redshift per Amazon MSK attenendoti alla seguente procedura:</p><div class="orderedlist">
                         
                         
                    <ol><li><p>Crea uno schema esterno mappato all'origine dati di flusso.</p></li><li><p>Crea una vista materializzata che faccia riferimento allo schema esterno.</p></li></ol></div><p>Devi disporre di un'origine Amazon MSK prima di configurare l'importazione dati in streaming di Amazon Redshift. Se non disponi di un'origine, segui le istruzioni riportate nella <a href="https://docs.aws.amazon.com/msk/latest/developerguide/getting-started.html">Guida introduttiva all'uso di Amazon MSK</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p><em>Importazione di dati in streaming e Amazon Redshift Serverless</em>: la procedura di configurazione descritta in questo argomento si applica sia ai cluster con provisioning di Amazon Redshift che ad Amazon Redshift Serverless. Per ulteriori informazioni, consulta <a href="./materialized-view-streaming-ingestion.html#materialized-view-streaming-ingestion-considerations">Considerazioni sull'importazione dati in streaming</a>.</p></div></div>
                        <h2 id="materialized-view-streaming-ingestion-getting-started-MSK-setup">Configurazione di IAM ed esecuzione dell'importazione dati in streaming da Kafka</h2>
                        <p>Supponendo che abbia a disposizione un cluster Amazon MSK, il primo passo è definire uno schema in Redshift con <code class="code">CREATE EXTERNAL SCHEMA</code> e fare riferimento all'argomento Kafka come origine dati. Quindi, definisci lo <code class="code">STREAM</code> in una vista materializzata per accedere ai dati nell'argomento. È possibile archiviare i record in formato <code class="code">SUPER</code> semi-strutturato o definire uno schema che comporta la conversione dei dati in tipi di dati Amazon Redshift. Quando si esegue una query sulla vista materializzata, i record restituiti sono una  point-in-time  visualizzazione dell'argomento.</p>
                        <div class="procedure"><ol><li><p>Crea un ruolo IAM con una policy di attendibilità che consenta al cluster di Amazon Redshift o ad Amazon Redshift serverless di assumere tale ruolo. Per informazioni su come configurare la policy di attendibilità per il ruolo IAM, consulta <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html">Autorizzazione di Amazon Redshift ad accedere ad altri servizi AWS per tuo conto</a>. Una volta creato, al ruolo dovrebbe essere applicata la seguente policy IAM, che fornisce l'autorizzazione per la comunicazione con il cluster Amazon MSK. La policy necessaria dipende dal metodo di autenticazione utilizzato nel cluster, se si utilizza Amazon MSK. Vedi <a href="https://docs.aws.amazon.com/msk/latest/developerguide/kafka_apis_iam.html">Autenticazione e autorizzazione per le API Apache Kafka</a> per i metodi di autenticazione disponibili in Amazon MSK.</p>
                                <p>Una policy IAM per Amazon MSK quando si utilizza l'accesso non autenticato:</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "VisualEditor0",
            "Effect": "Allow",
            "Action": [
                "kafka:GetBootstrapBrokers"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
                                <p>Una policy IAM per Amazon MSK quando si utilizza l'autenticazione IAM:</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "MSKIAMpolicy",
            "Effect": "Allow",
            "Action": [
                "kafka-cluster:ReadData",
                "kafka-cluster:DescribeTopic",
                "kafka-cluster:Connect"
            ],
            "Resource": [
                "arn:aws:kafka:*:0123456789:cluster/*/*",
                "arn:aws:kafka:*:0123456789:topic/*/*/*"
            ]
        },
        <span>{</span>
            "Sid": "MSKPolicy",
            "Effect": "Allow",
            "Action": [
                "kafka:GetBootstrapBrokers"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
                            </li><li><p> Controlla il tuo VPC e verifica che il cluster Amazon Redshift o Amazon Redshift serverless disponga di un percorso per raggiungere il cluster Amazon MSK. Le regole in entrata del gruppo di sicurezza per il cluster Amazon MSK dovrebbero consentire il gruppo di sicurezza del cluster Amazon Redshift o il gruppo di sicurezza del gruppo di lavoro Amazon Redshift serverless. Le porte specificate dipendono dal metodo di autenticazione utilizzato per il cluster, se utilizzi Amazon MSK. Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/msk/latest/developerguide/port-info.html">Informazioni sulle porte</a> e <a href="https://docs.aws.amazon.com/msk/latest/developerguide/aws-access.html">Accesso dall'interno di AWS ma dall'esterno del VPC</a>.</p>
                                
                                <p>Notare che l'autenticazione client con mTLS non è supportata per l'importazione di dati in streaming. Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-streaming-ingestion.html#materialized-view-streaming-ingestion-limitations">Limitazioni</a>.</p>
                            <p>La tabella seguente mostra le opzioni di configurazione aggiuntive da impostare per l'acquisizione di streaming da Amazon MSK:</p>
                                <div class="table-container"><div class="table-contents"><table id="w319aac21c47c15c15b5b3b6"><thead>
                                            <tr>
                                                <th>Configurazione di Amazon Redshift</th>
                                                <th>Configurazione di Amazon MQ</th>
                                                <th>Porta da aprire tra Redshift e Amazon MSK</th>
                                            </tr>
                                        </thead>
                                            <tr>
                                                <td tabindex="-1"> AUTHENTICATION NONE </td>
                                                <td tabindex="-1"> Trasporto TLS disabilitato </td>
                                                <td tabindex="-1">9092</td>
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> AUTHENTICATION NONE </td>
                                                <td tabindex="-1"> Trasporto TLS abilitato </td>
                                                <td tabindex="-1">9094</td>
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> AUTHENTICATION IAM </td>
                                                <td tabindex="-1"> IAM </td>
                                                <td tabindex="-1">9098/9198</td>
                                            </tr>
                                        </table></div></div>
                                <p>L'autenticazione Amazon Redshift è impostata nell'istruzione CREATE EXTERNAL SCHEMA.</p>
                                <p>Nel caso in cui il cluster Amazon MSK ha l'autenticazione Mutual Transport Layer Security (mTLS) abilitata, la configurazione di Amazon Redshift per l'utilizzo di AUTHENTICATION NONE indica ad Amazon Redshift di utilizzare la porta 9094 per l'accesso non autenticato. Tuttavia, poiché la porta viene utilizzata dall'autenticazione mTLS, questa operazione avrà esito negativo. Per questo motivo, consigliamo di passare a AUTHENTICATION IAM quando utilizzi mTLS.</p>    
                            </li><li><p>Abilita il routing VPC avanzato nel cluster Amazon Redshift. o nel gruppo di lavoro Amazon Redshift serverless. Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/enhanced-vpc-enabling-cluster.html">Abilitazione del routing VPC avanzato</a>.</p>
                                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Per recuperare l'URL del broker di bootstrap Amazon MSK, Amazon Redshift effettua una chiamata <a href="https://docs.aws.amazon.com/msk/1.0/apireference/clusters-clusterarn-bootstrap-brokers.html#GetBootstrapBrokers">GetBootstrapBrokers</a>API, utilizzando le autorizzazioni fornite dal ruolo IAM associato. Tieni presente che, affinché questa richiesta abbia esito positivo quando è abilitato il routing VPC avanzato, la sottorete del cluster con provisioning di Amazon Redshift o del gruppo di lavoro Serverless Amazon Redshift deve disporre di un gateway NAT o un gateway Internet. Gli ACL di rete e le regole in uscita dei gruppi di sicurezza per la suddetta sottorete devono inoltre consentire l'accesso agli endpoint del servizio API Amazon MSK. Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/general/latest/gr/msk.html">Amazon Managed Streaming for Apache Kafka endpoint and</a> quote.</p></div></div>
                            </li><li><p>In Amazon Redshift, crea uno schema esterno da mappare al cluster Amazon MSK. </p>
                                
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE EXTERNAL SCHEMA MySchema
FROM MSK
IAM_ROLE <span>{</span> default | 'iam-role-arn' }
AUTHENTICATION <span>{</span> none | iam }
CLUSTER_ARN 'msk-cluster-arn';</code></pre>
                                
                                <p>Nella clausola <code class="code">FROM</code>, Amazon MSK indica che lo schema mappa i dati dai servizi gestiti Kafka. </p> 
                                    <p> L'importazione di dati in streaming per Amazon MSK fornisce i seguenti tipi di autenticazione, quando crei lo schema esterno: </p>
                                    <div class="itemizedlist">
                                         
                                         
                                    <ul class="itemizedlist"><li class="listitem"><p><b>none</b>: specifica che non è presente alcuna procedura di autenticazione.</p></li><li class="listitem"><p><b>iam</b>: specifica l'autenticazione IAM. Quando scegli questa opzione, assicurati che il ruolo IAM disponga delle autorizzazioni per l'autenticazione IAM. </p></li></ul></div>
                                <p>Gli ulteriori metodi di autenticazione di Amazon MSK, come l'autenticazione TLS o nome utente e password, non sono supportati per l'importazione di dati in streaming. </p>
                                <p> <code class="code">CLUSTER_ARN</code> specifica il cluster Amazon MSK da cui stai eseguendo lo streaming.</p>       
                            </li><li>
                                <p>Crea una vista materializzata per consumare i dati dall'argomento. L'esempio seguente definisce una vista materializzata con i dati sorgente JSON. Nota: la vista seguente verifica che i dati siano di tipo JSON e utf8 validi. I nomi degli argomenti Kafka distinguono tra maiuscole e minuscole e possono contenere lettere maiuscole e minuscole. Per importare da argomenti con nomi in maiuscolo, puoi impostare la configurazione <code class="code">enable_case_sensitive_identifier</code> su <code class="code">true</code> a livello di cluster. Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_names.html">Nomi e identificatori</a> e <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_enable_case_sensitive_identifier.html">enable_case_sensitive_identifier</a>.</p>
                                
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">CREATE MATERIALIZED VIEW MyView AUTO REFRESH YES AS
SELECT kafka_partition, 
 kafka_offset, 
 kafka_timestamp_type, 
 kafka_timestamp, 
 kafka_key, 
 JSON_PARSE(kafka_value) as Data, 
 kafka_headers
FROM MySchema."mytopic"
WHERE CAN_JSON_PARSE(kafka_value);</code></pre>
                    <p>Per attivare l'aggiornamento automatico, usa <code class="code">AUTO REFRESH YES</code>. Il comportamento predefinito prevede l'aggiornamento manuale. </p>
                                <p>Le colonne di metadati includono quanto segue:</p>
                                <div class="table-container"><div class="table-contents"><table id="w319aac21c47c15c15b5b9b9"><thead>
                                            <tr>
                                                <th>Colonna di metadati</th>
                                                <th>Tipo di dati</th>
                                                <th>Descrizione</th>
                                            </tr>
                                        </thead>
                                            <tr>
                                                <td tabindex="-1"> kafka_partition </td>
                                                <td tabindex="-1"> bigint </td>
                                                <td tabindex="-1"> ID della partizione del record dall'argomento Kafka </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_offset </td>
                                                <td tabindex="-1"> bigint </td>
                                                <td tabindex="-1"> Offset del record nell'argomento di Kafka per una determinata partizione </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_timestamp_type </td>
                                                <td tabindex="-1"> char(1) </td>
                                                <td tabindex="-1">
                                                    <p>Tipo di timestamp utilizzato nel record Kafka:</p> 
                                                    <div class="itemizedlist">
                                                         
                                                         
                                                         
                                                    <ul class="itemizedlist"><li class="listitem"><p><em>C</em>: registra l'ora di creazione (CREATE_TIME) sul lato client</p></li><li class="listitem"><p><em>L</em>: registra l'ora di aggiunta (LOG_APPEND_TIME) sul lato server Kafka </p></li><li class="listitem"><p><em>U</em>: l'ora di creazione del record non è disponibile (NO_TIMESTAMP_TYPE)</p></li></ul></div>
                                                </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_timestamp </td>
                                                <td tabindex="-1"> timestamp without time zone </td>
                                                <td tabindex="-1"> Il formato del valore timestamp per il record </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_key </td>
                                                <td tabindex="-1"> varbyte </td>
                                                <td tabindex="-1"> La chiave del record Kafka </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_value </td>
                                                <td tabindex="-1"> varbyte </td>
                                                <td tabindex="-1"> Il record ricevuto da Kafka </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> kafka_headers </td>
                                                <td tabindex="-1"> super </td>
                                                <td tabindex="-1"> L'intestazione del record ricevuto da Kafka </td>
                                                
                                            </tr>
                                            <tr>
                                                <td tabindex="-1"> ora di aggiornamento </td>
                                                <td tabindex="-1"> timestamp without time zone </td>
                                                <td tabindex="-1"> L'ora di inizio dell'aggiornamento. </td>
                                            </tr>
                                        </table></div></div>
                                
                                <p>È importante notare che, se la definizione di vista materializzata include una logica aziendale, che in alcuni casi gli errori di analisi possono causare il blocco dell'ingestione dello streaming. Questo potrebbe portare alla necessità di eliminare e ricreare la vista materializzata. Per evitare ciò, ti consigliamo di mantenere la logica di analisi il più semplice possibile ed eseguire la maggior parte dei controlli della logica aziendale sui dati dopo l'immissione. L'esempio seguente mostra come è possibile utilizzare <a href="./CAN_JSON_PARSE.html">Funzione CAN_JSON_PARSE</a> per proteggersi dagli errori e assimilare con maggiore successo i dati.</p>
                                
                            </li><li><p>Aggiorna la vista per invocare Amazon Redshift ed eseguire la lettura dall'argomento e il caricamento dei dati nella vista materializzata.</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">REFRESH MATERIALIZED VIEW MyView;</code></pre>
                            </li><li><p>Esegui una query sui dati nella vista materializzata.</p>
                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from MyView;</code></pre>
                                <p>La vista materializzata viene aggiornata direttamente dall'argomento quando si esegue il comando <code class="code">REFRESH</code>. Viene creata una vista materializzata che corrisponde all'origine dati dell'argomento Kafka. È possibile eseguire filtri e aggregazioni sui dati nell'ambito della definizione della vista materializzata. La vista materializzata dell'importazione dati in streaming (vista materializzata di base) può fare riferimento a un solo argomento Kafka, ma è possibile creare viste materializzate aggiuntive che si uniscono alla vista materializzata di base e con altre viste materializzate o tabelle.</p>
                            </li></ol></div>
                        <p>Per ulteriori informazioni sulle limitazioni relative all'importazione dati in streaming, consulta <a href="./materialized-view-streaming-ingestion.html#materialized-view-streaming-ingestion-limitations">Limitazioni</a>.</p>
                    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./materialized-view-streaming-ingestion-getting-started.html">Nozioni di base sull'importazione dati in streaming da Amazon Kinesis Data Streams</div><div id="next" class="next-link" accesskey="n" href="./materialized-view-streaming-ingestion-example-station-data.html">Tutorial sull'importazione dati in streaming delle stazioni dei veicoli elettrici con Kinesis</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/materialized-view-streaming-ingestion-getting-started-MSK.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>