<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CREATE FUNCTION - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="r_CREATE_FUNCTION" /><meta name="default_state" content="r_CREATE_FUNCTION" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guida per sviluppatori di database" /><meta name="abstract" content="Creare e gestire un data warehouse con Amazon Redshift, un servizio di data warehouse completamente gestito di livello aziendale e con capacità nell'ordine di più petabyte." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_FUNCTION.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guida per sviluppatori di database" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guida per sviluppatori di database" /><meta id="panorama-serviceConsolePage" value="CREATE FUNCTION" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CREATE FUNCTION - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#r_CREATE_FUNCTION" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,sviluppatore,dati campione,database,sviluppatore di database,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per sviluppatori di database",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Documentazione di riferimento a SQL",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/cm_chap_SQLCommandRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Comandi SQL",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_SQL_commands.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "CREATE FUNCTION",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/c_SQL_commands.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#r_CREATE_FUNCTION" target="_blank" rel="noopener noreferrer" title="Apri PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guida per sviluppatori di database</a></div><div id="page-toc-src"><a href="#r_CREATE_FUNCTION-privileges">Privilegi richiesti</a><a href="#r_CREATE_FUNCTION-synopsis">Sintassi</a><a href="#r_CREATE_FUNCTION-parameters">Parametri</a><a href="#r_CREATE_FUNCTION-usage-notes">Note per l'utilizzo</a><a href="#r_CREATE_FUNCTION-examples">Esempi</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="r_CREATE_FUNCTION">CREATE FUNCTION</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p> </p><p>Crea una nuova funzione definita dall'utente (UDF) scalare utilizzando una clausola SQL SELECT o un programma Python.</p><p>Per maggiori informazioni ed esempi, consulta <a href="./user-defined-functions.html">Creazione di funzioni definite dall'utente</a>.</p>
         <h2 id="r_CREATE_FUNCTION-privileges">Privilegi richiesti</h2>
         <p>Di seguito sono elencati i privilegi richiesti per CREATE FUNCTION:</p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem"><p>Per CREATE FUNCTION:</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>L'utente con privilegi avanzati può utilizzare linguaggi attendibili e non attendibili per creare funzioni.</p></li><li class="listitem"><p>Gli utenti con il privilegio CREATE [ OR REPLACE ] FUNCTION possono creare funzioni con linguaggi attendibili.</p></li></ul></div>
            </li><li class="listitem"><p>Per REPLACE FUNCTION:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem"><p>Superuser</p></li><li class="listitem"><p>Utenti con il privilegio CREATE [ OR REPLACE ] FUNCTION</p></li><li class="listitem"><p>Proprietario della funzione</p></li></ul></div>
            </li></ul></div>
       
         <h2 id="r_CREATE_FUNCTION-synopsis">Sintassi</h2>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">CREATE [ OR REPLACE ] FUNCTION <em>f_function_name</em>
( <span>{</span> [<em>py_arg_name</em> <em> py_arg_data_type</em> |
<em>sql_arg_data_type</em> } [ , ... ] ] )
RETURNS <em>data_type</em>
<span>{</span> VOLATILE | STABLE | IMMUTABLE }
AS $$
  <span>{</span> <em>python_program</em> | <em>SELECT_clause</em> }
$$ LANGUAGE <span>{</span> plpythonu | sql }</code></pre>
       
         <h2 id="r_CREATE_FUNCTION-parameters">Parametri</h2>
         <div class="variablelist">
             
             
             
             
             
             
             
             
             
         <dl>
               <dt><span class="term">OR REPLACE</span></dt>
               <dd>
                  <p>Specifica che se una funzione con stesso nome e tipi di dati degli argomenti di input o <em>firma</em> è già esistente, la funzione esistente viene sostituita. Puoi sostituire una funzione solo con una nuova funzione che definisce un set identico di tipi di dati. Devi essere un utente con privilegi avanzati per sostituire una funzione.</p>
                  <p>Se definisci una funzione con lo stesso nome di una funzione esistente ma con una firma diversa, viene creata una nuova funzione. In altre parole, il nome della funzione è sottoposto a overload. Per ulteriori informazioni, consulta <a href="./udf-naming-udfs.html#udf-naming-overloading-function-names">Overload dei nomi delle funzioni</a>.</p>
               </dd>
             
               <dt><span class="term"> <em>f_function_name</em> </span></dt>
               <dd>
                  <p>Il nome della funzione. Se si specifica un nome schema (come <code class="code">myschema.myfunction</code>), la funzione viene creata utilizzando lo schema specificato. Altrimenti, la funzione viene creata nello schema corrente. Per ulteriori informazioni sui nomi validi, consultare <a href="./r_names.html">Nomi e identificatori</a>.</p>
                  <p>Consigliamo di assegnare un prefisso <code class="code">f_</code> ai nomi di tutte le funzioni definite dall'utente. Amazon Redshift riserva il prefisso <code class="code">f_</code> esclusivamente per le funzioni definite dall'utente e aggiungendo il prefisso <code class="code">f_</code> si evita che il nome della funzione entri in conflitto con altri nomi di funzioni SQL predefinite di Amazon Redshift correnti o future. Per ulteriori informazioni, consulta <a href="./udf-naming-udfs.html">Denominazione delle funzioni definite dall'utente</a>.</p>
                  <p>Puoi definire più di una funzione con lo stesso nome di funzione se i tipi di dati per gli argomenti di input sono diversi. In altre parole, il nome della funzione è sottoposto a overload. Per ulteriori informazioni, consulta <a href="./udf-naming-udfs.html#udf-naming-overloading-function-names">Overload dei nomi delle funzioni</a>.</p>
               </dd>
             
               <dt><span class="term"> <em>py_arg_name py_arg_data_type | sql_arg_data type</em> </span></dt>
               <dd>
                  <p>Per una UDF Python, un elenco di nomi di argomento di input e i tipi di dati. Per una UDF SQL, un elenco di tipi di dati senza nomi di argomento. In una UDF Python, fai riferimento agli argomenti usando i nomi di argomento. In una UDF SQL, fai riferimento agli argomenti che utilizzano $ 1, $ 2 e così via, in base all'ordine degli argomenti nell'elenco degli argomenti. </p>
                  <p>Per una UDF SQL, i tipi di dati di input e di restituzione possono essere qualsiasi tipo di dati Amazon Redshift standard. Per una UDF Python, il tipo di dati di input e restituiti può essere SMALLINT, INTEGER, BIGINT, DECIMAL, REAL, DOUBLE PRECISION, BOOLEAN, CHAR, VARCHAR, DATE o TIMESTAMP. Inoltre, le funzioni definite dall'utente (FDU) Python supportano il tipo di dati ANYELEMENT. Questo viene automaticamente convertito in un tipo di dati standard basato sul tipo di dati dell'argomento corrispondente fornito in fase di runtime. Se più argomenti utilizzano ANYELEMENT, verranno risolti tutti nello stesso tipo di dati in fase di runtime, in base al primo argomento ANYELEMENT dell'elenco. Per ulteriori informazioni, consultare <a href="./udf-data-types.html">Tipi di dati delle funzioni definite dall'utente Python</a> e <a href="./c_Supported_data_types.html">Tipi di dati</a>.</p>

                  <p>Puoi specificare un massimo di 32 argomenti.</p>
               </dd>
             
               <dt><span class="term"> RETURNS <em>data_type</em> </span></dt>
               <dd>
                  <p>Il tipo di dati del valore restituito dalla funzione. Il tipo di dati RETURNS può essere qualsiasi tipo di dati standard Amazon Redshift. Inoltre, le UDF Python possono utilizzare un tipo di dati ANYELEMENT, che viene automaticamente convertito in un tipo di dati standard basato sull'argomento fornito in fase di runtime. Se specifichi ANYELEMENT per il tipo di dati di restituzione, almeno un argomento deve utilizzare ANYELEMENT. Il tipo di dati di restituzione effettivo corrisponde al tipo di dati fornito per l'argomento ANYELEMENT quando viene chiamata la funzione. Per ulteriori informazioni, consulta <a href="./udf-data-types.html">Tipi di dati delle funzioni definite dall'utente Python</a>.</p>
               </dd>
             
               <dt><span class="term"> VOLATILE | STABLE | IMMUTABLE </span></dt>
               <dd>
                  <p>Informa l'ottimizzatore di query circa la volatilità della funzione. </p>
                  <p>Ottieni la migliore ottimizzazione se etichetti la funzione con la categoria di volatilità più rigida valida. Tuttavia, se la categoria è troppo rigida, c'è il rischio che l'ottimizzatore salti erroneamente alcune chiamate, determinando un set di risultati errato. In ordine di rigidità, a partire dalla meno rigida, le categorie di volatilità sono le seguenti:</p>
                  <div class="itemizedlist">
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>VOLATILE</p>
                     </li><li class="listitem">
                        <p>STABLE</p>
                     </li><li class="listitem">
                        <p>IMMUTABLE</p>
                     </li></ul></div>
                  
                  <p>VOLATILE</p>
                  <p>Dati gli stessi argomenti, la funzione può restituire risultati diversi su chiamate successive, anche per le righe in una singola istruzione. L'ottimizzatore di query non può fare alcuna ipotesi sul comportamento di una funzione volatile, quindi una query che utilizza una funzione volatile deve rivalutare la funzione per ogni riga di input.</p>
                  <p>STABLE</p>
                  <p>Dati gli stessi argomenti, la funzione è garantita per restituire gli stessi risultati per tutte le righe elaborate all'interno di una singola istruzione. La funzione può restituire risultati diversi se richiamati in istruzioni diverse. Questa categoria consente all'ottimizzatore di ottimizzare più chiamate della funzione all'interno di una singola istruzione in un'unica chiamata per l'istruzione. </p>
                  <p>IMMUTABLE</p>
                  <p>Dati gli stessi argomenti, la funzione restituisce sempre lo stesso risultato, per sempre. Quando una query chiama una funzione <code class="code">IMMUTABLE</code> con argomenti costanti, l'ottimizzatore prevaluta la funzione.</p>
               </dd>
             
               <dt><span class="term">AS $$ <em>statement</em> $$</span></dt>
               <dd>
                  <p> Un costrutto che racchiude l'istruzione da eseguire. Le parole chiavi letterali <code class="code">AS $$</code> e <code class="code">$$</code> sono obbligatorie. </p>
                  <p>Amazon Redshift richiede di racchiudere l'istruzione nella funzione utilizzando un formato chiamato dollar quoting. Qualsiasi elemento all'interno dell'inquadramento viene trasmesso esattamente com'è. Non è necessario impostare il carattere escape per i caratteri speciali, poiché il contenuto della stringa è scritto letteralmente. </p>
                  <p> Con <em>dollar quoting, </em>utilizzi una coppia di simboli del dollaro ($$) per indicare l'inizio e la fine dell'istruzione da eseguire, come mostrato nell'esempio seguente. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$$ <code class="replaceable">my statement</code> $$</code></pre>
                  <p> Facoltativamente, tra i segni del dollaro in ciascuna coppia, puoi specificare una stringa per aiutare a identificare l'istruzione. La stringa che utilizzi deve essere uguale sia all'inizio che alla fine delle coppie dell'inquadramento. Questa stringa effettua la distinzione tra lettere maiuscole e minuscole e segue gli stessi vincoli di un identificatore senza virgolette, tranne per il fatto che non può contenere segni di dollaro. Gli esempi seguenti utilizzano la stringa <code class="code">test</code>. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$test$ <code class="replaceable">my statement</code> $test$</code></pre>

                  <p>Per ulteriori informazioni sul dollar quoting, consultare la sezione relativa alle costanti di stringa racchiuse tra simboli del dollaro nell'argomento relativo alla <a href="https://www.postgresql.org/docs/9.4/static/sql-syntax-lexical.html" rel="noopener noreferrer" target="_blank"><span>struttura lessicale</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> della documentazione di PostgreSQL. </p>
               </dd>
             
               <dt><span class="term"><em>python_program</em> </span></dt>
               <dd>
                  <p>Programma Python eseguibile valido che restituisce un valore. L'istruzione che passi con la funzione deve essere conforme ai requisiti di indentazione specificati nella <a href="https://www.python.org/dev/peps/pep-0008/#indentation" rel="noopener noreferrer" target="_blank"><span>guida di stile per il codice Python</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> sul sito Web Python. Per ulteriori informazioni, consulta <a href="./udf-python-language-support.html">Supporto del linguaggio Python per funzioni definite dall'utente</a>.</p>
               </dd>
             
               <dt><span class="term"><em>SQL_clause</em> </span></dt>
               <dd>
                  <p>Clausola SQL SELECT.</p>
                  <p>La clausola SELECT non può includere nessuno dei seguenti tipi di clausole:</p>
                  <div class="itemizedlist">
                      
                      
                      
                      
                      
                      
                  <ul class="itemizedlist"><li class="listitem">
                        <p>FROM</p>
                     </li><li class="listitem">
                        <p>INTO</p>
                     </li><li class="listitem">
                        <p>WHERE</p>
                     </li><li class="listitem">
                        <p>GROUP BY</p>
                     </li><li class="listitem">
                        <p>ORDER BY</p>
                     </li><li class="listitem">
                        <p>LIMIT</p>
                     </li></ul></div>
               </dd>
             
               <dt><span class="term">LANGUAGE <span>{</span> plpythonu | sql } </span></dt>
               <dd>
                  <p>Per Python, specifica <code class="code">plpythonu</code>. Per SQL, specifica <code class="code">sql</code>. Devi disporre dell'autorizzazione per l'utilizzo nel linguaggio per SQL o plpythonu. Per ulteriori informazioni, consulta <a href="./udf-security-and-privileges.html">Sicurezza e privilegi dell'UDF</a>.</p>
               </dd>
            </dl></div>
       
         <h2 id="r_CREATE_FUNCTION-usage-notes">Note per l'utilizzo</h2>
          
            <h3 id="r_CREATE_FUNCTION-usage-notes-nested-functions">Funzioni nidificate</h3>
            <p>Puoi chiamare un'altra funzione definita dall'utente (UDF) SQL da una UDF SQL. La funzione nidificata deve esistere quando si esegue il comando CREATE FUNCTION. Amazon Redshift non tiene traccia delle dipendenze per le funzioni definite dall'utente, pertanto se si rimuove la funzione nidificata, Amazon Redshift non restituisce un errore. Tuttavia, l'UDF non riesce se la funzione nidificata non esiste. Ad esempio, la funzione seguente chiama la funzione <code class="code">f_sql_greater
               </code>nella clausola SELECT.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_sql_commission (float, float )
  returns float
stable
as $$
  select f_sql_greater ($1, $2)
$$ language sql;</code></pre>
          
          
            <h3 id="r_CREATE_FUNCTION-usage-notes-security-and-privileges">Sicurezza e privilegi dell'UDF</h3>
            <p>Per creare una UDF devi disporre dell'autorizzazione per l'utilizzo nel linguaggio per SQL o plpythonu (Python). Per impostazione predefinita, USAGE ON LANGUAGE SQL è concesso a PUBLIC. Tuttavia, devi concedere esplicitamente USAGE ON LANGUAGE PLPYTHONU a utenti o gruppi specifici. </p>
            <p>Per revocare l'utilizzo per SQL, revoca innanzitutto l'utilizzo da PUBLIC. Quindi concedi l'utilizzo su SQL solo a utenti o gruppi specifici autorizzati a creare UDF SQL. L'esempio seguente revoca l'utilizzo su SQL da PUBLIC, quindi concede l'utilizzo al gruppo di utenti <code class="code">udf_devs</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">revoke usage on language sql from PUBLIC;
grant usage on language sql to group udf_devs;</code></pre>
            <p>Per eseguire una UDF, devi disporre dell'autorizzazione di esecuzione per ciascuna funzione. Per impostazione predefinita, l'autorizzazione di esecuzione per le nuove UDF è concessa a PUBLIC. Per limitare l'utilizzo, revocare l'autorizzazione da PUBLIC per la funzione. Quindi concedi il privilegio a specifici individui o gruppi. </p>
            <p>L'esempio seguente revoca l'esecuzione sulla funzione <code class="code">f_py_greater</code> da PUBLIC quindi concede l'utilizzo al gruppo di utenti <code class="code">udf_devs</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">revoke execute on function f_py_greater(a float, b float) from PUBLIC;
grant execute on function f_py_greater(a float, b float) to group udf_devs;</code></pre>
            <p>Per impostazione predefinita gli utenti con privilegi avanzati hanno tutti i privilegi. </p>
            <p>Per ulteriori informazioni, consultare <a href="./r_GRANT.html">GRANT</a> e <a href="./r_REVOKE.html">REVOKE</a>.</p>
          
       
         <h2 id="r_CREATE_FUNCTION-examples">Esempi</h2>
          
            <h3 id="r_CREATE_FUNCTION-python-example">Esempio di funzione definita dall'utente Python scalare</h3>
            <p>L'esempio seguente crea una UDF Python che confronta due numeri interi e restituisce il valore più grande.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_py_greater (a float, b float)
  returns float
stable
as $$
  if a &gt; b:
    return a
  return b
$$ language plpythonu;</code></pre>
            <p>L'esempio seguente esegue una query sulla tabella SALES e chiama la nuova funzione <code class="code">f_py_greater</code> per restituire il valore di COMMISSION o il 20 percento di PRICEPAID, a seconda di quale valore è più grande.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select f_py_greater (commission, pricepaid*0.20) from sales;</code></pre>
          
          
            <h3 id="r_CREATE_FUNCTION-sql-example">Esempio di UDF SQL scalare</h3>
            <p>L'esempio seguente crea una funzione che confronta due numeri e restituisce il valore più grande. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">create function f_sql_greater (float, float)
  returns float
stable
as $$
  select case when $1 &gt; $2 then $1
    else $2
  end
$$ language sql;</code></pre>
            <p>La query seguente chiama la nuova funzione <code class="code">f_sql_greater</code> per eseguire una query sulla tabella SALES e restituisce il valore di COMMISSION o il 20 percento di PRICEPAID, a seconda di quale valore è più grande.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select f_sql_greater (commission, pricepaid*0.20) from sales;</code></pre>
          
         
      <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./r_CREATE_EXTERNAL_VIEW.html">CREATE EXTERNAL VIEW (anteprima)</div><div id="next" class="next-link" accesskey="n" href="./r_CREATE_GROUP.html">CREATE GROUP</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/r_CREATE_FUNCTION.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>