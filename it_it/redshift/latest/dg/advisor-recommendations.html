<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Suggerimenti di Amazon Redshift Advisor - Amazon Redshift</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="advisor-recommendations" /><meta name="default_state" content="advisor-recommendations" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" /><meta name="description" content="Amazon Redshift Advisor fornisce raccomandazioni su come ottimizzare il cluster Amazon Redshift per migliorare le prestazioni e ridurre i costi operativi. Puoi trovare delle spiegazioni su ogni raccomandazione nella console, come descritto precedentemente. Ulteriori dettagli sulle raccomandazioni sono forniti nelle sezioni seguenti." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Redshift" /><meta name="guide" content="Guida per sviluppatori di database" /><meta name="abstract" content="Creare e gestire un data warehouse con Amazon Redshift, un servizio di data warehouse completamente gestito di livello aziendale e con capacità nell'ordine di più petabyte." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/advisor-recommendations.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/redshift/latest/dg/advisor-recommendations.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/redshift/latest/dg/advisor-recommendations.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/advisor-recommendations.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/advisor-recommendations.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/advisor-recommendations.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/redshift/latest/dg/advisor-recommendations.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/advisor-recommendations.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/redshift/latest/dg/advisor-recommendations.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/advisor-recommendations.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/advisor-recommendations.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/advisor-recommendations.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/redshift/latest/dg/advisor-recommendations.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/redshift/latest/dg/advisor-recommendations.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/redshift/latest/dg/advisor-recommendations.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/redshift/latest/dg/advisor-recommendations.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/redshift/latest/dg/advisor-recommendations.html" hreflang="x-default" /><meta name="feedback-item" content="Redshift" /><meta name="this_doc_product" content="Amazon Redshift" /><meta name="this_doc_guide" content="Guida per sviluppatori di database" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'redshift'}"></script><meta id="panorama-serviceSubSection" value="Guida per sviluppatori di database" /><meta id="panorama-serviceConsolePage" value="Suggerimenti di Amazon Redshift Advisor" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Suggerimenti di Amazon Redshift Advisor - Amazon Redshift</title><meta name="pdf" content="redshift-dg.pdf#advisor-recommendations" /><meta name="rss" content="Dochistory.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=155" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html" /><meta name="keywords" content="Amazon Redshift,AWS Redshift,Redshift,Redshift Spectrum,cluster,data warehouse,sviluppatore,dati campione,database,sviluppatore di database,HLL" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/redshift/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per sviluppatori di database",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Best practice di Amazon Redshift",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/best-practices.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Utilizzo dei suggerimenti da Amazon Redshift Advisor",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Suggerimenti di Amazon Redshift Advisor",
        "item" : "https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="redshift-dg.pdf#advisor-recommendations" target="_blank" rel="noopener noreferrer" title="Apri PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/redshift/index.html">Amazon Redshift</a><a href="welcome.html">Guida per sviluppatori di database</a></div><div id="page-toc-src"><a href="#cluster-compress-s3-recommendation">Compressione degli oggetti file di Amazon S3 caricati mediante COPY</a><a href="#isolate-active-dbs-recommendation">Isolare molteplici database attivi</a><a href="#reallocate-wlm-recommendation">Riallocazione della memoria WLM</a><a href="#skip-compression-analysis-recommendation">Ignorare l'analisi di compressione durante l'esecuzione del comando COPY</a><a href="#split-s3-objects-recommendation">Suddivisione degli oggetti Amazon S3 caricati da COPY</a><a href="#update-table-statistics-recommendation">Aggiornamento delle statistiche delle tabelle</a><a href="#enable-sqa-recommendation">Abilitazione dell'accelerazione di query brevi</a><a href="#alter-diststyle-distkey-recommendation">Chiavi di distribuzione Alter nelle tabelle</a><a href="#alter-sortkey-recommendation">Modifica delle chiavi di ordinamento sulle tabelle</a><a href="#alter-compression-encoding-recommendation">Modifica delle codifiche di compressione sulle colonne</a><a href="#data-type-recommendation">Suggerimenti per i tipi di dati</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="advisor-recommendations">Suggerimenti di Amazon Redshift Advisor</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon Redshift Advisor fornisce raccomandazioni su come ottimizzare il cluster Amazon Redshift per migliorare le prestazioni e ridurre i costi operativi. Puoi trovare delle spiegazioni su ogni raccomandazione nella console, come descritto precedentemente. Ulteriori dettagli sulle raccomandazioni sono forniti nelle sezioni seguenti. </p><div class="highlights" id="inline-topiclist"><h6>Argomenti</h6><ul><li><a href="#cluster-compress-s3-recommendation">Compressione degli oggetti file di Amazon S3 caricati mediante COPY</a></li><li><a href="#isolate-active-dbs-recommendation">Isolare molteplici database attivi</a></li><li><a href="#reallocate-wlm-recommendation">Riallocazione della memoria WLM</a></li><li><a href="#skip-compression-analysis-recommendation">Ignorare l'analisi di compressione durante l'esecuzione del comando COPY</a></li><li><a href="#split-s3-objects-recommendation">Suddivisione degli oggetti Amazon S3 caricati da COPY</a></li><li><a href="#update-table-statistics-recommendation">Aggiornamento delle statistiche delle tabelle</a></li><li><a href="#enable-sqa-recommendation">Abilitazione dell'accelerazione di query brevi</a></li><li><a href="#alter-diststyle-distkey-recommendation">Chiavi di distribuzione Alter nelle tabelle</a></li><li><a href="#alter-sortkey-recommendation">Modifica delle chiavi di ordinamento sulle tabelle</a></li><li><a href="#alter-compression-encoding-recommendation">Modifica delle codifiche di compressione sulle colonne</a></li><li><a href="#data-type-recommendation">Suggerimenti per i tipi di dati</a></li></ul></div>
            <h2 id="cluster-compress-s3-recommendation">Compressione degli oggetti file di Amazon S3 caricati mediante COPY</h2>
            <p>Il comando COPY sfrutta i vantaggi dell'architettura MPP (Massively Parallel Processing) di Amazon Redshift per leggere e caricare dati in parallelo. Può leggere file da Amazon S3, tabelle DynamoDB e un output di testo da uno o più host remoti. </p>
            <p>In caso di caricamento di grandi quantità di dati, ti consigliamo vivamente di utilizzare il comando COPY per caricare file di dati compressi da S3. La compressione di set di dati di grandi dimensioni consente di risparmiare tempo durante il caricamento dei file in Amazon S3. COPY può anche accelerare il processo di caricamento decomprimendo i file man mano che vengono letti. </p>
            <p><b>Analisi</b></p>
            <p>Le prestazioni dei comandi COPY di lunga durata che caricano set di dati voluminosi non compressi spesso possono essere migliorate considerevolmente. L'analisi di Advisor identifica i comandi COPY che caricano set di dati voluminosi non compressi. In tal caso, Advisor genera un suggerimento per implementare la compressione sui file di origine in Amazon S3. </p>


            <p><b>Raccomandazione</b></p>
            <p>Accertati che ogni comando COPY che carica una quantità importante di dati o che viene eseguito per un lungo periodo di tempo, importi oggetti dati compressi da Amazon S3. Puoi identificare i comandi COPY che caricano set di dati non compressi voluminosi da Amazon S3 eseguendo il comando SQL seguente come utente con privilegi avanzati.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT
    wq.userid, query, exec_start_time AS starttime, COUNT(*) num_files,
    ROUND(MAX(wq.total_exec_time/1000000.0),2) execution_secs,
    ROUND(SUM(transfer_size)/(1024.0*1024.0),2) total_mb,
    SUBSTRING(querytxt,1,60) copy_sql
FROM stl_s3client s
JOIN stl_query q USING (query)
JOIN stl_wlm_query wq USING (query)
WHERE s.userid&gt;1 AND http_method = 'GET'
    AND POSITION('COPY ANALYZE' IN querytxt) = 0
    AND aborted = 0 AND final_state='Completed'
GROUP BY 1, 2, 3, 7
HAVING SUM(transfer_size) = SUM(data_size) 
AND SUM(transfer_size)/(1024*1024) &gt;= 5
ORDER BY 6 DESC, 5 DESC;         
          </code></pre>
            <p>Se i dati in gestione temporanea rimangono in Amazon S3 dopo il caricamento, evento comune nelle architetture dei data lake, l'archiviazione di questi dati in un formato compresso può ridurre i costi di archiviazione. </p>
            <p><b>Consigli di implementazione</b></p>

            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>La dimensione ideale dell'oggetto è di 1-128 MB dopo la compressione.</p>
               </li><li class="listitem">
                  <p>Puoi comprimere i file con il formato gzip, lzop o bzip2.</p>
               </li></ul></div>

          
            <h2 id="isolate-active-dbs-recommendation">Isolare molteplici database attivi</h2>
            <p>Come best practice, consigliamo di isolare i database in Amazon Redshift gli uni dagli altri. Le query sono eseguite in uno specifico database e non possono accedere ai dati da qualsiasi altro database sul cluster. Tuttavia, le query eseguite in tutti i database di un cluster condividono lo stesso spazio di storage di cluster sottostante e le stesse risorse di calcolo. Quando un singolo cluster contiene molteplici database attivi, i relativi carichi di lavoro sono spesso non correlati.</p>
            <p><b>Analisi</b></p>
            <p>L'analisi di Advisor esamina tutti i database sul cluster per verificare la presenza di carichi di lavoro attivi in esecuzione nello stesso momento. Se questi carichi sono presenti, Advisor genera un suggerimento per prendere in considerazione la migrazione dei database verso cluster Amazon Redshift distinti.</p>

            <p><b>Raccomandazione</b></p>
            <p>Prendi in considerazione lo spostamento di ogni database sottoposto a query a un cluster dedicato distinto. Utilizzando un cluster distinto è possibile ridurre i conflitti tra le risorse e migliorare le prestazioni delle query. Questo perché è possibile definire la dimensione di ogni cluster in funzione delle esigenze di archiviazione, costi e prestazioni di ogni carico di lavoro. Inoltre, i carichi di lavoro non correlati spesso utilizzano differenti configurazioni di gestione del carico di lavoro.</p>
            <p>Per identificare quali database sono attivamente utilizzati, puoi eseguire questo comando SQL come utente con privilegi avanzati.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT database,
  COUNT(*) as num_queries,
  AVG(DATEDIFF(sec,starttime,endtime)) avg_duration,
  MIN(starttime) as oldest_ts,
  MAX(endtime) as latest_ts
FROM stl_query
WHERE userid &gt; 1
GROUP BY database;            
         </code></pre>
            <p><b>Consigli di implementazione</b></p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Poiché un utente deve connettersi a ogni database in modo specifico e che le query possono accedere solo a un singolo database, lo spostamento dei database in cluster distinti ha un impatto minimo per gli utenti.</p>
               </li><li class="listitem">
                  <p>Per spostare un database, procedere come segue: </p>
                  <div class="orderedlist">
                      
                      
                      
                  <ol><li>
                        <p>Ripristinare temporaneamente uno snapshot del cluster corrente a un cluster della stessa dimensione.</p>
                     </li><li>
                        <p>Eliminare tutti i database dal nuovo cluster, ad eccezione del database target da spostare.</p>
                     </li><li>
                        <p>Ridimensionare il cluster su un tipo di nodo appropriato e prendere in considerazione il carico di lavoro del database.</p>
                     </li></ol></div>

               </li></ul></div>
          
            <h2 id="reallocate-wlm-recommendation">Riallocazione della memoria WLM</h2>
            <p>Amazon Redshift instrada le query degli utenti a <a href="./cm-c-defining-query-queues.html">Implementazione di WLM manuale</a> per l'elaborazione. Le modalità con cui le query vengono instradate alle code sono definite dalla gestione del carico di lavoro (WLM). Amazon Redshift assegna a ogni coda una parte della memoria disponibile del cluster. La memoria di una coda viene ripartita tra gli slot di query della coda. </p>
            <p>Quando una coda è configurata con più slot di quelli richiesti dal carico di lavoro, la memoria allocata a questi slot inutilizzati è sottoutilizzata. La riduzione degli slot configurati in funzione delle esigenze del carico di lavoro massimo consente di ridistribuire la memoria sottoutilizzata agli slot attivi e può quindi migliorare le prestazioni delle query. </p>
            <p><b>Analisi</b></p>
            <p>L'analisi di Advisor esamina le esigenze in materia di simultaneità del carico di lavoro per identificare le code di query con slot non utilizzati. Advisor genera una raccomandazione per ridurre il numero di slot in una coda quando trova quanto segue:</p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Una coda con slot che sono completamente inattivi durante l'analisi.</p>
               </li><li class="listitem">
                  <p>Una coda con più di quattro slot di cui almeno due sono inattivi durante l'analisi.</p>
               </li></ul></div>

            <p><b>Raccomandazione</b></p>
            <p>La riduzione degli slot configurati in funzione delle esigenze del carico di lavoro massimo consente di ridistribuire la memoria sottoutilizzata agli slot attivi. Prendi in considerazione la riduzione del numero di slot configurati per le code i cui slot non sono mai stati completamente utilizzati. Per identificare queste code, puoi comparare le esigenze orarie massime degli slot di ogni coda eseguendo il comando SQL seguente come utente con privilegi avanzati.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
WITH
 generate_dt_series AS (select sysdate - (n * interval '5 second') as dt from (select row_number() over () as n from stl_scan limit 17280)),
 apex AS (
     SELECT iq.dt, iq.service_class, iq.num_query_tasks, count(iq.slot_count) as service_class_queries, sum(iq.slot_count) as service_class_slots
     FROM
         (select gds.dt, wq.service_class, wscc.num_query_tasks, wq.slot_count
         FROM stl_wlm_query wq
         JOIN stv_wlm_service_class_config wscc ON (wscc.service_class = wq.service_class AND wscc.service_class &gt; 5)
         JOIN generate_dt_series gds ON (wq.service_class_start_time &lt;= gds.dt AND wq.service_class_end_time &gt; gds.dt)
         WHERE wq.userid &gt; 1 AND wq.service_class &gt; 5) iq
     GROUP BY iq.dt, iq.service_class, iq.num_query_tasks),
     maxes as (SELECT apex.service_class, trunc(apex.dt) as d, date_part(h,apex.dt) as dt_h, max(service_class_slots) max_service_class_slots
                     from apex group by apex.service_class, apex.dt, date_part(h,apex.dt))
SELECT apex.service_class - 5 AS queue, apex.service_class, apex.num_query_tasks AS max_wlm_concurrency, maxes.d AS day, maxes.dt_h || ':00 - ' || maxes.dt_h || ':59' as hour, MAX(apex.service_class_slots) as max_service_class_slots
FROM apex
JOIN maxes ON (apex.service_class = maxes.service_class AND apex.service_class_slots = maxes.max_service_class_slots)
GROUP BY  apex.service_class, apex.num_query_tasks, maxes.d, maxes.dt_h
ORDER BY apex.service_class, maxes.d, maxes.dt_h;            
         </code></pre>
            <p>La colonna <code class="code">max_service_class_slots</code> rappresenta il numero massimo di slot di query WLM nella coda di query per quell'ora. Se esistono delle code sottoutilizzate, implementare l'ottimizzazione della riduzione degli slot <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/managing-parameter-groups-console.html#parameter-group-modify">modificando un gruppo di parametri</a>, come descritto nella <em>Guida alla gestione di Amazon Redshift</em>.</p>
            <p><b>Consigli di implementazione</b></p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Se il tuo carico di lavoro è fortemente variabile in volume, assicurati che l'analisi catturi un periodo di utilizzazione massima. In caso contrario, esegui il comando SQL precedente ripetutamente per monitorare le esigenze massime in materia di simultaneità. </p>
               </li><li class="listitem">
                  <p>Per ulteriori dettagli sull'interpretazione dei risultati relativi alle query nel codice SQL precedente, consultare lo <a href="https://github.com/awslabs/amazon-redshift-utils/blob/master/src/AdminScripts/wlm_apex_hourly.sql" rel="noopener noreferrer" target="_blank"><span>script wlm_apex_hourly.sql</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> disponibile in GitHub.</p>
               </li></ul></div>

          
            <h2 id="skip-compression-analysis-recommendation">Ignorare l'analisi di compressione durante l'esecuzione del comando COPY</h2>
            <p>Quando i dati vengono caricati in una tabella vuota con codifica di compressione dichiarata con il comando COPY, Amazon Redshift applica la compressione dell'archiviazione. Questa ottimizzazione assicura che i dati nel cluster siano archiviati in modo efficace anche quando caricati da utenti finali. L'analisi richiesta per applicare la compressione può durare un certo tempo.</p>

            <p><b>Analisi</b></p>
            <p>L'analisi di Advisor cerca le operazioni COPY che sono state ritardate dall'analisi di compressione automatica. L'analisi determina le codifiche di compressione campionando i dati durante il caricamento degli stessi. Questo campionamento è simile a quello eseguito dal comando <a href="./r_ANALYZE_COMPRESSION.html">ANALYZE COMPRESSION</a>. </p>
            <p>Quando carichi dei dati nel quadro di un processo strutturato, come un batch ETL durante la notte, puoi definire la compressione in anticipo. Puoi anche ottimizzare le definizioni di tabella per ignorare in modo permanente questa fase senza alcun impatto negativo.</p>
            <p><b>Raccomandazione</b></p>
            <p>Per migliorare la reattività del comando COPY omettendo la fase di analisi della compressione, eseguire una delle due seguenti operazioni:</p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Utilizza il parametro di colonna <code class="code">ENCODE</code> durante la creazione delle tabelle che carichi mediante il comando COPY.</p>
               </li><li class="listitem">
                  <p>Disattiva totalmente la compressione indicando il parametro <code class="code">COMPUPDATE OFF</code> nel comando COPY.</p>
               </li></ul></div>
            <p>La migliore soluzione è generalmente di utilizzare la codifica di colonna durante la creazione di tabelle in quanto questo approccio consente di archiviare dati compressi sul disco. Puoi utilizzare il comando ANALYZE COMPRESSION per suggerire le codifiche di compressione, ma devi ricreare la tabella per applicare queste codifiche. Per automatizzare questo processo, è possibile utilizzare l'utility AWS <a href="https://github.com/awslabs/amazon-redshift-utils/tree/master/src/ColumnEncodingUtility" rel="noopener noreferrer" target="_blank"><span>ColumnEncodingUtility</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in GitHub. </p>
            <p>Per identificare le operazioni COPY recenti che hanno generato l'analisi di compressione automatica, esegui il comando SQL seguente.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
  WITH xids AS (
    SELECT xid FROM stl_query WHERE userid&gt;1 AND aborted=0 
    AND querytxt = 'analyze compression phase 1' GROUP BY xid
    INTERSECT SELECT xid FROM stl_commit_stats WHERE node=-1)
SELECT a.userid, a.query, a.xid, a.starttime, b.complyze_sec, 
    a.copy_sec, a.copy_sql
FROM (SELECT q.userid, q.query, q.xid, date_trunc('s',q.starttime) 
    starttime, substring(querytxt,1,100) as copy_sql, 
    ROUND(datediff(ms,starttime,endtime)::numeric / 1000.0, 2) copy_sec
    FROM stl_query q JOIN xids USING (xid)
    WHERE (querytxt ilike 'copy %from%' OR querytxt ilike '% copy %from%') 
    AND querytxt not like 'COPY ANALYZE %') a
LEFT JOIN (SELECT xid, 
    ROUND(sum(datediff(ms,starttime,endtime))::numeric / 1000.0,2) complyze_sec 
    FROM stl_query q JOIN xids USING (xid)
    WHERE (querytxt like 'COPY ANALYZE %' 
    OR querytxt like 'analyze compression phase %') 
    GROUP BY xid ) b ON a.xid = b.xid
WHERE b.complyze_sec IS NOT NULL ORDER BY a.copy_sql, a.starttime;
         </code></pre>
            <p><b>Consigli di implementazione</b></p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Assicurati che tutte le tabelle di dimensione significativa create durante i processi ETL (ad esempio, le tabelle di gestione temporanea e le tabelle temporanee) dichiarino una codifica di compressione per tutte le colonne ad eccezione della prima chiave di ordinamento.</p>
               </li><li class="listitem">
                  <p>Stima la dimensione della tabella in corso di caricamento per tutta la sua durata di vita per ogni comando COPY identificato dal comando SQL precedente. Se ritieni che la tabella resterà estremamente piccola, disattiva completamente la compressione con il parametro <code class="code">COMPUPDATE OFF</code>. In caso contrario, crea la tabella con una compressione esplicita prima di caricarla con il comando COPY.</p>
               </li></ul></div>
          
            <h2 id="split-s3-objects-recommendation">Suddivisione degli oggetti Amazon S3 caricati da COPY</h2>
            <p>Il comando COPY sfrutta i vantaggi dell'architettura MPP (Massively Parallel Processing) di Amazon Redshift per leggere e caricare dati da file su Amazon S3. Il comando COPY consente di caricare dati in parallelo da più file, suddividendo il carico di lavoro tra i nodi del cluster. Per ottenere un throughput ottimale, ti consigliamo vivamente di suddividere i dati in più file per beneficiare dall'elaborazione parallela. </p>
            <p><b>Analisi</b></p>
            <p>L'analisi di Advisor identifica i comandi COPY che caricano grandi  set di dati contenuti in un piccolo numero di file gestiti temporaneamente in Amazon S3. Le prestazioni dei comandi COPY di lunga durata che caricano set di dati voluminosi da alcuni file possono spesso essere migliorate considerevolmente. Quando Advisor rileva che l'esecuzione di questi comandi COPY richiede parecchio tempo, crea un suggerimento per aumentare il parallelismo suddividendo i dati in ulteriori file in Amazon S3. </p>
            <p><b>Raccomandazione</b></p>
            <p>In questo caso, consigliamo le seguenti operazioni, elencate in ordine di priorità:</p>
            <div class="orderedlist">
                
                
                
            <ol><li>
                  <p>Ottimizzazione dei comandi COPY che caricano un numero di file inferiore al numero di nodi cluster.</p>
               </li><li>
                  <p>Ottimizzazione dei comandi COPY che caricano un numero di file inferiore al numero di sezioni di cluster. </p>
               </li><li>
                  <p>Ottimizzazione dei comandi COPY dove il numero di file non è un multiplo del numero di sezioni nel cluster.</p>
               </li></ol></div>
            <p>Determinati comandi COPY caricano una notevole quantità di dati o hanno un tempo di esecuzione piuttosto lungo. Per questi comandi consigliamo di caricare un numero di oggetti dati da Amazon S3 equivalente a un multiplo del numero di sezioni nel cluster. Per identificare il numero di oggetti S3 che ogni comando COPY ha caricato, eseguire il codice SQL seguente come utente con privilegi avanzati. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT
    query, COUNT(*) num_files,
    ROUND(MAX(wq.total_exec_time/1000000.0),2) execution_secs,
    ROUND(SUM(transfer_size)/(1024.0*1024.0),2) total_mb,
    SUBSTRING(querytxt,1,60) copy_sql
FROM stl_s3client s
JOIN stl_query q USING (query)
JOIN stl_wlm_query wq USING (query)
WHERE s.userid&gt;1 AND http_method = 'GET'
    AND POSITION('COPY ANALYZE' IN querytxt) = 0
    AND aborted = 0 AND final_state='Completed'
GROUP BY query, querytxt
HAVING (SUM(transfer_size)/(1024*1024))/COUNT(*) &gt;= 2
ORDER BY CASE
WHEN COUNT(*) &lt; (SELECT max(node)+1 FROM stv_slices) THEN 1
WHEN COUNT(*) &lt; (SELECT COUNT(*) FROM stv_slices WHERE node=0) THEN 2
ELSE 2+((COUNT(*) % (SELECT COUNT(*) FROM stv_slices))/(SELECT COUNT(*)::DECIMAL FROM stv_slices))
END, (SUM(transfer_size)/(1024.0*1024.0))/COUNT(*) DESC;   
            
         </code></pre>
            <p><b>Consigli di implementazione</b></p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Il numero di sezioni in un nodo dipende dalla dimensione dei nodi del cluster. Per ulteriori informazioni sul numero di sezioni nei vari tipi di nodo, consulta <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/working-with-clusters.html#rs-about-clusters-and-nodes">Cluster e nodi in Amazon Redshift</a> nella <em>Guida alla gestione di Amazon Redshift</em>. </p>
               </li><li class="listitem">
                  <p>È possibile caricare più file specificando un prefisso comune o chiave di prefisso, per l'insieme o elencando in modo esplicito i file in un file manifest. Per ulteriori informazioni sul caricamento di file, consultare <a href="./t_splitting-data-files.html">Caricamento dei dati da file compressi e non compressi</a>.</p>
               </li><li class="listitem">
                  <p>Amazon Redshift non prende in considerazione la dimensione di file nella suddivisione del carico di lavoro. Suddividi i file di dati di caricamento di modo che siano all'incirca della stessa dimensione, tra 1 MB e 1 GB dopo la compressione. </p>
               </li></ul></div>
          
            <h2 id="update-table-statistics-recommendation">Aggiornamento delle statistiche delle tabelle</h2>
            <p>Amazon Redshift utilizza un ottimizzatore di query basato sui costi per scegliere il piano di esecuzione ottimale per le query. Le stime dei costi sono basate sulle statistiche delle tabelle raccolte utilizzando il comando ANALYZE. Quando le statistiche di una tabella risultano non aggiornate o mancanti, il database potrebbe scegliere un piano meno efficiente per l'esecuzione delle query, soprattutto per quelle complesse. Disporre di statistiche aggiornate consente di eseguire query complesse nel minor tempo possibile. </p>
            <p><b>Analisi</b></p>
            <p>L'analisi di Advisor tiene traccia delle tabelle le cui statistiche sono obsolete o del tutto mancanti. Esamina i metadati di accesso alle tabelle che sono associati a query complesse. Se nelle tabelle a cui si accede di frequente con modelli complessi mancano delle statistiche, Advisor crea una raccomandazione <b>critica</b> per eseguire ANALYZE. Se le tabelle a cui si accede di frequente con modelli complessi presentano statistiche non aggiornate, Advisor crea una raccomandazione <b>suggerita</b> per eseguire ANALYZE.</p>

            <p><b>Raccomandazione</b></p>
            <p>Ogni volta che il contenuto delle tabelle cambia, aggiorna le statiche con ANALYZE. Consigliamo di eseguire ANALYZE ogni volta che un numero importante di nuove righe di dati sono caricate in una tabella esistente con il comando COPY o INSERT. Inoltre, consigliamo di eseguire ANALYZE ogni volta che un numero importante di nuove righe vengono modificate in una tabella esistente con il comando UPDATE o DELETE. Per identificare le tabelle con statistiche mancanti o non aggiornate, esegui il comando SQL seguente come utente con privilegi avanzati. I risultati sono ordinati dalla tabella più grande a quella più piccola. </p>
            <p>Per identificare le tabelle con statistiche mancanti o non aggiornate, esegui il comando SQL seguente come utente con privilegi avanzati. I risultati sono ordinati dalla tabella più grande a quella più piccola.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
SELECT
   ti.schema||'.'||ti."table" tablename,
   ti.size table_size_mb,
   ti.stats_off statistics_accuracy
 FROM svv_table_info ti
 WHERE ti.stats_off &gt; 5.00
 ORDER BY ti.size DESC;          
         </code></pre>
            <p><b>Consigli di implementazione</b></p>
            
                  <p>Per impostazione predefinita, la soglia di ANALYZE è impostata su 10 percento. Questa impostazione predefinita significa che il comando ANALYZE salta una determinata tabella se la percentuale di righe che sono state modificate dall'ultimo ANALYZE è inferiore al 10 percento. Di conseguenza, potresti scegliere di generare comandi ANALYZE alla fine di ogni processo ETL. Con questo approccio, ANALYZE viene spesso ignorato ma se ne assicura l'esecuzione quando necessario.</p>
              
                  <p>Le statistiche di ANALYZE hanno un impatto maggiore sulle colonne utilizzate nei join (ad esempio, <code class="code">JOIN tbl_a ON col_b</code>) o come predicati (ad esempio, <code class="code">WHERE col_b = 'xyz'</code>). Per impostazione predefinita, ANALYZE raccoglie statistiche per tutte le colonne nella tabella specificata. Se necessario, puoi ridurre il tempo di esecuzione di ANALYZE eseguendo questo comando solo per le colonne su cui ha il maggiore impatto. Puoi utilizzare i comandi SQL seguenti per identificare le colonne utilizzate come predicati. È possibile anche lasciare a Amazon Redshift la scelta delle colonne da analizzare specificando <code class="code">ANALYZE PREDICATE COLUMNS</code>. </p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">WITH predicate_column_info as (
SELECT ns.nspname AS schema_name, c.relname AS table_name, a.attnum as col_num,  a.attname as col_name,
        CASE
            WHEN 10002 = s.stakind1 THEN array_to_string(stavalues1, '||') 
            WHEN 10002 = s.stakind2 THEN array_to_string(stavalues2, '||')
            WHEN 10002 = s.stakind3 THEN array_to_string(stavalues3, '||')
            WHEN 10002 = s.stakind4 THEN array_to_string(stavalues4, '||')
            ELSE NULL::varchar
        END AS pred_ts
   FROM pg_statistic s
   JOIN pg_class c ON c.oid = s.starelid
   JOIN pg_namespace ns ON c.relnamespace = ns.oid
   JOIN pg_attribute a ON c.oid = a.attrelid AND a.attnum = s.staattnum)
SELECT schema_name, table_name, col_num, col_name,
       pred_ts NOT LIKE '2000-01-01%' AS is_predicate,
       CASE WHEN pred_ts NOT LIKE '2000-01-01%' THEN (split_part(pred_ts, '||',1))::timestamp ELSE NULL::timestamp END as first_predicate_use,
       CASE WHEN pred_ts NOT LIKE '%||2000-01-01%' THEN (split_part(pred_ts, '||',2))::timestamp ELSE NULL::timestamp END as last_analyze
FROM predicate_column_info;</code></pre>
            <p>Per ulteriori informazioni, consultare <a href="./t_Analyzing_tables.html">Analisi delle tabelle</a>.</p>
          
            <h2 id="enable-sqa-recommendation">Abilitazione dell'accelerazione di query brevi</h2>
            <p>L'accelerazione di query brevi (SQA) rende prioritarie le query a esecuzione breve rispetto a quelle a esecuzione prolungata. L'accelerazione di query brevi (SQA, Short Query Acceleration) esegue query a esecuzione breve in uno spazio dedicato, in modo che le query SQA non siano costrette ad attendere in coda dietro query più lunghe. SQA assegna la priorità solo alle query che hanno un'esecuzione breve e si trovano in una coda definita dall'utente. Con SQA, le query a esecuzione breve iniziano l'esecuzione più rapidamente e gli utenti visualizzano i risultati prima. </p>
            <p>Se abiliti SQA, puoi ridurre o eliminare le code di gestione del carico di lavoro (WLM) dedicate all'esecuzione di query brevi. Inoltre, le query a esecuzione prolungata non devono contendere gli slot con le query brevi in una coda, quindi puoi configurare le code WLM per utilizzare un numero inferiore di slot di query. Quando usi una simultaneità inferiore, il throughput delle query aumenta e le prestazioni generali del sistema risultano migliorate per la maggior parte dei carichi di lavoro. Per ulteriori informazioni, consultare <a href="./wlm-short-query-acceleration.html">Utilizzo dall'accelerazione di query brevi</a>. </p>
            <p><b>Analisi</b></p>
            <p>Advisor controlla i modelli del carico di lavoro e segnala il numero di query recenti in cui SQA ridurrebbe la latenza e il tempo di coda giornaliero per le query idonee per SQA.</p>
            <p><b>Raccomandazione</b></p>
            <p>Modifica della configurazione WLM per attivare SQA. Amazon Redshift utilizza un algoritmo di machine learning per analizzare ciascuna query idonea. Le previsioni migliorano man mano che SQA assimila i tuoi modelli di query. Per ulteriori informazioni, consultare <a href="https://docs.aws.amazon.com/redshift/latest/mgmt/workload-mgmt-config.html">Configurazione della gestione del carico di lavoro</a>. </p>
            <p>Quando attivi SQA, WLM imposta il tempo di esecuzione massimo per le query brevi su dinamico per impostazione predefinita. Ti consigliamo di mantenere le impostazioni dinamiche per il tempo massimo di esecuzione SQA. </p>
            <p><b>Consigli di implementazione</b></p>
            <p>Per controllare se SQA è attivato, esegui la seguente query. Se la query restituisce una riga, SQA è attivato.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="">select * from stv_wlm_service_class_config 
where service_class = 14;</code></pre>
            <p>Per ulteriori informazioni, consulta <a href="./wlm-short-query-acceleration.html#wlm-monitoring-sqa">Monitoraggio dell'accelerazione di query brevi (SQA, Short Query Acceleration)</a>. </p>
          
            <h2 id="alter-diststyle-distkey-recommendation">Chiavi di distribuzione Alter nelle tabelle</h2>
            <p>Amazon Redshift distribuisce righe di tabelle nel cluster in base allo stile di distribuzione della tabella. Le tabelle con la distribuzione KEY richiedono una colonna come chiave di distribuzione (DISTKEY). La riga di una tabella viene assegnata alla sezione del nodo di un cluster in base al valore della colonna DISTKEY. </p>
            <p>Una DISTKEY appropriata posiziona un numero simile di righe su ogni sezione di nodo a cui si fa riferimento di frequente nelle condizioni congiunte. Una condizione congiunta ottimizzata si presenta quando le tabelle vengono unite nelle colonne DISTKEY, accelerando le performance delle query.</p>
            
            <p><b>Analisi</b></p>
            <p>Il consulente analizza il carico di lavoro del cluster per individuare la chiave di distribuzione più appropriata per le tabelle che possono trarre vantaggi significativi da uno stile di distribuzione KEY. </p>
            
            <p><b>Raccomandazione</b></p>
            <p>Il consulente fornisce istruzioni <a href="./r_ALTER_TABLE.html">ALTER TABLE</a> che alterano il DISTSTYLE e il DISTKEY di una tabella in base alla sua analisi. Per ottenere un vantaggio significativo i termini di performance, devono essere implementate tutte le istruzioni SQL all'interno di un gruppo di raccomandazioni. </p>
            <p>La ridistribuzione di una tabella di grandi dimensioni con ALTER TABLE consuma risorse dei cluster e richiede un blocco temporaneo della tabella in momenti diversi. Implementare ogni gruppo di raccomandazioni quando il carico di lavoro dell'altro cluster è leggero. Per maggiori dettagli sull'ottimizzazione delle proprietà di distribuzione delle tabelle, consultare <a href="https://aws.amazon.com/blogs/big-data/amazon-redshift-engineerings-advanced-table-design-playbook-distribution-styles-and-distribution-keys/" rel="noopener noreferrer" target="_blank"><span>Playbook di progettazione avanzata delle tabelle di engineering di Amazon Redshift: chiavi e stili di distribuzione</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>        
            <p>Per ulteriori informazioni su ALTER DISTSYLE e DISTKEY, consultare <a href="./r_ALTER_TABLE.html">ALTER TABLE</a>. </p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Se non viene visualizzato un suggerimento, ciò non significa necessariamente che gli stili di distribuzione correnti siano i più appropriati. Advisor non fornisce consigli quando non ci sono dati sufficienti o quando il vantaggio atteso della ridistribuzione è limitato. </p><p>Le raccomandazioni del consulente si applicano a una tabella particolare e non necessariamente si applicano a una tabella che contiene una colonna con lo stesso nome. Le tabelle che condividono il nome di una colonna possono avere caratteristiche diverse relative a tali colonne, a meno che i dati all'interno della tabella siano gli stessi. </p><p>Se sono presenti raccomandazioni per tabelle provvisorie create o rilasciate da processi ETL, modificare tali processi per utilizzare le chiavi di distribuzione consigliate dal consulente. </p></div></div>

          
            <h2 id="alter-sortkey-recommendation">Modifica delle chiavi di ordinamento sulle tabelle</h2>
            <p>Amazon Redshift ordina le righe della tabella in base alla <a href="./t_Sorting_data.html">chiave di ordinamento</a> della tabella. L'ordinamento delle righe della tabella si basa sui valori delle colonne chiave di ordinamento. </p>
            <p>L'ordinamento di una tabella su una chiave di ordinamento appropriata può accelerare le prestazioni delle query, in particolare quelle con predicati limitati dall'intervallo, richiedendo meno blocchi di tabella da leggere dal disco. </p>
            
            <p><b>Analisi</b></p>
            <p>Advisor analizza il carico di lavoro del cluster per diversi giorni per identificare una chiave di ordinamento utile per le tabelle. </p>
            
            <p><b>Raccomandazione</b></p>
            <p> Advisor fornisce due gruppi di istruzioni ALTER TABLE che modificano la chiave di ordinamento di una tabella in base alla sua analisi: </p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem"><p>Istruzioni che modificano una tabella che attualmente non dispone di una chiave di ordinamento per aggiungere una chiave di ordinamento COMPOUND.</p></li><li class="listitem"><p>Istruzioni che modificano una chiave di ordinamento da INTERLEAVED a COMPOUND o nessuna chiave di ordinamento.</p>
                  <p>L'uso di chiavi dell'ordinamento composto riduce notevolmente l'impegno necessario per la manutenzione. Le tabelle con chiavi di ordinamento composto non richiedono le costose operazioni VACUUM REINDEX necessarie per gli ordinamenti interlacciati. In pratica, le chiavi di ordinamento composto sono più efficaci delle chiavi di ordinamento interlacciato per la maggior parte dei carichi di lavoro Amazon Redshift. Tuttavia, se una tabella è piccola, è più efficiente non avere una chiave di ordinamento per evitare il sovraccarico di archiviazione delle stesse.</p></li></ul></div>
            
            <p>Quando si ordina una tabella di grandi dimensioni con ALTER TABLE, le risorse del cluster vengono consumate e i blocchi di tabella sono necessari in momenti diversi. Implementare ogni raccomandazione quando il carico di lavoro di un cluster è moderato. Per maggiori dettagli sull'ottimizzazione delle configurazioni delle chiavi di ordinamento della tabella, consultare <a href="https://aws.amazon.com/blogs/big-data/amazon-redshift-engineerings-advanced-table-design-playbook-compound-and-interleaved-sort-keys/" rel="noopener noreferrer" target="_blank"><span>Playbook di progettazione avanzata delle tabelle di engineering di Amazon Redshift: chiavi di ordinamento composto e interlacciato</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>        
            <p>Per ulteriori informazioni su ALTER SORTKEY, consultare <a href="./r_ALTER_TABLE.html">ALTER TABLE</a>. </p>
            
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Se non viene visualizzato un suggerimento per una tabella, ciò non significa necessariamente che la configurazione corrente sia la migliore. Advisor non fornisce consigli quando non ci sono dati sufficienti o quando il vantaggio atteso dell'ordinamento è limitato. </p><p>Le raccomandazioni del consulente si applicano a una tabella particolare e non necessariamente si applicano a una tabella che contiene una colonna con lo stesso nome e lo stesso tipo di dati. Le tabelle che condividono i nomi delle colonne possono avere suggerimenti diversi in base ai dati nelle tabelle e al carico di lavoro. </p></div></div>
            
          
            <h2 id="alter-compression-encoding-recommendation">Modifica delle codifiche di compressione sulle colonne</h2>
            <p>La compressione è un'operazione a livello di colonna che riduce la dimensione dei dati quando vengono archiviati. La compressione viene utilizzata in Amazon Redshift per risparmiare spazio di archiviazione e migliorare le prestazioni delle query riducendo la quantità di I/O del disco. Consigliamo una codifica di compressione ottimale per ogni colonna in base al tipo di dati e ai modelli di query. Grazie alla compressione ottimale, le query possono essere eseguite in modo più efficiente e il database può occupare uno spazio di archiviazione minimo. </p>
            
            <p><b>Analisi</b></p>
            <p>Advisor esegue continuamente l'analisi del carico di lavoro e dello schema del database del cluster per identificare la codifica di compressione ottimale per ogni colonna della tabella.</p>
            
            <p><b>Raccomandazione</b></p>
            <p>Advisor fornisce istruzioni ALTER TABLE che modificano la codifica della compressione di colonne particolari in base alla sua analisi. </p>
            <p>La modifica delle codifiche di compressione delle colonne con <a href="./r_ALTER_TABLE.html">ALTER TABLE</a> utilizza risorse del cluster e richiede un blocco della tabella in momenti diversi. È consigliabile implementare suggerimenti quando il carico di lavoro del cluster è leggero. </p>
            <p>Come riferimento, <a href="./r_ALTER_TABLE_examples_basic.html">Esempi di ALTER TABLE</a> mostra diverse istruzioni che modificano la codifica per una colonna.</p>        
            
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Advisor non fornisce suggerimenti quando non ci sono dati sufficienti o il vantaggio previsto della modifica della codifica è limitato.</p></div></div>
            
          
            <h2 id="data-type-recommendation">Suggerimenti per i tipi di dati</h2>
            <p>Amazon Redshift dispone di una libreria di tipi di dati SQL per diversi casi d'uso. Questi includono tipi di numeri interi come <code class="code">INT</code> e tipi per memorizzare caratteri, come <code class="code">VARCHAR</code>. Inoltre, Redshift memorizza i tipi in modo ottimizzato per fornire accesso rapido e buone prestazioni di query. Inoltre, Redshift fornisce funzioni per tipi specifici che possono essere utilizzate per formattare o eseguire calcoli sui risultati delle query. </p>
            
            <p><b>Analisi</b></p>
            <p>Advisor esegue continuamente l'analisi del carico di lavoro e dello schema del database del cluster per identificare le colonne che possono trarre vantaggio in modo significativo dalla modifica del tipo di dati.</p>
            
            <p><b>Raccomandazione</b></p>
            
            <p> Advisor fornisce un'istruzione <code class="code">ALTER TABLE</code> che aggiunge una nuova colonna con il tipo di dati suggerito. Una istruzione <code class="code">UPDATE</code> di accompagnamento copia i dati dalla colonna esistente nella nuova colonna. Dopo aver creato la nuova colonna e caricato i dati, modificare le query e gli script di importazione per accedere alla nuova colonna. Quindi sfruttare le funzionalità e le funzioni specializzate per il nuovo tipo di dati, disponibili in <a href="./c_SQL_functions.html">Informazioni di riferimento sulle funzioni SQL</a>. </p>
            <p> La copia dei dati esistenti nella nuova colonna può richiedere del tempo. Si consiglia di implementare ogni suggerimento di Advisor quando il carico di lavoro del cluster è leggero. Fare riferimento all'elenco dei tipi di dati disponibili all'indirizzo <a href="./c_Supported_data_types.html">Tipi di dati</a>. </p>
            <p> Advisor non fornisce suggerimenti quando non ci sono dati sufficienti o se il vantaggio previsto della modifica della codifica del tipo di dati è limitato. </p>        
            
         <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access-advisor.html">Accesso ad Advisor</div><div id="next" class="next-link" accesskey="n" href="./tutorials-redshift.html">Tutorial</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Redshift&amp;topic_url=https://docs.aws.amazon.com/it_it/redshift/latest/dg/advisor-recommendations.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>