<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Creazione delle condizioni di attesa in un modello - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-cfn-waitcondition" /><meta name="default_state" content="using-cfn-waitcondition" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="description" content="Creare una condizione di attesa di un modello per coordinare la creazione delle risorse dello stack o per monitorare l'avanzamento di un processo di configurazione." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guida per l'utente" /><meta name="abstract" content="Crea e gestisci le implementazioni AWS dell'infrastruttura in modo prevedibile e ripetuto utilizzando questa guida per AWS CloudFormation l'utente." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guida per l'utente" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guida per l'utente" /><meta id="panorama-serviceConsolePage" value="Creazione delle condizioni di attesa in un modello" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Creazione delle condizioni di attesa in un modello - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisioning delle risorse,configurazione delle risorse,gestione dell'infrastruttura,CloudFormer,CloudFormation pila,CloudFormation modello,set di modifiche" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per l'utente",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Utilizzo dei modelli AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Procedure guidate",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/CHAP_Using.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Creazione delle condizioni di attesa in un modello",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/CHAP_Using.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guida per l'utente</a></div><div id="page-toc-src"><a href="#using-cfn-waitconditionhandle">Utilizzo di un handle di una condizione di attesa</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="using-cfn-waitcondition">Creazione delle condizioni di attesa in un modello</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Per le risorse Amazon EC2 e Auto Scaling, consigliamo di utilizzare  CreationPolicy  un attributo anziché condizioni di attesa. Aggiungi un  CreationPolicy  attributo a tali risorse e utilizza lo script di supporto cfn-signal per segnalare quando il processo di creazione di un'istanza è stato completato con successo.</p><p>Per ulteriori informazioni, consulta <a href="./aws-attribute-creationpolicy.html">Attributo CreationPolicy</a> o <a href="./deploying.applications.html">Distribuzione di applicazioni su Amazon EC2 con AWS CloudFormation</a>.</p></div></div><p>Utilizzando la risorsa <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-waitconditionhandle.html"><code class="code">AWS::CloudFormation::WaitConditionHandle</code></a> e l'attributo <a href="./aws-attribute-creationpolicy.html">Attributo CreationPolicy</a> puoi eseguire le seguenti operazioni:</p><div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>Coordinare la creazione delle risorse dello stack con altre azioni di configurazione esterne alla creazione dello stack</p>
         </li><li class="listitem">
            <p>Monitorare lo stato di un processo di configurazione</p>
         </li></ul></div><p>Ad esempio, puoi iniziare la creazione di un'altra risorsa al parziale completamento della configurazione di un'applicazione oppure puoi inviare segnali durante un processo di installazione e configurazione per monitorarne l'avanzamento.</p><h2 id="using-cfn-waitconditionhandle">Utilizzo di un handle di una condizione di attesa</h2>
            
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Se utilizzi la funzionalità <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-endpoints.html">endpoint VPC</a>, le risorse nel VPC che rispondono alle condizioni di attesa devono avere accesso a bucket Amazon Simple Storage Service ( AWS CloudFormationAmazon S3) specifici. Le risorse devono inviare le risposte della condizione di attesa a un URL Amazon S3 prefirmato. Se non sono in grado di inviare risposte per Amazon S3, AWS CloudFormation
non riceverà una risposta e il funzionamento dello stack ha esito negativo. Per ulteriori informazioni, consulta <a href="./cfn-vpce-bucketnames.html">Configurazione degli endpoint VPC per AWS CloudFormation</a> e <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies-vpc-endpoint.html">Policy di bucket di esempio per gli endpoint VPC per Amazon S3</a>.</p></div></div>
            <p>Puoi utilizzare le maniglie wait condition e wait condition per mettere in AWS CloudFormation pausa la creazione di uno stack e attendere un segnale prima che questo continui a creare lo stack. Ad esempio, puoi scaricare e configurare le applicazioni su un'istanza Amazon EC2 prima di considerare completata la creazione di tale istanza Amazon EC2.</p>
            <p>L'elenco seguente fornisce un riepilogo del funzionamento di una condizione di attesa con un handle:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>AWS CloudFormation crea una condizione di attesa proprio come qualsiasi altra risorsa. Quando AWS CloudFormation crea una condizione di attesa, riporta lo stato della condizione di attesa come CREATE_IN_PROGRESS e attende che riceva il numero richiesto di segnali di successo o che il periodo di timeout della condizione di attesa sia scaduto. Se AWS CloudFormation  riceve il numero richiesto di segnali di successo prima della scadenza del periodo di timeout, continua a creare lo stack; in caso contrario, imposta lo stato della condizione di attesa su e ripristina lo stack. <code class="code">CREATE_FAILED</code></p>
                </li><li class="listitem">
                    <p>La <code class="code">Timeout</code> proprietà determina la durata di AWS CloudFormation attesa per il numero richiesto di segnali di successo. <code class="code">Timeout</code>è una proprietà con limite minimo, il che significa che il timeout non si verifica prima del tempo specificato, ma può verificarsi poco dopo. Il tempo massimo che puoi specificare è 43200 secondi (12 ore).</p>
                </li><li class="listitem">
                    <p>In genere, una condizione di attesa inizia subito dopo la creazione di una risorsa specifica, ad esempio un'istanza Amazon EC2, un'istanza database RDS o un gruppo Auto Scaling. A questo scopo, aggiungi l'<a href="./aws-attribute-dependson.html">attributo DependsOn</a> a una condizione di attesa. Quando aggiungi un attributo <code class="code">DependsOn</code> a una condizione di attesa, devi specificare che la condizione di attesa viene creata solo dopo il completamento della creazione di una risorsa specifica. Quando viene creata la condizione di attesa, AWS CloudFormation inizia il periodo di timeout e attende i segnali di successo.</p>
                </li><li class="listitem">
                    <p>Puoi utilizzare l'attributo <code class="code">DependsOn</code> anche in altre risorse. Ad esempio, puoi decidere di creare un'istanza database Amazon RDS e di configurare un database su tale istanza database prima di creare le istanze EC2 che usano tale database. In questo caso, devi creare una condizione di attesa contenente un attributo <code class="code">DependsOn</code> che specifica l'istanza database e quindi devi creare le risorse dell'istanza EC2 contenenti gli attributi <code class="code">DependsOn</code> che specificano la condizione di attesa. In questo modo sei sicuro che le istanze EC2 verranno create direttamente solo dopo il completamento dell'istanza database e della condizione di attesa.</p>
                </li><li class="listitem">
                    <p>AWS CloudFormation deve ricevere un determinato numero di segnali di successo per una condizione di attesa prima di impostare lo stato di tale condizione di attesa per <code class="code">CREATE_COMPLETE</code> continuare la creazione dello stack. La proprietà <code class="code">Count</code> della condizione di attesa specifica il numero di segnali di operazione riuscita. Se non viene impostato alcun valore, il valore di default è 1.</p>
                </li><li class="listitem">
                    <p>Una condizione di attesa richiede un handle per configurare un URL prefirmato che viene utilizzato per il meccanismo di segnalazione. L'URL predefinito consente di inviare un segnale senza dover fornire le AWS credenziali. Utilizza l'URL prefirmato per segnalare le operazioni riuscite e non riuscite, che vengono incapsulate in una dichiarazione JSON. Per il formato dell'istruzione JSON, consulta <a href="#using-cfn-waitcondition-signaljson">Formato JSON del segnale della condizione di attesa</a>.</p>
                </li><li class="listitem">
                    <p>Se una condizione di attesa riceve il numero richiesto di segnali di successo (come definito nella proprietà Count) prima della scadenza del periodo di timeout, AWS CloudFormation contrassegna la condizione di attesa come valida <code class="code">CREATE_COMPLETE</code> e continua a creare lo stack. In caso contrario, AWS CloudFormation non soddisfa la condizione di attesa e ripristina lo stack (ad esempio, se il periodo di timeout scade senza i segnali di successo richiesti o se viene ricevuto un segnale di errore).</p>
                </li></ul></div>
            <div class="procedure"><h6>Per usare una condizione di attesa in uno stack:</h6><ol><li>
                    <p>Dichiarare una risorsa <code class="code">AWS::CloudFormation::WaitConditionHandle</code> nel modello di stack. Un handle della condizione di attesa non ha proprietà. Tuttavia, un riferimento a una risorsa <code class="code">WaitConditionHandle</code> restituisce un URL prefirmato che puoi utilizzare per segnalare un'operazione riuscita o non riuscita alla risorsa <code class="code">WaitCondition</code>. Per esempio:</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myWaitHandle" : <span>{</span>
     "Type" : "AWS::CloudFormation::WaitConditionHandle",
     "Properties" : <span>{</span>
     }
}</code></pre>
                </li><li>
                    <p>Dichiarare una risorsa <code class="code">AWS::CloudFormation::WaitCondition</code> nel modello di stack. Una risorsa <code class="code">WaitCondition</code> ha due proprietà obbligatorie: <code class="code">Handle</code> è un riferimento a una risorsa <code class="code">WaitConditionHandle</code> dichiarata nel modello e <code class="code">Timeout</code> è il numero di secondi dell'attesa di AWS CloudFormation . In alternativa, è possibile impostare la <code class="code">Count</code> proprietà, che determina il numero di segnali di successo che la condizione di attesa deve ricevere prima di AWS CloudFormation poter riprendere la creazione dello stack.</p>
                    <p>Per controllare quando la condizione di attesa viene attivata, imposta un attributo <code class="code">DependsOn</code> sulla condizione di attesa. Una clausola <code class="code">DependsOn</code> associa una risorsa alla condizione di attesa. Dopo che AWS CloudFormation
ha creato la risorsa <code class="code">DependsOn</code>, blocca altre creazioni di risorse dello stack finché non si verifica uno dei seguenti eventi: a) scadenza del periodo di timeout b) Ricezione del numero richiesto di segnali di operazione riuscita c) Ricezione di un segnale di operazione non riuscita.</p>
                    <p>Di seguito è riportato un esempio di condizione di attesa che viene avviata dopo la creazione riuscita di una risorsa <code class="code">Ec2Instance</code>, utilizza la risorsa <code class="code">myWaitHandle</code> come risorsa <code class="code">WaitConditionHandle</code>, ha un timeout pari a 4.500 secondi e ha una proprietà <code class="code">Count</code> impostata sul valore predefinito di 1 (perché non è stata specificata alcuna proprietà <code class="code">Count</code>):</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myWaitCondition" : <span>{</span>
    "Type" : "AWS::CloudFormation::WaitCondition",
    "DependsOn" : "Ec2Instance",
    "Properties" : <span>{</span>
        "Handle" : <span>{</span> "Ref" : "myWaitHandle" },
        "Timeout" : "4500"
    }
}</code></pre>
                </li><li>
                    <p>Recuperare l'URL prefirmato da usare per la segnalazione.</p>
                    <p>Nel modello, l'URL prefirmato può essere recuperato passando il nome logico della risorsa <code class="code">AWS::CloudFormation::WaitConditionHandle</code> alla funzione intrinseca Ref. Ad esempio, puoi utilizzare la proprietà <code class="code">UserData</code> sulle risorse <code class="code">AWS::EC2::Instance</code> per passare l'URL prefirmato alle istanze Amazon EC2, in modo che gli script o le applicazioni in esecuzione su tali istanze possano segnalare le operazioni riuscite o non riuscite a AWS CloudFormation:</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"UserData" : <span>{</span>
   "Fn::Base64" : <span>{</span>
       "Fn::Join" : [ "", ["SignalURL=", <span>{</span> "Ref" : "myWaitHandle" } ] ]
   }
}</code></pre>
                    <p>Nota: negli strumenti della AWS Management Console riga di AWS CloudFormation comando, l'URL predefinito viene visualizzato come ID fisico della risorsa wait condition handle.</p>
                </li><li>
                    <p>Selezionare un metodo per rilevare quando lo stack entra nella condizione di attesa.</p>
                    <p>Se crei lo stack con le notifiche abilitate, AWS CloudFormation pubblica una notifica per ogni evento dello stack sull'argomento specificato. Se tu o l'applicazione effettua la sottoscrizione a tale argomento, puoi monitorare le notifiche relative all'evento di reazione degli handle delle condizioni di attesa e recuperare l'URL prefirmato dal messaggio di notifica.</p>
                    <p>Puoi anche monitorare gli eventi dello stack utilizzando gli strumenti della AWS Management Consoleriga di AWS CloudFormation comando o l'API. AWS CloudFormation </p>
                </li><li>
                    <p>Utilizza l'URL prefirmato per segnalare le operazioni riuscite o non riuscite.</p>
                    <p>Per inviare un segnale, invia un messaggio di richiesta HTTP utilizzando l'URL prefirmato. Il metodo della richiesta deve essere <code class="code">PUT</code> e l'intestazione <code class="code">Content-Type</code> deve essere una stringa vuota o deve essere omessa. Il messaggio di richiesta deve essere una struttura JSON con il formato specificato nel <a href="#using-cfn-waitcondition-signaljson">Formato JSON del segnale della condizione di attesa</a>.</p>
                    <p>È necessario inviare il numero di segnali di successo specificati dalla <code class="code">Count</code> proprietà per AWS CloudFormation continuare la creazione dello stack. Se il valore della proprietà <code class="code">Count</code> è maggiore di 1, il valore <code class="code">UniqueId</code> per ogni segnale deve essere univoco per tutti i segnali inviati a una determinata condizione di attesa. Il valore <code class="code">UniqueId</code> è una stringa alfanumerica arbitraria.</p>
                    <p>Un comando <code class="code">curl</code> è un modo per inviare un segnale. L'esempio seguente mostra una riga di comando <code class="code">curl</code> che segnala l'operazione riuscita a una condizione di attesa.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">curl -T /tmp/a \
  "https://cloudformation-waitcondition-test.s3.amazonaws.com/arn%3Aaws%3Acloudformation%3A<span>us-east-2</span>%3A034017226601%3Astack%2Fstack-gosar-20110427004224-test-stack-with-WaitCondition--VEYW%2Fe498ce60-70a1-11e0-81a7-5081d0136786%2FmyWaitConditionHandle?Expires=1303976584&amp;AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&amp;Signature=ik1twT6hpS4cgNAw7wyOoRejVoo%3D"</code></code></pre>
                    <p>dove il file /tmp/a contiene la seguente struttura JSON:</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">
<span>{</span>
   "Status" : "SUCCESS",
   "Reason" : "Configuration Complete",
   "UniqueId" : "ID1234",
   "Data" : "Application has completed configuration."
}</code></pre>
                    <p>Questo esempio illustra una riga di comando <code class="code">curl</code> che invia lo stesso segnale di operazione riuscita, ma che invia la struttura JSON come parametro alla riga di comando.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">curl -X PUT \
  -H 'Content-Type:' --data-binary '<span>{</span>"Status" : "SUCCESS","Reason" : "Configuration Complete","UniqueId" : "ID1234","Data" : "Application has completed configuration."}' \
  "https://cloudformation-waitcondition-test.s3.amazonaws.com/arn%3Aaws%3Acloudformation%3A<span>us-east-2</span>%3A034017226601%3Astack%2Fstack-gosar-20110427004224-test-stack-with-WaitCondition--VEYW%2Fe498ce60-70a1-11e0-81a7-5081d0136786%2FmyWaitConditionHandle?Expires=1303976584&amp;AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&amp;Signature=ik1twT6hpS4cgNAw7wyOoRejVoo%3D"</code></code></pre>
                </li></ol></div>
            <h3 id="using-cfn-waitcondition-signaljson">Formato JSON del segnale della condizione di attesa</h3>
                
                <p>Quando segnali una condizione di attesa, devi utilizzare il seguente formato JSON:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Status" : "StatusValue",
  "UniqueId" : "Some UniqueId",
  "Data" : "Some Data",
  "Reason" : "Some Reason"
}</code></pre>
                <p>Dove:</p>
                <p><em>StatusValue</em>deve essere uno dei seguenti valori:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><em>SUCCESS</em> indica un segnale di operazione riuscita.</p>
                    </li><li class="listitem">
                        <p><em>FAILURE</em> indica un segnale di operazione non riuscita e attiva una condizione di attesa non riuscita e un rollback dello stack.</p>
                    </li></ul></div>
                <p><em><code class="code">UniqueId</code></em>identifica il segnale a. AWS CloudFormationSe la <code class="code">Count</code> proprietà della condizione di attesa è maggiore di 1, il <code class="code">UniqueId</code> valore deve essere univoco per tutti i segnali inviati per una particolare condizione di attesa; in caso contrario, AWS CloudFormation considererà il segnale una ritrasmissione del segnale inviato in precedenza con lo stesso <code class="code">UniqueId</code> e ignorerà il segnale.</p>
                <p><em><code class="code">Data</code></em> rappresenta qualsiasi informazione che desideri inviare con il segnale. È possibile accedere al <code class="code">Data</code> valore chiamando la <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt funzione</a> all'interno del modello. Ad esempio, se si crea il seguente valore di output per la condizione di attesa<code class="code">mywaitcondition</code>, è possibile utilizzare il <code class="code">aws cloudformation describe-stacks</code> comando, l'operazione <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeStacks.html"><code class="code">DescribeStacks</code></a>API o la scheda <b>Outputs</b> della AWS CloudFormation console per visualizzare i segnali <code class="code">Data</code> inviati da segnali validi inviati a AWS CloudFormation: </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">
"WaitConditionData" : <span>{</span>
  "Value" : <span>{</span> "Fn::GetAtt" : [ "mywaitcondition", "Data" ]},
  "Description" : "The data passed back as part of signalling the WaitCondition"
},
            </code></pre>
                <p>La <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt funzione</a> restituisce l'<code class="code">UniqueId</code>and <code class="code">Data</code> come coppia nome/valore all'interno di una struttura JSON. Di seguito è riportato un esempio dell'attributo <code class="code">Data</code> restituito dal valore di output <code class="code">WaitConditionData</code> definito in precedenza:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>"Signal1":"Application has completed configuration."}</code></pre>
                <p><em>Reason</em> è una stringa senza altre restrizioni relative ai contenuti, oltre alla conformità JSON.</p>
             
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./deploying.applications.html">Distribuzione di applicazioni</div><div id="next" class="next-link" accesskey="n" href="./CHAP_TemplateQuickRef.html">Frammenti di modello</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>