<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::CloudFormation::Init - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-init" /><meta name="default_state" content="aws-resource-init" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" /><meta name="description" content="Includi metadati in un'istanza Amazon EC2 per lo script helper cfn-init utilizzando il tipo di risorsa AWS::CloudFormation::Init." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guida per l'utente" /><meta name="abstract" content="Crea e gestisci le implementazioni AWS dell'infrastruttura in modo prevedibile e ripetuto utilizzando questa guida per AWS CloudFormation l'utente." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guida per l'utente" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guida per l'utente" /><meta id="panorama-serviceConsolePage" value="AWS::CloudFormation::Init" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::CloudFormation::Init - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisioning delle risorse,configurazione delle risorse,gestione dell'infrastruttura,CloudFormer,CloudFormation pila,CloudFormation modello,set di modifiche" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per l'utente",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Utilizzo dei modelli AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Anatomia dei modelli",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-anatomy.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Metadati",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/metadata-section-structure.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "AWS::CloudFormation::Init",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/metadata-section-structure.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guida per l'utente</a></div><div id="page-toc-src"><a href="#aws-resource-cloudformation-init-syntax">Sintassi</a><a href="#aws-resource-init-configsets">Set di configurazione</a><a href="#aws-resource-init-commands">Comandi</a><a href="#aws-resource-init-files">File</a><a href="#aws-resource-init-groups">Gruppi</a><a href="#aws-resource-init-packages">Pacchetti</a><a href="#aws-resource-init-services">Servizi</a><a href="#aws-resource-init-sources">Origini</a><a href="#aws-resource-init-users">Utenti</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="aws-resource-init"><code class="code">AWS::CloudFormation::Init</code></h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Utilizza il tipo <code class="code">AWS::CloudFormation::Init</code> per includere metadati in un'istanza Amazon EC2 per lo script helper cfn-init. Se il modello chiama lo script cfn-init, quest'ultimo cerca i metadati delle risorse radicati nella chiave di metadati <code class="code">AWS::CloudFormation::Init</code>. Per ulteriori informazioni su cfn-init, consulta <a href="./cfn-init.html">cfn-init</a>.</p><p>cfn-init supporta tutti i tipi di metadati per i sistemi Linux. Supporta inoltre i tipi di metadati per Windows con le condizioni descritte nelle seguenti sezioni.</p><p>Per un esempio di utilizzo di <code class="code">AWS::CloudFormation::Init</code> e dello script helper cfn-init, consulta <a href="./deploying.applications.html">Distribuzione di applicazioni su Amazon EC2 con AWS CloudFormation</a>.</p><p>Per un esempio che mostra come utilizzare cfn-init per creare uno stack di Windows, consulta <a href="./cfn-windows-stacks-bootstrapping.html">Avvio degli stack di Windows AWS CloudFormation</a>.</p>
      <h2 id="aws-resource-cloudformation-init-syntax">Sintassi</h2>

      <p>La configurazione è divisa in sezioni. Il seguente frammento di modello mostra in che modo collegare i metadati per cfn-init a una risorsa istanza EC2 all'interno del modello.</p>
      <p>I metadati vengono organizzati in chiavi di configurazione, raggruppabili in set di configurazione. Puoi specificare un set di configurazione quando chiami cfn-init nel modello. Se non specifichi un configset, cfn-init cerca una chiave di configurazione singola denominata <em>config</em>.</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Lo script helper cfn-init elabora le sezioni di configurazione nell'ordine seguente: pacchetti, gruppi, utenti, origini, file, comandi e servizi. Se hai bisogno di seguire un ordine diverso, dividi le sezioni in chiavi di configurazione diverse, quindi utilizza un set di configurazione che specifichi l'ordine in cui le chiavi devono essere elaborate.</p></div></div>

      <div id="JSON" name="JSON" class="section langfilter">
         <h3 id="aws-resource-cloudformation-init-syntax.json">JSON</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Resources": <span>{</span>
  "MyInstance": <span>{</span>
    "Type": "AWS::EC2::Instance",
    "Metadata" : <span>{</span>
      "AWS::CloudFormation::Init" : <span>{</span>
        "config" : <span>{</span>
          "packages" : <span>{</span>
            :
          },
          "groups" : <span>{</span>
            :
          },
          "users" : <span>{</span>
            :
          },
          "sources" : <span>{</span>
            :
          },
          "files" : <span>{</span>
            :
          },
          "commands" : <span>{</span>
            :
          },
          "services" : <span>{</span>
            :
          }
        }
      }
    },
    "Properties": <span>{</span>
      :
    }
  }
}</code></pre>
      </div>
      <div id="YAML" name="YAML" class="section langfilter">
         <h3 id="aws-resource-cloudformation-init-syntax.yaml">YAML</h3>

         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources: 
  MyInstance: 
    Type: AWS::EC2::Instance
    Metadata: 
      AWS::CloudFormation::Init: 
        config: 
          packages: 
            :
          groups: 
            :
          users: 
            :
          sources: 
            :
          files: 
            :
          commands: 
            :
          services: 
            :
    Properties: 
      :</code></pre>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Per specificare la proprietà <code class="code">AWS::CloudFormation::Init</code> per un'istanza Amazon EC2, vedere l'<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-init.html#cfn-init-Examples">esempio di Amazon Linux</a>.</p></div></div>
      </div>
    
      <h2 id="aws-resource-init-configsets">Set di configurazione</h2>

      <p>Se desideri creare più chiavi di configurazione e impostarle in modo che cfn-init le elabori in un ordine specifico, crea un set di configurazione che contenga le chiavi nell'ordine desiderato.</p>
       
         <h3 id="w9aac23c15c15c23c13b5">Set di configurazione singolo</h3>

         <p>Il seguente frammento di modello crea set di configurazione denominati <code class="code">ascending</code> e <code class="code">descending</code>, ciascuno dei quali contenente due chiavi di configurazione.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-cloudformation-init-configset-example1.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"AWS::CloudFormation::Init" : <span>{</span>
    "configSets" : <span>{</span>
        "ascending" : [ "config1" , "config2" ],
        "descending" : [ "config2" , "config1" ]
    },
    "config1" : <span>{</span>
        "commands" : <span>{</span>
            "test" : <span>{</span>
                "command" : "echo \"$CFNTEST\" &gt; test.txt",
                "env" : <span>{</span> "CFNTEST" : "I come from config1." },
                "cwd" : "~"
            }
        }
    },
    "config2" : <span>{</span>
        "commands" : <span>{</span>
            "test" : <span>{</span>
                "command" : "echo \"$CFNTEST\" &gt; test.txt",
                "env" : <span>{</span> "CFNTEST" : "I come from config2" },
                "cwd" : "~"
            }
        }
    }
}     </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-cloudformation-init-configset-example1.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWS::CloudFormation::Init: 
  configSets: 
    ascending: 
      - "config1"
      - "config2"
    descending: 
      - "config2"
      - "config1"
  config1: 
    commands: 
      test: 
        command: "echo \"$CFNTEST\" &gt; test.txt"
        env: 
          CFNTEST: "I come from config1."
        cwd: "~"
  config2: 
    commands: 
      test: 
        command: "echo \"$CFNTEST\" &gt; test.txt"
        env: 
          CFNTEST: "I come from config2"
        cwd: "~"</code></pre>
         </div>
          
            <h4 id="w9aac23c15c15c23c13b5b9">Chiamate cfn-init correlate</h4>

            <p>Le seguenti chiamate di esempio a cfn-init fanno riferimento ai set di configurazione dell'esempio precedente. Le chiamate sono abbreviate per chiarezza. Per la sintassi completa, consulta <a href="./cfn-init.html">cfn-init</a>.</p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Se una chiamata a cfn-init specifica il set di configurazione <code class="code">ascending</code>:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">cfn-init -c ascending</code></code></pre>
                  <p>lo script elabora <code class="code">config1</code> e poi <code class="code">config2</code> e il file test.txt conterrà il testo <code class="code">I
                        come from config2</code>.</p>
               </li><li class="listitem">
                  <p>Se una chiamata a cfn-init specifica il set di configurazione <code class="code">descending</code>:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">cfn-init -c descending</code></code></pre>
                  <p>lo script elabora <code class="code">config2</code> e poi <code class="code">config1</code> e il file test.txt conterrà il testo <code class="code">I
                        come from config1</code>.</p>
               </li></ul></div>
          
       
       
         <h3 id="w9aac23c15c15c23c13b7">Più set di configurazione</h3>

         <p>Puoi creare più set di configurazione e chiamare una serie di set utilizzando lo script cfn-init. Ogni set di configurazione può contenere un elenco di chiavi di configurazione o di riferimenti ad altri set di configurazione. Ad esempio, il seguente frammento di modello crea tre set di configurazione. Il primo, <code class="code">test1</code>, contiene una chiave di configurazione denominata <code class="code">1</code>. Il secondo, <code class="code">test2</code>, contiene un riferimento al set di configurazione <code class="code">test1</code> e una chiave di configurazione denominata <code class="code">2</code>. Il terzo, default, contiene un riferimento al set di configurazione <code class="code">test2</code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-cloudformation-init-configset-example2.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"AWS::CloudFormation::Init" : <span>{</span>
    "configSets" : <span>{</span>
        "test1" : [ "1" ],
        "test2" : [ <span>{</span> "ConfigSet" : "test1" }, "2" ],
        "default" : [ <span>{</span> "ConfigSet" : "test2" } ]
    },
    "1" : <span>{</span>
        "commands" : <span>{</span>
            "test" : <span>{</span>
                "command" : "echo \"$MAGIC\" &gt; test.txt",
                "env" : <span>{</span> "MAGIC" : "I come from the environment!" },
                "cwd" : "~"
            }
        }
    },
    "2" : <span>{</span>
        "commands" : <span>{</span>
            "test" : <span>{</span>
                "command" : "echo \"$MAGIC\" &gt;&gt; test.txt",
                "env" : <span>{</span> "MAGIC" : "I am test 2!" },
                "cwd" : "~"
            }
        }
    }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-cloudformation-init-configset-example2.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWS::CloudFormation::Init:
  1:
    commands:
      test:
        command: "echo \"$MAGIC\" &gt; test.txt"
        env:
          MAGIC: "I come from the environment!"
        cwd: "~"
  2:
    commands:
      test:
        command: "echo \"$MAGIC\" &gt;&gt; test.txt"
        env:
          MAGIC: "I am test 2!"
        cwd: "~"
  configSets: 
    test1:
      - "1"
    test2:
      -
        ConfigSet: "test1"
      - "2"
    default:
      -
        ConfigSet: "test2"</code></pre>
         </div>
          
            <h4 id="w9aac23c15c15c23c13b7b9">Chiamate cfn-init correlate</h4>

            <p>Le seguenti chiamate a cfn-init fanno riferimento ai set di configurazione dichiarati nel frammento di modello precedente. Le chiamate sono abbreviate per chiarezza. Per la sintassi completa, consulta <a href="./cfn-init.html">cfn-init</a>.</p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Se specifichi solo <code class="code">test1</code>:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">cfn-init -c test1</code></code></pre>
                  <p>cfn-init elabora solo la chiave di configurazione <code class="code">1</code>.</p>
               </li><li class="listitem">
                  <p>Se specifichi solo <code class="code">test2</code>:</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">cfn-init -c test2</code></code></pre>
                  <p>cfn-init elabora la chiave di configurazione <code class="code">1</code> e poi la chiave di configurazione <code class="code">2</code>.</p>
               </li><li class="listitem">
                  <p>Se specifichi il set di configurazione <code class="code">default</code> (o non specifichi alcun set di configurazione):</p>
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="sh "><code class="userinput">cfn-init -c default</code></code></pre>
                  <p>ottieni lo stesso comportamento che avresti specificando il set di configurazione <code class="code">test2</code>.</p>
               </li></ul></div>
          
       
    
      <h2 id="aws-resource-init-commands">Comandi</h2>

      <p>Puoi utilizzare la chiave comandi per eseguire comandi sull'istanza EC2. I comandi vengono elaborati in ordine alfabetico in base al nome.</p>
      <div class="table-container"><div class="table-contents"><table id="w1348aac17c17c17c19c17b5"><thead>
               <tr>
                  <th>Chiave</th>
                  <th>Richiesto</th>
                  <th>Descrizione</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">
                     <p>command</p>
                  </td>
                  <td tabindex="-1">Richiesto</td>
                  <td tabindex="-1">
                     <p>Una matrice o una stringa che specifica il comando da eseguire. Se utilizzi una matrice, non è necessario utilizzare un carattere di escape negli spazi o racchiudere i parametri di comando tra virgolette. Non utilizzare una matrice per specificare più comandi.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>env</p>
                  </td>
                  <td tabindex="-1">Facoltativo</td>
                  <td tabindex="-1">
                     <p>Imposta variabili di ambiente per il comando. Questa proprietà non aggiunge l'ambiente esistente ma lo sovrascrive.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>cwd</p>
                  </td>
                  <td tabindex="-1">Facoltativo</td>
                  <td tabindex="-1">
                     <p>La directory di lavoro.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>test</p>
                  </td>
                  <td tabindex="-1">Facoltativo</td>
                  <td tabindex="-1">
                     <p>Un comando di test che determina se cfn-init esegue i comandi specificati nella chiave comandi. Se il test viene superato, cfn-init esegue i comandi. Lo script cfn-init esegue il test in un interprete di comandi, ad esempio Bash o <code>cmd.exe</code>. Il superamento del test dipende dal codice di uscita restituito dall'interprete.</p>
                     <p>Per Linux, il comando di test deve restituire il codice di uscita <code class="code">0</code> perché il test abbia esito positivo. Per Windows, il comando di test deve restituire un %ERRORLEVEL% di <code class="code">0</code>.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>ignoreErrors</p>
                  </td>
                  <td tabindex="-1">Facoltativo</td>
                  <td tabindex="-1">
                     <p>Un valore booleano che determina se l'esecuzione di cfn-init continua se il comando contenuto nella chiave comandi non riesce (restituisce un valore diverso da zero). Imposta su <code class="code">true</code> per continuare a eseguire cfn-init anche se il comando non riesce. Imposta su <code class="code">false</code> per interrompere l'esecuzione di cfn-init se il comando non riesce. Il valore predefinito è <code class="code">false</code>.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>waitAfterCompletion</p>
                  </td>
                  <td tabindex="-1">Facoltativo</td>
                  <td tabindex="-1">
                     <p>Solo per i sistemi Windows. Specifica il tempo di attesa (in secondi) dopo che un comando è terminato nel caso in cui il comando provochi un riavvio. Il valore di default è di 60 secondi e il valore "forever" indica a cfn-init di uscire e riprendere solo dopo il completamento del processo di riavvio. Impostare questo valore su <code class="code">0</code> se non si desidera attendere ogni comando.</p>
                  </td>
               </tr>
            </table></div></div>
       
         <h3 id="w9aac23c15c15c23c15b7">Esempio</h3>

         <p>Il seguente frammento di esempio chiama il comando echo se il file <code class="code">~/test.txt</code> non esiste.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-commands-example.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"commands" : <span>{</span>
    "test" : <span>{</span>
        "command" : "echo \"$MAGIC\" &gt; test.txt",
        "env" : <span>{</span> "MAGIC" : "I come from the environment!" },
        "cwd" : "~",
        "test" : "test ! -e ~/test.txt",
        "ignoreErrors" : "false"
    },
    "test2" : <span>{</span>
        "command" : "echo \"$MAGIC2\" &gt; test2.txt",
        "env" : <span>{</span> "MAGIC2" : "I come from the environment!" },
        "cwd" : "~",
        "test" : "test ! -e ~/test2.txt",
        "ignoreErrors" : "false"
    }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-commands-example.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">commands:
  test:
    command: "echo \"$MAGIC\" &gt; test.txt"
    env:
      MAGIC: "I come from the environment!"
    cwd: "~"
    test: "test ! -e ~/test.txt"
    ignoreErrors: "false"
  test2:
    command: "echo \"$MAGIC2\" &gt; test2.txt"
    env:
      MAGIC2: "I come from the environment!"
    cwd: "~"
    test: "test ! -e ~/test2.txt"
    ignoreErrors: "false"</code></pre>
         </div>
       
    
      <h2 id="aws-resource-init-files">File</h2>

      <p>Puoi utilizzare la chiave <code class="code">files</code> per creare file sull'istanza EC2. Il contenuto può essere inline nel modello o essere estratto da un URL. I file sono scritti su disco in ordine lessicografico. La tabella seguente elenca le chiavi supportate.</p>
      <div class="table-container"><div class="table-contents"><table id="w1348aac17c17c17c19c19b5"><thead>
               <tr>
                  <th>Chiave</th>
                  <th>Descrizione</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">
                     <p>contenuto</p>
                  </td>
                  <td tabindex="-1">
                     <p>Una stringa o un oggetto JSON formattato correttamente. Se utilizzi un oggetto JSON come contenuto, il codice JSON verrà scritto in un file su disco. Le funzioni intrinseche come <code class="code">Fn::GetAtt</code> o <code class="code">Ref</code> vengono valutate prima che l'oggetto JSON venga scritto sul disco. Quando crei un collegamento simbolico, specificane la destinazione come contenuto.</p>
                     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Se crei un collegamento simbolico, lo script helper modifica le autorizzazioni del file di destinazione. Al momento, non è possibile creare un collegamento simbolico senza modificare le autorizzazioni del file di destinazione.</p></div></div>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>source</p>
                  </td>
                  <td tabindex="-1">
                     <p>Un URL da cui caricare il file. Questa opzione non può essere specificata con la chiave contenuto.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>encoding</p>
                  </td>
                  <td tabindex="-1">
                     <p>Il formato di codifica. Utilizzata solo se il contenuto è una stringa. La codifica non viene applicata se si sta utilizzando un'origine.</p>
                     <p>Valori validi: <code class="code">plain</code> | <code class="code">base64</code></p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>gruppo</p>
                  </td>
                  <td tabindex="-1">
                     <p>Il nome del gruppo proprietario di questo file. Questa chiave non è supportata per i sistemi Windows.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>owner</p>
                  </td>
                  <td tabindex="-1">
                     <p>Il nome dell'utente proprietario di questo file. Questa chiave non è supportata per i sistemi Windows.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>mode</p>
                  </td>
                  <td tabindex="-1">
                     <p>Valore ottale a sei cifre che rappresenta la modalità per questo file. Questa chiave non è supportata per i sistemi Windows. Usa le prime tre cifre per i collegamenti simbolici e le ultime tre per impostare le autorizzazioni. Per creare un collegamento simbolico, specifica <code class="userinput">120<code class="replaceable">xxx</code></code>, dove <code class="code">xxx</code> definisce le autorizzazioni del file di destinazione. Per specificare le autorizzazioni per un file, usa le ultime tre cifre, ad esempio <code class="userinput">000644</code>.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>autenticazione</p>
                  </td>
                  <td tabindex="-1">
                     <p>Il nome di un metodo di autenticazione da utilizzare. Questa proprietà sostituisce qualsiasi impostazione di autenticazione di default. Puoi utilizzarla per selezionare un metodo di autenticazione definito con la risorsa <a href="./aws-resource-authentication.html">AWS::CloudFormation::Authentication</a>.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>context</p>
                  </td>
                  <td tabindex="-1">
                     <p>Specifica un contesto per i file che devono essere elaborati come <a href="http://mustache.github.io/mustache.5.html" rel="noopener noreferrer" target="_blank"><span>modelli Mustache</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Per utilizzare questa chiave, è necessario aver installato <code class="code">aws-cfn-bootstrap</code> 1.3–11 o versioni successive e <a href="https://github.com/defunkt/pystache" rel="noopener noreferrer" target="_blank"><span>pystache</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                  </td>
               </tr>
            </table></div></div>
       
         <h3 id="w9aac23c15c15c23c17b7">Esempi</h3>

         <p>Il seguente frammento di esempio crea un file denominato setup.mysql come parte di una installazione più ampia.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-setup-mysql.json">JSON</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"files" : <span>{</span>
  "/tmp/setup.mysql" : <span>{</span>
    "content" : <span>{</span> "Fn::Join" : ["", [
      "CREATE DATABASE ", <span>{</span> "Ref" : "DBName" }, ";\n",
      "CREATE USER '", <span>{</span> "Ref" : "DBUsername" }, "'@'localhost' IDENTIFIED BY '",
                       <span>{</span> "Ref" : "DBPassword" }, "';\n",
      "GRANT ALL ON ", <span>{</span> "Ref" : "DBName" }, ".* TO '", <span>{</span> "Ref" : "DBUsername" },
                       "'@'localhost';\n",
      "FLUSH PRIVILEGES;\n"
      ]]},
    "mode"  : "000644",
    "owner" : "root",
    "group" : "root"
  }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-setup-mysql.yaml">YAML</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">files: 
  /tmp/setup.mysql: 
    content: !Sub |
      CREATE DATABASE $<span>{</span>DBName};
      CREATE USER '$<span>{</span>DBUsername}'@'localhost' IDENTIFIED BY '$<span>{</span>DBPassword}';
      GRANT ALL ON $<span>{</span>DBName}.* TO '$<span>{</span>DBUsername}'@'localhost';
      FLUSH PRIVILEGES;
    mode: "000644"
    owner: "root"
    group: "root"</code></pre>
         </div>
         <p>Il modello completo è disponibile all'indirizzo: <a href="https://s3.amazonaws.com/cloudformation-templates-us-east-1/Drupal_Single_Instance.template" rel="noopener noreferrer" target="_blank"><span>https://s3.amazonaws.com/ cloudformation-templates-us-east -1/drupal_single_instance.template</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
         <p>Il seguente frammento di esempio crea il collegamento simbolico <code class="code">/tmp/myfile2.txt</code> che punta al file esistente <code class="code">/tmp/myfile1.txt</code>. Le autorizzazioni del file di destinazione <code class="code">/tmp/myfile1.txt</code> sono definite dal valore di modalità <code class="code">644</code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-symlink.json">JSON</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"files" : <span>{</span>
  "/tmp/myfile2.txt" : <span>{</span>
    "content" : "/tmp/myfile1.txt",
    "mode" : "120644"
  }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-symlink.yaml">YAML</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">files:
  /tmp/myfile2.txt:
    content: "/tmp/myfile1.txt"
    mode: "120644"</code></pre>
         </div>
         <p>I modelli Mustache vengono utilizzati principalmente per creare file di configurazione. Ad esempio, puoi memorizzare un file di configurazione in un bucket S3 e interpolare Refs e dal modello, invece di usare.  GetAtts  <a href="./intrinsic-function-reference-join.html">Fn::Join</a> Il seguente frammento di esempio restituisce come output "Content for test9" in <code>/tmp/test9.txt</code>.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-test9.json">JSON</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">
"files" : <span>{</span>
    "/tmp/test9.txt" : <span>{</span>
        "content" : "Content for <span>{</span><span>{</span>name}}",
        "context" : <span>{</span> "name" : "test9" }
    }
} </code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-test9.yaml">YAML</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">files:
  /tmp/test9.txt:
    content: "Content for <span>{</span><span>{</span>name}}"
    context:
      name: "test9"</code></pre>
         </div>
         <p>Quando utilizzi i modelli Mustache, nota quanto segue:</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>La chiave contesto deve essere presente per i file da elaborare.</p>
            </li><li class="listitem">
               <p>La chiave contesto deve essere una mappa chiave-valore, ma può essere annidata.</p>
            </li><li class="listitem">
               <p>È possibile elaborare file con contenuti inline utilizzando la chiave contenuti e i file remoti tramite la chiave origine.</p>
            </li><li class="listitem">
               <p>Il supporto Mustache dipende dalla versione di pystache. La versione 0.5.2 supporta la <a href="https://github.com/mustache/spec/tree/v1.1.2" rel="noopener noreferrer" target="_blank"><span>specifica Mustache 1.1.2</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
            </li></ul></div>
       
    
      <h2 id="aws-resource-init-groups">Gruppi</h2>

      <p>Puoi utilizzare la chiave gruppi per creare gruppi Linux/UNIX e per assegnare ID gruppo. La chiave gruppi non è supportata per i sistemi Windows.</p>
      <p>Per creare un gruppo, aggiungi una nuova coppia chiave-valore che esegue la mappatura di un nuovo nome di gruppo a un ID di gruppo facoltativo. La chiave "groups" può contenere uno o più nomi di gruppo. La tabella seguente elenca le chiavi disponibili.</p>
      <div class="table-container"><div class="table-contents"><table id="w1348aac17c17c17c19c21b7"><thead>
               <tr>
                  <th>Chiave</th>
                  <th>Descrizione</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">
                     <p>
                        <code class="code">gid</code></p>
                  </td>
                  <td tabindex="-1">
                     <p>Un numero di ID di gruppo.</p>
                     <p>Se viene specificato un ID di gruppo e il nome di gruppo esiste già, la creazione del gruppo non riuscirà. Se un altro gruppo ha l'ID gruppo specificato, il sistema operativo può rifiutare la creazione del gruppo.</p>
                     <p>Esempio: <code class="code"><span>{</span> "gid" : "23" }</code></p>
                  </td>
               </tr>
            </table></div></div>
      
       
         <h3 id="aws-resource-init-groups-snippet">Frammento di esempio</h3>

         <p>Il frammento seguente specifica un gruppo denominato <code class="code">groupOne</code> senza assegnare un ID gruppo e un gruppo denominato <code class="code">groupTwo</code> con il valore <code class="code">45</code> come ID gruppo.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-groups-snippet.json">JSON</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"groups" : <span>{</span>
    "groupOne" : <span>{</span>},
    "groupTwo" : <span>{</span> "gid" : "45" }
}</code></pre>
         </div>
         
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-groups-snippet.yaml">YAML</h4>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">groups:
  groupOne: <span>{</span>}
  groupTwo:
    gid: "45"</code></pre>
         </div>
       
    
      <h2 id="aws-resource-init-packages">Pacchetti</h2>

      <p>Puoi utilizzare la chiave pacchetti per scaricare e installare pacchetti di componenti e applicazioni. Nei sistemi Windows, questa chiave supporta solo il programma di installazione MSI.</p>
       
         <h3 id="aws-resource-init-packages-formats">Formati di pacchetto supportati</h3>

         <p>Lo script cfn-init attualmente supporta i seguenti formati di pacchetto: apt, msi, python, rpm, rubygems, yum e Zypper. I pacchetti vengono elaborati nel seguente ordine: rpm, yum/apt/zypper, quindi rubygems e python. Non esiste alcun ordine prestabilito tra rubygems e python e l'installazione dei pacchetti nei programmi di gestione dei pacchetti non segue un ordine definito.</p>
       
       
         <h3 id="aws-resource-init-packages-versions">Specificazione delle versioni</h3>

         <p>In ogni programma di gestione dei pacchetti, ogni pacchetto è specificato come nome di pacchetto ed elenco di versioni. La versione può essere una stringa, un elenco di versioni oppure una stringa o un elenco vuoto. Una stringa o un elenco vuoto indica che deve essere utilizzata la versione più recente. Per il programma rpm, la versione è specificata come percorso a un file su un disco o a un URL.</p>
         <p>Se specifichi una versione di un pacchetto, cfn-init tenterà di installare tale versione anche se una versione più recente del pacchetto è già installata nell'istanza. Solo alcuni programmi di gestione dei pacchetti supportano più versioni. Per ulteriori informazioni, consulta la documentazione del programma di gestione dei pacchetti utilizzato. Se non si specifica una versione e una versione del pacchetto è già installata, lo script cfn-init non installerà una nuova versione perché presupporrà che intendi continuare a utilizzare la versione esistente.</p>
       
       
         <h3 id="aws-resource-init-packages-snippet">Frammenti di esempio</h3>

          
            <h4 id="w9aac23c15c15c23c21b9b3">RPM, yum, Rubygems e Zypper</h4>

            <p>Il frammento seguente specifica un URL di versione per rpm, richiede le versioni più recenti da yum e Zypper e la versione 0.10.2 di chef da rubygems:</p>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-packages-example1.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"rpm" : <span>{</span>
  "epel" : "http://download.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm"
},
"yum" : <span>{</span>
  "httpd" : [],
  "php" : [],
  "wordpress" : []
},
"rubygems" : <span>{</span>
  "chef" : [ "0.10.2" ]
},
"zypper" : <span>{</span>
  "git" : []
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-packages-example1.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">rpm:
  epel: "http://download.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm"
yum:
  httpd: []
  php: []
  wordpress: []
rubygems:
  chef:
    - "0.10.2"
zypper:
  git: []</code></pre>
            </div>
          
          
            <h4 id="w9aac23c15c15c23c21b9b5">Pacchetto MSI</h4>

            <p>Il frammento seguente specifica un URL per un pacchetto MSI:</p>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-packages-example2.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"msi" : <span>{</span>
  "awscli" : "https://s3.amazonaws.com/aws-cli/AWSCLI64.msi"
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-packages-example2.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">msi:
  awscli: "https://s3.amazonaws.com/aws-cli/AWSCLI64.msi"</code></pre>
            </div>
          
       
    
      <h2 id="aws-resource-init-services">Servizi</h2>

      <p>Puoi utilizzare la chiave servizi per definire i servizi che devono essere abilitati o disabilitati all'avvio dell'istanza. Sui sistemi Linux, questa chiave è supportata utilizzando sysvinit o systemd. Sui sistemi Windows, è supportata tramite l'utilizzo di Windows Service Manager.</p>
      <p>La chiave servizi consente inoltre di specificare le dipendenze da origini, pacchetti e file, per cui, se è necessario un riavvio a seguito dell'installazione dei file, cfn-init si occupa del riavvio del servizio. Ad esempio, se scarichi il pacchetto Apache HTTP Server, l'installazione del pacchetto avvierà automaticamente Apache HTTP Server durante il processo di creazione dello stack. Tuttavia, se la configurazione di Apache HTTP Server viene successivamente aggiornata nel processo di creazione dello stack, l'aggiornamento non sarà effettivo se il server Apache non viene riavviato. È possibile utilizzare la chiave servizi per assicurare che il servizio Apache HTTP venga riavviato.</p>
      <p>La tabella seguente elenca le chiavi supportate.</p>
      <div class="table-container"><div class="table-contents"><table id="w1348aac17c17c17c19c25b9"><thead>
               <tr>
                  <th>Chiave</th>
                  <th>Descrizione</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">
                     <p>ensureRunning</p>
                  </td>
                  <td tabindex="-1">
                     <p>Imposta su true per continuare a eseguire il servizio dopo la chiusura di cfn-init.</p>
                     <p>Impostare su false per interrompere l'esecuzione del servizio dopo la chiusura di cfn-init.</p>
                     <p>Ometti la chiave per non apportare modifiche allo stato del servizio.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>abilitato</p>
                  </td>
                  <td tabindex="-1">
                     <p>Imposta su true per eseguire automaticamente il servizio all'avvio.</p>
                     <p>Impostare su false per non eseguire automaticamente il servizio all'avvio.</p>
                     <p>Ometti la chiave per non apportare modifiche a questa proprietà.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>files</p>
                  </td>
                  <td tabindex="-1">
                     <p>Un elenco di file. Se cfn-init ne modifica uno direttamente tramite il blocco di file, questo servizio viene riavviato.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>sources</p>
                  </td>
                  <td tabindex="-1">
                     <p>Un elenco di directory. Se cfn-init espande un archivio in una di queste directory, questo servizio viene riavviato.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>packages</p>
                  </td>
                  <td tabindex="-1">
                     <p>Una mappa del programma di gestione dei pacchetti con l'elenco dei nomi di pacchetto. Se cfn-init installa o aggiorna uno di questi pacchetti, questo servizio viene riavviato.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>comandi</p>
                  </td>
                  <td tabindex="-1">
                     <p>Un elenco di nomi di comando. Se cfn-init esegue il comando specificato, questo servizio viene riavviato.</p>
                  </td>
               </tr>
            </table></div></div>
       
         <h3 id="w9aac23c15c15c23c23c11">Esempi</h3>

          
            <h4 id="w9aac23c15c15c23c23c11b3">Linux</h4>

            <p>Il seguente frammento Linux configura i servizi come segue:</p>
            <div class="itemizedlist">
                
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Il servizio nginx verrà riavviato se <code class="code">/etc/nginx/nginx.conf</code> o <code class="code">/var/www/html</code> vengono modificati da cfn-init.</p>
               </li><li class="listitem">
                  <p>Il servizio php-fastcgi verrà riavviato se cfn-init installa o aggiorna php o spawn-fcgi utilizzando yum.</p>
               </li><li class="listitem">
                  <p>Il servizio sendmail verrà interrotto e disabilitato utilizzando systemd.</p>
               </li></ul></div>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-services-example1.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"services" : <span>{</span>
  "sysvinit" : <span>{</span>
    "nginx" : <span>{</span>
      "enabled" : "true",
      "ensureRunning" : "true",
      "files" : ["/etc/nginx/nginx.conf"],
      "sources" : ["/var/www/html"]
    },
    "php-fastcgi" : <span>{</span>
      "enabled" : "true",
      "ensureRunning" : "true",
      "packages" : <span>{</span> "yum" : ["php", "spawn-fcgi"] }
    }
  },
  "systemd": <span>{</span>
    "sendmail" : <span>{</span>
      "enabled" : "false",
      "ensureRunning" : "false"
    }
  }
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-services-example1.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">services:
  sysvinit:
    nginx:
      enabled: "true"
      ensureRunning: "true"
      files:
        - "/etc/nginx/nginx.conf"
      sources:
        - "/var/www/html"
    php-fastcgi:
      enabled: "true"
      ensureRunning: "true"
      packages:
        yum:
          - "php"
          - "spawn-fcgi"
  systemd:
    sendmail:
      enabled: "false"
      ensureRunning: "false"</code></pre>
               <p>Per usare systemd con un servizio, il servizio deve avere un file di unità systemd configurato. Il seguente file di unità consente a systemd di avviare e arrestare il daemon <a href="./cfn-hup.html">cfn-hup</a> nella destinazione del servizio multiutente:</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="conf ">[Unit]
Description=cfn-hup daemon
[Service]
ExecStart=/usr/bin/cfn-hup -v
PIDFile=/var/run/cfn-hup.pid
[Install]
WantedBy=multi-user.target</code></pre>
               <p>Questa configurazione presuppone che cfn-hup sia installato nella directory <em>/usr/bin</em>. Tuttavia, la posizione effettiva in cui è installato cfn-hup potrebbe variare su piattaforme diverse. Puoi ignorare questa configurazione creando un file di sostituzione in <em>/etc/systemd/system/cfn-hup.service.d/override.conf</em> come segue:</p>
                  
                  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="conf "># In this example, cfn-hup executable is available under /usr/local/bin
[Service]
ExecStart=
ExecStart=/usr/local/bin/cfn-hup -v</code></pre>
            </div>
          
          
            <h4 id="aws-resource-init-windows-example">Windows</h4>

            <p>Il seguente frammento Windows avvia il servizio <a href="./cfn-hup.html">cfn-hup</a>, lo imposta sulla modalità automatica e lo riavvia se <code class="code">cfn-init</code> modifica i file di configurazione specificati:</p>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-services-example2.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"services" : <span>{</span>
  "windows" : <span>{</span>
    "cfn-hup" : <span>{</span>
      "enabled" : "true",
      "ensureRunning" : "true",
      "files" : ["c:\\cfn\\cfn-hup.conf", "c:\\cfn\\hooks.d\\cfn-auto-reloader.conf"]
    }
  }
}</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-services-example2.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">services:
  windows:
    cfn-hup:
      enabled: "true"
      ensureRunning: "true"
      files:
        - "c:\\cfn\\cfn-hup.conf"
        - "c:\\cfn\\hooks.d\\cfn-auto-reloader.conf"</code></pre>
            </div>
          
       
    
      <h2 id="aws-resource-init-sources">Origini</h2>

      <p>È possibile utilizzare la chiave origini per scaricare un file di archivio e decomprimerlo in una directory di destinazione nell'istanza EC2. Questa chiave è completamente supportata sia sui sistemi Linux che sui sistemi Windows.</p>
       
         <h6>Formati supportati</h6>
         <p>I formati supportati sono:</p>
       
      <div class="itemizedlist">
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><code class="code">tar</code></p>
         </li><li class="listitem">
            <p><code class="code">tar+gzip</code></p>
         </li><li class="listitem">
            <p><code class="code">tar+bz2</code></p>
         </li><li class="listitem">
            <p><code class="code">zip</code></p>
         </li></ul></div>
     
         <h3 id="aws-resource-init-sources-examples">Esempi</h3>
      
            <h4 id="aws-resource-init-sources-examples-github">GitHub</h4>
            <p>Se si utilizza  GitHub  come sistema di controllo del codice sorgente, è possibile utilizzare cfn-init e il meccanismo del pacchetto sources per estrarre una versione specifica dell'applicazione.  GitHub consente di creare un file.zip o un .tar da una versione specifica tramite un URL come segue:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="text ">https://github.com/&lt;your directory&gt;/(zipball|tarball)/&lt;version&gt;</code></pre>
            <p>Ad esempio, il frammento seguente estrae la versione <em>main</em> come file <code>.tar</code>.</p>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-sources-example1.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"sources" : <span>{</span>
  "/etc/puppet" : "https://github.com/user1/cfn-demo/tarball/main"
  }</code></pre>
            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-sources-example1.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">sources:
  /etc/puppet: "https://github.com/user1/cfn-demo/tarball/main"</code></pre>
            </div>
          
      
            <h4 id="aws-resource-init-sources-examples-s3">Bucket S3</h4>
            <p>L'esempio seguente scarica un tarball da un bucket S3 e lo decomprime in <code class="code">/etc/myapp</code>:</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>È possibile utilizzare le credenziali di autenticazione per un'origine. Tuttavia, non è possibile inserire un codice di autenticazione nel blocco sources. Al suo posto, includere una chiave dei bucket nel proprio blocco <code class="code">S3AccessCreds</code>. Per ulteriori informazioni sulle credenziali di autenticazione Amazon S3, consulta <a href="./aws-resource-authentication.html">AWS::CloudFormation::Authentication</a>.</p><p><span>Per un esempio, consulta il <a href="https://s3.amazonaws.com/cloudformation-templates-us-east-1/S3Bucket_SourceAuth.template" rel="noopener noreferrer" target="_blank"><span>modello di esempio</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</span></p></div></div>
            <div id="JSON" name="JSON" class="section langfilter">
               <h5 id="aws-resource-init-sources-example2.json">JSON</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"sources" : <span>{</span>
  "/etc/myapp" : "https://s3.amazonaws.com/mybucket/myapp.tar.gz"
  }</code></pre>
               
               
               

            </div>
            <div id="YAML" name="YAML" class="section langfilter">
               <h5 id="aws-resource-init-sources-example2.yaml">YAML</h5>

               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">sources:
  /etc/myapp: "https://s3.amazonaws.com/mybucket/myapp.tar.gz"</code></pre>
               
               
               


            </div>
          
       
    
      <h2 id="aws-resource-init-users">Utenti</h2>

      <p>Puoi utilizzare la chiave utenti per creare utenti Linux/UNIX nell'istanza EC2. La chiave utenti non è supportata per i sistemi Windows.</p>
      <p>La tabella seguente elenca le chiavi supportate.</p>
      <div class="table-container"><div class="table-contents"><table id="w1348aac17c17c17c19c29b7"><thead>
               <tr>
                  <th>Chiave</th>
                  <th>Descrizione</th>
               </tr>
            </thead>
               <tr>
                  <td tabindex="-1">
                     <p>uid</p>
                  </td>
                  <td tabindex="-1">
                     <p>Un ID utente. Il processo di creazione non riesce se esiste un nome utente con un ID utente differente. Se l'ID utente è già assegnato a un utente esistente, il sistema operativo può respingere la richiesta di creazione.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>gruppi</p>
                  </td>
                  <td tabindex="-1">
                     <p>Un elenco di nomi di gruppo. L'utente viene aggiunto a ogni gruppo nell'elenco.</p>
                  </td>
               </tr>
               <tr>
                  <td tabindex="-1">
                     <p>homeDir</p>
                  </td>
                  <td tabindex="-1">
                     <p>La home directory dell'utente.</p>
                  </td>
               </tr>
            </table></div></div>
       
         <h3 id="aws-resource-init-users-example">Esempio</h3>

         <p>Gli utenti vengono creati come utenti di sistema non interattivo con una shell di <code class="code">/sbin/nologin</code>. Questa è un'impostazione predefinita e non può essere modificata.</p>
         <div id="JSON" name="JSON" class="section langfilter">
            <h4 id="aws-resource-init-users-example.json">JSON</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"users" : <span>{</span>
    "myUser" : <span>{</span>
        "groups" : ["groupOne", "groupTwo"],
        "uid" : "50",
        "homeDir" : "/tmp"
    }
}</code></pre>
         </div>
         <div id="YAML" name="YAML" class="section langfilter">
            <h4 id="aws-resource-init-users-example.yaml">YAML</h4>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">users:
  myUser:
    groups:
      - "groupOne"
      - "groupTwo"
    uid: "50"
    homeDir: "/tmp"</code></pre>
         </div>
       
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-resource-authentication.html">AWS::CloudFormation::Authentication</div><div id="next" class="next-link" accesskey="n" href="./aws-resource-cloudformation-interface.html">AWS::CloudFormation::Interface</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-init.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>