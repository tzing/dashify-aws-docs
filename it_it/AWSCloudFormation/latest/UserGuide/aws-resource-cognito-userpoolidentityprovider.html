<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::Cognito::UserPoolIdentityProvider - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-cognito-userpoolidentityprovider" /><meta name="default_state" content="aws-resource-cognito-userpoolidentityprovider" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" /><meta name="description" content="Use the AWS CloudFormation AWS::Cognito::UserPoolIdentityProvider resource for Cognito." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_Cognito.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" hreflang="x-default" /><meta name="feedback-item" content="Amazon Cognito" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::Cognito::UserPoolIdentityProvider" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::Cognito::UserPoolIdentityProvider - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Amazon%20Cognito&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon Cognito resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_Cognito.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::Cognito::UserPoolIdentityProvider",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_Cognito.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_Cognito.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-cognito-userpoolidentityprovider-syntax">Syntax</a><a href="#aws-resource-cognito-userpoolidentityprovider-properties">Properties</a><a href="#aws-resource-cognito-userpoolidentityprovider-return-values">Return values</a><a href="#aws-resource-cognito-userpoolidentityprovider--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-cognito-userpoolidentityprovider">AWS::Cognito::UserPoolIdentityProvider</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The <code class="code">AWS::Cognito::UserPoolIdentityProvider</code> resource creates an identity
      provider for a user pool.</p><h2 id="aws-resource-cognito-userpoolidentityprovider-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-cognito-userpoolidentityprovider-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::Cognito::UserPoolIdentityProvider",
  "Properties" : <span>{</span>
      "<a href="#cfn-cognito-userpoolidentityprovider-attributemapping">AttributeMapping</a>" : <code class="replaceable">Json</code>,
      "<a href="#cfn-cognito-userpoolidentityprovider-idpidentifiers">IdpIdentifiers</a>" : <code class="replaceable">[ String, ... ]</code>,
      "<a href="#cfn-cognito-userpoolidentityprovider-providerdetails">ProviderDetails</a>" : <code class="replaceable">Json</code>,
      "<a href="#cfn-cognito-userpoolidentityprovider-providername">ProviderName</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-cognito-userpoolidentityprovider-providertype">ProviderType</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-cognito-userpoolidentityprovider-userpoolid">UserPoolId</a>" : <code class="replaceable">String</code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-cognito-userpoolidentityprovider-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::Cognito::UserPoolIdentityProvider
Properties:
  <a href="#cfn-cognito-userpoolidentityprovider-attributemapping">AttributeMapping</a>: <code class="replaceable">Json</code>
  <a href="#cfn-cognito-userpoolidentityprovider-idpidentifiers">IdpIdentifiers</a>: <code class="replaceable">
    - String</code>
  <a href="#cfn-cognito-userpoolidentityprovider-providerdetails">ProviderDetails</a>: <code class="replaceable">Json</code>
  <a href="#cfn-cognito-userpoolidentityprovider-providername">ProviderName</a>: <code class="replaceable">String</code>
  <a href="#cfn-cognito-userpoolidentityprovider-providertype">ProviderType</a>: <code class="replaceable">String</code>
  <a href="#cfn-cognito-userpoolidentityprovider-userpoolid">UserPoolId</a>: <code class="replaceable">String</code>
</code></pre></div><h2 id="aws-resource-cognito-userpoolidentityprovider-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-cognito-userpoolidentityprovider-attributemapping"><span class="term"><code class="code">AttributeMapping</code></span></dt><dd>
         <p>A mapping of IdP attributes to standard and custom user pool attributes.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Json</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-cognito-userpoolidentityprovider-idpidentifiers"><span class="term"><code class="code">IdpIdentifiers</code></span></dt><dd>
         <p>A list of IdP identifiers.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Array of String</p><p><em>Minimum</em>: <code class="code">0</code></p><p><em>Maximum</em>: <code class="code">50</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-cognito-userpoolidentityprovider-providerdetails"><span class="term"><code class="code">ProviderDetails</code></span></dt><dd>
         <p>The scopes, URLs, and identifiers for your external identity provider. The following
examples describe the provider detail keys for each IdP type. These values and their
schema are subject to change. Social IdP <code class="code">authorize_scopes</code> values must match
the values listed here.</p>
         <div class="variablelist">
             
             
             
             
             
             
         <dl>
               <dt><span class="term">OpenID Connect (OIDC)</span></dt>
               <dd>
                  <p>Amazon Cognito accepts the following elements when it can't discover endpoint
                URLs from <code class="code">oidc_issuer</code>: <code class="code">attributes_url</code>,
                    <code class="code">authorize_url</code>, <code class="code">jwks_uri</code>,
                    <code class="code">token_url</code>.</p>
                  <p>Create or update request: <code class="code">"ProviderDetails": <span>{</span>
                    "attributes_request_method": "GET", "attributes_url":
                    "https://auth.example.com/userInfo", "authorize_scopes": "openid profile
                    email", "authorize_url": "https://auth.example.com/authorize",
                    "client_id": "1example23456789", "client_secret":
                    "provider-app-client-secret", "jwks_uri":
                    "https://auth.example.com/.well-known/jwks.json", "oidc_issuer":
                    "https://auth.example.com", "token_url": "https://example.com/token"
                    }</code>
                  </p>
                  <p>Describe response: <code class="code">"ProviderDetails": <span>{</span> "attributes_request_method":
                    "GET", "attributes_url": "https://auth.example.com/userInfo",
                    "attributes_url_add_attributes": "false", "authorize_scopes": "openid
                    profile email", "authorize_url": "https://auth.example.com/authorize",
                    "client_id": "1example23456789", "client_secret":
                    "provider-app-client-secret", "jwks_uri":
                    "https://auth.example.com/.well-known/jwks.json", "oidc_issuer":
                    "https://auth.example.com", "token_url": "https://example.com/token"
                    }</code>
                  </p>
               </dd>
             
               <dt><span class="term">SAML</span></dt>
               <dd>
                  <p>Create or update request with Metadata URL: <code class="code">"ProviderDetails": <span>{</span> "IDPInit": "true",
                    "IDPSignout": "true", "EncryptedResponses" : "true", "MetadataURL":
                    "https://auth.example.com/sso/saml/metadata", "RequestSigningAlgorithm":
                    "rsa-sha256" }</code>
                  </p>
                  <p>Create or update request with Metadata file: <code class="code">"ProviderDetails": <span>{</span> "IDPInit": "true",
                    "IDPSignout": "true", "EncryptedResponses" : "true",  
                    "MetadataFile": "[metadata XML]", "RequestSigningAlgorithm":
                    "rsa-sha256" }</code>
                  </p>
                  <p>The value of <code class="code">MetadataFile</code> must be the plaintext metadata document with all 
                quote (") characters escaped by backslashes.</p>
                  <p>Describe response: <code class="code">"ProviderDetails": <span>{</span> "IDPInit": "true",
                    "IDPSignout": "true", "EncryptedResponses" : "true", "ActiveEncryptionCertificate": "[certificate]",
                    "MetadataURL": "https://auth.example.com/sso/saml/metadata", "RequestSigningAlgorithm":
                    "rsa-sha256", "SLORedirectBindingURI":
                    "https://auth.example.com/slo/saml", "SSORedirectBindingURI":
                    "https://auth.example.com/sso/saml" }</code>
                  </p>
               </dd>
             
               <dt><span class="term">LoginWithAmazon</span></dt>
               <dd>
                  <p>Create or update request: <code class="code">"ProviderDetails": <span>{</span> "authorize_scopes":
                    "profile postal_code", "client_id":
                    "amzn1.application-oa2-client.1example23456789", "client_secret":
                    "provider-app-client-secret"</code>
                  </p>
                  <p>Describe response: <code class="code">"ProviderDetails": <span>{</span> "attributes_url":
                    "https://api.amazon.com/user/profile", "attributes_url_add_attributes":
                    "false", "authorize_scopes": "profile postal_code", "authorize_url":
                    "https://www.amazon.com/ap/oa", "client_id":
                    "amzn1.application-oa2-client.1example23456789", "client_secret":
                    "provider-app-client-secret", "token_request_method": "POST",
                    "token_url": "https://api.amazon.com/auth/o2/token" }</code>
                  </p>
               </dd>
             
               <dt><span class="term">Google</span></dt>
               <dd>
                  <p>Create or update request: <code class="code">"ProviderDetails": <span>{</span> "authorize_scopes":
                    "email profile openid", "client_id":
                    "1example23456789.apps.googleusercontent.com", "client_secret":
                    "provider-app-client-secret" }</code>
                  </p>
                  <p>Describe response: <code class="code">"ProviderDetails": <span>{</span> "attributes_url":
                    "https://people.googleapis.com/v1/people/me?personFields=",
                    "attributes_url_add_attributes": "true", "authorize_scopes": "email
                    profile openid", "authorize_url":
                    "https://accounts.google.com/o/oauth2/v2/auth", "client_id":
                    "1example23456789.apps.googleusercontent.com", "client_secret":
                    "provider-app-client-secret", "oidc_issuer":
                    "https://accounts.google.com", "token_request_method": "POST",
                    "token_url": "https://www.googleapis.com/oauth2/v4/token"
                }</code>
                  </p>
               </dd>
             
               <dt><span class="term">SignInWithApple</span></dt>
               <dd>
                  <p>Create or update request: <code class="code">"ProviderDetails": <span>{</span> "authorize_scopes":
                    "email name", "client_id": "com.example.cognito", "private_key": "1EXAMPLE", 
                    "key_id": "2EXAMPLE", "team_id": "3EXAMPLE" }</code>
                  </p>
                  <p>Describe response: <code class="code">"ProviderDetails": <span>{</span>
                    "attributes_url_add_attributes": "false", "authorize_scopes": "email
                    name", "authorize_url": "https://appleid.apple.com/auth/authorize",
                    "client_id": "com.example.cognito", "key_id": "1EXAMPLE", "oidc_issuer":
                    "https://appleid.apple.com", "team_id": "2EXAMPLE",
                    "token_request_method": "POST", "token_url":
                    "https://appleid.apple.com/auth/token" }</code>
                  </p>
               </dd>
             
               <dt><span class="term">Facebook</span></dt>
               <dd>
                  <p>Create or update request: <code class="code">"ProviderDetails": <span>{</span> "api_version": "v17.0", 
            "authorize_scopes": "public_profile, email", "client_id": "1example23456789", 
            "client_secret": "provider-app-client-secret" }</code>
                  </p>
                  <p>Describe response: <code class="code">"ProviderDetails": 
            <span>{</span> "api_version": "v17.0", "attributes_url": "https://graph.facebook.com/v17.0/me?fields=", 
            "attributes_url_add_attributes": "true", "authorize_scopes": "public_profile, email", 
            "authorize_url": "https://www.facebook.com/v17.0/dialog/oauth", "client_id": 
            "1example23456789", "client_secret": "provider-app-client-secret", "token_request_method": 
            "GET", "token_url": "https://graph.facebook.com/v17.0/oauth/access_token" }</code>
                  </p>
               </dd>
            </dl></div>
      <p><em>Required</em>: No</p><p><em>Type</em>: Json</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-cognito-userpoolidentityprovider-providername"><span class="term"><code class="code">ProviderName</code></span></dt><dd>
         <p>The IdP name.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">[^_\p<span>{</span>Z}][\p<span>{</span>L}\p<span>{</span>M}\p<span>{</span>S}\p<span>{</span>N}\p<span>{</span>P}][^_\p<span>{</span>Z}]+</code></p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">32</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-cognito-userpoolidentityprovider-providertype"><span class="term"><code class="code">ProviderType</code></span></dt><dd>
         <p>The IdP type.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">SAML | Facebook | Google | LoginWithAmazon | SignInWithApple | OIDC</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-cognito-userpoolidentityprovider-userpoolid"><span class="term"><code class="code">UserPoolId</code></span></dt><dd>
         <p>The user pool ID.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">[\w-]+_[0-9a-zA-Z]+</code></p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">55</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd></dl></div><h2 id="aws-resource-cognito-userpoolidentityprovider-return-values">Return values</h2><h3 id="aws-resource-cognito-userpoolidentityprovider-return-values-ref">Ref</h3><p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns physicalResourceId, which is â€œProviderName". For
      example:</p><p>
      <code class="code"><span>{</span> "Ref": "testProvider" }</code>
    </p><p>For the Amazon Cognito identity provider <code class="code">testProvider</code>, Ref returns the name
      of the identity provider.</p><p>For more information about using the <code class="code">Ref</code> function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html"><code class="code">Ref</code></a>.</p><h3 id="aws-resource-cognito-userpoolidentityprovider-return-values-fn--getatt">Fn::GetAtt</h3><p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following are the available attributes and sample return values.</p>
<p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html"><code class="code">Fn::GetAtt</code></a>.</p><h4 id="aws-resource-cognito-userpoolidentityprovider-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist"><dl><dt id="Id-fn::getatt"><span class="term"><code class="code">Id</code></span></dt><dd>
    <p>The resource ID.</p>
  </dd></dl></div><h2 id="aws-resource-cognito-userpoolidentityprovider--examples">Examples</h2><p></p><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Login_with_Amazon_identity_provider">Creating a new Login with Amazon identity provider</a></li><li><a href="#aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Google_identity_provider">Creating a new Google identity provider</a></li><li><a href="#aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Facebook_identity_provider">Creating a new Facebook identity provider</a></li><li><a href="#aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Sign_in_with_Apple_identity_provider">Creating a new Sign in with Apple identity provider</a></li><li><a href="#aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_OIDC_identity_provider">Creating a new OIDC identity provider</a></li><li><a href="#aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_SAML_identity_provider">Creating a new SAML identity provider</a></li></ul></div><h3 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Login_with_Amazon_identity_provider">Creating a new Login with Amazon identity provider</h3><p>The following example creates a Login with Amazon identity provider in the referenced
          user pool.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Login_with_Amazon_identity_provider--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "UserPoolIdentityProvider": <span>{</span>
    "Type": "AWS::Cognito::UserPoolIdentityProvider",
    "Properties": <span>{</span>
      "UserPoolId": <span>{</span>
        "Ref": "UserPool"
      },
      "ProviderName": "LoginWithAmazon",
      "ProviderDetails": <span>{</span>
        "client_id": "YourLoginWithAmazonAppId",
        "client_secret": "YourLoginWithAmazonAppSecret",
        "authorize_scopes": "profile postal_code"
      },
      "ProviderType": "LoginWithAmazon",
      "AttributeMapping": <span>{</span>
        "email": "email"
      }
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Login_with_Amazon_identity_provider--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">UserPoolIdentityProvider:
  Type: AWS::Cognito::UserPoolIdentityProvider
  Properties:
    UserPoolId: !Ref UserPool
    ProviderName: "LoginWithAmazon"
    ProviderDetails:
      client_id: "YourLoginWithAmazonAppId"
      client_secret: "YourLoginWithAmazonAppSecret"
      authorize_scopes: "profile postal_code"
    ProviderType: "LoginWithAmazon"
    AttributeMapping:
      email: "email"</code></pre></div><h3 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Google_identity_provider">Creating a new Google identity provider</h3><p>The following example creates a Google identity provider in the referenced user
          pool.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Google_identity_provider--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "UserPoolIdentityProvider": <span>{</span>
    "Type": "AWS::Cognito::UserPoolIdentityProvider",
    "Properties": <span>{</span>
      "UserPoolId": <span>{</span>
        "Ref": "UserPool"
      },
      "ProviderName": "Google",
      "ProviderDetails": <span>{</span>
        "client_id": "YourGoogleAppId",
        "client_secret": "YourGoogleAppSecret",
        "authorize_scopes": "profile email openid"
      },
      "ProviderType": "Google",
      "AttributeMapping": <span>{</span>
        "email": "email"
      }
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Google_identity_provider--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">UserPoolIdentityProvider:
  Type: AWS::Cognito::UserPoolIdentityProvider
  Properties:
    UserPoolId: !Ref UserPool
    ProviderName: "Google"
    ProviderDetails:
      client_id: "YourGoogleAppId"
      client_secret: "YourGoogleAppSecret"
      authorize_scopes: "profile email openid"
    ProviderType: "Google"
    AttributeMapping:
      email: "email"</code></pre></div><h3 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Facebook_identity_provider">Creating a new Facebook identity provider</h3><p>The following example creates a Facebook identity provider in the referenced user
          pool.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Facebook_identity_provider--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "UserPoolIdentityProvider": <span>{</span>
    "Type": "AWS::Cognito::UserPoolIdentityProvider",
    "Properties": <span>{</span>
      "UserPoolId": <span>{</span>
        "Ref": "UserPool"
      },
      "ProviderName": "Facebook",
      "ProviderDetails": <span>{</span>
        "client_id": "YourFacebookAppId",
        "client_secret": "YourFacebookAppSecret",
        "authorize_scopes": "public_profile,email"
      },
      "ProviderType": "Facebook",
      "AttributeMapping": <span>{</span>
        "email": "email"
      }
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Facebook_identity_provider--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">UserPoolIdentityProvider:
  Type: AWS::Cognito::UserPoolIdentityProvider
  Properties:
    UserPoolId: !Ref UserPool
    ProviderName: "Facebook"
    ProviderDetails:
      client_id: "YourFacebookAppId"
      client_secret: "YourFacebookAppSecret"
      authorize_scopes: "public_profile,email"
    ProviderType: "Facebook"
    AttributeMapping:
      email: "email"</code></pre></div><h3 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Sign_in_with_Apple_identity_provider">Creating a new Sign in with Apple identity provider</h3><p>The following example creates a Sign in with Apple identity provider in the referenced
          user pool.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Sign_in_with_Apple_identity_provider--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "UserPoolIdentityProvider": <span>{</span>
    "Type": "AWS::Cognito::UserPoolIdentityProvider",
    "Properties": <span>{</span>
      "UserPoolId": <span>{</span>
        "Ref": "UserPool"
      },
      "ProviderName": "SignInWithApple",
      "ProviderDetails": <span>{</span>
        "client_id": "YourAppleServicesId",
        "team_id": "YourAppleTeamId",
        "key_id": "YourApplePrivateKeyID",
        "private_key": "YourApplePrivateKey",
        "authorize_scopes": "public_profile,email"
      },
      "ProviderType": "SignInWithApple",
      "AttributeMapping": <span>{</span>
        "email": "email"
      }
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_Sign_in_with_Apple_identity_provider--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">UserPoolIdentityProvider:
  Type: AWS::Cognito::UserPoolIdentityProvider
  Properties:
    UserPoolId: !Ref UserPool
    ProviderName: "SignInWithApple"
    ProviderDetails:
      client_id: "YourSign"
      team_id: "YourAppleTeamId"
      key_id: "YourApplePrivateKeyID"
      private_key: "YourApplePrivateKey"
      authorize_scopes: "public_profile,email"
    ProviderType: "SignInWithApple"
    AttributeMapping:
      email: "email"</code></pre></div><h3 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_OIDC_identity_provider">Creating a new OIDC identity provider</h3><p>The following example creates the OIDC identity provider "YourOIDCProviderName" in the
          referenced user pool.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_OIDC_identity_provider--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "UserPoolIdentityProvider": <span>{</span>
    "Type": "AWS::Cognito::UserPoolIdentityProvider",
    "Properties": <span>{</span>
      "UserPoolId": <span>{</span>
        "Ref": "UserPool"
      },
      "ProviderName": "YourOIDCProviderName",
      "ProviderDetails": <span>{</span>
        "client_id": "YourOIDCClientId",
        "client_secret": "YourOIDCClientSecret",
        "attributes_request_method": "GET",
        "oidc_issuer": "YourOIDCIssuerURL",
        "authorize_scopes": "email profile openid"
      },
      "ProviderType": "OIDC",
      "AttributeMapping": <span>{</span>
        "email": "email"
      },
      "IdpIdentifiers": [
        "IdpIdentifier"
      ]
    }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_OIDC_identity_provider--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">UserPoolIdentityProvider:
  Type: AWS::Cognito::UserPoolIdentityProvider
  Properties:
    UserPoolId: !Ref UserPool
    ProviderName: "YourOIDCProviderName"
    ProviderDetails:
      client_id: "YourOIDCClientId"
      client_secret: "YourOIDCClientSecret"
      attributes_request_method: "GET"
      oidc_issuer: "YourOIDCIssuerURL"
      authorize_scopes: "email profile openid"
    ProviderType: "OIDC"
    AttributeMapping:
      email: "email"
    IdpIdentifiers:
      - "IdpIdentifier"</code></pre></div><h3 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_SAML_identity_provider">Creating a new SAML identity provider</h3><p>The following example creates a SAML identity provider "YourProviderName" in the
          referenced user pool.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_SAML_identity_provider--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "UserPoolIdentityProvider": <span>{</span>
      "Type": "AWS::Cognito::UserPoolIdentityProvider",
      "Properties": <span>{</span>
         "UserPoolId": <span>{</span>"Ref": "UserPool"},
         "ProviderName": "YourProviderName",
         "ProviderDetails": <span>{</span>
            "MetadataURL": "YourMetadataURL"
         },
         "ProviderType": "SAML",
         "AttributeMapping": <span>{</span>
            "email": "Attribute"
         },
         "IdpIdentifiers": [
            "IdpIdentifier"
         ]
      }
   }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-cognito-userpoolidentityprovider--examples--Creating_a_new_SAML_identity_provider--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">UserPoolIdentityProvider:
  Type: AWS::Cognito::UserPoolIdentityProvider
  Properties:
    UserPoolId: !Ref UserPool
    ProviderName: "YourProviderName"
    ProviderDetails:
      MetadataURL: "YourMetadataURL"
    ProviderType: "SAML"
    AttributeMapping:
      email: "Attribute"
    IdpIdentifiers:
      - "IdpIdentifier"</code></pre></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-resource-cognito-userpoolgroup.html">AWS::Cognito::UserPoolGroup</div><div id="next" class="next-link" accesskey="n" href="./aws-resource-cognito-userpoolresourceserver.html">AWS::Cognito::UserPoolResourceServer</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Amazon Cognito&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Amazon Cognito&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-cognito-userpoolidentityprovider.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>