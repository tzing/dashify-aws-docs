<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Rollback di un aggiornamento - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-cfn-updating-stacks-continueupdaterollback" /><meta name="default_state" content="using-cfn-updating-stacks-continueupdaterollback" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="description" content="Per uno stack nello stato UPDATE_ROLLBACK_FAILED, correggi l'errore che ha causato il guasto e continua il ripristino dell'aggiornamento per restituire lo stack a uno stato attivo (UPDATE_ROLLBACK_COMPLETE)." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guida per l'utente" /><meta name="abstract" content="Crea e gestisci le implementazioni AWS dell'infrastruttura in modo prevedibile e ripetuto utilizzando questa guida per AWS CloudFormation l'utente." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guida per l'utente" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guida per l'utente" /><meta id="panorama-serviceConsolePage" value="Rollback di un aggiornamento" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Rollback di un aggiornamento - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisioning delle risorse,configurazione delle risorse,gestione dell'infrastruttura,CloudFormer,CloudFormation pila,CloudFormation modello,set di modifiche" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per l'utente",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Utilizzo degli stack di",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Aggiornamenti di stack AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Rollback di un aggiornamento",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guida per l'utente</a></div><div id="page-toc-src"><a href="#nested-stacks">Utilizzo di ResourcesToSkip per recuperare una gerarchia di stack nidificati.</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="using-cfn-updating-stacks-continueupdaterollback">Rollback di un aggiornamento</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Uno stack entra nello <code class="code">UPDATE_ROLLBACK_FAILED</code> stato in cui non è AWS CloudFormation possibile ripristinare tutte le modifiche durante un aggiornamento. Ad esempio, potresti avere uno stack che inizia a tornare a una vecchia istanza di database che è stata eliminata all'esterno di.  CloudFormation Poiché  CloudFormation  non sa che il database è stato eliminato, presuppone che l'istanza del database esista ancora e tenta di ripristinarla, causando il fallimento del rollback dell'aggiornamento.</p><p>Quando uno stack è nello stato <code class="code">UPDATE_ROLLBACK_FAILED</code>, puoi continuare a eseguire il rollback a uno stato attivo (<code class="code">UPDATE_ROLLBACK_COMPLETE</code>). Non puoi aggiornare uno stack che si trova nello stato <code class="code">UPDATE_ROLLBACK_FAILED</code>. Tuttavia, puoi continuare a eseguire il rollback, puoi restituire lo stack alle impostazioni originali e provare ad aggiornarlo di nuovo.</p><p>Nella maggior parte dei casi, devi correggere l'errore che causa un guasto durante l'aggiornamento del rollback prima di poter continuare a eseguire il rollback dello stack. Per ulteriori informazioni, consulta . In altri casi, puoi continuare a eseguire il rollback dell'aggiornamento senza alcuna modifica, ad esempio quando un'operazione stack scade.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Se utilizzi gli stack nidificati, il rollback dello stack padre cercherà di eseguire il rollback anche su tutti gli stack figlio.</p></div></div><div class="procedure"><h6>Per continuare il rollback di un aggiornamento (console)</h6><ol><li><p><a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>Apri la AWS CloudFormation console all'indirizzo https://console.aws.amazon.com/cloudformation.</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p></li><li>
      <p>Selezionare lo stack che desideri aggiornare, quindi <b>Actions (Operazioni)</b> e in seguito <b>Continue Update Rollback (Continua rollback aggiornamento)</b>.</p>

      <p>Se nessuna delle soluzioni <a href="./troubleshooting.html#troubleshooting-errors">Risoluzione degli errori</a> funziona, puoi utilizzare l'opzione avanzata per ignorare le risorse che non  CloudFormation possono essere ripristinate correttamente. Devi <a href="./cfn-console-view-stack-data-resources.html">ricercare</a> e digitare gli ID logici delle risorse che desideri ignorare. Specificate solo le risorse che sono state inserite nello <code class="code">UPDATE_FAILED</code> stato durante <code class="code">UpdateRollback</code> e non durante l'aggiornamento successivo.</p>
      <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>avvertimento</h6></div><div class="awsdocs-note-text"><p>CloudFormation imposta lo stato delle risorse specificate su <code class="code">UPDATE_COMPLETE</code> e continua a ripristinare lo stack. Dopo aver completato il rollback, lo stato delle risorse saltate saranno incoerenti con lo stato delle risorse nel modello di stack. Prima di eseguire un altro aggiornamento dello stack, devi aggiornare lo stack o le risorse in modo che siano coerenti. Altrimenti, i successivi aggiornamenti dello stack potrebbero fallire e lo stack diventerà irrecuperabile.</p></div></div>
      <p>Specifica il numero minimo di risorse necessarie per eseguire il rollback dello stack. Ad esempio, un aggiornamento della risorsa non riuscito potrebbe causare errori nelle risorse dipendenti. In questo caso, potrebbe non essere necessario ignorare le risorse dipendenti.</p>
      <p>Per ignorare le risorse che fanno parte di stack nidificati, utilizzare il formato seguente: <code class="code"><code class="replaceable">NestedStackName</code>.<code class="replaceable">ResourceLogicalID</code></code>. Se desideri specificare l'ID logico di una risorsa stack (<code class="code">Type: AWS::CloudFormation::Stack</code>) nell'elenco <code class="code">ResourcesToSkip</code>, lo stack corrispondente incorporato deve essere in uno dei seguenti stati: <code class="code">DELETE_IN_PROGRESS</code><code class="code">DELETE_COMPLETE</code> o <code class="code">DELETE_FAILED</code>.</p>
    </li></ol></div><div class="procedure"><h6>Per continuare il rollback di un aggiornamento (AWS CLI)</h6><ul><li>
   <p>Utilizza il comando <code class="code"><a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/continue-update-rollback.html">aws cloudformation continue-update-rollback</a></code> con l'opzione <code class="code">stack-name</code> per specificare l'ID dello stack sul quale desideri continuare a eseguire il rollback.</p></li></ul></div><h2 id="nested-stacks">Utilizzo di <code class="code">ResourcesToSkip</code> per recuperare una gerarchia di stack nidificati.</h2>
    
    <p>Il seguente diagramma mostra una gerarchia di stack nidificati nello stato <code class="code">UPDATE_ROLLBACK_FAILED</code>. In questo esempio, lo stack root <code class="code">WebInfra</code> ha due stack nidificati: <code class="code">WebInfra-Compute</code> e <code class="code">WebInfra-Storage</code> che dispongono di uno o più stack nidificati.</p>
    <div class="mediaobject">
       
        <img src="images/cfn-update-stack-continue-update-rollback_nested-stacks.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Un diagramma che mostra una gerarchia di stack nidificati su tre livelli.&#xA;      " style="max-width:100%" />
       
       
    </div>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>I nomi di stack in questo esempio vengono troncati per semplicità. I nomi degli stack secondari sono in genere generati  CloudFormation  e contengono stringhe casuali univoche, pertanto i nomi effettivi potrebbero non essere facili da usare.</p></div></div>      
    <p>Per fare in modo che lo stack root abbia uno stato operabile utilizzando <code class="code">continue-update-rollback</code>, devi utilizzare il parametro <code class="code">resources-to-skip</code> per saltare le risorse per le quali non è riuscito il rollback. In questo esempio, <code class="code">resources-to-skip</code> deve includere i seguenti elementi:</p>
    <div class="orderedlist">
       
       
       
       
    <ol><li><p>myCustom</p></li><li><p>WebInfra-Compute-asg.myasg</p></li><li><p>WebInfra-Calcola-LB. myLoadBalancer</p></li><li><p>WebInfra-Storage.DB</p></li></ol></div>
    <p>L'esempio seguente è il AWS CLI comando completo:</p>
    <pre class="programlisting"><div class="code-btn-container"></div><code class="sh "><code class="prompt" copy="false">$ </code><code class="userinput">aws cloudformation continue-update-rollback --stack-name WebInfra \
    --resources-to-skip myCustom WebInfra-Compute-Asg.myAsg WebInfra-Compute-LB.myLoadBalancer WebInfra-Storage.DB</code></code></pre>
    <p>Abbiamo specificato risorse da stack nidificati utilizzando il formato <code class="code"><code class="replaceable">NestedStackName</code>.<code class="replaceable">ResourceLogicalID</code></code>, ma per le risorse dello stack root, ad esempio <em>myCustom</em>, abbiamo specificato solo l'ID logico.</p>
    <p><b>Trovare il nome dello stack di uno stack nidificato</b></p>
    <p>Puoi trovare un nome dello stack figlio nell'ID dello stack o nel nome ARN (Amazon Resource Name). Nell'esempio seguente, il nome dello stack è <em>WebInfra-storage-Z2VKC706XKXT</em>:</p>
    <p><code class="code">arn:aws:cloudformation:us-east-1:123456789012:stack/WebInfra-Storage-Z2VKC706XKXT/ea9e7f90-54f7-11e6-a032-028f3d2330bd</code></p>  
    <p><b>Trovare l'ID logico di uno stack nidificato</b></p>
    <p>Puoi trovare l'ID logico dello stack figlio nella definizione del modello del padre. Nel diagramma, <code class="code">LogicalId</code> di <code class="code">WebInfra-Storage-DB</code> dello stack figlio è <em>DB</em> nel <code class="code">WebInfra-Storage</code> padre.</p>
    <p><b><b>Nella  CloudFormation  console, puoi anche trovare l'ID logico nella colonna ID logico per la risorsa dello stack nella scheda Risorse o nella <b>scheda Eventi.</b></b></b></p>
<awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./protect-stack-resources.html">Impedire gli aggiornamenti delle risorse stack</div><div id="next" class="next-link" accesskey="n" href="./using-cfn-stack-drift.html">Rilevamento di modifiche non gestite della configurazione di stack e risorse</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-continueupdaterollback.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>