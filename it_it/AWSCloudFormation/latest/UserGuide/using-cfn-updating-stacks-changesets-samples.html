<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Esempio di set di modifiche - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-cfn-updating-stacks-changesets-samples" /><meta name="default_state" content="using-cfn-updating-stacks-changesets-samples" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" /><meta name="description" content="Impara dagli esempi di set di AWS CloudFormation modifiche." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guida per l'utente" /><meta name="abstract" content="Crea e gestisci le implementazioni AWS dell'infrastruttura in modo prevedibile e ripetuto utilizzando questa guida per AWS CloudFormation l'utente." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guida per l'utente" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guida per l'utente" /><meta id="panorama-serviceConsolePage" value="Esempio di set di modifiche" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Esempio di set di modifiche - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisioning delle risorse,configurazione delle risorse,gestione dell'infrastruttura,CloudFormer,CloudFormation pila,CloudFormation modello,set di modifiche" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per l'utente",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Utilizzo degli stack di",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Aggiornamenti di stack AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Aggiornamento di stack utilizzando i set di modifiche",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Esempio di set di modifiche",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guida per l'utente</a></div><div id="page-toc-src"><a href="#using-cfn-updating-stacks-changesets-samples-directly-editing-a-template">Modifica diretta di un modello</a><a href="#using-cfn-updating-stacks-changesets-samples-modifying-a-single-input-parameter-value">Modifica del valore di un parametro di input.</a><a href="#using-cfn-updating-stacks-changesets-samples-determining-the-value-of-the-replacement-field">Determinazione del valore del campo sostitutivo</a><a href="#using-cfn-updating-stacks-changesets-samples-adding-and-removing-resources">Aggiunta e rimozione di risorse</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="using-cfn-updating-stacks-changesets-samples">Esempio di set di modifiche</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Questa sezione fornisce esempi dei set di modifiche che si  CloudFormation  potrebbero creare per le modifiche più comuni allo stack. Mostrano come modificare un modello direttamente, modificare un parametro di input singolo. pianificare per la ricreazione di risorse (sostituzioni), che impedisce di perdere i dati per i quali non è stato eseguito il backup o interrompere le applicazioni che sono in esecuzione nello stack;, nonché aggiungere e rimuovere le risorse. Per illustrare il modo in cui funzionano i set di modifiche, ti mostreremo le modifiche inviate e parleremo dei set di modifiche risultanti. Poiché ogni esempio si basa su e presuppone che l'esempio precedente sia stato compreso, ti consigliamo di leggerli in ordine. Per una descrizione di ogni campo in un set di modifiche, consulta il tipo di dati <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_Change.html">Change</a> (Modifica) nella <em>Documentazione di riferimento all'API diAWS CloudFormation </em>.</p><p>È possibile utilizzare la <a href="./using-cfn-updating-stacks-changesets-view.html">console</a> o il AWS CLIfunzionamento dell' CloudFormation<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_DescribeChangeSet.html"><code class="code">DescribeChangeSet</code></a>API per visualizzare i dettagli dei set di modifiche.</p><p>Abbiamo generato ciascuno dei seguenti set di modifiche da uno stack con il seguente <a href="https://s3.amazonaws.com/cloudformation-examples/user-guide/changesets/ec2-instance.txt" rel="noopener noreferrer" target="_blank"><span>modello di esempio</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Description" : "A sample EC2 instance template for testing change sets.",
  "Parameters" : <span>{</span>
    "Purpose" : <span>{</span>
      "Type" : "String",
      "Default" : "testing",
      "AllowedValues" : ["testing", "production"],
      "Description" : "The purpose of this instance."
    },
    "KeyPairName" : <span>{</span>
      "Type": "AWS::EC2::KeyPair::KeyName",
      "Description" : "Name of an existing EC2 KeyPair to enable SSH access to the instance"
    },
    "InstanceType" : <span>{</span>
      "Type" : "String",
      "Default" : "t2.micro",
      "AllowedValues" : ["t2.micro", "t2.small", "t2.medium"],
      "Description" : "The EC2 instance type."
    }
  },
  "Resources" : <span>{</span>
    "MyEC2Instance" : <span>{</span>
      "Type" : "AWS::EC2::Instance",
      "Properties" : <span>{</span>
        "KeyName" : <span>{</span> "Ref" : "KeyPairName" },
        "InstanceType" : <span>{</span> "Ref" : "InstanceType" },
        "ImageId" : "ami-8fcee4e5",
        "Tags" : [
          <span>{</span>
            "Key" : "Purpose",
            "Value" : <span>{</span> "Ref" : "Purpose" }
          }
        ]
      }
    }
  }
}</code></pre>
      <h2 id="using-cfn-updating-stacks-changesets-samples-directly-editing-a-template">Modifica diretta di un modello</h2>

      <p>Quando si modificano direttamente le risorse nel modello dello stack per generare un set di modifiche,  CloudFormation  classifica la modifica come diretta, anziché come modifica iniziata da un valore di parametro aggiornato. I seguenti set di modifiche, che hanno aggiunto un nuovo tag all'istanza <code class="code">i-1abc23d4</code>, è un esempio di modifica diretta. Tutti gli altri valori di input, ad esempio i valori dei parametri e le capacità, sono invariati, perciò ci concentreremo sulla struttura <code class="code">Changes</code>.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/SampleStack/1a2345b6-0000-00a0-a123-00abc0abc000",
    "Status": "CREATE_COMPLETE",
    "ChangeSetName": "SampleChangeSet-direct",
    "Parameters": [
        <span>{</span>
            "ParameterValue": "testing",
            "ParameterKey": "Purpose"
        },
        <span>{</span>
            "ParameterValue": "MyKeyName",
            "ParameterKey": "KeyPairName"
        },
        <span>{</span>
            "ParameterValue": "t2.micro",
            "ParameterKey": "InstanceType"
        }
    ],
    "Changes": [
        <span>{</span>
            "ResourceChange": <span>{</span>
                "ResourceType": "AWS::EC2::Instance",
                "PhysicalResourceId": "i-1abc23d4",
                "Details": [
                    <span>{</span>
                        "ChangeSource": "DirectModification",
                        "Evaluation": "Static",
                        "Target": <span>{</span>
                            "Attribute": "Tags",
                            "RequiresRecreation": "Never"
                        }
                    }
                ],
                "Action": "Modify",
                "Scope": [
                    "Tags"
                ],
                "LogicalResourceId": "MyEC2Instance",
                "Replacement": "False"
            },
            "Type": "Resource"
        }
    ],
    "CreationTime": "2020-11-18T23:35:25.813Z",
    "Capabilities": [],
    "StackName": "SampleStack",
    "NotificationARNs": [],
    "ChangeSetId": "arn:aws:cloudformation:us-east-1:123456789012:changeSet/SampleChangeSet-direct/1a2345b6-0000-00a0-a123-00abc0abc000"
}</code></pre>
      <p>Nella struttura <code class="code">Changes</code>, c'è solo una struttura <code class="code">ResourceChange</code>. Questa struttura descrive informazioni come il tipo di risorsa che  CloudFormation  verrà modificato, l'azione che  CloudFormation  verrà intrapresa, l'ID della risorsa, l'ambito della modifica e se la modifica richiede una sostituzione (dove  CloudFormation  crea una nuova risorsa e quindi elimina quella precedente). Nell'esempio, il set di modifiche indica che  CloudFormation  modificherà l'<code class="code">Tags</code>attributo dell'istanza <code class="code">i-1abc23d4</code> EC2 e non richiede la sostituzione dell'istanza.</p>
      <p>Nella <code class="code">Details</code> struttura,  CloudFormation  etichetta questa modifica come una modifica diretta che non richiederà mai la ricreazione (sostituzione) dell'istanza. Puoi eseguire questa modifica con sicurezza, sapendo che  CloudFormation  non sostituirà l'istanza.</p>
      <p>CloudFormation mostra questa modifica come <code class="code">Static</code> valutazione. Una valutazione statica significa che  CloudFormation  può determinare il valore del tag prima di eseguire il set di modifiche. In alcuni casi,  CloudFormation  può determinare un valore solo dopo aver eseguito un set di modifiche.  CloudFormationetichetta tali modifiche come <code class="code">Dynamic</code> valutazioni. Ad esempio, se si fa riferimento a una risorsa aggiornata sostituita in modo condizionale, non è  CloudFormation  possibile determinare se il riferimento alla risorsa aggiornata cambierà.</p>
     
      <h2 id="using-cfn-updating-stacks-changesets-samples-modifying-a-single-input-parameter-value">Modifica del valore di un parametro di input.</h2>

      <p>Quando modificate il valore di un parametro di input,  CloudFormation  genera due modifiche per ogni risorsa che utilizza il valore del parametro aggiornato. In questo esempio, desideriamo evidenziare come appariranno tali modifiche e su quali informazioni dovresti concentrarti. L'esempio seguente è stato generato modificando solo il valore del parametro di input <code class="code">Purpose</code>.</p>
      <p>Il parametro <code class="code">Purpose</code> specifica un valore chiave del tag per l'istanza EC2. In questo esempio, il valore di parametro è stato modificato da <code class="code">testing</code> a <code class="code">production</code>. Il nuovo valore viene illustrato nella struttura <code class="code">Parameters</code>.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/SampleStack/1a2345b6-0000-00a0-a123-00abc0abc000",
    "Status": "CREATE_COMPLETE",
    "ChangeSetName": "SampleChangeSet",
    "Parameters": [
        <span>{</span>
            "ParameterValue": "production",
            "ParameterKey": "Purpose"
        },
        <span>{</span>
            "ParameterValue": "MyKeyName",
            "ParameterKey": "KeyPairName"
        },
        <span>{</span>
            "ParameterValue": "t2.micro",
            "ParameterKey": "InstanceType"
        }
    ],
    "Changes": [
        <span>{</span>
            "ResourceChange": <span>{</span>
                "ResourceType": "AWS::EC2::Instance",
                "PhysicalResourceId": "i-1abc23d4",
                "Details": [
                    <span>{</span>
                        "ChangeSource": "DirectModification",
                        "Evaluation": "Dynamic",
                        "Target": <span>{</span>
                            "Attribute": "Tags",
                            "RequiresRecreation": "Never"
                        }
                    },
                    <span>{</span>
                        "CausingEntity": "Purpose",
                        "ChangeSource": "ParameterReference",
                        "Evaluation": "Static",
                        "Target": <span>{</span>
                            "Attribute": "Tags",
                            "RequiresRecreation": "Never"
                        }
                    }
                ],
                "Action": "Modify",
                "Scope": [
                    "Tags"
                ],
                "LogicalResourceId": "MyEC2Instance",
                "Replacement": "False"
            },
            "Type": "Resource"
        }
    ],
    "CreationTime": "2020-11-18T23:59:18.447Z",
    "Capabilities": [],
    "StackName": "SampleStack",
    "NotificationARNs": [],
    "ChangeSetId": "arn:aws:cloudformation:us-east-1:123456789012:changeSet/SampleChangeSet/1a2345b6-0000-00a0-a123-00abc0abc000"
}</code></pre>
      <p>La struttura <code class="code">Changes</code> funziona in modo analogo a come illustrato nell'esempio <a href="#using-cfn-updating-stacks-changesets-samples-directly-editing-a-template">Modifica diretta di un modello</a>. C'è solo una struttura <code class="code">ResourceChange</code> e descrive una modifica dell'attributo <code class="code">Tags</code> dell'istanza EC2 <code class="code">i-1abc23d4</code>.</p>
      <p>Tuttavia, nella struttura <code class="code">Details</code>, il set di modifiche mostra due modifiche per l'attributo <code class="code">Tags</code>, anche se solo un singolo valore di parametro è stato modificato. Le risorse che referenziano un valore di parametro modificato (tramite la funzione intrinseca <code class="code">Ref</code>) risultano sempre in due modifiche: una con una valutazione <code class="code">Dynamic</code> e un'altra con una valutazione <code class="code">Static</code>. Puoi visualizzare questi tipi di modifiche visualizzando i campi riportati di seguito:</p>
      <div class="itemizedlist">
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p>Per la modifica della valutazione <code class="code">Static</code>, visualizza il campo <code class="code">ChangeSource</code>. In questo esempio, il campo <code class="code">ChangeSource</code> equivale a <code class="code">ParameterReference</code>, il che significa che questa modifica è il risultato del valore di riferimento di un parametro aggiornato. Il set di modifiche deve contenere una modifica di valutazione <code class="code">Dynamic</code> simile.</p>
        </li><li class="listitem">
          <p>Puoi trovare la valutazione <code class="code">Dynamic</code> corrispondente confrontando la struttura <code class="code">Target</code> per entrambe le modifiche, che conterranno le stesse informazioni. In questo esempio, le strutture <code class="code">Target</code> per entrambe le modifiche contengono gli stessi valori per i campi <code class="code">Attribute</code> e <code class="code">RequireRecreation</code>.</p>
        </li></ul></div>
      <p>Per questi tipi di modifiche, concentrarsi sulla valutazione statica, che offre le informazioni più dettagliate sulla modifica. In questo esempio, la valutazione statica mostra che la modifica è il risultato di una modifica del valore di riferimento di un parametro (<code class="code">ParameterReference</code>). L'esatto parametro che è stato modificato è indicato dal campo <code class="code">CauseEntity</code> (il parametro <code class="code">Purpose</code>).</p>
     
      <h2 id="using-cfn-updating-stacks-changesets-samples-determining-the-value-of-the-replacement-field">Determinazione del valore del campo sostitutivo</h2>

      <p>Il <code class="code">Replacement</code> campo in una <code class="code">ResourceChange</code> struttura indica se  CloudFormation  ricreerà la risorsa. La pianificazione per la ricreazione di risorse (sostituzioni) impedisce di perdere i dati per i quali non è stato eseguito il backup o interrompere le applicazioni che sono in esecuzione nello stack.</p>
      <p>Il valore nel campo <code class="code">Replacement</code> varia a seconda che una modifica richieda una sostituzione o meno, come indicato dal campo <code class="code">RequiresRecreation</code> nella struttura <code class="code">Target</code> di una modifica. Ad esempio, se il campo <code class="code">RequiresRecreation</code> è <code class="code">Never</code>, il campo <code class="code">Replacement</code> è <code class="code">False</code>. Tuttavia, se sono presenti più modifiche su una singola risorsa e ogni modifica ha un valore diverso per il <code class="code">RequiresRecreation</code> campo,  CloudFormation  aggiorna la risorsa utilizzando il comportamento più intrusivo. In altre parole, se solo una delle molte modifiche richiede una sostituzione,  CloudFormation  deve sostituire la risorsa e, di conseguenza, impostare il campo <code class="code">Replacement</code> su <code class="code">True</code>.</p>
      <p>I seguenti set di modifiche sono stati generati modificando i valori di ogni parametro (<code class="code">Purpose</code>, <code class="code">InstanceType</code> e <code class="code">KeyPairName</code>), che vengono tutti utilizzati dall'istanza EC2. Con queste modifiche,  CloudFormation  sarà necessario sostituire l'istanza perché il <code class="code">Replacement</code> campo è uguale a<code class="code">True</code>.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/SampleStack/1a2345b6-0000-00a0-a123-00abc0abc000",
    "Status": "CREATE_COMPLETE",
    "ChangeSetName": "SampleChangeSet-multiple",
    "Parameters": [
        <span>{</span>
            "ParameterValue": "production",
            "ParameterKey": "Purpose"
        },
        <span>{</span>
            "ParameterValue": "MyNewKeyName",
            "ParameterKey": "KeyPairName"
        },
        <span>{</span>
            "ParameterValue": "t2.small",
            "ParameterKey": "InstanceType"
        }
    ],
    "Changes": [
        <span>{</span>
            "ResourceChange": <span>{</span>
                "ResourceType": "AWS::EC2::Instance",
                "PhysicalResourceId": "i-7bef86f8",
                "Details": [
                    <span>{</span>
                        "ChangeSource": "DirectModification",
                        "Evaluation": "Dynamic",
                        "Target": <span>{</span>
                            "Attribute": "Properties",
                            "Name": "KeyName",
                            "RequiresRecreation": "Always"
                        }
                    },
                    <span>{</span>
                        "ChangeSource": "DirectModification",
                        "Evaluation": "Dynamic",
                        "Target": <span>{</span>
                            "Attribute": "Properties",
                            "Name": "InstanceType",
                            "RequiresRecreation": "Conditionally"
                        }
                    },
                    <span>{</span>
                        "ChangeSource": "DirectModification",
                        "Evaluation": "Dynamic",
                        "Target": <span>{</span>
                            "Attribute": "Tags",
                            "RequiresRecreation": "Never"
                        }
                    },
                    <span>{</span>
                        "CausingEntity": "KeyPairName",
                        "ChangeSource": "ParameterReference",
                        "Evaluation": "Static",
                        "Target": <span>{</span>
                            "Attribute": "Properties",
                            "Name": "KeyName",
                            "RequiresRecreation": "Always"
                        }
                    },
                    <span>{</span>
                        "CausingEntity": "InstanceType",
                        "ChangeSource": "ParameterReference",
                        "Evaluation": "Static",
                        "Target": <span>{</span>
                            "Attribute": "Properties",
                            "Name": "InstanceType",
                            "RequiresRecreation": "Conditionally"
                        }
                    },
                    <span>{</span>
                        "CausingEntity": "Purpose",
                        "ChangeSource": "ParameterReference",
                        "Evaluation": "Static",
                        "Target": <span>{</span>
                            "Attribute": "Tags",
                            "RequiresRecreation": "Never"
                        }
                    }
                ],
                "Action": "Modify",
                "Scope": [
                    "Tags",
                    "Properties"
                ],
                "LogicalResourceId": "MyEC2Instance",
                "Replacement": "True"
            },
            "Type": "Resource"
        }
    ],
    "CreationTime": "2020-11-18T00:39:35.974Z",
    "Capabilities": [],
    "StackName": "SampleStack",
    "NotificationARNs": [],
    "ChangeSetId": "arn:aws:cloudformation:us-east-1:123456789012:changeSet/SampleChangeSet-multiple/1a2345b6-0000-00a0-a123-00abc0abc000"
}</code></pre>
      <p>Identificare la modifica che richiede che la risorsa venga sostituita visualizzando ogni modifica (le valutazioni statiche nella struttura <code class="code">Details</code>). In questo esempio, ogni modifica ha un valore diverso per il <code class="code">RequireRecreation</code> campo, ma la modifica alla <code class="code">KeyName</code> proprietà ha il comportamento di aggiornamento più intrusivo, che richiede sempre una ricreazione.  CloudFormation sostituirà l'istanza perché il nome della chiave è stato modificato.</p>
      <p>Se il nome della chiave è invariato, la modifica alla proprietà <code class="code">InstanceType</code> comporterebbe l'aggiornamento più intrusivo (<code class="code">Conditionally</code>), in modo che il campo <code class="code">Replacement</code> sia <code class="code">Conditionally</code>. Per trovare le condizioni in cui  CloudFormation  sostituisce l'istanza, visualizzate il comportamento di aggiornamento della <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html#cfn-ec2-instance-instancetype"><code class="code">InstanceType</code></a>proprietà.</p>
     
      <h2 id="using-cfn-updating-stacks-changesets-samples-adding-and-removing-resources">Aggiunta e rimozione di risorse</h2>

      <p>L'esempio seguente è stato generato inviando un modello modificato che rimuove l'istanza EC2 e aggiunge un gruppo Auto Scaling e una configurazione di avvio.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "StackId": "arn:aws:cloudformation:us-east-1:123456789012:stack/SampleStack/1a2345b6-0000-00a0-a123-00abc0abc000",
    "Status": "CREATE_COMPLETE",
    "ChangeSetName": "SampleChangeSet-addremove",
    "Parameters": [
        <span>{</span>
            "ParameterValue": "testing",
            "ParameterKey": "Purpose"
        },
        <span>{</span>
            "ParameterValue": "MyKeyName",
            "ParameterKey": "KeyPairName"
        },
        <span>{</span>
            "ParameterValue": "t2.micro",
            "ParameterKey": "InstanceType"
        }
    ],
    "Changes": [
        <span>{</span>
            "ResourceChange": <span>{</span>
                "Action": "Add",
                "ResourceType": "AWS::AutoScaling::AutoScalingGroup",
                "Scope": [],
                "Details": [],
                "LogicalResourceId": "AutoScalingGroup"
            },
            "Type": "Resource"
        },
        <span>{</span>
            "ResourceChange": <span>{</span>
                "Action": "Add",
                "ResourceType": "AWS::AutoScaling::LaunchConfiguration",
                "Scope": [],
                "Details": [],
                "LogicalResourceId": "LaunchConfig"
            },
            "Type": "Resource"
        },
        <span>{</span>
            "ResourceChange": <span>{</span>
                "ResourceType": "AWS::EC2::Instance",
                "PhysicalResourceId": "i-1abc23d4",
                "Details": [],
                "Action": "Remove",
                "Scope": [],
                "LogicalResourceId": "MyEC2Instance"
            },
            "Type": "Resource"
        }
    ],
    "CreationTime": "2020-11-18T01:44:08.444Z",
    "Capabilities": [],
    "StackName": "SampleStack",
    "NotificationARNs": [],
    "ChangeSetId": "arn:aws:cloudformation:us-east-1:123456789012:changeSet/SampleChangeSet-addremove/1a2345b6-0000-00a0-a123-00abc0abc000"
}</code></pre>
      <p>Nella struttura <code class="code">Changes</code>, ci sono tre strutture <code class="code">ResourceChange</code>, una per ciascuna risorsa. Per ogni risorsa, il <code class="code">Action</code> campo indica se  CloudFormation  aggiunge o rimuove la risorsa. I campi <code class="code">Scope</code> e <code class="code">Details</code> sono vuoti perché si applicano solo alle risorse modificate.</p>
      <p>Per le nuove risorse, non è  CloudFormation  possibile determinare il valore di alcuni campi finché non si esegue il set di modifiche. Ad esempio,  CloudFormation  non fornisce gli ID fisici del gruppo Auto Scaling e avvia la configurazione perché non esistono ancora.  CloudFormation crea le nuove risorse quando si esegue il set di modifiche.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./using-cfn-updating-stacks-changesets-delete.html">Eliminazione di un set di modifiche</div><div id="next" class="next-link" accesskey="n" href="./using-cfn-updating-stacks-direct.html">Aggiornamento diretto di stack</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets-samples.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>