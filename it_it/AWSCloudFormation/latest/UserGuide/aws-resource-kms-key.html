<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::KMS::Key - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-kms-key" /><meta name="default_state" content="aws-resource-kms-key" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" /><meta name="description" content="Use the AWS CloudFormation AWS::KMS::Key resource for KMS." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_KMS.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" hreflang="x-default" /><meta name="feedback-item" content="Key Management Service (KMS)" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::KMS::Key" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::KMS::Key - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Key%20Management%20Service%20%28KMS%29&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS Key Management Service resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_KMS.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::KMS::Key",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_KMS.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_KMS.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-kms-key-syntax">Syntax</a><a href="#aws-resource-kms-key-properties">Properties</a><a href="#aws-resource-kms-key-return-values">Return values</a><a href="#aws-resource-kms-key--examples">Examples</a><a href="#aws-resource-kms-key--seealso">See also</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-kms-key">AWS::KMS::Key</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The <code class="code">AWS::KMS::Key</code> resource specifies an <a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#kms_keys">KMS key</a> in AWS Key Management Service. You can use this resource to create symmetric encryption KMS keys,
      asymmetric KMS keys for encryption or signing, and symmetric HMAC KMS keys. You can use
        <code class="code">AWS::KMS::Key</code> to create <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html#mrk-primary-key">multi-Region
        primary keys</a> of all supported types. To replicate a multi-Region key, use the
        <code class="code">AWS::KMS::ReplicaKey</code> resource.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you change the value of the <code class="code">KeySpec</code>, <code class="code">KeyUsage</code>,
        <code class="code">Origin</code>, or <code class="code">MultiRegion</code> properties of an existing KMS key, the
        update request fails, regardless of the value of the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html"><code class="code">UpdateReplacePolicy</code> attribute</a>. This prevents you from accidentally
        deleting a KMS key by changing any of its immutable property values.</p></div></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>AWS KMS replaced the term <em>customer master key
        (CMK)</em> with <em>AWS KMS key</em> and <em>KMS key</em>.
        The concept has not changed. To prevent breaking changes, AWS KMS is keeping
        some variations of this term.</p></div></div><p>You can use symmetric encryption KMS keys to encrypt and decrypt small amounts of data,
      but they are more commonly used to generate data keys and data key pairs. You can also use a
      symmetric encryption KMS key to encrypt data stored in AWS services that are <a href="https://aws.amazon.com/kms/features/#AWS_Service_Integration" rel="noopener noreferrer" target="_blank"><span>integrated with AWS KMS</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. For more information, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#symmetric-cmks">Symmetric encryption KMS keys</a> in the
          <em>AWS Key Management Service Developer Guide</em>.</p><p>You can use asymmetric KMS keys to encrypt and decrypt data or sign messages and verify
      signatures. To create an asymmetric key, you must specify an asymmetric <code class="code">KeySpec</code>
      value and a <code class="code">KeyUsage</code> value. For details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/symmetric-asymmetric.html">Asymmetric keys in AWS KMS</a> in the
      <em>AWS Key Management Service Developer Guide</em>.</p><p>You can use HMAC KMS keys (which are also symmetric keys) to generate and verify
      hash-based message authentication codes. To create an HMAC key, you must specify an HMAC
        <code class="code">KeySpec</code> value and a <code class="code">KeyUsage</code> value of
        <code class="code">GENERATE_VERIFY_MAC</code>. For details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/hmac.html">HMAC keys in AWS KMS</a> in the
          <em>AWS Key Management Service Developer Guide</em>.</p><p>You can also create symmetric encryption, asymmetric, and HMAC multi-Region primary keys.
      To create a multi-Region primary key, set the <code class="code">MultiRegion</code> property to
        <code class="code">true</code>. For information about multi-Region keys, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html">Multi-Region keys in AWS KMS</a> in the <em>AWS Key Management Service Developer
      Guide</em>.</p><p>You cannot use the <code class="code">AWS::KMS::Key</code> resource to specify a KMS key with <a href="https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html">imported key
        material</a> or a KMS key in a <a href="https://docs.aws.amazon.com/kms/latest/developerguide/custom-key-store-overview.html">custom key
      store</a>.</p><p><b>Regions</b></p><p>AWS KMS CloudFormation resources are available in all Regions in which AWS KMS and AWS CloudFormation are supported. 
      You can use the <code class="code">AWS::KMS::Key</code> resource to create and manage all KMS key types that are supported in a Region.</p><h2 id="aws-resource-kms-key-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-kms-key-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::KMS::Key",
  "Properties" : <span>{</span>
      "<a href="#cfn-kms-key-bypasspolicylockoutsafetycheck">BypassPolicyLockoutSafetyCheck</a>" : <code class="replaceable">Boolean</code>,
      "<a href="#cfn-kms-key-description">Description</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-kms-key-enabled">Enabled</a>" : <code class="replaceable">Boolean</code>,
      "<a href="#cfn-kms-key-enablekeyrotation">EnableKeyRotation</a>" : <code class="replaceable">Boolean</code>,
      "<a href="#cfn-kms-key-keypolicy">KeyPolicy</a>" : <code class="replaceable">Json</code>,
      "<a href="#cfn-kms-key-keyspec">KeySpec</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-kms-key-keyusage">KeyUsage</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-kms-key-multiregion">MultiRegion</a>" : <code class="replaceable">Boolean</code>,
      "<a href="#cfn-kms-key-origin">Origin</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-kms-key-pendingwindowindays">PendingWindowInDays</a>" : <code class="replaceable">Integer</code>,
      "<a href="#cfn-kms-key-tags">Tags</a>" : <code class="replaceable">[ <a href="./aws-properties-kms-key-tag.html">Tag</a>, ... ]</code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-kms-key-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::KMS::Key
Properties:
  <a href="#cfn-kms-key-bypasspolicylockoutsafetycheck">BypassPolicyLockoutSafetyCheck</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-kms-key-description">Description</a>: <code class="replaceable">String</code>
  <a href="#cfn-kms-key-enabled">Enabled</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-kms-key-enablekeyrotation">EnableKeyRotation</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-kms-key-keypolicy">KeyPolicy</a>: <code class="replaceable">Json</code>
  <a href="#cfn-kms-key-keyspec">KeySpec</a>: <code class="replaceable">String</code>
  <a href="#cfn-kms-key-keyusage">KeyUsage</a>: <code class="replaceable">String</code>
  <a href="#cfn-kms-key-multiregion">MultiRegion</a>: <code class="replaceable">Boolean</code>
  <a href="#cfn-kms-key-origin">Origin</a>: <code class="replaceable">String</code>
  <a href="#cfn-kms-key-pendingwindowindays">PendingWindowInDays</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-kms-key-tags">Tags</a>: <code class="replaceable">
    - <a href="./aws-properties-kms-key-tag.html">Tag</a></code>
</code></pre></div><h2 id="aws-resource-kms-key-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-kms-key-bypasspolicylockoutsafetycheck"><span class="term"><code class="code">BypassPolicyLockoutSafetyCheck</code></span></dt><dd>
    <p>Skips ("bypasses") the key policy lockout safety check. The default value is false.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Setting this value to true increases the risk that the KMS key becomes unmanageable. Do not set this value to true indiscriminately.</p><p>For more information, see
        <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-policy-default.html#prevent-unmanageable-key">Default key policy</a>
        in the <em>AWS Key Management Service Developer Guide</em>.</p></div></div>
    <p>Use this parameter only when you intend to prevent the principal that is making the request from making a subsequent
      <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_PutKeyPolicy.html">PutKeyPolicy</a> request on the KMS key. </p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Boolean</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-key-description"><span class="term"><code class="code">Description</code></span></dt><dd>
    <p>A description of the KMS key. Use a description that helps you to distinguish this KMS key from
      others in the account, such as its intended use.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">0</code></p><p><em>Maximum</em>: <code class="code">8192</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-key-enabled"><span class="term"><code class="code">Enabled</code></span></dt><dd>
    
    <p>Specifies whether the KMS key is enabled. Disabled KMS keys cannot be used in cryptographic
      operations.</p>
    <p>When <code class="code">Enabled</code> is <code class="code">true</code>, the <em>key state</em> of the
      KMS key is <code class="code">Enabled</code>. When <code class="code">Enabled</code> is <code class="code">false</code>, the key state of
      the KMS key is <code class="code">Disabled</code>. The default value is <code class="code">true</code>.</p>
    <p>The actual key state of the KMS key might be affected by actions taken outside of
      CloudFormation, such as running the <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_EnableKey.html">EnableKey</a>, <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_DisableKey.html">DisableKey</a>,
      or <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_ScheduleKeyDeletion.html">ScheduleKeyDeletion</a> operations.</p>
    <p>For information about the key states of a KMS key, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html">Key state: Effect on your KMS key</a> in the
          <em>AWS Key Management Service Developer Guide</em>. </p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Boolean</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-key-enablekeyrotation"><span class="term"><code class="code">EnableKeyRotation</code></span></dt><dd>
    
    <p>Enables automatic rotation of the key material for the specified KMS key. By default,
      automatic key rotation is not enabled.</p>
    <p>AWS KMS supports automatic rotation only for symmetric encryption KMS keys (<code class="code">KeySpec</code> = <code class="code">SYMMETRIC_DEFAULT</code>). For asymmetric KMS keys, HMAC KMS
      keys, and KMS keys with Origin <code class="code">EXTERNAL</code>, omit the <code class="code">EnableKeyRotation</code>
      property or set it to <code class="code">false</code>.</p>
    <p>To enable automatic key rotation of the key material for a multi-Region KMS key, set <code class="code">EnableKeyRotation</code> to <code class="code">true</code> on the primary key (created by using <code class="code">AWS::KMS::Key</code>).    
      AWS KMS copies the rotation status to all replica keys. For details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-manage.html#multi-region-rotate">Rotating multi-Region keys</a> in the <em>AWS Key Management Service Developer Guide</em>.</p>
    <p>When you enable automatic rotation, AWS KMS automatically creates new key
      material for the KMS key one year after the enable date and every year
      thereafter. AWS KMS retains all key material until you delete the KMS key. For
      detailed information about automatic key rotation, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/rotate-keys.html">Rotating KMS keys</a> in the
          <em>AWS Key Management Service Developer Guide</em>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Boolean</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-key-keypolicy"><span class="term"><code class="code">KeyPolicy</code></span></dt><dd>
    
    <p>The key policy to attach to the KMS key.</p>
    <p>If you provide a key policy, it must meet the following criteria:</p>
    <div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The key policy must allow the caller to make a subsequent <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_PutKeyPolicy.html">PutKeyPolicy</a> request on the
          KMS key. This reduces the risk that the KMS key becomes unmanageable. For more information, see
          <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-policies.html#key-policy-default-allow-root-enable-iam">Default key policy</a> in the 
          <em>AWS Key Management Service Developer Guide</em>. (To omit this condition, set <code class="code">BypassPolicyLockoutSafetyCheck</code> to true.)</p>
      </li><li class="listitem">
        <p>Each statement in the key policy must contain one or more principals. The principals
          in the key policy must exist and be visible to AWS KMS. When you create a new
            AWS principal (for example, an IAM user or role), you might need to
          enforce a delay before including the new principal in a key policy because the new
          principal might not be immediately visible to AWS KMS. For more information,
          see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/troubleshoot_general.html#troubleshoot_general_eventual-consistency">Changes that I make are not always immediately visible</a> in the <em>AWS Identity and Access Management User Guide</em>.</p>
      </li></ul></div>
    <p>If you do not provide a key policy, AWS KMS attaches a default key policy to the KMS key. For more information, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-policies.html#key-policy-default">Default key policy</a> in the <em>AWS Key Management Service Developer
      Guide</em>.</p>

    <p>A key policy document can include only the following characters:</p>
    <div class="itemizedlist">
         
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>Printable ASCII characters</p>
      </li><li class="listitem">
        <p>Printable characters in the Basic Latin and Latin-1 Supplement character set</p>
      </li><li class="listitem">
        <p>The tab (<code class="code">\u0009</code>), line feed (<code class="code">\u000A</code>), and carriage return (<code class="code">\u000D</code>) special characters</p>
      </li></ul></div>
    
    <p><em>Minimum</em>: <code class="code">1</code></p>
    <p><em>Maximum</em>: <code class="code">32768</code></p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Json</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-key-keyspec"><span class="term"><code class="code">KeySpec</code></span></dt><dd>
    <p>Specifies the type of KMS key to create. The default value, <code class="code">SYMMETRIC_DEFAULT</code>,
      creates a KMS key with a 256-bit symmetric key for encryption and decryption. In China Regions, <code class="code">SYMMETRIC_DEFAULT</code>
      creates a 128-bit symmetric key that uses SM4 encryption. You can't change the
      <code class="code">KeySpec</code> value after the KMS key is created. For help choosing a
      key spec for your KMS key, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/symm-asymm-choose.html">Choosing a KMS key type</a> in the <em>AWS Key Management Service Developer
        Guide</em>.</p>
    <p>The <code class="code">KeySpec</code> property determines
      the type of key material in the KMS key and the algorithms that the KMS key supports. To further restrict the algorithms that can
      be used with the KMS key, use a condition key in its key policy or IAM policy. For more
      information, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/policy-conditions.html#conditions-kms">AWS KMS condition keys</a> in the <em>AWS Key Management Service Developer
        Guide</em>.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you change the value of the <code class="code">KeySpec</code> property on an existing KMS key, the update request fails, regardless of the value of the 
        <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html"><code class="code">UpdateReplacePolicy</code> attribute</a>. 
        This prevents you from accidentally deleting a KMS key by changing an immutable property value.</p></div></div>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p><a href="https://aws.amazon.com/kms/features/#AWS_Service_Integration" rel="noopener noreferrer" target="_blank"><span>AWS
        services that are integrated with AWS KMS</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> use symmetric encryption KMS keys to
        protect your data. These services do not support encryption with asymmetric KMS keys. For help determining
        whether a KMS key is asymmetric, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/find-symm-asymm.html">Identifying asymmetric
          KMS keys</a> in the <em>AWS Key Management Service Developer Guide</em>.</p></div></div> 
         <p>
           AWS KMS supports the following key specs for KMS keys:</p>
         <div class="itemizedlist">
             
                   
             
             
             
            
         <ul class="itemizedlist"><li class="listitem">
               <p>Symmetric encryption key (default)</p>
               <div class="itemizedlist">
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>
                        <code class="code">SYMMETRIC_DEFAULT</code> (AES-256-GCM)</p>
                  </li></ul></div>
            </li><li class="listitem">
               <p>HMAC keys (symmetric)</p>
               <div class="itemizedlist">
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>
                        <code class="code">HMAC_224</code>
                     </p>
                  </li><li class="listitem">
                     <p>
                        <code class="code">HMAC_256</code>
                     </p>
                  </li><li class="listitem">
                     <p>
                        <code class="code">HMAC_384</code>
                     </p>
                  </li><li class="listitem">
                     <p>
                        <code class="code">HMAC_512</code>
                     </p>
                  </li></ul></div>
            </li><li class="listitem">
               <p>Asymmetric RSA key pairs</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>
                        <code class="code">RSA_2048</code>
                     </p>
                  </li><li class="listitem">
                     <p>
                        <code class="code">RSA_3072</code>
                     </p>
                  </li><li class="listitem">
                     <p>
                        <code class="code">RSA_4096</code>
                     </p>
                  </li></ul></div>
            </li><li class="listitem">
               <p>Asymmetric NIST-recommended elliptic curve key pairs</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>
                        <code class="code">ECC_NIST_P256</code> (secp256r1)</p>
                  </li><li class="listitem">
                     <p>
                        <code class="code">ECC_NIST_P384</code> (secp384r1)</p>
                  </li><li class="listitem">
                     <p>
                        <code class="code">ECC_NIST_P521</code> (secp521r1)</p>
                  </li></ul></div>
            </li><li class="listitem">
               <p>Other asymmetric elliptic curve key pairs</p>
               <div class="itemizedlist">
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>
                        <code class="code">ECC_SECG_P256K1</code> (secp256k1), commonly used for
              cryptocurrencies.</p>
                  </li></ul></div>
            </li><li class="listitem"><p>SM2 key pairs (China Regions only)</p>
             <div class="itemizedlist">
                
             <ul class="itemizedlist"><li class="listitem"><p><code class="code">SM2</code></p></li></ul></div>
           </li></ul></div>

      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">SYMMETRIC_DEFAULT | RSA_2048 | RSA_3072 | RSA_4096 | ECC_NIST_P256 | ECC_NIST_P384 | ECC_NIST_P521 | ECC_SECG_P256K1 | HMAC_224 | HMAC_256 | HMAC_384 | HMAC_512 | SM2</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-kms-key-keyusage"><span class="term"><code class="code">KeyUsage</code></span></dt><dd>
    
    <p>Determines the <a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#cryptographic-operations">cryptographic
        operations</a> for which you can use the KMS key. The default value is
        <code class="code">ENCRYPT_DECRYPT</code>. This property is required for asymmetric KMS keys and HMAC KMS keys. You can't
      change the <code class="code">KeyUsage</code> value after the KMS key is created.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you change the value of the <code class="code">KeyUsage</code> property on an existing KMS key,
        the update request fails, regardless of the value of the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html"><code class="code">UpdateReplacePolicy</code> attribute</a>. This prevents you from accidentally
        deleting a KMS key by changing an immutable property value.</p></div></div>
    <p>Select only one valid value.</p>
    <div class="itemizedlist">
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>For symmetric encryption KMS keys, omit the property or specify <code class="code">ENCRYPT_DECRYPT</code>.</p>
      </li><li class="listitem">
        <p>For asymmetric KMS keys with RSA key material, specify <code class="code">ENCRYPT_DECRYPT</code> or
            <code class="code">SIGN_VERIFY</code>.</p>
      </li><li class="listitem">
        <p>For asymmetric KMS keys with ECC key material, specify <code class="code">SIGN_VERIFY</code>.</p>
      </li><li class="listitem">
        <p>For asymmetric KMS keys with SM2 (China Regions only) key material, specify <code class="code">ENCRYPT_DECRYPT</code> or
          <code class="code">SIGN_VERIFY</code>.</p>
      </li><li class="listitem">
        <p>For HMAC KMS keys, specify <code class="code">GENERATE_VERIFY_MAC</code>.</p>
      </li></ul></div>
  <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">ENCRYPT_DECRYPT | SIGN_VERIFY | GENERATE_VERIFY_MAC</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-kms-key-multiregion"><span class="term"><code class="code">MultiRegion</code></span></dt><dd>
    <p>Creates a multi-Region primary key that you can replicate in other AWS Regions. You can't change the
      <code class="code">MultiRegion</code> value after the KMS key is created.</p>
    <p>For a list of AWS Regions in which multi-Region keys are supported, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html">Multi-Region keys in AWS KMS</a> in the <em>AWS Key Management Service Developer Guide</em>.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you change the value of the <code class="code">MultiRegion</code> property on an existing KMS key,
        the update request fails, regardless of the value of the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-updatereplacepolicy.html"><code class="code">UpdateReplacePolicy</code> attribute</a>. This prevents you from accidentally
        deleting a KMS key by changing an immutable property value.</p></div></div>
    <p>For a multi-Region key, set to this property to <code class="code">true</code>. For a single-Region
      key, omit this property or set it to <code class="code">false</code>. The default value is
      <code class="code">false</code>.</p>
    <p><em>Multi-Region keys</em> are an AWS KMS feature that lets you
      create multiple interoperable KMS keys in different AWS Regions. Because these
      KMS keys have the same key ID, key material, and other metadata, you can use them to encrypt data
      in one AWS Region and decrypt it in a different AWS Region
      without making a cross-Region call or exposing the plaintext data. For more information, see
      <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html">Multi-Region keys</a> in the <em>AWS Key Management Service Developer
        Guide</em>.</p>
    <p>You can create a symmetric encryption, HMAC, or asymmetric multi-Region KMS key, and you can
      create a multi-Region key with imported key material. However, you cannot create a
      multi-Region key in a custom key store.</p>
    <p>To create a replica of this primary key in a different AWS Region ,
      create an <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replicakey.html">AWS::KMS::ReplicaKey</a> resource in a CloudFormation stack in the replica Region.
      Specify the key ARN of this primary key.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Boolean</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt id="cfn-kms-key-origin"><span class="term"><code class="code">Origin</code></span></dt><dd>
    
    
    <p>The source of the key material for the KMS key. You cannot change the origin after you
      create the KMS key. The default is <code class="code">AWS_KMS</code>, which means that AWS KMS
      creates the key material.</p>
    <p>To <a href="https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-create-cmk.html">create a KMS key with no key
      material</a> (for imported key material), set this value to <code class="code">EXTERNAL</code>. For
      more information about importing key material into AWS KMS, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html">Importing Key
        Material</a> in the <em>
          AWS Key Management Service Developer Guide</em>.</p>
    <p>You can ignore <code class="code">ENABLED</code> when Origin is <code class="code">EXTERNAL</code>. When a KMS key
      with Origin <code class="code">EXTERNAL</code> is created, the key state is <code class="code">PENDING_IMPORT</code> and
      <code class="code">ENABLED</code> is <code class="code">false</code>. After you import the key material,
      <code class="code">ENABLED</code> updated to <code class="code">true</code>. The KMS key can then be used for
      Cryptographic Operations. </p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>AWS CloudFormation doesn't support creating an <code class="code">Origin</code> parameter of the
        <code class="code">AWS_CLOUDHSM</code> or <code class="code">EXTERNAL_KEY_STORE</code> values.</p></div></div>
  <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">AWS_KMS | EXTERNAL</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-key-pendingwindowindays"><span class="term"><code class="code">PendingWindowInDays</code></span></dt><dd>
    
    
    <p>Specifies the number of days in the waiting period before AWS KMS deletes a
      KMS key that has been removed from a CloudFormation stack. Enter a value between 7 and 30 days.
      The default value is 30 days.</p>
    <p>When you remove a KMS key from a CloudFormation stack, AWS KMS schedules the
      KMS key for deletion and starts the mandatory waiting period. The <code class="code">PendingWindowInDays</code>
      property determines the length of waiting period. During the waiting period, the key state of
      KMS key is <code class="code">Pending Deletion</code> or <code class="code">Pending Replica Deletion</code>, which prevents
      the KMS key from being used in cryptographic operations. When the waiting period expires, AWS KMS permanently deletes the KMS key.</p>
    <p>AWS KMS will not delete a <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html">multi-Region primary
        key</a> that has replica keys. If you remove a multi-Region primary key from a
      CloudFormation stack, its key state changes to <code class="code">PendingReplicaDeletion</code> so it
      cannot be replicated or used in cryptographic operations. This state can persist indefinitely.
      When the last of its replica keys is deleted, the key state of the primary key changes to
        <code class="code">PendingDeletion</code> and the waiting period specified by
        <code class="code">PendingWindowInDays</code> begins. When this waiting period expires, AWS KMS deletes the primary key. For details, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-delete.html">Deleting multi-Region
        keys</a> in the <em>AWS Key Management Service Developer Guide</em>.</p>
    <p>You cannot use a CloudFormation template to cancel deletion of the KMS key after you remove it
      from the stack, regardless of the waiting period. If you specify a KMS key in your template, even
      one with the same name, CloudFormation creates a new KMS key. To cancel deletion of a KMS key, use the
        AWS KMS console or the <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_CancelKeyDeletion.html">CancelKeyDeletion</a>
      operation.</p>
    <p>For information about the <code class="code">Pending Deletion</code> and <code class="code">Pending Replica
        Deletion</code> key states, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html">Key state: Effect on your KMS key</a> in the
          <em>AWS Key Management Service Developer Guide</em>. For more information about
      deleting KMS keys, see the <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_ScheduleKeyDeletion.html">ScheduleKeyDeletion</a>
      operation in the <em>AWS Key Management Service API Reference</em> and <a href="https://docs.aws.amazon.com/kms/latest/developerguide/deleting-keys.html">Deleting KMS
        keys</a> in the <em>AWS Key Management Service Developer Guide</em>. </p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Integer</p><p><em>Minimum</em>: <code class="code">7</code></p><p><em>Maximum</em>: <code class="code">30</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-kms-key-tags"><span class="term"><code class="code">Tags</code></span></dt><dd>
    
    <p>Assigns one or more tags to the replica key.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Tagging or untagging a KMS key can allow or deny permission to the KMS key. For details, see
          <a href="https://docs.aws.amazon.com/kms/latest/developerguide/abac.html">ABAC for
            AWS KMS</a> in the <em>AWS Key Management Service Developer
          Guide</em>.</p></div></div>
    <p>For information about tags in AWS KMS, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/tagging-keys.html">Tagging keys</a> in the
          <em>AWS Key Management Service Developer Guide</em>. For information about tags
      in CloudFormation, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a>.</p>
  <p><em>Required</em>: No</p><p><em>Type</em>: Array of <a href="./aws-properties-kms-key-tag.html">Tag</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd></dl></div><h2 id="aws-resource-kms-key-return-values">Return values</h2><h3 id="aws-resource-kms-key-return-values-ref">Ref</h3><p>
      When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the key ID, such as
        <code class="code">1234abcd-12ab-34cd-56ef-1234567890ab</code>.</p><p>For more information about using the <code class="code">Ref</code> function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html"><code class="code">Ref</code></a>.</p><h3 id="aws-resource-kms-key-return-values-fn--getatt">Fn::GetAtt</h3><p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following are the available attributes and sample return values.</p>
<p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html"><code class="code">Fn::GetAtt</code></a>.</p><h4 id="aws-resource-kms-key-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist"><dl><dt id="Arn-fn::getatt"><span class="term"><code class="code">Arn</code></span></dt><dd>
    <p>The Amazon Resource Name (ARN) of the KMS key, such as
        <code class="code">arn:aws:kms:us-west-2:111122223333:key/1234abcd-12ab-34cd-56ef-1234567890ab</code>.</p>
    <p>For information about the key ARN of a KMS key, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#key-id-key-ARN">Key ARN</a> in the
          <em>AWS Key Management Service Developer Guide</em>.</p>
  </dd><dt id="KeyId-fn::getatt"><span class="term"><code class="code">KeyId</code></span></dt><dd>
    <p>The key ID of the KMS key, such as
      <code class="code">1234abcd-12ab-34cd-56ef-1234567890ab</code>.</p>
    <p>For information about the key ID of a KMS key, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#key-id-key-id">Key ID</a> in the
          <em>AWS Key Management Service Developer Guide</em>.</p>
  </dd></dl></div><h2 id="aws-resource-kms-key--examples">Examples</h2><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-kms-key--examples--Create_a_symmetric_encryption_KMS_key">Create a symmetric encryption KMS key</a></li><li><a href="#aws-resource-kms-key--examples--Create_a_symmetric_encryption_KMS_key_with_a_resource_tag">Create a symmetric encryption KMS key with a resource tag</a></li><li><a href="#aws-resource-kms-key--examples--Create_an_asymmetric_KMS_key">Create an asymmetric KMS key</a></li><li><a href="#aws-resource-kms-key--examples--Create_an_HMAC_KMS_key">Create an HMAC KMS key</a></li><li><a href="#aws-resource-kms-key--examples--Create_a_multi-Region_primary_key">Create a multi-Region primary key</a></li></ul></div><h3 id="aws-resource-kms-key--examples--Create_a_symmetric_encryption_KMS_key">Create a symmetric encryption KMS key</h3><p>The following example creates a symmetric encryption KMS key. The key policy for the
          KMS key allows <code class="code">Alice</code> to manage the key and allows <code class="code">Bob</code> to view
          the KMS key and use it in cryptographic operations. It also allows the AWS account (root) full access to the key. This prevents you from losing
          control of the key if both <code class="code">Alice</code> and <code class="code">Bob</code> are deleted from the
          account.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-kms-key--examples--Create_a_symmetric_encryption_KMS_key--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myKey": <span>{</span>
        "Type": "AWS::KMS::Key",
        "Properties": <span>{</span>
            "Description": "An example symmetric encryption KMS key",
            "EnableKeyRotation": true,
            "PendingWindowInDays": 20,
            "KeyPolicy": <span>{</span>
                "Version": "2012-10-17",
                "Id": "key-default-1",
                "Statement": [
                    <span>{</span>
                        "Sid": "Enable IAM User Permissions",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:root"
                        },
                        "Action": "kms:*",
                        "Resource": "*"
                    },
                    <span>{</span>
                        "Sid": "Allow administration of the key",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:user/Alice"
                        },
                        "Action": [
                            "kms:Create*",
                            "kms:Describe*",
                            "kms:Enable*",
                            "kms:List*",
                            "kms:Put*",
                            "kms:Update*",
                            "kms:Revoke*",
                            "kms:Disable*",
                            "kms:Get*",
                            "kms:Delete*",
                            "kms:ScheduleKeyDeletion",
                            "kms:CancelKeyDeletion"
                        ],
                        "Resource": "*"
                    },
                    <span>{</span>
                        "Sid": "Allow use of the key",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:user/Bob"
                        },
                        "Action": [
                            "kms:DescribeKey",
                            "kms:Encrypt",
                            "kms:Decrypt",
                            "kms:ReEncrypt*",
                            "kms:GenerateDataKey",
                            "kms:GenerateDataKeyWithoutPlaintext"
                        ],
                        "Resource": "*"
                    }
                ]
            }
        }
    }</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-kms-key--examples--Create_a_symmetric_encryption_KMS_key--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myKey:
  Type: 'AWS::KMS::Key'
  Properties:
    Description: An example symmetric encryption KMS key
    EnableKeyRotation: true
    PendingWindowInDays: 20
    KeyPolicy:
      Version: 2012-10-17
      Id: key-default-1
      Statement:
        - Sid: Enable IAM User Permissions
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:root'
          Action: 'kms:*'
          Resource: '*'
        - Sid: Allow administration of the key
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:user/Alice'
          Action:
            - 'kms:Create*'
            - 'kms:Describe*'
            - 'kms:Enable*'
            - 'kms:List*'
            - 'kms:Put*'
            - 'kms:Update*'
            - 'kms:Revoke*'
            - 'kms:Disable*'
            - 'kms:Get*'
            - 'kms:Delete*'
            - 'kms:ScheduleKeyDeletion'
            - 'kms:CancelKeyDeletion'
          Resource: '*'
        - Sid: Allow use of the key
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:user/Bob'
          Action:
            - 'kms:DescribeKey'
            - 'kms:Encrypt'
            - 'kms:Decrypt'
            - 'kms:ReEncrypt*'
            - 'kms:GenerateDataKey'
            - 'kms:GenerateDataKeyWithoutPlaintext'
          Resource: '*'</code></pre></div><h3 id="aws-resource-kms-key--examples--Create_a_symmetric_encryption_KMS_key_with_a_resource_tag">Create a symmetric encryption KMS key with a resource tag</h3><p>The following example creates a symmetric encryption KMS key with one resource
          tag.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Tagging or untagging a KMS key can allow or deny permission to the KMS key. For details, see
              <a href="https://docs.aws.amazon.com/kms/latest/developerguide/abac.html">ABAC for
              AWS KMS</a> in the <em>AWS Key Management Service Developer
            Guide</em>.</p></div></div><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-kms-key--examples--Create_a_symmetric_encryption_KMS_key_with_a_resource_tag--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myKeyWithTag": <span>{</span>
        "Type": "AWS::KMS::Key",
        "Properties": <span>{</span>
            "KeyPolicy": <span>{</span>
                "Version": "2012-10-17",
                "Id": "key-default-1",
                "Statement": [
                    <span>{</span>
                        "Sid": "Enable IAM User Permissions",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": <span>{</span>
                                "Fn::Join": [
                                    "",
                                    [
                                        "arn:aws:iam::",
                                        <span>{</span>
                                            "Ref": "AWS::AccountId"
                                        },
                                        ":root"
                                    ]
                                ]
                            }
                        },
                        "Action": "kms:*",
                        "Resource": "*"
                    }
                ]
            },
            "Tags": [
                <span>{</span>
                    "Key": <span>{</span>
                        "Ref": "Key"
                    },
                    "Value": <span>{</span>
                        "Ref": "Value"
                    }
                }
            ]
        },
        "Parameters": <span>{</span>
            "Key": <span>{</span>
                "Type": "String"
            },
            "Value": <span>{</span>
                "Type": "String"
            }
        }
    }</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-kms-key--examples--Create_a_symmetric_encryption_KMS_key_with_a_resource_tag--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myKeyWithTag:
  Type: 'AWS::KMS::Key'
  Properties:
    KeyPolicy:
      Version: 2012-10-17
      Id: key-default-1
      Statement:
        - Sid: Enable IAM User Permissions
          Effect: Allow
          Principal:
            AWS: !Join 
              - ''
              - - 'arn:aws:iam::'
                - !Ref 'AWS::AccountId'
                - ':root'
          Action: 'kms:*'
          Resource: '*'
    Tags:
      - Key: !Ref Key
        Value: !Ref Value
  Parameters:
    Key:
      Type: String
    Value:
      Type: String</code></pre></div><h3 id="aws-resource-kms-key--examples--Create_an_asymmetric_KMS_key">Create an asymmetric KMS key</h3><p>The following example creates an RSA asymmetric KMS key for signing and verification. For
          an asymmetric KMS key, you must specify <code class="code">KeySpec</code> and <code class="code">KeyUsage</code>
          properties. The <code class="code">EnableKeyRotation</code> property must be omitted or set to
            <code class="code">false</code>.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-kms-key--examples--Create_an_asymmetric_KMS_key--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"RSASigningKey": <span>{</span>
        "Type": "AWS::KMS::Key",
        "Properties": <span>{</span>
            "Description": "RSA-3072 asymmetric KMS key for signing and verification",
            "KeySpec": "RSA_3072",
            "KeyUsage": "SIGN_VERIFY",
            "KeyPolicy": <span>{</span>
                "Version": "2012-10-17",
                "Id": "key-default-1",
                "Statement": [
                    <span>{</span>
                        "Sid": "Enable IAM User Permissions",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:root"
                        },
                        "Action": "kms:*",
                        "Resource": "*"
                    },
                    <span>{</span>
                        "Sid": "Allow administration of the key",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:role/Admin"
                        },
                        "Action": [
                            "kms:Create*",
                            "kms:Describe*",
                            "kms:Enable*",
                            "kms:List*",
                            "kms:Put*",
                            "kms:Update*",
                            "kms:Revoke*",
                            "kms:Disable*",
                            "kms:Get*",
                            "kms:Delete*",
                            "kms:ScheduleKeyDeletion",
                            "kms:CancelKeyDeletion"
                        ],
                        "Resource": "*"
                    },
                    <span>{</span>
                        "Sid": "Allow use of the key",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:role/Developer"
                        },
                        "Action": [
                            "kms:Sign",
                            "kms:Verify",
                            "kms:DescribeKey"
                        ],
                        "Resource": "*"
                    }
                ]
            }
        }
    }</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-kms-key--examples--Create_an_asymmetric_KMS_key--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">RSASigningKey:
  Type: 'AWS::KMS::Key'
  Properties:
    Description: RSA-3072 asymmetric KMS key for signing and verification
    KeySpec: RSA_3072
    KeyUsage: SIGN_VERIFY
    KeyPolicy:
      Version: 2012-10-17
      Id: key-default-1
      Statement:
        - Sid: Enable IAM User Permissions
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:root'
          Action: 'kms:*'
          Resource: '*'
        - Sid: Allow administration of the key
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:role/Admin'
          Action:
            - 'kms:Create*'
            - 'kms:Describe*'
            - 'kms:Enable*'
            - 'kms:List*'
            - 'kms:Put*'
            - 'kms:Update*'
            - 'kms:Revoke*'
            - 'kms:Disable*'
            - 'kms:Get*'
            - 'kms:Delete*'
            - 'kms:ScheduleKeyDeletion'
            - 'kms:CancelKeyDeletion'
          Resource: '*'
        - Sid: Allow use of the key
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:role/Developer'
          Action:
            - 'kms:Sign'
            - 'kms:Verify'
            - 'kms:DescribeKey'
          Resource: '*'</code></pre></div><h3 id="aws-resource-kms-key--examples--Create_an_HMAC_KMS_key">Create an HMAC KMS key</h3><p>The following example creates an HMAC KMS key. For
          an HMAC KMS key, you must specify an HMAC <code class="code">KeySpec</code> and the GENERATE_VERIFY_MAC value for the <code class="code">KeyUsage</code>
          property. Omit the <code class="code">EnableKeyRotation</code> property or it set to
          <code class="code">false</code>.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-kms-key--examples--Create_an_HMAC_KMS_key--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "HMACExampleKey": <span>{</span>
        "Type": "AWS::KMS::Key",
        "Properties": <span>{</span>
            "Description": "HMAC_384 key for tokens",
            "KeySpec": "HMAC_384",
            "KeyUsage": "GENERATE_VERIFY_MAC",
            "KeyPolicy": <span>{</span>
                "Version": "2012-10-17",
                "Id": "key-default-1",
                "Statement": [
                    <span>{</span>
                        "Sid": "Enable IAM User Permissions",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:root"
                        },
                        "Action": "kms:*",
                        "Resource": "*"
                    },
                    <span>{</span>
                        "Sid": "Allow administration of the key",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:role/Admin"
                        },
                        "Action": [
                            "kms:Create*",
                            "kms:Describe*",
                            "kms:Enable*",
                            "kms:List*",
                            "kms:Put*",
                            "kms:Update*",
                            "kms:Revoke*",
                            "kms:Disable*",
                            "kms:Get*",
                            "kms:Delete*",
                            "kms:ScheduleKeyDeletion",
                            "kms:CancelKeyDeletion"
                        ],
                        "Resource": "*"
                    },
                    <span>{</span>
                        "Sid": "Allow use of the key",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:role/Developer"
                        },
                        "Action": [
                            "kms:GenerateMac",
                            "kms:VerifyMac",
                            "kms:DescribeKey"
                        ],
                        "Resource": "*"
                    }
                ]
            }
        }
    }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-kms-key--examples--Create_an_HMAC_KMS_key--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">HMACExampleKey:
  Type: 'AWS::KMS::Key'
  Properties:
    Description: HMAC_384 key for tokens
    KeySpec: HMAC_384
    KeyUsage: GENERATE_VERIFY_MAC
    KeyPolicy:
      Version: 2012-10-17
      Id: key-default-1
      Statement:
        - Sid: Enable IAM User Permissions
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:root'
          Action: 'kms:*'
          Resource: '*'
        - Sid: Allow administration of the key
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:role/Admin'
          Action:
            - 'kms:Create*'
            - 'kms:Describe*'
            - 'kms:Enable*'
            - 'kms:List*'
            - 'kms:Put*'
            - 'kms:Update*'
            - 'kms:Revoke*'
            - 'kms:Disable*'
            - 'kms:Get*'
            - 'kms:Delete*'
            - 'kms:ScheduleKeyDeletion'
            - 'kms:CancelKeyDeletion'
          Resource: '*'
        - Sid: Allow use of the key
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:role/Developer'
          Action:
            - 'kms:GenerateMac'
            - 'kms:VerifyMac'
            - 'kms:DescribeKey'
          Resource: '*'</code></pre></div><h3 id="aws-resource-kms-key--examples--Create_a_multi-Region_primary_key">Create a multi-Region primary key</h3><p>The following example creates a multi-Region primary key. This example key is a
          symmetric encryption KMS key, but you can create multi-Region versions of asymmetric KMS
          keys and HMAC KMS keys.</p><p><em>Multi-Region keys</em> are an AWS KMS feature that lets you create
          multiple interoperable KMS keys in different AWS Regions. Because these KMS keys have the same key
          ID, key material, and other metadata, you can use them to encrypt data in one AWS Region
          and decrypt it in a different AWS Region without making a cross-Region call or exposing
          the plaintext data. For more information, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html">Multi-Region
            keys</a> in the <em>AWS Key Management Service Developer
          Guide</em>.</p><p>To replicate this primary key into a different AWS Region, use the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-replica-key.html">AWS::KMS::ReplicaKey</a> CloudFormation resource.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-kms-key--examples--Create_a_multi-Region_primary_key--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"myPrimaryKey": <span>{</span>
        "Type": "AWS::KMS::Key",
        "Properties": <span>{</span>
            "Description": "An example multi-Region primary key",
            "MultiRegion": true,
            "EnableKeyRotation": true,
            "PendingWindowInDays": 10,
            "KeyPolicy": <span>{</span>
                "Version": "2012-10-17",
                "Id": "key-default-1",
                "Statement": [
                    <span>{</span>
                        "Sid": "Enable IAM User Permissions",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:root"
                        },
                        "Action": "kms:*",
                        "Resource": "*"
                    },
                    <span>{</span>
                        "Sid": "Allow administration of the key",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:user/Alice"
                        },
                        "Action": [
                            "kms:ReplicateKey",
                            "kms:Create*",
                            "kms:Describe*",
                            "kms:Enable*",
                            "kms:List*",
                            "kms:Put*",
                            "kms:Update*",
                            "kms:Revoke*",
                            "kms:Disable*",
                            "kms:Get*",
                            "kms:Delete*",
                            "kms:ScheduleKeyDeletion",
                            "kms:CancelKeyDeletion"
                        ],
                        "Resource": "*"
                    },
                    <span>{</span>
                        "Sid": "Allow use of the key",
                        "Effect": "Allow",
                        "Principal": <span>{</span>
                            "AWS": "arn:aws:iam::111122223333:user/Bob"
                        },
                        "Action": [
                            "kms:DescribeKey",
                            "kms:Encrypt",
                            "kms:Decrypt",
                            "kms:ReEncrypt*",
                            "kms:GenerateDataKey",
                            "kms:GenerateDataKeyWithoutPlaintext"
                        ],
                        "Resource": "*"
                    }
                ]
            }
        }
    }</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-kms-key--examples--Create_a_multi-Region_primary_key--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">myPrimaryKey:
  Type: 'AWS::KMS::Key'
  Properties:
    Description: An example multi-Region primary key
    MultiRegion: true
    EnableKeyRotation: true
    PendingWindowInDays: 10
    KeyPolicy:
      Version: 2012-10-17
      Id: key-default-1
      Statement:
        - Sid: Enable IAM User Permissions
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:root'
          Action: 'kms:*'
          Resource: '*'
        - Sid: Allow administration of the key
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:user/Alice'
          Action:
            - 'kms:ReplicateKey'
            - 'kms:Create*'
            - 'kms:Describe*'
            - 'kms:Enable*'
            - 'kms:List*'
            - 'kms:Put*'
            - 'kms:Update*'
            - 'kms:Revoke*'
            - 'kms:Disable*'
            - 'kms:Get*'
            - 'kms:Delete*'
            - 'kms:ScheduleKeyDeletion'
            - 'kms:CancelKeyDeletion'
          Resource: '*'
        - Sid: Allow use of the key
          Effect: Allow
          Principal:
            AWS: 'arn:aws:iam::111122223333:user/Bob'
          Action:
            - 'kms:DescribeKey'
            - 'kms:Encrypt'
            - 'kms:Decrypt'
            - 'kms:ReEncrypt*'
            - 'kms:GenerateDataKey'
            - 'kms:GenerateDataKeyWithoutPlaintext'
          Resource: '*'</code></pre></div><h2 id="aws-resource-kms-key--seealso">See also</h2><div class="itemizedlist">
         
         
         
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#kms_keys">AWS KMS keys</a> in the <em>AWS Key Management Service
              Developer Guide</em>.</p>
        </li><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_CreateKey.html">CreateKey</a> in the <em>AWS Key Management Service API
            Reference</em>.</p>
        </li><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/kms/latest/developerguide/create-keys.html">Creating
              keys</a> in the <em>AWS Key Management Service Developer
            Guide</em>.</p>
        </li><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/kms/latest/developerguide/asymm-create-key.html">Creating
            asymmetric KMS keys</a> in the <em>AWS Key Management Service Developer
            Guide</em>.
          </p>
        </li><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/kms/latest/developerguide/hmac-create-key.html">Creating
              HMAC KMS keys</a> in the <em>AWS Key Management Service Developer
                Guide</em>.
          </p>
        </li><li class="listitem">
          <p>
            <a href="https://docs.aws.amazon.com/kms/latest/developerguide/create-primary-keys.html">Creating multi-Region primary keys</a> in the <em>AWS Key Management Service
              Developer Guide</em>.</p>
        </li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-resource-kms-alias.html">AWS::KMS::Alias</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-kms-key-tag.html">Tag</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Key Management Service (KMS)&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Key Management Service (KMS)&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>