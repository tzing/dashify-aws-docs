<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Utilizzo delle AWS CloudFormation macro per eseguire elaborazioni personalizzate sui modelli - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="template-macros" /><meta name="default_state" content="template-macros" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="description" content="Utilizza le macro per eseguire elaborazioni personalizzate sui modelli, da azioni semplici come find-and-replace operazioni a trasformazioni estese di interi modelli." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guida per l'utente" /><meta name="abstract" content="Crea e gestisci le implementazioni AWS dell'infrastruttura in modo prevedibile e ripetuto utilizzando questa guida per AWS CloudFormation l'utente." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-macros.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guida per l'utente" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guida per l'utente" /><meta id="panorama-serviceConsolePage" value="Utilizzo delle AWS CloudFormation macro per eseguire elaborazioni personalizzate sui modelli" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Utilizzo delle AWS CloudFormation macro per eseguire elaborazioni personalizzate sui modelli - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisioning delle risorse,configurazione delle risorse,gestione dell'infrastruttura,CloudFormer,CloudFormation pila,CloudFormation modello,set di modifiche" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per l'utente",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Utilizzo dei modelli AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Utilizzo delle AWS CloudFormation macro per eseguire elaborazioni personalizzate sui modelli",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-guide.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guida per l'utente</a></div><div id="page-toc-src"><a href="#template-macros-overview">Come funzionano le macro AWS CloudFormation</a><a href="#template-macros-author">Creazione di una definizione di AWS CloudFormation macro</a><a href="#template-macros-use">Utilizzo delle AWS CloudFormation macro nei modelli</a><a href="#template-macros-examples-list">Esempi di macro</a><a href="#template-macros-seealso">Consulta anche</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="template-macros">Utilizzo delle AWS CloudFormation macro per eseguire elaborazioni personalizzate sui modelli</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Le macro consentono di eseguire elaborazioni personalizzate sui modelli, da azioni semplici come  find-and-replace  operazioni a trasformazioni estese di interi modelli.</p><p>Per avere un'idea della gamma di possibilità, prendete in considerazione le <code class="code">AWS::Serverless</code> trasformazioni <code class="code">AWS::Include</code> and, che sono macro ospitate da: AWS CloudFormation</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p><code class="code"><a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Trasformazione AWS::Include</a></code> ti consente di inserire frammenti di modello boilerplate nei modelli.</p>
        </li><li class="listitem">
            <p><code class="code"><a href="./transform-aws-serverless.html">Trasformazione AWS::Serverless</a></code>prende un intero modello scritto nella sintassi AWS Serverless Application Model (AWS SAM) e lo trasforma ed espande in un modello conforme. AWS CloudFormation (Per ulteriori informazioni sulle applicazioni serverless e su AWS SAM, consulta l'argomento relativo all'<a href="https://docs.aws.amazon.com/lambda/latest/dg/deploying-lambda-apps.html">implementazione di applicazioni basate su Lambda</a> nella <em>Guida per gli sviluppatori diAWS Lambda </em>).</p>
        </li></ul></div><h2 id="template-macros-overview">Come funzionano le macro AWS CloudFormation</h2><p>L'elaborazione di modelli mediante macro comporta due fasi principali: la <em>creazione</em> della macro stessa e quindi l'<em>utilizzo</em> della macro per eseguire l'elaborazione sui modelli.</p><p>Per creare una definizione di macro, devi creare quanto segue:</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>Una AWS Lambda funzione per eseguire l'elaborazione del modello. Questa funzione Lambda accetta un frammento di modello o un intero modello e qualsiasi parametro supplementare che definisci. Restituisce quindi l'intero modello o il frammento di modello elaborato come risposta.</p>
        </li><li class="listitem">
            <p>Una risorsa di tipo <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></code> che consente agli utenti di chiamare la funzione Lambda dall'interno AWS CloudFormation dei modelli. Questa risorsa specifica l'ARN della funzione Lambda da richiamare per questa macro nonché ulteriori proprietà facoltative per facilitare il debug. Per creare questa risorsa all'interno di un account, crea un modello che includa una <code class="code"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></code> risorsa, quindi crea uno stack o un set di stack con le autorizzazioni gestite automaticamente dal modello. AWS CloudFormation StackSetsattualmente non supporta la creazione o l'aggiornamento di set di stack con autorizzazioni gestite dai servizi da modelli che fanno riferimento alle macro.</p>
        </li></ul></div><p>Per utilizzare una macro, fai riferimento alla macro nel modello:</p><div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>Per elaborare una sezione o un <em>frammento</em> di un modello, fai riferimento alla macro in una funzione <code class="code"><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></code> posizionata in relazione al contenuto del modello che intendi trasformare. Quando utilizzi <code class="code">Fn::Transform</code>, puoi anche passare qualsiasi parametro specificato di cui necessita.</p>
        </li><li class="listitem">
            <p>Per elaborare un intero modello, fai riferimento alla macro nella sezione <a href="./transform-section-structure.html">Trasformazione</a> del modello.</p>
        </li></ul></div><p>Quindi, crea in genere un set di modifiche ed eseguilo. (L'elaborazione delle macro può aggiungere più risorse di cui potresti non essere a conoscenza. Per assicurarti di conoscere tutte le modifiche introdotte dalle macro, ti consigliamo vivamente di utilizzare i set di modifiche.) AWS CloudFormation passa il contenuto del modello specificato, insieme a eventuali parametri aggiuntivi specificati, alla funzione Lambda specificata nella risorsa macro. La funzione Lambda restituisce il contenuto di modello elaborato, che si tratti di un frammento o di un intero modello.</p><p>Dopo aver chiamato tutte le macro del modello, AWS CloudFormation genera un set di modifiche che include il contenuto del modello elaborato. Dopo aver esaminato il set di modifiche, eseguilo per applicare le modifiche.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Se il modello di set di stack contiene riferimenti a una o più macro, devi creare il set di stack direttamente dal modello elaborato, senza prima esaminare le modifiche risultanti in un set di modifiche. Per creare o aggiornare direttamente il set di stack, è necessario utilizzare l'<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a>azione <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a>o e specificare la <code class="code">CAPABILITY_AUTO_EXPAND</code> funzionalità. Prima di creare o aggiornare un set di stack da un modello che fa riferimento direttamente alle macro, assicurarsi di sapere che elaborazione eseguono le macro.</p></div></div><div class="mediaobject">
         
            
            <img src="images/template-macro-use.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;            Utilizzate la funzione Fn::Transform intrinseca o la Transform sezione del modello per passare il contenuto del modello e i parametri associati alla Lambda funzione sottostante della macro, che restituisce il contenuto del modello elaborato.&#xA;        " style="max-width:100%" />
         
         
    </div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Se si è in grado di creare o aggiornare uno stack direttamente da un modello elaborato, senza prima rivedere le modifiche proposte in un set di modifiche, puoi farlo specificando la funzionalità <code class="code">CAPABILITY_AUTO_EXPAND</code> durante una richiesta <code class="code">CreateStack</code> o <code class="code">UpdateStack</code>. Devi creare stack unicamente direttamente da un modello che fa riferimento alle macro se si conosce l'elaborazione eseguita dalle macro.</p><p>Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html">CreateStack</a>o consulta l'<em>AWS CloudFormation API <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html">UpdateStack</a></em>Reference.</p></div></div><h2 id="template-macros-author">Creazione di una definizione di AWS CloudFormation macro</h2>
        <p>Quando si crea una definizione di macro, la definizione della macro rende disponibile la funzione Lambda sottostante nell'account specificato in modo che la AWS CloudFormation richiami per elaborare i modelli.</p>
        
        <h3 id="template-macros-lambda-interface">AWS CloudFormation interfaccia con funzione macro</h3>
            <p>Per le macro, AWS CloudFormation richiama le funzioni Lambda sottostanti con la seguente mappatura degli eventi. AWS CloudFormation invia la richiesta in formato JSON e si aspetta che anche la risposta della funzione sia formattata come JSON.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "region" : "<code class="replaceable">us-east-1</code>",
    "accountId" : "<code class="replaceable">$ACCOUNT_ID</code>",
    "fragment" : <span>{</span> <code class="replaceable">...</code> },
    "transformId" : "<code class="replaceable">$TRANSFORM_ID</code>",
    "params" : <span>{</span> <code class="replaceable">...</code> },
    "requestId" : "<code class="replaceable">$REQUEST_ID</code>",
    "templateParameterValues" : <span>{</span> <code class="replaceable">...</code> }
}</code></pre>

            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><b>Regione</b></p>
                    <p>La Regione in cui si trova la macro.</p>
                </li><li class="listitem"><p><b>accountId</b></p>
                    <p>L'ID account dell'account da cui la macro richiama la funzione Lambda.</p>
                </li><li class="listitem"><p><b>fragment</b></p>
                    <p>Il contenuto di modello disponibile per l'elaborazione personalizzata, in formato JSON.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem"><p>Per le macro incluse nella sezione <code class="code">Transform</code> del modello, si tratta dell'intero modello tranne la sezione <code class="code">Transform</code>.</p></li><li class="listitem"><p>Per le macro incluse nella chiamata della funzione intrinseca <code class="code">Fn::Transform</code>, include tutti i nodi di pari livello (e i relativi figli) in base alla posizione della funzione intrinseca nel modello ad eccezione della funzione <code class="code">Fn::Transform</code>. Per ulteriori informazioni, consulta <a href="#template-macros-scope">AWS CloudFormation ambito macro</a>.</p></li></ul></div>
                </li><li class="listitem"><p><b>transformId</b></p>
                    <p>Il nome della macro che richiama questa funzione.</p>
                </li><li class="listitem"><p><b>params</b></p>
                    <p>Per le chiamate di <code class="code">Fn::Transform</code> funzione, qualsiasi parametro specificato per la funzione. AWS CloudFormation non valuta questi parametri prima di passarli alla funzione.</p>
                    <p>Per le macro incluse nella sezione <code class="code">Transform</code> del modello, questa sezione è vuota.</p>
                </li><li class="listitem"><p><b>requestId</b></p>
                    <p>L'ID della richiesta che richiama questa funzione.</p>
                </li><li class="listitem"><p><b>templateParameterValues</b></p>
                    <p>Qualsiasi parametro specificato nella sezione <a href="./parameters-section-structure.html">Parametri</a> del modello. AWS CloudFormation valuta questi parametri prima di passarli alla funzione.</p>
                </li></ul></div>
            <p>AWS CloudFormation si aspetta che la funzione sottostante restituisca una risposta nel seguente formato JSON:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "requestId" : "<code class="replaceable">$REQUEST_ID</code>",
    "status" : "<code class="replaceable">$STATUS</code>",
    "fragment" : <span>{</span> <code class="replaceable">...</code> }
    "errorMessage": "optional error message for failures"
}</code></pre>
            <div class="itemizedlist">
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><b>requestId</b></p>
                    <p>L'ID della richiesta che richiama questa funzione. Deve corrispondere all'ID della richiesta fornito da AWS CloudFormation quando si richiama la funzione.</p>
                </li><li class="listitem"><p><b>status</b></p>
                    <p>Lo stato della richiesta (senza distinzione tra maiuscole e minuscole). Deve essere impostato su <code class="code">success</code>. AWS CloudFormation considera qualsiasi altra risposta come un errore.</p>
                </li><li class="listitem"><p><b>fragment</b></p>
                    <p>Il contenuto del modello elaborato AWS CloudFormation da includere nel modello elaborato, inclusi i fratelli. AWS CloudFormation sostituisce il contenuto del modello passato alla funzione Lambda con il frammento di modello che riceve nella risposta Lambda.</p>
                    <p>Il contenuto di modello elaborato deve essere in formato JSON valido e l'inclusione dello stesso nel modello elaborato deve generare un modello valido.</p>
                    <p>Se la funzione non modifica effettivamente il contenuto del modello che AWS CloudFormation
le viene trasmesso, ma è comunque necessario includerlo nel modello elaborato, la funzione deve restituire il contenuto del modello nella risposta. AWS CloudFormation </p>
                </li><li class="listitem">
                    <p><b>errorMessage</b></p>
                    <p>Il messaggio di errore che spiega perché la trasformazione non è riuscita.  CloudFormation visualizza questo messaggio di errore nel riquadro <b>Eventi</b> della pagina dei <b>Dettagli dello stack</b> per lo stack.</p>
                    <p>Ad esempio, "Error creating change set: Transform <code class="replaceable">Account AWS
account number</code>::<code class="replaceable">macro name</code> failed with: <code class="replaceable">error message string</code>".</p>
                </li></ul></div>
            <p>Per informazioni su ulteriori considerazioni relative alla creazione di macro, consulta <a href="#template-macros-considerations">Considerazioni sulla creazione di definizioni di macro AWS CloudFormation</a>.</p>
         
        
        <h3 id="template-macros-permissions">AWS CloudFormation ambito e autorizzazioni dell'account macro</h3>
            <p>Puoi utilizzare le macro solo nell'account in cui sono state create come risorsa. Il nome della macro deve essere univoco in un determinato account. Tuttavia, puoi rendere disponibile la stessa funzionalità in vari account abilitando l'accesso tra più account sulla funzione Lambda sottostante e quindi creando definizioni di macro che fanno riferimento a quella funzione in molteplici account. Nell'esempio seguente, tre account contengono definizioni di macro che puntano alla stessa funzione Lambda.</p>
            <div class="mediaobject">
                 
                    <img src="images/template-macro-accounts.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                    Consentendo l'accesso a più account alla Lambda funzione, AWS consente di creare macro in più account che fanno riferimento a tale funzione.&#xA;                " style="max-width:100%" />
                 
                 
            </div>
            <p>Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-overview.html">Panoramica della gestione delle autorizzazioni di accesso alle risorse AWS Lambda nella Guida perAWS Lambda</a> <em>gli</em> sviluppatori.</p>
            <p>Per creare una definizione di macro, l'utente deve disporre delle autorizzazioni per creare uno stack o set di stack nell'account specificato.</p>
            <p> AWS CloudFormation Per eseguire correttamente una macro inclusa in un modello, l'utente deve disporre delle <code class="code">Invoke</code> autorizzazioni per la funzione Lambda sottostante. Per evitare un potenziale aumento delle autorizzazioni, AWS CloudFormation impersona l'utente durante l'esecuzione della macro. Per ulteriori informazioni, consulta la pagina relativa al <a href="https://docs.aws.amazon.com/lambda/latest/dg/intro-permission-model.html">modello di autorizzazioni Lambda</a> nella <em>Guida per gli sviluppatori diAWS Lambda </em> e la pagina relativa a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/list_lambda.html">operazioni e chiavi del contesto di condizione per AWS Lambda</a> nella <em>Guida per l'utente di IAM</em>.</p>
            <p>Le <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Trasformazione AWS::Include</a> trasformazioni <a href="./transform-aws-serverless.html">Trasformazione AWS::Serverless</a> e sono macro ospitate da. AWS CloudFormationNon sono necessarie autorizzazioni speciali per utilizzarle e sono disponibili da qualsiasi account in AWS CloudFormation.</p>
          
        <h3 id="template-macros-debug">Macro di debug AWS CloudFormation</h3>
            <p>Per facilitare il debug, puoi anche specificare le proprietà <code class="code">LogGroupName</code> e <code class="code">LogRoleArn</code> quando crei il tipo di risorsa <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a> per la macro. Queste proprietà consentono di specificare il gruppo di  CloudWatch  log a cui AWS CloudFormation inviare le informazioni di registrazione degli errori quando si richiama la AWS Lambda funzione sottostante della macro e il ruolo da AWS CloudFormation assumere quando si inviano le voci di registro a tali registri.</p>
          
        <h3 id="template-macros-billing">Fatturazione</h3>
            <p>Quando una macro viene eseguita, al proprietario della funzione Lambda vengono addebitati i costi relativi all'esecuzione di quella funzione.</p>
            <p>Le <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Trasformazione AWS::Include</a> trasformazioni <a href="./transform-aws-serverless.html">Trasformazione AWS::Serverless</a> e sono macro ospitate da. AWS CloudFormationIl loro utilizzo non comporta alcun costo.</p>
         
        <h3 id="template-macros-considerations">Considerazioni sulla creazione di definizioni di macro AWS CloudFormation</h3>
            <p>Quando crei definizioni di macro, considera quanto segue:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                
                 
                 
                 
                
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p>Le macro sono supportate solo Regioni AWS dove AWS Lambda sono disponibili. Per l'elenco delle Regioni in cui Lambda è disponibile, consulta l'argomento relativo a <a href="https://docs.aws.amazon.com/general/latest/gr/lambda-service.html">endpoint e quote diAWS Lambda</a>.</p></li><li class="listitem"><p>Qualsiasi frammento di modello elaborato deve essere in formato JSON valido.</p></li><li class="listitem"><p>Qualsiasi frammento di modello elaborato deve superare controlli di convalida per un'operazione di creazione o aggiornamento di stack e creazione o aggiornamento di set di stack.</p></li><li class="listitem"><p>AWS CloudFormation risolve prima le macro e poi elabora il modello. Il modello risultante deve essere in formato JSON valido e non deve superare il limite di dimensioni stabilito.</p></li><li class="listitem"><p>A causa dell'ordine in cui  CloudFormation  elabora gli elementi di un modello, una macro non può includere moduli nel contenuto del modello elaborato a cui ritorna.  CloudFormation Per ulteriori informazioni sui moduli, consulta <a href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/modules.html">Developing modules</a> nella <em>CloudFormation CLI User Guide</em>.</p></li><li class="listitem"><p>Quando si utilizza la funzionalità di ripristino dell'aggiornamento, AWS CloudFormation utilizza una copia del modello originale. Il rollback del modello originale viene eseguito anche se il frammento incluso è stato modificato.</p></li><li class="listitem"><p>L'inclusione di macro in altre macro non funziona in quanto non vengono elaborate in modo iterativo.</p></li><li class="listitem"><p>La funzione intrinseca <code class="code">Fn::ImportValue</code> non è attualmente supportata nelle macro.</p></li><li class="listitem"><p>Le funzioni intrinseche incluse nel modello sono valutate dopo le macro. Pertanto, il contenuto di modello elaborato restituito dalla macro può includere chiamate alle funzioni intrinseche, che vengono valutate normalmente.</p></li><li class="listitem"><p>StackSets attualmente non supporta la creazione o l'aggiornamento di set di stack con autorizzazioni gestite dal servizio da modelli che fanno riferimento alle macro. AWS CloudFormation </p></li><li class="listitem"><p>Se il modello di set di stack contiene riferimenti a una o più macro, devi creare o aggiornare il set di stack direttamente dal modello elaborato, senza prima esaminare le modifiche risultanti in un set di modifiche. Per creare o aggiornare direttamente lo stack set, utilizzate l'azione <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a>o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a>e specificate la funzionalità. <code class="code">CAPABILITY_AUTO_EXPAND</code> L'elaborazione di macro può aggiungere molteplici risorse di cui potresti non essere a conoscenza. Prima di creare o aggiornare un set di stack da un modello che fa riferimento direttamente alle macro, assicurarsi di sapere che elaborazione eseguono le macro.</p></li><li class="listitem">
                    
                    <p>I set di modifiche non supportano attualmente stack nidificati. Se desideri creare o aggiornare uno stack utilizzando un modello che fa riferimento a delle macro <em>e</em> contiene stack nidificati, devi creare o aggiornare lo stack direttamente. Per eseguire questa operazione, utilizzate l'<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html"><code class="code">UpdateStack</code></a>azione <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html"><code class="code">CreateStack</code></a>o e specificate la <code class="code">CAPABILITY_AUTO_EXPAND</code> funzionalità.</p>
                </li></ul></div>
         
        <div class="procedure"><h6>Per creare una definizione di AWS CloudFormation macro:</h6><ol><li>
                <p><a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-app.html">Crea una AWS Lambda funzione</a> che elabori i AWS CloudFormation modelli.</p>
                <p>La funzione Lambda creata esegue l'elaborazione del contenuto di modello. La funzione può elaborare qualsiasi parte di un modello, fino all'intero modello. Per informazioni sulla mappatura di eventi alla quale la funzione deve aderire, consulta <a href="#template-macros-lambda-interface">AWS CloudFormation interfaccia con funzione macro</a>. Per informazioni su ulteriori considerazioni relative alla creazione di macro, consulta <a href="#template-macros-considerations">Considerazioni sulla creazione di definizioni di macro AWS CloudFormation</a>.</p>
            </li><li>
                <p><a href="./template-guide.html">Crea un modello</a> contenente un tipo di <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a>risorsa.</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem"><p>È necessario specificare le proprietà <code class="code">Name</code> e <code class="code">FunctionName</code>. La <code class="code">FunctionName</code> proprietà specifica l'ARN della funzione Lambda da richiamare AWS CloudFormation quando viene eseguita la macro.</p></li><li class="listitem"><p>Per facilitare il debug, è anche possibile specificare le proprietà <code class="code">LogGroupName</code> e <code class="code">LogRoleArn</code>.</p></li></ul></div>
            </li><li>
                <p><a href="./cfn-console-create-stack.html">Creare uno stack</a> a partire dal modello contenente la macro nell'account desiderato oppure <a href="./stacksets-getting-started-create.html#stacksets-getting-started-create-self-managed">creare un set di stack con autorizzazioni autogestite</a> a partire dal modello che fa riferimento alla macro nell'account amministratore, quindi creare istanze stack negli account di destinazione desiderati .</p>
                <p>Dopo aver AWS CloudFormation creato con successo gli stack che contengono la definizione della macro, la macro è disponibile per l'uso all'interno di tali account.</p>
            </li></ol></div>


    <h2 id="template-macros-use">Utilizzo delle AWS CloudFormation macro nei modelli</h2>
        <p>Dopo AWS CloudFormation aver creato con successo gli stack che contengono la definizione della macro, la macro è disponibile per l'uso all'interno di tali account. Puoi utilizzare una macro facendo riferimento alla stessa in un modello, nella posizione appropriata relativa al contenuto del modello che desideri elaborare.</p>
        <h3 id="template-macros-order">AWS CloudFormation ordine di valutazione delle macro</h3>
            <p>È possibile fare riferimento a più macro in un determinato modello, incluse le trasformazioni ospitate da AWS CloudFormation, ad esempio <a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Trasformazione AWS::Include</a> and. <a href="./transform-aws-serverless.html">Trasformazione AWS::Serverless</a></p>
            <p>Le macro vengono valutate nell'ordine, secondo la relativa posizione nel modello, da quella più nidificata a quella più generale. Le macro nella stessa posizione nel modello vengono valutate in serie in base all'ordine in cui sono elencate.</p>
            <p>Le trasformazioni come <code class="code">AWS::Include</code> e <code class="code">AWS::Transform</code> vengono gestite come qualsiasi altra macro in termini di ordine e ambito dell'operazione.</p>
            <p>Ad esempio, nell'esempio di modello riportato di seguito, AWS CloudFormation valuta per prima cosa la <code class="code">PolicyAdder</code> macro, perché è la macro con il nido più profondo del modello. AWS CloudFormation quindi valuta <code class="code">MyMacro</code> prima della valutazione <code class="code">AWS::Serverless</code> perché è elencata in precedenza nella sezione. <code class="code">AWS::Serverless</code> <code class="code">Transform</code></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
 Transform: [MyMacro, AWS::Serverless]
 Resources:
    WaitCondition:
      Type: AWS::CloudFormation::WaitCondition
    MyBucket:
      Type: 'AWS::S3::Bucket'
      Properties:
        BucketName: MyBucket
        Tags: [<span>{</span>"key":"value"}]
        'Fn::Transform':
          - Name: PolicyAdder
        CorsConfiguration:[]
    MyEc2Instance:
      Type: 'AWS::EC2::Instance'
      Properties:
        ImageID: "ami-123"</code></pre>
          
        
        <h3 id="template-macros-scope">AWS CloudFormation ambito macro</h3>
            <p>Le macro a cui si fa riferimento nella sezione <code class="code">Transform</code> di un modello possono elaborare l'intero contenuto di quel modello.</p>
            <p>Le macro a cui si fa riferimento in una funzione <code class="code">Fn::Transform</code> possono elaborare il contenuto di qualsiasi elemento di pari livello (inclusi i figli) di quella funzione <code class="code">Fn::Transform</code> nel modello.</p>
            <p>Ad esempio, nell'esempio di modello seguente, <code class="code">AWS::Include</code> può elaborare tutte le proprietà <code class="code">MyBucket</code> in base alla posizione della funzione <code class="code">Fn::Transform</code> che la contiene. <code class="code">MyMacro</code> può elaborare il contenuto dell'intero modello per via della relativa inclusione nella sezione <code class="code">Transform</code>.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">
// Start of processable content for MyMacro
AWSTemplateFormatVersion: 2010-09-09 
 Transform: [MyMacro]
 Resources:
    WaitCondition:
      Type: AWS::CloudFormation::WaitCondition
    MyBucket:
      Type: 'AWS::S3::Bucket'  //Start of processable content for AWS::Include
      Properties:
        BucketName: MyBucket 
        Tags: [<span>{</span>"key":"value"}] 
        'Fn::Transform':
          - Name: 'AWS::Include'
              Parameters:
                Location: s3://<code class="replaceable">DOC-EXAMPLE-BUCKET</code>/MyFileName.yaml
        CorsConfiguration:[]   //End of processable content for AWS::Include
    MyEc2Instance:
      Type: 'AWS::EC2::Instance' 
      Properties:
        ImageID: "ami-123"
// End of processable content for MyMacro         </code></pre>
          
        
         
         <h3 id="template-macros-change-sets">Set di modifiche e AWS CloudFormation macro</h3>
            <p>Per creare o aggiornare uno stack utilizzando un modello che fa riferimento a macro, crea un set di modifiche e quindi eseguilo. Un set di modifiche descrive le operazioni eseguite da  CloudFormation  in base al modello elaborato. L'elaborazione di macro può aggiungere molteplici risorse di cui potresti non essere a conoscenza. Per assicurarti di essere a conoscenza di tutte le modifiche introdotte dalle macro, ti consigliamo di utilizzare set di modifiche. Dopo aver esaminato il set di modifiche, puoi eseguirlo per applicare le modifiche.</p>
            <p>Una macro può aggiungere risorse IAM al modello. Per queste risorse, AWS CloudFormation
richiede l'<a href="./using-iam-template.html#using-iam-capabilities">accettazione delle funzionalità</a>. Poiché non è AWS CloudFormation possibile sapere quali risorse vengono aggiunte prima di elaborare il modello, potrebbe essere necessario riconoscere le funzionalità IAM al momento della creazione del set di modifiche, a seconda che le macro di riferimento contengano risorse IAM. In questo modo, quando si esegue il set di modifiche, AWS CloudFormation dispone delle funzionalità necessarie per creare risorse IAM.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Se il modello di set di stack contiene riferimenti a una o più macro, devi creare il set di stack direttamente dal modello elaborato, senza prima esaminare le modifiche risultanti in un set di modifiche. Per creare o aggiornare direttamente lo stack set, è necessario utilizzare l'<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a>azione <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a>o e specificare la <code class="code">CAPABILITY_AUTO_EXPAND</code> funzionalità. Prima di creare o aggiornare un set di stack da un modello che fa riferimento direttamente alle macro, assicurarsi di sapere che elaborazione eseguono le macro.</p></div></div>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Se si è in grado di creare o aggiornare uno stack direttamente da un modello elaborato, senza prima rivedere le modifiche proposte in un set di modifiche, puoi farlo specificando la funzionalità <code class="code">CAPABILITY_AUTO_EXPAND</code> durante una richiesta <code class="code">CreateStack</code> o <code class="code">UpdateStack</code>. È sufficiente creare stack direttamente da un modello di stack che contiene macro se si conosce l'elaborazione della macro. Non puoi utilizzare set di modifiche con macro di set di stack; è necessario aggiornare il set di stack direttamente.</p><p>Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStack.html"><code class="code">CreateStack</code></a>o <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStack.html"><code class="code">UpdateStack</code></a>consulta l'<em>AWS CloudFormation API Reference.</em></p></div></div>
            <p>Se utilizzi i AWS CLI, puoi utilizzare <code class="code">deploy</code> i comandi <code class="code">package</code> and per ridurre il numero di passaggi necessari per avviare pile di modelli che fanno riferimento alle macro. Per ulteriori informazioni, consulta la pagina relativa all'<a href="https://docs.aws.amazon.com/lambda/latest/dg/deploying-lambda-apps.html">implementazione di applicazioni basate su Lambda</a> nella <em>Guida per gli sviluppatori diAWS Lambda </em>.</p>
         
   
        <h3 id="template-macros-template-stage">Fase e macro del modello  CloudFormation </h3>
            <p>La <em>fase</em> di un modello indica se il modello è il modello originale inviato dall'utente o uno in cui sono AWS CloudFormation state elaborate le macro.</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem"><p><code class="code">Original</code>: il modello che l'utente ha originariamente inviato per creare o aggiornare lo stack o set di stack.</p></li><li class="listitem"><p><code class="code">Processed</code>: il modello AWS CloudFormation utilizzato per creare o aggiornare lo stack o lo stack set dopo l'elaborazione delle macro a cui si fa riferimento. Il modello elaborato è in formato JSON, anche se il modello originale è in formato YAML.</p></li></ul></div>
            <p>Utilizza il modello elaborato per la risoluzione dei problemi relativi allo stack. Se un modello non fa riferimento a macro, il modello originale e quello elaborato sono identici.</p>
            <p>È possibile utilizzare la AWS CloudFormation <a href="./cfn-console-view-stack-data-resources.html">console</a> o visualizzare la fase <a href="./using-cfn-get-template.html">AWS CLI</a>di un modello di stack.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>La dimensione massima per un modello di stack elaborato è di 51.200 byte quando viene passata direttamente a una richiesta <code class="code">CreateStack</code>, <code class="code">UpdateStack</code> o <code class="code">ValidateTemplate</code>, oppure 1 MB quando viene passata come un oggetto S3 usando un URL del modello Amazon S3. Tuttavia, durante l'elaborazione  CloudFormation  aggiorna lo stato temporaneo del modello in quanto elabora in serie le macro contenute nel modello. Per questo motivo, le dimensioni del modello <em>durante l'elaborazione</em> possono temporaneamente superare le dimensioni consentite di un modello completamente elaborato.  CloudFormation consente un certo buffer per questi modelli in corso di elaborazione. Tuttavia, è opportuno progettare i modelli e le macro tenendo presenti le dimensioni massime consentite per un modello di stack elaborato.</p><p>Se  CloudFormation  restituisce un <code class="code">Transformation data limit exceeded</code> errore durante l'elaborazione del modello, significa che il modello ha superato la dimensione massima  CloudFormation  consentita durante l'elaborazione.</p><p>Per risolvere questo problema, valutare se eseguire le seguenti operazioni:</p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem"><p>Ristrutturate il modello in più modelli per evitare di superare le dimensioni massime per i modelli in corso di elaborazione. Ad esempio:</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem"><p>Utilizzare modelli di stack nidificati per incapsulare parti del modello. Per ulteriori informazioni, consulta <a href="./using-cfn-nested-stacks.html">Utilizzo di stack nidificati</a>.</p></li><li class="listitem"><p>Creare più stack e utilizzare riferimenti tra stack per scambiare informazioni tra loro. Per ulteriori informazioni, consulta <a href="./walkthrough-crossstackref.html">Spiegazione passo per passo: fare riferimento ad output di risorse in un altro stack AWS CloudFormation</a>.</p></li></ul></div>
                    </li><li class="listitem"><p>Riduci la dimensione del frammento di modello restituito da una determinata macro.  CloudFormation non altera il contenuto dei frammenti restituiti dalle macro.</p></li></ul></div></div></div>
         
        
        <div class="procedure"><h6>Per utilizzare una AWS CloudFormation macro nel modello</h6><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Per eseguire correttamente una macro AWS CloudFormation a cui si fa riferimento in un modello, l'utente deve disporre delle <code class="code">Invoke</code> autorizzazioni per la funzione Lambda sottostante. Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/lambda/latest/dg/access-control-overview.html">Panoramica della gestione delle autorizzazioni di accesso alle risorse AWS Lambda nella Guida perAWS Lambda</a> <em>gli</em> sviluppatori.</p></div></div><ol><li>
                <p>Includere un riferimento alla macro nel modello.</p>
                <div class="itemizedlist">
                     
                      
                <ul class="itemizedlist"><li class="listitem">
                        <p>Per elaborare un frammento di modello, fare riferimento alla macro in una funzione <code class="code"><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></code> posizionata in relazione al contenuto del modello che si intende elaborare.</p>
                    </li><li class="listitem">
                        <p>Per elaborare l'intero modello, fare riferimento alla macro nella sezione <a href="./transform-section-structure.html">Trasformazione</a> del modello.</p>
                    </li></ul></div>
            </li><li>
                <p><a href="./using-cfn-updating-stacks-changesets-create.html">Creare un set di modifiche</a> utilizzando il modello.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Se il modello di set di stack contiene riferimenti a una o più macro, devi creare il set di stack direttamente dal modello elaborato, senza prima esaminare le modifiche risultanti in un set di modifiche. Per creare o aggiornare direttamente lo stack set, è necessario utilizzare l'<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a>azione <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a>o e specificare la funzionalità. <code class="code">CAPABILITY_AUTO_EXPAND</code> Prima di creare o aggiornare un set di stack da un modello che fa riferimento direttamente alle macro, assicurarsi di sapere che elaborazione eseguono le macro.</p></div></div>
            </li><li>
                <p>Esaminare ed <a href="./using-cfn-updating-stacks-changesets-execute.html">eseguire il set di modifiche</a>.</p>
                <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Se il modello di set di stack contiene riferimenti a una o più macro, devi creare il set di stack direttamente dal modello elaborato, senza prima esaminare le modifiche risultanti in un set di modifiche. Per creare o aggiornare direttamente il set di stack, è necessario utilizzare l'<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_UpdateStackSet.html"><code class="code">UpdateStackSet</code></a>azione <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateStackSet.html"><code class="code">CreateStackSet</code></a>o e specificare la <code class="code">CAPABILITY_AUTO_EXPAND</code> funzionalità. Prima di creare o aggiornare un set di stack da un modello che fa riferimento direttamente alle macro, assicurarsi di sapere che elaborazione eseguono le macro.</p></div></div>
            </li></ol></div>

     
        <h2 id="template-macros-examples-list">Esempi di macro</h2>
        <p>Oltre alla <a href="./macros-example.html">Esempio di macro: creazione e utilizzo di una macro</a> procedura dettagliata di questa guida, puoi trovare macro di esempio, tra cui codice sorgente e modelli, nella sezione <a href="https://github.com/awslabs/aws-cloudformation-templates/tree/master/aws/services/CloudFormation/MacrosExamples/" rel="noopener noreferrer" target="_blank"><span>Esempi di macro del repository</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> <a href="https://github.com/awslabs" rel="noopener noreferrer" target="_blank"><span>Amazon Web Services -</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> Labs on.  GitHub Questi esempi vengono forniti "così come sono" per scopi didattici.</p>
    <h2 id="template-macros-seealso">Consulta anche</h2>
        <p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudformation-macro.html">AWS::CloudFormation::Macro</a></p>

        <p><a href="./transform-section-structure.html">Trasformazione</a></p>
        <p><a href="./intrinsic-function-reference-transform.html">Fn::Transform</a></p>
        
        <p><a href="./transform-aws-serverless.html">Trasformazione AWS::Serverless</a></p>
        <p><a href="./create-reusable-transform-function-snippets-and-add-to-your-template-with-aws-include-transform.html">Trasformazione AWS::Include</a></p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./crpg-ref-requesttypes-update.html">Aggiornamento</div><div id="next" class="next-link" accesskey="n" href="./macros-example.html">Esempio di macro: creazione e utilizzo di una macro</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-macros.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>