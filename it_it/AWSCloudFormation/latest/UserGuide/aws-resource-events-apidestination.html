<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::Events::ApiDestination - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-events-apidestination" /><meta name="default_state" content="aws-resource-events-apidestination" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" /><meta name="description" content="Creates an API destination, which is an HTTP invocation endpoint configured as a target for events." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_Events.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" hreflang="x-default" /><meta name="feedback-item" content="EventBridge" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::Events::ApiDestination" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::Events::ApiDestination - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EventBridge&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon EventBridge resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_Events.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::Events::ApiDestination",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_Events.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_Events.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-events-apidestination-syntax">Syntax</a><a href="#aws-resource-events-apidestination-properties">Properties</a><a href="#aws-resource-events-apidestination-return-values">Return values</a><a href="#aws-resource-events-apidestination--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-events-apidestination">AWS::Events::ApiDestination</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Creates an API destination, which is an HTTP invocation endpoint configured as a target
      for events.</p><p>When using ApiDesinations with OAuth authentication we recommend these best practices:</p><div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem"><p>Create a secret in Secrets Manager with your OAuth credentials.</p></li><li class="listitem"><p>Reference that secret in your CloudFormation template for <code class="code">AWS::Events::Connection</code> using 
       CloudFormation dynamic reference syntax. For more information, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/dynamic-references.html#dynamic-references-secretsmanager">Secrets Manager secrets</a>.</p></li></ul></div><p>When the Connection resource is created the secret will be passed to EventBridge and stored in the customer account using “Service Linked Secrets,” 
      effectively creating two secrets. This will minimize the cost because the original secret is only accessed when a CloudFormation template is created or updated, 
      not every time an event is sent to the ApiDestination. The secret stored in the customer account by EventBridge is the one used for each event sent to the 
      ApiDestination and AWS is responsible for the fees.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The secret stored in the customer account by EventBridge can’t be updated directly, only when a CloudFormation template is updated.  </p></div></div><p>For examples of CloudFormation templates that use secrets, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-connection.html#aws-resource-events-connection--examples">Examples</a>.</p><h2 id="aws-resource-events-apidestination-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-events-apidestination-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::Events::ApiDestination",
  "Properties" : <span>{</span>
      "<a href="#cfn-events-apidestination-connectionarn">ConnectionArn</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-events-apidestination-description">Description</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-events-apidestination-httpmethod">HttpMethod</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-events-apidestination-invocationendpoint">InvocationEndpoint</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-events-apidestination-invocationratelimitpersecond">InvocationRateLimitPerSecond</a>" : <code class="replaceable">Integer</code>,
      "<a href="#cfn-events-apidestination-name">Name</a>" : <code class="replaceable">String</code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-events-apidestination-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::Events::ApiDestination
Properties:
  <a href="#cfn-events-apidestination-connectionarn">ConnectionArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-events-apidestination-description">Description</a>: <code class="replaceable">String</code>
  <a href="#cfn-events-apidestination-httpmethod">HttpMethod</a>: <code class="replaceable">String</code>
  <a href="#cfn-events-apidestination-invocationendpoint">InvocationEndpoint</a>: <code class="replaceable">String</code>
  <a href="#cfn-events-apidestination-invocationratelimitpersecond">InvocationRateLimitPerSecond</a>: <code class="replaceable">Integer</code>
  <a href="#cfn-events-apidestination-name">Name</a>: <code class="replaceable">String</code>
</code></pre></div><h2 id="aws-resource-events-apidestination-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-events-apidestination-connectionarn"><span class="term"><code class="code">ConnectionArn</code></span></dt><dd>
         <p>The ARN of the connection to use for the API destination. The destination endpoint must
      support the authorization type specified for the connection.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">^arn:aws([a-z]|\-)*:events:([a-z]|\d|\-)*:([0-9]<span>{</span>12})?:connection\/[\.\-_A-Za-z0-9]+\/[\-A-Za-z0-9]+$</code></p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">1600</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-events-apidestination-description"><span class="term"><code class="code">Description</code></span></dt><dd>
         <p>A description for the API destination to create.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Maximum</em>: <code class="code">512</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-events-apidestination-httpmethod"><span class="term"><code class="code">HttpMethod</code></span></dt><dd>
         <p>The method to use for the request to the HTTP invocation endpoint.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">GET | HEAD | POST | OPTIONS | PUT | DELETE | PATCH</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-events-apidestination-invocationendpoint"><span class="term"><code class="code">InvocationEndpoint</code></span></dt><dd>
         <p>The URL to the HTTP invocation endpoint for the API destination.</p>
      <p><em>Required</em>: Yes</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">^((%[0-9A-Fa-f]<span>{</span>2}|[-()_.!~*';/?:@\x26=+$,A-Za-z0-9])+)([).!';/?:,])?$</code></p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">2048</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-events-apidestination-invocationratelimitpersecond"><span class="term"><code class="code">InvocationRateLimitPerSecond</code></span></dt><dd>
         <p>The maximum number of requests per second to send to the HTTP invocation endpoint.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: Integer</p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-events-apidestination-name"><span class="term"><code class="code">Name</code></span></dt><dd>
         <p>The name for the API destination to create.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">64</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd></dl></div><h2 id="aws-resource-events-apidestination-return-values">Return values</h2><h3 id="aws-resource-events-apidestination-return-values-ref">Ref</h3><p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the name of the API destination that was created by the
      request.</p><h3 id="aws-resource-events-apidestination-return-values-fn--getatt">Fn::GetAtt</h3><p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following are the available attributes and sample return values.</p>
<p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html"><code class="code">Fn::GetAtt</code></a>.</p><h4 id="aws-resource-events-apidestination-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist"><dl><dt id="Arn-fn::getatt"><span class="term"><code class="code">Arn</code></span></dt><dd>
    <p>The ARN of the API destination that was created by the request.</p>
  </dd></dl></div><h2 id="aws-resource-events-apidestination--examples">Examples</h2><p></p><div class="highlights" id="inline-topiclist"><h6> </h6><ul><li><a href="#aws-resource-events-apidestination--examples--Create_an_ApiDestination_for_PagerDuty">Create an ApiDestination for PagerDuty</a></li><li><a href="#aws-resource-events-apidestination--examples--Create_an_ApiDestination_for_Slack">Create an ApiDestination for Slack</a></li></ul></div><h3 id="aws-resource-events-apidestination--examples--Create_an_ApiDestination_for_PagerDuty">Create an ApiDestination for PagerDuty</h3><p>The following example creates an ApiDestination connection to PagerDuty.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-events-apidestination--examples--Create_an_ApiDestination_for_PagerDuty--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Parameters": <span>{</span>
   "PagerDutyAPIKeyParam": <span>{</span>
       "Type": "String",
       "Description": "API Key for the PagerDuty Environment",
       "NoEcho": true
},
"Resources": <span>{</span>
   "MyConnection": <span>{</span>
       "Type": "AWS::Events::Connection",
       "Properties": <span>{</span>
           "AuthorizationType": "API_KEY",
           "Description": "Connection to PagerDuty API",
           "AuthParameters": <span>{</span>
               "ApiKeyAuthParameters": <span>{</span>
                   "ApiKeyName": "PagerDuty Authorization",
                   "ApiKeyValue": <span>{</span>
                       "Ref": "PagerDutyAPIKeyParam"
                   }
               }
           }
       }
   },
   "MyApiDestination": <span>{</span>
       "Type": "AWS::Events::ApiDestination",
       "Properties": <span>{</span>
           "ConnectionArn": <span>{</span>
               "Fn::GetAtt": [
                   "MyConnection",
                   "Arn"
               ]
           },
           "Description": "API Destination to send events to PagerDuty",
           "HttpMethod": "POST",
           "InvocationEndpoint": "https://events.pagerduty.com/v2/enqueue"
      }
   },
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-events-apidestination--examples--Create_an_ApiDestination_for_PagerDuty--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  PagerDutyAPIKeyParam: 
    Type: String
    Description: API Key for the PagerDuty Environment
    NoEcho: True
        
Resources:
  MyConnection:
    Type: AWS::Events::Connection
    Properties:
      AuthorizationType: API_KEY
      Description: Connection to PagerDuty API
      AuthParameters:
        ApiKeyAuthParameters:
          ApiKeyName: PagerDuty Authorization
          ApiKeyValue: !Ref PagerDutyAPIKeyParam
        
  MyApiDestination:
    Type: AWS::Events::ApiDestination
    Properties:
      ConnectionArn: !GetAtt MyConnection.Arn
      Description: API Destination to send events to PagerDuty
      HttpMethod: POST
      InvocationEndpoint: https://events.pagerduty.com/v2/enqueue</code></pre></div><h3 id="aws-resource-events-apidestination--examples--Create_an_ApiDestination_for_Slack">Create an ApiDestination for Slack</h3><p>The following example creates an ApiDestination connection to Slack.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-events-apidestination--examples--Create_an_ApiDestination_for_Slack--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Parameters": <span>{</span>
   "pName": <span>{</span>
       "Type": "String"
    },
   "pEndpoint": <span>{</span>
       "Type": "String"
    },
   "pSecretId": <span>{</span>
       "Type": "String"
    }
 },
"Resources": <span>{</span>
   "SlackRole": <span>{</span>
       "Type": "AWS::IAM::Role",
       "Properties": <span>{</span>
           "AssumeRolePolicyDocument": <span>{</span>
               "Version": "2012-10-17",
               "Statement": [
                <span>{</span>
                   "Effect": "Allow",
                   "Principal": <span>{</span>
                       "Service": [
                           "events.amazonaws.com"
                        ]
                    },
                   "Action": [
                       "sts:AssumeRole"
                    ]
               }
               ]
           },
          "Path": "/service-role/",
          "Policies": [
           <span>{</span>
              "PolicyName": "eventbridge-api-destinations",
              "PolicyDocument": <span>{</span>
                  "Version": "2012-10-17",
                  "Statement": [
                   <span>{</span>
                      "Effect": "Allow",
                      "Action": [
                          "events:InvokeApiDestination"
                       ],
                      "Resource": <span>{</span>
                          "Fn::GetAtt": [
                              "SlackDestination",
                              "Arn"
                           ]
                      }
                  }
                  ]
              }
         }
        ]
      }
    },
   "SlackBus": <span>{</span>
       "Type": "AWS::Events::EventBus",
       "Properties": <span>{</span>
           "Name": <span>{</span>
               "Ref": "pName"
            }
        }
    },
   "SlackConnection": <span>{</span>
       "Type": "AWS::Events::Connection",
       "Properties": <span>{</span>
           "AuthorizationType": "API_KEY",
           "AuthParameters": <span>{</span>
               "ApiKeyAuthParameters": <span>{</span>
                   "ApiKeyName": "Authorization",
                   "ApiKeyValue": <span>{</span>
                       "Fn::Sub": "<span>{</span><span>{</span>resolve:secretsmanager:arn:aws:secretsmanager:$<span>{</span>AWS::Region}:$<span>{</span>AWS::AccountId}:secret:$<span>{</span>pSecretId}}}"
                    }
                } 
            }
        }
    },
   "SlackDestination": <span>{</span>
       "Type": "AWS::Events::ApiDestination",
       "Properties": <span>{</span>
           "ConnectionArn": <span>{</span>
               "Fn::GetAtt": [
                   "SlackConnection",
                   "Arn"
                ]
            },
           "HttpMethod": "POST",
           "InvocationEndpoint": <span>{</span>
               "Ref": "pEndpoint"
            },
           "InvocationRateLimitPerSecond": 10
        }
    },
   "SlackRule": <span>{</span>
       "Type": "AWS::Events::Rule",
       "Properties": <span>{</span>
           "State": "ENABLED",
           "EventBusName": <span>{</span>
               "Ref": "SlackBus"
            },
           "EventPattern": <span>{</span>
               "detail": <span>{</span>
                   "channel": [
                       "aws-integration-testing"
                    ]
                }
           },
         "Targets": [
          <span>{</span>
              "Id": "slack-destination",
              "Arn": <span>{</span>
                  "Fn::GetAtt": [
                      "SlackDestination",
                      "Arn"
                   ]
              },
             "RoleArn": <span>{</span>
                 "Fn::GetAtt": [
                     "SlackRole",
                     "Arn"
                  ]
              },
            "HttpParameters": <span>{</span>
                "HeaderParameters": <span>{</span>
                    "Content-type": "application/json;charset=utf-8"
                 }
             },
            "InputTransformer": <span>{</span>
                "InputPathsMap": <span>{</span>
                    "channel": "$.detail.channel",
                    "text": "$.detail.text"
                 },
                "InputTemplate": "<span>{</span>\n  \"channel\": &lt;channel&gt;,\n  \"text\": &lt;text&gt;\n}\n"
            }
          }
          ]
        }
    }
 },
"Outputs": <span>{</span>
    "outRole": <span>{</span>
        "Value": <span>{</span>
            "Fn::GetAtt": [
                "SlackRole",
                "Arn"
             ]
         }
     },
    "outBus": <span>{</span>
        "Value": <span>{</span>
            "Fn::GetAtt": [
                "SlackBus",
                "Arn"
             ]
         }
     },
    "outConnection": <span>{</span>
        "Value": <span>{</span>
            "Fn::GetAtt": [
                "SlackConnection",
                "Arn"
             ]
         }
     },
    "outConnectionSecret": <span>{</span>
        "Value": <span>{</span>
            "Fn::GetAtt": [
                "SlackConnection",
                "SecretArn"
             ]
         }
     },
    "outDestination": <span>{</span>
        "Value": <span>{</span>
            "Fn::GetAtt": [
                "SlackDestination",
                "Arn"
             ]
         }
     },
    "outRule": <span>{</span>
        "Value": <span>{</span>
            "Fn::GetAtt": [
                "SlackRule",
                "Arn"
             ]
         }
     }
 }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-events-apidestination--examples--Create_an_ApiDestination_for_Slack--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Parameters:
  pName:
    Type: String
  pEndpoint:
    Type: String
  pSecretId:
    Type: String
    
Resources:
  SlackRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: '2012-10-17'
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - events.amazonaws.com
            Action:
              - sts:AssumeRole
      Path: '/service-role/'
      Policies:
        - PolicyName: eventbridge-api-destinations
          PolicyDocument:
            Version: '2012-10-17'
            Statement:
              - Effect: Allow
                Action:
                  - events:InvokeApiDestination
                Resource: !GetAtt SlackDestination.Arn
  SlackBus:
    Type: AWS::Events::EventBus
      Properties:
        Name: !Ref pName
  SlackConnection:
    Type: AWS::Events::Connection
    Properties:
      AuthorizationType: API_KEY
      AuthParameters:
        ApiKeyAuthParameters:
          ApiKeyName: Authorization
          ApiKeyValue: !Sub '<span>{</span><span>{</span>resolve:secretsmanager:arn:aws:secretsmanager:$<span>{</span>AWS::Region}:$<span>{</span>AWS::AccountId}:secret:$<span>{</span>pSecretId}}}'
  SlackDestination:
    Type: AWS::Events::ApiDestination
    Properties:
      ConnectionArn: !GetAtt SlackConnection.Arn
      HttpMethod: POST
      InvocationEndpoint: !Ref pEndpoint
      InvocationRateLimitPerSecond: 10
  SlackRule:
    Type: AWS::Events::Rule
    Properties:
      State: ENABLED
      EventBusName: !Ref SlackBus
      EventPattern:
        detail:
          channel: ["aws-integration-testing"]
      Targets:
        - Id: slack-destination
          Arn: !GetAtt SlackDestination.Arn
          RoleArn: !GetAtt SlackRole.Arn
          HttpParameters:
            HeaderParameters:
              Content-type: application/json;charset=utf-8
          InputTransformer:
            InputPathsMap:
              "channel": "$.detail.channel"
              "text": "$.detail.text"
          InputTemplate: |
            <span>{</span>
              "channel": &lt;channel&gt;,
              "text": &lt;text&gt;
            }
Outputs:
  outRole:
    Value: !GetAtt SlackRole.Arn
  outBus:
    Value: !GetAtt SlackBus.Arn
  outConnection:
    Value: !GetAtt SlackConnection.Arn
  outConnectionSecret:
    Value: !GetAtt SlackConnection.SecretArn
  outDestination:
    Value: !GetAtt SlackDestination.Arn
  outRule:
    Value: !GetAtt SlackRule.Arn</code></pre></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./AWS_Events.html">Amazon EventBridge</div><div id="next" class="next-link" accesskey="n" href="./aws-resource-events-archive.html">AWS::Events::Archive</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EventBridge&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EventBridge&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-events-apidestination.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>