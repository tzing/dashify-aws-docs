<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Gestione dei gruppi di sicurezza con AWS CloudFormation - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="quickref-ec2-sg" /><meta name="default_state" content="quickref-ec2-sg" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" /><meta name="description" content="Utilizza questi frammenti di modello di esempio per gestire i gruppi di sicurezza per le istanze Amazon EC2 con AWS CloudFormation." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Guida per l'utente" /><meta name="abstract" content="Crea e gestisci le implementazioni AWS dell'infrastruttura in modo prevedibile e ripetuto utilizzando questa guida per AWS CloudFormation l'utente." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Guida per l'utente" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Guida per l'utente" /><meta id="panorama-serviceConsolePage" value="Gestione dei gruppi di sicurezza con AWS CloudFormation" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Gestione dei gruppi di sicurezza con AWS CloudFormation - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,provisioning delle risorse,configurazione delle risorse,gestione dell'infrastruttura,CloudFormer,CloudFormation pila,CloudFormation modello,set di modifiche" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per l'utente",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Utilizzo dei modelli AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Frammenti di modello",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/CHAP_TemplateQuickRef.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Frammenti di modello Amazon EC2 CloudFormation",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Gestione dei gruppi di sicurezza con AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">Guida per l'utente</a></div><div id="page-toc-src"><a href="#quickref-ec2-instances-associate-security-group">Associazione di un gruppo di sicurezza a un'istanza Amazon EC2</a><a href="#quickref-ec2-instances-ingress">Creazione di gruppi di sicurezza con regole di ingresso</a><a href="#scenario-ec2-security-group-elbingress">Creazione di un Elastic Load Balancer con una regola di ingresso al gruppo di sicurezza</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter><filter label="" id=""></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="quickref-ec2-sg">Gestione dei gruppi di sicurezza con AWS CloudFormation</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>I seguenti frammenti mostrano come utilizzare AWS CloudFormation per gestire i gruppi di sicurezza e le istanze Amazon EC2 per controllare l'accesso alle risorse AWS.</p><div class="highlights" id="inline-topiclist"><h6>Categorie dei frammenti</h6><ul><li><a href="#quickref-ec2-instances-associate-security-group">Associazione di un gruppo di sicurezza a un'istanza Amazon EC2</a></li><li><a href="#quickref-ec2-instances-ingress">Creazione di gruppi di sicurezza con regole di ingresso</a></li><li><a href="#scenario-ec2-security-group-elbingress">Creazione di un Elastic Load Balancer con una regola di ingresso al gruppo di sicurezza</a></li></ul></div>
            <h2 id="quickref-ec2-instances-associate-security-group">Associazione di un gruppo di sicurezza a un'istanza Amazon EC2</h2>
            <p>I seguenti frammenti di esempio mostrano come associare un'istanza Amazon EC2 a un gruppo di sicurezza Amazon VPC predefinito utilizzando AWS CloudFormation.</p>
            <div class="highlights" id="inline-topiclist"><h6>Frammenti di esempio</h6><ul><li><a href="#using-cfn-getatt-default-values">Associazione di un gruppo di sicurezza VPC predefinito a un'istanza Amazon EC2</a></li><li><a href="#scenario-ec2-volumeattachment">Creazione di un'istanza Amazon EC2 con un volume e un gruppo di sicurezza collegati</a></li></ul></div>
             
                <h3 id="using-cfn-getatt-default-values">Associazione di un gruppo di sicurezza VPC predefinito a un'istanza Amazon EC2</h3>
                <p>Il seguente frammento crea un Amazon VPC, una sottorete all'interno del VPC e un'istanza Amazon EC2. Il VPC viene creato utilizzando una risorsa <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-vpc.html">AWS::EC2::VPC</a>. L'intervallo di indirizzi IP per il VPC è definito nel modello più grande e viene richiamato dal parametro <code class="code">MyVPCCIDRRange</code>.</p>
                <p>Una sottorete viene creata all'interno del VPC utilizzando una risorsa <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-subnet.html">AWS::EC2:: Subnet</a>. La sottorete è associata al VPC, a cui si fa riferimento come <code class="code">MyVPC</code>.</p>
                <p>Un'istanza EC2 viene avviata all'interno del VPC e della sottorete utilizzando una risorsa. <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-instance.html">AWS::EC2::Instance</a> Questa risorsa specifica l'Amazon Machine Image (AMI) da utilizzare per avviare l'istanza, la sottorete in cui verrà eseguita l'istanza e il gruppo di sicurezza da associare all'istanza. La <code class="code">Fn::FindInMap</code> funzione viene utilizzata per recuperare i valori dalla <code class="code">AWSRegionToAMI</code> mappatura definita nel modello per determinare il valore della risorsa. <code class="code">ImageId</code> <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-instance.html">AWS::EC2::Instance</a> </p>
                <p>L'ID del gruppo di sicurezza viene ottenuto utilizzando la funzione <code class="code">Fn::GetAtt</code>, che recupera il gruppo di sicurezza predefinito dalla risorsa <code class="code">MyVPC</code>. </p>
                <p>L'istanza viene inserita all'interno della risorsa <code class="code">MySubnet</code> definita nel frammento. </p>

                <p>Quando crei un VPC utilizzando AWS CloudFormation, AWS crea automaticamente risorse predefinite all'interno del VPC, incluso un gruppo di sicurezza predefinito. Tuttavia, quando definisci un VPC all'interno di un modello AWS CloudFormation, potresti non avere accesso agli ID di queste risorse predefinite quando crei il modello. Per accedere e utilizzare le risorse predefinite specificate nel modello, puoi utilizzare funzioni intrinseche come <a href="./intrinsic-function-reference-getatt.html">Fn::GetAtt</a>. Questa funzione consente di lavorare con le risorse predefinite create automaticamente da AWS CloudFormation.</p>
                <div id="JSON" name="JSON" class="section langfilter">
                    <h4 id="quickref-ec2-example-15.json">JSON</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"MyVPC": <span>{</span>
    "Type": "AWS::EC2::VPC",
    "Properties": <span>{</span>
        "CidrBlock": <span>{</span>
            "Ref": "MyVPCCIDRRange"
        },
        "EnableDnsSupport": false,
        "EnableDnsHostnames": false,
        "InstanceTenancy": "default"
    }
},
"MySubnet": <span>{</span>
    "Type": "AWS::EC2::Subnet",
    "Properties": <span>{</span>
        "CidrBlock": <span>{</span>
            "Ref": "MyVPCCIDRRange"
        },
        "VpcId": <span>{</span>
            "Ref": "MyVPC"
        }
    }
},
"MyInstance": <span>{</span>
    "Type": "AWS::EC2::Instance",
    "Properties": <span>{</span>
        "ImageId": <span>{</span>
            "Fn::FindInMap": [
                "AWSRegionToAMI",
                <span>{</span>
                    "Ref": "AWS::Region"
                },
                "64"
            ]
        },
        "SecurityGroupIds": [
            <span>{</span>
                "Fn::GetAtt": [
                    "MyVPC",
                    "DefaultSecurityGroup"
                ]
            }
        ],
        "SubnetId": <span>{</span>
            "Ref": "MySubnet"
        }
    }
}</code></pre>
                </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h4 id="quickref-ec2-example-15.yaml">YAML</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyVPC:
  Type: AWS::EC2::VPC
  Properties:
    CidrBlock:
      Ref: MyVPCCIDRRange
    EnableDnsSupport: false
    EnableDnsHostnames: false
    InstanceTenancy: default
MySubnet:
  Type: AWS::EC2::Subnet
  Properties:
    CidrBlock:
      Ref: MyVPCCIDRRange
    VpcId:
      Ref: MyVPC
MyInstance:
  Type: AWS::EC2::Instance
  Properties:
    ImageId:
      Fn::FindInMap:
        - AWSRegionToAMI
        - Ref: AWS::Region
        - "64"
    SecurityGroupIds:
      - Fn::GetAtt:
          - MyVPC
          - DefaultSecurityGroup
    SubnetId:
      Ref: MySubnet</code></pre>
                </div>
             
             
                <h3 id="scenario-ec2-volumeattachment">Creazione di un'istanza Amazon EC2 con un volume e un gruppo di sicurezza collegati</h3>
                <p>Il seguente frammento crea un'istanza Amazon EC2 utilizzando una risorsa, che viene lanciata da <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html">AWS::EC2::Instance</a>un'AMI designata. L'istanza è associata a un gruppo di sicurezza che consente il traffico SSH in entrata sulla porta 22 da un indirizzo IP specificato, utilizzando una risorsa. <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a> Crea un volume Amazon EBS da 100 GB utilizzando una <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-volume.html">AWS::EC2::Volume</a>risorsa. Il volume viene creato nella stessa zona di disponibilità dell'istanza, come specificato dalla funzione <code class="code">GetAtt</code>, e viene montato sull'istanza sul dispositivo <code class="code">/dev/sdh</code>.</p>
                <p>Per ulteriori informazioni sulla creazione di volumi Amazon EBS, consulta <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-creating-volume.html">Creazione di un volume Amazon EBS</a>.</p>
                <div id="JSON" name="JSON" class="section langfilter">
                    <h4 id="quickref-ec2-example-14.json">JSON</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Ec2Instance": <span>{</span>
    "Type": "AWS::EC2::Instance",
    "Properties": <span>{</span>
        "SecurityGroups": [
            <span>{</span>
                "Ref": "InstanceSecurityGroup"
            }
        ],
        "ImageId": "<code class="replaceable">ami-1234567890abcdef0</code>"
    }
},
"InstanceSecurityGroup": <span>{</span>
    "Type": "AWS::EC2::SecurityGroup",
    "Properties": <span>{</span>
        "GroupDescription": "Enable SSH access via port 22",
        "SecurityGroupIngress": [
            <span>{</span>
                "IpProtocol": "tcp",
                "FromPort": "22",
                "ToPort": "22",
                "CidrIp": "<code class="replaceable">192.0.2.0/24</code>"
            }
        ]
    }
},
"NewVolume": <span>{</span>
    "Type": "AWS::EC2::Volume",
    "Properties": <span>{</span>
        "Size": "100",
        "AvailabilityZone": <span>{</span>
            "Fn::GetAtt": [
                "Ec2Instance",
                "AvailabilityZone"
            ]
        }
    }
},
"MountPoint": <span>{</span>
    "Type": "AWS::EC2::VolumeAttachment",
    "Properties": <span>{</span>
        "InstanceId": <span>{</span>
            "Ref": "Ec2Instance"
        },
        "VolumeId": <span>{</span>
            "Ref": "NewVolume"
        },
        "Device": "/dev/sdh"
    }
}</code></pre>
                </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h4 id="quickref-ec2-example-14.yaml">YAML</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Ec2Instance:
  Type: AWS::EC2::Instance
  Properties:
    SecurityGroups:
      - !Ref InstanceSecurityGroup
    ImageId: <code class="replaceable">ami-1234567890abcdef0</code>
InstanceSecurityGroup:
  Type: AWS::EC2::SecurityGroup
  Properties:
    GroupDescription: Enable SSH access via port 22
    SecurityGroupIngress:
      - IpProtocol: tcp
        FromPort: 22
        ToPort: 22
        CidrIp: <code class="replaceable">192.0.2.0/24</code>
NewVolume:
  Type: AWS::EC2::Volume
  Properties:
    Size: 100
    AvailabilityZone: !GetAtt [Ec2Instance, AvailabilityZone]
MountPoint:
  Type: AWS::EC2::VolumeAttachment
  Properties:
    InstanceId: !Ref Ec2Instance
    VolumeId: !Ref NewVolume
    Device: /dev/sdh</code></pre>
                </div>
             


         
            <h2 id="quickref-ec2-instances-ingress">Creazione di gruppi di sicurezza con regole di ingresso</h2>
            <p>I frammenti di esempio seguenti mostrano come configurare i gruppi di sicurezza con regole di ingresso specifiche utilizzando AWS CloudFormation.</p>
            <div class="highlights" id="inline-topiclist"><h6>Frammenti</h6><ul><li><a href="#scenario-ec2-security-group-rule">Creazione di un gruppo di sicurezza con regole di ingresso per l'accesso SSH e HTTP</a></li><li><a href="#scenario-ec2-security-group-two-ports">Creazione di un gruppo di sicurezza con regole di ingresso per l'accesso HTTP e SSH da intervalli CIDR specificati</a></li><li><a href="#scenario-ec2-security-group-ingress">Crea gruppi di sicurezza con riferimenti incrociati e regole di ingresso</a></li></ul></div>
             
                <h3 id="scenario-ec2-security-group-rule">Creazione di un gruppo di sicurezza con regole di ingresso per l'accesso SSH e HTTP</h3>

                <p>Il seguente frammento descrive due regole di ingresso per gruppi di sicurezza che utilizzano una risorsa. <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a> La prima regola di ingresso consente l'accesso SSH (porta 22) da un gruppo di sicurezza esistente denominato <code class="code">MyAdminSecurityGroup</code>, di proprietà dell'account AWS con il numero di account <code class="code">1111-2222-3333</code>. La seconda regola di ingresso consente l'accesso HTTP (porta 80) da un gruppo di sicurezza diverso denominato <code class="code">MySecurityGroupCreatedInCFN</code>, creato nello stesso modello. La funzione <code class="code">Ref</code> viene utilizzata per fare riferimento al nome logico del gruppo di sicurezza creato nello stesso modello. </p>
                <p>Nella prima regola di ingresso, è necessario aggiungere un valore per entrambe le proprietà <code class="code">SourceSecurityGroupName</code> e <code class="code">SourceSecurityGroupOwnerId</code>. Nella seconda regola di ingresso, <code class="code">MySecurityGroupCreatedInCFNTemplate</code> fa riferimento a un gruppo di sicurezza diverso, creato nello stesso modello. Verifica che il nome logico <code class="code">MySecurityGroupCreatedInCFNTemplate</code> corrisponda al nome logico effettivo della risorsa del gruppo di sicurezza specificata nel modello più grande. </p>
                <p>Per ulteriori informazioni sui gruppi di sicurezza, consulta <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-security-groups.html">Gruppi di sicurezza Amazon EC2 per istanze Linux</a> o <a href="https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/ec2-security-groups.html">Gruppi di sicurezza Amazon EC2 per istanze Windows</a>.</p>
                <div id="JSON" name="JSON" class="section langfilter">
                    <h4 id="quickref-ec2-example-10.json">JSON</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"SecurityGroup": <span>{</span>
    "Type": "AWS::EC2::SecurityGroup",
    "Properties": <span>{</span>
        "GroupDescription": "Allow connections from specified source security group",
        "SecurityGroupIngress": [
            <span>{</span>
                "IpProtocol": "tcp",
                "FromPort": "22",
                "ToPort": "22",
                "SourceSecurityGroupName": "MyAdminSecurityGroup",
                "SourceSecurityGroupOwnerId": "<code class="replaceable">1111-2222-3333</code>"
            },
            <span>{</span>
                "IpProtocol": "tcp",
                "FromPort": "80",
                "ToPort": "80",
                "SourceSecurityGroupName": <span>{</span>
                    "Ref": "MySecurityGroupCreatedInCFNTemplate"
                }
            }
        ]
    }
}</code></pre>
                </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h4 id="quickref-ec2-example-10.yaml">YAML</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">SecurityGroup:
  Type: 'AWS::EC2::SecurityGroup'
  Properties:
    GroupDescription: Allow connections from specified source security group
    SecurityGroupIngress:
      - IpProtocol: tcp
        FromPort: '22'
        ToPort: '22'
        SourceSecurityGroupName: MyAdminSecurityGroup
        SourceSecurityGroupOwnerId: '<code class="replaceable">1111-2222-3333</code>'
      - IpProtocol: tcp
        FromPort: '80'
        ToPort: '80'
        SourceSecurityGroupName:
          Ref: MySecurityGroupCreatedInCFNTemplate</code></pre>
                </div>
             
             
                <h3 id="scenario-ec2-security-group-two-ports">Creazione di un gruppo di sicurezza con regole di ingresso per l'accesso HTTP e SSH da intervalli CIDR specificati</h3>

                <p>Il seguente frammento crea un gruppo di sicurezza per un'istanza Amazon EC2 con due regole in entrata. Le regole in entrata consentono il traffico TCP in ingresso sulle porte specificate dagli intervalli CIDR designati. Una <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a>risorsa viene utilizzata per specificare le regole. È possibile specificare un protocollo per ciascuna regola. Per TCP, è necessario anche specificare una porta o un intervallo di porte. Se non si specifica un gruppo di sicurezza di origine o un intervallo CIDR, lo stack verrà avviato correttamente, ma la regola non verrà applicata al gruppo di sicurezza. </p>
                <p>Per ulteriori informazioni sui gruppi di sicurezza, consulta <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-security-groups.html">Gruppi di sicurezza Amazon EC2 per istanze Linux</a> o <a href="https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/ec2-security-groups.html">Gruppi di sicurezza Amazon EC2 per istanze Windows</a>.</p>
                <div id="" name="" class="section langfilter">
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"ServerSecurityGroup": <span>{</span>
  "Type": "AWS::EC2::SecurityGroup",
  "Properties": <span>{</span>
    "GroupDescription": "Allow connections from specified CIDR ranges",
    "SecurityGroupIngress": [
      <span>{</span>
        "IpProtocol": "tcp",
        "FromPort": "80",
        "ToPort": "80",
        "CidrIp": "<code class="replaceable">192.0.2.0/24</code>"
      },
      <span>{</span>
        "IpProtocol": "tcp",
        "FromPort": "22",
        "ToPort": "22",
        "CidrIp": "<code class="replaceable">192.0.2.0/24</code>"
      }
    ]
  }
}</code></pre>
                </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h4 id="quickref-ec2-example-9.yaml">YAML</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">ServerSecurityGroup:
  Type: AWS::EC2::SecurityGroup
  Properties:
    GroupDescription: Allow connections from specified CIDR ranges
    SecurityGroupIngress:
      - IpProtocol: tcp
        FromPort: 80
        ToPort: 80
        CidrIp: <code class="replaceable">192.0.2.0/24</code>
      - IpProtocol: tcp
        FromPort: 22
        ToPort: 22
        CidrIp: <code class="replaceable">192.0.2.0/24</code></code></pre>
                </div>
             
             
                <h3 id="scenario-ec2-security-group-ingress">Crea gruppi di sicurezza con riferimenti incrociati e regole di ingresso</h3>

                <p>Il seguente frammento utilizza la <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a>risorsa per creare due gruppi di sicurezza Amazon EC2 e. <code class="code">SGroup1</code> <code class="code">SGroup2</code> <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group-ingress.html">Le regole di ingresso che consentono la comunicazione tra i due gruppi di sicurezza vengono create utilizzando la risorsa Ingress. AWS::EC2::SecurityGroup</a> <code class="code">SGroup1Ingress</code>stabilisce una regola di ingresso <code class="code">SGroup1</code> che consente il traffico TCP in entrata sulla porta 80 dal gruppo di sicurezza di origine,. <code class="code">SGroup2</code> <code class="code">SGroup2Ingress</code>stabilisce una regola di ingresso <code class="code">SGroup2</code> che consente il traffico TCP in entrata sulla porta 80 dal gruppo di sicurezza di origine,. <code class="code">SGroup1</code> </p>
                <div id="JSON" name="JSON" class="section langfilter">
                    <h4 id="quickref-ec2-example-12.json">JSON</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"SGroup1": <span>{</span>
    "Type": "AWS::EC2::SecurityGroup",
    "Properties": <span>{</span>
        "GroupDescription": "EC2 instance access"
    }
},
"SGroup2": <span>{</span>
    "Type": "AWS::EC2::SecurityGroup",
    "Properties": <span>{</span>
        "GroupDescription": "EC2 instance access"
    }
},
"SGroup1Ingress": <span>{</span>
    "Type": "AWS::EC2::SecurityGroupIngress",
    "Properties": <span>{</span>
        "GroupName": <span>{</span>
            "Ref": "SGroup1"
        },
        "IpProtocol": "tcp",
        "ToPort": "80",
        "FromPort": "80",
        "SourceSecurityGroupName": <span>{</span>
            "Ref": "SGroup2"
        }
    }
},
"SGroup2Ingress": <span>{</span>
    "Type": "AWS::EC2::SecurityGroupIngress",
    "Properties": <span>{</span>
        "GroupName": <span>{</span>
            "Ref": "SGroup2"
        },
        "IpProtocol": "tcp",
        "ToPort": "80",
        "FromPort": "80",
        "SourceSecurityGroupName": <span>{</span>
            "Ref": "SGroup1"
        }
    }
}</code></pre>
                </div>
                <div id="YAML" name="YAML" class="section langfilter">
                    <h4 id="quickref-ec2-example-12.yaml">YAML</h4>

                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">SGroup1:
  Type: AWS::EC2::SecurityGroup
  Properties:
    GroupDescription: EC2 Instance access
SGroup2:
  Type: AWS::EC2::SecurityGroup
  Properties:
    GroupDescription: EC2 Instance access
SGroup1Ingress:
  Type: AWS::EC2::SecurityGroupIngress
  Properties:
    GroupName: !Ref SGroup1
    IpProtocol: tcp
    ToPort: 80
    FromPort: 80
    SourceSecurityGroupName: !Ref SGroup2
SGroup2Ingress:
  Type: AWS::EC2::SecurityGroupIngress
  Properties:
    GroupName: !Ref SGroup2
    IpProtocol: tcp
    ToPort: 80
    FromPort: 80
    SourceSecurityGroupName: !Ref SGroup1</code></pre>
                </div>
             
         
            <h2 id="scenario-ec2-security-group-elbingress">Creazione di un Elastic Load Balancer con una regola di ingresso al gruppo di sicurezza</h2>

            <p>Il modello seguente crea una <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-elb.html">AWS::ElasticLoadBalancing::LoadBalancer</a>risorsa nella zona di disponibilità specificata. La <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-elb.html">AWS::ElasticLoadBalancing::LoadBalancer</a>risorsa è configurata per ascoltare il traffico HTTP sulla porta 80 e indirizzare le richieste alle istanze anche sulla porta 80. Elastic Load Balancer è responsabile del bilanciamento del carico del traffico HTTP in entrata tra le istanze.</p>
            <p> Inoltre, questo modello genera una <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">AWS::EC2::SecurityGroup</a>risorsa associata al load balancer. Questo gruppo di sicurezza viene creato con un'unica regola di ingresso, descritta come <code class="code">ELB
                    ingress group</code>, che consente il traffico TCP in entrata sulla porta 80. L'origine di questa regola di ingresso viene definita utilizzando la funzione <code class="code">Fn::GetAtt</code> per recuperare gli attributi dalla risorsa di bilanciamento del carico. <code class="code">SourceSecurityGroupOwnerId</code> utilizza <code class="code">Fn::GetAtt</code> per ottenere l'<code class="code">OwnerAlias</code> del gruppo di sicurezza di origine del sistema di bilanciamento del carico. <code class="code">SourceSecurityGroupName</code> utilizza <code class="code">Fn::Getatt</code> per ottenere il <code class="code">GroupName</code> del gruppo di sicurezza di origine dell'ELB. </p>
            <p>Questa configurazione garantisce una comunicazione sicura tra l'ELB e le istanze. </p>
            <p>Per ulteriori informazioni su Elastic Load Balancing, consulta la <em><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/what-is-load-balancing.html">Guida per l'utente di Elastic Load Balancing</a></em>.</p>

            <div id="JSON" name="JSON" class="section langfilter">
                <h3 id="quickref-ec2-example-11.json">JSON</h3>

                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Resources": <span>{</span>
        "MyELB": <span>{</span>
            "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
            "Properties": <span>{</span>
                "AvailabilityZones": [
                    "<code class="replaceable">aa-example-1a</code>"
                ],
                "Listeners": [
                    <span>{</span>
                        "LoadBalancerPort": "80",
                        "InstancePort": "80",
                        "Protocol": "HTTP"
                    }
                ]
            }
        },
        "MyELBIngressGroup": <span>{</span>
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": <span>{</span>
                "GroupDescription": "ELB ingress group",
                "SecurityGroupIngress": [
                    <span>{</span>
                        "IpProtocol": "tcp",
                        "FromPort": 80,
                        "ToPort": 80,
                        "SourceSecurityGroupOwnerId": <span>{</span>
                            "Fn::GetAtt": [
                                "MyELB",
                                "SourceSecurityGroup.OwnerAlias"
                            ]
                        },
                        "SourceSecurityGroupName": <span>{</span>
                            "Fn::GetAtt": [
                                "MyELB",
                                "SourceSecurityGroup.GroupName"
                            ]
                        }
                    }
                ]
            }
        }
    }
}</code></pre>
            </div>


            <div id="YAML" name="YAML" class="section langfilter">
                <h3 id="quickref-ec2-example-11.yaml">YAML</h3>

                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Resources:
  MyELB:
    Type: 'AWS::ElasticLoadBalancing::LoadBalancer'
    Properties:
      AvailabilityZones:
        - <code class="replaceable">aa-example-1a</code>
      Listeners:
        - LoadBalancerPort: '80'
          InstancePort: '80'
          Protocol: HTTP
  MyELBIngressGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: ELB ingress group
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: '80'
          ToPort: '80'
          SourceSecurityGroupOwnerId:
            Fn::GetAtt:
              - MyELB
              - SourceSecurityGroup.OwnerAlias
          SourceSecurityGroupName:
            Fn::GetAtt:
              - MyELB
              - SourceSecurityGroup.GroupName</code></pre>
            </div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./quickref-ec2-launch-templates.html">Crea modelli di lancio</div><div id="next" class="next-link" accesskey="n" href="./quickref-ec2-elastic-ip.html">Allocazione di IP elastici</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/quickref-ec2-sg.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>